"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7767],{76679:(e,t,o)=>{o.d(t,{D:()=>n});var i=o(91051);function n(e,t){const{onClick:o,onDoubleClick:n}=e(),a=(0,i.useRef)(0),r=(0,i.useRef)(!1);return(0,i.useCallback)((e=>{a.current&&window.clearTimeout(a.current),r.current?null==n||n(e):(r.current=!0,window.setTimeout((()=>{r.current=!1}),300),a.current=window.setTimeout((()=>{null==o||o(e)}),300))}),t)}},63464:(e,t,o)=>{function i(e){var t,o;return null!==(o=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==o?o:"UnknownComponent"}o.d(t,{i:()=>i})},88228:(e,t,o)=>{o.d(t,{n:()=>i,_:()=>n});const i=e=>{try{let t=btoa(e);return t=t.replace(/=+$/,""),encodeURIComponent(t)}catch(e){return null}},n=e=>{try{const t=decodeURIComponent(e);let o="";const i=t.length%4;2===i?o="==":3===i&&(o="=");const n=atob(t+o);if(!n)throw Error();return n}catch(e){return null}}},15073:(e,t,o)=>{o.d(t,{wC:()=>D,T:()=>I,bg:()=>B,g0:()=>R,yM:()=>L,Hx:()=>O});var i=o(64047),n=o(73566),a=o(48185),r=o(19630),l=o(35167),s=o(86254),d=o.n(s),c=o(82346),u=o(11348),p=o(60595),m=o(20948),h=o(53095),g=o(93859),v=o(10026),x=o(5549),b=o(49584),y=o(68854),_=o(3453),f=o(35468),j=o(21396),k=o(66958),C=o(88228);const w=({reportTarget:e})=>{if(!e)return null;const{report_type:t,video_owner:o,video_id:i,object_id:n}=e;let a=null;if(i&&o){const e=(0,k.fH)({uniqueId:null==o?void 0:o.uniqueId,videoId:i,secUid:null==o?void 0:o.secUid});a=`${location.origin}${e}`,"comment"===t&&(a=`${a}&cid=${(0,C.n)(n)}`)}return a};var S,P=o(84785),T=o(92702);!function(e){e[e.Normal=0]="Normal",e[e.Bully=1]="Bully",e[e.Legal=2]="Legal",e[e.Spam=3]="Spam",e[e.UserPretend=4]="UserPretend",e[e.UserProfile=5]="UserProfile",e[e.Netzdg=6]="Netzdg",e[e.Kopig=7]="Kopig",e[e.Avia=8]="Avia"}(S||(S={}));const I=[112,212,9014],D=[222,9015],O=({reportTarget:e})=>{const t=w({reportTarget:e});return"https://www.tiktok.com/legal/report/NetzDG?lang=de"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},R=({reportTarget:e})=>{const t=w({reportTarget:e});return"https://www.tiktok.com/legal/report/lcen?lang=fr"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},L=({reportTarget:e})=>{const t=w({reportTarget:e});return"https://www.tiktok.com/legal/copyright-policy"+(t?`?report_url=${encodeURIComponent(t)}`:"")};var Z;!function(e){e[e.Reason=0]="Reason",e[e.Normal=1]="Normal",e[e.Kopig=2]="Kopig",e[e.User=3]="User",e[e.BlockUser=4]="BlockUser",e[e.Finish=5]="Finish",e[e.Ftcreport=6]="Ftcreport"}(Z||(Z={}));let B=class extends n.D{constructor(e,t,o){super(),this.service=e,this.appContext=t,this.t=o,this.defaultState={reasons:null,showing:!1,loading:!1,requesting:void 0,reportTarget:null,lastStatus:-1,PageState:0,PageStateData:void 0,PreState:[],UserData:{selectedReason:void 0,submitresult:void 0,HistoryReason:[]},blockedVideos:[]}}setReportTarget(e,t){e.reportTarget=t}judgeFtc(e,t){"kid_mode_video"===t.report_type&&(e.PageState=6)}setReasons(e,t){e.reasons=t,e.PageStateData={reasons:t}}addBlockVideo(e,t){e.blockedVideos.includes(t)||e.blockedVideos.push(t)}removeBlockVideo(e,t){e.blockedVideos=e.blockedVideos.filter((e=>e!==t))}setLoading(e,t){e.loading=t}getReasons(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,t])=>{var o;if(d()(e,t.reportTarget)&&t.reasons&&(null===(o=t.reasons)||void 0===o?void 0:o.length)>0)return(0,c.of)(this.getActions().setReasons(t.reasons));const{report_type:i,lang:n,object_id:a}=e;return this.service.getReportReasons({report_type:i,lang:n,object_id:a}).pipe((0,g.b)((({body:e})=>{e.length||f.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:1.2,widthType:"half"})})),(0,h.z)((t=>{var o,i,n;if(0===t.statusCode){let a=null!==(o=t.body)&&void 0!==o?o:[];return"user"===e.report_type&&(a=null!==(n=null===(i=a.find((e=>9101===e.reason_type)))||void 0===i?void 0:i.next_reason)&&void 0!==n?n:a),(0,c.of)(this.getActions().setReasons(a))}return(0,c.of)(this.getActions().setReasons([]))})),(0,v.O)(this.getActions().setLoading(!0)),(0,x.l)(this.getActions().setLoading(!1)))})))}handleNextReason(e){return e.pipe((0,m.M)(this.state$),(0,g.b)((([{reason_id:e},{reportTarget:t}])=>{const{object_id:o="",report_type:i=""}=null!=t?t:{};_.y.handleReportNext({object_id:o,object_type:i,reason_id:e})})),(0,h.z)((([{nextReason:e},{PageStateData:t,PageState:o}])=>(0,c.of)(this.getActions().setPageStateData({reasons:e}),this.getActions().appendToPreState({state:o,data:t})))))}handleNextForm(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PageStateData:t,PageState:o}])=>(0,c.of)(this.getActions().setPageState(e),this.getActions().setPageStateData({}),this.getActions().appendToPreState({state:o,data:t})))))}setShowing(e,t){e.showing=t}showReport(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().setShowing(!0),this.getActions().judgeFtc(e),this.getActions().getReasons(e),this.getActions().setReportTarget(e)))))}hideReport(e){return e.pipe((0,h.z)((()=>(0,c.of)(this.getActions().setShowing(!1)))))}setRequesting(e,t){e.requesting=t}setLastStatus(e,t){e.lastStatus=t}postReport(e){return e.pipe((0,m.M)(this.state$,this.appContext.state$),(0,b.z)((([{reason:e,extraData:t},{reportTarget:o,UserData:i},{appContext:n}])=>{var a,r;if(!o)return u.E;const l=8===(null===(a=null==i?void 0:i.selectedReason)||void 0===a?void 0:a.special_type),s={};Array.isArray(e)&&"kid_mode_video"===o.report_type&&(s.additional_reasons=`%5B${e.join(",")}%5D`,e=e[0]);const d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({app_name:"tiktok_web",aid:1988,current_region:null==n?void 0:n.region,reporter_id:null===(r=null==n?void 0:n.user)||void 0===r?void 0:r.uid,reason:e},o),{target:o.object_id}),t),{report_type:"kid_mode_video"===o.report_type?"video":o.report_type}),s);return this.service.postReport(d).pipe((0,y.K)((()=>(0,c.of)({status_code:-1}))),(0,h.z)((t=>{let i;switch(t.status_code){case 90002:i={title:this.t("Web_report_thanks_for_report"),content:this.t("Web_report_report_detail"),button:this.t("live_close"),success:!1};break;case 0:i={title:this.t("Web_report_thanks_for_report"),content:l?this.t("avia_law_report_received_confirm"):this.t("Web_report_report_detail"),button:this.t("pm_mt_live_done"),success:!0};break;default:i={title:this.t("Web_report_report_for_error"),content:this.t("Sorry, something wrong with the server, please try again."),button:this.t("live_close"),success:!1}}if(0===t.status_code){const{object_id:t,report_type:i}=o;_.y.handleReportSubmit({object_id:t,object_type:i,reason_id:e})}return"video"===o.report_type&&0===t.status_code&&o.object_id?(0,c.of)(this.getActions().addBlockVideo(o.object_id),this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:i})):(0,c.of)(this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:i}))})),(0,v.O)(this.getActions().setRequesting(!0)),(0,x.l)(this.getActions().setRequesting(!1)))})))}setPageState(e,t){e.PageState=t}appendToPreState(e,t){e.PreState.push(t)}removeFromPreState(e){e.PreState.pop()}resetPreState(e){e.PreState=[]}setUserData(e,t){e.UserData=Object.assign(Object.assign({},e.UserData),t)}setPageStateData(e,t){e.PageStateData=t}resetState(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().resetPreState(),this.getActions().setUserData({selectedReason:void 0,HistoryReason:[]}),this.getActions().setPageState(0),this.getActions().setPageStateData(null)))))}handlePrevStep(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PreState:t}])=>{if(0===t.length)return u.E;const{state:o,data:i}=t[t.length-1];return(0,c.of)(this.getActions().setPageState(o),this.getActions().setPageStateData(i),this.getActions().removeFromPreState())})))}};(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setReportTarget",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"judgeFtc",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Array]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setReasons",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,String]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"addBlockVideo",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,String]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"removeBlockVideo",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setLoading",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"getReasons",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"handleNextReason",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"handleNextForm",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setShowing",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"showReport",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"hideReport",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setRequesting",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Number]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setLastStatus",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"postReport",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Number]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setPageState",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"appendToPreState",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"removeFromPreState",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"resetPreState",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setUserData",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setPageStateData",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"resetState",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"handlePrevStep",null),B=(0,i.__decorate)([(0,r.Y)("Report"),(0,i.__param)(2,(0,l.t)(j.s)),(0,i.__metadata)("design:paramtypes",[T.r,P.G,Function])],B)},92702:(e,t,o)=>{o.d(t,{r:()=>s});var i=o(64047),n=o(57244),a=o(82346),r=o(30626),l=o(4206);let s=class{constructor(e){this.fetch=e}getReportReasons(e){return this.fetch.get("/node/report/reasons",{query:e,baseUrlType:2})}postReport(e){return this.fetch.get("/aweme/v1/aweme/feedback/",{query:e,baseUrlType:2})}uploadImage(e){if(0===e.length)return(0,a.of)({data:[],statusCode:0});const t=new FormData;for(let o=0;o<e.length;o++){const i=e[o];t.append("type",i.type),t.append("size",`${i.size}`),t.append("name",i.name),t.append("height",i.height),t.append("width",i.width),t.append(`file${o}`,i,i.name)}return this.fetch.post("/node/feedback/upload_image/",{body:t,headers:{[r.eD]:this.fetch.csrfToken},baseUrlType:2,omitContentType:!0})}};s=(0,i.__decorate)([(0,n.G)(),(0,i.__metadata)("design:paramtypes",[l.r])],s)},16494:(e,t,o)=>{o.d(t,{Q:()=>s}),o(11040);var i=o(9236),n=o(91051),a=o(3453),r=o(40599),l=o(15073);function s({onShow:e,reportTarget:t}){const{showModal:o}=(0,r.J)(),s=(0,i.qj)(l.bg);return{handleShowReport:(0,n.useCallback)((i=>{null==e||e(i),o(),s.showReport(t),a.y.handleShowReport({object_type:t.report_type,type:t.report_type,object_id:t.object_id,play_mode:t.play_mode})}),[s,e,t,o])}}},72306:(e,t,o)=>{o.d(t,{l:()=>Ht});var i=o(11040),n=o(9236),a=o(91051),r=o(63464),l=o(40599),s=o(15073),d=o(76851),c=o(99122),u=o(89442),p=o(27319),m=o(8721),h=o(91497),g=o(16926),v=o(35468),x=o(63308),b=o(32913);const y=(0,b.Z)("div",{target:"eyl260m0"})((({theme:e})=>({minHeight:"226px",width:"400px",background:e.colors.BGPrimary,borderRadius:"8px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",padding:"32px"})),"label:DivWapper;"),_=(0,b.Z)("div",{target:"eyl260m1"})((({theme:e})=>({minHeight:"32px",width:"100%",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),f=(0,b.Z)("div",{target:"eyl260m2"})((({theme:e})=>({margin:"16px 0px 24px",width:"100%",textAlign:"center",lineHeight:"22px",fontSize:"16px",color:e.colors.TextSecondary})),"label:DivDetail;"),j=(0,b.Z)("div",{target:"eyl260m3"})({display:"flex",justifyContent:"space-between"},"label:DivContain;"),k=(0,b.Z)("button",{target:"eyl260m4"})((({theme:e,active:t})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:t?e.colors.Primary:e.colors.TextPrimary,backgroundColor:e.colors.BGSecondary2,border:` 1px solid ${t?e.colors.Primary:e.colors.TextPrimary}`})),"label:ButtonC;"),C=e=>{var t,o,r;const l=(0,m.Q)(),d=(0,g.fz)(x.K),{onClose:c}=e,u=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:o}=e;return{UserData:t,reportTarget:o}},dependencies:[]}),p=(0,a.useCallback)((e=>{var t,o;d.blockUser({sec_user_id:null!==(o=null===(t=u.reportTarget)||void 0===t?void 0:t.secUid)&&void 0!==o?o:"",block_type:1}).subscribe((e=>{0===e.status_code&&(c(),v.h.open({content:l("Blocked"),duration:3,widthType:"half"}))}))}),[c,null===(t=u.reportTarget)||void 0===t?void 0:t.secUid,d,l]);return(0,i.jsxs)(y,{children:[(0,i.jsx)(_,{children:l("Web_report_block_who",{username:null===(o=u.reportTarget)||void 0===o?void 0:o.nickname})},void 0),(0,i.jsx)(f,{children:l("Web_report_block_detail",{username:null===(r=u.reportTarget)||void 0===r?void 0:r.nickname})},void 0),(0,i.jsxs)(j,{children:[(0,i.jsx)(k,Object.assign({active:!1,onClick:e.onClose},{children:l("copyright_check_post_popup_cancel")}),void 0),(0,i.jsx)(k,Object.assign({active:!0,onClick:p},{children:l("webdm_block")}),void 0)]},void 0)]},void 0)};var w,S=o(74820),P=o(32431),T=o(41063),I=o(87133),D=o(30074);function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},O.apply(this,arguments)}const R=function(e){return a.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),w||(w=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.667 10c0 .918-.53 1.919-1.73 2.76C13.74 13.595 12 14.165 10 14.165c-2.001 0-3.741-.57-4.937-1.407-1.2-.84-1.73-1.841-1.73-2.76 0-.917.53-1.918 1.73-2.759C6.26 6.404 8 5.833 10 5.833c2.001 0 3.741.57 4.937 1.407 1.2.84 1.73 1.842 1.73 2.76zm1.666 0c0 3.222-3.73 5.833-8.333 5.833-4.602 0-8.333-2.611-8.333-5.833S5.397 4.167 10 4.167c4.602 0 8.333 2.611 8.333 5.833zm-7.083 0a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm1.667 0a2.917 2.917 0 11-5.834 0 2.917 2.917 0 015.834 0z",clipRule:"evenodd"})))};var L;function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Z.apply(this,arguments)}const B=function(e){return a.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),L||(L=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M8.473 3.488a1.25 1.25 0 011.944 1.04v10.943a1.25 1.25 0 01-1.944 1.04L4.331 13.75H2.5c-.69 0-1.25-.56-1.25-1.25v-5c0-.69.56-1.25 1.25-1.25h1.831l4.142-2.762zm.277 1.819l-3.704 2.47a.833.833 0 01-.463.14H2.917v4.166h1.666c.165 0 .326.049.463.14l3.704 2.47V5.307zm5 4.693c0-1.017-.405-1.94-1.063-2.616a.455.455 0 01-.042-.604l.529-.644a.393.393 0 01.576-.045A5.403 5.403 0 0115.417 10c0 1.536-.64 2.924-1.667 3.909a.393.393 0 01-.576-.046l-.53-.643a.455.455 0 01.043-.604A3.736 3.736 0 0013.75 10zm1.673-5.396a.438.438 0 00.038.597A6.645 6.645 0 0117.501 10c0 1.884-.782 3.585-2.04 4.799a.438.438 0 00-.038.597l.54.634c.149.175.413.197.58.04A8.312 8.312 0 0019.167 10c0-2.393-1.01-4.55-2.624-6.07a.401.401 0 00-.58.04l-.54.634z",clipRule:"evenodd"})))};var M;function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},F.apply(this,arguments)}const z=function(e){return a.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),M||(M=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M10.724 17.896c-.497.27-1.145.346-1.752-.02a3.015 3.015 0 01-1.462-2.584v-2.08H3.977a2.29 2.29 0 01-2.284-2.631l1.005-6.552a2.29 2.29 0 012.284-1.945H15.38a2.515 2.515 0 012.53 2.176.833.833 0 01.007.112v5.096a.833.833 0 01-.008.111c-.163 1.206-1.203 2.276-2.529 2.257h-1.4l-2.211 4.9c-.21.468-.573.904-1.045 1.16zm3.55-7.724h1.127c.365.006.765-.312.85-.77V4.438a.85.85 0 00-.86-.689h-1.117v6.424zM12.61 3.749H4.968a.624.624 0 00-.624.53v.001L3.34 10.83a.623.623 0 00.624.718h4.38c.46 0 .833.372.833.832v2.912a1.35 1.35 0 00.675 1.168h.003a.184.184 0 00.075-.027.816.816 0 00.319-.376l.002-.004 2.36-5.228V3.75z",clipRule:"evenodd"})))};var A=o(96770);const E=(0,b.Z)("label",{target:"e1d46yfg0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"16px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),U=(0,b.Z)("div",{target:"e1d46yfg1"})((({size:e})=>({color:"#fff",position:"relative",height:`${e}px`,lineHeight:`${e}px`})),"label:DivCheckboxSymbol;"),W=(0,b.Z)("input",{target:"e1d46yfg2"})((({selected:e,bordertype:t,theme:o,size:i})=>Object.assign(Object.assign({appearance:"none",width:`${i}px`,height:`${i}px`,border:`1.5px solid ${o.colors.LineSecondary}`,margin:"0 10px -2.5px 0"},e?{border:"none",backgroundColor:o.colors.Primary}:{}),"radio"===t?{borderRadius:"50%"}:{borderRadius:"2px"})),"label:InputCheckbox;"),V=(0,b.Z)("div",{target:"e1d46yfg3"})({pointerEvents:"none",position:"absolute",top:"2px",left:"3px",width:"15px",height:"15px"},"label:DivCheckboxIcon;"),G=(0,a.memo)((function({id:e,value:t,label:o,onChange:n,bordertype:r="radio",style:l={},size:s=22}){const d=(0,a.useCallback)((e=>{n&&n(e.target.checked)}),[n]);return(0,i.jsxs)(E,Object.assign({htmlFor:e,style:l},{children:[(0,i.jsxs)(U,Object.assign({size:s,className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,i.jsx)(W,{bordertype:r,selected:t,id:e,checked:t,type:"checkbox",size:s,onChange:d},void 0),t&&(0,i.jsx)(V,{children:(0,i.jsx)(A.Z,{width:16,height:16},void 0)},void 0)]}),void 0),o]}),void 0)}));var q=o(27918);const $=(0,b.Z)("form",{target:"ezqf9p60"})((({theme:e})=>[(0,q.GI)({theme:e,typography:"H6"}),{zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",width:"700px",margin:0}]),"label:FormReport;"),N=(0,b.Z)("div",{target:"ezqf9p61"})((({theme:e})=>({width:"400px",zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",margin:0})),"label:DivFormBox;"),H=(0,b.Z)("div",{target:"ezqf9p62"})({display:"flex",alignItems:"center",padding:"24px 24px 16px",height:"72px"},"label:DivFormHeader;"),Y=(0,b.Z)("div",{target:"ezqf9p63"})({cursor:"pointer",padding:"6px",height:"32px"},"label:DivBackButton;"),Q=(0,b.Z)("div",{target:"ezqf9p64"})({cursor:"pointer",padding:"9px",height:"32px"},"label:DivCloseButton;"),J=(0,b.Z)("h4",{target:"ezqf9p65"})((({theme:e})=>({fontSize:"20px",lineHeight:"32px",color:e.colors.TextPrimary,fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.bold,textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:H4FormTitle;");J.defaultProps=Object.assign(Object.assign({},J.defaultProps),{"data-e2e":"report-card-title"});const K=(0,b.Z)("div",{target:"ezqf9p66"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"50vh",overflowY:"auto",overflowX:"hidden",padding:"16px 16px 0px"})),"label:DivRadioWrapper;"),X=(0,b.Z)("div",{target:"ezqf9p67"})((({theme:e})=>({paddingBottom:"8px",paddingLeft:"8px",color:e.colors.TextSecondary,height:"22px",lineHeight:"22px"})),"label:DivSelectText;"),ee=(0,b.Z)("div",{target:"ezqf9p68"})((({theme:e})=>({color:e.colors.TextPrimary,lineHeight:"22px",fontSize:"16px",userSelect:"none"})),"label:DivReasonText;"),te=(0,b.Z)("label",{target:"ezqf9p69"})((({theme:e})=>({boxSizing:"border-box",minHeight:"54px",display:"flex",flex:"1 1 100%",flexDirection:"row",alignItems:"center",cursor:"pointer",position:"relative",wordBreak:"break-all",justifyContent:"space-between",padding:"8px",borderRadius:"8px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LabelRadio;");te.defaultProps=Object.assign(Object.assign({},te.defaultProps),{"data-e2e":"report-card-reason"});const oe=(0,b.Z)("div",{target:"ezqf9p610"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMMid;"),ie=(0,b.Z)("div",{target:"ezqf9p611"})((({theme:e})=>({padding:"8px",color:e.colors.TextPrimary,fontSize:"18px",lineHeight:"24px"})),"label:DivTitle;"),ne=(0,b.Z)("div",{target:"ezqf9p612"})((({theme:e})=>({padding:"4px 4px 10px 8px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivSubTitle;"),ae=(0,b.Z)("li",{target:"ezqf9p613"})((({theme:e})=>({padding:"6px 6px 6px 0px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:LiItem;"),re=(0,b.Z)("div",{target:"ezqf9p614"})((({theme:e})=>({position:"absolute",bottom:"0",left:"0",height:"84px",width:"100%",borderTop:`0.5px solid ${e.colors.LinePrimary2}`,backgroundColor:e.colors.BGPrimary})),"label:DivFooter;"),le=(0,b.Z)("button",{target:"ezqf9p615"})((({theme:e})=>({height:"36px",padding:"7px 16px",lineHeight:"22px",fontSize:"16px",position:"absolute",cursor:"pointer",top:"24px",right:"24px",color:e.colors.ConstTextInverse,background:e.colors.Primary,border:"none",borderRadius:"4px",":disabled":{background:e.colors.BGPlaceholderDefault,color:e.colors.TextQuaternary}})),"label:ButtonSubmit;"),se=(0,b.Z)("div",{target:"ezqf9p616"})((({theme:e,top:t})=>({height:"72px",width:"72px",margin:"32px auto 24px",borderRadius:"36px",background:e.colors.BGView,padding:`${t}px 20px`})),"label:DivIconRoundBg;"),de=(0,b.Z)("div",{target:"ezqf9p617"})((({theme:e})=>({margin:"0px auto 16px",padding:"0 32px",color:e.colors.TextPrimary,textAlign:"center",lineHeight:"32px",fontSize:"24px"})),"label:DivFinishTitle;"),ce=(0,b.Z)("div",{target:"ezqf9p618"})((({theme:e})=>({margin:"0px auto 24px",padding:"0 32px",color:e.colors.TextSecondary,textAlign:"center",lineHeight:"22px",fontSize:"16px"})),"label:DivFinishContent;"),ue=(0,b.Z)("button",{target:"ezqf9p619"})((({theme:e})=>({width:"336px",height:"46px",background:e.colors.Primary,margin:"0 32px 32px",borderRadius:"4px",textAlign:"center",lineHeight:"46px",fontSize:"16px",color:e.colors.ConstTextInverse,border:"none",cursor:"pointer"})),"label:ButtonFinish;"),pe=(0,b.Z)("div",{target:"e9ly1o60"})((({theme:e})=>({width:"400px",minHeight:"394px",background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden"})),"label:DivWapper;"),me=(0,b.Z)("div",{target:"e9ly1o61"})((({theme:e})=>({width:"100%",padding:"32px",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),he=(0,b.Z)("div",{target:"e9ly1o62"})({display:"inline-block",verticalAlign:"middle",marginRight:"8px"},"label:DivIcon;"),ge=(0,b.Z)("div",{target:"e9ly1o63"})((({theme:e})=>({height:"52px",margin:"0 33px",position:"relative",textAlign:"center",lineHeight:"52px",fontSize:"16px",color:e.colors.TextPrimary,borderBottom:`solid 1px ${e.colors.LineSecondary}`})),"label:DivRow;"),ve=(0,b.Z)("div",{target:"e9ly1o64"})((({theme:e})=>({height:"32px",paddingTop:"12px",marginBottom:"110px",textAlign:"center",lineHeight:"20px",fontSize:"14px",color:e.colors.Negative})),"label:DivReminder;"),xe=(0,b.Z)("div",{target:"e9ly1o65"})({height:"100%",float:"left",paddingLeft:"32px"},"label:DivReasonText;"),be=(0,b.Z)("div",{target:"e9ly1o66"})({display:"flex",justifyContent:"space-between",position:"absolute",bottom:"0",width:"100%",padding:"32px"},"label:DivContain;"),ye=(0,b.Z)("button",{target:"e9ly1o67"})((({theme:e,active:t,cancel:o})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:o?e.colors.TextPrimary:t?e.colors.ConstTextInverse:e.colors.TextQuaternary,backgroundColor:o?e.colors.BGSecondary2:t?e.colors.Primary:e.colors.BGInput2,border:o?`1px solid ${e.colors.LineSecondary2}`:"none"})),"label:ButtonC;"),_e=(0,b.Z)("div",{target:"e9ly1o68"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),fe=(0,b.Z)("div",{target:"e9ly1o69"})({position:"absolute",top:"18px",left:"0px",height:"20px",lineHeight:"20px"},"label:DivSvg;"),je=(0,b.Z)("button",{target:"e9ly1o610"})((({theme:e})=>({width:"240px",height:"44px",margin:"80px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;"),ke=20,Ce=e=>{var t,o,r,l;const d=(0,m.Q)(),{colors:c}=(0,S.u)(),[u,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)([]),[v,x]=(0,a.useState)(!1),b=(0,n.qj)(s.bg),y=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:o,loading:i,PageState:n,PageStateData:a,UserData:r,reportTarget:l}=e;return{lastStatus:t,requesting:o,loading:i,PageState:n,PageStateData:a,UserData:r,reportTarget:l}},dependencies:[]}),_=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y.reportTarget&&b.getReasons(y.reportTarget)}),[b,y.reportTarget]),f=(0,a.useCallback)((e=>t=>{t.preventDefault(),t.stopPropagation();const o=h.indexOf(e);if(o>-1){const e=[...h];e.splice(o,1),g(e),p(e.length>0)}else{const t=[...h,e];g(t),x(0===t.length),p(t.length>0)}}),[h]),j=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),h.length>0?b.postReport({reason:h,extraData:null}):x(!0)}),[b,h]),k=e=>0===e?(0,i.jsx)(fe,{children:(0,i.jsx)(R,{width:ke,height:ke},void 0)},void 0):1===e?(0,i.jsx)(fe,{children:(0,i.jsx)(B,{width:ke,height:ke},void 0)},void 0):(0,i.jsx)(fe,{children:(0,i.jsx)(z,{width:ke,height:ke},void 0)},void 0);return(0,i.jsx)(pe,{children:y.loading?(0,i.jsx)(oe,{children:(0,i.jsx)(D.g,{},void 0)},void 0):0===(null===(o=null===(t=y.PageStateData)||void 0===t?void 0:t.reasons)||void 0===o?void 0:o.length)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_e,Object.assign({top:57},{children:(0,i.jsx)(P.Z,{width:72,height:72},void 0)}),void 0),(0,i.jsx)(_e,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:c.TextPrimary}},{children:d("pm_mt_live_page_sth_wrong")}),void 0),(0,i.jsx)(_e,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:c.TextSecondary}},{children:d("pm_mt_live_page_try_again")}),void 0),(0,i.jsxs)(je,Object.assign({onClick:_},{children:[(0,i.jsx)(T.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),d("report_inbox_retry_btn")]}),void 0)]},void 0):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(me,{children:d("km_report_question")},void 0),null===(l=null===(r=y.PageStateData)||void 0===r?void 0:r.reasons)||void 0===l?void 0:l.map(((e,t)=>(0,i.jsxs)(ge,Object.assign({onClick:f(e.reason_type)},{children:[k(t),(0,i.jsx)(xe,{children:e.text},void 0),(0,i.jsx)(G,{style:{position:"absolute",right:"-22px",top:"15px"},bordertype:"checkbox",label:"",value:h.includes(e.reason_type)},void 0)]}),e.reason_type))),v?(0,i.jsxs)(ve,{children:[(0,i.jsx)(he,{children:(0,i.jsx)(I.Z,{width:14,height:14},void 0)},void 0),(0,i.jsx)("span",{children:d("km_pick_reason")},void 0)]},void 0):null,(0,i.jsxs)(be,{children:[(0,i.jsx)(ye,Object.assign({cancel:!0,active:!1,onClick:e.onClose},{children:d("copyright_check_post_popup_cancel")}),void 0),(0,i.jsx)(ye,Object.assign({cancel:!1,active:u,onClick:j},{children:d("choosepassword_button")}),void 0)]},void 0)]},void 0)},void 0)};var we=o(84656),Se=o.n(we),Pe=o(56277),Te=o(64412),Ie=o(92702);const De=(0,b.Z)("div",{target:"e1fkwyf80"})({position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:1001},"label:DivPreviewImageContainer;"),Oe=(0,b.Z)("div",{target:"e1fkwyf81"})((({theme:e})=>({position:"absolute",left:0,top:0,right:0,bottom:0,background:e.colors.SDPrimary})),"label:DivMaskContainer;"),Re=(0,b.Z)("div",{target:"e1fkwyf82"})({position:"absolute",zIndex:1,left:0,top:0,right:0,bottom:0},"label:DivImageContainer;"),Le=(0,b.Z)("div",{target:"e1fkwyf83"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"692px",height:"810px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain"},"label:DivPreviewImage;"),Ze=(0,b.Z)("div",{target:"e1fkwyf84"})((({theme:e})=>({position:"absolute",top:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"24px",backgroundColor:e.colors.ConstTextInverse5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",":hover":{opacity:.7}})),"label:DivIconClose;"),Be={position:"absolute",top:"50%",transform:"translateY(-50%)",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5,":hover":{opacity:1}},Me=(0,b.Z)("div",{target:"e1fkwyf85"})(Object.assign(Object.assign({},Be),{left:"32px"}),"label:DivIconPrev;"),Fe=(0,b.Z)("div",{target:"e1fkwyf86"})(Object.assign(Object.assign({},Be),{left:"auto",right:"32px"}),"label:DivIconNext;"),ze=(0,a.memo)((function({imgList:e,defaultIndex:t,onClose:o}){const[n,r]=(0,a.useState)(t>e.length-1?e.length-1:t<0?0:t),{showModal:s,hideModal:d}=(0,l.J)();(0,a.useEffect)((()=>(s(),()=>{d()})),[s,d]);const p=(0,a.useCallback)((()=>{null==o||o()}),[o]),m=(0,a.useCallback)((()=>r((e=>e-1))),[]),h=(0,a.useCallback)((()=>r((e=>e+1))),[]);return(0,i.jsxs)(De,{children:[(0,i.jsx)(Oe,{},void 0),(0,i.jsxs)(Re,{children:[(0,i.jsx)(Le,{style:{backgroundImage:`url(${e[n]})`}},void 0),(0,i.jsx)(Ze,Object.assign({onClick:p},{children:(0,i.jsx)(Pe.Z,{height:24,width:24,fill:"#fff"},void 0)}),void 0),n>0&&(0,i.jsx)(Me,Object.assign({onClick:m},{children:(0,i.jsx)(u.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0),n<e.length-1&&(0,i.jsx)(Fe,Object.assign({onClick:h},{children:(0,i.jsx)(c.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0)]},void 0)]},void 0)})),Ae=(0,b.Z)("div",{target:"e183km5u0"})((({theme:e})=>({fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,display:"flex",flexWrap:"wrap"})),"label:DivUploadImageContainer;"),Ee=(0,b.Z)("div",{target:"e183km5u1"})((({theme:e,size:t})=>({boxSizing:"border-box",width:`${t}px`,height:`${t}px`,display:"flex",alignItems:"center",flexDirection:"column",background:e.colors.BGInput,borderRadius:"2px",overflow:"hidden",cursor:"pointer",paddingTop:(t-30)/2+"px"})),"label:DivImageUploadElement;"),Ue=(0,b.Z)("div",{target:"e183km5u2"})((({theme:e,size:t})=>({width:`${t}px`,height:`${t}px`,marginRight:"12px",position:"relative",borderRadius:"2px",overflow:"hidden",cursor:"pointer",":before":{content:'""',position:"absolute",width:"200%",height:"200%",borderRadius:"4px",border:`1px solid ${e.colors.LineSecondary}`,transform:"scale(.5)",left:"-50%",top:"-50%",boxSizing:"border-box"},img:{objectFit:"cover",zIndex:3,transform:"translateZ(10px)"}})),"label:DivImageItem;"),We=(0,b.Z)("span",{target:"e183km5u3"})({position:"absolute",display:"flex",boxSizing:"border-box",padding:"5px",top:0,right:0,width:"16px",height:"16px",background:"rgba(22, 24, 35, 0.75)",borderBottomLeftRadius:"2px",cursor:"pointer"},"label:SpanClose;"),Ve=(0,b.Z)("span",{target:"e183km5u4"})((({theme:e})=>({fontSize:"12px",lineHeight:"15px",color:e.colors.TextTertiary,marginTop:"4px"})),"label:SpanImageNumber;"),Ge=(0,b.Z)("input",{target:"e183km5u5"})({display:"none",width:0,height:0},"label:InputImage;"),qe=(0,b.Z)("div",{target:"e183km5u6"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMid;");let $e=0;const Ne=Number(1048576),He=(e,t)=>e>=5242880?t?.1:.2:e>=1572864?t?.3:.5:e>=524288?t?.4:.6:t?.6:.8,Ye=(0,a.memo)((function({max:e,onChange:t,size:o=72}){const n=(0,g.fz)(Ie.r),[r,l]=(0,a.useState)([]),[s,d]=(0,a.useState)(0),[c,u]=(0,a.useState)(!1),p=(0,a.useRef)([]),{colors:m}=(0,S.u)(),h=(0,a.useCallback)((t=>{const o=[],i=t.target.files,n=e-r.length;if(i){const e=i.length>n?n:i.length;for(let t=0;t<e;t++)if(i[t].type.match("image")){const n=new FileReader;n.readAsDataURL(i[t]),n.onload=t=>{o.push({id:$e++,uri:t.target.result,uploaded:!1}),o.length===e&&l((e=>[...e,...o]))},p.current.push(i[t])}t.target.value=""}}),[e,r.length]),v=(0,a.useCallback)((e=>()=>{d(e),u(!0)}),[]),x=(0,a.useCallback)((e=>{const t=p.current[e];new(Se())(t,{quality:He(t.size),convertSize:Ne,success:o=>{p.current[e]=o,o.with=t.width,o.height=t.height,n.uploadImage([o]).subscribe((t=>{const i=[...r];i[e]=Object.assign(Object.assign(Object.assign({},i[e]),t.data[0]),{size:o.size,uploaded:!0}),l(i)}))}})}),[r,p,n]),b=e=>()=>{const t=r.slice();t.splice(e,1),l(t),p.current.splice(e,1)},y=(0,a.useCallback)((()=>{u(!1)}),[]);return(0,a.useEffect)((()=>{r.forEach(((e,t)=>{!1===r[t].uploaded&&x(t)})),t(r)}),[r,t,x]),(0,i.jsxs)("div",{children:[(0,i.jsxs)(Ae,{children:[r.map(((e,t)=>(0,i.jsxs)(Ue,Object.assign({size:o},{children:[(0,i.jsx)("img",{src:e.uri,width:o,height:o,style:e.uploaded?{}:{filter:"blur(1px)"},onClick:v(t)},void 0),(0,i.jsx)(We,Object.assign({className:"close",onClick:b(t)},{children:(0,i.jsx)(Pe.Z,{width:7,height:7,fill:"#fff"},void 0)}),void 0),e.uploaded?null:(0,i.jsx)(qe,{children:(0,i.jsx)(D.g,{size:20},void 0)},void 0)]}),e.id))),c&&(0,i.jsx)(ze,{defaultIndex:s,imgList:r.map((e=>e.uri)),onClose:y},void 0),e<=r.length?null:(0,i.jsx)("label",Object.assign({htmlFor:"upload-image-file"},{children:(0,i.jsxs)(Ee,Object.assign({size:o},{children:[(0,i.jsx)(Te.Z,{height:30,width:30,fill:m.TextTertiary},void 0),(0,i.jsxs)(Ve,Object.assign({className:"img-number"},{children:[r.length,"/",e]}),void 0)]}),void 0)}),void 0)]},void 0),(0,i.jsx)(Ge,{multiple:!0,className:"file-input",accept:"image/png,image/jpeg,image/jpg,image/bmp",type:"file",onChange:h,id:"upload-image-file"},void 0)]},void 0)})),Qe=(0,b.Z)("div",{target:"egyld0v0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),Je=(0,b.Z)("div",{target:"egyld0v1"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),Ke=(0,b.Z)("div",{target:"egyld0v2"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),Xe=(0,b.Z)("div",{target:"egyld0v3"})((({theme:e})=>({display:"flex",flexDirection:"row",boxSizing:"border-box",fontSize:"16px",padding:"16px 24px",lineHeight:"22px",color:e.colors.TextSecondary,backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),et=(0,b.Z)("span",{target:"egyld0v4"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),tt=(0,b.Z)("span",{target:"egyld0v5"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),ot=e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}),it=(0,b.Z)("textarea",{target:"egyld0v6"})((({theme:e})=>Object.assign(Object.assign({},ot(e)),{resize:"none",height:"80px"})),"label:TextareaDescription;"),nt=(0,b.Z)("input",{target:"egyld0v7"})((({theme:e})=>Object.assign(Object.assign({},ot(e)),{borderBottom:`1px solid ${e.colors.LineSecondary}`,height:"40px"})),"label:InputSignature;"),at=(0,b.Z)("div",{target:"egyld0v8"})({margin:"4px 24px"},"label:DivImageUploader;"),rt=(0,b.Z)("div",{target:"egyld0v9"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),lt=(0,b.Z)("div",{target:"egyld0v10"})({fontSize:"16px",lineHeight:"24px",padding:"16px 24px 0"},"label:DivCheckboxConfirm;"),st=(0,b.Z)("div",{target:"egyld0v11"})((({theme:e})=>({marginTop:"20px",padding:"0px 24px",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary})),"label:DivInfo;"),dt=(0,a.memo)((function(){var e,t,o,r,l;const d=(0,m.Q)(),c=(0,n.qj)(s.bg),u=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,PreState:o}=e;return{UserData:t,PreState:o}},dependencies:[]}),[p,h]=(0,a.useState)(""),[g,v]=(0,a.useState)([]),[x,b]=(0,a.useState)(""),[y,_]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1);(0,a.useEffect)((()=>{!g.some((e=>!0!==e.uploaded))&&!f&&y&&x.length>0?C(!0):C(!1)}),[p,g,x,y,f]);const w=(0,a.useCallback)((e=>{j(!1);for(const t of e)t.size&&t.size>20971520&&j(!0);v(e)}),[]),S=(0,a.useCallback)((e=>{e.stopPropagation()}),[]),P=(0,a.useCallback)((e=>h(e.target.value)),[]),T=(0,a.useCallback)((e=>b(e.target.value)),[]),I=(0,a.useCallback)((e=>_(e)),[]),D=(0,a.useCallback)((e=>{var t,o,i,n;if(e.preventDefault(),e.stopPropagation(),(null===(o=null===(t=u.UserData)||void 0===t?void 0:t.selectedReason)||void 0===o?void 0:o.reason_type)&&k){const e={is_netzdg:1,report_desc:p,uri:g.map((e=>e.url)).join(","),report_signature:x};c.postReport({reason:null===(n=null===(i=u.UserData)||void 0===i?void 0:i.selectedReason)||void 0===n?void 0:n.reason_type,extraData:e})}}),[p,g,x,null===(t=null===(e=u.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.reason_type,k,c]),O=8===(null===(r=null===(o=u.UserData)||void 0===o?void 0:o.selectedReason)||void 0===r?void 0:r.special_type);return(0,i.jsxs)(Qe,{children:[(0,i.jsxs)(Je,{children:[(0,i.jsx)(Xe,{children:`${d("Web_report_reason_select")} ${null===(l=u.UserData.selectedReason)||void 0===l?void 0:l.text}`},void 0),(0,i.jsxs)(Ke,{children:[(0,i.jsx)(et,{children:d("Web_report_description")},void 0),(0,i.jsxs)(tt,{children:[p.length,"/",200]},void 0)]},void 0),(0,i.jsx)(it,{rows:5,maxLength:200,placeholder:d("Please provide as much detail as possible"),value:p,onChange:P,onKeyDown:S},void 0),(0,i.jsxs)(at,{children:[(0,i.jsx)(Ye,{max:4,onChange:w},void 0),f&&(0,i.jsx)(rt,{children:d("attachment_upload_limit")},void 0)]},void 0),(0,i.jsx)(Ke,{children:(0,i.jsx)(et,{children:d("Signature")},void 0)},void 0),(0,i.jsx)(nt,{placeholder:d("Sign_here"),value:x,maxLength:100,onChange:T,onKeyDown:S},void 0),(0,i.jsx)(lt,{children:(0,i.jsx)(G,{label:d("Report_confirmation"),value:y,onChange:I},void 0)},void 0),O&&(0,i.jsx)(st,{children:d("avia_law_false_report_warning")},void 0),(0,i.jsx)(st,{children:d("Web_report_description_tips")},void 0)]},void 0),(0,i.jsx)(re,{children:(0,i.jsx)(le,Object.assign({disabled:!k,onClick:D},{children:d("Submit")}),void 0)},void 0)]},void 0)}));var ct=o(34708);const ut=(0,b.Z)("div",{target:"e10dth7g0"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),pt=(0,b.Z)("button",{target:"e10dth7g1"})((({theme:e})=>({width:"240px",height:"44px",margin:"133px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;"),mt=()=>{var e,t,o,r,l;const d=(0,m.Q)(),{isRTL:p}=(0,h.Y)(),{user:g}=null!==(e=(0,ct.L)((()=>["user","region"]),[]))&&void 0!==e?e:{},v=(0,n.qj)(s.bg),{colors:x}=(0,S.u)(),b=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:o,loading:i,PageState:n,PageStateData:a,UserData:r,reportTarget:l}=e;return{lastStatus:t,requesting:o,loading:i,PageState:n,PageStateData:a,UserData:r,reportTarget:l}},dependencies:[]}),y=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),b.reportTarget&&v.getReasons(b.reportTarget)}),[v,b.reportTarget]),_=(0,a.useCallback)((e=>t=>{var o,i,n,a,r,l,d,c,u,p,m,h;t.preventDefault(),t.stopPropagation();const x=null===(i=null===(o=b.PageStateData)||void 0===o?void 0:o.reasons)||void 0===i?void 0:i.find((t=>t.reason_type===e));if(x&&v.setUserData({selectedReason:x,HistoryReason:[...null!==(n=b.UserData.HistoryReason)&&void 0!==n?n:[],x]}),!x)return;const y=Boolean(g);let _=null;switch(x.special_type){case 2:_=(0,s.yM)({reportTarget:b.reportTarget});break;case 6:(!y&&"video"===(null===(a=b.reportTarget)||void 0===a?void 0:a.report_type)||!y&&"comment"===(null===(r=b.reportTarget)||void 0===r?void 0:r.report_type))&&(_=(0,s.Hx)({reportTarget:b.reportTarget}));break;case 8:(!y&&"video"===(null===(l=b.reportTarget)||void 0===l?void 0:l.report_type)||!y&&"comment"===(null===(d=b.reportTarget)||void 0===d?void 0:d.report_type))&&(_=(0,s.g0)({reportTarget:b.reportTarget}))}_?window.open(_,"_blank","noopener,noreferrer"):!x||Boolean(null===(c=x.next_reason)||void 0===c?void 0:c.length)?v.handleNextReason({nextReason:null!==(u=x.next_reason)&&void 0!==u?u:[],reason_id:x.reason_type}):[1,4].includes(x.special_type)&&(null===(p=b.PageStateData)||void 0===p?void 0:p.reasons)&&x.reason_type!==(null===(m=b.PageStateData)||void 0===m?void 0:m.reasons[0].reason_type)?v.handleNextForm(3):b.UserData.HistoryReason&&[...s.wC,...s.T].includes(null===(h=b.UserData.HistoryReason[0])||void 0===h?void 0:h.reason_type)||[8].includes(x.special_type)?v.handleNextForm(2):v.handleNextForm(1)}),[b.PageStateData,v,b.UserData.HistoryReason,g,b.reportTarget]);return(0,i.jsx)(K,{children:b.loading?(0,i.jsx)(oe,{children:(0,i.jsx)(D.g,{},void 0)},void 0):0===(null===(o=null===(t=b.PageStateData)||void 0===t?void 0:t.reasons)||void 0===o?void 0:o.length)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ut,Object.assign({top:57},{children:(0,i.jsx)(P.Z,{width:72,height:72},void 0)}),void 0),(0,i.jsx)(ut,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:x.TextPrimary}},{children:d("pm_mt_live_page_sth_wrong")}),void 0),(0,i.jsx)(ut,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:x.TextSecondary}},{children:d("pm_mt_live_page_try_again")}),void 0),(0,i.jsxs)(pt,Object.assign({onClick:y},{children:[(0,i.jsx)(T.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),d("report_inbox_retry_btn")]}),void 0)]},void 0):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(X,{children:d("Please select a scenario")},void 0),null===(l=null===(r=b.PageStateData)||void 0===r?void 0:r.reasons)||void 0===l?void 0:l.map((e=>(0,i.jsxs)(te,Object.assign({onClick:_(e.reason_type)},{children:[(0,i.jsx)(ee,{children:e.text},void 0),p?(0,i.jsx)(u.Z,{style:{color:x.TextTertiary},width:20,height:20},void 0):(0,i.jsx)(c.Z,{style:{color:x.TextTertiary},width:20,height:20},void 0)]}),e.reason_type)))]},void 0)},void 0)};var ht=o(60162),gt=o(65262);const vt=(0,b.Z)("div",{target:"eshtx6u0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,margin:"0 15px",paddingTop:"30px"})),"label:DivUserBlockSection;"),xt=(0,b.Z)("div",{target:"eshtx6u1"})((({theme:e})=>({fontSize:"13px",lineHeight:"17px",color:e.colors.TextTertiary,paddingLeft:"12px"})),"label:DivUserBlockTitle;"),bt=(0,b.Z)("div",{target:"eshtx6u2"})({marginTop:"13px",height:"46px",paddingLeft:"12px",marginBottom:"24px"},"label:DivUserBlock;"),yt=(0,b.Z)("div",{target:"eshtx6u3"})((({theme:e})=>({width:"46px",height:"46px",marginRight:"13px",display:"inline-block",float:"left",backgroundColor:e.colors.BGInput,padding:"11px",borderRadius:"50%"})),"label:DivUserBlockIcon;"),_t=(0,b.Z)("div",{target:"eshtx6u4"})((({theme:e})=>({lineHeight:"46px",height:"46px",fontSize:"15px",color:e.colors.TextPrimary,display:"inline-block",float:"left"})),"label:DivUserBlockName;"),ft=({onClose:e})=>{var t,o,r,l;const d=(0,m.Q)(),c=(0,n.qj)(s.bg),{colors:u}=(0,S.u)(),p=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:o}=e;return{reportTarget:o,UserData:t}},dependencies:[]}),h=(0,a.useCallback)((()=>{e()}),[e]),g=(0,a.useCallback)((()=>{c.handleNextForm(4)}),[c]),{submitresult:v}=p.UserData,{title:x="Thanks",content:b="We’ll review your report and if there is a violation of our Community Guidelines, we’ll take appropriate action.",button:y="Done",success:_=!0}=null!=v?v:{};return(0,i.jsxs)("div",{children:[(0,i.jsx)(se,Object.assign({top:_?25:20},{children:_?(0,i.jsx)(A.Z,{width:32,height:22,style:{color:u.Positive}},void 0):(0,i.jsx)(ht.Z,{width:32,height:32},void 0)}),void 0),(0,i.jsx)(de,{children:null!==(t=d(x))&&void 0!==t?t:x},void 0),(0,i.jsx)(ce,{children:b},void 0),"user"===(null===(o=p.reportTarget)||void 0===o?void 0:o.report_type)?(0,i.jsxs)(vt,Object.assign({onClick:g},{children:[(0,i.jsx)(xt,{children:d("Web_report_you_can_also")},void 0),(0,i.jsxs)(bt,{children:[(0,i.jsx)(yt,{children:(0,i.jsx)(gt.Z,{width:24,height:24},void 0)},void 0),(0,i.jsxs)(_t,{children:[d("webdm_block")," ",null===(r=p.reportTarget)||void 0===r?void 0:r.nickname]},void 0)]},void 0)]}),void 0):null,(0,i.jsx)(ue,Object.assign({onClick:h},{children:null!==(l=d(y))&&void 0!==l?l:y}),void 0)]},void 0)},jt=()=>{var e,t;const o=(0,m.Q)(),r=(0,n.qj)(s.bg),l=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t}=e;return{UserData:t}},dependencies:[]}),d=(0,a.useCallback)((e=>{var t,o,i,n;e.preventDefault(),e.stopPropagation(),(null===(o=null===(t=l.UserData)||void 0===t?void 0:t.selectedReason)||void 0===o?void 0:o.reason_type)&&r.postReport({reason:null===(n=null===(i=l.UserData)||void 0===i?void 0:i.selectedReason)||void 0===n?void 0:n.reason_type,extraData:null})}),[r,null===(t=null===(e=l.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.reason_type]);let c={title:"",subtitle:"",introduction:""};return l.UserData.selectedReason&&(c=(JSON.parse(l.UserData.selectedReason.option)||{}).intro||{}),(0,i.jsxs)(K,{children:[(0,i.jsx)(ie,{children:c.title},void 0),(0,i.jsx)(ne,{children:c.subtitle},void 0),(0,i.jsx)("ul",Object.assign({style:{margin:"0px",paddingInlineStart:"26px"}},{children:(c.introduction||"").split("\n").map((e=>(0,i.jsx)(ae,{children:(0,i.jsx)("span",{children:e},void 0)},e)))}),void 0),(0,i.jsx)(re,{children:(0,i.jsx)(le,Object.assign({onClick:d},{children:o("Submit")}),void 0)},void 0)]},void 0)};var kt=o(14695),Ct=o(59577),wt=o(73080);const St=(0,o(3624).F4)({"0%":{transform:"rotate(0deg)"},"50%":{transform:"rotate(180deg)"},"100%":{transform:"rotate(360deg)"}}),Pt=(0,b.Z)("div",{target:"e1n5v3jy0"})({animation:`${St} 1s ease-out infinite`,width:"16px",height:"16px"},"label:DivRotate;"),Tt=(0,b.Z)("input",{target:"e1n5v3jy1"})((({theme:e})=>({borderTop:"0px",borderLeft:"0px",borderRight:"0px",borderBottom:`1px solid ${e.colors.LineSecondary}`,fontSize:"16px",width:"100%",padding:"14px 0px",lineHeight:"22px",outline:"none",marginTop:"14px"})),"label:InputUser;"),It=(0,b.Z)("div",{target:"e1n5v3jy2"})((({theme:e})=>({padding:"8px 0px",borderBottom:`1px solid ${e.colors.LineSecondary}`})),"label:DivUserCC;"),Dt=(0,b.Z)("div",{target:"e1n5v3jy3"})({width:"100%",height:"64px",position:"relative"},"label:DivC;"),Ot=(0,b.Z)("div",{target:"e1n5v3jy4"})({height:"48px",position:"relative"},"label:DivUserInfo;"),Rt=(0,b.Z)("img",{target:"e1n5v3jy5"})({width:"48px",height:"48px",borderRadius:"50%",position:"absolute",left:"0",top:"0"},"label:ImgUserAvator;"),Lt=(0,b.Z)("div",{target:"e1n5v3jy6"})((({theme:e})=>({position:"absolute",left:"60px",top:"0px",height:"25px",lineHeight:"25px",fontSize:"18px",color:e.colors.TextPrimary})),"label:DivUserName;"),Zt=(0,b.Z)("div",{target:"e1n5v3jy7"})((({theme:e})=>({position:"absolute",left:"60px",top:"27px",height:"20px",lineHeight:"20px",fontSize:"14px",color:e.colors.TextPrimary})),"label:DivUserId;"),Bt=(0,b.Z)("div",{target:"e1n5v3jy8"})({position:"absolute",right:"16px",bottom:"16px",width:"16px",height:"16px"},"label:DivCbutton;"),Mt=(0,b.Z)("li",{target:"e1n5v3jy9"})((({theme:e})=>({width:"100%",height:"64px",padding:"8px 16px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LiUser;"),Ft=(0,b.Z)("ul",{target:"e1n5v3jy10"})((({theme:e})=>({position:"relative",margin:"0px",width:"100%",maxHeight:"360px",overflowY:"scroll",padding:"0px",background:e.colors.BGPrimary,boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"8px",zIndex:22})),"label:UlUser;");let zt=null;const At=(0,a.memo)((function({onChange:e}){const t=(0,m.Q)(),o=(0,g.fz)(wt.o),[n,r]=(0,a.useState)(!1),[l,s]=(0,a.useState)(""),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[h,v]=(0,a.useState)(!1),[x,b]=(0,a.useState)(0),[y,_]=(0,a.useState)(!0),f=(0,a.useCallback)((t=>{d&&(c(null),b(0),s(""),p([]),e(null))}),[d,e]),j=(0,a.useCallback)((t=>o=>{o.preventDefault(),o.stopPropagation(),c(t),r(!1),e(t)}),[e]),k=(0,a.useCallback)(((e,t)=>{!h&&y&&(v(!0),o.getUserSearch({keyword:e,cursor:t}).subscribe((e=>{var o;if(v(!1),0===e.status_code||203===e.status_code){_(Boolean(e.has_more));const{user_list:i}=e,n=null!==(o=null==i?void 0:i.map((e=>({uid:e.user_info.uid,nickname:e.user_info.nickname,username:e.user_info.unique_id,avatar:e.user_info.avatar_thumb.url_list.find((e=>e.indexOf(".jpeg")>-1))||e.user_info.avatar_thumb.url_list[0],isVerify:Boolean(e.user_info.custom_verify||e.user_info.verify_info_tt||e.user_info.enterprise_verify_reason)}))))&&void 0!==o?o:[],a=[...0===t?[]:u,...n];b(a.length),p(a),r(!0)}})))}),[h,y,o,u]),C=(0,a.useCallback)((e=>{const t=e.target.value;s(t),zt&&clearTimeout(zt),zt=setTimeout((()=>{t&&k(t,0)}),1e3)}),[k]),w=(0,a.useCallback)((e=>{const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&!h&&k(l,x)}),[l,x,k,h]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)(Dt,{children:[d?(0,i.jsx)(It,{children:(0,i.jsxs)(Ot,{children:[(0,i.jsx)(Rt,{src:d.avatar},void 0),(0,i.jsxs)(Lt,{children:[(0,i.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:d.nickname}),void 0),d.isVerify?(0,i.jsx)(kt.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,i.jsx)(Zt,{children:d.username},void 0)]},void 0)},void 0):(0,i.jsx)(Tt,{value:l,placeholder:t("Web_report_account_impersonated_search"),onChange:C},void 0),(0,i.jsx)(Bt,Object.assign({onClick:f},{children:d?(0,i.jsx)(Ct.Z,{style:{fontSize:16}},void 0):h?(0,i.jsx)(Pt,{children:(0,i.jsx)(T.Z,{style:{fontSize:16}},void 0)},void 0):null}),void 0)]},void 0),n?(0,i.jsx)(Ft,Object.assign({onScroll:w},{children:u.map((e=>(0,i.jsx)(Mt,{children:(0,i.jsxs)(Ot,Object.assign({onClick:j(e)},{children:[(0,i.jsx)(Rt,{src:e.avatar},void 0),(0,i.jsxs)(Lt,{children:[(0,i.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:e.nickname}),void 0),e.isVerify?(0,i.jsx)(kt.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,i.jsx)(Zt,{children:e.username},void 0)]}),void 0)},e.username)))}),void 0):null]},void 0)})),Et=(0,b.Z)("div",{target:"e1xsicpb0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"65vh",overflowY:"hidden",overflowX:"hidden"})),"label:DivRadioWrapper;"),Ut=(0,b.Z)("div",{target:"e1xsicpb1"})((({theme:e})=>({height:"54px",width:"100%",backgroundColor:e.colors.BGView,padding:"16px 24px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivReport;"),Wt=(0,b.Z)("div",{target:"e1xsicpb2"})((({theme:e})=>({marginTop:"24px",fontSize:"18px",lineHeight:"24px",height:"24px",padding:"0 24px",color:e.colors.TextPrimary})),"label:DivUTitle;"),Vt=(0,b.Z)("div",{target:"e1xsicpb3"})((({theme:e})=>({marginTop:"10px",fontSize:"16px",lineHeight:"22px",height:"22px",color:e.colors.TextTertiary,padding:"0 24px"})),"label:DivUSubTitle;"),Gt=(0,b.Z)("div",{target:"e1xsicpb4"})((({theme:e})=>({position:"absolute",bottom:"96px",left:"0",width:"100%",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary,padding:"0 24px"})),"label:DivDesc;"),qt=(0,b.Z)("div",{target:"e1xsicpb5"})({marginTop:"12px",padding:"0px 24px"},"label:DivUser;"),$t=()=>{var e,t;const o=(0,m.Q)(),r=(0,n.qj)(s.bg),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),p=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t}=e;return{UserData:t}},dependencies:[]}),h=(0,a.useCallback)((e=>{e?(u(!1),d(e)):(u(!0),d(null))}),[]),g=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),p.UserData.selectedReason&&l){const e={related_username:l.username,related_ttid:l.uid};r.postReport({reason:p.UserData.selectedReason.reason_type,extraData:e})}}),[r,p.UserData.selectedReason,l]);let v="";if(p.UserData.HistoryReason){const o=(null===(e=p.UserData.HistoryReason)||void 0===e?void 0:e.length)||2;o>=2&&(v=(null===(t=p.UserData.HistoryReason[o-2])||void 0===t?void 0:t.text)||"")}return(0,i.jsxs)(Et,{children:[(0,i.jsxs)(Ut,{children:[o("Web_report_reason_select"),v]},void 0),(0,i.jsx)(Wt,{children:o("Web_report_account_impersonated")},void 0),(0,i.jsx)(Vt,{children:o("Web_report_account_impersonated_description")},void 0),(0,i.jsx)(qt,{children:(0,i.jsx)(At,{onChange:h},void 0)},void 0),(0,i.jsx)(Gt,{children:o("Web_report_description_tips")},void 0),(0,i.jsx)(re,{children:(0,i.jsx)(le,Object.assign({disabled:c,onClick:g},{children:o("Submit")}),void 0)},void 0)]},void 0)},Nt=(0,a.memo)((function({onClose:e,visible:t=!1}){const o=(0,m.Q)(),{isRTL:r}=(0,h.Y)(),l=(0,n.qj)(s.bg),g=(0,n.mp)(s.bg,{selector:e=>{const{PageState:t,PreState:o}=e;return{PageState:t,PreState:o}},dependencies:[]}),v=(0,a.useCallback)((()=>{e()}),[e]),x=(0,a.useCallback)((()=>{l.resetState()}),[l]),b=(0,a.useCallback)((()=>{l.handlePrevStep()}),[l]),y=o("Report"),_=g.PreState.length>0,f=()=>0===g.PageState?(0,i.jsx)(mt,{},void 0):1===g.PageState?(0,i.jsx)(jt,{},void 0):5===g.PageState?(0,i.jsx)(ft,{onClose:v},void 0):3===g.PageState?(0,i.jsx)($t,{},void 0):2===g.PageState?(0,i.jsx)(dt,{},void 0):4===g.PageState?(0,i.jsx)(C,{onClose:v},void 0):6===g.PageState?(0,i.jsx)(Ce,{onClose:v},void 0):void 0;return(0,i.jsx)(d.AR,Object.assign({compact:!0,isOpen:t,onClose:v,onCloseComplete:x,closeOnBackdropClick:6===g.PageState,closeOnEsc:!1},{children:[0,1,2,3].includes(g.PageState)?(0,i.jsxs)($,{children:[(0,i.jsxs)(H,Object.assign({isBackable:_},{children:[_&&(0,i.jsx)(Y,Object.assign({onClick:b},{children:r?(0,i.jsx)(c.Z,{width:20,height:20},void 0):(0,i.jsx)(u.Z,{width:20,height:20},void 0)}),void 0),(0,i.jsx)(J,{children:y},void 0),(0,i.jsx)(Q,Object.assign({"data-e2e":"report-card-cancel",onClick:v},{children:(0,i.jsx)(p.Z,{width:14,height:14},void 0)}),void 0)]}),void 0),f()]},void 0):(0,i.jsx)(N,{children:f()},void 0)}),void 0)}));function Ht(e){const t=function(t){const o=function({onClose:e}={}){const{hideModal:t}=(0,l.J)(),[o,r]=(0,n.b7)(s.bg,{selector:({showing:e})=>e,dependencies:[]}),d=(0,a.useCallback)((()=>{null==e||e(),t(),r.hideReport()}),[r,t,e]);return(0,i.jsx)(Nt,{onClose:d,visible:o},void 0)}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,Object.assign({},t),void 0),o]},void 0)};return t.displayName=`WithReport(${(0,r.i)(e)})`,t}},16929:(e,t,o)=>{o.d(t,{P:()=>i,G:()=>n});const i={0:{forceMute:!1,defaultMute:!1},1:{forceMute:!0,defaultMute:!0},2:{forceMute:!1,defaultMute:!1},3:{forceMute:!1,defaultMute:!1},4:{forceMute:!1,defaultMute:!1}},n=.8},14870:(e,t,o)=>{o.d(t,{Fk:()=>m,Mz:()=>h,s_:()=>g,DZ:()=>v,$v:()=>x,ru:()=>y,A4:()=>_,vN:()=>f});var i=o(9236),n=o(16926),a=o(91051),r=o(14563),l=o(13964),s=o(91218),d=o(56785),c=o(76967),u=o(16929),p=o(13033);function m({loadingThreshold:e=1e3,isCurrentVideo:t}){const[o,i]=(0,a.useState)(!1),n=(0,a.useRef)(0),r=(0,a.useCallback)((()=>{n.current&&window.clearTimeout(n.current),i(!1)}),[]),l=(0,a.useCallback)((()=>{e?(n.current&&window.clearTimeout(n.current),n.current=window.setTimeout((()=>{i(!0)}),e)):i(!0)}),[e]);return(0,a.useEffect)((()=>(t||(window.clearTimeout(n.current),i(!1)),()=>window.clearTimeout(n.current))),[t]),{loading:o,handleCanPlayWithLoading:r,handlePauseWithLoading:r,handlePlayingWithLoading:r,handleErrorWithLoading:r,handleWaitingWithLoading:l}}function h(){const[e,t]=(0,a.useState)(!0),o=(0,a.useCallback)((()=>{t(!1)}),[]),i=(0,a.useCallback)((()=>{t(!0)}),[]);return(0,a.useEffect)((()=>{const e=(0,l.Y8)(o,i);return()=>{null==e||e()}}),[i,o]),e}function g(e){const[{mute:t,volume:o},n]=(0,i.b7)(d.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),l=(0,a.useCallback)(((t,i="click")=>{r.$.handleSwitchSound({muted:t,playMode:e,enter_method:i}),r.$.handleVolumeChange({volume_to:o,click_mute:!0}),p.Bv.setItem("muted",t),n.setMute(t),t||0!==p.Bv.getItem("volume")||(p.Bv.setItem("volume",u.G),n.setVolume(u.G))}),[n,e,o]);return{mute:t,volume:o,setMute:l}}function v(){const[{mute:e,volume:t},o]=(0,i.b7)(d.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),n=(0,a.useCallback)(((e,t)=>{p.Bv.setItem("volume",e),o.setVolume(e),0===e?(p.Bv.setItem("muted",!0),o.setMute(!0)):t&&(p.Bv.setItem("muted",!1),o.setMute(!1))}),[o]);return{mute:e,volume:t,setVolume:n}}function x(e){const{setMute:t,setVolume:o}=(0,i.qj)(d.x);(0,a.useEffect)((()=>{var i,n;t(null!==(i=p.Bv.getItem("muted"))&&void 0!==i?i:u.P[e].defaultMute),o(null!==(n=p.Bv.getItem("volume"))&&void 0!==n?n:u.G)}),[])}const b="video_playback_error";function y(){const e=(0,n.fz)(s.n);return(0,a.useCallback)((t=>{var o,i,n;const a=null!==(i=null===(o=null==t?void 0:t.nativeEvent)||void 0===o?void 0:o.target)&&void 0!==i?i:null===(n=null==t?void 0:t.nativeEvent)||void 0===n?void 0:n.srcElement;if(a){const{error:{code:t=-1,message:o="Empty message"}={},networkState:i,readyState:n,src:r="",currentTime:l=0}=a;e.emitEvent(b,{code:t},{errorMessage:o,errorCode:t,readyState:n,networkState:i,isXgPlayer:"0"});const s={errorCode:t,errorMessage:o,src:r,currentTime:l,networkState:i,readyState:n};e.captureMessage(`Video playback error: ${JSON.stringify(s)}`,"error")}}),[e])}function _(){const e=(0,n.fz)(s.n);return(0,a.useCallback)((t=>{if(t)try{const{error:o,readyState:i,networkState:n,currentTime:a=0,currentSrc:r=""}=t,{code:l=-1,message:s="Empty message"}=null!=o?o:{};e.emitEvent(b,{code:l},{errorMessage:s,errorCode:String(l),readyState:String(i),networkState:String(n),isXgPlayer:"1"});const d={errorCode:l,errorMessage:s,src:r,currentTime:a,networkState:n,readyState:i,isXgPlayer:!0};e.captureMessage(`Video playback error: ${JSON.stringify(d)}`,"error")}catch(e){}}),[e])}function f(e,t){const o=(0,i.mp)(c.A);return(0,a.useMemo)((()=>e.map((e=>{var i,n,a,r,l,s,d,c;const u=null!==(i=e.id)&&void 0!==i?i:"",p=o[u],m=null!==(a=null===(n=null==p?void 0:p.video)||void 0===n?void 0:n.bitrateInfo)&&void 0!==a?a:[];return m.length>1?m.map((t=>{var o,i,n,a;return{id:null==e?void 0:e.id,url:null!==(i=null===(o=t.PlayAddr)||void 0===o?void 0:o.UrlList)&&void 0!==i?i:null===(n=null==p?void 0:p.video)||void 0===n?void 0:n.playAddr,definition:t.GearName,bitrate:t.Bitrate,duration:null===(a=null==p?void 0:p.video)||void 0===a?void 0:a.duration}})):[{id:null==e?void 0:e.id,url:null===(r=null==p?void 0:p.video)||void 0===r?void 0:r.playAddr,definition:null!==(s=null===(l=m[0])||void 0===l?void 0:l.GearName)&&void 0!==s?s:t,bitrate:null===(d=m[0])||void 0===d?void 0:d.Bitrate,duration:null===(c=null==p?void 0:p.video)||void 0===c?void 0:c.duration}]}))),[t,o,e])}},75595:(e,t,o)=>{o.d(t,{S:()=>n});var i=o(91051);function n(e){const{direction:t="ltr",progressRef:o,circleRef:n,barRef:a,initialPercent:r=0,draggingPercentCb:l,draggingStateCb:s,progressReportCallback:d}=e,[c,u]=(0,i.useState)(r),p=(0,i.useRef)(0),m=(0,i.useRef)(null),h=(0,i.useCallback)(((e,t="original")=>{if("number"!=typeof e||e!=e)return;const o=Math.min(1,Math.max(0,e));u(o),("dragging"!==t&&"stop"!==t||o!==m.current)&&(null==l||l(o),m.current=o)}),[l]),g=(0,i.useCallback)(((e,i="original")=>{if(!n.current||!o.current||!a.current)return;let r;e.stopPropagation();const l="vertical"===t?o.current.getBoundingClientRect().height:o.current.getBoundingClientRect().width,{x:s,y:c,width:u,height:m}=o.current.getBoundingClientRect();switch(t){case"vertical":r=c+m-e.clientY;break;case"rtl":r=s+u-e.clientX;break;default:r=e.clientX-s}if("start"===i)switch(t){case"vertical":{const e=a.current.getBoundingClientRect().height;p.current=Math.min(1,Math.max(0,e/l));break}default:{const e=a.current.getBoundingClientRect().width;p.current=Math.min(1,Math.max(0,e/l));break}}else{if("stop"===i){const e=Math.min(1,Math.max(0,r/l)),t=p.current;null==d||d(t,e)}h(r/l,i)}}),[n,o,a,t,h,d]),v=(0,i.useRef)((e=>{null==s||s(!0),e.preventDefault(),g(e,"dragging")})),x=(0,i.useRef)((e=>{document.removeEventListener("mouseup",x.current),document.removeEventListener("mousemove",v.current),g(e,"stop"),null==s||s(!1)}));return{percent:c,bindDrag:(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g(e,"start"),document.addEventListener("mouseup",x.current),document.addEventListener("mousemove",v.current)}),[g]),seek:g,update:u}}},76985:(e,t,o)=>{o.d(t,{mB:()=>i,xo:()=>n,tX:()=>r});const i=e=>10229===e||10230===e,n=e=>isNaN(e)?"00:00":`${`0${Math.floor(e/60%60)}`.slice(-2)}:${`0${Math.floor(e%60)}`.slice(-2)}`,a=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),r=(e,t)=>e?a.has(e)?a.get(e):`unknown_${e}`:t},48793:(e,t,o)=>{o.d(t,{t:()=>m});var i,n=o(11040),a=o(91051),r=o(32913),l=o(27918);function s({styleType:e,direction:t}){switch(e){case 0:case 1:return{flexDirection:"column"};case 2:return{flexDirection:"row","& + &":(0,l.YJ)({direction:t,marginStart:"20px"})}}return null}!function(e){e[e.OneColumn=0]="OneColumn",e[e.OneColumnShare=1]="OneColumnShare",e[e.BrowserMode=2]="BrowserMode"}(i||(i={}));const d=(0,r.Z)("button",{target:"e1hk3hf90"})((({styleType:e,theme:{direction:t,colors:o}})=>[l.Ph,{position:"relative",display:"flex",alignItems:"center",cursor:"pointer",":disabled":{cursor:"default",color:o.TextPrimary}},s({styleType:e,direction:t})]),"label:ButtonActionItem;");function c({styleType:e,direction:t}){switch(e){case 0:return[{marginTop:"8px",marginBottom:"6px"},(0,l.f1)({max:767,style:{width:"32px",height:"32px",padding:"6px",svg:{width:"20px",height:"20px"}}})];case 1:return[{padding:"0",marginTop:"8px",marginBottom:"6px"}];case 2:return[{padding:"6px"},(0,l.YJ)({direction:t,marginEnd:"6px"})]}return null}const u=(0,r.Z)("span",{target:"e1hk3hf91"})((({styleType:e,theme:{direction:t,colors:o}})=>[{display:"flex",justifyContent:"center",alignItems:"center",width:2===e?"32px":"48px",height:2===e?"32px":"48px",fontSize:"0px",borderRadius:"50%",transition:"all ease-in-out 200ms"},1!==e?{backgroundColor:o.BGInput,[`${d}:not(:disabled) &:hover`]:{backgroundColor:o.BGInput2},[`${d}:not(:disabled) &:active`]:{backgroundColor:"rgba(22, 24, 35, .14)"}}:null,c({styleType:e,direction:t})]),"label:SpanIconWrapper;"),p=(0,r.Z)("strong",{target:"e1hk3hf92"})((({theme:e})=>(0,l.GI)({theme:e,typography:"P4",color:"TextSecondary"})),{textAlign:"center"},"label:StrongText;"),m=(0,a.memo)((function(e){const{text:t,Icon:o,styleType:i,disabled:a,children:r,e2eTag:l,style:s}=e;return(0,n.jsxs)(d,Object.assign({styleType:i,type:"button",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:a},{children:[(0,n.jsx)(u,Object.assign({style:null!=s?s:{},styleType:i,"data-e2e":`${l}-icon`},{children:o}),void 0),(0,n.jsx)(p,Object.assign({"data-e2e":`${l}-count`},{children:t}),void 0),r]}),void 0)}))},17118:(e,t,o)=>{o.d(t,{H:()=>l});var i=o(11040),n=o(91051),a=o(17936),r=o(8721);const l=e=>{const{visible:t=!1,duration:o=5e3,onHide:l,text:s,children:d,onShow:c,closeByActive:u}=e,p=(0,r.Q)(),[m,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>{h(t)}),[t]),(0,n.useEffect)((()=>{!m&&l&&l(),m&&(null==c||c(),setTimeout((()=>{h(!1)}),o))}),[l,m,o,c]);const g=(0,n.useCallback)((()=>{u&&h(!1)}),[u]),v=(0,n.useMemo)((()=>({padding:"12px"})),[]),x=(0,n.useMemo)((()=>({keepParent:!0})),[]);return(0,i.jsx)(a.u,Object.assign({destroyTooltipOnHide:x,onClick:g,placement:"top",overlay:p(s),tooltipTheme:"blue",visible:m,overlayInnerStyle:v},{children:d}),void 0)}},14452:(e,t,o)=>{o.d(t,{B:()=>m});var i=o(91051),n=o(32667),a=o(11040),r=o(3624),l=o(32913),s=o(58695);const d=(0,l.Z)("div",{target:"exhfy940"})({pointerEvents:"none",position:"fixed",zIndex:1e3},"label:DivDoubleTapContainer;"),c=(0,r.F4)({"0%":{opacity:"1",transform:"scale(1.18)"},"14%":{opacity:"1",transform:"scale(.9)"},"21%":{opacity:"1",transform:"scale(1)"},"58%":{opacity:"1",transform:"scale(1)"},"100%":{opacity:"0",transform:"scale(1.93)"}}),u=(0,l.Z)(s.Z,{target:"exhfy941"})({animation:`${c} 1400ms`,width:"120px",height:"120px"},"label:StyledLikeIcon;"),p=function({x:e,y:t}){const o=Math.floor(61*Math.random()-30);return(0,a.jsx)(d,Object.assign({style:{left:e-60,top:t-60,transform:`rotate(${o}deg)`}},{children:(0,a.jsx)(u,{},void 0)}),void 0)};class m{constructor(e,t){this.x=e,this.y=t,this.el=document.createElement("div")}emit(){document.body.appendChild(this.el),(0,n.render)((0,i.createElement)(p,{x:this.x,y:this.y}),this.el),window.setTimeout((()=>{this.destroy()}),1400)}destroy(){(0,n.unmountComponentAtNode)(this.el),document.body.removeChild(this.el)}}},57462:(e,t,o)=>{o.d(t,{C:()=>d});var i=o(11040),n=o(8721),a=o(34708),r=o(32913),l=o(27918);const s=(0,r.Z)("p",{target:"ejymp3n0"})((({theme:e,isMobile:t,isGray:o})=>t?[(0,l.GI)({theme:e,fontFamily:"Proxima",typography:"P3"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"-4px",marginBottom:"8px",fontSize:"15px",fontWeight:400},o?{padding:"1px 5px",background:"rgba(255, 255, 255, 0.34)",borderRadius:"2px",fontWeight:600,textShadow:"0 0 16px rgba(0, 0, 0, .34)"}:null]:[(0,l.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"8px",marginBottom:"unset",fontSize:"16px",fontWeight:400},o?{padding:"1px 4px",background:"rgba(22, 24, 35, 0.06)",borderRadius:"2px",color:"rgba(22, 24, 35, .5)",fontWeight:600}:null]),"label:PPaidPartnership;"),d=function({item:e}){var t;const o=(0,n.Q)(),{isMobile:r}=null!==(t=(0,a.L)((()=>["isMobile"]),[]))&&void 0!==t?t:{};return 2===(null==e?void 0:e.adLabelVersion)?(0,i.jsx)(s,Object.assign({isMobile:r,isGray:!0},{children:o("bc_new_disclosure")}),void 0):null}},1160:(e,t,o)=>{o.d(t,{V:()=>n});var i=o(91051);const n=()=>{const e=(0,i.useRef)(-1),[t,o]=(0,i.useState)(!1);return{showing:t,handleItemEnter:(0,i.useCallback)((()=>{e.current=window.setTimeout((()=>{o(!0)}),1e3)}),[]),handleItemLeave:(0,i.useCallback)((()=>{window.clearTimeout(e.current),o(!1)}),[]),handleCardEnter:(0,i.useCallback)((()=>{window.clearTimeout(e.current),o(!0)}),[]),handleCardLeave:(0,i.useCallback)((()=>{e.current=window.setTimeout((()=>{o(!1)}),500)}),[])}}},57354:(e,t,o)=>{o.d(t,{W:()=>m});var i=o(11040),n=o(74820),a=o(39556),r=o(91051),l=o(66089),s=o(8721),d=o(32913),c=o(27918);const u=(0,d.Z)("div",{target:"e4cyjsy0"})((({theme:e,justifyContent:t})=>[(0,c.GI)({theme:e,fontFamily:"Proxima",color:"ConstTextInverse"}),{background:e.colors.BGInverse3,display:"flex",justifyContent:t,alignItems:"center"}]),"label:DivScheduleItemWarn;");function p(e){const t=(0,a.unix)(e).format("YYYY-M-D-H:mm"),[o,n,r,l]=t.split("-");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" "},void 0),(0,i.jsx)("span",{children:o},void 0),(0,i.jsx)("span",{children:"-"},void 0),(0,i.jsx)("span",{children:n},void 0),(0,i.jsx)("span",{children:"-"},void 0),(0,i.jsx)("span",{children:r},void 0),(0,i.jsx)("span",{children:" "},void 0),(0,i.jsx)("span",{children:l},void 0)]},void 0)}const m=(0,r.memo)((function({height:e,fontSize:t,scheduledTime:o,iconSize:a,iconMargin:r,className:d,isTextAlignStart:c=!1}){const{direction:m}=(0,n.u)(),h=(0,s.Q)();return(0,i.jsxs)(u,Object.assign({justifyContent:c?"center":void 0,className:d,style:{fontSize:t,height:e,lineHeight:e}},{children:[(0,i.jsx)(l.Z,{width:a,height:a,style:{["ltr"===m?"marginRight":"marginLeft"]:r}},void 0),h("scheduled_for"),p(o)]}),void 0)}))},62321:(e,t,o)=>{o.d(t,{M:()=>l});var i=o(64047),n=o(73566),a=o(48185),r=o(19630);let l=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setVideoInfo(e,t){var o;const{videoId:i,videoPercent:n,duration:a,currentTime:r}=t,l=Object.assign({},null!==(o=e[i])&&void 0!==o?o:{},{videoPercent:n,duration:a,currentTime:r});e[i]?Object.keys(l).forEach((t=>{e[i][t]=l[t]})):(Object.keys(e).forEach((t=>delete e[t])),e[i]=l)}};(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],l.prototype,"setVideoInfo",null),l=(0,i.__decorate)([(0,r.Y)("SeekBarModule")],l)},70643:(e,t,o)=>{o.d(t,{Z:()=>n,j:()=>a});var i=o(13033);const n=e=>{var t;return-1!==(null!==(t=i.F3.getItem("has_use_seek_bar"))&&void 0!==t?t:[]).indexOf(e)},a=e=>{var t;const o=null!==(t=i.F3.getItem("has_use_seek_bar"))&&void 0!==t?t:[];-1===o.indexOf(e)&&o.push(e),i.F3.setItem("has_use_seek_bar",o)}},56344:(e,t,o)=>{o.d(t,{p:()=>v});var i=o(11040),n=o(74820),a=o(91051),r=o(99122),l=o(89442),s=o(5625),d=o(32913),c=o(27918);const u=(0,d.Z)("div",{target:"e7o5pyu0"})({display:"flex",alignItems:"start",justifyContent:"center",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.6)"},"label:DivContainer;"),p=(0,d.Z)("div",{target:"e7o5pyu1"})({flex:"0 0 22px",width:22,padding:"4px 0",fontSize:"16px"},"label:DivIconContainer;"),m=(0,d.Z)(p,{target:"e7o5pyu2"})((({theme:{direction:e}})=>({textAlign:(0,c.$K)(e,"start")})),"label:StyledWarningIconContainer;"),h=(0,d.Z)(p,{target:"e7o5pyu3"})((({theme:{direction:e}})=>({textAlign:(0,c.$K)(e,"start")})),"label:StyledArrowIconContainer;"),g=(0,d.Z)("div",{target:"e7o5pyu4"})((({theme:e})=>[(0,c.GI)({theme:e,fontWeight:"semiBold",color:"ConstTextInverse"}),{flex:"0 1 auto",fontSize:"16px",lineHeight:"24px",wordBreak:"break-word",verticalAlign:"text-top",textAlign:(0,c.$K)(e.direction,"start")}]),"label:DivWarnInfoContent;"),v=(0,a.memo)((function({info:{text:e,url:t},needExtraBottom:o=!1}){const{direction:d,colors:{ConstTextInverse:c}}=(0,n.u)(),p=(0,a.useMemo)((()=>"ltr"===d?(0,i.jsx)(r.Z,{fill:c},void 0):(0,i.jsx)(l.Z,{fill:c},void 0)),[c,d]),v=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t&&window.open(t,"_blank","noopener,noreferrer")}),[t]);return(0,i.jsxs)(u,Object.assign({onClick:v,style:{cursor:t?"pointer":"unset",paddingBottom:o?"44px":void 0}},{children:[(0,i.jsx)(m,{children:(0,i.jsx)(s.Z,{fill:c},void 0)},void 0),(0,i.jsx)(g,{children:e},void 0),t&&(0,i.jsx)(h,{children:p},void 0)]}),void 0)}))},91497:(e,t,o)=>{o.d(t,{Y:()=>a});var i=o(2734),n=o(34708);const a=()=>{const{language:e}=(0,i.m7)((0,n.L)((()=>["language"]),[]));return{isRTL:"ar"===e||"ur"===e||"he-IL"===e}}},48382:(e,t,o)=>{o.d(t,{wu:()=>a,AZ:()=>r,SD:()=>l,cl:()=>s,ky:()=>d,z5:()=>c,no:()=>u,qf:()=>p});var i=o(32913),n=(o(77094),o(27918));const a=(0,i.Z)("div",{target:"ehlq8k30"})({position:"relative",padding:"16px 0"},"label:DivContainer;"),r=(0,i.Z)("div",{target:"ehlq8k31"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivFlexCenterRow;"),l=(0,i.Z)(r,{target:"ehlq8k32"})({justifyContent:"space-between"},"label:StyledWrapper;"),s=(0,i.Z)("div",{target:"ehlq8k33"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P3",color:"TextSecondary"}),{display:"flex",flexDirection:"row",marginTop:"16px",boxSizing:"border-box",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px"}]),"label:DivCopyLinkContainer;"),d=(0,i.Z)("p",{target:"ehlq8k34"})(n.wj,(({theme:e})=>({flex:"1 1 auto",paddingTop:"7px",paddingBottom:"5px",backgroundColor:e.colors.BGInput})),(({theme:{direction:e}})=>(0,n.YJ)({direction:e,paddingStart:"12px",paddingEnd:"0"})),"label:PCopyLinkText;");d.defaultProps=Object.assign(Object.assign({},d.defaultProps),{"data-e2e":"browse-video-link"});const c=(0,i.Z)("button",{target:"ehlq8k36"})((({theme:e})=>[n.Ph,{color:e.colors.TextPrimary,fontWeight:e.fontWeights.bold,flex:"0 0 auto",cursor:"pointer",backgroundColor:e.colors.BGInput2,padding:"7px 18px",":hover":{backgroundColor:e.colors.BGView},":active":{backgroundColor:e.colors.BGInput}}]),"label:ButtonCopyLink;");c.defaultProps=Object.assign(Object.assign({},c.defaultProps),{"data-e2e":"browse-copy"});const u=(0,i.Z)("button",{target:"ehlq8k37"})((({theme:{colors:e}})=>[n.Ph,{position:"relative",display:"flex",width:"24px",height:"24px",justifyContent:"center",alignItems:"center",borderRadius:"50%",cursor:"pointer",color:e.TextPrimary,":hover":{backgroundColor:"rgba(22, 24, 35, 0.1)"},":active":{backgroundColor:"rgba(22, 24, 35, 0.1)"}}]),"label:ButtonShare;"),p=(0,i.Z)("div",{target:"ehlq8k38"})((({theme:e})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:448,overflow:"auto","::-webkit-scrollbar":{width:"6px"},"::-webkit-scrollbar-thumb":{borderRadius:"3px",background:"rgba(0, 0, 0, 0.15)"}}]),"label:DivShareWrapper;");p.defaultProps=Object.assign(Object.assign({},p.defaultProps),{"data-e2e":"feed-share-group"})},38993:(e,t,o)=>{o.d(t,{Q:()=>b});var i=o(11040),n=o(9236),a=o(91051),r=o(76851),l=o(51905),s=o(8721),d=o(52053),c=o(32913),u=o(81634),p=o(27918);const m=(0,c.Z)("button",{target:"ef0ywbl0"})(p.Ph,(({theme:e})=>[(0,p.YJ)({direction:e.direction,end:"26px"}),(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary",typography:"P3"})]),{display:"flex",justifyContent:"center",alignItems:"center",height:"20px",cursor:"pointer",":hover":{textDecoration:"underline"}},"label:ButtonDelete;"),h=(0,c.Z)(u.Z,{target:"ef0ywbl1"})((({theme:{direction:e}})=>(0,p.YJ)({direction:e,marginEnd:6})),"label:StyledTrashBin;"),g=(0,c.Z)("p",{target:"ef0ywbl2"})((({theme:e})=>(0,p.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),v=(0,c.Z)("button",{target:"ef0ywbl3"})(p.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),x=(0,c.Z)(v,{target:"ef0ywbl4"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),b=function({video:e}){const[t,o]=(0,a.useState)(!1),c=(0,s.Q)(),u=(0,n.qj)(d.O),p=(0,a.useCallback)((()=>{o(!0),l.o.handleScheduleConfirm(e.id)}),[e.id]),b=(0,a.useCallback)((()=>{u.postScheduleDelete(e.id),o(!1)}),[u,e.id]),y=(0,a.useCallback)((()=>{o(!1),l.o.handleScheduleDelete("cancel")}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m,Object.assign({type:"button",onClick:p},{children:[(0,i.jsx)(h,{width:18.33,height:18.33},void 0),c("delete")]}),void 0),(0,i.jsxs)(r.AR,Object.assign({closeOnBackdropClick:!1,compact:!0,closeOnEsc:!1,isOpen:t,onClose:y},{children:[(0,i.jsx)(g,{children:c("delete_confirm")},void 0),(0,i.jsx)(v,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:b},{children:c("delete")}),void 0),(0,i.jsx)(x,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:y},{children:c("cancel_settings")}),void 0)]}),void 0)]},void 0)}},87616:(e,t,o)=>{o.d(t,{C:()=>xe});var i=o(11040),n=o(74820),a=o(91051),r=o(51905),l=o(8721),s=o(84475),d=o(39973),c=o(25615),u=o.n(c),p=o(76851),m=o(25818),h=o(3624),g=o(32913),v=o(73694),x=o(27918);const b=(0,g.Z)("div",{target:"e1rwytmq0"})((({theme:e})=>[(0,x.GI)({theme:e,typography:"H6",fontFamily:"Proxima"}),{position:"relative",userSelect:"none"}]),"label:DivContainer;"),y=(0,g.Z)("div",{target:"e1rwytmq1"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px",borderRadius:"2px",border:`1px solid ${e.LineSecondary2}`,cursor:"pointer"})),"label:DivSelectionContainer;"),_=(0,g.Z)("p",{target:"e1rwytmq2"})(x.wj,{flex:"1 1 auto"},"label:PSelected;"),f=(0,g.Z)(v.Z,{target:"e1rwytmq3"})({width:24,height:24,flex:"0 0 24px"},"label:StyledChevronDown;"),j=(0,g.Z)("div",{target:"e1rwytmq4"})({position:"fixed",left:0,right:0,top:0,bottom:0},"label:DivSelectMask;"),k=(0,h.F4)({from:{opacity:"0",transform:"scale(0.6, 0.6)"},"70%":{opacity:"1",transform:"scale(1.01, 1.01)"},to:{opacity:"1",transform:"scale(1, 1)",animationTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"}}),C=(0,g.Z)("ul",{target:"e1rwytmq5"})((({theme:{colors:e}})=>({position:"absolute",left:0,right:0,margin:0,padding:0,listStyle:"none",border:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,boxShadow:`0px 2px 8px ${e.ShadowPrimary}`,animation:`${k} 100ms normal`,transformOrigin:"center top",zIndex:1})),"label:UlOptionsContainer;"),w=(0,g.Z)("li",{target:"e1rwytmq6"})((({theme:{colors:e}})=>({cursor:"pointer",padding:"8px 12px",":hover":{background:e.BGView}})),"label:LiOptionsItem;"),S=(0,g.Z)("p",{target:"e1rwytmq7"})(x.wj,"label:POptionsTitle;"),P=(0,g.Z)("p",{target:"e1rwytmq8"})(x.wj,(({theme:e})=>(0,x.GI)({theme:e,typography:"P4",color:"TextTertiary"})),"label:POptionsDesc;");function T({value:e,options:t,e2eData:o,itemE2eData:n,onChange:r,placeholder:l}){var s,d;const[c,u]=(0,a.useState)(!1),p=t.find((({value:t})=>t===e)),m=(0,a.useCallback)((()=>{u(!0)}),[]),h=(0,a.useCallback)((()=>{u(!1)}),[]),g=(0,a.useCallback)((e=>()=>{null==r||r(e),h()}),[h,r]);return(0,i.jsxs)(b,{children:[(0,i.jsxs)(y,Object.assign({"data-e2e":o,onClick:m},{children:[(0,i.jsx)(_,{children:null!==(d=null!==(s=null==p?void 0:p.title)&&void 0!==s?s:null==p?void 0:p.value)&&void 0!==d?d:l},void 0),(0,i.jsx)(f,{width:24,height:24},void 0)]}),void 0),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{onClick:h},void 0),(0,i.jsx)(C,{children:t.map((({value:e,key:t,title:o,desc:a})=>{const r=String(null!=o?o:e);return(0,i.jsxs)(w,Object.assign({"data-e2e":n,title:r,onClick:g(e)},{children:[(0,i.jsx)(S,{children:o},void 0),a&&(0,i.jsx)(P,{children:a},void 0)]}),null!=t?t:String(e))}))},void 0)]},void 0)]},void 0)}var I,D,O=o(33104),R=o(9236),L=o(76967),Z=o(64047),B=o(73566),M=o(48185),F=o(19630),z=o(60595),A=o(93859),E=o(56979),U=o(49584),W=o(20948),V=o(93797);!function(e){e.PrivateAccountPop="private_account_pop",e.PrivateAccountPopClick="private_account_pop_click",e.CookieBannerShow="cookie_banner_show",e.CookieBannerEnterPolicy="enter_cookie_policy",e.ChangeCookieSetting="change_cookie_setting",e.ClickCookiePolicy="click_cookie_policy",e.ClickCookieSettings="click_cookie_settings"}(I||(I={})),function(e){e.ClickBannerAccept="click_banner_accept",e.ClickBannerDecline="click_banner_decline",e.ClickPolicy="click_banner_cookie_policy",e.ClickSettings="click_banner_cookie_settings"}(D||(D={}));var G,q,$=o(90035),N=o(47165),H=o(68254);!function(e){e[e.Show=0]="Show",e[e.CanNotModify=1]="CanNotModify",e[e.Hide=2]="Hide"}(G||(G={})),function(e){e[e.NoRestriction=0]="NoRestriction",e[e.Compliance=1]="Compliance",e[e.FamilyPairing=2]="FamilyPairing",e[e.PrivateAccount=3]="PrivateAccount"}(q||(q={}));let Y=class extends B.D{constructor(e){super(),this.service=e,this.defaultState={isPrivateBannerShowing:!1,videoPrivateSetting:{duet:{show_type:0,res_type:0},stitch:{show_type:0,res_type:0}}}}setIsPrivateBannerShowing(e,t){e.isPrivateBannerShowing=t}handleShowPrivateBanner(e){return e.pipe((0,A.b)((e=>{e&&V.W.event("private_account_pop")})),(0,E.U)((e=>this.getActions().setIsPrivateBannerShowing(e))))}handlePrivateBannerClose(e){return e.pipe((0,A.b)((()=>{var e;e="ok",V.W.event("private_account_pop_click",{result:e})})),(0,U.z)((()=>this.service.postPrivateBannerAck())),(0,A.b)((e=>{(0,$.k)(e.statusCode,[0])})),(0,E.U)((e=>0===e.statusCode?this.getActions().setIsPrivateBannerShowing(!1):this.noop())),(0,N.n)({}))}setVideoPrivateSetting(e,t){e.videoPrivateSetting=t}getVideoPrivateSetting(e){return e.pipe((0,W.M)(this.state$),(0,U.z)((([e,t])=>this.service.getVideoPrivateSetting().pipe((0,E.U)((e=>{var o,i,n,a;const{private_settings:r}=e;return this.getActions().setVideoPrivateSetting({duet:{show_type:null!==(o=null==r?void 0:r.video_privacy.duet.show_type)&&void 0!==o?o:t.videoPrivateSetting.duet.show_type,res_type:null!==(i=null==r?void 0:r.video_privacy.duet.res_type)&&void 0!==i?i:t.videoPrivateSetting.duet.res_type},stitch:{show_type:null!==(n=null==r?void 0:r.video_privacy.stitch.show_type)&&void 0!==n?n:t.videoPrivateSetting.stitch.show_type,res_type:null!==(a=null==r?void 0:r.video_privacy.stitch.res_type)&&void 0!==a?a:t.videoPrivateSetting.stitch.res_type}})}))))),(0,N.n)({}))}};(0,Z.__decorate)([(0,M.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Boolean]),(0,Z.__metadata)("design:returntype",void 0)],Y.prototype,"setIsPrivateBannerShowing",null),(0,Z.__decorate)([(0,M.Qm)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[z.y]),(0,Z.__metadata)("design:returntype",void 0)],Y.prototype,"handleShowPrivateBanner",null),(0,Z.__decorate)([(0,M.Qm)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[z.y]),(0,Z.__metadata)("design:returntype",void 0)],Y.prototype,"handlePrivateBannerClose",null),(0,Z.__decorate)([(0,M.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Object]),(0,Z.__metadata)("design:returntype",void 0)],Y.prototype,"setVideoPrivateSetting",null),(0,Z.__decorate)([(0,M.Qm)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[z.y]),(0,Z.__metadata)("design:returntype",void 0)],Y.prototype,"getVideoPrivateSetting",null),Y=(0,Z.__decorate)([(0,F.Y)("Compliance"),(0,Z.__metadata)("design:paramtypes",[H.n])],Y);var Q=o(52053);const J=(0,g.Z)("div",{target:"e1i2llgv1"})({padding:"32px",width:"332px"},"label:DivContentWrapper;"),K=(0,g.Z)("h2",{target:"e1i2llgv2"})((({theme:e})=>(0,x.GI)({theme:e,typography:"H4"})),{marginTop:"4px",textAlign:"center"},"label:H2Title;"),X=(0,g.Z)("p",{target:"e1i2llgv3"})((({theme:e})=>(0,x.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{marginTop:"24px",marginBottom:"8px"},"label:PDesc;"),ee=(0,g.Z)("div",{target:"e1i2llgv4"})({marginTop:"16px"},"label:DivSwitchGroupContainer;"),te=(0,g.Z)("div",{target:"e1i2llgv5"})({display:"flex",flexDirection:"row",alignItems:"center",height:"40px"},"label:DivSwitchItemContainer;"),oe=(0,g.Z)("span",{target:"e1i2llgv6"})((({theme:e,disabled:t})=>[(0,x.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:t?"TextQuaternary":"TextPrimary"}),(0,x.YJ)({direction:e.direction,marginEnd:"12px"}),{flex:"1 1 auto"}]),"label:SpanSwitchText;"),ie=(0,g.Z)("p",{target:"e1i2llgv7"})((({theme:e})=>(0,x.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextQuaternary"})),{marginTop:"4px"},"label:PHint;"),ne=(0,g.Z)("button",{target:"e1i2llgv8"})(x.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonSave;"),ae=function(e){const{videoId:t,visible:o,onClose:n=u()}=e,r=(0,l.Q)(),s=function(e){return(0,R.mp)(L.A,{selector:t=>t[e],dependencies:[e]})}(t),d=(0,O.p)(null==s?void 0:s.author),{handleChange:c,optionsList:m,visibilityValue:h}=function({item:e,author:t}){const o=(0,l.Q)(),i=(0,R.qj)(Q.O),{forFriend:n,secret:r,id:s="",adAuthorization:d}=null!=e?e:{},{privateAccount:c}=null!=t?t:{};return{visibilityValue:(0,a.useMemo)((()=>n?"3":r?"2":"1"),[n,r]),optionsList:(0,a.useMemo)((()=>d?[{title:o("who_can_view_public"),desc:o("public_desc"),value:"1"},{title:o("new_video_status"),desc:o("pull_video_expl_available_for_ads"),value:"2"}]:[{title:o(c?"who_can_view_followers":"who_can_view_public"),desc:o(c?"followers_desc_for_private":"public_desc"),value:"1"},{title:o("who_can_view_friends"),desc:o("followers_desc"),value:"3"},{title:o("video_label_private"),desc:o("private_desc"),value:"2"}]),[d,c,o]),handleChange:(0,a.useCallback)((e=>{i.postModifyVisibility({aweme_id:s,type:e})}),[i,s])}}({item:s,author:d}),{comment:g,duet:v,stitch:x,hintTextKey:b}=function({item:e}){const[{isEnableDuet:t,isEnableStitch:o,isShowSafetyHint:i},n]=(0,R.b7)(Y,{selector:e=>({isEnableDuet:0===e.videoPrivateSetting.duet.show_type,isEnableStitch:0===e.videoPrivateSetting.stitch.show_type,isShowSafetyHint:1===e.videoPrivateSetting.duet.res_type||1===e.videoPrivateSetting.stitch.res_type}),dependencies:[]}),r=1===(null==e?void 0:e.duetDisplay)||1===(null==e?void 0:e.stitchDisplay),l=3!==(null==e?void 0:e.itemCommentStatus),s=Boolean(null==e?void 0:e.duetEnabled)&&!r,d=Boolean(null==e?void 0:e.stitchEnabled)&&!r,c=Number(null==e?void 0:e.video.duration)>=61,u=(0,R.qj)(Q.O),p=(0,a.useMemo)((()=>i?"setting_disabled_16":r?"duet_stitch_minor":c?"hint2":"hint1"),[c,i,r]);(0,a.useEffect)((()=>{n.getVideoPrivateSetting()}),[n]);const m=(0,a.useCallback)((t=>{var o;u.postUserSetting({field:"item_comment",aweme_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",private_setting:t?0:3})}),[null==e?void 0:e.id,u]),h=(0,a.useCallback)((t=>o=>{var i;u.postDuetOrStitchChange({aweme_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",type:t,enable:o?0:1})}),[null==e?void 0:e.id,u]);return{comment:{checked:l,onChange:m},duet:{checked:s,disabled:c||!t||r,onChange:h("item_duet")},stitch:{checked:d,disabled:c||!o||r,onChange:h("item_stitch")},hintTextKey:p}}({item:s,author:d});return(0,i.jsxs)(p.AR,Object.assign({e2eData:"video-setting-list",compact:!0,isOpen:o,onClose:n},{children:[(0,i.jsxs)(J,{children:[(0,i.jsx)(K,{children:r("privacy_set")},void 0),(0,i.jsx)(X,{children:r("view_access")},void 0),(0,i.jsx)(T,{e2eData:"video-setting-choose",itemE2eData:"video-watch-list",value:h,options:m,onChange:c},void 0),(0,i.jsxs)(ee,{children:[(0,i.jsx)(re,Object.assign({e2eData:"video-setting-comment",text:r("allow_comment")},g),void 0),(0,i.jsx)(re,Object.assign({e2eData:"video-setting-duet",text:r("allow_duet")},v),void 0),(0,i.jsx)(re,Object.assign({e2eData:"video-setting-stitch",text:r("allow_stitch")},x),void 0)]},void 0),(0,i.jsx)(ie,{children:r(b)},void 0)]},void 0),(0,i.jsx)(ne,Object.assign({"data-e2e":"video-setting-down",onClick:e.onClose},{children:r("privacy_settings_done")}),void 0)]}),void 0)},re=function(e){const{disabled:t,checked:o,text:n,e2eData:a}=e;return(0,i.jsxs)(te,{children:[(0,i.jsx)(oe,{children:n},void 0),(0,i.jsx)(m.r,{e2eData:a,checked:o,onChange:e.onChange,disabled:t},void 0)]},void 0)};var le=o(32543);const se=(0,g.Z)("div",{target:"e161jvwg0"})({position:"relative",flex:"0 0 24px",width:"24px",height:"24px"},"label:DivActionContainer;"),de=(0,g.Z)(le.Z,{target:"e161jvwg1"})({width:24,height:24,cursor:"pointer"},"label:StyledEllipsisHorizontal;"),ce=(0,g.Z)("ul",{target:"e161jvwg2"})((({theme:e})=>(0,x.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{listStyle:"none",margin:"0",padding:"8px 16px",whiteSpace:"nowrap",minWidth:"200px"},"label:UlPopupContainer;"),ue=(0,g.Z)("li",{target:"e161jvwg3"})((({theme:{colors:e}})=>({position:"relative",padding:"13px",":last-of-type::before":{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}})),"label:LiPopupItem;"),pe=(0,g.Z)("button",{target:"e161jvwg4"})(x.Ph,(({theme:{colors:e}})=>({cursor:"pointer",":hover":{color:e.Primary}})),"label:ButtonAction;"),me=(0,g.Z)("p",{target:"e1qpteip0"})((({theme:e})=>(0,x.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),he=(0,g.Z)("button",{target:"e1qpteip1"})(x.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),ge=(0,g.Z)(he,{target:"e1qpteip2"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),ve=function(e){const{visible:t,onClose:o=u(),videoId:n}=e,s=(0,l.Q)(),d=(0,R.qj)(Q.O),c=(0,a.useCallback)((()=>{d.postVideoDelete({aweme_id:n,target:n}),null==o||o()}),[d,o,n]),m=(0,a.useCallback)((()=>{r.o.handleVideoDelete("cancel"),null==o||o()}),[o]);return(0,i.jsxs)(p.AR,Object.assign({e2eData:"video-delete-modal",isOpen:t,compact:!0,onClose:o},{children:[(0,i.jsx)(me,{children:s("delete_confirm")},void 0),(0,i.jsx)(he,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:c},{children:s("delete")}),void 0),(0,i.jsx)(ge,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:m},{children:s("cancel_settings")}),void 0)]}),void 0)},xe=function({videoId:e}){const{direction:t}=(0,n.u)(),o="ltr"===t?"bottomRight":"bottomLeft",c=(0,l.Q)(),{active:u,handleMouseEnter:p,handleMouseLeave:m}=(0,d.R)(),[h,g]=(0,a.useState)(!1),v=(0,a.useCallback)((()=>{g(!0)}),[]),x=(0,a.useCallback)((()=>{g(!1)}),[]),[b,y]=(0,a.useState)(!1),_=(0,a.useCallback)((()=>{y(!0),r.o.handleClickDeleteVideo({group_id:e})}),[e]),f=(0,a.useCallback)((()=>{y(!1)}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(se,Object.assign({"data-e2e":"video-setting",onMouseEnter:p,onMouseLeave:m},{children:[(0,i.jsx)(de,{},void 0),(0,i.jsx)(s.G,Object.assign({placement:o,active:u,margin:-11,arrowMargin:10},{children:(0,i.jsxs)(ce,{children:[(0,i.jsx)(ue,Object.assign({"data-e2e":"video-privacy-settings"},{children:(0,i.jsx)(pe,Object.assign({onClick:v,type:"button"},{children:c("privacy_set")}),void 0)}),void 0),(0,i.jsx)(ue,Object.assign({"data-e2e":"video-delete"},{children:(0,i.jsx)(pe,Object.assign({onClick:_,type:"button"},{children:c("delete")}),void 0)}),void 0)]},void 0)}),void 0)]}),void 0),(0,i.jsx)(ae,{videoId:e,visible:h,onClose:x},void 0),(0,i.jsx)(ve,{visible:b,onClose:f,videoId:e},void 0)]},void 0)}},93583:(e,t,o)=>{o.d(t,{_:()=>Ie});var i=o(11040),n=o(9236),a=o(91051),r=o(89567),l=o(47393),s=o(58500),d=o(86385),c=o(35468),u=o(17936),p=o(8721),m=o(13964),h=o(48710),g=o(34708);const v=(0,o(80936).ZP)({resolved:{},chunkName:()=>"editor",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!o.m[t]},importAsync:()=>Promise.all([o.e(5932),o.e(4620),o.e(773),o.e(1483),o.e(1189)]).then(o.bind(o,15556)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return o(t)},resolve:()=>15556});var x=o(45802),b=o(32913),y=o(27918);const _=(0,b.Z)("div",{target:"exl80ic0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",display:"flex",flexDirection:"column-reverse",backgroundColor:e.BGPrimary})),"label:DivEmojiSuggestionContainer;"),f=(0,b.Z)("ul",{target:"exl80ic1"})((({theme:{colors:e}})=>({listStyleType:"none",margin:0,padding:0,order:1,flex:"0 0 38px",borderTop:`1px solid ${e.LineSecondary}`,display:"flex",flexDirection:"row"})),"label:UlNavContainer;"),j=(0,b.Z)("div",{target:"exl80ic2"})((({theme:{colors:e}})=>({order:2,flex:"1 1 100%",overflowY:"scroll",scrollbarWidth:"none","::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-track":{marginTop:8},"::-webkit-scrollbar-thumb":{borderRadius:2,backgroundColor:e.LineSecondary},":hover::-webkit-scrollbar-thumb":{backgroundColor:e.TextQuaternary}})),"label:DivPanelContainer;"),k=(0,b.Z)("ul",{target:"exl80ic3"})({listStyleType:"none",margin:0,padding:0,width:"100%",height:"100%",display:"flex",flexWrap:"wrap"},"label:UlPanelList;"),C=(0,b.Z)("li",{target:"exl80ic4"})((({theme:e,theme:{colors:t},isActive:o})=>[(0,y.GI)({theme:e,color:"ConstBGInverse",typography:"H4"}),{listStyleType:"none",flex:"0 0 auto",width:40,height:40,lineHeight:"46px",margin:"5px 6px",cursor:"pointer",textAlign:"center",backgroundColor:o?t.BGInput:t.BGPrimary,borderRadius:8,":hover":{backgroundColor:t.BGInput}}]),"label:LiItem;"),w=(0,a.memo)((function({emojis:e,onSelect:t}){const o=(0,a.useRef)(-1),n=(0,a.useCallback)((e=>{const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");o.current=e?Number(e):-1}}),[]),r=(0,a.useCallback)((i=>{(0,m.NS)(i);const n=o.current;-1!==n&&t(e[n].emoji)}),[e,t]);return(0,i.jsx)(k,Object.assign({onMouseOver:n,onClick:r},{children:e.map(((e,t)=>(0,i.jsx)(C,Object.assign({"data-index":t,isActive:!1},{children:e.emoji}),e.alias)))}),void 0)})),S=[{name:"basic",data:x.Z,iconIndex:11}],P=(0,a.memo)((function(e){const[t,o]=(0,a.useState)(0),n=(0,a.useCallback)((e=>{(0,m.NS)(e);const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");o(e?Number(e):0)}}),[]);return(0,i.jsxs)(_,{children:[(0,i.jsx)(f,Object.assign({onClick:n},{children:S.map((({name:e,data:o,iconIndex:n},a)=>(0,i.jsx)(C,Object.assign({"data-index":a,isActive:a===t},{children:o[n].emoji}),e)))}),void 0),(0,i.jsx)(j,Object.assign({"data-e2e":"comment-emoji-group"},{children:(0,i.jsx)(w,{emojis:S[t].data,onSelect:e.onSelect},S[t].name)}),void 0)]},void 0)}));var T=o(67862),I=o(74820),D=o(88671),O=o(53304),R=o(64047),L=o(73566),Z=o(48185),B=o(19630),M=o(82346),F=o(15608),z=o(11348),A=o(60595),E=o(20948),U=o(49584),W=o(53095),V=o(10026),G=o(5549),q=o(35435),$=o(56979),N=o(68854),H=o(47165),Y=o(2734),Q=o(57244),J=o(4206);let K=class{constructor(e){this.fetch=e}fetchAtDefaultList(){return this.fetch.get("/api/at/default/list/",{query:{cursor:0,count:25}})}fetchRecentContactList(){return this.fetch.get("/api/mention/recent/contact/list/",{query:{mention_type:3}})}fetchSearchList(e,t){return this.fetch.get("/api/comment/search/sug/user/",{query:{keyword:e,count:30,mention_type:3,uid_filter_list:t}})}};K=(0,R.__decorate)([(0,Q.G)(),(0,R.__metadata)("design:paramtypes",[J.r])],K);let X=class extends L.D{constructor(e){super(),this.service=e,this.defaultState={keyword:"",loading:!1,isFetchError:!1,defaultResult:{list:[]},searchResult:{list:[],hasMore:!0,uidFilterList:""},activeList:[],activeItem:{index:null,isActivatedByMouse:!1},recentCount:0}}setKeyword(e,t){e.keyword=t}setLoading(e,t){e.loading=t}setFetchError(e,t){e.isFetchError=t,t&&(e.searchResult.hasMore=!1)}setActiveList(e,t){e.activeList=t}setActiveItem(e,t){const{index:o,isActivatedByMouse:i=!1}=t;e.activeItem.index=o,e.activeItem.isActivatedByMouse=i}activePrev(e){const{activeItem:t,activeList:o}=e,{index:i}=t;if(null===i)return;const{length:n}=o;0!==n&&(e.activeItem.index=Math.max(0,i-1),e.activeItem.isActivatedByMouse=!1)}activeNext(e){const{activeItem:t,activeList:o}=e,{index:i}=t;if(null===i)return;const{length:n}=o;0!==n&&(e.activeItem.index=Math.min(i+1,n-1),e.activeItem.isActivatedByMouse=!1)}setDefaultList(e,t){e.defaultResult.list=t,e.activeList=t}setSearchResult(e,t){e.searchResult=t,0===t.list.length?e.activeList=e.defaultResult.list:e.activeList=t.list}setRecentCount(e,t){e.recentCount=t}fetchDefaultResult(e){return e.pipe((0,E.M)(this.state$),(0,U.z)((([e,t])=>t.defaultResult.list.length>0?(0,M.of)(this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword(""),this.getActions().setActiveList(t.defaultResult.list)):(0,F.D)([this.service.fetchRecentContactList(),this.service.fetchAtDefaultList()]).pipe((0,W.z)((([e,t])=>{const{statusCode:o,userList:i=[]}=e,{status_code:n,user_list:a=[],block_results:r=[]}=t;if(0===o||0===n){const e=a.map((e=>(0,Y.yk)(e))).map((e=>(r.some((t=>((e,t)=>{var o,i;if(e.uid===t.id)return t.blockResult=null===(i=null===(o=e.user_blocked_results)||void 0===o?void 0:o[0])||void 0===i?void 0:i.block_type,!0})(t,e))),e)));return(0,M.of)(this.getActions().setRecentCount(i.length),this.getActions().setDefaultList(function(e,t){let o=t;return e.forEach((e=>{o=o.filter((t=>e.id!==t.id))})),[...e,...o]}(i,e)))}return(0,M.of)(this.getActions().setFetchError(!0))})),(0,V.O)(this.getActions().setLoading(!0),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword("")),(0,H.n)({})))))}fetchSearchResult(e){return e.pipe((0,E.M)(this.state$),(0,q.w)((([e,t])=>{const{keyword:o,searchResult:{uidFilterList:i,list:n,hasMore:a}}=t,r=e===o,l=r?i:"";return""===e||r&&!a?z.E:this.service.fetchSearchList(e,l).pipe((0,$.U)((e=>{const{statusCode:t,userList:o=[],hasMore:i}=e;if(0===t||403===t||203===t){const e=r?[...n,...o]:o,t=encodeURIComponent(JSON.stringify(e.map((e=>e.id))));return this.getActions().setSearchResult({list:e,hasMore:1===i,uidFilterList:t})}return this.getActions().setFetchError(!0)})),(0,V.O)(this.getActions().setLoading(!r),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:r?t.activeItem.index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setKeyword(e),this.getActions().setActiveItem({index:r?t.activeItem.index:-1})),(0,N.K)((()=>(0,M.of)(this.getActions().setLoading(!1),this.getActions().setFetchError(!0)))))})))}};(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,String]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setKeyword",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Boolean]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setLoading",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Boolean]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setFetchError",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Array]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setActiveList",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Object]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setActiveItem",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"activePrev",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"activeNext",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Array]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setDefaultList",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Object]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setSearchResult",null),(0,R.__decorate)([(0,Z.lF)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[Object,Number]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"setRecentCount",null),(0,R.__decorate)([(0,Z.Qm)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[A.y]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"fetchDefaultResult",null),(0,R.__decorate)([(0,Z.Qm)(),(0,R.__metadata)("design:type",Function),(0,R.__metadata)("design:paramtypes",[A.y]),(0,R.__metadata)("design:returntype",void 0)],X.prototype,"fetchSearchResult",null),X=(0,R.__decorate)([(0,B.Y)("MentionSuggestionUserModule"),(0,R.__metadata)("design:paramtypes",[K])],X);var ee=o(43683),te=o(13761);const oe=(0,b.Z)("div",{target:"e16bf9xh0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",overflowX:"hidden",overflowY:"scroll",backgroundColor:e.BGPrimary,scrollbarWidth:"none","::-webkit-scrollbar":{width:0}})),"label:DivContainer;"),ie=(0,b.Z)("div",{target:"e16bf9xh1"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivNotItemContainer;"),ne=(0,b.Z)("p",{target:"e16bf9xh2"})((({theme:e})=>(0,y.GI)({theme:e,color:"TextTertiary",typography:"H6"})),{flex:"1 1 auto",margin:"18px auto"},"label:PLoadingText;"),ae=(0,b.Z)("p",{target:"e16bf9xh3"})((({theme:e})=>(0,y.GI)({theme:e,color:"TextTertiary",typography:"H5"})),{flex:"1 1 auto",marginTop:106},"label:PErrorText;"),re=(0,b.Z)("p",{target:"e16bf9xh4"})((({theme:e})=>(0,y.GI)({theme:e,color:"Primary",typography:"H6"})),{flex:"1 1 auto",margin:"11px auto",cursor:"pointer"},"label:PRetryText;"),le=(0,b.Z)("div",{target:"e16bf9xh5"})((({theme:{colors:e},isDisabled:t})=>({height:"100%",padding:"4px 0",margin:"0 16px",display:"flex",cursor:t?"default":"pointer",borderBottom:`1px solid ${e.LineSecondary}`})),"label:DivItemContainer;"),se=(0,b.Z)("div",{target:"e16bf9xh6"})((({theme:{colors:e},isActive:t,isDisabled:o})=>({height:48,backgroundColor:t?e.BGView:e.BGPrimary,opacity:o?.34:1})),"label:DivItemBackground;"),de=(0,b.Z)("div",{target:"e16bf9xh7"})([{flex:"1 1 auto",overflow:"hidden"},({theme:{direction:e}})=>(0,y.YJ)({direction:e,marginStart:8})],"label:DivInfoContainer;"),ce=(0,b.Z)("p",{target:"e16bf9xh8"})([{display:"flex",alignItems:"center"}],"label:PMentionInfoLine;"),ue=(0,b.Z)("span",{target:"e16bf9xh9"})((({theme:e})=>(0,y.GI)({theme:e,fontWeight:"semiBold",typography:"P3"})),y.wj,"label:SpanInfoNickname;"),pe=(0,b.Z)("span",{target:"e16bf9xh10"})((({theme:e})=>(0,y.GI)({theme:e,fontWeight:"normal",typography:"P4"})),y.wj,"label:SpanInfoUniqueId;"),me=(0,b.Z)("span",{target:"e16bf9xh11"})({margin:"0px 4px"},"label:SpanInfoDot;"),he=(0,b.Z)("span",{target:"e16bf9xh12"})({fontSize:"10px"},"label:SpanInfoVerify;"),ge=(0,b.Z)("span",{target:"e16bf9xh13"})((({theme:e})=>(0,y.GI)({theme:e,color:"TextTertiary",fontWeight:"semiBold",typography:"P4"})),{verticalAlign:"middle",flexShrink:0},"label:SpanInfoFollowing;"),ve=(0,a.memo)((function({isActive:e,index:t,user:o}){var r;const l=(0,p.Q)(),{user:s}=null!==(r=(0,g.L)((()=>["user"]),[]))&&void 0!==r?r:{},{nickname:d,uniqueId:c,verified:u,relation:m,avatarThumb:h,blockResult:v}=o,x=(0,a.useMemo)((()=>1===m||2===m),[m]),b=1===v||c===(null==s?void 0:s.uniqueId),{setActiveItem:y}=(0,n.qj)(X),_=(0,a.useCallback)((()=>{y({index:t,isActivatedByMouse:!0})}),[y,t]);return(0,i.jsx)(se,Object.assign({"data-e2e":"comment-at-list",isActive:e,isDisabled:b,onMouseEnter:_},{children:(0,i.jsxs)(le,Object.assign({isDisabled:b},{children:[(0,i.jsx)(te.q,{size:40,src:h,style:{flex:"0 0 40px"}},void 0),(0,i.jsxs)(de,{children:[(0,i.jsxs)(ce,{children:[(0,i.jsx)(ue,Object.assign({"data-e2e":"comment-at-nickname"},{children:d}),void 0),u&&(0,i.jsx)(he,{children:(0,i.jsx)(ee.Q,{},void 0)},void 0),x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(me,{children:"·"},void 0),(0,i.jsx)(ge,{children:l("Following")},void 0)]},void 0)]},void 0),(0,i.jsx)(ce,{children:(0,i.jsx)(pe,Object.assign({"data-e2e":"comment-at-uniqueid"},{children:c}),void 0)},void 0)]},void 0)]}),void 0)}),void 0)}));var xe=o(12820);const be=(0,a.memo)((function({keyword:e="",onSelect:t}){var o;const r=(0,p.Q)(),{colors:l}=(0,I.u)(),{user:d}=null!==(o=(0,g.L)((()=>["user"]),[]))&&void 0!==o?o:{},[{loading:c,isFetchError:u,activeList:h,activeItem:v,recentCount:x},{fetchDefaultResult:b,fetchSearchResult:y}]=(0,n.b7)(X),{index:_}=v,f=(0,a.useRef)(null),j=(0,a.useRef)([]);(0,a.useEffect)((()=>{b()}),[b]),(0,a.useEffect)((()=>{""===e?b():y(e)}),[e,b,y]),(0,a.useEffect)((()=>{const{index:e,isActivatedByMouse:t}=v;t||function(e,t){if(null===t||-1===t||null===e.current)return;const o=48*t,i=48*(t+1),n=e.current.clientHeight,{scrollTop:a}=e.current;o<a?e.current.scrollTop=o:i>n+a&&(e.current.scrollTop=i-n)}(f,e)}),[v]);const k=(0,a.useCallback)((()=>""!==e&&y(e)),[y,e]);(0,O.s)({elemRef:f,onHitBottom:k,bottomThreshold:96});const C=(0,a.useCallback)((t=>{(0,m.NS)(t),""===e?b():y(e)}),[b,y,e]),w=(0,a.useCallback)((e=>{(0,m.NS)(e),null==t||t()}),[t]),S=(0,a.useCallback)((t=>{h.slice(t,t+5).forEach(((o,i)=>{if(j.current[t+i])return;const{blockResult:n,uniqueId:a,id:r,relation:l}=o,c=1===n||a===(null==d?void 0:d.uniqueId);let u="all_user";!e&&t+i<x?u="recent":1===l?u="following":2===l&&(u="friends"),s.y.handleMentionItemShow({to_user_id:r,user_type:u,search_keyword:e,is_valid:c?"0":"1"}),j.current[t+i]=!0}))}),[h,null==d?void 0:d.uniqueId,e,x]),P=(0,D.fB)((e=>{const{scrollTop:t}=e.target,o=Math.floor(t/48);S(o)}),[S],50);return(0,a.useEffect)((()=>{S(0)}),[S]),c?(0,i.jsx)(oe,{children:(0,i.jsxs)(ie,{children:[(0,i.jsx)(xe.$,{size:26,fill:l.TextTertiary,style:{marginTop:80,flex:"1 1 auto"}},void 0),(0,i.jsx)(ne,{children:r("comment_at_search")},void 0)]},void 0)},void 0):u?(0,i.jsx)(oe,{children:(0,i.jsxs)(ie,{children:[(0,i.jsx)(ae,{children:r("comment_at_load")},void 0),(0,i.jsx)(re,Object.assign({onClick:C},{children:r("comment_at_tryagain")}),void 0)]},void 0)},void 0):(0,i.jsx)(oe,Object.assign({ref:f,onClick:w,onScroll:P},{children:h.map(((e,t)=>(0,i.jsx)(ve,{user:e,index:t,isActive:_===t},e.id)))}),void 0)})),ye=(0,b.Z)("div",{target:"e1rzzhjk0"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivCommentContainer;"),_e=(0,b.Z)("div",{target:"e1rzzhjk1"})({flex:"1 1 auto"},"label:DivLayoutContainer;"),fe=(0,b.Z)("div",{target:"e1rzzhjk2"})((({theme:{colors:e},isFocus:t})=>({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:e.BGInput,boxSizing:"border-box",border:"1px solid",borderColor:t?e.LinePrimary:"transparent",borderRadius:8,padding:"0 9px"})),"label:DivInputAreaContainer;");fe.defaultProps=Object.assign(Object.assign({},fe.defaultProps),{"data-e2e":"comment-input"});const je=(0,b.Z)("div",{target:"e1rzzhjk3"})({flex:"1 1 auto",height:"auto",margin:"10px 0"},(({theme:{direction:e}})=>(0,y.YJ)({direction:e,marginEnd:8})),"label:DivInputEditorContainer;");function ke({theme:e,isActive:t=!1}){return[{flex:"0 0 32px",width:32,height:32,padding:5,margin:3,cursor:"pointer",backgroundColor:t?e.colors.ShadowPrimary:"transparent",borderRadius:8,":hover":{backgroundColor:e.colors.ShadowPrimary},svg:{width:"100%",height:"100%"}}]}je.defaultProps=Object.assign(Object.assign({},je.defaultProps),{"data-e2e":"comment-text"});const Ce=(0,b.Z)("div",{target:"e1rzzhjk4"})(ke,"label:DivMentionButton;");Ce.defaultProps=Object.assign(Object.assign({},Ce.defaultProps),{"data-e2e":"comment-at-icon"});const we=(0,b.Z)("div",{target:"e1rzzhjk5"})(ke,"label:DivEmojiButton;");we.defaultProps=Object.assign(Object.assign({},we.defaultProps),{"data-e2e":"comment-emoji-icon"});const Se=(0,b.Z)("div",{target:"e1rzzhjk6"})((({theme:e,isActive:t})=>[(0,y.GI)({theme:e,color:t?"Primary":"TextQuaternary",typography:"H6"}),{cursor:t?"pointer":"default",flex:"0 0 48px",lineHeight:"39px",textAlign:(0,y.$K)(e.direction,"end")},(0,y.YJ)({direction:e.direction,marginEnd:4})]),"label:DivPostButton;");Se.defaultProps=Object.assign(Object.assign({},Se.defaultProps),{"data-e2e":"comment-post"});const Pe=(0,b.Z)("div",{target:"e1rzzhjk7"})((({display:e,theme:{colors:t,direction:o}})=>[{position:"absolute",width:280,height:256,top:-256,borderRadius:8,overflow:"hidden",backgroundColor:t.BGPrimary,boxShadow:`${t.ShadowPrimary} 0px 4px 16px 0px`,display:e?"block":"none"},(0,y.YJ)({direction:o,start:44})]),"label:DivMentionSuggestionContainer;"),Te=(0,b.Z)("div",{target:"e1rzzhjk9"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",width:368,height:300,top:-300,borderRadius:8,overflow:"hidden",backgroundColor:e.BGPrimary,boxShadow:`${e.ShadowPrimary} 0px 4px 16px 0px`,outline:0,zIndex:1},(0,y.YJ)({direction:t,end:12})]),"label:DivEmojiPanelContainer;"),Ie=(0,a.memo)((function({itemId:e,disable:t,teaParams:o,onBlur:x=(()=>{}),onFocus:b=(()=>{})}){var y;const{user:_}=null!==(y=(0,g.L)((()=>["user"]),[]))&&void 0!==y?y:{},[{activeItem:f,activeList:j},{activePrev:k,activeNext:C}]=(0,n.b7)(X,{selector:({activeItem:e,activeList:t})=>({activeItem:e,activeList:t}),dependencies:[]}),{index:w}=f,[S,{publishComment:I,setNeedResetKeyword:D}]=(0,n.b7)(T.p,{selector:e=>e.isInputEmpty,dependencies:[]}),[O,R]=(0,a.useState)(null),[L,Z]=(0,a.useState)(!1),[B,M]=(0,a.useState)(!1),F=(0,a.useRef)(null),z=(0,p.Q)(),[A,E]=(0,a.useState)(!1);(0,a.useEffect)((()=>{E(!0)}),[]);const U=(0,a.useCallback)((e=>{var t;(0,m.NS)(e),null===(t=F.current)||void 0===t||t.handleInsertMentionTrigger(),s.y.handleSearchAt(Object.assign({enter_method:"button"},o))}),[o]),W=(0,a.useCallback)((e=>{"@"===e&&s.y.handleSearchAt(Object.assign({enter_method:"input"},o))}),[o]),V=(0,a.useCallback)((()=>{var e;if(null===O||null===w)return;const t=j[w];t&&(1!==t.blockResult?t.uniqueId!==(null==_?void 0:_.uniqueId)?(null===(e=F.current)||void 0===e||e.handleSelectUser(t),s.y.handleSelectAt(Object.assign(Object.assign({},o),{to_user_id:t.id}))):c.h.open({content:z("no_at_me"),duration:3,widthType:"half"}):c.h.open({content:z("mention_privacy_toast_cant_mention"),duration:3,widthType:"half"}))}),[w,j,O,z,o,_]),G=(0,a.useCallback)((e=>{var t,i,n;null===(t=F.current)||void 0===t||t.handleSelectEmoji(e),Z(!1),s.y.handleEmojiSelect(Object.assign({enter_method:"button",emoji_code:null===(n=e,i=[...n].map((e=>`${e.codePointAt(0)}`)))||void 0===i?void 0:i[0]},o))}),[o]),q=(0,a.useCallback)((e=>{var t;(0,m.NS)(e),Z(!L),R(null),null===(t=F.current)||void 0===t||t.focus()}),[L]),$=(0,a.useCallback)((t=>()=>{var i,n;if(!S){const a=null!==(n=null===(i=F.current)||void 0===i?void 0:i.getTextInfo())&&void 0!==n?n:{inputText:"",textExtra:[]};I(Object.assign(Object.assign({awemeId:e},a),{teaParams:Object.assign({enter_method:t},o)}))}}),[S,e,I,o]),N=(0,a.useCallback)((()=>{M(!0),b()}),[b]),H=(0,a.useCallback)((()=>{M(!1),x(),d.V.handleCloseText({group_id:o.group_id})}),[x,o.group_id]),Y=(0,a.useCallback)((()=>{d.V.handleEnterText({group_id:o.group_id})}),[o.group_id]),Q=(0,h.J)({upHandler:k,downHandler:C,confirmHandler:V});return(0,a.useEffect)((()=>{const e=()=>{L&&Z(!1),D(!0)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[L,D]),(0,i.jsxs)(ye,{children:[(0,i.jsx)(_e,{children:(0,i.jsxs)(fe,Object.assign({isFocus:B,onKeyDown:Q,onFocus:N,onBlur:H,onClick:Y},{children:[(0,i.jsx)(je,{children:A?(0,i.jsx)(v,{ref:F,disable:t,onKeywordChange:R,onPost:$("input"),onInputTrigger:W},void 0):null},void 0),(0,i.jsx)(u.u,Object.assign({overlay:z("comment_tray_at")},{children:(0,i.jsx)(Ce,Object.assign({onClick:U},{children:(0,i.jsx)(r.Z,{},void 0)}),void 0)}),void 0),(0,i.jsx)(u.u,Object.assign({overlay:z("comment_tray_emoji")},{children:(0,i.jsx)(we,Object.assign({isActive:L,onClick:q},{children:(0,i.jsx)(l.Z,{},void 0)}),void 0)}),void 0),null!==O&&!L&&(0,i.jsx)(Pe,Object.assign({"data-e2e":"comment-at-user",display:j.length>0},{children:(0,i.jsx)(be,{keyword:O,onSelect:V},void 0)}),void 0),L&&(0,i.jsx)(Te,Object.assign({"data-e2e":"comment-emoji-list"},{children:(0,i.jsx)(P,{onSelect:G},void 0)}),void 0)]}),void 0)},void 0),(0,i.jsx)(Se,Object.assign({isActive:!S,onClick:$("button")},{children:z("comment_tray_btn")}),void 0)]},void 0)}))},67862:(e,t,o)=>{o.d(t,{p:()=>C});var i=o(64047),n=o(73566),a=o(48185),r=o(19630),l=o(35167),s=o(82346),d=o(60595),c=o(20948),u=o(49584),p=o(93859),m=o(53095),h=o(58500),g=o(35468),v=o(47165),x=o(21396),b=o(19330),y=o(57244),_=o(30626),f=o(4206);let j=class{constructor(e){this.fetch=e}publishRequest(e){return this.fetch.post("/api/comment/publish/",{query:e,baseUrlType:8,headers:{[_.eD]:this.fetch.csrfToken}})}};j=(0,i.__decorate)([(0,y.G)(),(0,i.__metadata)("design:paramtypes",[f.r])],j);const k={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1};let C=class extends n.D{constructor(e,t,o){super(),this.service=e,this.comment=t,this.t=o,this.defaultState={reply:Object.assign({},k),mentionUserList:[],isInputEmpty:!0,needClearInput:!1,needResetKeyword:!1}}setReply(e,t){e.reply=null===t?Object.assign({},k):t}setMentionUserList(e,t){e.mentionUserList=null===t?[]:t}setIsInputEmpty(e,t){e.isInputEmpty=t}setNeedClearInput(e,t){e.needClearInput=t}setNeedResetKeyword(e,t){e.needResetKeyword=t}publishComment(e){return e.pipe((0,c.M)(this.state$),(0,u.z)((([e,t])=>{const{awemeId:o,inputText:i,textExtra:n,teaParams:a}=e,{reply:{replyId:r,replyToReplyId:l,nickname:d,position:c}}=t,u={aweme_id:o,text:i,reply_id:r,reply_to_reply_id:l,text_extra:JSON.stringify(n)};return this.service.publishRequest(u).pipe((0,p.b)((({status_code:e,comment:t})=>{if(0===e){const e=Boolean(d)?"0"===l?"reply":"reply_to_reply":"original",o=d?this.t("comment_reply_success"):this.t("comment_post_success");g.h.destroy(),g.h.open({content:o,duration:3}),h.y.handlePostComment(Object.assign({comment_category:e,comment_id:t.cid},a))}else 22===e?(g.h.destroy(),g.h.open({content:this.t("comment_banned_toast"),duration:3})):e?(g.h.destroy(),g.h.open({content:this.t("comment_post_failed"),duration:3})):(g.h.destroy(),g.h.open({content:this.t("comment_nointernet_toast"),duration:3}))})),(0,m.z)((({status_code:e,comment:t})=>0===e?d?(0,s.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handleReplySuccess({comment:t,position:c})):(0,s.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handlePostSuccess(t)):(0,s.of)(this.noop()))),(0,v.n)({}))})))}};(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],C.prototype,"setReply",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],C.prototype,"setMentionUserList",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],C.prototype,"setIsInputEmpty",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],C.prototype,"setNeedClearInput",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],C.prototype,"setNeedResetKeyword",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[d.y]),(0,i.__metadata)("design:returntype",d.y)],C.prototype,"publishComment",null),C=(0,i.__decorate)([(0,r.Y)("CommentInputModule"),(0,i.__param)(2,(0,l.t)(x.s)),(0,i.__metadata)("design:paramtypes",[j,b.x,Function])],C)},20417:(e,t,o)=>{o.d(t,{S:()=>v});var i=o(11040),n=o(91051),a=o(21041),r=o(76851),l=o(8721),s=o(32913),d=o(27918);const c=(0,s.Z)("div",{target:"e19twy0g0"})((({theme:{colors:e}})=>({position:"relative",width:310,height:218,boxSizing:"content-box",borderRadius:8,backgroundColor:e.BGPrimary,textAlign:"center"})),"label:DivLeaveModalContainer;"),u=(0,s.Z)("div",{target:"e19twy0g1"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextPrimary",typography:"H5"}),{position:"absolute",top:22,left:20,right:20}]),"label:DivTitle;"),p=(0,s.Z)("div",{target:"e19twy0g2"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextSecondary",typography:"H6"}),{position:"absolute",top:60,left:20,right:20}]),"label:DivSubTitle;"),m=(0,s.Z)("div",{target:"e19twy0g3"})({position:"absolute",top:118,left:20,right:20,height:100},"label:DivButtonContainer;"),h=(0,s.Z)("div",{target:"e19twy0g4"})((({theme:e})=>[(0,d.GI)({theme:e,color:"ConstTextInverse",typography:"H6"}),{height:48,lineHeight:"48px",borderRadius:2,backgroundColor:e.colors.Primary,cursor:"pointer"}]),"label:DivConfirmButton;"),g=(0,s.Z)("div",{target:"e19twy0g5"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextTertiary",typography:"H6"}),{height:48,lineHeight:"48px",cursor:"pointer",marginTop:2}]),"label:DivCancelButton;"),v=(0,n.memo)((function({needLeaveCheck:e,visible:t,onConfirmLeave:o,onCancelLeave:s}){const d=(0,l.Q)(),v=(0,a.k6)(),x=(0,n.useRef)(null),[b,y]=(0,n.useState)(!1),[_,f]=(0,n.useState)(!1),j=(0,n.useCallback)((()=>{y(!1),f(!0),o()}),[o]),k=(0,n.useCallback)((()=>{y(!1),x.current=null,s()}),[s]),C=(0,n.useCallback)((t=>!(!_&&e&&(y(!0),x.current=t,1))),[_,e]);return(0,n.useEffect)((()=>{const e=x.current;_&&e&&v.push(e)}),[_,v]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.NL,{when:e,message:C},void 0),(0,i.jsx)(r.AR,Object.assign({compact:!0,isOpen:t||b,closeOnBackdropClick:!1},{children:(0,i.jsxs)(c,{children:[(0,i.jsx)(u,{children:d("comment_tray_exit_title")},void 0),(0,i.jsx)(p,{children:d("comment_tray_exit_des")},void 0),(0,i.jsxs)(m,{children:[(0,i.jsx)(h,Object.assign({onClick:j},{children:d("comment_tray_exit_leave")}),void 0),(0,i.jsx)(g,Object.assign({onClick:k},{children:d("comment_tray_exit_stay")}),void 0)]},void 0)]},void 0)}),void 0)]},void 0)}))},15550:(e,t,o)=>{o.d(t,{r:()=>u});var i=o(64047),n=o(73566),a=o(48185),r=o(19630),l=o(25855),s=o.n(l),d=o(40316),c=o.n(d);let u=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setItem(e,t){e[t.cid]=t}setItemDiggState(e,t){e[t.cid]&&(e[t.cid].user_digged=t.digged)}setItemDiggCount(e,t){e[t.cid]&&(e[t.cid].digg_count=t.count)}removeItem(e,t){e[t]=void 0}multiSetCommentItem(e,t){t.forEach((t=>{e[t.cid]=s()({},e[t.cid],t)}))}multiRemoveCommentItem(e,t){return t.forEach((t=>{e[t]=void 0})),e}reduceOrIncreaseCommentCount(e,{cid:t,isReduce:o}){var i,n;if(!e[t])return;const a=Number(null!==(n=null===(i=e[t])||void 0===i?void 0:i.reply_comment_total)&&void 0!==n?n:0);e[t].reply_comment_total=o?a-1:a+1}getProcessedCommentItem(e,t={}){var o;const i=c()(e,"user","reply_comment");return i.user=null!==(o=e.user.unique_id)&&void 0!==o?o:"",!e.reply_comment||t.ignoreReply?[i]:[i,...e.reply_comment.reduce(((e,t)=>(this.getProcessedCommentItem(t).forEach((t=>{e.push(t)})),e)),[])]}};(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"setItem",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggState",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggCount",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,String]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"removeItem",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Array]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"multiSetCommentItem",null),(0,i.__decorate)([(0,a.j)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Array]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"multiRemoveCommentItem",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],u.prototype,"reduceOrIncreaseCommentCount",null),u=(0,i.__decorate)([(0,r.Y)("CommentItem")],u)},97446:(e,t,o)=>{o.d(t,{$:()=>$e});var i=o(11040),n=o(9236),a=o(91051),r=o(21041),l=o(2734),s=o(19330),d=o(30074),c=o(8721),u=o(90035),p=o(15550),m=o(58500),h=o(43683),g=o(41624),v=o(35468),x=o(13761),b=o(66958),y=o(88228),_=o(85404),f=o(47127),j=o(22509),k=o(1160),C=o(84785),w=o(34708),S=o(24878),P=o(76967),T=o(67862),I=o(74820),D=o(76851),O=o(18752),R=o(81634),L=o(13964),Z=o(84475),B=o(39973),M=o(16494),F=o(56187),z=o(38128),A=o(32913),E=o(27918);const U=(0,A.Z)("div",{target:"ezxoskx0"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P4",color:"TextTertiary"})),{width:"20px",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},"label:DivLikeWrapper;"),W=(0,A.Z)(U,{target:"ezxoskx1"})((({theme:e})=>(0,E.YJ)({direction:e.direction,marginStart:"24px"})),{width:"unset",height:"20px",display:"inline-flex",flexDirection:"row",alignItems:"center",cursor:"pointer",verticalAlign:"bottom"},"label:StyledLikeWrapper;"),V=(0,A.Z)("span",{target:"ezxoskx2"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P4"})),(({theme:e})=>(0,E.YJ)({direction:e.direction,marginStart:"4px"})),"label:SpanCount;");V.defaultProps=Object.assign(Object.assign({},V.defaultProps),{"data-e2e":"comment-like-count"});const G=(0,a.memo)((function(e){const{count:t,liked:o}=e,{colors:n}=(0,I.u)(),a=o?(0,i.jsx)(F.Z,{width:20,height:20,fill:n.Primary},void 0):(0,i.jsx)(z.Z,{width:20,height:20},void 0);return(0,i.jsxs)(U,Object.assign({onClick:e.onClick},{children:[(0,i.jsx)("div",Object.assign({"data-e2e":"comment-like-icon"},{children:a}),void 0),(0,i.jsx)(V,Object.assign({style:{marginLeft:0,marginRight:0}},{children:(0,l.BT)(t)}),void 0)]}),void 0)})),q=(0,a.memo)((function(e){const{count:t,liked:o}=e,{colors:n}=(0,I.u)(),a=o?(0,i.jsx)(F.Z,{width:20,height:20,fill:n.Primary},void 0):(0,i.jsx)(z.Z,{width:20,fill:n.TextPrimary,height:20},void 0);return(0,i.jsxs)(W,Object.assign({onClick:e.onClick},{children:[a,(0,i.jsx)(V,Object.assign({style:{color:n.TextPrimary,fontSize:"14px"}},{children:(0,l.BT)(t)}),void 0)]}),void 0)}));var $=o(32543);const N=(0,A.Z)("div",{target:"esns4rh0"})((({theme:{direction:e}})=>[(0,E.YJ)({direction:e,marginStart:"18px",paddingEnd:"2px"}),{width:"24px",flex:"0 0 24px",paddingTop:"24px",display:"flex",flexDirection:"column",alignItems:"center"}]),"label:DivActionContainer;"),H=(0,A.Z)("div",{target:"esns4rh1"})({position:"relative",display:"none"},"label:DivMoreContainer;"),Y=(0,A.Z)($.Z,{target:"esns4rh2"})({width:"24px",height:"24px",cursor:"pointer",display:"block"},"label:StyledMoreIcon;");Y.defaultProps=Object.assign(Object.assign({},Y.defaultProps),{"data-e2e":"comment-more-icon"});const Q=(0,A.Z)("div",{target:"esns4rh3"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{padding:"8px 16px",minWidth:"200px"},"label:DivPopupContainer;"),J=(0,A.Z)("p",{target:"esns4rh4"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"12px 0",whiteSpace:"nowrap",cursor:"pointer","&:not(:last-of-type)":{borderBottom:`1px solid ${e.LineSecondary}`},":hover":{color:e.Primary}})),"label:PActionItem;"),K=(0,A.Z)("span",{target:"esns4rh5"})((({theme:{direction:e}})=>(0,E.YJ)({direction:e,marginStart:"12px"})),"label:SpanActionText;"),X=(0,A.Z)("div",{target:"esns4rh6"})((({theme:e})=>(0,E.GI)({theme:e,typography:"H4",fontFamily:"Sofia",fontWeight:"bold"})),{padding:"28px 24px",textAlign:"center"},"label:DivModalContentContainer;"),ee=(0,A.Z)("div",{target:"esns4rh7"})({display:"flex",flexDirection:"column"},"label:DivButtonContainer;"),te=(0,A.Z)("button",{target:"esns4rh8"})(E.Ph,(({primary:e,theme:t})=>[(0,E.GI)({theme:t,typography:"H6",color:e?"TextPrimary":"TextTertiary",fontWeight:e?"semiBold":"normal"}),{height:"48px",lineHeight:"48px",cursor:"pointer",":first-of-type":{"::before":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"},"::after":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"}}}]),"label:ButtonAction;"),oe=function(e){const{itemId:t,cid:o,count:r,liked:l,onDelete:s,isShowReport:d,isShowDelete:u,inDetailPage:m=!1}=e,h=(0,c.Q)(),{direction:g}=(0,I.u)(),{active:v,handleMouseEnter:x,handleMouseLeave:b}=(0,B.R)(),y=function({itemId:e,cid:t,onShow:o}){var i;const a=(0,n.mp)(C.G,{selector:e=>e.lang,dependencies:[]}),r=(0,n.mp)(P.A,{selector:t=>{var o,i;return null!==(i=null===(o=t[e])||void 0===o?void 0:o.author)&&void 0!==i?i:""},dependencies:[e]}),l=(0,n.mp)(p.r,{dependencies:[t],selector:e=>e[t]}),s=(0,n.mp)(S.z,{dependencies:[null==l?void 0:l.user],selector:e=>{var t,o;return null===(o=e.users[null!==(t=null==l?void 0:l.user)&&void 0!==t?t:""])||void 0===o?void 0:o.secUid}}),d=(0,n.mp)(P.A,{selector:t=>t[e],dependencies:[e]}),c=(0,n.mp)(S.z,{selector:e=>{var t;return e.users[null!==(t=null==d?void 0:d.author)&&void 0!==t?t:""]},dependencies:[null==d?void 0:d.author]}),{handleShowReport:u}=(0,M.Q)({onShow:o,reportTarget:{lang:a,report_type:"comment",comment_with_emoji:/\[(\w+)\]/g.test(null!==(i=null==l?void 0:l.text)&&void 0!==i?i:"")?1:0,object_id:t,owner_id:null!=s?s:"",object_owner_id:null!=s?s:"",video_owner_id:r,video_id:e,video_owner:c}});return u}({itemId:t,cid:o,onShow:L.NS}),[_,f]=(0,a.useState)(!1),j=(0,a.useCallback)((()=>{f(!0)}),[]),k=(0,a.useCallback)((()=>{s(),f(!1)}),[s]),w=(0,a.useCallback)((()=>{f(!1)}),[]),T="ltr"===g?"bottomRight":"bottomLeft",{colors:F}=(0,I.u)();return(0,i.jsxs)(N,{children:[(0,i.jsxs)(H,Object.assign({onMouseEnter:x,onMouseLeave:b},{children:[(0,i.jsx)("div",Object.assign({"data-e2e":"comment-more-icon"},{children:(0,i.jsx)(Y,{},void 0)}),void 0),(0,i.jsx)(Z.G,Object.assign({backgroundColor:F.BGSecondary,active:v,placement:T,margin:m?2:-6},{children:(0,i.jsxs)(Q,{children:[d&&(0,i.jsxs)(J,Object.assign({onClick:y,"data-e2e":"comment-report"},{children:[(0,i.jsx)(O.Z,{width:24,height:24},void 0),(0,i.jsx)(K,{children:h("Report")},void 0)]}),void 0),u&&(0,i.jsxs)(J,Object.assign({"data-e2e":"comment-delete",onClick:j},{children:[(0,i.jsx)(R.Z,{width:24,height:24},void 0),(0,i.jsx)(K,{children:h("comment_delete_btn")},void 0)]}),void 0)]},void 0)}),void 0)]}),void 0),m?null:(0,i.jsx)(G,{count:r,liked:l,onClick:e.onLike},void 0),u&&(0,i.jsx)(D.AR,Object.assign({compact:!0,isOpen:_,closeOnEsc:!1,closeOnBackdropClick:!1},{children:(0,i.jsxs)("div",Object.assign({"data-e2e":"comment-delete-modal",style:{width:310}},{children:[(0,i.jsx)(X,{children:h("comment_delete_des")},void 0),(0,i.jsxs)(ee,{children:[(0,i.jsx)(te,Object.assign({"data-e2e":"comment-modal-delete",primary:!0,onClick:k},{children:h("comment_delete_confirm")}),void 0),(0,i.jsx)(te,Object.assign({"data-e2e":"comment-modal-cancel",onClick:w},{children:h("comment_delete_cancel")}),void 0)]},void 0)]}),void 0)}),void 0)]},void 0)};var ie=o(3624),ne=o(11838);const ae={boxShadow:"0 2px 12px rgb(0 0 0 / 12%)",padding:"8px 16px",margin:"-8px -16px 8px",borderRadius:"8px"},re={boxShadow:"none",padding:"0",margin:"0 0 16px"},le=(0,ie.F4)({"0%":re,"10%":ae,"90%":ae,"100%":re}),se=(0,A.Z)("div",{target:"e1g2efjf0"})({display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:"16px",position:"relative",":hover":{[`${H}`]:{display:"block"},[`${N}`]:{paddingTop:"0"}}},(({highlighted:e})=>e?{animationName:le,animationDuration:"3s"}:null),"label:DivCommentContentContainer;"),de=(0,A.Z)("div",{target:"e1g2efjf1"})({flex:"1 1 auto"},"label:DivContentContainer;"),ce=(0,A.Z)("span",{target:"e1g2efjf2"})((({theme:{colors:e},isCreator:t})=>({fontSize:"16px",color:t?e.Primary:e.TextTertiary})),"label:SpanIdentity;"),ue=(0,A.Z)("span",{target:"e1g2efjf3"})("label:SpanUserNameText;"),pe=(0,A.Z)(ne.D,{target:"e1g2efjf4"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P1",fontFamily:"Sofia",fontWeight:"bold"})),E.gi,{[`:hover ${ue}`]:{textDecoration:"underline"}},"label:StyledUserLinkName;"),me=(0,A.Z)(ne.D,{target:"e1g2efjf5"})((({theme:{direction:e}})=>[{":hover":{[`~ ${de} ${pe} ${ue}`]:{textDecoration:"underline"}}},(0,E.YJ)({direction:e,marginEnd:"12px"})]),"label:StyledUserLinkAvatar;"),he=(0,A.Z)("p",{target:"e1g2efjf6"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P2"})),{whiteSpace:"pre-line",wordBreak:"break-word",marginBottom:"6px"},"label:PCommentText;"),ge=(0,A.Z)("p",{target:"e1g2efjf8"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P3",color:"TextTertiary"})),"label:PCommentSubContent;"),ve=(0,A.Z)("span",{target:"e1g2efjf9"})((({inDetailPage:e=!1,theme:{colors:t}})=>({cursor:"pointer",color:e?t.TextPrimary:t.TextTertiary})),(({theme:e,inDetailPage:t=!1})=>(0,E.GI)({theme:e,fontWeight:t?"semiBold":"normal"})),(({theme:{direction:e}})=>(0,E.YJ)({direction:e,marginStart:24})),"label:SpanReplyButton;"),xe=(0,A.Z)(ne.D,{target:"e1g2efjf10"})((({theme:{colors:e}})=>({display:"inline-block",direction:"ltr",color:e.Primary,cursor:"pointer",":hover":{color:e.Primary},"&:-webkit-any-link":{color:e.Primary}})),"label:StyledUserLinkContent;");var be=o(48036);const ye=(0,A.Z)(he,{target:"exi6j8f0"})((({theme:e})=>(0,E.GI)({theme:e,typography:"P3"})),"label:StyledPCommentTextForSwiper;"),_e=(0,a.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,be.y7)(),o=t?ye:he;return(0,i.jsx)(o,Object.assign({},e),void 0)}));var fe;!function(e){e[e.PlainText=0]="PlainText",e[e.User=1]="User"}(fe||(fe={}));const je=(0,a.memo)((function({commentItem:e,e2eTag:t,onLinkClick:o}){const{text:n,text_extra:r}=e,l=((0,c.Q)(),(0,a.useMemo)((()=>function(e,t){if(!t||0===t.length)return[{type:0,text:e}];const o=[];let i=0;return t.forEach((({start:t,end:n,sec_uid:a,user_id:r})=>{i!==t&&o.push({type:0,text:e.substring(i,t)}),o.push({type:1,text:e.substring(t,n),uid:r,secUid:a}),i=n})),o.push({type:0,text:e.substring(i,e.length)}),o}(n,r)),[n,r]));return(0,i.jsxs)(_e,Object.assign({"data-e2e":t},{children:["",l.map((({text:e,type:t,uid:n,secUid:a},r)=>0===t?(0,i.jsx)("span",{children:e},r):1===t?(0,i.jsx)(xe,Object.assign({uniqueId:null!=a?a:"",secUid:a,isInBrowserMode:!0,onLinkClick:o,teaParams:{to_user_id:null!=n?n:"",enter_method:"comment"}},{children:e}),r):null))]}),void 0)}));var ke;!function(e){e[e.Level1=1]="Level1",e[e.Level2=2]="Level2"}(ke||(ke={}));const Ce={1:40,2:24};var we;!function(e){e[e.Creator=1]="Creator",e[e.Following=2]="Following",e[e.Friends=8]="Friends"}(we||(we={}));const Se={1:"creator",2:"following_acc",8:"friends_acc"},Pe={1:"comment-creator",2:"comment-following",8:"comment-friends"},Te=(0,a.memo)((function({parentCid:e,item:t,level:o,disableReply:l,index:d,subIndex:c,teaParams:I,onLinkClick:D,inDetailPage:O=!1}){var R;const{t:L,timeTranslator:Z}=(0,_.e)(),B=(0,n.mp)(p.r,{selector:e=>e[t.cid],dependencies:[t.cid]}),M=(0,n.mp)(S.z,{selector:e=>{var t;return e.users[null!==(t=null==B?void 0:B.user)&&void 0!==t?t:""]},dependencies:[null==B?void 0:B.user]}),{loginUserId:F,loginUserUid:z}=(0,n.mp)(C.G,{selector:e=>{var t,o,i,n;return{loginUserId:null===(o=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===o?void 0:o.uniqueId,loginUserUid:null===(n=null===(i=e.appContext)||void 0===i?void 0:i.user)||void 0===n?void 0:n.uid}},dependencies:[]}),{videoAuthorId:A,teaAuthorId:E,videoAuthorSecId:U}=(0,n.mp)(P.A,{selector:e=>{var t,o,i,n,a,r,l;return{videoAuthorId:null===(o=e[null!==(t=null==B?void 0:B.aweme_id)&&void 0!==t?t:""])||void 0===o?void 0:o.author,teaAuthorId:null!==(a=null===(n=e[null!==(i=null==B?void 0:B.aweme_id)&&void 0!==i?i:""])||void 0===n?void 0:n.authorId)&&void 0!==a?a:"",videoAuthorSecId:null===(l=e[null!==(r=null==B?void 0:B.aweme_id)&&void 0!==r?r:""])||void 0===l?void 0:l.authorSecId}},dependencies:[]}),W=(0,n.qj)(s.x),{setReply:V}=(0,n.qj)(T.p),{showing:G,handleCardEnter:$,handleCardLeave:N,handleItemEnter:H,handleItemLeave:Y}=(0,k.V)(),Q=(0,a.useMemo)((()=>Ce[o]),[o]),J=(0,a.useCallback)((()=>{if(!B)return;const{aweme_id:e,cid:t}=B;W.handleCommentLike({itemId:e,cid:t,teaAuthorId:E})}),[W,B,E]),K=(0,f.X)({action:J,modalConfig:{query:{enter_method:"click_like_comment"}}}),{region:X=""}=null!==(R=(0,w.L)((()=>["region"]),[]))&&void 0!==R?R:{},ee=(0,a.useCallback)((()=>{if(!B)return;const{aweme_id:t,cid:o}=B;W.handleCommentDelete({itemId:t,cid:o,parentCid:e,index:d,subIndex:c})}),[W,B,d,c,e]),te=(0,a.useCallback)((()=>{const{nickname:e=""}=null!=M?M:{},{cid:t="",reply_id:i=""}=null!=B?B:{};V({nickname:e,replyId:1===o?t:i,replyToReplyId:1===o?"0":t,position:d})}),[M,B,V,o,d]),ie=(0,f.X)({action:te,modalConfig:{query:{enter_method:"click_reply_comment"}}}),ne=(0,a.useCallback)((e=>{const t=g.SV.includes(X);if(!z||!t||!B)return;const{cid:o,aweme_id:i,text:n}=B;e.stopPropagation();const a=(0,b.fH)({uniqueId:null!=A?A:"",secUid:null!=U?U:"",videoId:i}),r=(0,y.n)(o);if(!r)return;const l=`${window.location.host}${a}?cid=${r}`,s=document.createElement("input");s.style.fontSize="16px",document.body.appendChild(s),s.value=l,s.select(),s.setSelectionRange(0,l.length),document.execCommand&&document.execCommand("copy"),s.remove(),v.h.open({content:L("WebApp_comment_copyurl_id"),duration:1,style:{width:"560px"}}),m.y.handleCopyCommentUrl({copy:o,comment:n,group_id:i,user_id:z})}),[X,z,A,U,B,L]),ae=(0,a.useMemo)((()=>{var e;return Object.assign(Object.assign({},I),{to_user_id:null!==(e=null==M?void 0:M.id)&&void 0!==e?e:"",enter_method:"comment"})}),[null==M?void 0:M.id,I]),{state:re}=(0,r.TH)(),le=(null==re?void 0:re.cid)===t.cid;if(!B||!M)return(0,u.G)(["commentItem","user"]);const{avatarThumb:he,nickname:xe,verified:be,uniqueId:ye,secUid:_e}=M,{label_type:fe,create_time:ke,aweme_id:we,cid:Te,digg_count:Ie,user_digged:De}=B,Oe=Z(1e3*Number(ke)),Re=Boolean(F)&&A===F,Le=Boolean(F)&&ye===F,Ze=!Le,Be=Re||Le;return(0,i.jsxs)(se,Object.assign({id:t.cid,highlighted:le},{children:[(0,i.jsx)(me,Object.assign({style:{flex:`0 0 ${Q}px`},uniqueId:ye,secUid:_e,onMouseEnter:H,onMouseLeave:Y,isInBrowserMode:!0,teaParams:ae,"data-e2e":`comment-avatar-${o}`,onLinkClick:D},{children:(0,i.jsx)(x.q,{size:Q,src:he},void 0)}),void 0),(0,i.jsxs)(de,{children:[(0,i.jsxs)(pe,Object.assign({uniqueId:ye,secUid:_e,onMouseEnter:H,onMouseLeave:Y,isInBrowserMode:!0,teaParams:ae,onLinkClick:D},{children:[(0,i.jsxs)(ue,Object.assign({"data-e2e":`comment-username-${o}`},{children:[xe," ",be&&(0,i.jsx)(h.Q,{"data-e2e":`comment-bluev-${o}`},void 0)]}),void 0),fe&&Boolean(Se[fe])&&(0,i.jsxs)(i.Fragment,{children:["·"," ",(0,i.jsx)(ce,Object.assign({isCreator:1===fe,"data-e2e":`${Pe[fe]}-${o}`},{children:L(Se[fe])}),void 0)]},void 0)]}),void 0),(0,i.jsx)(je,{onLinkClick:D,commentItem:B,e2eTag:`comment-level-${o}`},void 0),(0,i.jsxs)(ge,{children:[(0,i.jsx)("span",Object.assign({"data-e2e":`comment-time-${o}`,onClick:ne},{children:Oe}),void 0),O?(0,i.jsx)(q,{count:Ie,liked:Boolean(De),onClick:K},void 0):null,!l&&(0,i.jsx)(ve,Object.assign({inDetailPage:O,onClick:ie,"data-e2e":`comment-reply-${o}`},{children:L("comment_reply_btn")}),void 0)]},void 0)]},void 0),(0,i.jsx)(oe,{itemId:we,cid:Te,inDetailPage:O,count:Ie,liked:Boolean(De),onLike:K,onDelete:ee,isShowDelete:Be,isShowReport:Ze},void 0),G&&(0,i.jsx)(j.C,{uniqueId:ye,onMouseEnter:$,onMouseLeave:N},void 0)]}),void 0)}));var Ie=o(19761);const De=(0,A.Z)("div",{target:"eo72wou0"})({marginBottom:"16px"},"label:DivCommentItemContainer;"),Oe=(0,A.Z)("div",{target:"eo72wou1"})((({theme:{direction:e}})=>(0,E.YJ)({direction:e,paddingStart:52})),"label:DivReplyContainer;"),Re=(0,A.Z)("div",{target:"eo72wou2"})({display:"flex",flexDirection:"row",justifyContent:"space-between",position:"relative"},(({isUnfold:e,hasMore:t,theme:{direction:o,colors:i}})=>e?[t?(0,E.YJ)({direction:o,paddingStart:"52px"}):null,{"::before":Object.assign({content:'""',position:"absolute",top:"50%",width:"36px",height:"1px",background:i.LineSecondary,transform:"scaleY(0.5)"},(0,E.YJ)({direction:o,start:"0"}))}]:null),"label:DivReplyActionContainer;"),Le=(0,A.Z)(Ie.Z,{target:"eo72wou3"})((({reversed:e,theme:{direction:t}})=>[(0,E.YJ)({direction:t,marginStart:"6px"}),{width:"14px",height:"14px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),Ze=(0,A.Z)("p",{target:"eo72wou4"})((({theme:e})=>(0,E.GI)({theme:e,color:"TextTertiary",typography:"P3",fontWeight:"semiBold"})),{cursor:"pointer",":hover":{textDecoration:"underline"}},"label:PReplyActionText;"),Be=(0,a.memo)((function({item:e,disableReply:t,index:o,onHideReply:r,teaParams:l,onLinkClick:m,inDetailPage:h=!1}){var g,v;const x=(0,c.Q)(),b=(0,n.qj)(s.x),y=(0,n.mp)(p.r,{selector:t=>t[e.cid],dependencies:[e.cid]}),_=(0,a.useCallback)((()=>{y&&b.handleShowMoreReply({itemId:y.aweme_id,cid:y.cid})}),[b,y]),f=(0,a.useRef)(null),j=(0,a.useCallback)((()=>{var e,t;y&&(null==r||r(null!==(t=null===(e=f.current)||void 0===e?void 0:e.scrollHeight)&&void 0!==t?t:0),b.handleCollapseReply({itemId:y.aweme_id,cid:y.cid}))}),[b,y,r]),k=(0,a.useMemo)((()=>{var t,o,n,a,r,l;if(!y)return null;if(null===(t=e.replyCache)||void 0===t?void 0:t.loading)return(0,i.jsx)(Re,{children:(0,i.jsx)(d.g,{center:!0,size:"small"},void 0)},void 0);const s=null!==(n=null===(o=e.reply_comment)||void 0===o?void 0:o.length)&&void 0!==n?n:0,c=Number(null!==(a=y.reply_comment_total)&&void 0!==a?a:0)-s;if(!c)return null;if(!e.replyCache||!(null===(r=e.reply_comment)||void 0===r?void 0:r.length))return(0,i.jsx)(Re,{children:(0,i.jsxs)(Ze,Object.assign({onClick:_,"data-e2e":"view-more-1"},{children:[x("view_more_replies",{num:c}),(0,i.jsx)(Le,{},void 0)]}),void 0)},void 0);const u=e.replyCache.hasMore||e.replyCache.comments.length>e.reply_comment.length;return Number(null===(l=e.reply_comment)||void 0===l?void 0:l.length)>0?(0,i.jsxs)(Re,Object.assign({isUnfold:!0,hasMore:u},{children:[(0,i.jsx)(Ze,Object.assign({onClick:_,"data-e2e":"view-more-2"},{children:Boolean(u)&&(0,i.jsxs)(i.Fragment,{children:[x("view_more_comm"),(0,i.jsx)(Le,{},void 0)]},void 0)}),void 0),(0,i.jsxs)(Ze,Object.assign({onClick:j,"data-e2e":"comment-hide"},{children:[x("hide"),(0,i.jsx)(Le,{reversed:!0},void 0)]}),void 0)]}),void 0):null}),[j,_,y,e.replyCache,null===(g=e.reply_comment)||void 0===g?void 0:g.length,x]);return y?(0,i.jsxs)(De,{children:[(0,i.jsx)(Te,{inDetailPage:h,item:e,disableReply:t,index:o,level:1,teaParams:l,onLinkClick:m},void 0),Boolean(y.reply_comment_total)&&(0,i.jsxs)(Oe,Object.assign({ref:f},{children:[null===(v=e.reply_comment)||void 0===v?void 0:v.map(((n,a)=>(0,i.jsx)(Te,{parentCid:e.cid,item:n,disableReply:t,index:o,subIndex:a,level:2,teaParams:l,onLinkClick:m,inDetailPage:h},n.cid))),k]}),void 0)]},void 0):(0,u.G)(["item"])})),Me=(0,ie.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),Fe=(0,A.Z)("div",{target:"eht1nyc0"})({width:"100%",marginTop:"16px",display:"flex",flexDirection:"column"},"label:DivCommentItemSkeletonContainer;"),ze=(0,A.Z)("div",{target:"eht1nyc1"})({width:"100%",marginBottom:"24px",display:"flex",alignItems:"flex-start"},"label:DivCommentItemSkeleton;"),Ae=(0,A.Z)("div",{target:"eht1nyc2"})((({theme:e})=>({width:"40px",height:"40px",borderRadius:"100px",backgroundColor:e.colors.BGPlaceholderDefault,flexShrink:0,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Me} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonAvatar;"),Ee=(0,A.Z)("div",{target:"eht1nyc3"})({width:"100%",display:"flex",flexDirection:"column"},(({theme:{direction:e}})=>(0,E.YJ)({direction:e,marginStart:"20px"})),"label:DivCommentItemSkeletonInfo;"),Ue=(0,A.Z)("div",{target:"eht1nyc4"})((({width:e="100%",height:t="24px",marginTop:o="0px",theme:i})=>({width:e,height:t,marginTop:o,backgroundColor:i.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Me} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonLine;"),We=(0,a.memo)((function({num:e=3}){const t=[];for(let o=0;o<e;o++)t.push(o);return(0,i.jsx)(Fe,{children:t.map((e=>(0,i.jsxs)(ze,{children:[(0,i.jsx)(Ae,{},void 0),(0,i.jsxs)(Ee,{children:[(0,i.jsx)(Ue,{width:"160px"},void 0),(0,i.jsx)(Ue,{height:"20px",marginTop:"4px"},void 0),(0,i.jsx)(Ue,{height:"12px",marginTop:"8px",width:"96px"},void 0)]},void 0)]},e)))},void 0)})),Ve=(0,A.Z)("div",{target:"ekjxngi0"})((({theme:e,empty:t=!1,inDetailPage:o=!1})=>({paddingTop:t?"":"16px",width:"100%",padding:o?"none":t?"0 32px":"24px 32px",boxSizing:"border-box",backgroundColor:o?"":e.colors.BGCreation3,borderTop:o||t?"none":`1px solid ${e.colors.LinePrimary2}`,borderBottom:o?"none":`1px solid ${e.colors.LinePrimary2}`,overflowY:"auto",overflowX:"hidden",flexGrow:1})),"label:DivCommentListContainer;"),Ge=(0,A.Z)(Ve,{target:"e1u1vkmc0"})({borderTop:"none",padding:"16px",margin:0,background:"#f8f8f8",border:"none"},"label:StyledDivCommentListContainerForSwiper;"),qe=(0,a.memo)((0,a.forwardRef)(((e,t)=>{const{isInVideoFeedRedesign:o}=(0,be.y7)(),n=o?Ge:Ve;return(0,i.jsx)(n,Object.assign({},e,{ref:t}),void 0)}))),$e=(0,a.memo)((0,a.forwardRef)((function({itemId:e,disableReply:t,teaParams:o,onLinkClick:d,inDetailPage:c=!1,hasMore:u=!0},p){var m,h;const[g,v]=(0,n.b7)(s.x),x=(0,r.TH)();(0,a.useEffect)((()=>{const{browserMode:t,vid:o,cid:i}=(0,l.m7)(x.state),n=o===e&&t?i:void 0;e!==g.awemeId&&e&&v.switchVideo({currId:e,insertCid:n})}),[v,g.awemeId,e,x.state]);const b=(0,a.useMemo)((()=>{var e;if(!g||!(null===(e=g.comments)||void 0===e?void 0:e.length)&&g.loading&&u)return(0,i.jsx)(We,{num:9},void 0);const n=[];return g.comments.forEach(((e,a)=>{var r;const l=(0,i.jsx)(Be,{item:e,disableReply:t,index:a,teaParams:o,onLinkClick:d,inDetailPage:c},e.cid);(null===(r=x.state)||void 0===r?void 0:r.cid)===e.cid?n.unshift(l):n.push(l)})),(0,i.jsxs)(i.Fragment,{children:[n,g.loading&&(0,i.jsx)(We,{num:1},void 0)]},void 0)}),[t,d,g,o,null===(m=x.state)||void 0===m?void 0:m.cid,c,u]);return(0,i.jsx)(qe,Object.assign({inDetailPage:c,ref:p,empty:0===(null===(h=null==g?void 0:g.comments)||void 0===h?void 0:h.length)},{children:b}),void 0)})))},19330:(e,t,o)=>{o.d(t,{x:()=>M});var i=o(64047),n=o(73566),a=o(48185),r=o(19630),l=o(35167),s=o(80390),d=o.n(s),c=o(82346),u=o(11348),p=o(60595),m=o(53095),h=o(20948),g=o(56979),v=o(93859),x=o(49584),b=o(10026),y=o(5549),_=o(12167),f=o(58500),j=o(35468),k=o(90035),C=o(47165),w=o(21396),S=o(2734),P=o(84785),T=o(24878),I=o(76967),D=o(15550),O=o(57244),R=o(30626),L=o(4206);let Z=class{constructor(e){this.fetch=e}getCommentList(e){return this.fetch.get("/api/comment/list/",{query:Object.assign(Object.assign({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}getCommentReply(e){return this.fetch.get("/api/comment/list/reply/",{query:Object.assign(Object.assign({},e),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}postCommentLike(e){return this.fetch.post("/api/comment/digg/",{query:Object.assign(Object.assign({},e),{aid:1988,channel_id:0}),headers:{[R.eD]:this.fetch.csrfToken},baseUrlType:2})}postCommentDelete(e){return this.fetch.post("/api/comment/delete/",{query:e,baseUrlType:2,headers:{[R.eD]:this.fetch.csrfToken}})}};var B;Z=(0,i.__decorate)([(0,O.G)(),(0,i.__metadata)("design:paramtypes",[L.r])],Z),function(e){e[e.Like=1]="Like",e[e.Unlike=2]="Unlike"}(B||(B={}));let M=class extends n.D{constructor(e,t,o,i,n,a){super(),this.service=e,this.commentItem=t,this.item=o,this.user=i,this.t=n,this.home=a,this.defaultState={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}}setCommentItem(e,t){return t?e=Object.assign(Object.assign({},e),t):e}setReplyLoading(e,t){var o,i,n;const a=e.comments.find((({cid:e})=>e===t.cid));if(!a)return e;a.replyCache?a.replyCache.loading=t.loading:a.replyCache={comments:null!==(o=a.reply_comment)&&void 0!==o?o:[],cursor:null!==(n=null===(i=a.reply_comment)||void 0===i?void 0:i.length)&&void 0!==n?n:"0",hasMore:!0,loading:t.loading}}setReplyComment(e,t){const o=this.getCommentItem(e,t.cid);if(!o)return e;o.reply_comment=t.comments}setReplyCommentCache(e,t){const o=this.getCommentItem(e,t.cid);if(!o)return e;o.replyCache?(o.replyCache.comments=t.comments,o.replyCache.hasMore=t.hasMore,o.replyCache.cursor=t.cursor):o.replyCache={comments:t.comments,cursor:t.cursor,hasMore:t.hasMore,loading:!1}}deleteCommentFromList(e,t){var o,i;const{index:n,subIndex:a}=t;void 0===a?e.comments.splice(n,1):(null===(o=e.comments[n].reply_comment)||void 0===o||o.splice(a,1),null===(i=e.comments[n].replyCache)||void 0===i||i.comments.splice(a,1))}addCommentToFirst(e,t){e.comments.unshift({cid:t.cid,reply_comment:[],replyCache:null})}addReplyToFirst(e,{comment:t,position:o}){var i,n;const a=e.comments[o];a&&(a.reply_comment=null!==(i=a.reply_comment)&&void 0!==i?i:[],a.reply_comment.unshift({cid:t.cid,reply_comment:null,replyCache:null}),null===(n=a.replyCache)||void 0===n||n.comments.unshift({cid:t.cid,reply_comment:null,replyCache:null}))}handlePostSuccess(e){return e.pipe((0,m.z)((e=>{const{users:t,commentItems:o}=this.processCommentList([e]);return(0,c.of)(this.getActions().addCommentToFirst(e),this.user.getActions().multiSetUser(t),this.commentItem.getActions().multiSetCommentItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}handleReplySuccess(e){return e.pipe((0,m.z)((({comment:e,position:t})=>{const{users:o,commentItems:i}=this.processCommentList([e],{ignoreReply:!0});return(0,c.of)(this.getActions().addReplyToFirst({comment:e,position:t}),this.user.getActions().multiSetUser(o),this.commentItem.getActions().multiSetCommentItem(i),this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:e.reply_id}),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}fetchComment(e){return e.pipe((0,m.z)((e=>this.fetchComment$(e))))}fetchComment$(e){return(0,c.of)(e).pipe((0,h.M)(this.state$,this.home.state$),(0,g.U)((([e,t])=>({query:e,item:t}))),(0,v.b)((({item:e})=>{})),(0,x.z)((({query:{aweme_id:e,insert_ids:t},item:o})=>{var i;if(!(null==o?void 0:o.hasMore))return u.E;const n=null!==(i=null==o?void 0:o.cursor)&&void 0!==i?i:"0";return this.service.getCommentList({insert_ids:"0"===n?t:void 0,aweme_id:e,cursor:n}).pipe((0,v.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,m.z)((t=>{var i,n,a;if(0===t.status_code&&(null===(i=t.comments)||void 0===i?void 0:i.length)){const{users:i,comments:a,commentItems:r}=this.processCommentList(t.comments),l=null!==(n=null==o?void 0:o.comments)&&void 0!==n?n:[],s=d()(l.concat(a),"cid"),u=[this.user.getActions().multiSetUser(i),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setCommentItem({comments:s,hasMore:Boolean(t.has_more),cursor:t.cursor,loading:!1})];return t.total&&u.push(this.item.getActions().setCommentCount({id:e,commentCount:Number(t.total)})),(0,c.of)(...u)}return 0!==t.status_code||(null===(a=t.comments)||void 0===a?void 0:a.length)||t.has_more?(0,c.of)(this.noop()):(0,c.of)(this.getActions().setCommentItem({hasMore:Boolean(t.has_more),loading:!1}))})),(0,b.O)(this.getActions().setCommentItem({awemeId:e,loading:!0})),(0,y.l)(this.getActions().setCommentItem({loading:!1})),(0,C.n)({shouldShowMsg:!1}),(0,_.R)(this.dispose$))})))}fetchCommentReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([e,t])=>{t||console.warn("No item here in fetch commoent reply")})),(0,m.z)((([e,t])=>{var o,i;return t?this.service.getCommentReply({comment_id:e.cid,item_id:e.itemId,cursor:null!==(i=null===(o=t.replyCache)||void 0===o?void 0:o.cursor)&&void 0!==i?i:"0"}).pipe((0,v.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,m.z)((o=>{var i;if(0===o.status_code){const{users:n,comments:a,commentItems:r}=this.processCommentList(o.comments),l=null!==(i=null==t?void 0:t.reply_comment)&&void 0!==i?i:[],s=d()(l.concat(a),"cid");return(0,c.of)(this.user.getActions().multiSetUser(n),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setReplyComment(Object.assign({comments:[...s]},e)),this.getActions().setReplyCommentCache(Object.assign({comments:[...s],hasMore:Boolean(o.has_more),cursor:o.cursor},e)))}return(0,c.of)(this.noop())})),(0,b.O)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!0}))),(0,y.l)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!1}))),(0,C.n)({})):u.E})))}handleCollapseReply(e){return e.pipe((0,h.M)(this.state$),(0,v.b)((([e,t])=>{this.getCommentItem(t,e.cid)||console.warn("item is null")})),(0,g.U)((([e,t])=>this.getCommentItem(t,e.cid)?this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:[]})):this.noop())))}handleShowMoreReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([{cid:e,itemId:t}])=>{f.y.handleShowMoreReply({parent_comment_id:e,group_id:t})})),(0,v.b)((([e,t])=>{t||console.warn("item is null")})),(0,g.U)((([e,t])=>{if(!t)return this.noop();if(!t.reply_comment||!t.replyCache)return this.getActions().fetchCommentReply(e);const o=t.reply_comment.length,i=t.replyCache.comments.length;if(o<i){const n=o+3>i?i:o+3;return this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:t.replyCache.comments.slice(0,n)}))}return this.getActions().fetchCommentReply(e)})))}handleCommentLike(e){return e.pipe((0,h.M)(this.commentItem.state$,this.user.state$),(0,g.U)((([e,t,o])=>{var i;const n=t[e.cid];return{query:e,commentItem:n,user:o.users[null!==(i=null==n?void 0:n.user)&&void 0!==i?i:""]}})),(0,v.b)((({commentItem:e})=>{e||console.warn("No comment item here in hendle comment like")})),(0,x.z)((({query:e,commentItem:t,user:o})=>{if(!t)return u.E;const i=t.user_digged?2:1;return this.service.postCommentLike({aweme_id:e.itemId,cid:e.cid,digg_type:i}).pipe((0,v.b)((t=>{var n;0===(null==t?void 0:t.status_code)?f.y.handleCommentLike({isLike:1===i,comment_id:e.cid,group_id:e.itemId,comment_user_id:null!==(n=null==o?void 0:o.id)&&void 0!==n?n:"",author_id:e.teaAuthorId}):3002043===(null==t?void 0:t.status_code)?(j.h.destroy(),j.h.open({content:this.t(2===i?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3})):(null==t?void 0:t.status_code)?(j.h.destroy(),j.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"})):(j.h.destroy(),j.h.open({content:this.t("comment_nointernet_toast"),duration:3,widthType:"half"}))})),(0,m.z)((o=>{if(0===o.status_code){let o,n;return 1===i?(o=1,n=t.digg_count+1):(o=0,n=Math.max(t.digg_count-1,0)),(0,c.of)(this.commentItem.getActions().setItemDiggState({cid:e.cid,digged:o}),this.commentItem.getActions().setItemDiggCount({cid:e.cid,count:n}))}return 3002043===o.status_code?(0,c.of)(this.item.getActions().updateItem({id:e.itemId,itemCommentStatus:3})):u.E})),(0,C.n)({}))})))}handleCommentDelete(e){return e.pipe((0,m.z)((e=>{const{itemId:t,cid:o,parentCid:i,subIndex:n}=e;return this.service.postCommentDelete({cid:o}).pipe((0,v.b)((({status_code:e})=>{0===e?j.h.open({content:this.t("comment_delete_success"),duration:3,widthType:"half"}):j.h.open({content:this.t("comment_delete_failed"),duration:3,widthType:"half"})})),(0,m.z)((a=>{if(0===a.status_code){const a=[this.getActions().deleteCommentFromList(e),this.commentItem.getActions().removeItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:t,isReduce:!0})];return void 0!==n&&i&&a.push(this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:i,isReduce:!0})),(0,c.of)(...a)}return(0,c.of)(this.noop())})),(0,C.n)({}))})))}switchVideo(e){return e.pipe((0,m.z)((({currId:e,insertCid:t})=>(0,c.of)(this.getActions().dispose$(),this.getActions().setCommentItem({awemeId:e,cursor:"0",hasMore:!0,loading:!1,comments:[]}),this.getActions().fetchComment({insert_ids:t,aweme_id:e})))))}mapCommentItemFromQuery([e,t]){return[e,this.getCommentItem(t,e.cid)]}getCommentItem(e,t){return e.comments.find((({cid:e})=>e===t))}processCommentList(e=[],t={}){return e.reduce(((e,o)=>{const{user:i,reply_comment:n}=o;return e.users.push((0,S.yk)(i)),(null!=n?n:[]).forEach((({user:t})=>{e.users.push((0,S.yk)(t))})),e.comments.push(this.processComment(o,t)),this.commentItem.getProcessedCommentItem(o,t).forEach((t=>{e.commentItems.push(t)})),e}),{users:[],comments:[],commentItems:[]})}processComment(e,t={}){var o;return{cid:e.cid,reply_comment:null===(o=e.reply_comment)||void 0===o?void 0:o.map((e=>this.processComment(e,t))),replyCache:null}}};(0,i.__decorate)([(0,a.cQ)(),(0,i.__metadata)("design:type",p.y)],M.prototype,"dispose$",void 0),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"setCommentItem",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"setReplyLoading",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"setReplyComment",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"setReplyCommentCache",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"deleteCommentFromList",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"addCommentToFirst",null),(0,i.__decorate)([(0,a.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"addReplyToFirst",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handlePostSuccess",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handleReplySuccess",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"fetchComment",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"fetchCommentReply",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handleCollapseReply",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handleShowMoreReply",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handleCommentLike",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"handleCommentDelete",null),(0,i.__decorate)([(0,a.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[p.y]),(0,i.__metadata)("design:returntype",void 0)],M.prototype,"switchVideo",null),M=(0,i.__decorate)([(0,r.Y)("Comment"),(0,i.__param)(4,(0,l.t)(w.s)),(0,i.__metadata)("design:paramtypes",[Z,D.r,I.A,T.z,Function,P.G])],M)},77015:(e,t,o)=>{o.d(t,{EN:()=>r,OH:()=>l,Gg:()=>s,hh:()=>d,TK:()=>c,Is:()=>u,Vk:()=>p});var i=o(32913),n=o(27918),a=o(57354);const r=(0,i.Z)("div",{target:"e1mecfx00"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),l=(0,i.Z)("div",{target:"e1mecfx01"})({padding:"0 32px",overflow:"visible",display:"flex",flexDirection:"column",flexShrink:0},"label:DivMainContent;"),s=(0,i.Z)(a.W,{target:"e1mecfx02"})((({theme:{colors:e}})=>({marginTop:"9px",marginBottom:"17px",background:"transparent",color:e.TextSecondary})),"label:StyledScheduleTime;"),d=(0,i.Z)("div",{target:"e1mecfx03"})((({theme:{colors:e}})=>({width:"100%",padding:"0 32px",boxSizing:"border-box",backgroundColor:e.BGCreation3,borderTop:"none",borderBottom:"1px solid rgba(18, 18, 18, 0.12)",overflowX:"hidden",flexGrow:1})),"label:DivCommentContainerPolyfill;"),c=(0,i.Z)("div",{target:"e1mecfx04"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",padding:"21px 0"})),"label:DivBottomCommentContainer;"),u=(0,i.Z)("div",{target:"e1mecfx05"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),p=(0,i.Z)("div",{target:"e1mecfx06"})((({theme:e})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",color:"Primary"}),{height:"100%",background:e.colors.BGPlaceholderOpaque,borderRadius:"2px",padding:"14px 16px",fontSize:"16px",cursor:"pointer"}]),"label:DivLoginBar;")},92118:(e,t,o)=>{o.d(t,{r:()=>tt});var i=o(11040),n=o(9236),a=o(91051),r=o(21041),l=o(63464),s=o(8456),d=o(52053),c=o(49541),u=o(33156),p=o(96770),m=o(27319),h=o(9517),g=o(91036),v=o(89811),x=o(35468),b=o(8721),y=o(76679),_=o(13964),f=o(90035),j=o(15073),k=o(14870),C=o(48036),w=o(40599),S=o(2734),P=o(47127),T=o(14452),I=o(56344),D=o(57354),O=o(62321),R=o(34708),L=o(33104),Z=o(12853),B=o(81578),M=o(23683),F=o(83421),z=o(29910),A=o(36761),E=o(74472),U=o(76967),W=o(20417),V=o(96207),G=o(99727),q=o(57462),$=o(74820),N=o(16926),H=o(10388),Y=o(56187),Q=o(80149),J=o(79489),K=o(66958),X=o(48793),ee=o(84475),te=o(39973),oe=o(30109),ie=o(12886),ne=o(10126),ae=o(44401),re=o(93645),le=o(24878),se=o(48382);const de=(0,i.jsx)(H.Z,{width:20,height:20},void 0),ce=(0,a.memo)((function(e){var t;const o=(0,$.u)(),r="rtl"===o.direction,l=(0,N.fz)(J.p),s=(0,b.Q)(),{itemId:d,teaParams:c}=e,u=(0,ie.gR)(d),[p,m]=(0,n.b7)(U.A,{selector:e=>e[d],dependencies:[d]}),h=(0,n.mp)(le.z,{selector:e=>{var t;return e.users[null!==(t=null==p?void 0:p.author)&&void 0!==t?t:""]},dependencies:[null==p?void 0:p.author]}),[g,v]=(0,a.useState)(!1),{stats:y,digged:_,id:f=""}=null!=p?p:{},{uniqueId:j="",secUid:k}=null!=h?h:{},C=(0,K.fH)({uniqueId:j,secUid:k,videoId:f}),{wid:w=""}=null!==(t=(0,R.L)((()=>["wid"]),[]))&&void 0!==t?t:{},T=`https://www.tiktok.com${C}?is_from_webapp=1&sender_device=pc&web_id=${w}`,I=(0,a.useMemo)((()=>(0,ne.IG)({platform:"copy",url:T})),[T]),D=(0,a.useCallback)((()=>{l.handleShare(Object.assign({platform:"copy",author_id:null==h?void 0:h.id,group_id:d,play_mode:"browser_mode",share_click_from:"short"},c)),I(),x.h.open({content:s("Copied"),duration:1.2,widthType:"half"})}),[I,d,l,s,null==h?void 0:h.id,c]),O=(0,a.useCallback)((()=>{m.postLikeVideo(Object.assign({id:d},c))}),[m,d,c]),L=(0,P.X)({action:O,modalConfig:{query:{enter_method:"click_like"}}}),Z=(0,a.useMemo)((()=>(0,i.jsx)(Y.Z,{fill:_?o.colors.Primary:o.colors.Primary2,width:20,height:20},void 0)),[_,o.colors.Primary,o.colors.Primary2]),B=(0,a.useMemo)((()=>Object.assign({author_id:null==h?void 0:h.id,group_id:d,play_mode:"browser_mode"},c)),[c,d,null==h?void 0:h.id]),{active:M,handleMouseEnter:F,handleMouseLeave:z}=(0,te.R)(200),{expanded:A}=(0,ae.c1)(),E=(0,a.useCallback)((()=>{l.handleSharePanelShow({group_id:d,author_id:null==h?void 0:h.id,share_option_type:A}),F()}),[F,l,d,null==h?void 0:h.id,A]),W=(0,ae.JW)();(0,a.useEffect)((()=>{W()}),[W]);const V=(0,a.useCallback)((()=>{v(!0)}),[v]),G=(0,a.useCallback)((()=>{v(!1)}),[v]);return(0,i.jsxs)(se.wu,{children:[(0,i.jsxs)(se.SD,{children:[(0,i.jsxs)(se.AZ,{children:[(0,i.jsx)(X.t,{styleType:2,text:(0,S.BT)(null==y?void 0:y.diggCount),Icon:Z,onClick:L,e2eTag:"browse-like"},void 0),(0,i.jsx)(X.t,{styleType:2,text:(0,S.BT)(null==y?void 0:y.commentCount),Icon:de,disabled:!0,e2eTag:"browse-comment"},void 0)]},void 0),(0,i.jsxs)(se.AZ,Object.assign({"data-e2e":"browse-share-group"},{children:[(0,i.jsx)(re.mB,{videoId:f,enabled:null==p?void 0:p.shareEnabled,mode:0,url:T,embedCode:u,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:B,onSendMessagePanelOpen:V},void 0),(0,i.jsxs)(se.no,Object.assign({onMouseEnter:E,onMouseLeave:z},{children:[(0,i.jsx)(Q.Z,{width:"16",height:"16"},void 0),(0,i.jsx)(ee.G,Object.assign({placement:r?"bottomLeft":"bottomRight",active:M,margin:-12,arrowMargin:12,backgroundColor:o.colors.BGSecondary},{children:(0,i.jsx)(se.qf,{children:(0,i.jsx)(re.mB,{videoId:f,mode:1,url:T,enabled:null==p?void 0:p.shareEnabled,embedCode:u,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:B,onSendMessagePanelOpen:V,from:3},void 0)},void 0)}),void 0)]}),void 0)]}),void 0)]},void 0),(0,i.jsxs)(se.cl,{children:[(0,i.jsx)(se.ky,{children:T},void 0),(0,i.jsx)(se.z5,Object.assign({onClick:D},{children:s("copy_link")}),void 0)]},void 0),g&&(0,i.jsx)(oe.J,{visible:g,videoId:f,onClose:G},void 0)]},void 0)}));var ue=o(85291),pe=o(65513),me=o(59151),he=o(43683),ge=o(85404),ve=o(75546),xe=o(22509),be=o(1160),ye=o(84785),_e=o(88650),fe=o(38993),je=o(32913),ke=o(27918),Ce=o(80537),we=o(11838),Se=o(63092);const Pe=(0,je.Z)("div",{target:"evv7pft0"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"22px 32px 15px",position:"relative",flex:"0 0 82px"},"label:DivInfoContainer;"),Te=(0,je.Z)("span",{target:"evv7pft1"})((({theme:e})=>(0,ke.GI)({theme:e,typography:"P1",fontWeight:"bold",fontFamily:"Sofia"})),"label:SpanUniqueId;");Te.defaultProps=Object.assign(Object.assign({},Te.defaultProps),{"data-e2e":"browse-username"});const Ie=(0,je.Z)("span",{target:"evv7pft2"})((({theme:e})=>(0,ke.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{display:"flex",alignItems:"center"},"label:SpanOtherInfos;");Ie.defaultProps=Object.assign(Object.assign({},Ie.defaultProps),{"data-e2e":"browser-nickname"});const De=(0,je.Z)(we.D,{target:"evv7pft3"})(ke.wj,ke.gi,{flex:"1 1 auto",":hover":{[`${Te}`]:{textDecoration:"underline"}}},(({theme:{direction:e}})=>(0,ke.YJ)({direction:e,marginEnd:"12px"})),"label:StyledLink;"),Oe=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${De} ${Te}`]:{textDecoration:"underline"}}},(0,ke.YJ)({direction:e,marginEnd:"12px"})],Re=(0,je.Z)(Ce.W,{target:"evv7pft6"})({justifySelf:"flex-end","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;");Re.defaultProps=Object.assign(Object.assign({},Re.defaultProps),{"data-e2e":"browse-follow"});var Le=o(87616);const Ze=(0,a.memo)((function(e){const{uniqueId:t,videoId:o,teaParams:r}=e,l=(0,n.mp)(le.z,{selector:e=>e.users[t],dependencies:[t]}),{t:s,timeTranslator:d}=(0,ge.e)(),c=(0,n.mp)(U.A,{selector:e=>null==e?void 0:e[o],dependencies:[o]}),{secret:u,forFriend:p,createTime:m,adAuthorization:h}=null!=c?c:{},{showing:g,handleCardEnter:v,handleCardLeave:x,handleItemEnter:b,handleItemLeave:y}=(0,be.V)(),_=(0,_e.zW)(l),{isShowLive:j}=_;(0,_e.TB)({isShowLive:j,reportTrigger:j,user:l,enterMethod:j?"video_head_browser":"creator",autoReport:!0,reportValidator:()=>void 0!==(null==l?void 0:l.relation),once:!0});const k=(0,_e.CN)(Object.assign({user:l,enterMethod:j?"video_head_browser":"creator"},r)),C=(0,a.useMemo)((()=>Object.assign(Object.assign({},k),{author_id:k.to_user_id,group_id:o})),[k,o]),w=(0,a.useMemo)((()=>{if(l)return Object.assign(Object.assign({},k),{author_id:l.id,to_user_id:l.id,group_id:o,enterMethod:"creator"})}),[l,o,k]);if(!l)return(0,f.G)(["authorInfo"]);const{nickname:S,secUid:P,verified:T}=l,I=function(e){return e?(0,je.Z)(Se.G,{target:"evv7pft4"})(Oe):(0,je.Z)(we.D,{target:"evv7pft5"})(Oe)}(j);return(0,i.jsxs)(Pe,{children:[(0,i.jsx)(I,Object.assign({uniqueId:t,secUid:P,onMouseEnter:b,onMouseLeave:y,isInBrowserMode:!0,teaParams:C,"data-e2e":"browse-user-avatar",onClick:e.onClick,onLinkClick:e.onLinkClick},{children:(0,i.jsx)(ve.k,Object.assign({needAnimation:!0,liveTheme:2,size:40},_),void 0)}),void 0),(0,i.jsxs)(De,Object.assign({uniqueId:t,secUid:P,onMouseEnter:b,onMouseLeave:y,isInBrowserMode:!0,teaParams:w,onClick:e.onClick,onLinkClick:e.onLinkClick},{children:[(0,i.jsxs)(Te,{children:[t,T&&(0,i.jsx)(he.Q,{width:14,height:14,"data-e2e":"browse-bluev"},void 0)]},void 0),(0,i.jsx)("br",{},void 0),(0,i.jsxs)(Ie,{children:[S,(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,i.jsx)("span",{children:d(1e3*Number(m))},void 0)]},void 0),u&&!h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,i.jsx)(ue.Z,{width:16,height:16,style:{fill:"#121212",opacity:.5,margin:"0 4px"}},void 0),(0,i.jsx)("span",{children:s("video_label_private")},void 0)]},void 0),p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" · "},void 0),(0,i.jsx)(pe.Z,{style:{margin:"0 4px"},width:20,height:20},void 0),(0,i.jsx)("span",Object.assign({className:"friend"},{children:s("Friends only")}),void 0)]},void 0)]},void 0)]}),void 0),(0,i.jsx)(Be,{author:l,video:c,videoReportParams:r},void 0),g&&(0,i.jsx)(xe.C,{top:30,fixedLeft:32,onMouseEnter:v,onMouseLeave:x,uniqueId:t},void 0)]},void 0)})),Be=function({author:e,video:t,videoReportParams:o}){var a;const r=(0,n.mp)(ye.G,{selector:t=>{var o,i;return(null===(i=null===(o=t.appContext)||void 0===o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e.uniqueId},dependencies:[e.uniqueId]}),l=(0,P.Q)({query:{enter_method:"click_follow"}}),{text:s,handleFollow:d,isFollowing:c,relation:u}=(0,L.w)({uniqueId:e.uniqueId,onNeedLogin:l,teaParams:Object.assign({group_id:null==t?void 0:t.id},o)});return(null==t?void 0:t.scheduleTime)?(0,i.jsx)(fe.Q,{video:t},void 0):r?(0,i.jsx)(Le.C,{videoId:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},void 0):(0,i.jsxs)(Re,Object.assign({size:"small",buttonTheme:c?"default":"line",onClick:d},{children:[2===u?(0,i.jsx)(me.Z,{},void 0):null,s]}),void 0)};var Me=o(97446),Fe=o(93583),ze=o(97801),Ae=o(77015);const Ee=(0,a.memo)((function(e){var t;const{item:o,teaParams:n,videoReportParams:r}=e,l=(0,b.Q)(),{user:s}=null!==(t=(0,R.L)((()=>["user"]),[]))&&void 0!==t?t:{},d=Boolean(s),{id:c,author:u="",scheduleTime:p}=o,m=(0,L.p)(null==o?void 0:o.author),{nickname:h=""}=null!=m?m:{},g=(0,a.useMemo)((()=>3===(null==o?void 0:o.itemCommentStatus)||3===(null==m?void 0:m.commentSetting)),[null==m?void 0:m.commentSetting,null==o?void 0:o.itemCommentStatus]),v=(0,a.useMemo)((()=>(0,S.sA)(m,null==s?void 0:s.uid)),[m,null==s?void 0:s.uid]),{isInNewVideoDetail:x}=(0,C.xy)(),y=(0,ze.Ui)({id:c,needDispose:!x}),_=(0,P.Q)();return p?(0,i.jsxs)(Ae.EN,{children:[(0,i.jsx)(Ze,{onLinkClick:e.onLinkClick,uniqueId:u,videoId:c,teaParams:n},void 0),(0,i.jsxs)(Ae.OH,{children:[(0,i.jsx)(V.Q,{onLinkClick:e.onLinkClick,item:o,e2eTag:"browse-video-desc",reportParams:n},void 0),(0,i.jsx)(Ae.Gg,{scheduledTime:Number(p),height:22,fontSize:16,iconSize:20,iconMargin:4},void 0)]},void 0),(0,i.jsx)(Ae.hh,{},void 0),(0,i.jsx)(Ae.TK,{children:(0,i.jsx)(Ae.Is,{children:l("scheduled_video_comment_unavailable")},void 0)},void 0)]},void 0):(0,i.jsxs)(Ae.EN,{children:[(0,i.jsx)(Ze,{onLinkClick:e.onLinkClick,uniqueId:u,videoId:c,teaParams:n},void 0),(0,i.jsxs)(Ae.OH,{children:[(0,i.jsx)(V.Q,{onLinkClick:e.onLinkClick,item:o,e2eTag:"browse-video-desc",reportParams:n},void 0),(0,i.jsx)(q.C,{item:o},void 0),(0,i.jsx)(G._,{onLinkClick:e.onLinkClick,styleType:1,item:o,e2eTag:"browse-music",teaParams:n},void 0),(0,i.jsx)(ce,{itemId:c,onEmbedModalVisibleChange:e.onEmbedVisibleChange,teaParams:n},void 0)]},void 0),g?(0,i.jsx)(Ae.Is,Object.assign({"data-e2e":"comment-turned-off"},{children:l("comment_off")}),void 0):(0,i.jsx)(Me.$,{itemId:c,disableReply:v,ref:y,teaParams:n},void 0),d&&!g&&(0,i.jsx)(Ae.TK,{children:v?(0,i.jsx)("div",{children:l("comment_disable_notfollow").replace("%@",h)},void 0):(0,i.jsx)(Fe._,{itemId:c,teaParams:r},void 0)},void 0),!d&&(0,i.jsx)(Ae.TK,Object.assign({onClick:_},{children:(0,i.jsx)(Ae.Vk,{children:"Please log in to comment"},void 0)}),void 0)]},void 0)}));var Ue=o(46562),We=o(23028),Ve=o(75595),Ge=o(76985),qe=o(17118),$e=o(70643),Ne=o(2218);const He=(0,a.memo)((function(e){var t,o,r;const l=(0,a.useRef)(null),s=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(null),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!0),{direction:x}=(0,$.u)(),b=(0,a.useRef)("0"),{abTestVersion:y,user:f}=null!==(t=(0,R.L)((()=>["abTestVersion","user"]),[]))&&void 0!==t?t:{},[{duration:j,videoPercent:k,currentTime:C}]=(0,n.b7)(O.M,{selector:t=>t[e.vid]?t[e.vid]:{duration:0,videoPercent:0,currentTime:0},dependencies:[e.vid]}),w=(0,We.x)(y,"seekbar_persistent_and_tooltip_test"),S="v1"!==w,P=(0,We.x)(y,"seekbar_theme_test"),{vid:T,seek:I,videoRef:D,progressReportCallback:L,extraBottomSpace:Z=!1,isXgPlayer:B,isBrowserMode:M}=e;(0,a.useEffect)((()=>{b.current=T}),[T]);const{percent:F,bindDrag:z,seek:A}=(0,Ve.S)({direction:x,progressRef:s,circleRef:d,barRef:c,initialPercent:0,draggingStateCb:p,draggingPercentCb:I,progressReportCallback:L});(0,a.useEffect)((()=>{var e,t;null===(e=D.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{h(!1)}),0)})),null===(t=D.current)||void 0===t||t.onSeeking((()=>{h(!0)}))}),[D.current,h]),(0,a.useEffect)((()=>{var e;"v3"===w&&(null===(e=D.current)||void 0===e?void 0:e.currentCanPlay)&&v((0,$e.Z)(`${null==f?void 0:f.uid}`))}),[null===(o=D.current)||void 0===o?void 0:o.currentCanPlay]);const E=(0,a.useCallback)((()=>{(0,$e.j)(`${null==f?void 0:f.uid}`)}),[null==f?void 0:f.uid]),U=(0,a.useCallback)((()=>{(0,$e.Z)(`${null==f?void 0:f.uid}`)||E(),g||v(!0)}),[null==f?void 0:f.uid,E,g]);if(0===C||!(null===(r=null==D?void 0:D.current)||void 0===r?void 0:r.currentCanPlay)&&B&&M)return null;const W=u||m?F:k,V="ltr"===x?{left:`calc(${100*W}%)`}:{right:`calc(${100*W}%)`};return(0,i.jsx)(qe.H,Object.assign({visible:!g,text:"webapp_seekbar_tooltip",onShow:E},{children:(0,i.jsxs)(Ne.ov,Object.assign({show:u||S,extraBottomSpace:Z,onMouseDown:_.UW,onClick:U},{children:[(0,i.jsxs)(Ne.yx,Object.assign({ref:l},{children:[(0,i.jsx)(Ne.MT,{ref:s,onClick:A,onMouseDown:z},void 0),(0,i.jsx)(Ne.FL,{ref:d,style:V,onMouseDown:z},void 0),(0,i.jsx)(Ne.$_,{backgroundTheme:"v2"===P?"primary":void 0,ref:c,style:{transform:`scaleX(${W}) translateY(-50%)`},onClick:A,onMouseDown:z},void 0)]}),void 0),(0,i.jsx)(Ne.F7,{children:"ltr"===x?`${(0,Ge.xo)(C)}/${(0,Ge.xo)(j)}`:`${(0,Ge.xo)(j)}/${(0,Ge.xo)(C)}`},void 0)]}),void 0)}),void 0)}));var Ye=o(14563),Qe=o(88671),Je=o(16929),Ke=o(41273);const Xe=(0,a.memo)((function(){var e;const t=(0,a.useRef)(null),o=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)(!0),[l,s]=(0,a.useState)(!1),{mute:d,volume:c,setVolume:u}=(0,k.DZ)(),{abTestVersion:p}=null!==(e=(0,R.L)((()=>["abTestVersion"]),[]))&&void 0!==e?e:{},m=(0,We.x)(p,"seekbar_theme_test"),h=(0,a.useCallback)(((e,t)=>{Ye.$.handleSwitchSound({playMode:2,volume_from:e,volume_to:t}),Ye.$.handleVolumeChange({volume_to:c,click_mute:!0})}),[c]),g=(0,a.useRef)(d);(0,a.useEffect)((()=>{g.current=d}),[d]);const{percent:v,bindDrag:x,seek:b,update:y}=(0,Ve.S)({direction:"vertical",progressRef:t,circleRef:o,barRef:n,initialPercent:c,draggingStateCb:s,progressReportCallback:h}),f=(0,Qe.fB)((e=>{r.current?r.current=!1:u(e,g.current)}),[u],160);(0,a.useEffect)((()=>f(v)),[v]),(0,a.useEffect)((()=>{d||c!==Je.G||y(Je.G)}),[d,c,y]);const j=d?0:v,C=0===j?8:72*j;return(0,i.jsxs)(Ke.nW,Object.assign({dragging:l,onClick:_.UW},{children:[(0,i.jsx)(Ke.CY,{ref:t,onClick:b,onMouseDown:x},void 0),(0,i.jsx)(Ke.tP,{ref:o,style:{transform:`translateY(-${C}px)`},onMouseDown:x},void 0),(0,i.jsx)(Ke.SM,{backgroundTheme:"v2"===m?"primary":void 0,ref:n,style:{transform:`scaleY(${j})`},onClick:b,onMouseDown:x},void 0)]}),void 0)})),et=(0,a.memo)((function({itemListKey:e,currentIndex:t,needUrlDelegate:o=!0,onCloseBrowserMode:r,onNextVideo:l,onPrevVideo:s,teaParams:d,onJumpSamePage:V}){var G,q,$,N,H;const Y=(0,b.Q)(),{user:Q,language:J}=null!==(G=(0,R.L)((()=>["user","language"]),[]))&&void 0!==G?G:{},[K,X]=(0,a.useState)(!1),ee=(0,a.useRef)(!1),te=(0,a.useRef)(null),oe=(0,a.useRef)(!1),{mute:ie,setMute:ne}=(0,k.s_)(2),{isUseNativePlayer:ae}=(0,C.It)(),re=(0,a.useCallback)(((e,t="click")=>{e.preventDefault(),e.stopPropagation(),ne(!ie,t)}),[ie,ne]),le=(0,n.mp)(E.h,{selector:o=>{const i=o[null!=e?e:""];return i?{id:i.browserList[t],listLength:i.browserList.length}:null},dependencies:[e,t]}),[se,de]=(0,n.b7)(U.A,{selector:e=>{var t;return e[null!==(t=null==le?void 0:le.id)&&void 0!==t?t:""]},dependencies:[le]}),ce=null!==(q=null==se?void 0:se.id)&&void 0!==q?q:"",ue=(0,L.p)(null==se?void 0:se.author),pe=null!==($=null==se?void 0:se.downloadSetting)&&void 0!==$?$:0,me=null!==(N=null==se?void 0:se.authorPrivate)&&void 0!==N&&N;(0,ze.xf)({author:ue,item:se,currentIndex:t,itemListKey:e,needUrlDelegate:o,onCloseBrowserMode:r});const he=null!==(H=null==le?void 0:le.listLength)&&void 0!==H?H:0,ge=t<he-1,ve=(0,a.useCallback)(((e="click")=>{de.postLikeVideo(Object.assign({id:ce,enter_method:e},d))}),[de,ce,d]),xe=(0,P.X)({action:ve,modalConfig:{query:{enter_method:"click_like"}}}),be=(0,n.mp)(j.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),ye=(0,n.qj)(j.bg),_e=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),se&&ye.removeBlockVideo(se.id)}),[ye,se]),[fe,je]=(0,a.useState)(!1);(0,a.useEffect)((()=>{je(!0)}),[]);const{showVideoMask:ke,maskType:Ce,videoMaskTitle:we,videoMaskDesc:Se,icon:Pe,videoMaskFirstButtonText:Te,videoMaskSecondButtonText:Ie}=(0,Z.g)({playMode:2,item:null!=se?se:{},isLogin:Boolean(Q)}),[{photoSensitiveVideosSetting:De,hideMaskTempVideoId:Oe},Re]=(0,n.b7)(B.P),Le=ke&&Oe!==ce,{handleLinkClick:Ze,handleClose:Be,handleNext:Me,handlePrev:Fe,preventDefault:Ae,videoPlayerRef:We,togglePlay:Ve,isInputEmpty:Ge,showLeaveModal:qe,handleConfirmLeave:$e,handleCancelLeave:Ye}=(0,ze.q5)({onCloseBrowserMode:r,onNextVideo:l,onPrevVideo:s,pause:K,shouldPause:Le,setPause:e=>{X(e),ee.current=e},embedVisibleRef:oe,group_id:ce,handleLikeClick:xe,author_id:null==se?void 0:se.authorId,itemListKey:e,onJumpSamePage:V}),Qe=(0,a.useCallback)((()=>{X(!0),ee.current=!0}),[]),Je=(0,a.useRef)(!1),Ke=(0,a.useCallback)((e=>{var t,o;null===(o=null===(t=We.current)||void 0===t?void 0:t.seek)||void 0===o||o.call(t,e)}),[We]),et=(0,a.useCallback)((()=>{Je.current=!0,setTimeout((()=>{Je.current=!1}),500)}),[]),tt=(0,a.useCallback)((()=>{Je.current&&(Ve(),Je.current=!1)}),[Ve]);(0,ze._0)({showLeaveModal:qe,group_id:ce});const ot=(0,P.X)({action:(0,a.useCallback)((e=>{if(!Je.current)return;const{clientX:t,clientY:o}=e;new T.B(t,o).emit(),de.postLikeVideo({id:ce,forceLike:!0}),Je.current=!1}),[ce,de])}),it=(0,y.D)((()=>({onClick:tt,onDoubleClick:ot})),[ot,tt]),nt=(0,A.Q)({item:se,onShow:_.NS}),at=(0,a.useCallback)((e=>{oe.current=e}),[]),rt=ie?c.Z:u.Z,lt=(0,ze.om)({handleNext:Me,handlePrev:Fe,hasNext:ge,currentIndex:t,itemListKey:e});(0,k.$v)(2);const{showModal:st,hideModal:dt}=(0,w.J)();(0,a.useEffect)((()=>(st(!0),()=>{dt()})),[dt,st]),(0,a.useEffect)((()=>{var e,t;se&&be.includes(se.id)&&(null===(t=null===(e=We.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e))}),[be,se,We]),(0,a.useEffect)((()=>{var e;(null==se?void 0:se.video)||r({playProgress:null===(e=We.current)||void 0===e?void 0:e.currentTime})}),[se,r,We]);const{showAnalyticsButton:ct}=(0,ze.zX)(se),ut=(0,a.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:t="",format:o="",videoQuality:i="",encodeUserTag:n="",codecType:a="",definition:r=""}={},authorId:l="",id:s="",scheduleTime:c}=null!=se?se:{},u=Object.assign({author_id:l,group_id:s,is_scheduled:Boolean(c),bitrate:Number(e),encodedType:t,format:o,videoQuality:i,encodeUserTag:n,codecType:a,definition:r},d);return te.current=u,u}),[se,d]),pt=(0,a.useCallback)(((e,t)=>{var o,i;g.Z.handleSeekBarClick(Object.assign({fromPercent:e,toPercent:t,video_length:null!==(i=null===(o=We.current)||void 0===o?void 0:o.duration)&&void 0!==i?i:0,is_pause:ee.current,play_mode:"browser_mode"},te.current))}),[We]),mt=(0,n.qj)(O.M),ht=(0,a.useCallback)((e=>{var t,o,i;const n=null===(t=We.current)||void 0===t?void 0:t.duration;mt.setVideoInfo({videoId:ce,videoPercent:e,currentTime:null!==(i=null===(o=We.current)||void 0===o?void 0:o.currentTime)&&void 0!==i?i:0,duration:n})}),[ce,mt,We]),gt=(0,a.useRef)(-1),vt=(0,a.useRef)(void 0),xt=(0,a.useRef)(-1),bt=(0,a.useRef)(0),yt=(0,a.useCallback)((()=>{clearTimeout(xt.current),bt.current=0}),[]),[_t,ft]=(0,n.b7)(F.f,{selector:e=>{var t;return Number(null===(t=e.currentVideo)||void 0===t?void 0:t.index)},dependencies:[]}),jt=(0,a.useRef)(!1);(0,a.useEffect)((()=>{var e,o,i,n,a,r;Le||(ft.updateVideo({currentVideo:{id:ce,index:t,mode:2},playProgress:null!==(o=null===(e=We.current)||void 0===e?void 0:e.currentTime)&&void 0!==o?o:0}),null===(n=null===(i=We.current)||void 0===i?void 0:i.play)||void 0===n||n.call(i),yt()),t!==gt.current&&(-1!==gt.current&&(Re.setHideMaskTempVideoId(""),fe&&je(!1),jt.current=!1),yt(),void 0===De&&"photo_sensitive"===vt.current&&Re.setSkipPhotoSensitive(!1),ke?("photo_sensitive_denied"===Ce?v.W.handleShowPhotosensitiveRemoved({group_id:ce}):v.W.handleShowMaskLayer({scenario:"general_sensitive"===Ce?"general":"photosensitive",group_id:ce}),xt.current=window.setInterval((()=>{var e,t,o;bt.current++>100&&yt(),(null===(e=We.current)||void 0===e?void 0:e.currentCanPlay)&&(null===(o=(t=We.current).pause)||void 0===o||o.call(t),yt())}),50)):null===(r=null===(a=We.current)||void 0===a?void 0:a.play)||void 0===r||r.call(a),gt.current=t,vt.current=Ce)}),[ke,Le,We,t,Ce,Re,De,yt,fe,Oe,ce,ft]);const kt=(0,a.useCallback)((e=>{Be(e),yt()}),[Be,yt]),Ct=(0,a.useCallback)((e=>{if((0,_.NS)(e),"general_sensitive"===Ce){if(jt.current)return;ge?Me(e):he>1?Fe(e):Be(e),v.W.handleMaskLayerClickSkip({scenario:"general",group_id:ce}),x.h.open({content:Y("photosensitive_skepped_toast"),duration:3,widthType:"half"}),jt.current=!0}else Re.setSkipPhotoSensitive(!1),yt(),v.W.handleMaskLayerClickWatch({scenario:"photosensitive",group_id:ce})}),[Ce,ge,he,Y,Me,Fe,Be,Re,yt,ce]),wt=(0,a.useCallback)((e=>{if((0,_.NS)(e),"general_sensitive"===Ce)Re.setHideMaskTempVideoId(ce),yt(),v.W.handleMaskLayerClickWatch({scenario:"general",group_id:ce});else{if(jt.current)return;ge?Me(e):1===he?(null==Q?void 0:Q.uid)===(null==se?void 0:se.authorId)&&Be(e):Fe(e),Re.setSkipPhotoSensitive(!0),v.W.handleMaskLayerClickSkip({scenario:"photosensitive",group_id:ce}),x.h.open({content:Y("photosensitive_skepped_toast"),duration:3,widthType:"half"}),jt.current=!0}}),[Ce,Re,ce,yt,ge,Y,Me,he,null==Q?void 0:Q.uid,null==se?void 0:se.authorId,Be,Fe]),St=(0,a.useRef)(null),Pt=(0,a.useRef)([]),Tt=(0,a.useRef)(-1),It=(0,a.useRef)((new Date).getTime()),Dt=(0,a.useCallback)((e=>{(0,_.NS)(e),Tt.current&&clearTimeout(Tt.current),Tt.current=window.setTimeout((()=>{Pt.current=[]}),400);const t=(new Date).getTime(),o=e.wheelDelta||-e.deltaY||-e.detail,i=Math.max(-1,Math.min(1,o)),n=t-It.current;Pt.current=[...Pt.current,Math.abs(o)],It.current=t,n>400&&1===Pt.current.length&&(i<0?Me(e,"scroll"):Fe(e,"scroll"))}),[Me,Fe]),{video:{cover:Ot,playAddr:Rt="",width:Lt=1,height:Zt=1,duration:Bt,bitrateInfo:Mt,zoomCover:Ft},id:zt,itemMute:At,warnInfo:Et,scheduleTime:Ut}=(0,S.m7)(se),Wt=(null==Ft?void 0:Ft[720])||Ot,Vt=(Lt/Zt||1)>=1,Gt=Boolean(null==Et?void 0:Et[0])||Boolean(Ut);return(null==se?void 0:se.video)?(0,i.jsxs)(Ue.E9,{children:[(0,i.jsxs)(Ue.ik,Object.assign({onWheel:Dt,ref:St,onClick:it,onMouseDown:et},{children:[(0,i.jsx)(Ue.lI,{style:{backgroundImage:`url(${Wt})`}},void 0),(0,i.jsxs)(Ue.L7,{children:[(0,i.jsx)(z.S,{poster:Wt,horizontal:Vt,mode:2,ref:We,desc:se.desc,id:zt,playUrl:Rt,index:t,itemMute:Boolean(At),duration:Bt,bitrateInfo:Mt,teaParams:ut,onVideoError:Qe,onTimeUpdate:ht,e2eTag:"browse-video",disableDownload:me||0!==pe},zt),(0,i.jsx)(He,{seek:Ke,videoRef:We,vid:zt,progressReportCallback:pt,extraBottomSpace:Gt,isXgPlayer:!ae,isBrowserMode:!0},void 0),(0,i.jsx)(Ne.Am,{onMouseDown:_.UW},void 0),(0,i.jsx)(Ne.Gb,{onMouseDown:_.UW},void 0),be.includes(se.id||"")?(0,i.jsx)(Ue.qq,{children:(0,i.jsxs)(Ue.uc,{children:[(0,i.jsx)(Ue.Vz,{children:(0,i.jsx)(p.Z,{width:40,height:40},void 0)},void 0),(0,i.jsx)(Ue.Eb,{children:Y("Web_report_thanks_for_report")},void 0),(0,i.jsx)(Ue.vN,{children:Y("Web_report_hide_video")},void 0),(0,i.jsx)(Ue.b7,Object.assign({onClick:_e},{children:Y("Web_report_show_video")}),void 0)]},void 0)},void 0):null,Le&&(0,i.jsx)(M.a,{playMode:2,icon:Pe,title:we,desc:Se,firstButtonText:Te,secondButtonText:Ie,onClickFirstButton:Ct,onClickSecondButton:wt},void 0)]},void 0),K&&(0,i.jsx)(Ue.Sd,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:70,height:70,fill:"#fff"},{children:(0,i.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(0,i.jsx)(Ue.Sf,Object.assign({onClick:kt,onMouseDown:_.UW},{children:(0,i.jsx)(m.Z,{width:18,height:18,fill:"#fff"},void 0)}),void 0),(0,i.jsx)(Ue.ps,{width:40,height:40,onClick:Ae},void 0),(0,i.jsxs)(Ue.oT,Object.assign({widerBottom:Gt,onMouseDown:_.UW},{children:[(0,i.jsx)(Xe,{},void 0),(0,i.jsx)(Ue.sL,Object.assign({onClick:re,widerBottom:Gt},{children:(0,i.jsx)(rt,{width:40,height:40,fill:"none"},void 0)}),void 0)]}),void 0),lt,(0,i.jsxs)(Ue.Q9,Object.assign({onClick:nt},{children:[(0,i.jsx)(Ue.Y1,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:15},{children:(0,i.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),Y("Report")]}),void 0),ct&&!Ut&&(0,i.jsxs)(Ue.wh,Object.assign({href:`https://www.tiktok.com/analytics/video/posted/${zt}?lang=${J}`,target:"_blank"},{children:[(0,i.jsx)(h.Z,{width:20,height:20,fill:"#fff",style:{marginInlineEnd:"6px"}},void 0),Y("view_analytics")]}),void 0),(null==Et?void 0:Et[0])&&(0,i.jsx)(Ue.zo,{children:(0,i.jsx)(I.p,{info:Et[0]},void 0)},void 0),Boolean(Ut)&&(0,i.jsx)(Ue.zo,{children:(0,i.jsx)(D.W,{isTextAlignStart:!0,scheduledTime:Number(Ut),height:56,fontSize:14,iconSize:18.33,iconMargin:4.83},void 0)},void 0)]}),void 0),(0,i.jsx)(Ee,{item:se,teaParams:d,onLinkClick:Ze,onEmbedVisibleChange:at,videoReportParams:ut},void 0),(0,i.jsx)(W.S,{visible:qe,needLeaveCheck:!Ge,onConfirmLeave:$e,onCancelLeave:Ye},void 0)]},void 0):(0,f.G)(["item.video"])}));function tt(e,t=!0){return function(o){const c=l=>{const{closeBrowserMode:c,isBrowserModeShowing:u,showBrowserMode:p,teaParams:m}=(0,s.J)(),[h,g]=(0,n.b7)(d.O),v=(0,r.k6)(),x=(0,a.useCallback)((({playProgress:e,fromPopState:o,shouldPause:i}={})=>{!o&&t&&v.goBack(),c({playProgress:e,shouldPause:i})}),[c,v]),b=(0,a.useCallback)((()=>{g.clickSamePage()}),[g]),y=(0,a.useCallback)((()=>(u&&c(void 0),!0)),[c,u]);(0,a.useEffect)((()=>{g.setItemListKey(e)}),[g]);const _=(0,a.useMemo)((()=>({closeBrowserMode:c,showBrowserMode:p,isBrowserModeShowing:u})),[c,u,p]);return(0,i.jsxs)(s._.Provider,Object.assign({value:_},{children:[(0,i.jsx)(o,Object.assign({},l),void 0),(0,i.jsx)(r.NL,{message:y},void 0),Boolean(u)&&(0,i.jsx)(et,{itemListKey:h.itemListKey,currentIndex:h.currentIndex,onNextVideo:g.handleNextVideo,onPrevVideo:g.handlePrevVideo,needUrlDelegate:t,onCloseBrowserMode:x,teaParams:m,onJumpSamePage:b},void 0)]}),void 0)};return c.displayName=`WithBrowserMode(${(0,l.i)(o)})`,c}}},97801:(e,t,o)=>{o.d(t,{xf:()=>O,q5:()=>L,Ui:()=>Z,_0:()=>B,om:()=>M,zX:()=>F,AS:()=>z});var i,n=o(11040),a=o(9236),r=o(40316),l=o.n(r),s=o(53586),d=o.n(s),c=o(90293),u=o(91051),p=o(21041),m=o(39903),h=o(29046),g=o(12285),v=o(58500),x=o(26802),b=o(66958),y=o(15073),_=o(14870),f=o(53304),j=o(93328),k=o(34708),C=o(61453),w=o(33104),S=o(74472),P=o(67862),T=o(19330),I=o(52053),D=o(46562);function O({itemListKey:e,item:t,author:o,needUrlDelegate:i,onCloseBrowserMode:n}){const{search:a}=(0,p.TH)(),r=(0,p.k6)(),s=(0,u.useRef)(!1);(0,u.useEffect)((()=>{const e=()=>{n({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,u.useEffect)((()=>{if(!t||!e||!i)return;const{scheduleTime:n,id:r,author:d=""}=t,u=n?(0,b.yl)({uniqueId:d,secUid:null==o?void 0:o.secUid}):(0,c.stringifyUrl)({url:(0,b.fH)({uniqueId:d,videoId:r,secUid:null==o?void 0:o.secUid}),query:Object.assign(Object.assign({},l()((0,c.parse)(a),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",is_copy_url:"1"})},{skipNull:!0});s.current?window.history.replaceState(window.history.state,"video-detail",u):(window.history.pushState(window.history.state,"video-detail",u),s.current=!0)}),[null==o?void 0:o.secUid,r,t,e,i,a])}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(i||(i={}));const R=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function L({onCloseBrowserMode:e,onNextVideo:t,onPrevVideo:o,pause:i,setPause:n,embedVisibleRef:r,group_id:l,handleLikeClick:s,author_id:d,itemListKey:c,onJumpSamePage:m,shouldPause:x}){const[b,f]=(0,u.useState)(!1),[k,w]=(0,u.useState)(0),[{isInputEmpty:S,noReplyUser:T},{setNeedClearInput:I}]=(0,a.b7)(P.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),{mute:D,setMute:O}=(0,_.s_)(2),L=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),O(!D,"keydown")}),[D,O]),{enhanceVideoConsumptionVersion:Z="v1"}=(0,j.m)(),B=["v2","v3"].includes(Z),M=(0,a.mp)(y.bg,{selector:({showing:e})=>e,dependencies:[]}),F=(0,a.mp)(C.r,{selector:e=>e.isOpen,dependencies:[]}),z=(0,u.useRef)(null),A=(0,u.useCallback)((()=>{var e,t,o,a;i?null===(t=null===(e=z.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e):null===(a=null===(o=z.current)||void 0===o?void 0:o.pause)||void 0===a||a.call(o),n(!i)}),[i,n]),{pathname:E}=(0,p.TH)(),U=(0,p.k6)(),W=(0,u.useCallback)((t=>{var o;R(t),S&&T?e({playProgress:null===(o=z.current)||void 0===o?void 0:o.currentTime,shouldPause:x}):(w(1),f(!0))}),[S,T,x,e]),V=(0,u.useRef)(""),G=(0,u.useCallback)(((e,t)=>{if(t.includes(E)&&E!==h.Ad.home)return W(e),void m();S&&T||(R(e),w(4),f(!0),V.current=t)}),[W,S,T,E,m]),q=(0,u.useCallback)(((e,o="click")=>{if(e&&R(e),S&&T){t(),n(!1);const e={enter_method:o,play_mode:"browser_mode",group_id:l,author_id:d,skipped_group_num:0,skipped_group_ids:""};g.r.handleVideoChange(e,"next"),"foryou"===c&&g.r.handleHotVideoChange(e,"next")}else w(3),f(!0)}),[S,T,t,n,l,d,c]),$=(0,u.useCallback)(((e,t="click")=>{if(e&&R(e),S&&T){o(),n(!1);const e={enter_method:t,play_mode:"browser_mode",group_id:l,author_id:d,skipped_group_num:0,skipped_group_ids:""};g.r.handleVideoChange(e,"prev"),"foryou"===c&&g.r.handleHotVideoChange(e,"prev")}else w(2),f(!0)}),[S,T,o,n,l,d,c]),N=(0,u.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||F)return;const t=new Map([[27,()=>{M||r.current||W(e)}],[40,()=>{B&&q(e,"keydown")}],[32,()=>{A()}],[39,()=>{B||q(e,"keydown")}],[38,()=>{B&&$(e,"keydown")}],[37,()=>{B||$(e,"keydown")}],[76,()=>{"v3"===Z&&s("keydown")}],[77,()=>{"v3"===Z&&L(e)}]]),{keyCode:o}=e;t.has(o)&&(e.preventDefault(),t.get(o)())}),[r,W,s,q,$,L,F,M,B,A,Z]),H=(0,u.useCallback)((()=>{var i;switch(k){case 1:e({playProgress:null===(i=z.current)||void 0===i?void 0:i.currentTime,shouldPause:x});break;case 2:o(),n(!1);break;case 3:t(),n(!1);break;case 4:V.current&&U.push(V.current)}f(!1),I(!0),v.y.handleLeaveComment({group_id:l})}),[k,l,U,x,e,t,o,I,n]),Y=(0,u.useCallback)((()=>{w(0),f(!1),v.y.handleKeepComment({group_id:l})}),[l]);return(0,u.useEffect)((()=>(document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)})),[N]),{handleLinkClick:G,handleClose:W,handleNext:q,handlePrev:$,preventDefault:R,togglePlay:A,videoPlayerRef:z,showLeaveModal:b,isInputEmpty:S,handleConfirmLeave:H,handleCancelLeave:Y}}function Z({id:e,needDispose:t=!0}){const o=(0,a.qj)(T.x),i=(0,u.useRef)(null),n=(0,u.useCallback)((()=>{o.fetchComment({aweme_id:e})}),[o,e]);return(0,u.useEffect)((()=>()=>{t&&(o.dispose$(),o.setCommentItem({awemeId:""}))}),[o,t]),(0,f.s)({elemRef:i,onHitBottom:n,bottomThreshold:200,throttle:200}),i}function B({showLeaveModal:e,group_id:t}){(0,u.useEffect)((()=>{e&&v.y.handleClose({group_id:t})}),[t,e]),(0,u.useEffect)((()=>()=>{v.y.handleClose({group_id:t})}),[t])}const M=({currentIndex:e,handlePrev:t,hasNext:o,handleNext:i,itemListKey:a})=>{const{isEnhanceVideoConsumptionV1:r,enhanceVideoConsumptionVersion:l}=(0,j.m)(),s=(0,u.useCallback)(d()((e=>{a&&e.srcElement.classList.value.includes("BasicVideo")&&(e.deltaY>=1?i(e,"scroll"):e.deltaY<=-1&&t(e,"scroll"))}),100),[i,t]);return(0,u.useEffect)((()=>("v3"===l&&window.addEventListener("wheel",s),()=>{"v3"===l&&window.removeEventListener("wheel",s)}))),r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.o1,Object.assign({disabled:0===e,isPrev:!0,onClick:t,"data-e2e":"arrow-left"},{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,n.jsx)(D.o1,Object.assign({disabled:!o,isPrev:!1,onClick:i,"data-e2e":"arrow-right"},{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.He,Object.assign({disabled:0===e,isPrev:!0,onClick:t,isUpAndDown:!r,"data-e2e":"arrow-left"},{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,n.jsx)(D.He,Object.assign({disabled:!o,isPrev:!1,onClick:i,isUpAndDown:!r,"data-e2e":"arrow-right"},{children:(0,n.jsx)(m.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0)},F=e=>{var t,o;let i=!0;const n=(0,w.p)(null==e?void 0:e.author),{user:a={}}=null!==(t=(0,k.L)((()=>["user"]),[]))&&void 0!==t?t:{},[r,l]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{e.stopPropagation(),x.F.handleClickAnalyticsButton(),l(!0)}),[]),d=(0,u.useCallback)((()=>{l(!1)}),[]);a||(i=!1);const{secUid:c,analyticsOn:p}=null!=a?a:{};return c===(null!==(o=null==n?void 0:n.secUid)&&void 0!==o?o:"")&&p||(i=!1),{showAnalyticsButton:i,showAnalyticsModal:r,handleOpenAnalyticsModal:s,handleCloseAnalyticsModal:d}};function z(e,t){const{listLength:o,statusCode:i}=(0,a.mp)(S.h,{selector:t=>{var o,i,n;return{listLength:null!==(i=null===(o=t[e])||void 0===o?void 0:o.list.length)&&void 0!==i?i:0,statusCode:null===(n=t[e])||void 0===n?void 0:n.statusCode}},dependencies:[]}),n=(0,a.mp)(I.O,{selector:e=>e.currentIndex,dependencies:[]});(0,u.useEffect)((()=>{0===i&&(!o||o-n<=3)&&t()}),[n,t,o,i])}},46562:(e,t,o)=>{o.d(t,{wh:()=>U,b7:()=>_,sL:()=>F,lI:()=>f,TK:()=>L,E9:()=>m,lk:()=>O,Is:()=>h,qq:()=>g,uc:()=>v,vN:()=>y,Vz:()=>x,Eb:()=>b,Q9:()=>Z,ik:()=>A,L7:()=>j,oT:()=>z,zo:()=>E,o$:()=>R,Sf:()=>w,hy:()=>D,ps:()=>S,o1:()=>P,He:()=>T,Y1:()=>B,Sd:()=>k});var i,n,a=o(32913),r=o(56277),l=o(27918),s=o(91051);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},d.apply(this,arguments)}const c=function(e){return s.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),i||(i=s.createElement("g",{fillRule:"evenodd",clipPath:"url(#logo-icon_svg__a)",clipRule:"evenodd"},s.createElement("path",{fill:"#000",d:"M0 36c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12H12C5.373 0 0 5.372 0 12v24z"}),s.createElement("path",{fill:"#25F4EE",d:"M30.636 6.288A9.23 9.23 0 0130.35 4h-6.97v26.133c0 3.014-2.056 5.457-5.062 5.457-3.006 0-5.443-2.443-5.443-5.456 0-3.014 2.437-5.457 5.443-5.457.6 0 .797.098 1.337.278v-7.051c-.562-.079-.754-.12-1.337-.12C11.515 17.785 6 23.315 6 30.135c0 6.82 5.515 12.349 12.318 12.349 6.708 0 12.357-5.375 12.51-12.062V17.049c2.528 1.733 5.395 2.746 8.689 2.746V13.19c-4.275 0-7.866-2.933-8.88-6.902z"}),s.createElement("path",{fill:"#fff",d:"M33.12 8.77a9.23 9.23 0 01-.287-2.288h-6.971v26.134c0 3.014-2.055 5.456-5.061 5.456s-5.443-2.442-5.443-5.456a5.45 5.45 0 015.443-5.456c.6 0 .797.097 1.337.277v-7.05c-.562-.08-.754-.12-1.337-.12-6.803 0-12.318 5.529-12.318 12.349S13.998 44.965 20.8 44.965c6.707 0 12.357-5.374 12.51-12.062V19.531c2.528 1.733 5.395 2.747 8.689 2.747v-6.606c-4.275 0-7.866-2.933-8.88-6.901z"}),s.createElement("path",{fill:"#FE2C55",d:"M15.92 35.033a5.446 5.446 0 01-.562-2.416c0-3.014 2.437-5.457 5.443-5.457.523 0 .739.074 1.143.212l.194.066v-7.051l-.21-.03c-.411-.059-.623-.09-1.127-.09-.386 0-.769.018-1.146.053v4.635l-.194-.066c-.404-.138-.62-.212-1.143-.212-3.006 0-5.443 2.443-5.443 5.457a5.46 5.46 0 003.045 4.9zm-4.972 4.997a12.29 12.29 0 009.853 4.935c6.707 0 12.357-5.374 12.51-12.061V19.532c2.528 1.733 5.395 2.746 8.689 2.746v-6.605a9.2 9.2 0 01-2.483-.341v4.463c-3.294 0-6.161-1.013-8.69-2.746v13.372c-.152 6.688-5.802 12.062-12.509 12.062-2.763 0-5.314-.912-7.37-2.453zm23.455-28.401a9.206 9.206 0 01-3.715-5.146h2.145a9.155 9.155 0 001.57 5.146z"}))),n||(n=s.createElement("defs",null,s.createElement("clipPath",{id:"logo-icon_svg__a"},s.createElement("rect",{width:48,height:48,fill:"#fff",rx:10.5})))))};var u=o(2218),p=o(41273);const m=(0,a.Z)("div",{target:"e11s2kul0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:1e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),h=(0,a.Z)("div",{target:"e11s2kul1"})((({theme:e})=>[(0,l.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),g=(0,a.Z)("div",{target:"e11s2kul2"})((({theme:e})=>({height:"100%",left:"-80px",right:"-80px",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:1})),"label:DivMask;"),v=(0,a.Z)("div",{target:"e11s2kul3"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),x=(0,a.Z)("div",{target:"e11s2kul4"})((({theme:e})=>({width:"106px",height:"106px",padding:"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),b=(0,a.Z)("div",{target:"e11s2kul5"})((({theme:e})=>({maxWidth:"419px",margin:"24px auto 0",fontSize:"24px",lineHeight:"32px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),y=(0,a.Z)("div",{target:"e11s2kul6"})((({theme:e})=>({maxWidth:"419px",margin:"16px auto 0",fontSize:"18px",lineHeight:"24px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),_=(0,a.Z)("button",{target:"e11s2kul7"})((({theme:e})=>({maxWidth:"419px",height:"56px",cursor:"pointer",margin:"224px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),f=(0,a.Z)("div",{target:"e11s2kul8"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover"},"label:DivBlurBackground;"),j=(0,a.Z)("div",{target:"e11s2kul9"})({position:"relative",width:"100%",height:"100%",cursor:"pointer",":hover":{[`${u.ov}`]:{opacity:1}}},"label:DivVideoWrapper;"),k=(0,a.Z)("svg",{target:"e11s2kul10"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;");k.defaultProps=Object.assign(Object.assign({},k.defaultProps),{"data-e2e":"browse-video-play"});const C=(0,a.Z)("button",{target:"e11s2kul11"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0})),"label:ButtonBasicButtonContainer;"),w=(0,a.Z)(C,{target:"e11s2kul12"})((({theme:e})=>({top:"20px",transition:"opacity .3s",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,l.YJ)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");w.defaultProps=Object.assign(Object.assign({},w.defaultProps),{"data-e2e":"browse-close"});const S=(0,a.Z)(c,{target:"e11s2kul13"})({position:"absolute",zIndex:1,top:"20px",borderRadius:"100px"},(({theme:{direction:e}})=>(0,l.YJ)({direction:e,start:"84px"})),"label:StyledLogo;");S.defaultProps=Object.assign(Object.assign({},S.defaultProps),{"data-e2e":"browse-logo"});const P=(0,a.Z)(C,{target:"e11s2kul14"})((({isPrev:e,theme:{direction:t,colors:o}})=>{const i=e?"start":"end",n=(0,l.$K)(t,i);return{[n]:"20px",transform:"left"===n?"rotate(180deg)":void 0,top:"50%",marginTop:"-24px",":disabled":{display:"none"},background:o.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}}}),"label:StyledVideoSwitch;"),T=(0,a.Z)(C,{target:"e11s2kul15"})((({isPrev:e,theme:{colors:t}})=>({transform:e?"rotate(-90deg)":"rotate(90deg)",top:e?"calc(50% - 48px)":"calc(50% + 8px)",marginTop:"-24px",":disabled":{display:"none"},background:t.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,l.YJ)({direction:e,end:"20px"})),"label:StyledVideoSwitchV2;"),I=(0,a.Z)("div",{target:"e11s2kul16"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),D=(0,a.Z)(I,{target:"e11s2kul17"})((({isOpen:e=!1,isRTL:t=!1})=>({flex:"unset",width:"360px",height:"100%",padding:"0",transform:`translateX(${e?0:t?-100:100}%)`,transition:"transform 200ms cubic-bezier(.65, 0, .35, 1)"})),"label:StyledDivContentContainerSwiper;"),O=(0,a.Z)("div",{target:"e11s2kul18"})((({theme:e})=>[(0,l.GI)({theme:e,typography:"P1",fontWeight:"semiBold",fontFamily:"Proxima"}),{color:e.colors.TextPrimary,height:"64px",background:e.colors.BGPlaceholderOpaque,boxSizing:"border-box",padding:"16px 16px 24px",borderRadius:"4px"}]),"label:DivCommentTitle;"),R=(0,a.Z)(r.Z,{target:"e11s2kul19"})((({theme:{direction:e}})=>[(0,l.YJ)({direction:e,end:"24px"}),{position:"absolute",top:"20px",cursor:"pointer"}]),"label:StyledCloseBtn;"),L=(0,a.Z)("div",{target:"e11s2kul21"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 16px",padding:"16px 0"})),"label:DivBottomCommentContainer;"),Z=(0,a.Z)("div",{target:"e11s2kul22"})((({theme:e})=>[(0,l.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"Sofia"}),{padding:"10px 16px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",color:e.colors.ConstTextInverse,":hover":{opacity:.7},":active":{opacity:.5}},(0,l.YJ)({direction:e.direction,end:"20px"})]),"label:DivReportText;");Z.defaultProps=Object.assign(Object.assign({},Z.defaultProps),{"data-e2e":"browse-report"});const B=(0,a.Z)("svg",{target:"e11s2kul23"})((({theme:{direction:e}})=>(0,l.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:SvgIconFlag;");B.defaultProps={fill:"currentColor",width:"1em",height:"1em"};const M=(0,a.Z)("button",{target:"e11s2kul24"})(l.Ph,(({theme:e,widerBottom:t=!1})=>({position:"absolute",bottom:t?"60px":"20px",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,l.YJ)({direction:e,end:"20px"})),"label:ButtonVoiceControl;");M.defaultProps=Object.assign(Object.assign({},M.defaultProps),{"data-e2e":"browse-sound"});const F=(0,a.Z)("button",{target:"e11s2kul25"})(l.Ph,(({theme:e})=>({display:"flex",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),"label:ButtonVoiceControlNew;");F.defaultProps=Object.assign(Object.assign({},F.defaultProps),{"data-e2e":"browse-sound"});const z=(0,a.Z)("div",{target:"e11s2kul26"})((({widerBottom:e=!1})=>({position:"absolute",zIndex:1,bottom:e?"60px":"20px",[`:hover ${p.nW}`]:{opacity:"1"}})),(({theme:{direction:e}})=>(0,l.YJ)({direction:e,end:"20px"})),"label:DivVoiceControlContainer;"),A=(0,a.Z)("div",{target:"e11s2kul27"})((({theme:{colors:e}})=>({flex:"1 1 896px",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivVideoContainer;"),E=(0,a.Z)("div",{target:"e11s2kul28"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),U=(0,a.Z)("a",{target:"e11s2kul30"})((({theme:{colors:e}})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"84px",left:"50%",transform:"translateX(-50%)",fontWeight:500,fontSize:"18px",padding:"11.5px 24px",borderRadius:"52px",color:e.ConstTextInverse,background:e.ToastDefault,cursor:"pointer",textDecoration:"none",":hover":{opacity:.7,color:e.ConstTextInverse,textDecoration:"none"},":active":{opacity:.5,color:e.ConstTextInverse,textDecoration:"none"},":visited":{opacity:1,color:e.ConstTextInverse,textDecoration:"none"}})),"label:AAnalyticsWrapper;")},2218:(e,t,o)=>{o.d(t,{yx:()=>a,F7:()=>r,MT:()=>l,$_:()=>s,FL:()=>d,ov:()=>p,Gb:()=>m,Am:()=>h});var i=o(32913),n=o(27918);const a=(0,i.Z)("div",{target:"e1rpry1m0"})({width:"100%",height:"24px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),r=(0,i.Z)("div",{target:"e1rpry1m1"})({flex:"0 0 88px",maxWidth:"88px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"24px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),l=(0,i.Z)("div",{target:"e1rpry1m2"})({height:"4px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer"},"label:DivSeekBarProgress;"),s=(0,i.Z)("div",{target:"e1rpry1m3"})((({theme:{direction:e,colors:t},backgroundTheme:o})=>({height:"4px",width:"100%",backgroundColor:"primary"===o?t.Primary:t.BGPrimary,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),d=(0,i.Z)("div",{target:"e1rpry1m4"})((({theme:{direction:e}})=>(0,n.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),c="calc(100% - 160px)",u="translateX(-50%)",p=(0,i.Z)("div",{target:"e1rpry1m5"})((({show:e,extraBottomSpace:t})=>({width:c,height:"24px",paddingInline:"16px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:t?"68px":"28px",cursor:"initial",display:"flex",alignItems:"center",left:"50%",transform:u,maxWidth:"56.25vh",[`:hover ${l}`]:{height:"6px"},[`:hover ${s}`]:{height:"6px"},[`:hover ${d}`]:{display:"block"},"@media (max-width: 900px)":{display:"none"}})),"label:DivVideoControlContainer;"),m=(0,i.Z)("div",{target:"e1rpry1m6"})({width:c,height:"28px",position:"absolute",bottom:0,left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlBottom;"),h=(0,i.Z)("div",{target:"e1rpry1m7"})({width:c,height:"10px",position:"absolute",bottom:"52px",left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlTop;")},41273:(e,t,o)=>{o.d(t,{nW:()=>n,CY:()=>a,SM:()=>r,tP:()=>l});var i=o(32913);const n=(0,i.Z)("div",{target:"e1exqkaz0"})((({dragging:e})=>({width:"28px",height:"96px",margin:"8px 6px",display:"block",opacity:e?"1":"0",position:"relative",background:"rgba(255, 255, 255, 0.12)",borderRadius:"32px"})),"label:DivVolumeControlContainer;"),a=(0,i.Z)("div",{target:"e1exqkaz1"})({width:"4px",height:"80px",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"12px",top:"8px",bottom:"8px",cursor:"pointer"},"label:DivVolumeControlProgress;"),r=(0,i.Z)("div",{target:"e1exqkaz2"})((({theme:{colors:e},backgroundTheme:t})=>({width:"4px",height:"80px",backgroundColor:"primary"===t?e.Primary:e.BGPrimary,position:"absolute",left:"12px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom"})),"label:DivVolumeControlBar;"),l=(0,i.Z)("div",{target:"e1exqkaz3"})({width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",left:"6px",bottom:"0",cursor:"pointer",zIndex:1},"label:DivVolumeControlCircle;")},30109:(e,t,o)=>{o.d(t,{J:()=>de});var i=o(64047),n=o(11040),a=o(9236),r=o(16926),l=o(91051),s=o(76851),d=o(56277),c=o(59577),u=o(79489),p=o(43094),m=o(88671),h=o(8721),g=o(91497),v=o(84785),x=o(24878),b=o(76967),y=o(35468),_=o(33980),f=o(32913),j=o(89388),k=o(14695),C=o(19306),w=o(13899),S=o(27918),P=o(30074),T=o(80537);const I=(0,f.Z)("div",{target:"e140z3d00"})({position:"relative",width:400},"label:DivSendMessagePanelContainer;"),D=(0,f.Z)("div",{target:"e140z3d01"})((({theme:{direction:e}})=>[{position:"absolute",top:36,cursor:"pointer"},(0,S.YJ)({direction:e,end:32})]),"label:DivCloseButtonWrapper;"),O=(0,f.Z)("h2",{target:"e140z3d02"})((({theme:e,theme:{direction:t}})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P0",fontWeight:"bold"}),{padding:"32px 0 0"},(0,S.YJ)({direction:t,paddingStart:32,paddingEnd:62})]),"label:H2ModalTitle;"),R=(0,f.Z)("div",{target:"e140z3d03"})((({theme:e})=>({display:"flex",alignItems:"center",width:336,height:36,margin:"24px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault})),"label:DivSearchContainer;"),L=(0,f.Z)(j.Z,{target:"e140z3d04"})((({theme:{direction:e}})=>[(0,S.YJ)({direction:e,marginStart:16,marginEnd:12})]),"label:StyledMagnifyingGlass;"),Z=(0,f.Z)("input",{target:"e140z3d05"})((({theme:e,theme:{colors:t}})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{width:240,height:22,border:"none",outline:"none",background:"transparent",caretColor:t.Primary,"::placeholder":{color:t.TextTertiary}}]),"label:InputUser;"),B=(0,f.Z)("div",{target:"e140z3d06"})((({theme:{direction:e}})=>[{width:16,height:16,cursor:"pointer"},(0,S.YJ)({direction:e,marginStart:8})]),"label:DivClearButton;"),M=(0,f.Z)("div",{target:"e140z3d07"})({minHeight:200,marginTop:24},"label:DivUserListContainer;"),F=(0,f.Z)("p",{target:"e140z3d08"})((({theme:e})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P1",color:"TextQuaternary"}),{marginTop:74,textAlign:"center"}]),"label:PNoResult;"),z=(0,f.Z)(P.g,{target:"e140z3d09"})({width:36,height:36,margin:"6px auto 12px"},"label:StyledLoading;"),A=(0,f.Z)("p",{target:"e140z3d010"})((({theme:e,theme:{direction:t}})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextTertiary"}),{marginBottom:4,fontSize:"13px"},(0,S.YJ)({direction:t,marginStart:32})]),"label:PUserTitle;"),E=(0,f.Z)("div",{target:"e140z3d011"})((({long:e,isSearching:t})=>({position:"relative",boxSizing:"border-box",overflowY:"auto",width:"100%",minHeight:t?e?578:472:200,maxHeight:e?578:472,paddingBottom:e?210:102,"::-webkit-scrollbar":{display:"none"}})),"label:DivUserListInnerContainer;"),U=(0,f.Z)("div",{target:"e140z3d012"})((({theme:e})=>({boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"8px 32px",cursor:"pointer",":hover":{backgroundColor:e.colors.BGView}})),"label:DivUserItemContainer;"),W=(0,f.Z)("div",{target:"e140z3d013"})({display:"flex",flex:1,alignItems:"center",height:48},"label:DivUserItem;"),V=(0,f.Z)("div",{target:"e140z3d014"})((({theme:{direction:e}})=>(0,S.YJ)({direction:e,marginStart:12})),"label:DivRightPart;"),G=(0,f.Z)("div",{target:"e140z3d015"})([{display:"flex",alignItems:"center"}],"label:DivNicknameContainer;"),q=(0,f.Z)("span",{target:"e140z3d016"})((({theme:e})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P1",fontWeight:"bold"}),{maxWidth:220},S.wj]),"label:SpanNickname;"),$=(0,f.Z)(k.Z,{target:"e140z3d017"})((({theme:{direction:e}})=>[{flexShrink:0},(0,S.YJ)({direction:e,marginStart:4})]),"label:StyledVerifiedBadgeColor;"),N=(0,f.Z)("p",{target:"e140z3d018"})((({theme:e})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextTertiary"}),{maxWidth:240,marginTop:2},S.wj]),"label:PUniqueId;"),H=(0,f.Z)("div",{target:"e140z3d019"})((({theme:{direction:e}})=>[{flexShrink:0,width:22,height:22},(0,S.YJ)({direction:e,marginStart:12})]),"label:DivCheckboxContainer;"),Y=(0,f.Z)("div",{target:"e140z3d020"})({position:"absolute",bottom:0,left:0,right:0,padding:"12px 32px 32px 32px",backgroundColor:"#fff",borderRadius:"0 0 8px 8px",":before":{position:"absolute",top:0,left:0,right:0,content:'""',transform:"scaleY(.5)",width:"100%",height:1,backgroundColor:"rgba(22, 24, 35, .12)"}},"label:DivSendContainer;"),Q=(0,f.Z)(T.W,{target:"e140z3d021"})({width:336,height:46,marginTop:12},"label:StyledSendButton;"),J=(0,f.Z)("div",{target:"e140z3d022"})({display:"flex",marginTop:12},"label:DivMessageContainer;"),K=(0,f.Z)("textarea",{target:"e140z3d023"})((({theme:e,theme:{direction:t,colors:o}})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"block",width:268,height:98,border:"none",resize:"none",outline:"none",wordBreak:"break-word",overflowWrap:"break-word",caretColor:o.Primary,"::placeholder":{color:o.TextTertiary}},(0,S.YJ)({direction:t,marginEnd:12})]),"label:Textarea;"),X=(0,f.Z)("img",{target:"e140z3d024"})({width:56,height:74},"label:ImgCover;"),ee=(0,f.Z)("div",{target:"e140z3d025"})((({theme:e,theme:{direction:t}})=>[{display:"flex",alignItems:"center",width:336,padding:"12px 0 12px",margin:"16px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGView},(0,S.YJ)({direction:t,paddingStart:16,paddingEnd:4})]),"label:DivTipContainer;"),te=(0,f.Z)(C.Z,{target:"e140z3d026"})({width:24,height:24,flexShrink:0},"label:StyledPersonArrowLeftRight;"),oe=(0,f.Z)(w.Z,{target:"e140z3d027"})({width:24,height:24,flexShrink:0},"label:StyledTwoPerson;"),ie=(0,f.Z)("p",{target:"e140z3d028"})((({theme:e,theme:{direction:t}})=>[(0,S.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextSecondary"}),{fontSize:"13px"},(0,S.YJ)({direction:t,marginStart:12})]),"label:PTip;");var ne=o(13761),ae=o(74920),re=o(2734);const le=(0,l.forwardRef)((function({uniqueId:e,isSelected:t=!1,searchValue:o="",selectedCount:i,onUserSelected:r},s){const d=(0,a.mp)(x.z,{selector:t=>t.users[e],dependencies:[e]}),c=(0,l.useRef)(null);(0,l.useImperativeHandle)(s,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=c.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0}})),[]);const u=(0,l.useCallback)((()=>{i>=15&&!t||r(d,!t)}),[t,d,i,r]),{avatarThumb:p,nickname:m="",verified:h}=(0,re.m7)(d),g=m.toLocaleLowerCase().indexOf(o.toLocaleLowerCase()),v=-1===g?0:o.length;if(!e||!d)return null;const b=m.slice(0,g),y=m.slice(g,g+v),_=m.slice(g+v);return(0,n.jsxs)(U,Object.assign({ref:c,onClick:u},{children:[(0,n.jsxs)(W,{children:[(0,n.jsx)(ne.q,{size:48,src:p},void 0),(0,n.jsxs)(V,{children:[(0,n.jsxs)(G,{children:[(0,n.jsx)(q,{children:(0,n.jsxs)("span",{children:[b,(0,n.jsx)("span",Object.assign({style:{color:"#fe2c55"}},{children:y}),void 0),_]},void 0)},void 0),h&&(0,n.jsx)($,{width:14,height:14,style:{verticalAlign:"middle",marginLeft:4}},void 0)]},void 0),(0,n.jsx)(N,{children:e},void 0)]},void 0)]},void 0),(0,n.jsx)(H,{children:(0,n.jsx)(ae.X,{size:22,isCircle:!1,value:t},void 0)},void 0)]}),void 0)}));var se;!function(e){e.RECENT="recent",e.FOLLOWING="following"}(se||(se={}));const de=(0,l.memo)((function({visible:e,videoId:t,onClose:o}){const f=(0,h.Q)(),j=(0,a.mp)(v.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),k=(0,a.mp)(b.A,{selector:e=>e[t],dependencies:[t]}),{video:C,forFriend:w,author:S="",authorId:P=""}=(0,l.useMemo)((()=>null!=k?k:{}),[k]),[T,U]=(0,a.b7)(x.z,{selector:e=>e.users[S],dependencies:[t]}),{privateAccount:W,nickname:V}=(0,l.useMemo)((()=>null!=T?T:{}),[T]),[{recentUserList:G,recentUserNameList:q,recentUidList:$,followingUser:N,isFollowingLoading:H,isSendMessageLoading:ne},ae]=(0,a.b7)(_.O),re=(0,r.fz)(u.p),se=(0,l.useRef)({recent:!1,following:!1}),de=(0,l.useRef)({recent:{list:[],hasShown:[]},following:{list:[],hasShown:[]}}),ce=(0,l.useCallback)(((e,t)=>o=>{de.current[t].list[e]=o}),[]),{isRTL:ue}=(0,g.Y)(),[pe,me]=(0,l.useState)(""),[he,ge]=(0,l.useState)(""),[ve,xe]=(0,l.useState)([]),[be,ye]=(0,l.useState)([]),[_e,fe]=(0,l.useState)([]),je=ve.length,ke=G.length,{list:Ce,nicknameList:we,uidList:Se,hasMore:Pe}=N,Te=Ce.length,Ie=je>0,De=""!==pe,Oe=W||w;(0,l.useEffect)((()=>{e||(me(""),ge(""),xe([]),ae.setSendMessageStatus({isFailed:!1,isLoading:!1}))}),[e,ae]),(0,l.useEffect)((()=>{if(!Te&&Pe){if(j){const{uid:e,avatarUri:t,nickName:o}=j,n=(0,i.__rest)(j,["uid","avatarUri","nickName"]),a=Object.assign({id:e,nickname:o,verified:!1,relation:0,avatarThumb:t[0],avatarMedium:t[0],avatarLarger:t[0]},n);U.setUser(a),ae.updateFollowingUserList({list:[j.uniqueId],nicknameList:[o],uidList:[e],hasMore:!0,maxCursor:0,minCursor:0})}ae.getFollowingUserListWithCanShare({count:90})}}),[]),(0,l.useEffect)((()=>{Promise.resolve().then((()=>{const e=de.current.recent,t=de.current.following;if(ke&&!se.current.recent&&(se.current.recent=!0,G.slice(0,5).forEach(((t,o)=>{var i,n;(null!==(n=null===(i=e.list[o])||void 0===i?void 0:i.offsetTop)&&void 0!==n?n:1/0)<354&&(p.R.handleShareHeadShow({user_type:"recent",rank_index:o,is_self:t===(null==j?void 0:j.uniqueId)?1:0,to_user_id:$[o]}),e.hasShown[o]=!0)}))),Te&&!se.current.following){if(1===Te&&Pe)return;se.current.following=!0,Ce.slice(0,5).forEach(((e,o)=>{var i,n;(null!==(n=null===(i=t.list[o])||void 0===i?void 0:i.offsetTop)&&void 0!==n?n:1/0)<354&&(p.R.handleShareHeadShow({user_type:"following",rank_index:o,is_self:e===(null==j?void 0:j.uniqueId)?1:0,to_user_id:Se[o]}),t.hasShown[o]=!0)}))}})).catch((()=>{}))}),[null==j?void 0:j.uniqueId,Ce,Te,G,ke,$,Se,Pe]),(0,l.useEffect)((()=>{if(!pe)return;const e=[],t=[],o=pe.toLocaleLowerCase();q.forEach(((t,i)=>{(t.toLocaleLowerCase().indexOf(o)>-1||G[i].toLocaleLowerCase().indexOf(o)>-1)&&e.push(G[i])})),we.forEach(((i,n)=>{e.indexOf(Ce[n])<0&&(i.toLocaleLowerCase().indexOf(o)>-1||Ce[n].toLocaleLowerCase().indexOf(o)>-1)&&t.push(Ce[n])})),ye(e),fe(t)}),[pe,q,G,Ce,we]);const Re=(0,l.useCallback)((()=>{o()}),[o]),Le=(0,l.useCallback)(((e,t)=>{if(t)e&&xe([...ve,e]),re.handleShare({platform:"chat_head",group_id:C.id,author_id:P});else{let t=-1;ve.some(((o,i)=>{if(o.uniqueId===(null==e?void 0:e.uniqueId))return t=i,!0})),t>-1&&(ve.splice(t,1),xe([...ve]))}}),[ve,re,C.id,P]),Ze=(0,l.useCallback)((e=>{const{value:t}=e.target;me(t)}),[]),Be=(0,l.useCallback)((()=>{p.R.handleSearchContact()}),[]),Me=(0,l.useCallback)((()=>{me("")}),[]),Fe=(0,l.useCallback)((e=>{const{value:t}=e.target;ge(t)}),[]),ze=function({selectedUserList:e,messageText:t,videoId:o}){const[{conversationMap:i},n]=(0,a.b7)(_.O),r=(0,a.mp)(v.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),s=(0,a.mp)(b.A,{selector:e=>e[o],dependencies:[o]});return(0,l.useCallback)((()=>{var a;const{authorId:l="",nickname:d,authorSecId:c,avatarThumb:u,video:m}=null!=s?s:{},h=[];let g=!1;e.forEach((e=>{(null==e?void 0:e.id)===(null==r?void 0:r.uid)&&(g=!0),h.push(null==e?void 0:e.id)})),p.R.handleShareVideoToChat({platform:"chat_head",is_self:g?1:0,group_id:null!==(a=null==m?void 0:m.id)&&void 0!==a?a:"",author_id:l,is_with_text:t.trim()?1:0,chat_cnt:e.length,to_user_id:String(h)}),n.setSendMessageStatus({isLoading:!0,isFailed:!1}),e.forEach((e=>{var a;const{id:r,relation:s}=e,p=Boolean(null==i?void 0:i[r]),h=null===(a=null==i?void 0:i[r])||void 0===a?void 0:a.id;n.sendMessage({convId:h,uid:r,relation:s,type:8,content:{aweType:800,itemId:o,uid:l,secUID:c,content_thumb:{url_list:[u],uri:u},content_name:d,cover_url:{url_list:[null==m?void 0:m.cover],uri:null==m?void 0:m.cover},cover_width:null==m?void 0:m.width,cover_height:null==m?void 0:m.height},hasConversation:p}),t.trim()&&n.sendMessage({convId:h,uid:r,relation:s,type:7,content:{aweType:0,text:t},hasConversation:p})}))}),[s,e,t,n,null==r?void 0:r.uid,i,o])}({selectedUserList:ve,messageText:he,videoId:t});!function({selectedUserList:e,messageText:t,handleSuccess:o,isRTL:i}){const n=(0,h.Q)(),[{isSendMessageFailed:r,successSentMessageCount:s},d]=(0,a.b7)(_.O),c=e.length;(0,l.useEffect)((()=>{var a,l,u,p;if(r&&(y.h.open({content:n("support_webapp_sharing_error_message"),duration:3,widthType:"half"}),d.setSendMessageStatus({isLoading:!1,isFailed:!1,successCount:0})),0!==s&&s===c*(t.trim()?2:1)){const t=null!==(l=null===(a=e[c-1])||void 0===a?void 0:a.nickname)&&void 0!==l?l:"",r=null!==(p=null===(u=e[c-2])||void 0===u?void 0:u.nickname)&&void 0!==p?p:"";switch(c){case 1:y.h.open({content:n("support_webapp_sharing_sent_toast_1",{username:t}),type:"success",duration:3,widthType:"half",isRTL:i});break;case 2:y.h.open({content:n("support_webapp_sharing_sent_toast_2",{username:t,username2:r}),type:"success",duration:3,widthType:"half",isRTL:i});break;default:y.h.open({content:n("support_webapp_sharing_sent_toast_3",{username:t,number:c-1}),type:"success",duration:3,widthType:"half",isRTL:i})}d.setSendMessageStatus({isLoading:!1,successCount:0}),o()}}),[r,s,e,t,c,n,d,o,i])}({selectedUserList:ve,messageText:he,handleSuccess:()=>{o()},isRTL:ue});const Ae=(0,m.fB)((e=>{if(De)return;const t=e.target,{scrollHeight:o,scrollTop:i,clientHeight:n}=t;o-i===n&&!H&&Pe&&ae.getFollowingUserListWithCanShare({count:30});const a=de.current.recent,r=de.current.following;a.list.forEach(((e,t)=>{var o;a.hasShown[t]||(null!==(o=null==e?void 0:e.offsetTop)&&void 0!==o?o:1/0)<i+n&&(p.R.handleShareHeadShow({user_type:"recent",rank_index:t,is_self:G[t]===(null==j?void 0:j.uniqueId)?1:0,to_user_id:$[t]}),a.hasShown[t]=!0)})),r.list.forEach(((e,t)=>{var o;r.hasShown[t]||(null!==(o=null==e?void 0:e.offsetTop)&&void 0!==o?o:1/0)<i+n&&(p.R.handleShareHeadShow({user_type:"following",rank_index:t,is_self:Ce[t]===(null==j?void 0:j.uniqueId)?1:0,to_user_id:Se[t]}),r.hasShown[t]=!0)}))}),[H,Pe,ae,G,null==j?void 0:j.uniqueId,Ce,De,$,Se],100),Ee=(0,l.useCallback)(((e,t,o)=>{const i=ve.some((t=>t.uniqueId===e));return(0,n.jsx)(le,{uniqueId:e,isSelected:i,searchValue:pe,selectedCount:je,onUserSelected:Le,ref:ce(t,o)},t)}),[pe,je,ve,ce,Le]);return(0,n.jsx)(s.AR,Object.assign({isOpen:e,closeOnBackdropClick:!1,compact:!0},{children:(0,n.jsxs)(I,{children:[(0,n.jsx)(D,Object.assign({onClick:Re},{children:(0,n.jsx)(d.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(O,{children:f("support_webapp_sharing_option_button")},void 0),Oe&&(0,n.jsxs)(ee,{children:[W?(0,n.jsx)(oe,{fill:"rgba(22, 24, 35, .75)"},void 0):(0,n.jsx)(te,{fill:"rgba(22, 24, 35, .75)"},void 0),(0,n.jsx)(ie,{children:f(W?"support_webapp_sharing_toast_2":"support_webapp_sharing_toast_1",{username:V})},void 0)]},void 0),(0,n.jsxs)(R,{children:[(0,n.jsx)(L,{width:24,height:24,fill:De?"":"rgba(22, 24, 35, .34)"},void 0),(0,n.jsx)(Z,{value:pe,placeholder:f("support_webapp_sharing_searchbar_ghosttext"),onChange:Ze,onClick:Be},void 0),De&&(0,n.jsx)(B,Object.assign({onClick:Me},{children:(0,n.jsx)(c.Z,{width:16,height:16,fill:"rgba(22, 24, 35, .34)"},void 0)}),void 0)]},void 0),(0,n.jsx)(M,{children:(0,n.jsx)(E,Object.assign({long:Ie,isSearching:De,onScroll:Ae},{children:(()=>{if(De){const e=be.length>0||_e.length>0;return(0,n.jsxs)(n.Fragment,{children:[be.map(((e,t)=>Ee(e,t,"recent"))),_e.map(((e,t)=>Ee(e,t,"following"))),!e&&(0,n.jsx)(F,{children:f("support_webapp_sharing_search_results")},void 0)]},void 0)}return(0,n.jsxs)(n.Fragment,{children:[0!==ke&&(0,n.jsx)(A,{children:f("support_webapp_sharing_recent")},void 0),G.map(((e,t)=>Ee(e,t,"recent"))),(0,n.jsx)(A,Object.assign({style:{marginTop:ke?12:0}},{children:f("support_webapp_sharing_following")}),void 0),Ce.map(((e,t)=>Ee(e,t,"following"))),H&&(0,n.jsx)(z,{},void 0)]},void 0)})()}),void 0)},void 0),(0,n.jsxs)(Y,{children:[Ie&&(0,n.jsxs)(J,{children:[(0,n.jsx)(K,{value:he,placeholder:f("support_webapp_sharing_write_a_message"),maxLength:6e3,onChange:Fe},void 0),(0,n.jsx)(X,{src:null==C?void 0:C.cover},void 0)]},void 0),(0,n.jsxs)(Q,Object.assign({buttonTheme:"primary",disabled:!Ie,onClick:ze,loading:ne},{children:[f("support_webapp_sharing_send_button"),je>1?`(${je})`:""]}),void 0)]},void 0)]},void 0)}),void 0)}))},12853:(e,t,o)=>{o.d(t,{g:()=>b});var i,n=o(11040),a=o(9236),r=o(91051),l=o(27172),s=o(69916),d=o(54771),c=o(8721),u=o(34708);!function(e){e.GeneralSensitive="general_sensitive",e.PhotoSensitive="photo_sensitive",e.PhotoSensitiveDenied="photo_sensitive_denied"}(i||(i={}));const p={general_sensitive:"masklayer_general_title",photo_sensitive:"photosensitive_masklayer_title",photo_sensitive_denied:"photosensitive_masklayer_removed"},m={general_sensitive:["masklayer_general_body"],photo_sensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photo_sensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body3"]},h={general_sensitive:"masklayer_general_skip",photo_sensitive:"photosensitive_masklayer_watch",photo_sensitive_denied:""},g={general_sensitive:"masklayer_general_watch",photo_sensitive:"photosensitive_masklayer_skipall",photo_sensitive_denied:""};var v;!function(e){e[e.Reported=1]="Reported",e[e.Dislike=2]="Dislike",e[e.General=3]="General",e[e.Photosensitive=4]="Photosensitive"}(v||(v={}));var x=o(81578);const b=({playMode:e,item:t})=>{var o;const i=(0,c.Q)(),{user:v}=null!==(o=(0,u.L)((()=>["user"]),[]))&&void 0!==o?o:{},{photoSensitiveVideosSetting:b,uid:y}=null!=v?v:{},{photoSensitiveVideosSetting:_}=(0,a.mp)(x.P);return(0,r.useMemo)((()=>{const{maskType:o,authorId:a}=t,r=3===o,c=4===o;if(!c&&!r)return{showVideoMask:!1};if(c&&(2===b||2===_||a===y&&0!==b))return{showVideoMask:!1};let u;u=r?"general_sensitive":1===_?"photo_sensitive_denied":"photo_sensitive";const v=i(p[u]),x=m[u].map((e=>i(e))).join(""),f=((e,t)=>{let o=null,i=48;switch(e){case"general_sensitive":i=0===t?36:53,o=(0,n.jsx)(l.Z,{width:i,height:i,fill:"rgba(255, 255, 255, .75)"},void 0);break;case"photo_sensitive":i=0===t?32:48,o=(0,n.jsx)(s.Z,{width:i,height:i,fill:"#fff"},void 0);break;case"photo_sensitive_denied":i=0===t?32:48,o=(0,n.jsx)(d.Z,{width:i,height:i,fill:"#0BE09B"},void 0)}return o})(u,e),j=i(((e,t)=>2===t||3===t||0===t&&"photo_sensitive"===e?h[e]:"")(u,e)),k=i(((e,t)=>2===t||3===t||0===t&&"general_sensitive"===e?g[e]:"")(u,e));return{showVideoMask:!0,maskType:u,videoMaskTitle:v,videoMaskDesc:x,icon:f,videoMaskFirstButtonText:j,videoMaskSecondButtonText:k}}),[t,b,_,y,i,e])}},23683:(e,t,o)=>{o.d(t,{a:()=>y});var i=o(11040),n=o(91051),a=o(13964),r=o(32913),l=o(27918),s=o(80537);const d=(0,r.Z)("div",{target:"e4uoj5v0"})((({theme:e,playMode:t})=>[{position:"absolute",zIndex:3===t?0:1,width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary},2===t?{left:"-80px",right:"-80px",width:"unset"}:null]),"label:DivVideoMask;"),c=(0,r.Z)("div",{target:"e4uoj5v1"})((({playMode:e})=>[{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:2===e?"calc(100% - 160px)":"100%",maxWidth:"515px",padding:0===e?"32px":"48px"},3===e?{width:"463px"}:{}]),"label:DivVideoMaskContainer;"),u=(0,r.Z)("div",{target:"e4uoj5v2"})({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"label:DivVideoMaskInfo;"),p=(0,r.Z)("div",{target:"e4uoj5v3"})((({theme:e,playMode:t})=>({display:"flex",justifyContent:"center",alignItems:"center",width:0===t?"72px":"106px",height:0===t?"72px":"106px",borderRadius:"50%",backgroundColor:e.colors.ConstBGContainer2,color:e.colors.Positive})),"label:DivVideoMaskIcon;"),m=(0,r.Z)("p",{target:"e4uoj5v4"})((({theme:e,theme:{colors:t},playMode:o})=>[(0,l.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:0===o?"17px":"24px",lineHeight:0===o?"20px":"32px",textAlign:"center",color:t.ConstTextInverse2,marginTop:0===o?"20px":"24px"}]),"label:PVideoMaskTitle;"),h=(0,r.Z)("p",{target:"e4uoj5v5"})((({theme:e,playMode:t})=>[(0,l.GI)({theme:e,typography:0===t?"H6":"P1",fontFamily:"Proxima",fontWeight:"normal"}),{textAlign:"center",color:"rgba(255, 255, 255, .75)",marginTop:0===t?"12px":"16px"}]),"label:PVideoMaskDesc;"),g=(0,r.Z)("div",{target:"e4uoj5v6"})((({playMode:e,horizontal:t})=>({marginTop:0===e?t?"20px":"80px":"180px"})),"label:DivBtnWrapper;");function v(e){const{theme:t,second:o,playMode:i}=e;return[l.wj,(0,l.GI)({theme:t,typography:"P1",fontFamily:"Proxima",fontWeight:"semiBold"}),{display:"block",minWidth:"unset",width:"100%",height:0===i?"36px":"56px",marginBottom:o?"0":"8px",background:o?t.colors.ConstBGContainer:t.colors.Primary},o?{"&:hover":{background:t.colors.ConstBGContainer2},"&:active":{background:t.colors.ConstBGContainer3}}:null,0===i?{fontSize:"14px",lineHeight:"17px"}:null]}const x=(0,r.Z)(s.W,{target:"e4uoj5v7"})((e=>v(e)),"label:StyledButtonFirst;"),b=(0,r.Z)(s.W,{target:"e4uoj5v8"})((e=>v(e)),"label:StyledButtonSecond;"),y=(0,n.memo)((e=>{const{playMode:t,icon:o,title:r,desc:l,horizontal:s=!1,firstButtonText:v,secondButtonText:y,canClickPropagation:_=!1,onClickFirstButton:f,onClickSecondButton:j}=e,k=Boolean(v),C=Boolean(y),w=(0,n.useCallback)((e=>{!_&&(0,a.NS)(e)}),[_]);return(0,i.jsx)(d,Object.assign({playMode:t,onClick:w},{children:(0,i.jsxs)(c,Object.assign({playMode:t},{children:[(0,i.jsxs)(u,{children:[Boolean(o)&&(0,i.jsx)(p,Object.assign({playMode:t},{children:o}),void 0),Boolean(r)&&(0,i.jsx)(m,Object.assign({playMode:t},{children:r}),void 0),Boolean(l)&&(0,i.jsx)(h,Object.assign({playMode:t},{children:l}),void 0)]},void 0),(0,i.jsxs)(g,Object.assign({horizontal:s,playMode:t},{children:[k&&(0,i.jsx)(x,Object.assign({type:"button",buttonTheme:"primary",playMode:t,onClick:f},{children:v}),void 0),C&&(0,i.jsx)(b,Object.assign({type:"button",buttonTheme:"primary",playMode:t,second:!0,onClick:j},{children:y}),void 0)]}),void 0)]}),void 0)}),void 0)}))},75924:(e,t,o)=>{o.d(t,{N:()=>u});var i,n=o(64047),a=o(11040),r=o(9236),l=o(91051),s=o(56785),d=o(58869);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(i||(i={}));const c=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),u=(0,l.memo)((0,l.forwardRef)((function(e,t){var{playProgress:o,horizontal:i,muteSetting:u,onUnmount:p,onEnded:m,onWaiting:h,disableDownload:g=!1,itemMute:v=!1}=e,x=(0,n.__rest)(e,["playProgress","horizontal","muteSetting","onUnmount","onEnded","onWaiting","disableDownload","itemMute"]);const b=(0,l.useRef)(null),y=(0,l.useRef)(!1),[{mute:_,volume:f},{setMute:j,setMuteSetting:k}]=(0,r.b7)(s.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),C=(0,r.mp)(s.x,{selector:e=>e.playing,dependencies:[]});(0,l.useImperativeHandle)(t,(()=>{const e=b.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),seek:t=>{if(e){const{duration:o}=e;e.currentTime=o*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.addEventListener("seeked",t)},onSeeking:t=>{null==e||e.addEventListener("seeking",t)},onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var o,i;const n=null!==(o=e.currentTime)&&void 0!==o?o:0,a=null!==(i=e.duration)&&void 0!==i?i:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>c(e)}}));const w=(0,l.useCallback)(((e=0)=>(0,n.__awaiter)(this,void 0,void 0,(function*(){var t,o,i;if(!(e>=3))try{yield null===(t=b.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(o=null==t?void 0:t.message)&&void 0!==o?o:"";(null!==(i=n.match("failed because the user didn't interact with the document first."))&&void 0!==i?i:n.match("The request is not allowed by the user agent or the platform in the current context"))?(j(!0),setTimeout((()=>{w(e+1)}),0)):w(e+1)}}))),[j]);(0,l.useEffect)((()=>{b.current&&(b.current.volume=f)}),[f]),(0,l.useEffect)((()=>{k(u),w(),b.current&&Math.abs(b.current.currentTime-o)>.2&&(b.current.currentTime=o)}),[u,o,k,w]),(0,l.useEffect)((()=>{var e;C?y.current&&(y.current=!1,w()):(y.current=!0,null===(e=b.current)||void 0===e||e.pause())}),[C,w]),(0,l.useEffect)((()=>{const e=b.current;return()=>{null==p||p(c(e))}}),[]),(0,l.useEffect)((()=>{g&&(b.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[g,b]);const S=(0,l.useCallback)((e=>{null==h||h(e)}),[h]),P=(0,l.useCallback)((e=>{null==m||m(e),w()}),[m,w]);return(0,a.jsx)(d.Ex,Object.assign({horizontal:i,ref:b},x,{muted:v||_,playsInline:!0,autoPlay:!0,onEnded:P,onWaiting:S}),void 0)})))},29910:(e,t,o)=>{o.d(t,{S:()=>W});var i=o(11040),n=o(91051),a=o(48036),r=o(9236),l=o(16926),s=o(66688),d=o(37326),c=o(5100),u=o(14870),p=o(2734),m=o(16929),h=o(75924),g=o(56785),v=o(58869),x=o(83421);const b=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:o,playUrl:a,id:b,teaParams:y,index:_,mode:f,itemMute:j,desc:k,onVideoPause:C,onVideoPlaying:w,onVideoPlay:S,onVideoEnded:P,onVideoError:T,e2eTag:I,onTimeUpdate:D,subtitleStruct:O,disableDownload:R=!0},L){const{currentVideo:Z,playProgress:B}=(0,r.mp)(x.f),{updateVVTime:M}=(0,r.qj)(x.f),F=(0,n.useRef)(null),z=(0,n.useRef)(null),A=(0,l.fz)(s.e),E=(0,l.fz)(d.k),U=(0,l.fz)(c.KF),[W,V]=(0,n.useState)(!1),G=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=F.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),q=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=F.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),$=(0,n.useMemo)((()=>{if(!Z)return!1;const{id:e,index:t,mode:o}=Z;return e===b&&t===_&&o===f}),[b,_,f,Z]);(0,n.useImperativeHandle)(L,(()=>({play:()=>{G(),z.current=!0},pause:()=>{q(),z.current=!1,A.triggerPause({enter_method:"click_pause",playMode:f})},seek:e=>{var t;null===(t=F.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=F.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=F.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=F.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=F.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=F.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=F.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return $&&W}})),[G,q,A,f,$,W]),(0,n.useEffect)((()=>{$||V(!1)}),[$]);const N=(0,u.Mz)();(0,n.useEffect)((()=>{const e=null===z.current||z.current;N&&e?G():(q(),$&&!N&&A.triggerPause({enter_method:"switch_tab",playMode:f}))}),[N,G,q,A,$,f]);const H=(0,n.useCallback)((()=>{var e;const t=(0,p.m7)(null===(e=F.current)||void 0===e?void 0:e.getPlayerAttributes()),{bitrate:o,author_id:i,format:n,encodedType:a,videoQuality:r,encodeUserTag:l,codecType:s,definition:d,secret:c,forFriend:u}=y;return Object.assign({id:b,authorId:i,playMode:f,bitrate:o,format:n,encodedType:a,videoQuality:r,encodeUserTag:l,codecType:s,definition:d,secret:c,forFriend:u},null!=t?t:{})}),[b,f,y]),{mute:Y}=(0,r.mp)(g.x),Q=(0,n.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:o,search_id:i,search_keyword:n,search_result_id:a,question_id:r}=y||{};return{itemId:e,authorId:t,isScheduled:Boolean(o),autoplayStatus:1,searchId:i,searchKeyword:n,searchResultId:a,questionId:r,playMode:f,isMute:Y}}),[f,Y,y]),J=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:o=0}=(0,p.m7)(null===(e=F.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},Q),{currentTime:t,duration:o})}),[Q]),{loading:K,handleCanPlayWithLoading:X,handlePauseWithLoading:ee,handlePlayingWithLoading:te,handleWaitingWithLoading:oe}=(0,u.Fk)({isCurrentVideo:$}),ie=(0,n.useCallback)((()=>{E.handleLoadStart(H())}),[E,H]),ne=(0,n.useCallback)((()=>{E.handleLoadedData(H())}),[E,H]),ae=(0,n.useCallback)((()=>{X(),V(!0),U.getCurrentPageReport()||(U.reportVideoFirstScreen({endTime:Date.now(),videoSource:a}),U.reportVideoAddition({endTime:Date.now(),videoSource:a}))}),[X,a,U]),re=(0,n.useCallback)((e=>{E.handlePlay(),null==S||S(e)}),[E,S]),le=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:o=0}=(0,p.m7)(null===(e=F.current)||void 0===e?void 0:e.getPlayerAttributes()),i=A.handleTimeUpdate(J());E.handleTimeUpdate(H()),"video_play"===i&&M(),U.getFirstFrameReport()||U.reportVideoFirstFrame(t),null==D||D(t/o)}),[A,J,E,H,U,D,M]),se=(0,u.ru)(),de=(0,n.useCallback)((e=>{null==T||T(e),se(e),A.handleError(Q),E.handleError(H())}),[T,se,A,Q,E,H]),ce=(0,n.useCallback)((e=>{null==C||C(e),ee(),E.handlePause(H()),A.handlePause(J())}),[C,ee,E,H,A,J]),ue=(0,n.useCallback)((e=>{null==w||w(e),te(),U.reportVideoInteract({endTime:Date.now(),videoSource:a})}),[w,te,U,a]),pe=(0,n.useCallback)((()=>{oe(),A.handleWaiting(J()),E.handleWaiting(H())}),[oe,A,J,E,H]),me=(0,n.useCallback)((e=>{null==P||P(e),A.handleEnded(Q),E.handleEnded()}),[P,A,Q,E]),he=(0,n.useCallback)((e=>{A.handlePlayTime(Q),E.reset(b,Object.assign(Object.assign({},H()),e))}),[b,A,Q,E,H]);(0,n.useEffect)((()=>{$||null==C||C({})}),[$,C]);const ge=o||2===f||3===f||4===f;return(0,i.jsxs)(v.wu,Object.assign({horizontal:o,mode:f},{children:[e?(0,i.jsx)(v.TF,{horizontal:ge,mode:f,src:e,alt:k,loading:t?"lazy":"eager"},void 0):null,$&&(0,i.jsxs)(v.Kp,Object.assign({"data-e2e":I},{children:[(0,i.jsx)(h.N,{ref:F,horizontal:ge,muteSetting:j||m.P[f].forceMute,defaultMute:m.P[f].defaultMute,playProgress:null!=B?B:0,src:a,onUnmount:he,onLoadStart:ie,onLoadedData:ne,onTimeUpdate:le,onError:de,onCanPlay:ae,onPause:ce,onPlay:re,onPlaying:ue,onWaiting:pe,onEnded:me,disableDownload:R},void 0),K&&(0,i.jsx)(v.Nm,{},void 0),4===f&&O?(0,i.jsx)("track",{default:!0,kind:"subtitles",srclang:O.language,src:O.url},void 0):null]}),void 0)]}),void 0)})));var y=o(64047),_=o(25615),f=o.n(_),j=o(76985),k=o(97913),C=o(12468),w=o(37359),S=o(76622),P=o(66779);const T="TT-vCache";let I=!0;const D=(e,t,o)=>!Array.isArray(e)||e.length<1?[]:e.map((e=>{var i,n,a;return{bitrate:e.Bitrate,definition:null!==(i=e.GearName)&&void 0!==i?i:o,duration:t,url:(a=null===(n=e.PlayAddr)||void 0===n?void 0:n.UrlList,a&&Array.isArray(a)?a.map((e=>({src:e}))):[])}})),O={width:"100%",height:"100%",controls:!1,closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,closePlayerBlur:!0,closeControlsBlur:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoStopPropagation:!0,crossOrigin:"anonymous",ignores:["play","start"]};var R=o(34708),L=o(10354),Z=o(72973),B=o.n(Z),M=o(93797);const F=new class{constructor(){this.engine=null}init(e,t,o){this.engine=new L.Z({meta:Object.assign(Object.assign({},e),{targetLufs:-16}),processorName:"mammon-worklet-processor",processorUrl:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web/tiktok/webapp/main/webapp-desktop/mammon-worklet-processor.min.js",needPcmData:!1},null),this.engine.attachPlayer(t),this.engine.on("ready",(e=>{var t;t={vid:o,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,state:e.state,connectState:e.connectState},M.W.event("volume_norm_ready",t)})),this.engine.on("error",(e=>{var t;t={vid:o,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,error:e.error,state:e.state,connectState:e.connectState},M.W.event("volume_norm_error",t)}))}update(e){this.engine.updateMeta(Object.assign(Object.assign({},e),{targetLufs:-16}))}isSupported(){return L.Z.isSupported()}resume(){this.engine&&this.engine.resume()}testPcmData(){const e=B().getPcmBuffer(this.engine._inputBuffer,this.engine._outputBuffer);B().downloadPcmFile("input",e.inputPcmBuffer),B().downloadPcmFile("output",e.outputPcmBuffer)}};var z;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.AbortRequest="new load request"}(z||(z={}));const A=(e,t)=>{var o,i,n,a,r,l,s,d,c;const u=null!==(i=null===(o=null==e?void 0:e.video)||void 0===o?void 0:o.error)&&void 0!==i?i:null,p=null===(n=null==e?void 0:e.video)||void 0===n?void 0:n.buffered,m=null!==(a=null==e?void 0:e._needFilterFallbackCase)&&void 0!==a&&a,h=null==e?void 0:e.currentTime,g=m&&h>0,v=null==e?void 0:e._resetNeedFilterFallbackCase,x=null==e?void 0:e._videoType,b=null==e?void 0:e._playerType,y=null==e?void 0:e.curDefinition;return{buffered:p,currentTime:h,currentSrc:null!=t?t:null==e?void 0:e.currentSrc,duration:null==e?void 0:e.duration,readyState:null===(r=null==e?void 0:e.video)||void 0===r?void 0:r.readyState,networkState:null===(l=null==e?void 0:e.video)||void 0===l?void 0:l.networkState,error:u?{code:null==u?void 0:u.code,message:null!==(s=null==e?void 0:e.error)&&void 0!==s?s:(null==u?void 0:u.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,videoType:x,playerType:b,needFilterFallbackCase:g,resetNeedFilterFallbackCase:v,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted,videoBitrate:null===(d=y)||void 0===d?void 0:d.bitrate,videoQuality:null===(c=y)||void 0===c?void 0:c.definition}},E=(0,n.memo)((0,n.forwardRef)((function({id:e,url:t,mode:o,muteSetting:s,playProgress:d,duration:c,onLoadStart:m,onLoadedData:h,onCanPlay:v,onPause:x,onPlay:b,onPlaying:_,onTimeUpdate:j,onWaiting:L,onEnded:Z,onError:B,onUnmount:M,onVideoChange:z,subtitleStruct:E,disableDownload:U,usePreload:W,bitrateInfo:V,useBitrate:G,volumeInfo:q,defaultDefinition:$},N){const{bitrateConfig:H}=(0,p.m7)((0,R.L)((()=>["bitrateConfig"]),[])),[Y,Q]=(0,n.useState)(!1),J=(0,n.useRef)(!1),K=(0,n.useRef)(null),{shouldUseVideoNormalization:X,playbackNormalizePath:ee}=(0,a.FH)(),te=(0,n.useMemo)((()=>{var e;const t=window.location.href,o=(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)||1,i=null===(e=null==ee?void 0:ee.path)||void 0===e?void 0:e.some((e=>t.includes(e)));return!!(X&&F.isSupported()&&i&&o>4)}),[window.location.href]),[{mute:oe,volume:ie},{setMute:ne,setMuteSetting:ae}]=(0,r.b7)(g.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),re=(0,l.fz)(k.Re),le=re.getPreloadUrls(),se=(0,u.vN)(le,$);(0,n.useEffect)((()=>{const i=(e=>{const{id:t,mode:o,preloadUrlsList:i,url:n,volume:a,onAutoplayFailed:r,disableDownload:l,usePreload:s,videoDuration:d,bitrateConfig:c,bitrateInfo:u,useBitrate:p,defaultDefinition:m}=e,h=`xgwrapper-${o}-${t}`,g=Object.assign({url:n,id:h,autoplay:I,vid:`${T}-${t}`,plugins:p?[P.Z,S.Z]:[S.Z],volume:a,defaultDefinition:m,defaultBitrate:1e3,duration:d,enableContextmenu:!l,definition:{list:D(u,d,m)},bitrateselector:c,Mp4EncryptPlayer:{minBufferLength:5,maxBufferLength:15,preloadTime:5,preloadCacheType:1,preloadMaxCacheCount:5,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,xhrSetup(e){e.withCredentials=!0}}},O),v=new C.ZP(g);return v._videoType="mp4",v._playerType="xgplayer",s&&(null==i?void 0:i.length)&&v.plugins.mp4encryptplayer.addPreloaderList((e=>{const t=[];return e.forEach(((e,o)=>{const i=((e,t)=>{if(!Array.isArray(e)||e.length<1)return{};const o=e[0].id;return{order:t,data:{vid:`${T}-${o}`,payload:e.map((e=>({url:e.url,definition:e.definition,bitrate:e.bitrate,duration:e.duration}))),preloadTime:5}}})(e,o);t.push(i)})),t})(i)),s&&v.on("PRELOAD_INFO",(e=>{const o=(0,k.Ld)();null==o||o.setPreloadCacheInfo(t,e)})),v.on("playCatch",(e=>{v._videoType=e,v._playerType="defaultPlayer",v._needFilterFallbackCase=!0})),v.on(w.lB,(()=>{null==r||r(),setTimeout((()=>{try{v.play()}catch(e){console.error("handle xgplayer autoplay error...")}}),0)})),v._resetNeedFilterFallbackCase=()=>{v._needFilterFallbackCase=!1},I=!1,v})({id:e,url:t,mode:o,volume:ie,preloadUrlsList:se,disableDownload:U,usePreload:W,useBitrate:G,videoDuration:null!=c?c:0,bitrateInfo:V,bitrateConfig:H,defaultDefinition:$,onAutoplayFailed:()=>{ne(!0)}});K.current=i,Q(!0)}),[e,t,o,re,ne,W,G,$]);const de=(0,r.mp)(g.x,{selector:e=>e.playing,dependencies:[]});(0,n.useImperativeHandle)(N,(()=>{const e=K.current;return{play:()=>(0,y.__awaiter)(this,void 0,void 0,(function*(){F&&te&&void 0!==(null==q?void 0:q.Peak)&&(null==F||F.resume());try{(null==e?void 0:e.isCanplay)?yield null==e?void 0:e.play():null==e||e.once("canplay",(()=>(0,y.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.play()}))))}catch(e){console.error("Video play error: ",e)}})),pause:()=>{try{null==e||e.pause()}catch(e){console.error("Video pause error: ",e)}},seek:t=>{if(e){const{duration:o}=e;e.currentTime=o*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.on("seeked",t)},onSeeking:t=>{null==e||e.on("seeking",t)},onTimeUpdate:t=>{null==e||e.on("timeupdate",(()=>{var o,i;const n=null!==(o=e.currentTime)&&void 0!==o?o:0,a=null!==(i=e.duration)&&void 0!==i?i:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.on("canplay",t)},getPlayerAttributes:()=>A(e,t)}}));const ce=(0,n.useCallback)(((e=0)=>(0,y.__awaiter)(this,void 0,void 0,(function*(){var t,o,i,n,a;if(!(e>=3))try{(null===(t=K.current)||void 0===t?void 0:t.isCanplay)?yield null===(o=K.current)||void 0===o?void 0:o.play():null===(i=K.current)||void 0===i||i.once("canplay",(()=>(0,y.__awaiter)(this,void 0,void 0,(function*(){var e;yield null===(e=K.current)||void 0===e?void 0:e.play()}))))}catch(t){const o=null!==(n=t.message)&&void 0!==n?n:"",i=o.indexOf("new load request")>-1,r=null!==(a=o.match("failed because the user didn't interact with the document first."))&&void 0!==a?a:o.match("The request is not allowed by the user agent or the platform in the current context");if(i)return;r?(ne(!0),setTimeout((()=>{ce(e+1)}),0)):ce(e+1)}}))),[ne]),ue=(0,n.useCallback)((()=>{var e;try{(null===(e=K.current)||void 0===e?void 0:e.replay)&&K.current.replay()}catch(e){setTimeout((()=>{ne(!0)}),0)}}),[ne]);(0,n.useEffect)((()=>{Y&&K.current&&(F&&te&&void 0!==(null==q?void 0:q.Peak)&&(null==F||F.resume()),K.current.muted=oe,K.current.volume=ie)}),[Y,oe,ie]),(0,n.useEffect)((()=>{const e=K.current;ae(s),Y&&ce(),e&&Math.abs(e.currentTime-d)>.2&&(e.currentTime=d)}),[s,d,ce,ae,Y]);const pe=(0,n.useCallback)((e=>{Y&&(null==L||L(e))}),[Y,L]);(0,n.useEffect)((()=>{const t=K.current;if(void 0!==(null==q?void 0:q.Peak)&&Y&&te){const o={peak:q.Peak,loudness:q.Loudness};F.init(o,t,e)}}),[Y,e]);const me=(0,n.useCallback)((e=>{Y&&(null==Z||Z(e),ue())}),[Y,Z,ue]),he=(0,n.useMemo)((()=>new Map([["loadstart",m],["loadeddata",h],["timeupdate",j],["error",B],["canplay",v],["pause",x],["play",b],["playing",_],["waiting",pe],["ended",me]])),[me,pe,v,B,m,h,x,b,_,j]);return(0,n.useEffect)((()=>{var e;if(Y){for(const[t,o]of he)null===(e=K.current)||void 0===e||e.on(t,null!=o?o:f());return()=>{var e,t;if(null===(e=K.current)||void 0===e?void 0:e.off)for(const[e,o]of he)null===(t=K.current)||void 0===t||t.off(e,null!=o?o:f())}}}),[Y,he]),(0,n.useEffect)((()=>{var e;de?J.current&&(J.current=!1,ce()):(J.current=!0,null===(e=K.current)||void 0===e||e.pause())}),[de,ce]),(0,n.useEffect)((()=>()=>{M(A(K.current,t))}),[]),(0,n.useEffect)((()=>()=>{var e,t;Q(!1),(null===(e=K.current)||void 0===e?void 0:e.cancelPreloadTask)&&K.current.cancelPreloadTask(),(null===(t=K.current)||void 0===t?void 0:t.destroy)&&K.current.destroy(),K.current=null,null==z||z(!1)}),[e,t,o,z]),(0,i.jsx)("div",Object.assign({id:`xgwrapper-${o}-${e}`,className:"xgplayer-container"},{children:4===o&&E?(0,i.jsx)("track",{default:!0,kind:"subtitles",srclang:E.language,src:E.url},void 0):null}),void 0)}))),U=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:o,playUrl:a,id:h,teaParams:b,index:_,mode:C,itemMute:w,desc:S,duration:P,onVideoPause:T=f(),onVideoPlaying:I=f(),onVideoPlay:D,onVideoEnded:O,onVideoError:R,onTimeUpdate:L,onVideoInit:Z=f(),e2eTag:B,subtitleStruct:M,disableDownload:F=!0,usePreload:z,volumeInfo:A=f(),useBitrate:U,bitrateInfo:W},V){const{currentVideo:G,playProgress:q}=(0,r.mp)(x.f),$=(0,l.fz)(s.e),N=(0,l.fz)(d.k),H=(0,l.fz)(c.KF),Y=(0,n.useRef)(null),Q=(0,n.useRef)(null),[J,K]=(0,n.useState)(!1),[X,ee]=(0,n.useState)(a);(0,n.useEffect)((()=>{const{id:e,mode:t}=null!=G?G:{};e===h&&C===t||ee(a)}),[G,h,C,a]);const te=(0,n.useCallback)((()=>{var e,t;try{null===(t=null===(e=Y.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}catch(e){}}),[]),oe=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=Y.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),ie=(0,n.useMemo)((()=>{if(!G)return!1;const{id:e,index:t,mode:o}=G;return e===h&&t===_&&o===C}),[h,_,C,G]);(0,n.useImperativeHandle)(V,(()=>({play:()=>{te(),Q.current=!0},pause:()=>{oe(),Q.current=!1,$.triggerPause({enter_method:"click_pause",playMode:C})},seek:e=>{var t;null===(t=Y.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=Y.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=Y.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=Y.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=Y.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return ie&&J}})),[J,ie,C,oe,te,$]),(0,n.useEffect)((()=>{ie||K(!1)}),[ie]);const ne=(0,u.Mz)();(0,n.useEffect)((()=>{const e=null===Q.current||Q.current;ne&&e?te():(oe(),ie&&!ne&&$.triggerPause({enter_method:"switch_tab",playMode:C}))}),[ne,te,oe,$,ie,C]);const ae=(0,n.useMemo)((()=>{var e;const{videoQuality:t}=(0,p.m7)(null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes()),{definition:o}=b;return(0,j.tX)(t,o)}),[b]),re=(0,n.useCallback)((()=>{var e;const t=(0,p.m7)(null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes()),{videoBitrate:o,videoQuality:i}=t,n=(0,y.__rest)(t,["videoBitrate","videoQuality"]),{bitrate:a,author_id:r,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,secret:m,forFriend:g}=b;return Object.assign({id:h,authorId:r,playMode:C,bitrate:null!=o?o:a,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,definition:ae,secret:m,forFriend:g},null!=n?n:{})}),[h,C,b,ae]),{mute:le}=(0,r.mp)(g.x),se=(0,n.useMemo)((()=>{const{group_id:e,author_id:t,is_scheduled:o,search_id:i,search_keyword:n,search_result_id:a,question_id:r}=b;return{itemId:e,authorId:t,isScheduled:Boolean(o),autoplayStatus:1,searchId:i,searchKeyword:n,searchResultId:a,questionId:r,playMode:C,isMute:le}}),[C,le,b]),de=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:o=0}=(0,p.m7)(null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},se),{currentTime:t,duration:o})}),[se]),{loading:ce,handleCanPlayWithLoading:ue,handlePauseWithLoading:pe,handlePlayingWithLoading:me,handleWaitingWithLoading:he}=(0,u.Fk)({isCurrentVideo:ie}),ge=(0,n.useCallback)((()=>{N.handleLoadStart(re())}),[N,re]),ve=(0,n.useCallback)((()=>{N.handleLoadedData(re())}),[N,re]),xe=(0,n.useCallback)((()=>{ue(),K(!0),null==Z||Z(!0),H.getCurrentPageReport()||(H.reportVideoFirstScreen({endTime:Date.now(),videoSource:X}),H.reportVideoAddition({endTime:Date.now(),videoSource:X}))}),[ue,Z,H,X]),be=(0,n.useCallback)((e=>{N.handlePlay(),null==D||D(e)}),[N,D]),ye=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:o=0,needFilterFallbackCase:i,resetNeedFilterFallbackCase:n,videoType:a,playerType:r}=(0,p.m7)(null===(e=Y.current)||void 0===e?void 0:e.getPlayerAttributes()),l=(0,k.Ld)(),{byteLength:s,duration:d}=l.getPreloadCacheInfo(h);$.handleTimeUpdate(de()),N.handleTimeUpdate(Object.assign(Object.assign({},re()),{preload_size:s,preload_time:d,video_type:a,player_type:r,should_filter:i,bitrateInfo:W})),H.getFirstFrameReport()||H.reportVideoFirstFrame(t),i&&(null==n||n()),null==L||L(t/o)}),[$,de,N,re,H,L,h,W]),_e=(0,u.A4)(),fe=(0,n.useCallback)((e=>{var t;null==R||R(e),_e(null===(t=Y.current)||void 0===t?void 0:t.getPlayerAttributes()),$.handleError(se),N.handleError(re())}),[R,_e,$,se,N,re]),je=(0,n.useCallback)((e=>{T(e),pe(),N.handlePause(re()),$.handlePause(de())}),[T,pe,N,re,$,de]),ke=(0,n.useCallback)((e=>{I(e),me(),H.reportVideoInteract({endTime:Date.now(),videoSource:X})}),[I,me,H,X]),Ce=(0,n.useCallback)((()=>{var e,t;he();const o=re(),{buffered:i,currentTime:n=0,duration:a=0}=o,r=(null!==(e=null==i?void 0:i.length)&&void 0!==e?e:0)>0&&null!==(t=null==i?void 0:i.start(0))&&void 0!==t?t:0;Math.abs(r-n)<.5||Math.abs(a-n)<.5||($.handleWaiting(de()),N.handleWaiting(re()))}),[de,re,he,$,N]),we=(0,n.useCallback)((e=>{null==O||O(e),$.handleEnded(se),N.handleEnded()}),[O,$,se,N]),Se=(0,n.useCallback)((e=>{const t=(0,k.Ld)(),{byteLength:o,duration:i}=t.getPreloadCacheInfo(h);$.handlePlayTime(se),N.reset(h,Object.assign(Object.assign(Object.assign({},re()),e),{preload_size:o,preload_time:i}))}),[re,h,$,se,N]);(0,n.useEffect)((()=>{ie||null==T||T({})}),[ie,T]);const Pe=(0,n.useCallback)((()=>{null==Z||Z()}),[Z]),Te=o||2===C||3===C||4===C,Ie=(0,n.useMemo)((()=>{const{videoQuality:e,definition:t}=b;return e&&t?`${e}_${t.substring(0,t.length-1)}_0`:"unknown_definition"}),[b]);return(0,i.jsxs)(v.wu,Object.assign({horizontal:o,mode:C},{children:[e?(0,i.jsx)(v.TF,{horizontal:Te,mode:C,src:e,alt:S,loading:t?"lazy":"eager"},void 0):null,ie&&(0,i.jsxs)(v.Kp,Object.assign({horizontal:Te,"data-e2e":B},{children:[(0,i.jsx)(E,{ref:Y,id:h,url:X,mode:C,muteSetting:w||m.P[C].forceMute,defaultMute:m.P[C].defaultMute,playProgress:null!=q?q:0,duration:P,onUnmount:Se,onLoadStart:ge,onLoadedData:ve,onTimeUpdate:ye,onError:fe,onCanPlay:xe,onPause:je,onPlay:be,onPlaying:ke,onWaiting:Ce,onEnded:we,onVideoChange:Pe,subtitleStruct:M,disableDownload:F,usePreload:z,volumeInfo:A,useBitrate:U,bitrateInfo:W,defaultDefinition:Ie},void 0),ce&&(0,i.jsx)(v.Nm,{},void 0)]}),void 0)]}),void 0)}))),W=(0,n.memo)((0,n.forwardRef)((function(e,t){const o=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({play:()=>{var e,t;(null===(e=o.current)||void 0===e?void 0:e.play)&&(null===(t=o.current)||void 0===t||t.play())},pause:()=>{var e,t;(null===(e=o.current)||void 0===e?void 0:e.pause)&&(null===(t=o.current)||void 0===t||t.pause())},seek:e=>{var t,i;(null===(t=o.current)||void 0===t?void 0:t.seek)&&(null===(i=o.current)||void 0===i||i.seek(e))},seekTime:e=>{var t,i;(null===(t=o.current)||void 0===t?void 0:t.seekTime)&&(null===(i=o.current)||void 0===i||i.seekTime(e))},onSeeked:e=>{var t,i;(null===(t=o.current)||void 0===t?void 0:t.onSeeked)&&(null===(i=o.current)||void 0===i||i.onSeeked(e))},onSeeking:e=>{var t,i;(null===(t=o.current)||void 0===t?void 0:t.onSeeking)&&(null===(i=o.current)||void 0===i||i.onSeeking(e))},onTimeUpdate:e=>{var t,i;(null===(t=o.current)||void 0===t?void 0:t.onTimeUpdate)&&(null===(i=o.current)||void 0===i||i.onTimeUpdate(e))},get currentTime(){var e,t;return null!==(t=null===(e=o.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=o.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=o.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}})));const{isUseNativePlayer:r,isUsePreload:l,isUseAdaptBitrate:s}=(0,a.It)();return r?(0,i.jsx)(b,Object.assign({},e,{ref:o}),void 0):(0,i.jsx)(U,Object.assign({},e,{usePreload:l,useBitrate:s,ref:o}),void 0)})))},58869:(e,t,o)=>{o.d(t,{wu:()=>a,TF:()=>r,Kp:()=>l,Nm:()=>s,Ex:()=>d});var i=o(32913),n=o(30074);const a=(0,i.Z)("div",{target:"e1yey0rl0"})((({horizontal:e,mode:t})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:"rgba(22, 24, 35, .06)",backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),r=(0,i.Z)("img",{target:"e1yey0rl1"})((({horizontal:e,mode:t})=>2!==t&&3!==t&&4!==t?{width:"100%",height:"100%",objectFit:"cover"}:{width:"100%",height:"100%",objectFit:e?"contain":"cover"}),"label:ImgPoster;"),l=(0,i.Z)("div",{target:"e1yey0rl2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),s=(0,i.Z)(n.g,{target:"e1yey0rl3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:StyledLoading;"),d=(0,i.Z)("video",{target:"e1yey0rl4"})((({horizontal:e})=>({display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"})),"label:VideoBasic;")},36761:(e,t,o)=>{o.d(t,{Q:()=>l});var i=o(9236),n=o(16494),a=o(84785),r=o(24878);function l({item:e,onShow:t}){var o,l,s;const{lang:d}=(0,i.mp)(a.G,{selector:e=>({lang:e.lang}),dependencies:[]}),c=(0,i.mp)(r.z,{selector:t=>{var o,i,n;return null!==(n=null===(i=t.users[null!==(o=null==e?void 0:e.author)&&void 0!==o?o:""])||void 0===i?void 0:i.id)&&void 0!==n?n:""},dependencies:[null==e?void 0:e.author]}),u=(0,i.mp)(r.z,{selector:t=>{var o;return t.users[null!==(o=null==e?void 0:e.author)&&void 0!==o?o:""]},dependencies:[null==e?void 0:e.author]}),{handleShowReport:p}=(0,n.Q)({onShow:t,reportTarget:{lang:d,object_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",owner_id:c,object_owner_id:c,nickname:null!==(l=null==e?void 0:e.nickname)&&void 0!==l?l:null==e?void 0:e.author,video_id:null!==(s=null==e?void 0:e.id)&&void 0!==s?s:"",video_owner:u,report_type:"video"}});return p}},41624:(e,t,o)=>{o.d(t,{SV:()=>i});const i=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"]},58500:(e,t,o)=>{o.d(t,{y:()=>l});var i,n,a=o(64047),r=o(93797);!function(e){e.ClickComment="click_comment_button",e.LikeComment="like_comment",e.CancelLikeComment="cancel_like_comment",e.PostComment="post_comment",e.SearchCommentEmoji="search_comment_emoji",e.SearchCommentAt="search_comment_at",e.AddCommentAt="add_comment_at",e.VideoCommentShow="video_comment_show",e.ShowMoreReply="show_more_reply",e.TapComment="tap_comment",e.CloseCommentTab="close_comment_tab",e.CloseComment="close_comment",e.KeepEditingComment="keep_editing_comment",e.LeaveCommentPage="leave_comment_page",e.CopyCommentUrl="web_comment_url",e.CloseCommentPanel="close_comment_panel",e.MentionItemShow="tag_mention_head_show"}(i||(i={})),function(e){e.Original="original",e.Reply="reply",e.ReplyToReply="reply_to_reply"}(n||(n={}));const l={handleCommentClick:e=>{r.W.event("click_comment_button",e)},handleCommentLike:e=>{var{isLike:t}=e,o=(0,a.__rest)(e,["isLike"]);const i=t?"like_comment":"cancel_like_comment";r.W.event(i,o)},handlePostComment:e=>{r.W.event("post_comment",e)},handleShowMoreReply:e=>{r.W.event("show_more_reply",e)},handleCommentShow:e=>{r.W.event("video_comment_show",e)},handleSearchAt:e=>{r.W.event("search_comment_at",e)},handleSelectAt:e=>{r.W.event("add_comment_at",e)},handleEmojiSelect:e=>{r.W.event("search_comment_emoji",e)},handleClose:e=>{r.W.event("close_comment",e)},handleLeaveComment:e=>{r.W.event("leave_comment_page",e)},handleKeepComment:e=>{r.W.event("keep_editing_comment",e)},handleCopyCommentUrl:e=>{r.W.event("web_comment_url",e)},handleTapComment:e=>{r.W.event("tap_comment",e)},handleCloseCommentTab:()=>{r.W.event("close_comment_tab",{enter_method:"click_cancel"})},handleCloseCommentPanel:e=>{r.W.event("close_comment_panel",e)},handleMentionItemShow:e=>{r.W.event("tag_mention_head_show",Object.assign(Object.assign({},e),{function:"mention"}))}}},86385:(e,t,o)=>{o.d(t,{V:()=>a});var i,n=o(93797);!function(e){e.EnterText="enter_text",e.CloseText="close_text"}(i||(i={}));const a={handleEnterText:e=>{n.W.event("enter_text",e)},handleCloseText:e=>{n.W.event("close_text",e)}}},3453:(e,t,o)=>{o.d(t,{y:()=>a});var i,n=o(93797);!function(e){e.Report="click_report",e.ReportSubmit="web_report_submit",e.ReportNext="web_choose_report_reason_next"}(i||(i={}));const a={handleShowReport:e=>{n.W.event("click_report",Object.assign(Object.assign({},e),{channel:"web"}))},handleReportSubmit:e=>{n.W.event("web_report_submit",e)},handleReportNext:e=>{n.W.event("web_choose_report_reason_next",e)}}},91036:(e,t,o)=>{o.d(t,{Z:()=>r});var i,n=o(64047),a=o(93797);!function(e){e.ShowProgressBar="show_progress_bar",e.ClickProgressBar="click_progress_bar"}(i||(i={}));const r={handleSeekBarAutoShow:e=>{a.W.event("show_progress_bar",Object.assign(Object.assign({},e),{show_method:"preview"}))},handleSeekBarClick:e=>{var{fromPercent:t,toPercent:o,video_length:i}=e,r=(0,n.__rest)(e,["fromPercent","toPercent","video_length"]);const l=o>t?"front":"back",s=i*t,d=i*o;a.W.event("click_progress_bar",Object.assign({action_type:l,seek_from:s,seek_to:d,video_length:i},r))}}},14563:(e,t,o)=>{o.d(t,{$:()=>r});var i,n=o(93797);!function(e){e.SwitchSound="switch_sound",e.UnmuteButtonShow="unmute_show",e.UnmuteButtonClicked="unmute_click",e.VolumeChange="volume_change"}(i||(i={}));const a={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper-mode",4:"video-detail"},r={handleSwitchSound:e=>{const{muted:t,playMode:o,enter_method:i="click",volume_from:r,volume_to:l}=e;void 0!==r&&void 0!==l?n.W.event("switch_sound",{sound_mode:l>r?"adjust_up":"adjust_down",play_mode:a[o],enter_method:i,volume_from:r,volume_to:l}):n.W.event("switch_sound",{sound_mode:t?"off":"on",play_mode:a[o],enter_method:i})},handleVideoUnmuteButtonShow:()=>{n.W.event("unmute_show")},handleVideoUnmuteButtonClicked:()=>{n.W.event("unmute_click")},handleVolumeChange:e=>{const{volume_from:t=0,volume_to:o=0,click_mute:i=!1}=e;n.W.event("volume_change",{volume_change:i?0:Number((o-t).toFixed(4)),volume_level:o,click_mute:i})}}},74920:(e,t,o)=>{o.d(t,{X:()=>p});var i=o(11040),n=o(91051),a=o(42875),r=o(7998),l=o(27918);const s=(0,r.Z)("label",{target:"e8efyri0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"14px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),d=(0,r.Z)("div",{target:"e8efyri1"})({color:"#fff",position:"relative"},"label:DivCheckboxSymbol;"),c=(0,r.Z)("input",{target:"e8efyri2"})((({selected:e,theme:t,theme:{direction:o}})=>[Object.assign({appearance:"none",border:`1.5px solid ${t.colors.LineSecondary}`,margin:"0 0 -2.5px 0",cursor:"pointer"},e?{border:"none",backgroundColor:t.colors.Primary}:{}),(0,l.YJ)({direction:o,marginEnd:4})]),"label:InputCheckbox;"),u=(0,r.Z)("div",{target:"e8efyri3"})((({theme:{direction:e}})=>[{pointerEvents:"none",position:"absolute",top:"3px"},(0,l.YJ)({direction:e,start:3})]),"label:DivCheckboxIcon;"),p=(0,n.memo)((function({id:e,value:t,label:o,size:r=16,isCircle:l=!0,disabled:p,style:m,e2eTag:h,onChange:g}){const v=r,x=r-6,b=(0,n.useCallback)((e=>{null==g||g(e.target.checked)}),[g]);return(0,i.jsxs)(s,Object.assign({htmlFor:e,style:m,"data-e2e":h},{children:[(0,i.jsxs)(d,Object.assign({className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,i.jsx)(c,{style:{width:v,height:v,borderRadius:l?v/2:0},selected:t,id:e,checked:t,type:"checkbox",disabled:p,onChange:b},void 0),t&&(0,i.jsx)(u,Object.assign({style:{width:x,height:x}},{children:(0,i.jsx)(a.Z,{width:x,height:x},void 0)}),void 0)]}),void 0),o]}),void 0)}))},45802:(e,t,o)=>{o.d(t,{Z:()=>i});const i=[{emoji:"😀",alias:"grinning"},{emoji:"😃",alias:"smiley"},{emoji:"😄",alias:"smile"},{emoji:"😁",alias:"grin"},{emoji:"😆",alias:"laughing"},{emoji:"😅",alias:"sweat_smile"},{emoji:"🤣",alias:"rofl"},{emoji:"😂",alias:"joy"},{emoji:"🙂",alias:"slightly_smiling_face"},{emoji:"🙃",alias:"upside_down_face"},{emoji:"😉",alias:"wink"},{emoji:"😊",alias:"blush"},{emoji:"😇",alias:"innocent"},{emoji:"😍",alias:"heart_eyes"},{emoji:"😘",alias:"kissing_heart"},{emoji:"😗",alias:"kissing"},{emoji:"😚",alias:"kissing_closed_eyes"},{emoji:"😙",alias:"kissing_smiling_eyes"},{emoji:"😋",alias:"yum"},{emoji:"😛",alias:"stuck_out_tongue"},{emoji:"😜",alias:"stuck_out_tongue_winking_eye"},{emoji:"😝",alias:"stuck_out_tongue_closed_eyes"},{emoji:"🤑",alias:"money_mouth_face"},{emoji:"🤗",alias:"hugs"},{emoji:"🤔",alias:"thinking"},{emoji:"🤐",alias:"zipper_mouth_face"},{emoji:"😐",alias:"neutral_face"},{emoji:"😑",alias:"expressionless"},{emoji:"😶",alias:"no_mouth"},{emoji:"😏",alias:"smirk"},{emoji:"😒",alias:"unamused"},{emoji:"🙄",alias:"roll_eyes"},{emoji:"😬",alias:"grimacing"},{emoji:"🤥",alias:"lying_face"},{emoji:"😌",alias:"relieved"},{emoji:"😔",alias:"pensive"},{emoji:"😪",alias:"sleepy"},{emoji:"🤤",alias:"drooling_face"},{emoji:"😴",alias:"sleeping"},{emoji:"😷",alias:"mask"},{emoji:"🤒",alias:"face_with_thermometer"},{emoji:"🤕",alias:"face_with_head_bandage"},{emoji:"🤢",alias:"nauseated_face"},{emoji:"🤧",alias:"sneezing_face"},{emoji:"😵",alias:"dizzy_face"},{emoji:"🤠",alias:"cowboy_hat_face"},{emoji:"😎",alias:"sunglasses"},{emoji:"🤓",alias:"nerd_face"},{emoji:"😕",alias:"confused"},{emoji:"😟",alias:"worried"},{emoji:"🙁",alias:"slightly_frowning_face"},{emoji:"😮",alias:"open_mouth"},{emoji:"😯",alias:"hushed"},{emoji:"😲",alias:"astonished"},{emoji:"😳",alias:"flushed"},{emoji:"😦",alias:"frowning"},{emoji:"😧",alias:"anguished"},{emoji:"😨",alias:"fearful"},{emoji:"😰",alias:"cold_sweat"},{emoji:"😥",alias:"disappointed_relieved"},{emoji:"😢",alias:"cry"},{emoji:"😭",alias:"sob"},{emoji:"😱",alias:"scream"},{emoji:"😖",alias:"confounded"},{emoji:"😣",alias:"persevere"},{emoji:"😞",alias:"disappointed"},{emoji:"😓",alias:"sweat"},{emoji:"😩",alias:"weary"},{emoji:"😫",alias:"tired_face"},{emoji:"😤",alias:"triumph"},{emoji:"😡",alias:"rage"},{emoji:"😠",alias:"angry"},{emoji:"😈",alias:"smiling_imp"},{emoji:"👿",alias:"imp"},{emoji:"💀",alias:"skull"},{emoji:"💩",alias:"hankey"},{emoji:"🤡",alias:"clown_face"},{emoji:"👹",alias:"japanese_ogre"},{emoji:"👺",alias:"japanese_goblin"},{emoji:"👻",alias:"ghost"},{emoji:"👽",alias:"alien"},{emoji:"👾",alias:"space_invader"},{emoji:"🤖",alias:"robot"},{emoji:"😺",alias:"smiley_cat"},{emoji:"😸",alias:"smile_cat"},{emoji:"😹",alias:"joy_cat"},{emoji:"😻",alias:"heart_eyes_cat"},{emoji:"😼",alias:"smirk_cat"},{emoji:"😽",alias:"kissing_cat"},{emoji:"🙀",alias:"scream_cat"},{emoji:"😿",alias:"crying_cat_face"},{emoji:"😾",alias:"pouting_cat"}]}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2726],{67503:function(e,t,n){n.d(t,{Z:function(){return B}});var r=n(48193),a=n(52148),i=n(36788),o=n(27378),l=n(28944),u=n(44381),d={localhostError:"MediaPlayer is not available on localhost. Try localhost.bbc.com"},c={default:{NO_JS_REASON:"This video can not be played",NO_JS_MESSAGE:"To play this video you need to enable JavaScript in your browser."},cy:{NO_JS_REASON:"Methu chwarae'r fideo",NO_JS_MESSAGE:"I wylio'r fideo yma, mae'n rhaid galluogi JavaScript yn y porwr."},gd:{NO_JS_REASON:"Cha ghabh am bhideo seo cluiche",NO_JS_MESSAGE:"Feumar cead a thoirt do JavaScript sa bhrabhsair agad 'son am bhideo fhaicinn."}},s=n(80734),m=()=>s.Z&&window.location.hostname,p=n(77283),y=n(50378),v=n(51396),h=n(73084);function f(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}var g={playing:"started",pause:"paused",playlistEnded:"ended"},b=Object.keys(g),w=function(){var e,t=(e=function*(e){var{uasClient:t,smpEventName:n,currentTime:r,hostname:a,activityData:i}=e;if(b.includes(n)&&(e=>(null==e?void 0:e.resourceDomain)&&(null==e?void 0:e.resourceId)&&(null==e?void 0:e.resourceType)&&(null==e?void 0:e.actionContext)&&(null==e?void 0:e.url))(i)&&(0,v.Z)()&&(0,h.w$)()){var o=(0,p.Z)().withAction(g[n]).withResourceDomain(i.resourceDomain).withResourceId(i.resourceId).withResourceType(i.resourceType).withActionContext("".concat(i.actionContext,"#").concat(Math.floor(r))).withUrl("https://".concat(a).concat(i.url)).build();try{yield t.post(o)}catch(l){console.error(l)}}},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,l,"next",e)}function l(e){f(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),E=n(58760);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){S(i,r,a,o,l,"next",e)}function l(e){S(i,r,a,o,l,"throw",e)}o(void 0)}))}}var C=["initialised","continuousPlay.play","continuousPlayCountdownStarted","playing","pause","ended","fullscreenEnter","fullscreenExit","playlistEnded","playlistStopped","mediaItemChanged"],j=(0,a.default)("div",{target:"e1h75hkw3",label:"MediaPlayerWrapper"})(""),x=(0,a.default)("div",{target:"e1h75hkw2",label:"Container"})("height:",(e=>{var{height:t}=e;return t}),";padding-bottom:",(e=>{var{height:t}=e;return t?"0":"".concat(56.25,"%;")}),";width:100%;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";html.no-js &{display:none;}"),T=(0,a.default)("div",{target:"e1h75hkw1",label:"Error"})({name:"19997jf",styles:"display:flex;justify-content:center;align-items:center;padding:32px"}),N=(0,a.default)("div",{target:"e1h75hkw0",label:"LogoIconWrapper"})("width:",30,"%;padding-top:",(e=>{var{height:t}=e;return"".concat(t?4.180743243243244:23.868243243243246,"%;")}),";margin:0 auto;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";opacity:0.2;"),D=function(){var e=_((function*(e){if(!e.isAdvertisingEnabled)return!1;var t=e=>e.items.some((e=>e.isAdvertisingAllowed)),n=t(e),r=e.continuousPlay&&e.continuousPlay.mediaList&&e.continuousPlay.mediaList.some(t);return!(!n&&!r)&&(window.dotcom&&!window.dotcom.ads&&(yield new Promise((e=>setTimeout(e,200)))),window.dotcom&&window.dotcom.ads&&(yield window.dotcom.ads.enabled()))}));return function(t){return e.apply(this,arguments)}}(),L=e=>{var{analytics:t}=e;return t&&t.page?t.page.name:void 0},R=e=>{var{items:t,analytics:n}=e;if(n&&0!==t.length){var{page:{destination:r,producer:a}}=n;return{clipPID:t[0].id,destination:r,producer:a}}},k=e=>e?"allowed":void 0,J=(e,t)=>{var n=e.items[0];if(n){var{id:r,holdingImageUrl:a,title:i,duration:o,durationFormatted:l,kind:u,guidance:d,isEmbeddingAllowed:c,isAdvertisingAllowed:s}=n,m=[{vpid:r,kind:u,duration:o}];return t&&s&&m.unshift({kind:"advert"}),{title:i,holdingImageURL:a,guidance:d,date:l,embedRights:k(c),items:m}}},M=e=>{var{media:t,onwardJourneyOptions:n,hasAds:r}=e;if(t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1)return((e,t,n)=>({html:"name:onwardJourney.js",data:{name:"smp.plugin.continuousplay.playlistSetChanged",data:O({items:e.map((e=>({playlist:J(e,n),counterName:L(e),statsObject:R(e)})))},t)}}))(t.continuousPlay.mediaList,n,r)},U=e=>{var{hasAds:t,initialAdTag:n}=e;if(t)return{html:"name:dfpAds.js",data:{name:"AdsPluginParameters",data:{adTag:n}}}},I=e=>{var{unmutePluginEnabled:t}=e;return t?{html:u}:void 0},K=(e,t,n)=>{C.forEach((n=>{e.bind(n,(e=>t({name:n,data:e})))}));var r=!1;if(e.bind("showCta",(()=>{r||(r=!0,window.performance.mark("media-player-ready-to-play"))})),e.bind("initialised",(()=>window.performance.mark("media-player-initialised"))),n){var a=function(){var t=_((function*(){var t=yield window.dotcom.ads.getAdTag();e.dispatchEvent("bbc.smp.plugins.ads.event.updateAdTag",{adTag:t})}));return function(){return t.apply(this,arguments)}}();e.bind("playlistLoaded",(()=>{a()}))}},Z=e=>{var t=e.items.find((e=>e.adCampaignKeyword));return t?t.adCampaignKeyword:null},G=e=>{var t=(0,o.useRef)(e),n=(0,o.useRef)();return(0,o.useEffect)((()=>{if(t.current=e,e||(n.current=null),e&&!n.current){var r=(null==e?void 0:e.environment)||"live",a=null==e?void 0:e.apiKey;n.current=((e,t,n)=>e&&t&&n?(0,y.Z)({apiKey:n,environment:e,activityType:"plays",isDotCom:t.endsWith(".com"),tokenRefreshToggle:!0}):null)(r,m(),a)}}),[e]),[n,t]},B=e=>{var{media:t,uiOptions:n={},onwardJourneyOptions:a={},height:u=0,onStateChanged:s,onMediaChanged:p,shouldAutoplay:y,shouldDelayEmbed:v=!1,shouldPauseMedia:h=!1,forcePlaceholder:f=!1,activityData:g,experimentalShouldAutoPlayMuted:b=!1}=e,P=(0,o.useRef)(),A=(0,o.useRef)();A.current=s;var S=(0,r.V)("//emp.bbci.co.uk/emp/bump-4/bump-4"),C=(0,i.Qg)(),k=(0,o.useRef)(t.currentlyPlayingKey),B=(0,o.useRef)(t.isAdvertisingEnabled),[W,F]=G(g),H=b,Q=u<=0,V=c[C]||c.default,$="localhost"===m(),q=(0,o.useMemo)((()=>$?o.createElement(T,null,d.localhostError):null),[$]),z=(0,o.useRef)();return y&&z.current&&z.current.captureIntent(),(0,o.useEffect)((()=>{if(S&&!q&&!f&&!z.current){var e=e=>{var n,r,{name:a,data:i}=e;F.current&&w({uasClient:W.current,smpEventName:a,currentTime:null==z||null===(n=z.current)||void 0===n||null===(r=n.player)||void 0===r?void 0:r.currentTime(),hostname:m(),activityData:F.current});var o="continuousPlay.play"===a,l=i&&void 0!==i.index,u=t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1;o&&l&&u&&(k.current=t.continuousPlay.mediaList[i.index].key,p&&p({index:i.index})),A.current&&A.current({name:a,data:i})},r=function(){var r=_((function*(){var r=yield D(t);if(r){var i=Z(t);window.dotcom.setConfig("adCampaign",i)}var o=r?yield window.dotcom.ads.getAdTag():void 0,l=O(O({},n),{},{locale:O({lang:C},n.locale)});z.current=S.player(P.current,((e,t,n,r,a,i,o,l)=>{return{product:"generic",plugins:{toLoad:(u={media:e,onwardJourneyOptions:n,hasAds:r,initialAdTag:a,unmutePluginEnabled:i},[M(u),U(u),I(u)].filter(Boolean))},superResponsive:o,enableToucan:e.isToucanEnabled||!1,playlistObject:J(e,r),ui:t,statsObject:R(e),counterName:L(e),externalEmbedCode:e.externalEmbedUrl?'<iframe width="400" height="500" frameborder="0" src="{url}"></iframe>':void 0,externalEmbedUrl:e.externalEmbedUrl,appName:e.smpAppName,appType:"responsive",mediator:e.mediator,muted:i,delayEmbed:l};var u})(t,l,a,r,o,H,Q,v)),K(z.current,e,r),z.current.load()}));return function(){return r.apply(this,arguments)}}();r()}}),[t,n,S,q,a,p,C,f,F,W,H,Q,v]),(0,o.useEffect)((()=>{if(!q&&z.current){var e=k.current!==t.currentlyPlayingKey,n=B.current!==t.isAdvertisingEnabled;if(e||n){var r=function(){var e=_((function*(){var e=yield D(t);z.current.loadPlaylist(J(t,e),{autoplay:y,counterName:L(t),statsObject:R(t),externalEmbedUrl:t.externalEmbedUrl}),k.current=t.currentlyPlayingKey,B.current=t.isAdvertisingEnabled}));return function(){return e.apply(this,arguments)}}();r()}else((e,t)=>{var{externalEmbedUrl:n}=e.settings();t&&t!==n&&e.settings({externalEmbedUrl:t})})(z.current,t.externalEmbedUrl);var a=function(){var e=_((function*(){if(yield D(t)){var e=Z(t);window.dotcom.setConfig("adCampaign",e)}}));return function(){return e.apply(this,arguments)}}();a()}}),[q,t,y]),(0,o.useEffect)((()=>{!q&&z.current&&h&&z.current.pause()}),[q,h]),o.createElement(j,{"data-chromatic":"ignore"},o.createElement(x,{ref:P,height:u},q,!q&&o.createElement(N,{"data-testid":"bbc-logo-wrapper",height:u},o.createElement(l.Z,{type:"logo:bbc"}))),o.createElement("noscript",null,o.createElement(E.Z,{reason:V.NO_JS_REASON,message:V.NO_JS_MESSAGE,headingLevel:"2",collapseAtMobile:!0})))}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4858],{12305:(e,t,n)=>{n.d(t,{i:()=>u});var o=n(11040),i=n(91051),a=n(4139),l=n(27918);const d=(0,a.Z)("button",{target:"edu4zum0"})((({theme:{colors:e,direction:t},isHorizontal:n=!1})=>[l.Ph,(0,l.YJ)({direction:t,marginEnd:n?"16px":"0px"}),{position:"relative",display:"flex",alignItems:"center",cursor:"pointer",marginBottom:n?"0":"8px",flexDirection:n?"row":"column",":disabled":{cursor:"default",color:e.TextPrimary}}]),"label:ButtonActionItem;"),r=(0,a.Z)("span",{target:"edu4zum1"})((({theme:e,isHorizontal:t=!1})=>[(0,l.YJ)({direction:e.direction,marginEnd:t?"9px":"0px"}),{display:"flex",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"0px",borderRadius:"50%",transition:"all ease-in-out 200ms",opacity:t?"0.9":1}]),"label:SpanIconWrapper;"),s=(0,a.Z)("strong",{target:"edu4zum2"})((({theme:e,isHorizontal:t=!1,normalText:n=!1})=>[(0,l.GI)({theme:e,typography:"P3",fontWeight:t||n?"normal":"bold"}),{textAlign:"center",color:t?"#161823":"#fff"}]),"label:StrongText;"),u=(0,i.memo)((function(e){const{text:t,Icon:n,disabled:i,children:a,e2eTag:l,style:u={},isHorizontal:c=!1,normalText:v=!1}=e;return(0,o.jsxs)(d,Object.assign({isHorizontal:c,type:"button",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:i,style:u},{children:[(0,o.jsx)(r,Object.assign({isHorizontal:c,"data-e2e":`${l}-icon`},{children:n}),void 0),t&&(0,o.jsx)(s,Object.assign({normalText:v,isHorizontal:c,"data-e2e":`${l}-count`},{children:t}),void 0),a]}),void 0)}))},80201:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(11040),i=n(50482),a=n(91051);const l=(0,i.ZP)({resolved:{},chunkName:()=>"animation",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!n.m[t]},importAsync:()=>Promise.all([n.e(8844),n.e(2539),n.e(3641),n.e(1050)]).then(n.bind(n,62142)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve:()=>62142}),d=({likedIcon:e,unlikeIcon:t,isLiked:n})=>{const[i,d]=(0,a.useState)(!1),r=(0,a.useRef)(!1);(0,a.useEffect)((()=>{n&&r.current&&d(n)}),[n]),(0,a.useEffect)((()=>{d(!n),r.current=!0}),[]);const s=(0,a.useCallback)((()=>{d(!1)}),[]);return n?(0,o.jsx)("div",{children:i?(0,o.jsx)(l,{autoplay:!0,onComplete:s},void 0):e},void 0):t}},3451:(e,t,n)=>{n.d(t,{HT:()=>f,q5:()=>L,Xc:()=>S,CE:()=>I,OG:()=>E,PE:()=>M});var o,i=n(9236),a=n(91051),l=n(21041),d=n(34708),r=n(13033),s=n(67862),u=n(14870),c=n(83421),v=n(76967),p=n(61453),m=n(56785),g=n(16929),h=n(14452),_=n(76679),y=n(12285),b=n(58500),w=n(91036),C=n(20390);!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(o||(o={}));const x=e=>{var t,n;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),null===(n=null==e?void 0:e.stopPropagation)||void 0===n||n.call(e)},k=()=>{var e;const{user:t}=null!==(e=(0,d.L)((()=>["user"]),[]))&&void 0!==e?e:{};return{hasLogin:Boolean(t)}},f=({swiperRef:e,videoPlayerRef:t})=>{const{isInputEmpty:n,noReplyUser:o}=(0,i.mp)(s.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),[{loginCTAShowing:l,onboardingShowing:d,leavingModalShowing:r},u]=(0,i.b7)(C._,{selector:({onboardingShowing:e,loginCTAShowing:t,leavingModalShowing:n})=>({onboardingShowing:e,loginCTAShowing:t,leavingModalShowing:n}),dependencies:[]});(0,a.useEffect)((()=>{var t,i,a,s;l||d||r||!n||!o?(null===(i=null===(t=e.current)||void 0===t?void 0:t.disable)||void 0===i||i.call(t),u.setDisabled(!0)):(null===(s=null===(a=e.current)||void 0===a?void 0:a.enable)||void 0===s||s.call(a),u.setDisabled(!1))}),[n,u,r,l,o,d,e,t])};function L({pause:e,setPause:t,videoNumber:n,setVideoNumber:o,group_id:d,handleLikeClick:w,author_id:f,itemListKey:L,videoChangeMethodRef:S,swiperRef:I,teaParams:E}){const{updateVideoNumber:M}=(({setVideoNumber:e})=>{const{hasLogin:t}=k(),n=(0,a.useCallback)((()=>{if(t)r.To.setItem("swiper_login_cta",{videoNumber:0}),e(0);else{const t=r.To.getItem("swiper_login_cta"),{videoNumber:n=0}=null!=t?t:{};r.To.setItem("swiper_login_cta",{videoNumber:n+1}),e(n+1)}}),[t,e]);return(0,a.useEffect)((()=>{n()}),[n]),{updateVideoNumber:n}})({videoNumber:n,setVideoNumber:o}),[{currentIndex:P,disabled:V},T]=(0,i.b7)(C._),{hasLogin:N}=k(),[O,j]=(0,a.useState)(!1),[A,D]=(0,a.useState)(0),[{isInputEmpty:R,noReplyUser:F},{setNeedClearInput:z}]=(0,i.b7)(s.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),{mute:B,setMute:K}=(0,u.s_)(3),H=(0,i.qj)(c.f),U=(0,i.qj)(v.A),$=(0,i.qj)(p.r),q=(0,a.useCallback)((e=>{x(e),K(!B,"keydown")}),[B,K]),Z=(0,a.useRef)(null),Y=(0,a.useCallback)((()=>{var n,o,i,a,l,r;e?(H.updateVideo({currentVideo:{id:d,index:P,mode:3},playProgress:null!==(o=null===(n=Z.current)||void 0===n?void 0:n.currentTime)&&void 0!==o?o:0}),null===(a=null===(i=Z.current)||void 0===i?void 0:i.play)||void 0===a||a.call(i)):null===(r=null===(l=Z.current)||void 0===l?void 0:l.pause)||void 0===r||r.call(l),t(!e)}),[P,d,e,t,H]),G=(0,l.k6)(),Q=(0,a.useRef)(""),W=(0,a.useCallback)(((e,t)=>{!V||O||R&&F||(x(e),D(4),j(!0),T.setLeavingModalShowing(!0),Q.current=t)}),[R,F,O,V,T]),J=(0,a.useCallback)((()=>{T.handleNextVideo(),M()}),[M,T]),X=(0,a.useCallback)((()=>{const e={enter_method:S.current,play_mode:"large_video_mode",group_id:d,author_id:f,skipped_group_num:0,skipped_group_ids:""};y.r.handleVideoChange(e,"next"),"foryou"===L&&y.r.handleHotVideoChange(e,"next")}),[S,d,f,L]),ee=(0,a.useCallback)((()=>{M(),T.handlePrevVideo()}),[M,T]),te=(0,a.useCallback)((()=>{const e={enter_method:S.current,play_mode:"large_video_mode",group_id:d,author_id:f,skipped_group_num:0,skipped_group_ids:""};y.r.handleVideoChange(e,"prev"),"foryou"===L&&y.r.handleHotVideoChange(e,"prev")}),[S,d,f,L]),[{mute:ne},{setMute:oe,setVolume:ie}]=(0,i.b7)(m.x),ae=(0,a.useCallback)((()=>{var e,t;O||(!V||R&&F?(null===(t=null===(e=null==I?void 0:I.current)||void 0===e?void 0:e.slideNext)||void 0===t||t.call(e),ne&&setTimeout((()=>{var e,t;oe(null!==(e=r.Bv.getItem("muted"))&&void 0!==e?e:g.P[3].defaultMute),ie(null!==(t=r.Bv.getItem("volume"))&&void 0!==t?t:g.G)}),400)):(j(!0),T.setLeavingModalShowing(!0),D(3)))}),[R,F,ne,oe,ie,O,V,T,I]),le=(0,a.useCallback)((()=>{var e,t;O||(!V||R&&F?null===(t=null===(e=null==I?void 0:I.current)||void 0===e?void 0:e.slidePrev)||void 0===t||t.call(e):(j(!0),T.setLeavingModalShowing(!0),D(2)))}),[R,F,O,V,T,I]),de=(0,a.useCallback)((e=>{if(!N)return void $.openModal({query:{enter_method:"click_comment"}});const{clientX:t,clientY:n}=e;new h.B(t,n).emit(),U.postLikeVideo({id:d,forceLike:!0,play_mode:"large_video_mode"})}),[d,N,U,$]),re=(0,_.D)((()=>({onClick:Y,onDoubleClick:de})),[Y,de]),se=(0,a.useCallback)(((e,t)=>{const n=Number(t);[38,40].includes(n)&&setTimeout((()=>{T.setOnboardingShowing(!1)}),100);const o=new Map([[32,()=>{Y()}],[76,()=>{w("keydown")}],[77,()=>{q()}]]);o.has(n)&&o.get(n)()}),[T,Y,w,q]),ue=(0,a.useCallback)((e=>{if(V&&!O&&(!R||!F)){const t=e.deltaY>0?3:2;j(!0),T.setLeavingModalShowing(!0),D(t)}}),[R,F,O,V,T]),[ce,ve]=(0,a.useState)(!1),pe=(0,a.useCallback)((()=>{if(V&&!O&&(!R||!F))return D(1),j(!0),void T.setLeavingModalShowing(!0);b.y.handleCloseCommentPanel(Object.assign({},E)),ve(!1)}),[R,F,O,V,T,E]),me=(0,a.useCallback)((()=>{if(V&&!O&&(!R||!F))return D(1),j(!0),void T.setLeavingModalShowing(!0);b.y.handleCommentClick(Object.assign(Object.assign({},E),{action:ce?"close":"open"})),ve(!ce)}),[ce,R,F,O,V,T,E]),ge=(0,a.useCallback)((()=>{switch(j(!1),z(!0),T.setLeavingModalShowing(!1),b.y.handleLeaveComment({group_id:d}),A){case 2:t(!1),setTimeout((()=>{var e;null===(e=I.current)||void 0===e||e.slideTo(Math.max(0,P-1))}),50);break;case 3:t(!1),setTimeout((()=>{var e;null===(e=I.current)||void 0===e||e.slideTo(P+1)}),50);break;case 1:ve(!1);break;case 4:Q.current&&setTimeout((()=>{G.push(Q.current)}),100)}}),[A,P,d,G,z,t,T,I]),he=(0,a.useCallback)((()=>{D(0),j(!1),T.setLeavingModalShowing(!1),b.y.handleKeepComment({group_id:d})}),[d,T]);return{handleLinkClick:W,handleWheel:ue,handleNextVideoStart:J,handlePrevVideoStart:ee,handleNextVideoEnd:X,handlePrevVideoEnd:te,handleClickSwitchToNext:ae,handleClickSwitchToPrev:le,handleKeyDown:se,handleVideoClick:re,preventDefault:x,handleTogglePlay:Y,videoPlayerRef:Z,showLeaveModal:O,isInputEmpty:R,handleConfirmLeave:ge,handleCancelLeave:he,commentActive:ce,handleCloseCommentPanel:pe,handleToggleCommentPanel:me}}const S=({videoChangeMethodRef:e,handleKeyDown:t})=>({handleSlideClick:(0,a.useCallback)(((t,n)=>{const o=n.path.some((e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.className)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,"ButtonSwitchButton")}));e.current=o?"click_button":"click_video_peek"}),[e]),handleSlideScroll:(0,a.useCallback)((()=>{e.current="scroll"}),[e]),handleSlideKeydown:(0,a.useCallback)(((n,o)=>{e.current="keydown",t(n,o)}),[t,e])}),I=({videoPlayerRef:e,pause:t,videoReportParams:n})=>({progressReportCallback:(0,a.useCallback)(((o,i)=>{var a,l;w.Z.handleSeekBarClick(Object.assign({fromPercent:o,toPercent:i,video_length:null!==(l=null===(a=e.current)||void 0===a?void 0:a.duration)&&void 0!==l?l:0,is_pause:t,play_mode:"large_video_mode"},n))}),[t,n,e]),progressPreviewReportCallback:(0,a.useCallback)((()=>{var o,i;w.Z.handleSeekBarAutoShow(Object.assign({video_length:null!==(i=null===(o=e.current)||void 0===o?void 0:o.duration)&&void 0!==i?i:0,is_pause:t,play_mode:"large_video_mode",show_method:"preview"},n))}),[t,e,n])}),E=({refScrollEl:e})=>{(0,a.useEffect)((()=>{const t=e=>{var t;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e)},n=e=>{var t;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e)},o=e.current;return o&&(null==o||o.addEventListener("mousewheel",t),null==o||o.addEventListener("DOMMouseScroll",t),null==o||o.addEventListener("mousedown",n),null==o||o.addEventListener("pointerdown",n),null==o||o.addEventListener("touchstart",n)),()=>{null==o||o.removeEventListener("mousewhell",t),null==o||o.removeEventListener("DOMMouseScroll",t),null==o||o.removeEventListener("mousedown",n),null==o||o.removeEventListener("pointerdown",n),null==o||o.removeEventListener("touchstart",n)}}),[e.current])},M=({setSwiperHeight:e})=>{const t=(0,a.useCallback)((()=>{const t=Math.max(360,document.documentElement.clientHeight-60-56);e(t)}),[e]);(0,a.useEffect)((()=>(window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)})))}},20390:(e,t,n)=>{n.d(t,{_:()=>_});var o=n(64047),i=n(73566),a=n(48185),l=n(19630),d=n(82346),r=n(60595),s=n(93859),u=n(20948),c=n(56979),v=n(53095),p=n(47165),m=n(74472),g=n(83421),h=n(5100);let _=class extends i.D{constructor(e,t,n){super(),this.itemList=e,this.videoPlayer=t,this.videoExperience=n,this.defaultState={currentIndex:0,disabled:!1,itemListKey:null,onboardingShowing:!1,loginCTAShowing:!1,leavingModalShowing:!1}}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){e.currentIndex=t}setDisabled(e,t){e.disabled=t}setOnboardingShowing(e,t){e.onboardingShowing=t}setLoginCTAShowing(e,t){e.loginCTAShowing=t}setLeavingModalShowing(e,t){e.leavingModalShowing=t}handleNextVideo(e){return e.pipe((0,s.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"swiper_slide_next"})})),(0,u.M)(this.state$,this.itemList.state$),(0,c.U)((([e,{itemListKey:t,currentIndex:n},o])=>{var i,a,l;const d=null!==(a=null===(i=o[null!=t?t:""])||void 0===i?void 0:i.browserList)&&void 0!==a?a:[],r=Math.min(n+1,d.length-1);return{newIndex:r,isIndexInvalid:!(null==d?void 0:d.length)||r<0,newId:null!==(l=d[r])&&void 0!==l?l:""}})),(0,s.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,v.z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,p.n)({}))}handlePrevVideo(e){return e.pipe((0,s.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"swiper_slide_prev"})})),(0,u.M)(this.state$,this.itemList.state$),(0,c.U)((([e,{itemListKey:t,currentIndex:n},o])=>{var i,a,l;const d=null!==(a=null===(i=o[null!=t?t:""])||void 0===i?void 0:i.browserList)&&void 0!==a?a:[],r=Math.max(n-1,0);return{newIndex:r,isIndexInvalid:!(null==d?void 0:d.length)||r>d.length-1,newId:null!==(l=d[r])&&void 0!==l?l:""}})),(0,s.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,v.z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,p.n)({}))}handleFirstVideo(e){return e.pipe((0,u.M)(this.state$,this.itemList.state$),(0,c.U)((([e,{itemListKey:t},n])=>{var o,i,a;const l=null!==(i=null===(o=n[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==i?i:[];return{newIndex:0,isIndexInvalid:!(null==l?void 0:l.length)||0>l.length-1,newId:null!==(a=l[0])&&void 0!==a?a:""}})),(0,s.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to first video for some reasons")})),(0,v.z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,p.n)({}))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:n}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:n,mode:3},playProgress:0}),this.getActions().setCurrentIndex(e)]}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setItemListKey",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setCurrentIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setDisabled",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setOnboardingShowing",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLoginCTAShowing",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLeavingModalShowing",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"handleNextVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"handlePrevVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"handleFirstVideo",null),_=(0,o.__decorate)([(0,l.Y)("SwiperModeModule"),(0,o.__metadata)("design:paramtypes",[m.h,g.f,h.KF])],_)}}]);
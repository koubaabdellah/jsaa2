
(function($){var defaultParams={event:'click',external:'/external/',mailto:'/mailtos/',download:'/downloads/',itunes:'/itunes/',extensions:['pdf','doc','xls','csv','jpg','gif','mp3','swf','txt','ppt','zip','gz','dmg','xml'],downloadClasses:[],urlfn:function urlFN(el,ev,opts){var u=el.href||el.action;var jQThis=$(el);if(!u||!u.indexOf)
return"";if((u.indexOf('://')==-1||u.indexOf(window.location.hostname)>1)&&u.indexOf('mailto:')!=0){if(u.indexOf("/download.cfm?")>-1){var title=jQThis.attr("title")||el.innerHTML;return opts.download+title.replace(/<[^>]+>/g,'-').replace(/[^\w]+/g,'-');}
var ext=u.split('.')[u.split('.').length-1];var exts=opts.extensions;for(i=0;i<exts.length;i++){if(ext==exts[i])return opts.download+u;}
for(var i=0;i<opts.downloadClasses.length;i++){if(jQThis.hasClass(opts.downloadClasses[i])){var title=jQThis.attr("title")||el.innerHTML;return opts.download+title.replace(/<[^>]+>/g,'-').replace(/[^\w]+/g,'-');}}}else if(u.indexOf('mailto:')==0){return opts.mailto+u.substring(7);}else if(u.indexOf('itpc://')==0){return opts.itunes+u.replace(/itpc\:\/\/[^\/]*[\/]?/,'');}else{var regex=/([^:\/]+)*(?::\/\/)*([^:\/]+)(:[0-9]+)*\/?/i;var linkparts=regex.exec(u);var urlparts=regex.exec(location.href);if(linkparts[2]!=urlparts[2])return opts.external+u.replace(/[^:\/]+\:\/\//,'');}
return"";}};$.ga=new(function(){window._gaq=window._gaq||[];this.trackEvent=function trackEvent(category,action,label,value,noninteraction){label=label||null;value=value||null;noninteraction=noninteraction||null;window._gaq.push(['_trackEvent',category,action,label,value,noninteraction]);};this.trackURL=function trackURL(url){window._gaq.push(['_trackPageview',url]);};this.encodedLength=function(input){return encodeURIComponent(input).length;};this.setCustomVar=function setCustomVar(slot,name,value,scope){if(this.encodedLength(name)+this.encodedLength(value)>64){var nameLen=64-this.encodedLength(name);var trimmedVal=encodeURIComponent(value).substr(0,nameLen).replace(/(%\w{2})?%\w?$/,"");value=decodeURIComponent(trimmedVal);}
window._gaq.push(['_setCustomVar',slot,name,value,scope]);};this.setTracker=function setTracker(urchin,params){_gaq.push(['_setAccount',urchin]);$(function setupJqueryGA(){params=jQuery.extend(defaultParams,params);$("a").track();$("form").track({event:"submit"});});};})();$.fn.track=function(params){params=jQuery.extend(defaultParams,params);return this.unbind(params.event+'.track').bind(params.event+'.track',function(e){var url=params.urlfn(this,e,params);if(url.length)$.ga.trackURL(url);});};})(jQuery);

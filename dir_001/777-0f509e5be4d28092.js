(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777],{71255:function(e,t,n){"use strict";n.r(t),n.d(t,{CameraKit:function(){return Li},CameraKitSession:function(){return Ii},HandlerChainBuilder:function(){return u},Injectable:function(){return o},LensAssetManifestItem:function(){return be},LensAssetManifestItem_RequestTiming:function(){return Ie},LensAssetManifestItem_Type:function(){return ye},LensAssetsProvider:function(){return Qn},LensRepository:function(){return We},LensSources:function(){return Z},Lens_CameraFacing:function(){return me},Transform2D:function(){return ci},bootstrapCameraKit:function(){return Gi},cameraKitSessionFactory:function(){return gi},cameraKitUserAgent:function(){return Y},configurationToken:function(){return s},createArrayBufferParsingHandler:function(){return Yt},createExtension:function(){return Fi},createHeadersModifyingFetchHandler:function(){return H},createNoCorsRetryingFetchHandler:function(){return d},createRetryingHandler:function(){return E},createTimeoutHandler:function(){return A},defaultFetchHandlerFactory:function(){return R},extensionRequestContext:function(){return ji},getRequiredBootstrapURLs:function(){return k},isLens:function(){return $},isPreview:function(){return Q},lensCoreFactory:function(){return w},lensRepositoryFactory:function(){return Ye},lensSourcesFactory:function(){return q},remoteMediaAssetLoaderFactory:function(){return zn},toPublicLens:function(){return ee},uriHandlersFactory:function(){return wi}});var r="0.1.0";function i(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>void 0!==t)))}function o(e,t,n){const r=Array.isArray(t)?t:[],i="function"===typeof t?t:n;if(!i)throw new TypeError("[Factory] Received invalid arguments. The factory function must be either the second or third argument.");if(i.length!==r.length)throw new TypeError(`[Factory] Function arity does not match the number of dependencies. Function has arity ${i.length}, but ${r.length} dependencies were specified.\nDependencies: ${JSON.stringify(r)}`);const o=(...e)=>i(...e);return o.token=e,o.dependencies=r,o}const a={shouldUseWorker:!0},s="configuration";var c=JSON.parse('{"F":"183","R":{"176":"https://cf-st.sc-cdn.net/d/uHcaGrd5M15kBiQoVL10J?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92","177":"https://cf-st.sc-cdn.net/d/2GqOg7VkHsrxrA21X8EXs?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92","180":"https://cf-st.sc-cdn.net/d/kzVsAFvYp3hbj2xnQBRyM?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92","182":"https://cf-st.sc-cdn.net/d/ItO16EVLOcGyO4SXW8blZ?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92","183":"https://cf-st.sc-cdn.net/d/fNYd3lB92Acd6p8pt06yS?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92"}}');class u{constructor(e){this.inner=e}get handler(){return this.inner}map(e){return new u(((t,n)=>{var r;const i=new AbortController,o=i.signal;let a=!1;const s=()=>{var e;o.aborted||a||(i.abort(),null===(e=null===n||void 0===n?void 0:n.signal)||void 0===e||e.removeEventListener("abort",s))};null===(r=null===n||void 0===n?void 0:n.signal)||void 0===r||r.addEventListener("abort",s);const c=new Proxy(this.inner,{apply:(e,t,n)=>{const[r,i]=n,c=[];o.addEventListener=new Proxy(o.addEventListener,{apply:(e,t,n)=>(c.push(n[1]),Reflect.apply(e,t,n))});const u=Reflect.apply(e,t,[r,Object.assign(Object.assign({},i),{signal:o})]);return u.catch((()=>{})).then((()=>{var e;null===(e=null===i||void 0===i?void 0:i.signal)||void 0===e||e.removeEventListener("abort",s),c.forEach((e=>o.removeEventListener("abort",e))),a=!0})),u}}),u=e(c)(t,n);return u.catch((()=>{})).then(s),u}))}}var l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const d=()=>{const e=new Map;return t=>(n,r)=>l(void 0,void 0,void 0,(function*(){var i;let o="string"===typeof n?n:n.url;try{o=new URL(o,location.origin).host}catch(a){}try{return yield t(n,r)}catch(s){if(s instanceof Error&&"AbortError"===s.name)throw s;(e=>{console.warn("NoCorsRetrying handler got failed response:",e,'Retrying request with {mode: "no-cors"}.')})(s);const a=null!==(i=e.get(o))&&void 0!==i?i:t(n,Object.assign(Object.assign({},r),{mode:"no-cors"}));return e.set(o,a),yield a,e.delete(o),t(n,r)}}))};var p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const f=(e,t)=>{console.warn("Retrying handler got failed response:",e,`Waited ${t} millis, attempting retry now.`)},v={backoffMultiple:3,baseSleep:500,maxSleep:5e3,retryPredicate:e=>!(e instanceof Response)||!e.ok},E=(e={})=>{const t=i(e),{backoffMultiple:n,baseSleep:r,maxSleep:o,retryPredicate:a}=Object.assign(Object.assign({},v),t),s=e=>p(void 0,void 0,void 0,(function*(){const t=Math.min(o,(i=r,a=e*n,Math.round(Math.random()*(a-i)+i)));var i,a,s;return yield(s=t,new Promise((e=>setTimeout(e,s)))),t})),c=(e,t=r)=>(n,r)=>p(void 0,void 0,void 0,(function*(){var i,o;try{const o=yield e(n,r);if(a(o)){const a=yield s(t);return(null===(i=null===r||void 0===r?void 0:r.signal)||void 0===i?void 0:i.aborted)?o:(f(o,a),c(e,a)(n,r))}return o}catch(u){if(!(u instanceof Error))throw new Error(`Invalid type caught by retrying handler. Handlers may only throw Errors. Got ${JSON.stringify(u)}`);if("AbortError"===u.name)throw u;if(!a(u))throw u;const i=yield s(t);if(null===(o=null===r||void 0===r?void 0:r.signal)||void 0===o?void 0:o.aborted)throw u;return f(u,i),c(e,i)(n,r)}}));return e=>c(e)};function m(e){return"string"===typeof e}function y(e){return m(e)&&encodeURIComponent(e)===e}function I(e){return"number"===typeof e}function g(e,t){return Array.isArray(t)&&t.every((t=>e(t)))}function h(e){return"undefined"===typeof e}function T(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}function _(e){return"function"===typeof e}function N(e){return t=>{for(const n of Object.values(t))if(!e(n))return!1;return!0}}function O(e){if(!e)return!0;try{const t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol}catch(t){return!1}}const S={createError:e=>{const t=m(e)?`for ${e}`:e instanceof Request?`for ${e.url}`:"";return new Error(`Request ${t} timed out by client timeout handler.`)},timeout:3e4},A=(e={})=>{const t=i(e),{createError:n,timeout:r}=Object.assign(Object.assign({},S),t);return e=>(t,i)=>{return Promise.race([e(t,i),(o=r,new Promise((e=>setTimeout(e,o)))).then((()=>Promise.reject(n(t,i))))]);var o}},R=o("defaultFetchHandler",(()=>new u(fetch).map(d()).map(E()).map(A({timeout:1e4})).handler));var b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const C=["LensCoreWebAssembly.js","LensCoreWebAssembly.wasm"],P=(e,t)=>t.find((t=>e.test(t)));function k(e){return b(this,void 0,void 0,(function*(){const t=null===e||void 0===e?void 0:e.replace(/[\/]+$/,""),n=(yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))())?"release-simd":"release",r=c.F;return C.map((e=>{if(t)return`${t}/${e}`;const{origin:i,pathname:o,search:a}=new URL(c.R[r]);return`${i}${o}/${r}/${n}/${e}${a}`}))}))}const w=o("lensCore",[R.token,s],((e,{wasmEndpoint:t,wasmEndpointOverride:r})=>b(void 0,void 0,void 0,(function*(){var i;const o=null!==(i=null!==r&&void 0!==r?r:t)&&void 0!==i?i:void 0,a=yield k(o),s=P(/\.js/,a),c=P(/\.wasm/,a);if(!s||!c)throw new Error(`Cannot fetch required LensCore assets. Either the JS or WASM filename is missing from this list: ${a}`);const u=yield e(s).then((e=>e.blob())),l=URL.createObjectURL(u);var d;return yield(d=l,new Promise(((e,t)=>{const n=document.createElement("script");n.src=d,n.async=!0,n.addEventListener("load",(()=>e()),{once:!0}),n.addEventListener("error",(e=>t(e)),{once:!0}),document.body.appendChild(n)}))),new Promise(((t,r)=>{let i;const o=n.g.createLensesModule(i={mainScriptUrlOrBlob:l,instantiateWasm:(n,a)=>{WebAssembly.instantiateStreaming(e(c),n).then((function({instance:e,module:n}){a(e,n),i.compiledModule=n,t(o)})).catch(r)}})}))}))));n(1738);const U=Symbol("validate"),D={string:String,number:Number,boolean:Boolean},L={1:"st",2:"nd",3:"rd"};function M(e){return(t,n,r)=>{let i=Reflect.getOwnMetadata(U,t,n)||[];i[r]=e,Reflect.defineMetadata(U,i,t,n)}}function V(e,t,n){const r=n.value,i=Reflect.getMetadata("design:paramtypes",e,t),o=Reflect.getMetadata(U,e,t);n.value=function(...n){var a;for(const[r,s]of i.entries()){let i=Array.isArray(n)&&n[r];if(o&&o[r]&&!o[r](i))throw new Error(`Predicate exists but arg of ${i} failed validation in method: ${String(t)}`);if(void 0===i||null===i)break;if(!G(i,s)){const n=`${F(e)}.${String(t)}()`,o=null!==(a=L[r+1])&&void 0!==a?a:"th";throw new Error(`The ${r+1}${o} argument to '${n}' method is of type '${F(i)}', which is not assignable to parameter of type '${s.name}'`)}}return r.apply(this,arguments)}}function G(e,t){if(e instanceof t)return!0;return e!==Object(e)&&D[typeof e]===t}function F(e){return"object"!==typeof e&&"function"!==typeof e?typeof e:null===e?"null":Object.getPrototypeOf(e)===Function.prototype&&/^class/.test(String(e))?"class":Symbol.toStringTag in e&&"string"===typeof e[Symbol.toStringTag]?e[Symbol.toStringTag]:"string"===typeof e.constructor.name&&""!==e.constructor.name?e.constructor.name:typeof e}function j(e,t="Assertion failed"){if(!e)throw new Error(t)}const x=navigator.language,K=navigator.languages.map(((e,t)=>`${e};q=${Math.max(0,(10-t)/10).toFixed(1)}`)).join(", ");function B(e){const t=new Map([["Chrome","Chrome"],["Chromium","Chrome"],["Firefox","Firefox"],["Microsoft Edge","Chrome"],["Safari","Safari"]]),n=e.filter((({brand:e})=>t.has(e))).map((e=>({brand:t.get(e.brand),version:e.version})));return 0===n.length?[{brand:"Firefox",version:"0"}]:n}function W(e){const t=new Map([["android","android"],["linux","linux"],["iphone os","ios"],["ipad","ipados"],["mac os","macos"],["macos","macos"],["windows","windows"]]),n=e.toLowerCase();for(const[r,i]of t.entries())if(n.includes(r))return i;return"unknown"}const Y=function(){const e=navigator.userAgent,t=void 0!==navigator.userAgentData?function(e){return{brands:B(e.brands),mobile:e.mobile,platform:W(e.platform)}}(navigator.userAgentData):function(e){let t;if(/Chrome/.test(e)){const n=e.match(/Chrome\/([\d.]+)/);t={brand:"Chrome",version:null!==n?n[1]:"unknown"}}else if(/Safari/.test(e)){let n=e.match(/Version\/([\d.]+)/);null===n&&(n=e.match(/Safari\/([\d.]+)/)),t={brand:"Safari",version:null!==n?n[1]:"unknown"}}else t={brand:"Firefox",version:"0"};return{brands:[t],mobile:!1,platform:W(e)}}(e),n=function(e){const t=e.match(/\s([\d][\d_.]*[\d])(;|\)|\s)/);return null!=t?t[1].replace(/_/g,"."):""}(e),i=function(e){const t=e.match(/;[^;]+?;([^\)]+?)\)/);if(t)return t[1].trim();const n=e.match(/\(([^;]+);/);return n?n[1].trim():"unknown"}(e),o=t.brands[0],a=`${o.brand}/${o.version}`,s=function(){var e,t;let n=location.hostname;const r=void 0===location.ancestorOrigins?[window.parent.origin,null!==(t=null===(e=window.top)||void 0===e?void 0:e.origin)&&void 0!==t?t:""]:Array.from(location.ancestorOrigins);for(;""===n&&r.length>0;)n=new URL(r.shift()).hostname;return n}(),u=r,l=u.replace(/[-+]\S+$/,""),d="release",p=`CameraKitWeb/${l} (${i}; ${t.platform} ${n}) ${a} Core/${c.F} AppId/${s}`;return{osType:t.platform,osVersion:n,locale:x,sdkShortVersion:l,sdkLongVersion:u,flavor:d,lensCoreVersion:`${c.F}`,deviceModel:i,appId:s,userAgent:p}}(),H=e=>t=>(n,r)=>{const i=r&&r.headers?new Headers(r.headers):"string"===typeof n?new Headers:n.headers,o=e(i);return t(n,Object.assign(Object.assign({},r),{headers:o}))},J=o("cameraKitServiceFetchHandler",[s,R.token],(({apiToken:e},t)=>new u(t).map(H((t=>(t.append("x-snap-client-user-agent",Y.userAgent),t.append("authorization",`Bearer ${e}`),t)))).handler));var z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class Z{constructor(e,t){this.fallbackSources=e,this.source=t}static empty(){return new Z}retrieveLenses({groupId:e,lensId:t}){var n,r;return z(this,void 0,void 0,(function*(){return(null===(n=this.source)||void 0===n?void 0:n.isGroupOwner(e))?h(t)?this.source.getLensGroup(e):this.source.getLens(t,e).then((e=>[e])):null===(r=this.fallbackSources)||void 0===r?void 0:r.retrieveLenses({groupId:e,lensId:t})}))}}const q=o("lensSources",(()=>Z.empty()));function $(e){return T(e)&&m(e.id)&&m(e.name)&&(h(e.iconUrl)||m(e.iconUrl))&&T(e.vendorData)&&N(m)(e.vendorData)&&m(e.cameraFacingPreference)&&(h(e.preview)||Q(e.preview))}function X(e){return T(e)&&m(e.id)&&m(e.name)&&T(e.vendorData)&&N(m)(e.vendorData)&&("undefined"===typeof e.content||function(e){return T(e)&&m(e.iconUrlBolt)&&m(e.lnsSha256)&&m(e.lnsUrlBolt)&&T(e.preview)&&m(e.preview.imageUrl)}(e.content))}function Q(e){return T(e)&&m(e.imageUrl)}function ee({id:e,name:t,content:n,vendorData:r,cameraFacingPreference:i}){var o;return j(O(null===n||void 0===n?void 0:n.iconUrlBolt),"Unsafe icon URL"),j(O(null===(o=null===n||void 0===n?void 0:n.preview)||void 0===o?void 0:o.imageUrl),"Unsafe preview URL"),{id:e,name:t,iconUrl:null===n||void 0===n?void 0:n.iconUrlBolt,preview:null===n||void 0===n?void 0:n.preview,vendorData:r,cameraFacingPreference:i}}var te=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const ne="https://api-kit.snapchat.com/com.snap.camerakit.v3.Lenses";function re(e){return e.headers.get("x-request-id")}function ie(e,t){return te(this,void 0,void 0,(function*(){const n=[ne,"groups",t].join("/"),r=yield e(n,{credentials:"include"}),i=yield r.json();if(!(T(o=i)&&m(o.id)&&Array.isArray(o.lenses)&&o.lenses.every(X)))throw new Error(`Expected request to ${n} to return a LensGroup. Got:\n\n${JSON.stringify(i)} with request-id of "${re(r)}"`);var o;return i.lenses}))}var oe=n(73737),ae=n.n(oe),se=n(27808),ce=n.n(se);function ue(){return{typeUrl:"",value:new Uint8Array}}const le={encode:(e,t=oe.Writer.create())=>(""!==e.typeUrl&&t.uint32(10).string(e.typeUrl),0!==e.value.length&&t.uint32(18).bytes(e.value),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=ue();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.typeUrl=n.string();break;case 2:i.value=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({typeUrl:Ee(e.typeUrl)?String(e.typeUrl):"",value:Ee(e.value)?fe(e.value):new Uint8Array}),toJSON(e){const t={};return void 0!==e.typeUrl&&(t.typeUrl=e.typeUrl),void 0!==e.value&&(t.value=function(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return ve(t.join(""))}(void 0!==e.value?e.value:new Uint8Array)),t},fromPartial(e){var t,n;const r=ue();return r.typeUrl=null!==(t=e.typeUrl)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:new Uint8Array,r}};var de=(()=>{if("undefined"!==typeof de)return de;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();const pe=de.atob||(e=>de.Buffer.from(e,"base64").toString("binary"));function fe(e){const t=pe(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}const ve=de.btoa||(e=>de.Buffer.from(e,"binary").toString("base64"));function Ee(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var me,ye,Ie;function ge(e){switch(e){case 0:case"CAMERA_FACING_UNSET":return me.CAMERA_FACING_UNSET;case 1:case"CAMERA_FACING_FRONT":return me.CAMERA_FACING_FRONT;case 2:case"CAMERA_FACING_BACK":return me.CAMERA_FACING_BACK;default:return me.UNRECOGNIZED}}function he(e){switch(e){case 0:case"DEVICE_DEPENDENT_ASSET_UNSET":return ye.DEVICE_DEPENDENT_ASSET_UNSET;case 1:case"ASSET":return ye.ASSET;default:return ye.UNRECOGNIZED}}function Te(e){switch(e){case 0:case"PRELOAD_UNSET":return Ie.PRELOAD_UNSET;case 1:case"ON_DEMAND":return Ie.ON_DEMAND;case 2:case"REQUIRED":return Ie.REQUIRED;default:return Ie.UNRECOGNIZED}}function _e(){return{id:"",name:"",vendorData:{},content:void 0,isThirdParty:!1,cameraFacingPreference:me.CAMERA_FACING_UNSET,featureMetadata:[]}}!function(e){e.CAMERA_FACING_UNSET="CAMERA_FACING_UNSET",e.CAMERA_FACING_FRONT="CAMERA_FACING_FRONT",e.CAMERA_FACING_BACK="CAMERA_FACING_BACK",e.UNRECOGNIZED="UNRECOGNIZED"}(me||(me={})),function(e){e.DEVICE_DEPENDENT_ASSET_UNSET="DEVICE_DEPENDENT_ASSET_UNSET",e.ASSET="ASSET",e.UNRECOGNIZED="UNRECOGNIZED"}(ye||(ye={})),function(e){e.PRELOAD_UNSET="PRELOAD_UNSET",e.ON_DEMAND="ON_DEMAND",e.REQUIRED="REQUIRED",e.UNRECOGNIZED="UNRECOGNIZED"}(Ie||(Ie={}));const Ne={encode(e,t=oe.Writer.create()){""!==e.id&&t.uint32(10).string(e.id),""!==e.name&&t.uint32(18).string(e.name),Object.entries(e.vendorData).forEach((([e,n])=>{Oe.encode({key:e,value:n},t.uint32(26).fork()).ldelim()})),void 0!==e.content&&Se.encode(e.content,t.uint32(34).fork()).ldelim(),!0===e.isThirdParty&&t.uint32(40).bool(e.isThirdParty),e.cameraFacingPreference!==me.CAMERA_FACING_UNSET&&t.uint32(48).int32(function(e){switch(e){case me.CAMERA_FACING_UNSET:return 0;case me.CAMERA_FACING_FRONT:return 1;case me.CAMERA_FACING_BACK:return 2;default:return 0}}(e.cameraFacingPreference));for(const n of e.featureMetadata)le.encode(n,t.uint32(58).fork()).ldelim();return t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=_e();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.id=n.string();break;case 2:i.name=n.string();break;case 3:const t=Oe.decode(n,n.uint32());void 0!==t.value&&(i.vendorData[t.key]=t.value);break;case 4:i.content=Se.decode(n,n.uint32());break;case 5:i.isThirdParty=n.bool();break;case 6:i.cameraFacingPreference=ge(n.int32());break;case 7:i.featureMetadata.push(le.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({id:ke(e.id)?String(e.id):"",name:ke(e.name)?String(e.name):"",vendorData:Pe(e.vendorData)?Object.entries(e.vendorData).reduce(((e,[t,n])=>(e[t]=String(n),e)),{}):{},content:ke(e.content)?Se.fromJSON(e.content):void 0,isThirdParty:!!ke(e.isThirdParty)&&Boolean(e.isThirdParty),cameraFacingPreference:ke(e.cameraFacingPreference)?ge(e.cameraFacingPreference):me.CAMERA_FACING_UNSET,featureMetadata:Array.isArray(null===e||void 0===e?void 0:e.featureMetadata)?e.featureMetadata.map((e=>le.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.name&&(t.name=e.name),t.vendorData={},e.vendorData&&Object.entries(e.vendorData).forEach((([e,n])=>{t.vendorData[e]=n})),void 0!==e.content&&(t.content=e.content?Se.toJSON(e.content):void 0),void 0!==e.isThirdParty&&(t.isThirdParty=e.isThirdParty),void 0!==e.cameraFacingPreference&&(t.cameraFacingPreference=function(e){switch(e){case me.CAMERA_FACING_UNSET:return"CAMERA_FACING_UNSET";case me.CAMERA_FACING_FRONT:return"CAMERA_FACING_FRONT";case me.CAMERA_FACING_BACK:return"CAMERA_FACING_BACK";default:return"UNKNOWN"}}(e.cameraFacingPreference)),e.featureMetadata?t.featureMetadata=e.featureMetadata.map((e=>e?le.toJSON(e):void 0)):t.featureMetadata=[],t},fromPartial(e){var t,n,r,i,o,a;const s=_e();return s.id=null!==(t=e.id)&&void 0!==t?t:"",s.name=null!==(n=e.name)&&void 0!==n?n:"",s.vendorData=Object.entries(null!==(r=e.vendorData)&&void 0!==r?r:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=String(n)),e)),{}),s.content=void 0!==e.content&&null!==e.content?Se.fromPartial(e.content):void 0,s.isThirdParty=null!==(i=e.isThirdParty)&&void 0!==i&&i,s.cameraFacingPreference=null!==(o=e.cameraFacingPreference)&&void 0!==o?o:me.CAMERA_FACING_UNSET,s.featureMetadata=(null===(a=e.featureMetadata)||void 0===a?void 0:a.map((e=>le.fromPartial(e))))||[],s}};const Oe={encode:(e,t=oe.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={key:"",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:ke(e.key)?String(e.key):"",value:ke(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,n;const r={key:"",value:""};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:"",r}};const Se={encode(e,t=oe.Writer.create()){""!==e.lnsUrl&&t.uint32(10).string(e.lnsUrl),""!==e.lnsSha256&&t.uint32(18).string(e.lnsSha256),""!==e.iconUrl&&t.uint32(26).string(e.iconUrl),void 0!==e.preview&&Ce.encode(e.preview,t.uint32(34).fork()).ldelim();for(const n of e.assetManifest)be.encode(n,t.uint32(42).fork()).ldelim();return""!==e.defaultHintId&&t.uint32(50).string(e.defaultHintId),Object.entries(e.hintTranslations).forEach((([e,n])=>{Ae.encode({key:e,value:n},t.uint32(58).fork()).ldelim()})),""!==e.lnsUrlBolt&&t.uint32(66).string(e.lnsUrlBolt),""!==e.iconUrlBolt&&t.uint32(74).string(e.iconUrlBolt),t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={lnsUrl:"",lnsSha256:"",iconUrl:"",preview:void 0,assetManifest:[],defaultHintId:"",hintTranslations:{},lnsUrlBolt:"",iconUrlBolt:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.lnsUrl=n.string();break;case 2:i.lnsSha256=n.string();break;case 3:i.iconUrl=n.string();break;case 4:i.preview=Ce.decode(n,n.uint32());break;case 5:i.assetManifest.push(be.decode(n,n.uint32()));break;case 6:i.defaultHintId=n.string();break;case 7:const t=Ae.decode(n,n.uint32());void 0!==t.value&&(i.hintTranslations[t.key]=t.value);break;case 8:i.lnsUrlBolt=n.string();break;case 9:i.iconUrlBolt=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({lnsUrl:ke(e.lnsUrl)?String(e.lnsUrl):"",lnsSha256:ke(e.lnsSha256)?String(e.lnsSha256):"",iconUrl:ke(e.iconUrl)?String(e.iconUrl):"",preview:ke(e.preview)?Ce.fromJSON(e.preview):void 0,assetManifest:Array.isArray(null===e||void 0===e?void 0:e.assetManifest)?e.assetManifest.map((e=>be.fromJSON(e))):[],defaultHintId:ke(e.defaultHintId)?String(e.defaultHintId):"",hintTranslations:Pe(e.hintTranslations)?Object.entries(e.hintTranslations).reduce(((e,[t,n])=>(e[t]=String(n),e)),{}):{},lnsUrlBolt:ke(e.lnsUrlBolt)?String(e.lnsUrlBolt):"",iconUrlBolt:ke(e.iconUrlBolt)?String(e.iconUrlBolt):""}),toJSON(e){const t={};return void 0!==e.lnsUrl&&(t.lnsUrl=e.lnsUrl),void 0!==e.lnsSha256&&(t.lnsSha256=e.lnsSha256),void 0!==e.iconUrl&&(t.iconUrl=e.iconUrl),void 0!==e.preview&&(t.preview=e.preview?Ce.toJSON(e.preview):void 0),e.assetManifest?t.assetManifest=e.assetManifest.map((e=>e?be.toJSON(e):void 0)):t.assetManifest=[],void 0!==e.defaultHintId&&(t.defaultHintId=e.defaultHintId),t.hintTranslations={},e.hintTranslations&&Object.entries(e.hintTranslations).forEach((([e,n])=>{t.hintTranslations[e]=n})),void 0!==e.lnsUrlBolt&&(t.lnsUrlBolt=e.lnsUrlBolt),void 0!==e.iconUrlBolt&&(t.iconUrlBolt=e.iconUrlBolt),t},fromPartial(e){var t,n,r,i,o,a,s,c;const u={lnsUrl:"",lnsSha256:"",iconUrl:"",preview:void 0,assetManifest:[],defaultHintId:"",hintTranslations:{},lnsUrlBolt:"",iconUrlBolt:""};return u.lnsUrl=null!==(t=e.lnsUrl)&&void 0!==t?t:"",u.lnsSha256=null!==(n=e.lnsSha256)&&void 0!==n?n:"",u.iconUrl=null!==(r=e.iconUrl)&&void 0!==r?r:"",u.preview=void 0!==e.preview&&null!==e.preview?Ce.fromPartial(e.preview):void 0,u.assetManifest=(null===(i=e.assetManifest)||void 0===i?void 0:i.map((e=>be.fromPartial(e))))||[],u.defaultHintId=null!==(o=e.defaultHintId)&&void 0!==o?o:"",u.hintTranslations=Object.entries(null!==(a=e.hintTranslations)&&void 0!==a?a:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=String(n)),e)),{}),u.lnsUrlBolt=null!==(s=e.lnsUrlBolt)&&void 0!==s?s:"",u.iconUrlBolt=null!==(c=e.iconUrlBolt)&&void 0!==c?c:"",u}};const Ae={encode:(e,t=oe.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={key:"",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:ke(e.key)?String(e.key):"",value:ke(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,n;const r={key:"",value:""};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:"",r}};function Re(){return{type:ye.DEVICE_DEPENDENT_ASSET_UNSET,id:"",requestTiming:Ie.PRELOAD_UNSET,assetUrl:"",assetChecksum:""}}const be={encode:(e,t=oe.Writer.create())=>(e.type!==ye.DEVICE_DEPENDENT_ASSET_UNSET&&t.uint32(8).int32(function(e){switch(e){case ye.DEVICE_DEPENDENT_ASSET_UNSET:return 0;case ye.ASSET:return 1;default:return 0}}(e.type)),""!==e.id&&t.uint32(18).string(e.id),e.requestTiming!==Ie.PRELOAD_UNSET&&t.uint32(24).int32(function(e){switch(e){case Ie.PRELOAD_UNSET:return 0;case Ie.ON_DEMAND:return 1;case Ie.REQUIRED:return 2;default:return 0}}(e.requestTiming)),""!==e.assetUrl&&t.uint32(34).string(e.assetUrl),""!==e.assetChecksum&&t.uint32(42).string(e.assetChecksum),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=Re();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.type=he(n.int32());break;case 2:i.id=n.string();break;case 3:i.requestTiming=Te(n.int32());break;case 4:i.assetUrl=n.string();break;case 5:i.assetChecksum=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({type:ke(e.type)?he(e.type):ye.DEVICE_DEPENDENT_ASSET_UNSET,id:ke(e.id)?String(e.id):"",requestTiming:ke(e.requestTiming)?Te(e.requestTiming):Ie.PRELOAD_UNSET,assetUrl:ke(e.assetUrl)?String(e.assetUrl):"",assetChecksum:ke(e.assetChecksum)?String(e.assetChecksum):""}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case ye.DEVICE_DEPENDENT_ASSET_UNSET:return"DEVICE_DEPENDENT_ASSET_UNSET";case ye.ASSET:return"ASSET";default:return"UNKNOWN"}}(e.type)),void 0!==e.id&&(t.id=e.id),void 0!==e.requestTiming&&(t.requestTiming=function(e){switch(e){case Ie.PRELOAD_UNSET:return"PRELOAD_UNSET";case Ie.ON_DEMAND:return"ON_DEMAND";case Ie.REQUIRED:return"REQUIRED";default:return"UNKNOWN"}}(e.requestTiming)),void 0!==e.assetUrl&&(t.assetUrl=e.assetUrl),void 0!==e.assetChecksum&&(t.assetChecksum=e.assetChecksum),t},fromPartial(e){var t,n,r,i,o;const a=Re();return a.type=null!==(t=e.type)&&void 0!==t?t:ye.DEVICE_DEPENDENT_ASSET_UNSET,a.id=null!==(n=e.id)&&void 0!==n?n:"",a.requestTiming=null!==(r=e.requestTiming)&&void 0!==r?r:Ie.PRELOAD_UNSET,a.assetUrl=null!==(i=e.assetUrl)&&void 0!==i?i:"",a.assetChecksum=null!==(o=e.assetChecksum)&&void 0!==o?o:"",a}};const Ce={encode:(e,t=oe.Writer.create())=>(""!==e.imageUrl&&t.uint32(10).string(e.imageUrl),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={imageUrl:""};for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.imageUrl=n.string();else n.skipType(7&e)}return i},fromJSON:e=>({imageUrl:ke(e.imageUrl)?String(e.imageUrl):""}),toJSON(e){const t={};return void 0!==e.imageUrl&&(t.imageUrl=e.imageUrl),t},fromPartial(e){var t;const n={imageUrl:""};return n.imageUrl=null!==(t=e.imageUrl)&&void 0!==t?t:"",n}};function Pe(e){return"object"===typeof e&&null!==e}function ke(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var we,Ue;!function(e){e.UNSET="UNSET",e.SHOP_KIT="SHOP_KIT",e.UNRECOGNIZED="UNRECOGNIZED"}(we||(we={})),function(e){e.UNSET="UNSET",e.UNKNOWN="UNKNOWN",e.NOT_FOUND="NOT_FOUND",e.INCOMPATIBLE_LENS_CORE_VERSION="INCOMPATIBLE_LENS_CORE_VERSION",e.ARCHIVED_OR_INVISIBLE="ARCHIVED_OR_INVISIBLE",e.CONTAINS_MUSIC="CONTAINS_MUSIC",e.UNRECOGNIZED="UNRECOGNIZED"}(Ue||(Ue={}));const De={encode:(e,t=oe.Writer.create())=>(""!==e.userAgent&&t.uint32(10).string(e.userAgent),""!==e.locale&&t.uint32(18).string(e.locale),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={userAgent:"",locale:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.userAgent=n.string();break;case 2:i.locale=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({userAgent:Ve(e.userAgent)?String(e.userAgent):"",locale:Ve(e.locale)?String(e.locale):""}),toJSON(e){const t={};return void 0!==e.userAgent&&(t.userAgent=e.userAgent),void 0!==e.locale&&(t.locale=e.locale),t},fromPartial(e){var t,n;const r={userAgent:"",locale:""};return r.userAgent=null!==(t=e.userAgent)&&void 0!==t?t:"",r.locale=null!==(n=e.locale)&&void 0!==n?n:"",r}};const Le={encode(e,t=oe.Writer.create()){for(const n of e.lenses)Ne.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={lenses:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.lenses.push(Ne.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromJSON:e=>({lenses:Array.isArray(null===e||void 0===e?void 0:e.lenses)?e.lenses.map((e=>Ne.fromJSON(e))):[]}),toJSON(e){const t={};return e.lenses?t.lenses=e.lenses.map((e=>e?Ne.toJSON(e):void 0)):t.lenses=[],t},fromPartial(e){var t;const n={lenses:[]};return n.lenses=(null===(t=e.lenses)||void 0===t?void 0:t.map((e=>Ne.fromPartial(e))))||[],n}};var Me=(()=>{if("undefined"!==typeof Me)return Me;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();Me.atob;Me.btoa;function Ve(e){return null!==e&&void 0!==e}function Ge(e){try{return Le.decode(new Uint8Array(e)).lenses}catch(t){throw new Error("Invalid lens envelope")}}function Fe(e){return e.reduce(((e,t)=>[...e,...Ge(t)]),[])}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var je=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},xe=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Ke=function(e,t){return function(n,r){t(n,r,e)}},Be=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class We{constructor(e,t){this.httpClient=e,this.lensSources=t,this.lensCache=new Map}loadLens(e,t){return Be(this,void 0,void 0,(function*(){const n=yield this.lensSources.retrieveLenses({lensId:e,groupId:t});let r;if(n){if(r=Fe(n)[0],!r)throw new Error("Expected non-empty envelope")}else r=yield function(e,t,n){return te(this,void 0,void 0,(function*(){const r=[ne,"groups",n,"lenses",t].join("/"),i=yield e(r,{credentials:"include"}),o=yield i.json(),a=o.lens;if(!X(a))throw new Error(`Expected request to ${r} to return a Lens. Got:\n\n${JSON.stringify(o)} with request-id of "${re(i)}"`);return a}))}(this.httpClient,e,t);return this.lensCache.set(r.id,r),ee(r)}))}loadLensGroups(e){return Be(this,void 0,void 0,(function*(){const t=yield Promise.all(e.map((e=>Be(this,void 0,void 0,(function*(){try{const t=yield this.lensSources.retrieveLenses({groupId:e}),n=t?Fe(t):yield ie(this.httpClient,e);return n.forEach((e=>this.lensCache.set(e.id,e))),n.map(ee)}catch(t){return t}}))))),n=[],r=[];return t.forEach((e=>Array.isArray(e)?r.push(...e):n.push(e))),{errors:n,lenses:r}}))}getCachedLens(e){return this.lensCache.get(e)}}je([V,Ke(0,M(y)),Ke(1,M(y)),xe("design:type",Function),xe("design:paramtypes",[String,String]),xe("design:returntype",Promise)],We.prototype,"loadLens",null),je([V,Ke(0,M((function(e){return g(y,e)}))),xe("design:type",Function),xe("design:paramtypes",[Array]),xe("design:returntype",Promise)],We.prototype,"loadLensGroups",null);const Ye=o("LensRepository",[J.token,q.token],((e,t)=>new We(e,t)));function He(e){return"function"===typeof e&&"function"===typeof e.delegate}function Je(e){let t;const n=(...n)=>("undefined"!==typeof t||(t=e(...n)),t);return n.delegate=e,n}class ze{constructor(e){this.injectables=e}provides(e){return new ze(Object.assign(Object.assign({},this.injectables),{[e.token]:e}))}getFactories(e){return Object.fromEntries((t=this.injectables,Object.entries(t)).map((([t,n])=>[t,Je((r=>n(...n.dependencies.map((n=>n===t?e.get(n):r.get(n))))))])));var t}getTokens(){return Object.keys(this.injectables)}}const Ze="$container";class qe{constructor(e){this.factories={};for(const t in e){const n=e[t];He(n)?this.factories[t]=n:this.factories[t]=Je(n)}}static provides(e){return new qe({}).provides(e)}copy(e){const t=Object.assign({},this.factories);return(e||[]).forEach((e=>{t[e]=this.factories[e].delegate})),new qe(t)}get(e){if(e===Ze)return this;const t=this.factories[e];if(!t)throw new Error(`[Container::get] Could not find Service for Token "${e}". This should've caused a compile-time error. If the Token is 'undefined', check all your calls to the Injectable function. Make sure you define dependencies using string literals or string constants that are definitely initialized before the call to Injectable.`);return t(this)}run(e){if(e instanceof ze){const t=this.provides(e);for(const n of e.getTokens())t.get(n)}else this.provides(e).get(e.token);return this}provides(e){return e instanceof ze?this.providesContainer(e):this.providesService(e)}providesContainer(e){const t=e.getFactories(this);return new qe(Object.assign(Object.assign({},this.factories),t))}providesService(e){const t=e.token,n=e.dependencies,r=Je((r=>e(...n.map((e=>e===t?this.get(e):r.get(e)))))),i=Object.assign(Object.assign({},this.factories),{[t]:r});return new qe(i)}}function $e(e){throw new Error("Reached unreachable code at runtime.")}function Xe(e,t){var n;const r=function(e){if(e instanceof Error)return e;try{return new Error(`Non-Error type exception thrown. Serialized error value: ${JSON.stringify(e)}`)}catch(t){return new Error("Non-Error type exception thrown. Original error value could not be serialized.")}}(t),i=(null!==(n=r.stack)&&void 0!==n?n:"").includes(r.message)?r.stack:`${r.message}\n${r.stack}`;return e.stack=`${e.stack}\nCaused by: ${i}`,e}var Qe;!function(e){e[e.UNKNOWN_BENCHMARK=0]="UNKNOWN_BENCHMARK",e[e.CPU_GFLOPS=1]="CPU_GFLOPS",e[e.GPU_GFLOPS=2]="GPU_GFLOPS",e[e.GPU_GFLOPS_VECTOR=3]="GPU_GFLOPS_VECTOR",e[e.GPU_SYSTEM_CAPABILITIES=4]="GPU_SYSTEM_CAPABILITIES",e[e.GPU_VERTEX_THROUGHPUT=5]="GPU_VERTEX_THROUGHPUT",e[e.GPU_SIMPLE_GEOMETRY_THROUGHPUT=6]="GPU_SIMPLE_GEOMETRY_THROUGHPUT",e[e.GPU_GAUSSIAN_BLUR=7]="GPU_GAUSSIAN_BLUR",e[e.CPU_MEMORY_THROUGHPUT=8]="CPU_MEMORY_THROUGHPUT",e[e.GPU_FILL_RATE=9]="GPU_FILL_RATE",e[e.MEM_TOTAL_MEMORY=10]="MEM_TOTAL_MEMORY",e[e.CPU_NUM_PROCESSORS=11]="CPU_NUM_PROCESSORS",e[e.DEVICE_INFORMATION_CHIPSET=12]="DEVICE_INFORMATION_CHIPSET",e[e.DEVICE_INFORMATION_BUILD_HARDWARE=13]="DEVICE_INFORMATION_BUILD_HARDWARE",e[e.DEVICE_INFORMATION_BUILD_BRAND=14]="DEVICE_INFORMATION_BUILD_BRAND",e[e.DEVICE_INFORMATION_BUILD_MANUFACTURER=15]="DEVICE_INFORMATION_BUILD_MANUFACTURER",e[e.DEVICE_INFORMATION_BUILD_MODEL=16]="DEVICE_INFORMATION_BUILD_MODEL",e[e.DEVICE_INFORMATION_SCREEN_PROPERTIES=17]="DEVICE_INFORMATION_SCREEN_PROPERTIES",e[e.DEVICE_INFORMATION_CODEC_CAPABILITES=18]="DEVICE_INFORMATION_CODEC_CAPABILITES",e[e.CPU_PRIME_KOTLIN=19]="CPU_PRIME_KOTLIN",e[e.CPU_PRIME_NATIVE=20]="CPU_PRIME_NATIVE",e[e.CPU_SQRT_KOTLIN=21]="CPU_SQRT_KOTLIN",e[e.CPU_SQRT_NATIVE=22]="CPU_SQRT_NATIVE",e[e.CPU_INT_MATH_KOTLIN=23]="CPU_INT_MATH_KOTLIN",e[e.CPU_INT_MATH_NATIVE=24]="CPU_INT_MATH_NATIVE",e[e.DEVICE_INFORMATION_GL_VERSION=25]="DEVICE_INFORMATION_GL_VERSION",e[e.DEVICE_INFORMATION_GLSL_VERSION=26]="DEVICE_INFORMATION_GLSL_VERSION",e[e.DEVICE_INFORMATION_OPENCL_EXISTS=27]="DEVICE_INFORMATION_OPENCL_EXISTS",e[e.DEVICE_INFORMATION_IS_HOST_UNIFIED_MEMORY=28]="DEVICE_INFORMATION_IS_HOST_UNIFIED_MEMORY",e[e.DEVICE_INFORMATION_OPENCL_VERSION=29]="DEVICE_INFORMATION_OPENCL_VERSION",e[e.DEVICE_INFORMATION_TIMING_RESOLUTION_NS=30]="DEVICE_INFORMATION_TIMING_RESOLUTION_NS",e[e.DEVICE_INFORMATION_ADDRESS_SIZE=31]="DEVICE_INFORMATION_ADDRESS_SIZE",e[e.DEVICE_INFORMATION_GPU_MAX_CLOCK_FREQUENCY_MHZ=32]="DEVICE_INFORMATION_GPU_MAX_CLOCK_FREQUENCY_MHZ",e[e.DEVICE_INFORMATION_COMPUTE_UNITS=33]="DEVICE_INFORMATION_COMPUTE_UNITS",e[e.DEVICE_INFORMATION_MAX_WORKGROUP_SIZE=34]="DEVICE_INFORMATION_MAX_WORKGROUP_SIZE",e[e.DEVICE_INFORMATION_LOCAL_MEMORY_IS_LOCAL=35]="DEVICE_INFORMATION_LOCAL_MEMORY_IS_LOCAL",e[e.DEVICE_INFORMATION_LOCAL_MEMORY_SIZE=36]="DEVICE_INFORMATION_LOCAL_MEMORY_SIZE",e[e.DEVICE_INFORMATION_GLOBAL_MEMORY_CACHE_SIZE=37]="DEVICE_INFORMATION_GLOBAL_MEMORY_CACHE_SIZE",e[e.DEVICE_INFORMATION_GLOBAL_MEMORY_CACHELINE_SIZE=38]="DEVICE_INFORMATION_GLOBAL_MEMORY_CACHELINE_SIZE",e[e.DEVICE_INFORMATION_GL_HAS_FENCE_SYNC_OBJECT=39]="DEVICE_INFORMATION_GL_HAS_FENCE_SYNC_OBJECT",e[e.DEVICE_INFORMATION_HEXAGON_NN_LIBRARY_VERSION=40]="DEVICE_INFORMATION_HEXAGON_NN_LIBRARY_VERSION",e[e.GPU_GFLOPS_V2=41]="GPU_GFLOPS_V2",e[e.GPU_GFLOPS_VECTOR_V2=42]="GPU_GFLOPS_VECTOR_V2",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Qe||(Qe={})),ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());const et={seconds:0,nanos:0},tt={encode:(e,t=ae().Writer.create())=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},et);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.seconds=rt(n.int64());break;case 2:i.nanos=n.int32();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},et);return void 0!==e.seconds&&null!==e.seconds?t.seconds=e.seconds:t.seconds=0,void 0!==e.nanos&&null!==e.nanos?t.nanos=e.nanos:t.nanos=0,t}};var nt=(()=>{if("undefined"!==typeof nt)return nt;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function rt(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new nt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());const it={},ot={encode:(e,t=ae().Writer.create())=>(void 0!==e.intValue&&t.uint32(8).int32(e.intValue),void 0!==e.longValue&&t.uint32(16).int64(e.longValue),void 0!==e.boolValue&&t.uint32(24).bool(e.boolValue),void 0!==e.floatValue&&t.uint32(37).float(e.floatValue),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},it);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.intValue=n.int32();break;case 2:i.longValue=pt(n.int64());break;case 3:i.boolValue=n.bool();break;case 4:i.floatValue=n.float();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},it);return void 0!==e.intValue&&null!==e.intValue?t.intValue=e.intValue:t.intValue=void 0,void 0!==e.longValue&&null!==e.longValue?t.longValue=e.longValue:t.longValue=void 0,void 0!==e.boolValue&&null!==e.boolValue?t.boolValue=e.boolValue:t.boolValue=void 0,void 0!==e.floatValue&&null!==e.floatValue?t.floatValue=e.floatValue:t.floatValue=void 0,t}},at={benchmarkNames:0},st={encode(e,t=ae().Writer.create()){t.uint32(10).fork();for(const n of e.benchmarkNames)t.int32(n);return t.ldelim(),void 0!==e.expirationTimestamp&&tt.encode(function(e){const t=e.getTime()/1e3,n=e.getTime()%1e3*1e6;return{seconds:t,nanos:n}}(e.expirationTimestamp),t.uint32(18).fork()).ldelim(),t},decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},at);for(i.benchmarkNames=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.benchmarkNames.push(n.int32())}else i.benchmarkNames.push(n.int32());break;case 2:i.expirationTimestamp=dt(tt.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},at);if(t.benchmarkNames=[],void 0!==e.benchmarkNames&&null!==e.benchmarkNames)for(const n of e.benchmarkNames)t.benchmarkNames.push(n);return void 0!==e.expirationTimestamp&&null!==e.expirationTimestamp?t.expirationTimestamp=e.expirationTimestamp:t.expirationTimestamp=void 0,t}},ct={name:0},ut={encode:(e,t=ae().Writer.create())=>(0!==e.name&&t.uint32(8).int32(e.name),void 0!==e.value&&ot.encode(e.value,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},ct);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.int32();break;case 2:i.value=ot.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},ct);return void 0!==e.name&&null!==e.name?t.name=e.name:t.name=0,void 0!==e.value&&null!==e.value?t.value=ot.fromPartial(e.value):t.value=void 0,t}};var lt=(()=>{if("undefined"!==typeof lt)return lt;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function dt(e){let t=1e3*e.seconds;return t+=e.nanos/1e6,new Date(t)}function pt(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new lt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var ft=n(21554);const vt={value:!1},Et={encode:(e,t=ae().Writer.create())=>(!0===e.value&&t.uint32(8).bool(e.value),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},vt);for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.value=n.bool();else n.skipType(7&e)}return i},fromPartial(e){const t=Object.assign({},vt);return void 0!==e.value&&null!==e.value?t.value=e.value:t.value=!1,t}};var mt=(()=>{if("undefined"!==typeof mt)return mt;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var yt,It,gt,ht;!function(e){e[e.UNKNOWN_EVENT_TYPE=0]="UNKNOWN_EVENT_TYPE",e[e.COLD_START=1]="COLD_START",e[e.WARM_START=2]="WARM_START",e[e.FOREGROUND_TRIGGER=3]="FOREGROUND_TRIGGER",e[e.BACKGROUND_TRIGGER=4]="BACKGROUND_TRIGGER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(yt||(yt={})),function(e){e[e.UNKNOWN_APP_STATE=0]="UNKNOWN_APP_STATE",e[e.FOREGROUND=1]="FOREGROUND",e[e.BACKGROUND=2]="BACKGROUND",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(It||(It={})),function(e){e[e.DEFAULT_INSTRUMENTATION=0]="DEFAULT_INSTRUMENTATION",e[e.USER_AUTHENTICATION=1]="USER_AUTHENTICATION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(gt||(gt={})),function(e){e[e.UNKNOWN_NETWORK_TYPE=0]="UNKNOWN_NETWORK_TYPE",e[e.CELLULAR=1]="CELLULAR",e[e.WIFI=2]="WIFI",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ht||(ht={}));const Tt={configResultsEtag:"",namespaces:0,ghostId:"",countryCode:"",screenWidth:0,screenHeight:0,maxVideoWidthPx:0,maxVideoHeightPx:0,deltaSync:!1,userAgent:"",triggerEventType:0,appState:0,locale:"",deviceId:"",userId:"",clientIp:"",isUnAuthorized:!1,appLocale:"",instrumentation:0,lastSuccessfulSync:0,isLogout:!1,packageInstaller:"",syncTriggerBlizzardSessionId:"",syncExecutionBlizzardSessionId:"",cofSyncTriggerDelayFromStartupMs:0,cofSyncExecutionDelayFromStartupMs:0,syncTriggerTime:0,snapkitAppId:"",lenscoreVersion:0,configNames:""},_t={encode(e,t=ae().Writer.create()){""!==e.configResultsEtag&&t.uint32(10).string(e.configResultsEtag),t.uint32(18).fork();for(const n of e.namespaces)t.int32(n);t.ldelim(),""!==e.ghostId&&t.uint32(26).string(e.ghostId),""!==e.countryCode&&t.uint32(34).string(e.countryCode),0!==e.screenWidth&&t.uint32(40).int32(e.screenWidth),0!==e.screenHeight&&t.uint32(48).int32(e.screenHeight),void 0!==e.connectivity&&Ot.encode(e.connectivity,t.uint32(58).fork()).ldelim(),0!==e.maxVideoWidthPx&&t.uint32(64).int32(e.maxVideoWidthPx),0!==e.maxVideoHeightPx&&t.uint32(72).int32(e.maxVideoHeightPx);for(const n of e.benchmarkResults)ut.encode(n,t.uint32(82).fork()).ldelim();!0===e.deltaSync&&t.uint32(88).bool(e.deltaSync),""!==e.userAgent&&t.uint32(98).string(e.userAgent),0!==e.triggerEventType&&t.uint32(104).int32(e.triggerEventType),0!==e.appState&&t.uint32(112).int32(e.appState),""!==e.locale&&t.uint32(122).string(e.locale),""!==e.deviceId&&t.uint32(130).string(e.deviceId),""!==e.userId&&t.uint32(138).string(e.userId),""!==e.clientIp&&t.uint32(146).string(e.clientIp),!0===e.isUnAuthorized&&t.uint32(152).bool(e.isUnAuthorized),""!==e.appLocale&&t.uint32(162).string(e.appLocale),0!==e.instrumentation&&t.uint32(168).int32(e.instrumentation),0!==e.lastSuccessfulSync&&t.uint32(176).int64(e.lastSuccessfulSync),!0===e.isLogout&&t.uint32(184).bool(e.isLogout),""!==e.packageInstaller&&t.uint32(194).string(e.packageInstaller),""!==e.syncTriggerBlizzardSessionId&&t.uint32(202).string(e.syncTriggerBlizzardSessionId),""!==e.syncExecutionBlizzardSessionId&&t.uint32(210).string(e.syncExecutionBlizzardSessionId),0!==e.cofSyncTriggerDelayFromStartupMs&&t.uint32(216).int32(e.cofSyncTriggerDelayFromStartupMs),0!==e.cofSyncExecutionDelayFromStartupMs&&t.uint32(224).int32(e.cofSyncExecutionDelayFromStartupMs),0!==e.syncTriggerTime&&t.uint32(232).int64(e.syncTriggerTime),void 0!==e.decoderEncoderAvailability&&At.encode(e.decoderEncoderAvailability,t.uint32(242).fork()).ldelim(),""!==e.snapkitAppId&&t.uint32(250).string(e.snapkitAppId),0!==e.lenscoreVersion&&t.uint32(256).int32(e.lenscoreVersion),void 0!==e.ruid&&ft.KE.encode(e.ruid,t.uint32(266).fork()).ldelim();for(const n of e.configNames)t.uint32(274).string(n);return t},decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Tt);for(i.namespaces=[],i.benchmarkResults=[],i.configNames=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.configResultsEtag=n.string();break;case 2:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.namespaces.push(n.int32())}else i.namespaces.push(n.int32());break;case 3:i.ghostId=n.string();break;case 4:i.countryCode=n.string();break;case 5:i.screenWidth=n.int32();break;case 6:i.screenHeight=n.int32();break;case 7:i.connectivity=Ot.decode(n,n.uint32());break;case 8:i.maxVideoWidthPx=n.int32();break;case 9:i.maxVideoHeightPx=n.int32();break;case 10:i.benchmarkResults.push(ut.decode(n,n.uint32()));break;case 11:i.deltaSync=n.bool();break;case 12:i.userAgent=n.string();break;case 13:i.triggerEventType=n.int32();break;case 14:i.appState=n.int32();break;case 15:i.locale=n.string();break;case 16:i.deviceId=n.string();break;case 17:i.userId=n.string();break;case 18:i.clientIp=n.string();break;case 19:i.isUnAuthorized=n.bool();break;case 20:i.appLocale=n.string();break;case 21:i.instrumentation=n.int32();break;case 22:i.lastSuccessfulSync=bt(n.int64());break;case 23:i.isLogout=n.bool();break;case 24:i.packageInstaller=n.string();break;case 25:i.syncTriggerBlizzardSessionId=n.string();break;case 26:i.syncExecutionBlizzardSessionId=n.string();break;case 27:i.cofSyncTriggerDelayFromStartupMs=n.int32();break;case 28:i.cofSyncExecutionDelayFromStartupMs=n.int32();break;case 29:i.syncTriggerTime=bt(n.int64());break;case 30:i.decoderEncoderAvailability=At.decode(n,n.uint32());break;case 31:i.snapkitAppId=n.string();break;case 32:i.lenscoreVersion=n.int32();break;case 33:i.ruid=ft.KE.decode(n,n.uint32());break;case 34:i.configNames.push(n.string());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Tt);if(t.namespaces=[],t.benchmarkResults=[],t.configNames=[],void 0!==e.configResultsEtag&&null!==e.configResultsEtag?t.configResultsEtag=e.configResultsEtag:t.configResultsEtag="",void 0!==e.namespaces&&null!==e.namespaces)for(const n of e.namespaces)t.namespaces.push(n);if(void 0!==e.ghostId&&null!==e.ghostId?t.ghostId=e.ghostId:t.ghostId="",void 0!==e.countryCode&&null!==e.countryCode?t.countryCode=e.countryCode:t.countryCode="",void 0!==e.screenWidth&&null!==e.screenWidth?t.screenWidth=e.screenWidth:t.screenWidth=0,void 0!==e.screenHeight&&null!==e.screenHeight?t.screenHeight=e.screenHeight:t.screenHeight=0,void 0!==e.connectivity&&null!==e.connectivity?t.connectivity=Ot.fromPartial(e.connectivity):t.connectivity=void 0,void 0!==e.maxVideoWidthPx&&null!==e.maxVideoWidthPx?t.maxVideoWidthPx=e.maxVideoWidthPx:t.maxVideoWidthPx=0,void 0!==e.maxVideoHeightPx&&null!==e.maxVideoHeightPx?t.maxVideoHeightPx=e.maxVideoHeightPx:t.maxVideoHeightPx=0,void 0!==e.benchmarkResults&&null!==e.benchmarkResults)for(const n of e.benchmarkResults)t.benchmarkResults.push(ut.fromPartial(n));if(void 0!==e.deltaSync&&null!==e.deltaSync?t.deltaSync=e.deltaSync:t.deltaSync=!1,void 0!==e.userAgent&&null!==e.userAgent?t.userAgent=e.userAgent:t.userAgent="",void 0!==e.triggerEventType&&null!==e.triggerEventType?t.triggerEventType=e.triggerEventType:t.triggerEventType=0,void 0!==e.appState&&null!==e.appState?t.appState=e.appState:t.appState=0,void 0!==e.locale&&null!==e.locale?t.locale=e.locale:t.locale="",void 0!==e.deviceId&&null!==e.deviceId?t.deviceId=e.deviceId:t.deviceId="",void 0!==e.userId&&null!==e.userId?t.userId=e.userId:t.userId="",void 0!==e.clientIp&&null!==e.clientIp?t.clientIp=e.clientIp:t.clientIp="",void 0!==e.isUnAuthorized&&null!==e.isUnAuthorized?t.isUnAuthorized=e.isUnAuthorized:t.isUnAuthorized=!1,void 0!==e.appLocale&&null!==e.appLocale?t.appLocale=e.appLocale:t.appLocale="",void 0!==e.instrumentation&&null!==e.instrumentation?t.instrumentation=e.instrumentation:t.instrumentation=0,void 0!==e.lastSuccessfulSync&&null!==e.lastSuccessfulSync?t.lastSuccessfulSync=e.lastSuccessfulSync:t.lastSuccessfulSync=0,void 0!==e.isLogout&&null!==e.isLogout?t.isLogout=e.isLogout:t.isLogout=!1,void 0!==e.packageInstaller&&null!==e.packageInstaller?t.packageInstaller=e.packageInstaller:t.packageInstaller="",void 0!==e.syncTriggerBlizzardSessionId&&null!==e.syncTriggerBlizzardSessionId?t.syncTriggerBlizzardSessionId=e.syncTriggerBlizzardSessionId:t.syncTriggerBlizzardSessionId="",void 0!==e.syncExecutionBlizzardSessionId&&null!==e.syncExecutionBlizzardSessionId?t.syncExecutionBlizzardSessionId=e.syncExecutionBlizzardSessionId:t.syncExecutionBlizzardSessionId="",void 0!==e.cofSyncTriggerDelayFromStartupMs&&null!==e.cofSyncTriggerDelayFromStartupMs?t.cofSyncTriggerDelayFromStartupMs=e.cofSyncTriggerDelayFromStartupMs:t.cofSyncTriggerDelayFromStartupMs=0,void 0!==e.cofSyncExecutionDelayFromStartupMs&&null!==e.cofSyncExecutionDelayFromStartupMs?t.cofSyncExecutionDelayFromStartupMs=e.cofSyncExecutionDelayFromStartupMs:t.cofSyncExecutionDelayFromStartupMs=0,void 0!==e.syncTriggerTime&&null!==e.syncTriggerTime?t.syncTriggerTime=e.syncTriggerTime:t.syncTriggerTime=0,void 0!==e.decoderEncoderAvailability&&null!==e.decoderEncoderAvailability?t.decoderEncoderAvailability=At.fromPartial(e.decoderEncoderAvailability):t.decoderEncoderAvailability=void 0,void 0!==e.snapkitAppId&&null!==e.snapkitAppId?t.snapkitAppId=e.snapkitAppId:t.snapkitAppId="",void 0!==e.lenscoreVersion&&null!==e.lenscoreVersion?t.lenscoreVersion=e.lenscoreVersion:t.lenscoreVersion=0,void 0!==e.ruid&&null!==e.ruid?t.ruid=ft.KE.fromPartial(e.ruid):t.ruid=void 0,void 0!==e.configNames&&null!==e.configNames)for(const n of e.configNames)t.configNames.push(n);return t}},Nt={networkType:0,carrier:""},Ot={encode:(e,t=ae().Writer.create())=>(0!==e.networkType&&t.uint32(8).int32(e.networkType),void 0!==e.isMetered&&Et.encode({value:e.isMetered},t.uint32(18).fork()).ldelim(),void 0!==e.isRoaming&&Et.encode({value:e.isRoaming},t.uint32(26).fork()).ldelim(),""!==e.carrier&&t.uint32(34).string(e.carrier),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Nt);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.networkType=n.int32();break;case 2:i.isMetered=Et.decode(n,n.uint32()).value;break;case 3:i.isRoaming=Et.decode(n,n.uint32()).value;break;case 4:i.carrier=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Nt);return void 0!==e.networkType&&null!==e.networkType?t.networkType=e.networkType:t.networkType=0,void 0!==e.isMetered&&null!==e.isMetered?t.isMetered=e.isMetered:t.isMetered=void 0,void 0!==e.isRoaming&&null!==e.isRoaming?t.isRoaming=e.isRoaming:t.isRoaming=void 0,void 0!==e.carrier&&null!==e.carrier?t.carrier=e.carrier:t.carrier="",t}},St={isSnapVp9DecoderAvailable:!1,isSnapAv1DecoderAvailable:!1},At={encode:(e,t=ae().Writer.create())=>(!0===e.isSnapVp9DecoderAvailable&&t.uint32(8).bool(e.isSnapVp9DecoderAvailable),!0===e.isSnapAv1DecoderAvailable&&t.uint32(16).bool(e.isSnapAv1DecoderAvailable),t),decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},St);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.isSnapVp9DecoderAvailable=n.bool();break;case 2:i.isSnapAv1DecoderAvailable=n.bool();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},St);return void 0!==e.isSnapVp9DecoderAvailable&&null!==e.isSnapVp9DecoderAvailable?t.isSnapVp9DecoderAvailable=e.isSnapVp9DecoderAvailable:t.isSnapVp9DecoderAvailable=!1,void 0!==e.isSnapAv1DecoderAvailable&&null!==e.isSnapAv1DecoderAvailable?t.isSnapAv1DecoderAvailable=e.isSnapAv1DecoderAvailable:t.isSnapAv1DecoderAvailable=!1,t}};var Rt=(()=>{if("undefined"!==typeof Rt)return Rt;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function bt(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Rt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var Ct=n(57575);const Pt={configResultsEtag:"",fullResults:!1,abResultChecksum:0,iso3166Alpha2CountryCodeFromRequestIp:""},kt={encode(e,t=ae().Writer.create()){for(const n of e.configResults)Ct.nb.encode(n,t.uint32(10).fork()).ldelim();return""!==e.configResultsEtag&&t.uint32(18).string(e.configResultsEtag),void 0!==e.benchmarkRequest&&st.encode(e.benchmarkRequest,t.uint32(26).fork()).ldelim(),!0===e.fullResults&&t.uint32(32).bool(e.fullResults),0!==e.abResultChecksum&&t.uint32(40).int32(e.abResultChecksum),""!==e.iso3166Alpha2CountryCodeFromRequestIp&&t.uint32(50).string(e.iso3166Alpha2CountryCodeFromRequestIp),t},decode(e,t){const n=e instanceof ae().Reader?e:new(ae().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Pt);for(i.configResults=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.configResults.push(Ct.nb.decode(n,n.uint32()));break;case 2:i.configResultsEtag=n.string();break;case 3:i.benchmarkRequest=st.decode(n,n.uint32());break;case 4:i.fullResults=n.bool();break;case 5:i.abResultChecksum=n.int32();break;case 6:i.iso3166Alpha2CountryCodeFromRequestIp=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Pt);if(t.configResults=[],void 0!==e.configResults&&null!==e.configResults)for(const n of e.configResults)t.configResults.push(Ct.nb.fromPartial(n));return void 0!==e.configResultsEtag&&null!==e.configResultsEtag?t.configResultsEtag=e.configResultsEtag:t.configResultsEtag="",void 0!==e.benchmarkRequest&&null!==e.benchmarkRequest?t.benchmarkRequest=st.fromPartial(e.benchmarkRequest):t.benchmarkRequest=void 0,void 0!==e.fullResults&&null!==e.fullResults?t.fullResults=e.fullResults:t.fullResults=!1,void 0!==e.abResultChecksum&&null!==e.abResultChecksum?t.abResultChecksum=e.abResultChecksum:t.abResultChecksum=0,void 0!==e.iso3166Alpha2CountryCodeFromRequestIp&&null!==e.iso3166Alpha2CountryCodeFromRequestIp?t.iso3166Alpha2CountryCodeFromRequestIp=e.iso3166Alpha2CountryCodeFromRequestIp:t.iso3166Alpha2CountryCodeFromRequestIp="",t}};ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var wt;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.CAMERA=1]="CAMERA",e[e.COF=2]="COF",e[e.MDP=3]="MDP",e[e.MONETIZATION=4]="MONETIZATION",e[e.LEGACY_AB=5]="LEGACY_AB",e[e.AB_STUDY_VERSION=6]="AB_STUDY_VERSION",e[e.CAMERA_PLATFORM=7]="CAMERA_PLATFORM",e[e.PLATFORM_UI=8]="PLATFORM_UI",e[e.PLATFORM_CORE=9]="PLATFORM_CORE",e[e.MONETIZATION_UI=10]="MONETIZATION_UI",e[e.MONETIZATION_RANKING=11]="MONETIZATION_RANKING",e[e.USERS_AND_FRIENDS_UI=12]="USERS_AND_FRIENDS_UI",e[e.USERS_AND_FRIENDS_CORE=13]="USERS_AND_FRIENDS_CORE",e[e.USERS_AND_FRIENDS_RANKING=14]="USERS_AND_FRIENDS_RANKING",e[e.MESSAGING_UI=15]="MESSAGING_UI",e[e.MESSAGING_CORE=16]="MESSAGING_CORE",e[e.STORIES_UI=17]="STORIES_UI",e[e.STORIES_CORE=18]="STORIES_CORE",e[e.STORIES_RANKING=19]="STORIES_RANKING",e[e.DISCOVER_UI=20]="DISCOVER_UI",e[e.DISCOVER_CORE=21]="DISCOVER_CORE",e[e.DISCOVER_RANKING=22]="DISCOVER_RANKING",e[e.PREMIUM_CONTENT_UI=23]="PREMIUM_CONTENT_UI",e[e.PREMIUM_CONTENT_CORE=24]="PREMIUM_CONTENT_CORE",e[e.PREMIUM_CONTENT_RANKING=25]="PREMIUM_CONTENT_RANKING",e[e.COMMUNITY_UI=26]="COMMUNITY_UI",e[e.COMMUNITY_CORE=27]="COMMUNITY_CORE",e[e.COMMUNITY_RANKING=28]="COMMUNITY_RANKING",e[e.CAMERA_UI=29]="CAMERA_UI",e[e.CREATIVE_TOOLS_UI=30]="CREATIVE_TOOLS_UI",e[e.CREATIVE_TOOLS_CORE=31]="CREATIVE_TOOLS_CORE",e[e.CAMERA_PLATFORM_UI=32]="CAMERA_PLATFORM_UI",e[e.CAMERA_PLATFORM_RANKING=33]="CAMERA_PLATFORM_RANKING",e[e.PERCEPTION_UI=34]="PERCEPTION_UI",e[e.PERCEPTION_CORE=35]="PERCEPTION_CORE",e[e.PERCEPTION_RANKING=36]="PERCEPTION_RANKING",e[e.MEDIA_UI=37]="MEDIA_UI",e[e.MEMORIES_UI=38]="MEMORIES_UI",e[e.MEMORIES_CORE=39]="MEMORIES_CORE",e[e.MAP_UI=40]="MAP_UI",e[e.MAP_CORE=41]="MAP_CORE",e[e.SEARCH_UI=42]="SEARCH_UI",e[e.SEARCH_CORE=43]="SEARCH_CORE",e[e.SEARCH_RANKING=44]="SEARCH_RANKING",e[e.COGNAC_UI=45]="COGNAC_UI",e[e.COGNAC_CORE=46]="COGNAC_CORE",e[e.BITMOJI_UI=47]="BITMOJI_UI",e[e.BITMOJI_CORE=48]="BITMOJI_CORE",e[e.SPECTACLES_UI=49]="SPECTACLES_UI",e[e.SPECTACLES_CORE=50]="SPECTACLES_CORE",e[e.SNAP_KIT_UI=51]="SNAP_KIT_UI",e[e.SNAP_KIT_CORE=52]="SNAP_KIT_CORE",e[e.SNAP_PRO_UI=53]="SNAP_PRO_UI",e[e.SNAP_PRO_CORE=54]="SNAP_PRO_CORE",e[e.NGS_UI=55]="NGS_UI",e[e.CAMEOS_UI=56]="CAMEOS_UI",e[e.CAMEOS_CORE=57]="CAMEOS_CORE",e[e.CAMEOS_RANKING=58]="CAMEOS_RANKING",e[e.BLIZZARD_CLIENT=59]="BLIZZARD_CLIENT",e[e.BLIZZARD_BACKEND=60]="BLIZZARD_BACKEND",e[e.AB_SEGMENT=61]="AB_SEGMENT",e[e.CONFIG_ROLLOUT=62]="CONFIG_ROLLOUT",e[e.COMMERCE_BACKEND=63]="COMMERCE_BACKEND",e[e.LENS_CORE=64]="LENS_CORE",e[e.CAMERA_KIT_CORE=65]="CAMERA_KIT_CORE",e[e.MDP_CONTENT_MANAGER=66]="MDP_CONTENT_MANAGER",e[e.REQUEST_DOMAIN_ROUTING=67]="REQUEST_DOMAIN_ROUTING",e[e.CDN_ROUTING=68]="CDN_ROUTING",e[e.GRAPHENE_SAMPLING=69]="GRAPHENE_SAMPLING",e[e.WEB_STORY_CORE=70]="WEB_STORY_CORE",e[e.WEB_STORY_UI=71]="WEB_STORY_UI",e[e.CLIENT_SWITCHBOARD=72]="CLIENT_SWITCHBOARD",e[e.MCS=73]="MCS",e[e.SHARING_UI=74]="SHARING_UI",e[e.SHARING_CORE=75]="SHARING_CORE",e[e.SHARING_RANKING=76]="SHARING_RANKING",e[e.MDP_PLAYBACK=77]="MDP_PLAYBACK",e[e.CAMERA_BUSINESS=78]="CAMERA_BUSINESS",e[e.ADDLIVE=79]="ADDLIVE",e[e.AD_KIT_CORE=80]="AD_KIT_CORE",e[e.ADDLIVE_UI=81]="ADDLIVE_UI",e[e.ADDLIVE_CORE=82]="ADDLIVE_CORE",e[e.ADDLIVE_RANKING=83]="ADDLIVE_RANKING",e[e.STORY_STUDIO_LITE_UI=84]="STORY_STUDIO_LITE_UI",e[e.STORY_STUDIO_LITE_CORE=85]="STORY_STUDIO_LITE_CORE",e[e.COMMERCE_UI=86]="COMMERCE_UI",e[e.COMMERCE_CORE=87]="COMMERCE_CORE",e[e.COMMERCE_RANKING=88]="COMMERCE_RANKING",e[e.STORIES_UX=89]="STORIES_UX",e[e.CONTEXT_UI=90]="CONTEXT_UI",e[e.CONTEXT_CORE=91]="CONTEXT_CORE",e[e.LENS_TARGETING=92]="LENS_TARGETING",e[e.SPOTLIGHT_RANKING=93]="SPOTLIGHT_RANKING",e[e.SPOTLIGHT_CORE=94]="SPOTLIGHT_CORE",e[e.SPOTLIGHT_UI=95]="SPOTLIGHT_UI",e[e.ACTIVATION_CORE=96]="ACTIVATION_CORE",e[e.FRIENDING=97]="FRIENDING",e[e.SAFETY=98]="SAFETY",e[e.LOGIN=99]="LOGIN",e[e.MYLENSES_WEB_CORE=100]="MYLENSES_WEB_CORE",e[e.SECURITY=101]="SECURITY",e[e.AB_CONSOLE=102]="AB_CONSOLE",e[e.AD_MODERATION=103]="AD_MODERATION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(wt||(wt={})),ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var Ut=n(85772),Dt=n(42337);class Lt{constructor(e,t){this.host=e,this.options=t}unary(e,t,n){var r;const i=Object.assign(Object.assign({},t),e.requestType),o=n&&this.options.metadata?new Dt.BrowserHeaders(Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.metadata),n)):n||this.options.metadata;return new Promise(((t,n)=>{Ut.grpc.unary(e,{request:i,host:this.host,metadata:o,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(e.status===Ut.grpc.Code.OK)t(e.message);else{const t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,n(t)}}})}))}}const Mt=Symbol("context key"),Vt={host:"https://aws.api.snapchat.com"};function Gt(){return window[Mt]}function Ft(e=Vt){const t=Gt();if(t){if(JSON.stringify(e)!==JSON.stringify(t.settings))throw new Error("initConfigsClient() has already been called")}else!function(e){window[Mt]=e}({settings:e,rpc:new Lt(e.host,{metadata:e.metadata})})}Object.defineProperty(window,Mt,{enumerable:!1,writable:!0});const jt={methodName:"targetingQuery",service:{serviceName:"snapchat.cdp.cof.CircumstancesService"},requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return _t.encode(this).finish()}},responseType:{deserializeBinary:e=>Object.assign(Object.assign({},kt.decode(e)),{toObject(){return this}})}};function xt(e,t){const{rpc:n}=function(){const e=Gt();if(!e)throw new Error("initConfigsClient() has to be called on app startup");return e}();return n.unary(jt,_t.fromPartial(e),t)}n(29204);var Kt,Bt;!function(e){e[e.UNKNOWN_UNSET=0]="UNKNOWN_UNSET",e[e.USER=1]="USER",e[e.SNAPCHAT_CLIENT=2]="SNAPCHAT_CLIENT",e[e.WEB_CLIENT=3]="WEB_CLIENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Kt||(Kt={})),function(e){e[e.UNSET=0]="UNSET",e[e.SERVER_TRIGGER=1]="SERVER_TRIGGER",e[e.CLIENT_TRIGGER=2]="CLIENT_TRIGGER",e[e.ALLOCATION=3]="ALLOCATION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Bt||(Bt={}));ae().util.Long!==ce()&&(ae().util.Long=ce(),ae().configure());var Wt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Yt=()=>e=>(t,n)=>Wt(void 0,void 0,void 0,(function*(){const r=yield e(t,n);let i;try{i=yield r.arrayBuffer()}catch(o){i=new ArrayBuffer(0)}return[i,r]}));var Ht=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Jt="x-CameraKitMetricDimension-",zt=(e,t)=>{const n=e.headers;return Object.entries(Object.fromEntries(t)).map((([e,t])=>n.set(`${Jt}${e}`,t))),new Request(e,{headers:n})},Zt=(e,t)=>{const n=(t,n,r)=>{r&&void 0!==n&&e.histogram("download_size_kb",n/1024,new Map([["content_type",t]]))},r=(t,n,r,i)=>{i&&r&&e.timer("download_latency",r,new Map([["content_type",t],["network_type",n]]))},i=(t,n,r)=>{var i;const o=null!==(i=null===r||void 0===r?void 0:r.status.toString())&&void 0!==i?i:"0";e.count("download_finished",1,new Map([["content_type",t],["status",o],["network_type",n]]))},o=(e,o,a,s)=>{var c,u,l;const d=e.get("content_type"),p=null!==(l=null===(u=null===(c=navigator.connection)||void 0===c?void 0:c.type)||void 0===u?void 0:u.toString())&&void 0!==l?l:"unknown";switch(d){case"lens_content":i(d,p,s),r(d,p,o,s),n(d,a,s),((e,n,r,i)=>{const o=e.get("automatic_download"),a=e.get("lens_id");if(!i||!n||!o||!a||void 0===r)return;const s={name:"lensDownload",lensId:a,automaticDownload:"true"===o,sizeByte:r,downloadTimeSec:n/1e3};t.recordEvent(s)})(e,o,a,s);case"lens_device_dependent_asset":i(d,p,s),r(d,p,o,s),n(d,a,s)}};return e=>(t,n)=>Ht(void 0,void 0,void 0,(function*(){const r="string"===typeof t?new Request(t):t,i=(e=>{const t=Array.from(e.headers.entries()).filter((([e])=>e.startsWith(Jt.toLowerCase()))).map((([e,t])=>[e.substring(Jt.length),t]));return new Map(t)})(r),a=performance.now();try{const t=yield e(r,n),s=performance.now()-a,c=(e=>{if(null==e)return 0;const t=parseInt(e);return isNaN(t)?0:t})(t.headers.get("content-length"));return o(i,s,c,t),t}catch(s){throw o(i),s}}))};var qt=n(88767),$t=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Xt=(e,t=Number.POSITIVE_INFINITY)=>{const n=[];let r=0;const i=e=>$t(void 0,void 0,void 0,(function*(){try{r++;const t=yield e.map();t&&e.next(t)}catch(o){e.reject(o)}finally{r--}for(;n.length>0&&r<t;)i(n.shift())}));return o=>(a,s)=>new Promise(((c,u)=>{const l={map:()=>e(a),next:e=>o(e,s).then(c).catch(u),reject:u};r<t?i(l):n.push(l)}))};var Qt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const en=({batchReduce:e,isBatchComplete:t,maxBatchAge:n})=>{let r,i;const o=Xt((t=>Qt(void 0,void 0,void 0,(function*(){return i=yield e(i,t),i}))),1),a=(e,t,n)=>{i=void 0,void 0!==r&&(clearTimeout(r),r=void 0),e(t,n).catch((()=>{}))};return e=>(s,c)=>{void 0!==n&&void 0===r&&(r=window.setTimeout((()=>{i&&a(e,i,c)}),n));return o((n=>Qt(void 0,void 0,void 0,(function*(){t(n)&&a(e,n,c)}))))(s)}};var tn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const nn=e=>{let t=!0;const n=r=>(i,o)=>tn(void 0,void 0,void 0,(function*(){(r=>{tn(void 0,void 0,void 0,(function*(){if(t){t=!1;try{const t=yield e.removeAll();if(0===t.length)return;t.forEach((([e,t])=>n(r)(e,t).catch((e=>{console.error(e)}))))}catch(i){console.error(i)}}}))})(r);const a=e.store([i,o]).catch((e=>(console.error(e),null)));try{return yield r(i,o)}finally{a.then((t=>{if(null!==t)return e.remove(t)})).catch((e=>console.error(e)))}}));return n};var rn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function on(e){const t=new Promise(((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error)}));return t.request=e,t}function an(e){return new Promise(((t,n)=>{e.onsuccess=()=>{const n=e.result;t(n?{cursor:n,continue:()=>(n.continue(),an(e))}:{cursor:null,continue:()=>Promise.reject()})},e.onerror=()=>n(e.error)}))}class sn{constructor(e){var t;this.databaseName=`Snap.CameraKit.${e.databaseName}`,this.databaseVersion=e.databaseVersion,this.objectStore=null!==(t=e.objectStore)&&void 0!==t?t:e.databaseName,this.db=this.openDatabase(indexedDB.open(this.databaseName,this.databaseVersion)),this.size=0}retrieve(e){return this.simpleTransaction("readonly",(t=>t.get(e)))}retrieveAll(){return this.simpleTransaction("readonly",(e=>e.getAll()))}remove(e){return rn(this,void 0,void 0,(function*(){yield this.simpleTransaction("readwrite",(t=>t.delete(e))),this.size--}))}removeAll(){return rn(this,void 0,void 0,(function*(){const e=[],{store:t,done:n}=yield this.transaction("readwrite");let r=yield an(t.openCursor());const i=[];for(;r.cursor;)e.push(r.cursor.value),i.push(on(t.delete(r.cursor.key))),r=yield r.continue();return yield Promise.all(i.concat(n)),this.size=0,e}))}store(e,t){return rn(this,void 0,void 0,(function*(){const n="undefined"===typeof t?void 0:e,r="undefined"===typeof t?e:t;if(!(e=>"string"===typeof e||"number"===typeof e)(n)&&"undefined"!==typeof n)throw new TypeError("IndexedDBPersistence failed to store a value. Invalid key type: "+typeof n);const i=yield this.simpleTransaction("readwrite",(e=>e.add(r,n)));return this.size++,i}))}openDatabase(e){return rn(this,void 0,void 0,(function*(){const t=on(e);t.request.onupgradeneeded=()=>{try{t.request.result.createObjectStore(this.objectStore,{autoIncrement:!0})}catch(e){if(e instanceof DOMException&&"ConstraintError"===e.name)return;throw e}};const n=yield t;return n.onclose=()=>{this.db=this.openDatabase(indexedDB.open(this.databaseName,this.databaseVersion))},n}))}simpleTransaction(e,t){return rn(this,void 0,void 0,(function*(){const{store:n,done:r}=yield this.transaction(e),[i]=yield Promise.all([on(t(n)),r]);return i}))}transaction(e){return rn(this,void 0,void 0,(function*(){const t=(yield this.db).transaction(this.objectStore,e),n=t.objectStore(this.objectStore),r=new Promise(((e,n)=>{t.oncomplete=()=>e(),t.onerror=()=>n(t.error),t.onabort=()=>n(new DOMException("The transaction was aborted","AbortError"))}));return{tx:t,store:n,done:r}}))}}const cn={fromPartial(e){var t,n,r,i,o,a,s,c,u,l,d,p,f,v,E,m,y,I,g,h,T;const _={eventName:"",serverTs:0,userId:"",userAgent:"",country:"",city:"",region:"",eventId:"",instanceId:"",sequenceId:0,osType:"",osVersion:"",appVersion:"",appBuild:"",serverUploadTs:0,eventTime:0,serverReceiptTime:0,maxSequenceIdOnInstance:0,userGuid:"",collection:0,serviceId:"",eventData:void 0};return _.eventName=null!==(t=e.eventName)&&void 0!==t?t:"",_.serverTs=null!==(n=e.serverTs)&&void 0!==n?n:0,_.userId=null!==(r=e.userId)&&void 0!==r?r:"",_.userAgent=null!==(i=e.userAgent)&&void 0!==i?i:"",_.country=null!==(o=e.country)&&void 0!==o?o:"",_.city=null!==(a=e.city)&&void 0!==a?a:"",_.region=null!==(s=e.region)&&void 0!==s?s:"",_.eventId=null!==(c=e.eventId)&&void 0!==c?c:"",_.instanceId=null!==(u=e.instanceId)&&void 0!==u?u:"",_.sequenceId=null!==(l=e.sequenceId)&&void 0!==l?l:0,_.osType=null!==(d=e.osType)&&void 0!==d?d:"",_.osVersion=null!==(p=e.osVersion)&&void 0!==p?p:"",_.appVersion=null!==(f=e.appVersion)&&void 0!==f?f:"",_.appBuild=null!==(v=e.appBuild)&&void 0!==v?v:"",_.serverUploadTs=null!==(E=e.serverUploadTs)&&void 0!==E?E:0,_.eventTime=null!==(m=e.eventTime)&&void 0!==m?m:0,_.serverReceiptTime=null!==(y=e.serverReceiptTime)&&void 0!==y?y:0,_.maxSequenceIdOnInstance=null!==(I=e.maxSequenceIdOnInstance)&&void 0!==I?I:0,_.userGuid=null!==(g=e.userGuid)&&void 0!==g?g:"",_.collection=null!==(h=e.collection)&&void 0!==h?h:0,_.serviceId=null!==(T=e.serviceId)&&void 0!==T?T:"",_.eventData=void 0!==e.eventData&&null!==e.eventData?un.fromPartial(e.eventData):void 0,_}},un={fromPartial(e){const t={cameraKitLensSpin:void 0,cameraKitLensSwipe:void 0,cameraKitLensDownload:void 0};return t.cameraKitLensSpin=void 0!==e.cameraKitLensSpin&&null!==e.cameraKitLensSpin?dn.fromPartial(e.cameraKitLensSpin):void 0,t.cameraKitLensSwipe=void 0!==e.cameraKitLensSwipe&&null!==e.cameraKitLensSwipe?pn.fromPartial(e.cameraKitLensSwipe):void 0,t.cameraKitLensDownload=void 0!==e.cameraKitLensDownload&&null!==e.cameraKitLensDownload?fn.fromPartial(e.cameraKitLensDownload):void 0,t}};var ln;!function(e){e[e.COLLECTION_UNUSED=0]="COLLECTION_UNUSED",e[e.GAE=1]="GAE",e[e.GCE_M=2]="GCE_M",e[e.GCE_S=3]="GCE_S",e[e.GCE_T=4]="GCE_T",e[e.GKE_M=5]="GKE_M",e[e.GKE_S=6]="GKE_S",e[e.GKE_T=7]="GKE_T",e[e.LOCAL=8]="LOCAL",e[e.GCE_ST=9]="GCE_ST",e[e.GKE_ST=10]="GKE_ST",e[e.GCE_C=11]="GCE_C",e[e.GCE_SC=12]="GCE_SC",e[e.GCE_TC=13]="GCE_TC",e[e.GCE_TSC=14]="GCE_TSC",e[e.GKE_C=15]="GKE_C",e[e.GKE_SC=16]="GKE_SC",e[e.GKE_TC=17]="GKE_TC",e[e.GKE_TSC=18]="GKE_TSC",e[e.GKE_W=19]="GKE_W",e[e.GKE_WT=20]="GKE_WT",e[e.GKE_WC=21]="GKE_WC",e[e.GKE_WSC=22]="GKE_WSC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ln||(ln={}));const dn={fromPartial(e){var t,n;const r={cameraKitEventBase:void 0,lensId:"",viewTimeSec:0};return r.cameraKitEventBase=void 0!==e.cameraKitEventBase&&null!==e.cameraKitEventBase?vn.fromPartial(e.cameraKitEventBase):void 0,r.lensId=null!==(t=e.lensId)&&void 0!==t?t:"",r.viewTimeSec=null!==(n=e.viewTimeSec)&&void 0!==n?n:0,r}};const pn={fromPartial(e){var t,n,r,i,o,a,s;const c={cameraKitEventBase:void 0,lensId:"",lensFrameProcessingTimeMsAvg:0,lensFrameProcessingTimeMsStd:0,viewTimeSec:0,recordingTimeSec:0,applyDelaySec:0,avgFps:0};return c.cameraKitEventBase=void 0!==e.cameraKitEventBase&&null!==e.cameraKitEventBase?vn.fromPartial(e.cameraKitEventBase):void 0,c.lensId=null!==(t=e.lensId)&&void 0!==t?t:"",c.lensFrameProcessingTimeMsAvg=null!==(n=e.lensFrameProcessingTimeMsAvg)&&void 0!==n?n:0,c.lensFrameProcessingTimeMsStd=null!==(r=e.lensFrameProcessingTimeMsStd)&&void 0!==r?r:0,c.viewTimeSec=null!==(i=e.viewTimeSec)&&void 0!==i?i:0,c.recordingTimeSec=null!==(o=e.recordingTimeSec)&&void 0!==o?o:0,c.applyDelaySec=null!==(a=e.applyDelaySec)&&void 0!==a?a:0,c.avgFps=null!==(s=e.avgFps)&&void 0!==s?s:0,c}};const fn={fromPartial(e){var t,n,r,i;const o={cameraKitEventBase:void 0,lensId:"",automaticDownload:!1,downloadTimeSec:0,sizeByte:0};return o.cameraKitEventBase=void 0!==e.cameraKitEventBase&&null!==e.cameraKitEventBase?vn.fromPartial(e.cameraKitEventBase):void 0,o.lensId=null!==(t=e.lensId)&&void 0!==t?t:"",o.automaticDownload=null!==(n=e.automaticDownload)&&void 0!==n&&n,o.downloadTimeSec=null!==(r=e.downloadTimeSec)&&void 0!==r?r:0,o.sizeByte=null!==(i=e.sizeByte)&&void 0!==i?i:0,o}},vn={fromPartial(e){var t,n,r,i,o,a,s,c,u;const l={kitEventBase:void 0,deviceCluster:0,cameraKitVersion:"",lensCoreVersion:"",deviceModel:"",cameraKitVariant:0,cameraKitFlavor:0,appId:"",deviceConnectivity:0,sessionId:""};return l.kitEventBase=void 0!==e.kitEventBase&&null!==e.kitEventBase?En.fromPartial(e.kitEventBase):void 0,l.deviceCluster=null!==(t=e.deviceCluster)&&void 0!==t?t:0,l.cameraKitVersion=null!==(n=e.cameraKitVersion)&&void 0!==n?n:"",l.lensCoreVersion=null!==(r=e.lensCoreVersion)&&void 0!==r?r:"",l.deviceModel=null!==(i=e.deviceModel)&&void 0!==i?i:"",l.cameraKitVariant=null!==(o=e.cameraKitVariant)&&void 0!==o?o:0,l.cameraKitFlavor=null!==(a=e.cameraKitFlavor)&&void 0!==a?a:0,l.appId=null!==(s=e.appId)&&void 0!==s?s:"",l.deviceConnectivity=null!==(c=e.deviceConnectivity)&&void 0!==c?c:0,l.sessionId=null!==(u=e.sessionId)&&void 0!==u?u:"",l}},En={fromPartial(e){var t,n,r,i,o,a,s,c,u,l,d,p,f,v,E,m,y,I,g;const h={oauthClientId:"",locale:"",kitUserAgent:"",ipAddress:"",osMinorVersion:"",kitVariant:0,kitVariantVersion:"",kitClientTimestampMillis:0,clientSequenceId:0,maxClientSequenceIdOnInstance:0,targetArchitecture:"",runningWithDebuggerAttached:!1,runningInTests:!1,runningInSimulator:!1,isAppPrerelease:!1,kitAppId:"",kitSessionId:"",kitPluginType:0,isFromReactNativePlugin:!1};return h.oauthClientId=null!==(t=e.oauthClientId)&&void 0!==t?t:"",h.locale=null!==(n=e.locale)&&void 0!==n?n:"",h.kitUserAgent=null!==(r=e.kitUserAgent)&&void 0!==r?r:"",h.ipAddress=null!==(i=e.ipAddress)&&void 0!==i?i:"",h.osMinorVersion=null!==(o=e.osMinorVersion)&&void 0!==o?o:"",h.kitVariant=null!==(a=e.kitVariant)&&void 0!==a?a:0,h.kitVariantVersion=null!==(s=e.kitVariantVersion)&&void 0!==s?s:"",h.kitClientTimestampMillis=null!==(c=e.kitClientTimestampMillis)&&void 0!==c?c:0,h.clientSequenceId=null!==(u=e.clientSequenceId)&&void 0!==u?u:0,h.maxClientSequenceIdOnInstance=null!==(l=e.maxClientSequenceIdOnInstance)&&void 0!==l?l:0,h.targetArchitecture=null!==(d=e.targetArchitecture)&&void 0!==d?d:"",h.runningWithDebuggerAttached=null!==(p=e.runningWithDebuggerAttached)&&void 0!==p&&p,h.runningInTests=null!==(f=e.runningInTests)&&void 0!==f&&f,h.runningInSimulator=null!==(v=e.runningInSimulator)&&void 0!==v&&v,h.isAppPrerelease=null!==(E=e.isAppPrerelease)&&void 0!==E&&E,h.kitAppId=null!==(m=e.kitAppId)&&void 0!==m?m:"",h.kitSessionId=null!==(y=e.kitSessionId)&&void 0!==y?y:"",h.kitPluginType=null!==(I=e.kitPluginType)&&void 0!==I?I:0,h.isFromReactNativePlugin=null!==(g=e.isFromReactNativePlugin)&&void 0!==g&&g,h}};var mn,yn,In,gn,hn;!function(e){e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN=0]="CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI=1]="CAMERA_KIT_CONNECTIVITY_TYPE_WIFI",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE=2]="CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE=3]="CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH=4]="CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(mn||(mn={})),function(e){e[e.CAMERA_KIT_FLAVOR_UNKNOWN=0]="CAMERA_KIT_FLAVOR_UNKNOWN",e[e.CAMERA_KIT_FLAVOR_DEBUG=1]="CAMERA_KIT_FLAVOR_DEBUG",e[e.CAMERA_KIT_FLAVOR_RELEASE=2]="CAMERA_KIT_FLAVOR_RELEASE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(yn||(yn={})),function(e){e[e.CAMERA_KIT_VARIANT_UNKNOWN=0]="CAMERA_KIT_VARIANT_UNKNOWN",e[e.CAMERA_KIT_VARIANT_PARTNER=1]="CAMERA_KIT_VARIANT_PARTNER",e[e.CAMERA_KIT_VARIANT_PUBLIC=2]="CAMERA_KIT_VARIANT_PUBLIC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(In||(In={})),function(e){e[e.NO_PLUGIN=0]="NO_PLUGIN",e[e.UNITY=1]="UNITY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(gn||(gn={})),function(e){e[e.UNKNOWN_KIT_TYPE=0]="UNKNOWN_KIT_TYPE",e[e.BITMOJI_KIT=1]="BITMOJI_KIT",e[e.CREATIVE_KIT=2]="CREATIVE_KIT",e[e.LOGIN_KIT=3]="LOGIN_KIT",e[e.STORY_KIT=4]="STORY_KIT",e[e.CAMERA_KIT=5]="CAMERA_KIT",e[e.SHOP_KIT=6]="SHOP_KIT",e[e.EULA_KIT=7]="EULA_KIT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(hn||(hn={}));var Tn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const _n=e=>{let t;const n=Xt((n=>Tn(void 0,void 0,void 0,(function*(){if(void 0!==t){const n=e-(Date.now()-t);n>0&&(yield(e=>new Promise((t=>setTimeout(t,e))))(n))}return t=Date.now(),n}))),1);return e=>(t,r)=>n(e)(t,r)},Nn=o("metricsHandler",[J.token],(e=>new u(e).map(_n(1e3)).handler));class On{constructor(e){this.metricsHandler=e,this.sessionId=(0,qt.Z)()}recordEvent(e){const t=this.addEventBase(e);switch(e.name){case"lensDownload":return this.sendServerEvent("CAMERA_KIT_LENS_DOWNLOAD",{cameraKitLensDownload:fn.fromPartial(t)});case"lensView":return this.sendServerEvent("CAMERA_KIT_LENS_SWIPE",{cameraKitLensSwipe:pn.fromPartial(t)});case"lensWait":return this.sendServerEvent("CAMERA_KIT_LENS_SPIN",{cameraKitLensSpin:dn.fromPartial(t)});default:$e()}}addEventBase(e){return Object.assign(Object.assign({},e),{cameraKitEventBase:vn.fromPartial({kitEventBase:En.fromPartial({locale:Y.locale,kitVariant:hn.CAMERA_KIT,kitVariantVersion:Y.sdkShortVersion,kitClientTimestampMillis:Date.now()}),deviceCluster:0,cameraKitVersion:Y.sdkLongVersion,lensCoreVersion:Y.lensCoreVersion,deviceModel:Y.deviceModel,cameraKitVariant:In.CAMERA_KIT_VARIANT_PARTNER,cameraKitFlavor:yn.CAMERA_KIT_FLAVOR_DEBUG,appId:Y.appId,deviceConnectivity:mn.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI,sessionId:this.sessionId})})}sendServerEvent(e,t){return this.metricsHandler(cn.fromPartial({eventName:e,osType:Y.osType,osVersion:Y.osVersion,maxSequenceIdOnInstance:0,sequenceId:0,eventData:t}))}}const Sn=o("businessEventsReporter",[Nn.token],(e=>{const t=new u(e).map(Xt((e=>{const t={batchEvents:{"@type":"com.snapchat.analytics.blizzard.ServerEventBatch",serverEvents:e}};return new Request("https://api-kit.snapchat.com/com.snap.camerakit.v3.Metrics/metrics/business_events",{method:"POST",body:JSON.stringify(t),credentials:"include",keepalive:!1})}))).map(en({batchReduce:(e,t)=>{const n=null!==e&&void 0!==e?e:[];return n.push(t),n},isBatchComplete:e=>e.length>=100,maxBatchAge:5e3})).map(nn(new sn({databaseName:"BusinessEvents"}))).handler;return new On(t)}));const An={encode:(e,t=oe.Writer.create())=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.seconds=bn(n.int64());break;case 2:i.nanos=n.int32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({seconds:Cn(e.seconds)?Number(e.seconds):0,nanos:Cn(e.nanos)?Number(e.nanos):0}),toJSON(e){const t={};return void 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),void 0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},fromPartial(e){var t,n;const r={seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};var Rn=(()=>{if("undefined"!==typeof Rn)return Rn;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function bn(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Rn.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function Cn(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const Pn={encode(e,t=oe.Writer.create()){var n,r,i;return""!==e.name&&t.uint32(10).string(e.name),void 0!==e.timestamp&&An.encode(function(e){const t=e.getTime()/1e3,n=e.getTime()%1e3*1e6;return{seconds:t,nanos:n}}(e.timestamp),t.uint32(18).fork()).ldelim(),"count"===(null===(n=e.metric)||void 0===n?void 0:n.$case)&&t.uint32(24).uint64(e.metric.count),"latencyMillis"===(null===(r=e.metric)||void 0===r?void 0:r.$case)&&t.uint32(32).uint64(e.metric.latencyMillis),"histogram"===(null===(i=e.metric)||void 0===i?void 0:i.$case)&&t.uint32(40).int64(e.metric.histogram),t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={name:"",timestamp:void 0,metric:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.timestamp=Un(An.decode(n,n.uint32()));break;case 3:i.metric={$case:"count",count:Ln(n.uint64())};break;case 4:i.metric={$case:"latencyMillis",latencyMillis:Ln(n.uint64())};break;case 5:i.metric={$case:"histogram",histogram:Ln(n.int64())};break;default:n.skipType(7&e)}}return i},fromJSON:e=>({name:Mn(e.name)?String(e.name):"",timestamp:Mn(e.timestamp)?Dn(e.timestamp):void 0,metric:Mn(e.count)?{$case:"count",count:Number(e.count)}:Mn(e.latencyMillis)?{$case:"latencyMillis",latencyMillis:Number(e.latencyMillis)}:Mn(e.histogram)?{$case:"histogram",histogram:Number(e.histogram)}:void 0}),toJSON(e){var t,n,r,i,o,a;const s={};return void 0!==e.name&&(s.name=e.name),void 0!==e.timestamp&&(s.timestamp=e.timestamp.toISOString()),"count"===(null===(t=e.metric)||void 0===t?void 0:t.$case)&&(s.count=Math.round(null===(n=e.metric)||void 0===n?void 0:n.count)),"latencyMillis"===(null===(r=e.metric)||void 0===r?void 0:r.$case)&&(s.latencyMillis=Math.round(null===(i=e.metric)||void 0===i?void 0:i.latencyMillis)),"histogram"===(null===(o=e.metric)||void 0===o?void 0:o.$case)&&(s.histogram=Math.round(null===(a=e.metric)||void 0===a?void 0:a.histogram)),s},fromPartial(e){var t,n,r,i,o,a,s,c,u,l,d;const p={name:"",timestamp:void 0,metric:void 0};return p.name=null!==(t=e.name)&&void 0!==t?t:"",p.timestamp=null!==(n=e.timestamp)&&void 0!==n?n:void 0,"count"===(null===(r=e.metric)||void 0===r?void 0:r.$case)&&void 0!==(null===(i=e.metric)||void 0===i?void 0:i.count)&&null!==(null===(o=e.metric)||void 0===o?void 0:o.count)&&(p.metric={$case:"count",count:e.metric.count}),"latencyMillis"===(null===(a=e.metric)||void 0===a?void 0:a.$case)&&void 0!==(null===(s=e.metric)||void 0===s?void 0:s.latencyMillis)&&null!==(null===(c=e.metric)||void 0===c?void 0:c.latencyMillis)&&(p.metric={$case:"latencyMillis",latencyMillis:e.metric.latencyMillis}),"histogram"===(null===(u=e.metric)||void 0===u?void 0:u.$case)&&void 0!==(null===(l=e.metric)||void 0===l?void 0:l.histogram)&&null!==(null===(d=e.metric)||void 0===d?void 0:d.histogram)&&(p.metric={$case:"histogram",histogram:e.metric.histogram}),p}};const kn={encode(e,t=oe.Writer.create()){for(const n of e.metrics)Pn.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={metrics:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.metrics.push(Pn.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromJSON:e=>({metrics:Array.isArray(null===e||void 0===e?void 0:e.metrics)?e.metrics.map((e=>Pn.fromJSON(e))):[]}),toJSON(e){const t={};return e.metrics?t.metrics=e.metrics.map((e=>e?Pn.toJSON(e):void 0)):t.metrics=[],t},fromPartial(e){var t;const n={metrics:[]};return n.metrics=(null===(t=e.metrics)||void 0===t?void 0:t.map((e=>Pn.fromPartial(e))))||[],n}};var wn=(()=>{if("undefined"!==typeof wn)return wn;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function Un(e){let t=1e3*e.seconds;return t+=e.nanos/1e6,new Date(t)}function Dn(e){return e instanceof Date?e:"string"===typeof e?new Date(e):Un(An.fromJSON(e))}function Ln(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new wn.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function Mn(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var Vn,Gn;!function(e){e.CAMERA_KIT_FLAVOR_UNSET="CAMERA_KIT_FLAVOR_UNSET",e.CAMERA_KIT_FLAVOR_DEBUG="CAMERA_KIT_FLAVOR_DEBUG",e.CAMERA_KIT_FLAVOR_RELEASE="CAMERA_KIT_FLAVOR_RELEASE",e.UNRECOGNIZED="UNRECOGNIZED"}(Vn||(Vn={})),function(e){e.CAMERA_KIT_CONNECTIVITY_TYPE_UNSET="CAMERA_KIT_CONNECTIVITY_TYPE_UNSET",e.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI="CAMERA_KIT_CONNECTIVITY_TYPE_WIFI",e.CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE="CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE",e.CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE="CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE",e.CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH="CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH",e.UNRECOGNIZED="UNRECOGNIZED"}(Gn||(Gn={}));var Fn=(()=>{if("undefined"!==typeof Fn)return Fn;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const jn={encode:(e,t=oe.Writer.create())=>(void 0!==e.metrics&&kn.encode(e.metrics,t.uint32(10).fork()).ldelim(),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={metrics:void 0};for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.metrics=kn.decode(n,n.uint32());else n.skipType(7&e)}return i},fromJSON:e=>({metrics:xn(e.metrics)?kn.fromJSON(e.metrics):void 0}),toJSON(e){const t={};return void 0!==e.metrics&&(t.metrics=e.metrics?kn.toJSON(e.metrics):void 0),t},fromPartial(e){const t={metrics:void 0};return t.metrics=void 0!==e.metrics&&null!==e.metrics?kn.fromPartial(e.metrics):void 0,t}};function xn(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());class Kn{constructor(e){this.metricsHandler=e}count(e,t,n){return this.record(e,{$case:"count",count:t},n)}timer(e,t,n){return this.record(e,{$case:"latencyMillis",latencyMillis:t},n)}histogram(e,t,n){return this.record(e,{$case:"histogram",histogram:t},n)}record(e,t,n){const r=n?`.${Array.from(n.entries()).map((e=>e.join("."))).join(".")}`:"";return this.metricsHandler({name:`${e}${r}`,timestamp:new Date,metric:t})}}const Bn=o("operationalMetricsReporter",[Nn.token],(e=>{const t=new u(e).map(Xt((e=>{const t={metrics:e};return new Request("https://api-kit.snapchat.com/com.snap.camerakit.v3.Metrics/metrics/operational_metrics",{method:"POST",body:JSON.stringify(jn.toJSON(t)),credentials:"include",keepalive:!1})}))).map(en({batchReduce:(e,t)=>{const n=null!==e&&void 0!==e?e:{metrics:[]};return n.metrics.push(t),n},isBatchComplete:e=>e.metrics.length>=100,maxBatchAge:5e3})).map(nn(new sn({databaseName:"OperationalMetrics"}))).handler;return new Kn(t)}));var Wn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function Yn(e){return e.reduce(((e,{configId:t,value:n})=>{if(!function(e){return T(e)&&m(e.stringValue)}(n))return console.info(`COF config with id=${t} is skipped because does not contain "stringValue" property.`),e;try{const r=JSON.parse(n.stringValue);!function(e){return T(e)&&m(e.url)}(r)?console.info(`COF config with id=${t} is skipped because does not contain "url" property.`):e.set(t,r.url)}catch(r){console.info(`COF config with id=${t} is skipped because "stringValue" can't be parsed as JSON.`)}return e}),new Map)}const Hn=o("deviceDependentAssetLoader",[R.token,Bn.token,Sn.token],((e,t,n)=>{const r=new u(e).map(Zt(t,n)).map(Yt()).handler;Ft();const i=xt({namespaces:[wt.LENS_CORE]},{"x-snap-client-user-agent":Y.userAgent}),o=Je(Yn);return function({assetId:e}){return Wn(this,void 0,void 0,(function*(){const t=yield i.catch((e=>{throw Xe(new Error("Failed to fetch lens asset configuration from COF."),e)})),n=o(t.configResults).get(e);if(!n)throw new Error(`Cannot load lens asset ${e}. No URL found in COF for this asset.`);const[a,s]=yield r(zt(new Request(n),new Map([["content_type","lens_device_dependent_asset"]])));if(!s.ok)throw s;return a}))}}));var Jn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const zn=o("remoteMediaAssetLoader",[R.token],(e=>{const t=new u(e).map(Yt()).handler;return function(e){return Jn(this,void 0,void 0,(function*(){const[n,r]=yield t(e.assetId);if(!r.ok)throw r;return n}))}}));var Zn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const qn=o("staticAssetLoader",[R.token],(e=>{const t=new u(e).map(Yt()).handler;return(e,n)=>Zn(void 0,void 0,void 0,(function*(){var r,i,o;const a=null===(o=null===(i=null===(r=n.activeLens)||void 0===r?void 0:r.content)||void 0===i?void 0:i.assetManifest.find((t=>t.id===e.assetId)))||void 0===o?void 0:o.assetUrl;if(!a)throw new Error(`Cannot load lens asset ${e.assetId}. Static asset url could not be found.`);const[s,c]=yield t(a);if(!c.ok)throw c;return s}))}));var $n=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Xn=new Set([Ie.PRELOAD_UNSET,Ie.REQUIRED]);class Qn{constructor(e,t){this.lensCore=e,this.assetLoaders=t,this.context={activeLens:null},e.setRemoteAssetsProvider((e=>{this.provideRemoteAsset(e).catch((e=>console.warn(e)))}))}updateContext(e){Object.assign(this.context,e)}preloadManifestData(e){return $n(this,void 0,void 0,(function*(){yield Promise.all(e.filter((e=>Xn.has(e.requestTiming))).map((({id:e,type:t})=>this.provideRemoteAsset({assetId:e,assetType:this.convertToLensCoreAssetType(t)}))))}))}convertToLensCoreAssetType(e){switch(e){case ye.ASSET:return this.lensCore.AssetType.Static;case ye.DEVICE_DEPENDENT_ASSET_UNSET:case ye.UNRECOGNIZED:return this.lensCore.AssetType.DeviceDependent;default:return $e()}}getAsset(e){return $n(this,void 0,void 0,(function*(){const{assetId:t,assetType:n}=e;try{const r=this.assetLoaders.get(n);if(!r)throw new Error(`Asset type: "${n.value}" is not supported.`);const i=yield r(e,this.context);if(0===i.byteLength){const e=r.name||"anonymous";throw new Error(`Got empty response for asset ${t} from assetLoader ${e}.`)}return{assetId:t,assetBuffer:i,assetType:n}}catch(r){throw Xe(new Error(`Failed to load lens asset ${t}.`),r)}}))}provideRemoteAsset(e){return $n(this,void 0,void 0,(function*(){try{const t=yield this.getAsset(e);this.lensCore.provideRemoteAssetsResponse(t)}catch(t){throw this.lensCore.provideRemoteAssetsResponse({assetId:e.assetId,assetType:e.assetType}),t}}))}}const er=o("lensAssetsProvider",[w.token,Hn.token,zn.token,qn.token],((e,t,n,r)=>new Qn(e,new Map([[e.AssetType.DeviceDependent,t],[e.AssetType.RemoteMediaByUrl,n],[e.AssetType.URL,n],[e.AssetType.Static,r]]))));var tr,nr;function rr(e){switch(e){case 0:case"NOT_APPLICABLE":return tr.NOT_APPLICABLE;case 1:case"SPOOKEY":return tr.SPOOKEY;case 2:case"REGISTRY":return tr.REGISTRY;case 3:case"FIDELIUS":return tr.FIDELIUS;default:return tr.UNRECOGNIZED}}function ir(){return{key:new Uint8Array,ivStore:{},isKeyServerEncrypted:!1,isKeyE2eEncrypted:!1,encryptionScheme:tr.NOT_APPLICABLE}}!function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.SPOOKEY="SPOOKEY",e.REGISTRY="REGISTRY",e.FIDELIUS="FIDELIUS",e.UNRECOGNIZED="UNRECOGNIZED"}(tr||(tr={})),function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.CONTEXT="CONTEXT",e.INTERSTITIAL="INTERSTITIAL",e.UNRECOGNIZED="UNRECOGNIZED"}(nr||(nr={}));const or={encode:(e,t=oe.Writer.create())=>(0!==e.key.length&&t.uint32(10).bytes(e.key),Object.entries(e.ivStore).forEach((([e,n])=>{sr.encode({key:e,value:n},t.uint32(18).fork()).ldelim()})),!0===e.isKeyServerEncrypted&&t.uint32(24).bool(e.isKeyServerEncrypted),!0===e.isKeyE2eEncrypted&&t.uint32(32).bool(e.isKeyE2eEncrypted),e.encryptionScheme!==tr.NOT_APPLICABLE&&t.uint32(40).int32(function(e){switch(e){case tr.NOT_APPLICABLE:return 0;case tr.SPOOKEY:return 1;case tr.REGISTRY:return 2;case tr.FIDELIUS:return 3;default:return 0}}(e.encryptionScheme)),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=ir();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.bytes();break;case 2:const t=sr.decode(n,n.uint32());void 0!==t.value&&(i.ivStore[t.key]=t.value);break;case 3:i.isKeyServerEncrypted=n.bool();break;case 4:i.isKeyE2eEncrypted=n.bool();break;case 5:i.encryptionScheme=rr(n.int32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:Tr(e.key)?mr(e.key):new Uint8Array,ivStore:hr(e.ivStore)?Object.entries(e.ivStore).reduce(((e,[t,n])=>(e[t]=mr(n),e)),{}):{},isKeyServerEncrypted:!!Tr(e.isKeyServerEncrypted)&&Boolean(e.isKeyServerEncrypted),isKeyE2eEncrypted:!!Tr(e.isKeyE2eEncrypted)&&Boolean(e.isKeyE2eEncrypted),encryptionScheme:Tr(e.encryptionScheme)?rr(e.encryptionScheme):tr.NOT_APPLICABLE}),toJSON(e){const t={};return void 0!==e.key&&(t.key=Ir(void 0!==e.key?e.key:new Uint8Array)),t.ivStore={},e.ivStore&&Object.entries(e.ivStore).forEach((([e,n])=>{t.ivStore[e]=Ir(n)})),void 0!==e.isKeyServerEncrypted&&(t.isKeyServerEncrypted=e.isKeyServerEncrypted),void 0!==e.isKeyE2eEncrypted&&(t.isKeyE2eEncrypted=e.isKeyE2eEncrypted),void 0!==e.encryptionScheme&&(t.encryptionScheme=function(e){switch(e){case tr.NOT_APPLICABLE:return"NOT_APPLICABLE";case tr.SPOOKEY:return"SPOOKEY";case tr.REGISTRY:return"REGISTRY";case tr.FIDELIUS:return"FIDELIUS";default:return"UNKNOWN"}}(e.encryptionScheme)),t},fromPartial(e){var t,n,r,i,o;const a=ir();return a.key=null!==(t=e.key)&&void 0!==t?t:new Uint8Array,a.ivStore=Object.entries(null!==(n=e.ivStore)&&void 0!==n?n:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=n),e)),{}),a.isKeyServerEncrypted=null!==(r=e.isKeyServerEncrypted)&&void 0!==r&&r,a.isKeyE2eEncrypted=null!==(i=e.isKeyE2eEncrypted)&&void 0!==i&&i,a.encryptionScheme=null!==(o=e.encryptionScheme)&&void 0!==o?o:tr.NOT_APPLICABLE,a}};function ar(){return{key:"",value:new Uint8Array}}const sr={encode:(e,t=oe.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),0!==e.value.length&&t.uint32(18).bytes(e.value),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=ar();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:Tr(e.key)?String(e.key):"",value:Tr(e.value)?mr(e.value):new Uint8Array}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=Ir(void 0!==e.value?e.value:new Uint8Array)),t},fromPartial(e){var t,n;const r=ar();return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:new Uint8Array,r}};function cr(){return{store:{},serializedStore:new Uint8Array}}const ur={encode:(e,t=oe.Writer.create())=>(Object.entries(e.store).forEach((([e,n])=>{lr.encode({key:e,value:n},t.uint32(10).fork()).ldelim()})),0!==e.serializedStore.length&&t.uint32(18).bytes(e.serializedStore),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=cr();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:const t=lr.decode(n,n.uint32());void 0!==t.value&&(i.store[t.key]=t.value);break;case 2:i.serializedStore=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({store:hr(e.store)?Object.entries(e.store).reduce(((e,[t,n])=>(e[t]=String(n),e)),{}):{},serializedStore:Tr(e.serializedStore)?mr(e.serializedStore):new Uint8Array}),toJSON(e){const t={store:{}};return e.store&&Object.entries(e.store).forEach((([e,n])=>{t.store[e]=n})),void 0!==e.serializedStore&&(t.serializedStore=Ir(void 0!==e.serializedStore?e.serializedStore:new Uint8Array)),t},fromPartial(e){var t,n;const r=cr();return r.store=Object.entries(null!==(t=e.store)&&void 0!==t?t:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=String(n)),e)),{}),r.serializedStore=null!==(n=e.serializedStore)&&void 0!==n?n:new Uint8Array,r}};const lr={encode:(e,t=oe.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={key:"",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:Tr(e.key)?String(e.key):"",value:Tr(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,n;const r={key:"",value:""};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:"",r}};const dr={encode:(e,t=oe.Writer.create())=>(Object.entries(e.playerData).forEach((([e,n])=>{pr.encode({key:e,value:n},t.uint32(10).fork()).ldelim()})),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={playerData:{}};for(;n.pos<r;){const e=n.uint32();if(e>>>3===1){const e=pr.decode(n,n.uint32());void 0!==e.value&&(i.playerData[e.key]=e.value)}else n.skipType(7&e)}return i},fromJSON:e=>({playerData:hr(e.playerData)?Object.entries(e.playerData).reduce(((e,[t,n])=>(e[t]=ur.fromJSON(n),e)),{}):{}}),toJSON(e){const t={playerData:{}};return e.playerData&&Object.entries(e.playerData).forEach((([e,n])=>{t.playerData[e]=ur.toJSON(n)})),t},fromPartial(e){var t;const n={playerData:{}};return n.playerData=Object.entries(null!==(t=e.playerData)&&void 0!==t?t:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=ur.fromPartial(n)),e)),{}),n}};const pr={encode:(e,t=oe.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),void 0!==e.value&&ur.encode(e.value,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={key:"",value:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=ur.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({key:Tr(e.key)?String(e.key):"",value:Tr(e.value)?ur.fromJSON(e.value):void 0}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value?ur.toJSON(e.value):void 0),t},fromPartial(e){var t;const n={key:"",value:void 0};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=void 0!==e.value&&null!==e.value?ur.fromPartial(e.value):void 0,n}};const fr={encode:(e,t=oe.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),""!==e.sessionId&&t.uint32(18).string(e.sessionId),""!==e.playerId&&t.uint32(26).string(e.playerId),void 0!==e.sessionData&&dr.encode(e.sessionData,t.uint32(34).fork()).ldelim(),0!==e.createdTime&&t.uint32(40).int64(e.createdTime),0!==e.expireTime&&t.uint32(48).int64(e.expireTime),0!==e.version&&t.uint32(56).int32(e.version),void 0!==e.encryptionData&&or.encode(e.encryptionData,t.uint32(66).fork()).ldelim(),0!==e.sessionDepth&&t.uint32(72).int32(e.sessionDepth),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={id:"",sessionId:"",playerId:"",sessionData:void 0,createdTime:0,expireTime:0,version:0,encryptionData:void 0,sessionDepth:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.id=n.string();break;case 2:i.sessionId=n.string();break;case 3:i.playerId=n.string();break;case 4:i.sessionData=dr.decode(n,n.uint32());break;case 5:i.createdTime=gr(n.int64());break;case 6:i.expireTime=gr(n.int64());break;case 7:i.version=n.int32();break;case 8:i.encryptionData=or.decode(n,n.uint32());break;case 9:i.sessionDepth=n.int32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({id:Tr(e.id)?String(e.id):"",sessionId:Tr(e.sessionId)?String(e.sessionId):"",playerId:Tr(e.playerId)?String(e.playerId):"",sessionData:Tr(e.sessionData)?dr.fromJSON(e.sessionData):void 0,createdTime:Tr(e.createdTime)?Number(e.createdTime):0,expireTime:Tr(e.expireTime)?Number(e.expireTime):0,version:Tr(e.version)?Number(e.version):0,encryptionData:Tr(e.encryptionData)?or.fromJSON(e.encryptionData):void 0,sessionDepth:Tr(e.sessionDepth)?Number(e.sessionDepth):0}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.sessionId&&(t.sessionId=e.sessionId),void 0!==e.playerId&&(t.playerId=e.playerId),void 0!==e.sessionData&&(t.sessionData=e.sessionData?dr.toJSON(e.sessionData):void 0),void 0!==e.createdTime&&(t.createdTime=Math.round(e.createdTime)),void 0!==e.expireTime&&(t.expireTime=Math.round(e.expireTime)),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.encryptionData&&(t.encryptionData=e.encryptionData?or.toJSON(e.encryptionData):void 0),void 0!==e.sessionDepth&&(t.sessionDepth=Math.round(e.sessionDepth)),t},fromPartial(e){var t,n,r,i,o,a,s;const c={id:"",sessionId:"",playerId:"",sessionData:void 0,createdTime:0,expireTime:0,version:0,encryptionData:void 0,sessionDepth:0};return c.id=null!==(t=e.id)&&void 0!==t?t:"",c.sessionId=null!==(n=e.sessionId)&&void 0!==n?n:"",c.playerId=null!==(r=e.playerId)&&void 0!==r?r:"",c.sessionData=void 0!==e.sessionData&&null!==e.sessionData?dr.fromPartial(e.sessionData):void 0,c.createdTime=null!==(i=e.createdTime)&&void 0!==i?i:0,c.expireTime=null!==(o=e.expireTime)&&void 0!==o?o:0,c.version=null!==(a=e.version)&&void 0!==a?a:0,c.encryptionData=void 0!==e.encryptionData&&null!==e.encryptionData?or.fromPartial(e.encryptionData):void 0,c.sessionDepth=null!==(s=e.sessionDepth)&&void 0!==s?s:0,c}};var vr=(()=>{if("undefined"!==typeof vr)return vr;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();const Er=vr.atob||(e=>vr.Buffer.from(e,"base64").toString("binary"));function mr(e){const t=Er(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}const yr=vr.btoa||(e=>vr.Buffer.from(e,"binary").toString("base64"));function Ir(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return yr(t.join(""))}function gr(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new vr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function hr(e){return"object"===typeof e&&null!==e}function Tr(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const _r={encode:(e,t=oe.Writer.create())=>(0!==e.latitude&&t.uint32(9).double(e.latitude),0!==e.longitude&&t.uint32(17).double(e.longitude),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={latitude:0,longitude:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.latitude=n.double();break;case 2:i.longitude=n.double();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({latitude:Nr(e.latitude)?Number(e.latitude):0,longitude:Nr(e.longitude)?Number(e.longitude):0}),toJSON(e){const t={};return void 0!==e.latitude&&(t.latitude=e.latitude),void 0!==e.longitude&&(t.longitude=e.longitude),t},fromPartial(e){var t,n;const r={latitude:0,longitude:0};return r.latitude=null!==(t=e.latitude)&&void 0!==t?t:0,r.longitude=null!==(n=e.longitude)&&void 0!==n?n:0,r}};function Nr(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const Or={encode:(e,t=oe.Writer.create())=>(0!==e.radius&&t.uint32(9).double(e.radius),void 0!==e.center&&_r.encode(e.center,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={radius:0,center:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.radius=n.double();break;case 2:i.center=_r.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({radius:Sr(e.radius)?Number(e.radius):0,center:Sr(e.center)?_r.fromJSON(e.center):void 0}),toJSON(e){const t={};return void 0!==e.radius&&(t.radius=e.radius),void 0!==e.center&&(t.center=e.center?_r.toJSON(e.center):void 0),t},fromPartial(e){var t;const n={radius:0,center:void 0};return n.radius=null!==(t=e.radius)&&void 0!==t?t:0,n.center=void 0!==e.center&&null!==e.center?_r.fromPartial(e.center):void 0,n}};function Sr(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const Ar={encode(e,t=oe.Writer.create()){for(const n of e.locations)Or.encode(n,t.uint32(10).fork()).ldelim();return void 0!==e.activeLure&&Or.encode(e.activeLure,t.uint32(18).fork()).ldelim(),void 0!==e.closestLure&&Or.encode(e.closestLure,t.uint32(26).fork()).ldelim(),t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={locations:[],activeLure:void 0,closestLure:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.locations.push(Or.decode(n,n.uint32()));break;case 2:i.activeLure=Or.decode(n,n.uint32());break;case 3:i.closestLure=Or.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({locations:Array.isArray(null===e||void 0===e?void 0:e.locations)?e.locations.map((e=>Or.fromJSON(e))):[],activeLure:Rr(e.activeLure)?Or.fromJSON(e.activeLure):void 0,closestLure:Rr(e.closestLure)?Or.fromJSON(e.closestLure):void 0}),toJSON(e){const t={};return e.locations?t.locations=e.locations.map((e=>e?Or.toJSON(e):void 0)):t.locations=[],void 0!==e.activeLure&&(t.activeLure=e.activeLure?Or.toJSON(e.activeLure):void 0),void 0!==e.closestLure&&(t.closestLure=e.closestLure?Or.toJSON(e.closestLure):void 0),t},fromPartial(e){var t;const n={locations:[],activeLure:void 0,closestLure:void 0};return n.locations=(null===(t=e.locations)||void 0===t?void 0:t.map((e=>Or.fromPartial(e))))||[],n.activeLure=void 0!==e.activeLure&&null!==e.activeLure?Or.fromPartial(e.activeLure):void 0,n.closestLure=void 0!==e.closestLure&&null!==e.closestLure?Or.fromPartial(e.closestLure):void 0,n}};function Rr(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var br;function Cr(e){switch(e){case 0:case"Invalid":return br.Invalid;case 1:case"Aquarius":return br.Aquarius;case 2:case"Aries":return br.Aries;case 3:case"Cancer":return br.Cancer;case 4:case"Capricorn":return br.Capricorn;case 5:case"Gemini":return br.Gemini;case 6:case"Leo":return br.Leo;case 7:case"Libra":return br.Libra;case 8:case"Pisces":return br.Pisces;case 9:case"Sagittarius":return br.Sagittarius;case 10:case"Scorpio":return br.Scorpio;case 11:case"Taurus":return br.Taurus;case 12:case"Virgo":return br.Virgo;default:return br.UNRECOGNIZED}}!function(e){e.Invalid="Invalid",e.Aquarius="Aquarius",e.Aries="Aries",e.Cancer="Cancer",e.Capricorn="Capricorn",e.Gemini="Gemini",e.Leo="Leo",e.Libra="Libra",e.Pisces="Pisces",e.Sagittarius="Sagittarius",e.Scorpio="Scorpio",e.Taurus="Taurus",e.Virgo="Virgo",e.UNRECOGNIZED="UNRECOGNIZED"}(br||(br={}));const Pr={encode:(e,t=oe.Writer.create())=>(""!==e.avatarId&&t.uint32(10).string(e.avatarId),""!==e.selfieId&&t.uint32(18).string(e.selfieId),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={avatarId:"",selfieId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.avatarId=n.string();break;case 2:i.selfieId=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({avatarId:Fr(e.avatarId)?String(e.avatarId):"",selfieId:Fr(e.selfieId)?String(e.selfieId):""}),toJSON(e){const t={};return void 0!==e.avatarId&&(t.avatarId=e.avatarId),void 0!==e.selfieId&&(t.selfieId=e.selfieId),t},fromPartial(e){var t,n;const r={avatarId:"",selfieId:""};return r.avatarId=null!==(t=e.avatarId)&&void 0!==t?t:"",r.selfieId=null!==(n=e.selfieId)&&void 0!==n?n:"",r}};const kr={encode:(e,t=oe.Writer.create())=>(void 0!==e.friendshipStart&&An.encode(Lr(e.friendshipStart),t.uint32(10).fork()).ldelim(),void 0!==e.lastInteraction&&An.encode(Lr(e.lastInteraction),t.uint32(18).fork()).ldelim(),0!==e.streak&&t.uint32(24).uint32(e.streak),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={friendshipStart:void 0,lastInteraction:void 0,streak:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.friendshipStart=Mr(An.decode(n,n.uint32()));break;case 2:i.lastInteraction=Mr(An.decode(n,n.uint32()));break;case 3:i.streak=n.uint32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({friendshipStart:Fr(e.friendshipStart)?Vr(e.friendshipStart):void 0,lastInteraction:Fr(e.lastInteraction)?Vr(e.lastInteraction):void 0,streak:Fr(e.streak)?Number(e.streak):0}),toJSON(e){const t={};return void 0!==e.friendshipStart&&(t.friendshipStart=e.friendshipStart.toISOString()),void 0!==e.lastInteraction&&(t.lastInteraction=e.lastInteraction.toISOString()),void 0!==e.streak&&(t.streak=Math.round(e.streak)),t},fromPartial(e){var t,n,r;const i={friendshipStart:void 0,lastInteraction:void 0,streak:0};return i.friendshipStart=null!==(t=e.friendshipStart)&&void 0!==t?t:void 0,i.lastInteraction=null!==(n=e.lastInteraction)&&void 0!==n?n:void 0,i.streak=null!==(r=e.streak)&&void 0!==r?r:0,i}};function wr(){return{userId:"",username:"",birthdate:"",displayName:"",countrycode:"",score:0,bitmojiInfo:void 0,friendInfo:void 0,zodiac:br.Invalid}}const Ur={encode:(e,t=oe.Writer.create())=>(""!==e.userId&&t.uint32(10).string(e.userId),""!==e.username&&t.uint32(18).string(e.username),""!==e.birthdate&&t.uint32(26).string(e.birthdate),""!==e.displayName&&t.uint32(34).string(e.displayName),""!==e.countrycode&&t.uint32(42).string(e.countrycode),0!==e.score&&t.uint32(56).uint64(e.score),void 0!==e.bitmojiInfo&&Pr.encode(e.bitmojiInfo,t.uint32(66).fork()).ldelim(),void 0!==e.friendInfo&&kr.encode(e.friendInfo,t.uint32(74).fork()).ldelim(),e.zodiac!==br.Invalid&&t.uint32(80).int32(function(e){switch(e){case br.Invalid:return 0;case br.Aquarius:return 1;case br.Aries:return 2;case br.Cancer:return 3;case br.Capricorn:return 4;case br.Gemini:return 5;case br.Leo:return 6;case br.Libra:return 7;case br.Pisces:return 8;case br.Sagittarius:return 9;case br.Scorpio:return 10;case br.Taurus:return 11;case br.Virgo:return 12;default:return 0}}(e.zodiac)),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=wr();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.userId=n.string();break;case 2:i.username=n.string();break;case 3:i.birthdate=n.string();break;case 4:i.displayName=n.string();break;case 5:i.countrycode=n.string();break;case 7:i.score=Gr(n.uint64());break;case 8:i.bitmojiInfo=Pr.decode(n,n.uint32());break;case 9:i.friendInfo=kr.decode(n,n.uint32());break;case 10:i.zodiac=Cr(n.int32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({userId:Fr(e.userId)?String(e.userId):"",username:Fr(e.username)?String(e.username):"",birthdate:Fr(e.birthdate)?String(e.birthdate):"",displayName:Fr(e.displayName)?String(e.displayName):"",countrycode:Fr(e.countrycode)?String(e.countrycode):"",score:Fr(e.score)?Number(e.score):0,bitmojiInfo:Fr(e.bitmojiInfo)?Pr.fromJSON(e.bitmojiInfo):void 0,friendInfo:Fr(e.friendInfo)?kr.fromJSON(e.friendInfo):void 0,zodiac:Fr(e.zodiac)?Cr(e.zodiac):br.Invalid}),toJSON(e){const t={};return void 0!==e.userId&&(t.userId=e.userId),void 0!==e.username&&(t.username=e.username),void 0!==e.birthdate&&(t.birthdate=e.birthdate),void 0!==e.displayName&&(t.displayName=e.displayName),void 0!==e.countrycode&&(t.countrycode=e.countrycode),void 0!==e.score&&(t.score=Math.round(e.score)),void 0!==e.bitmojiInfo&&(t.bitmojiInfo=e.bitmojiInfo?Pr.toJSON(e.bitmojiInfo):void 0),void 0!==e.friendInfo&&(t.friendInfo=e.friendInfo?kr.toJSON(e.friendInfo):void 0),void 0!==e.zodiac&&(t.zodiac=function(e){switch(e){case br.Invalid:return"Invalid";case br.Aquarius:return"Aquarius";case br.Aries:return"Aries";case br.Cancer:return"Cancer";case br.Capricorn:return"Capricorn";case br.Gemini:return"Gemini";case br.Leo:return"Leo";case br.Libra:return"Libra";case br.Pisces:return"Pisces";case br.Sagittarius:return"Sagittarius";case br.Scorpio:return"Scorpio";case br.Taurus:return"Taurus";case br.Virgo:return"Virgo";default:return"UNKNOWN"}}(e.zodiac)),t},fromPartial(e){var t,n,r,i,o,a,s;const c=wr();return c.userId=null!==(t=e.userId)&&void 0!==t?t:"",c.username=null!==(n=e.username)&&void 0!==n?n:"",c.birthdate=null!==(r=e.birthdate)&&void 0!==r?r:"",c.displayName=null!==(i=e.displayName)&&void 0!==i?i:"",c.countrycode=null!==(o=e.countrycode)&&void 0!==o?o:"",c.score=null!==(a=e.score)&&void 0!==a?a:0,c.bitmojiInfo=void 0!==e.bitmojiInfo&&null!==e.bitmojiInfo?Pr.fromPartial(e.bitmojiInfo):void 0,c.friendInfo=void 0!==e.friendInfo&&null!==e.friendInfo?kr.fromPartial(e.friendInfo):void 0,c.zodiac=null!==(s=e.zodiac)&&void 0!==s?s:br.Invalid,c}};var Dr=(()=>{if("undefined"!==typeof Dr)return Dr;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function Lr(e){return{seconds:e.getTime()/1e3,nanos:e.getTime()%1e3*1e6}}function Mr(e){let t=1e3*e.seconds;return t+=e.nanos/1e6,new Date(t)}function Vr(e){return e instanceof Date?e:"string"===typeof e?new Date(e):Mr(An.fromJSON(e))}function Gr(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Dr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function Fr(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());function jr(){return{store:new Uint8Array}}const xr={encode:(e,t=oe.Writer.create())=>(0!==e.store.length&&t.uint32(10).bytes(e.store),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=jr();for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.store=n.bytes();else n.skipType(7&e)}return i},fromJSON(e){return{store:(t=e.store,null!==t&&void 0!==t?Wr(e.store):new Uint8Array)};var t},toJSON(e){const t={};return void 0!==e.store&&(t.store=function(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return Yr(t.join(""))}(void 0!==e.store?e.store:new Uint8Array)),t},fromPartial(e){var t;const n=jr();return n.store=null!==(t=e.store)&&void 0!==t?t:new Uint8Array,n}};var Kr=(()=>{if("undefined"!==typeof Kr)return Kr;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();const Br=Kr.atob||(e=>Kr.Buffer.from(e,"base64").toString("binary"));function Wr(e){const t=Br(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}const Yr=Kr.btoa||(e=>Kr.Buffer.from(e,"binary").toString("base64"));oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());function Hr(){return{data:new Uint8Array}}const Jr={encode:(e,t=oe.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=Hr();for(;n.pos<r;){const e=n.uint32();if(e>>>3===1)i.data=n.bytes();else n.skipType(7&e)}return i},fromJSON(e){return{data:(t=e.data,null!==t&&void 0!==t?qr(e.data):new Uint8Array)};var t},toJSON(e){const t={};return void 0!==e.data&&(t.data=function(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return $r(t.join(""))}(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const n=Hr();return n.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,n}};var zr=(()=>{if("undefined"!==typeof zr)return zr;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();const Zr=zr.atob||(e=>zr.Buffer.from(e,"base64").toString("binary"));function qr(e){const t=Zr(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}const $r=zr.btoa||(e=>zr.Buffer.from(e,"binary").toString("base64"));oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());var Xr,Qr;function ei(e){switch(e){case 0:case"LIVE_CAMERA":return Xr.LIVE_CAMERA;case 1:case"STORY_REPLY":return Xr.STORY_REPLY;case 2:case"CHAT_REPLY":return Xr.CHAT_REPLY;case 3:case"RESTART":return Xr.RESTART;case 4:case"PREVIEW_CANCEL":return Xr.PREVIEW_CANCEL;case 5:case"MAP":return Xr.MAP;default:return Xr.UNRECOGNIZED}}function ti(e){switch(e){case 0:case"NONE":return Qr.NONE;case 1:case"EXPERIMENTAL":return Qr.EXPERIMENTAL;default:return Qr.UNRECOGNIZED}}function ni(e){switch(e){case Qr.NONE:return 0;case Qr.EXPERIMENTAL:return 1;default:return 0}}function ri(){return{snappable:void 0,lures:void 0,userId:"",entryPoint:Xr.LIVE_CAMERA,userData:void 0,persistentStore:void 0,launchParams:void 0,apiDescriptors:[]}}!function(e){e.LIVE_CAMERA="LIVE_CAMERA",e.STORY_REPLY="STORY_REPLY",e.CHAT_REPLY="CHAT_REPLY",e.RESTART="RESTART",e.PREVIEW_CANCEL="PREVIEW_CANCEL",e.MAP="MAP",e.UNRECOGNIZED="UNRECOGNIZED"}(Xr||(Xr={})),function(e){e.NONE="NONE",e.EXPERIMENTAL="EXPERIMENTAL",e.UNRECOGNIZED="UNRECOGNIZED"}(Qr||(Qr={}));const ii={encode(e,t=oe.Writer.create()){void 0!==e.snappable&&fr.encode(e.snappable,t.uint32(10).fork()).ldelim(),void 0!==e.lures&&Ar.encode(e.lures,t.uint32(18).fork()).ldelim(),""!==e.userId&&t.uint32(26).string(e.userId),e.entryPoint!==Xr.LIVE_CAMERA&&t.uint32(32).int32(function(e){switch(e){case Xr.LIVE_CAMERA:return 0;case Xr.STORY_REPLY:return 1;case Xr.CHAT_REPLY:return 2;case Xr.RESTART:return 3;case Xr.PREVIEW_CANCEL:return 4;case Xr.MAP:return 5;default:return 0}}(e.entryPoint)),void 0!==e.userData&&Ur.encode(e.userData,t.uint32(42).fork()).ldelim(),void 0!==e.persistentStore&&xr.encode(e.persistentStore,t.uint32(50).fork()).ldelim(),void 0!==e.launchParams&&Jr.encode(e.launchParams,t.uint32(58).fork()).ldelim(),t.uint32(66).fork();for(const n of e.apiDescriptors)t.int32(ni(n));return t.ldelim(),t},decode(e,t){const n=e instanceof oe.Reader?e:new oe.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=ri();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.snappable=fr.decode(n,n.uint32());break;case 2:i.lures=Ar.decode(n,n.uint32());break;case 3:i.userId=n.string();break;case 4:i.entryPoint=ei(n.int32());break;case 5:i.userData=Ur.decode(n,n.uint32());break;case 6:i.persistentStore=xr.decode(n,n.uint32());break;case 7:i.launchParams=Jr.decode(n,n.uint32());break;case 8:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.apiDescriptors.push(ti(n.int32()))}else i.apiDescriptors.push(ti(n.int32()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({snappable:oi(e.snappable)?fr.fromJSON(e.snappable):void 0,lures:oi(e.lures)?Ar.fromJSON(e.lures):void 0,userId:oi(e.userId)?String(e.userId):"",entryPoint:oi(e.entryPoint)?ei(e.entryPoint):Xr.LIVE_CAMERA,userData:oi(e.userData)?Ur.fromJSON(e.userData):void 0,persistentStore:oi(e.persistentStore)?xr.fromJSON(e.persistentStore):void 0,launchParams:oi(e.launchParams)?Jr.fromJSON(e.launchParams):void 0,apiDescriptors:Array.isArray(null===e||void 0===e?void 0:e.apiDescriptors)?e.apiDescriptors.map((e=>ti(e))):[]}),toJSON(e){const t={};return void 0!==e.snappable&&(t.snappable=e.snappable?fr.toJSON(e.snappable):void 0),void 0!==e.lures&&(t.lures=e.lures?Ar.toJSON(e.lures):void 0),void 0!==e.userId&&(t.userId=e.userId),void 0!==e.entryPoint&&(t.entryPoint=function(e){switch(e){case Xr.LIVE_CAMERA:return"LIVE_CAMERA";case Xr.STORY_REPLY:return"STORY_REPLY";case Xr.CHAT_REPLY:return"CHAT_REPLY";case Xr.RESTART:return"RESTART";case Xr.PREVIEW_CANCEL:return"PREVIEW_CANCEL";case Xr.MAP:return"MAP";default:return"UNKNOWN"}}(e.entryPoint)),void 0!==e.userData&&(t.userData=e.userData?Ur.toJSON(e.userData):void 0),void 0!==e.persistentStore&&(t.persistentStore=e.persistentStore?xr.toJSON(e.persistentStore):void 0),void 0!==e.launchParams&&(t.launchParams=e.launchParams?Jr.toJSON(e.launchParams):void 0),e.apiDescriptors?t.apiDescriptors=e.apiDescriptors.map((e=>function(e){switch(e){case Qr.NONE:return"NONE";case Qr.EXPERIMENTAL:return"EXPERIMENTAL";default:return"UNKNOWN"}}(e))):t.apiDescriptors=[],t},fromPartial(e){var t,n,r;const i=ri();return i.snappable=void 0!==e.snappable&&null!==e.snappable?fr.fromPartial(e.snappable):void 0,i.lures=void 0!==e.lures&&null!==e.lures?Ar.fromPartial(e.lures):void 0,i.userId=null!==(t=e.userId)&&void 0!==t?t:"",i.entryPoint=null!==(n=e.entryPoint)&&void 0!==n?n:Xr.LIVE_CAMERA,i.userData=void 0!==e.userData&&null!==e.userData?Ur.fromPartial(e.userData):void 0,i.persistentStore=void 0!==e.persistentStore&&null!==e.persistentStore?xr.fromPartial(e.persistentStore):void 0,i.launchParams=void 0!==e.launchParams&&null!==e.launchParams?Jr.fromPartial(e.launchParams):void 0,i.apiDescriptors=(null===(r=e.apiDescriptors)||void 0===r?void 0:r.map((e=>e)))||[],i}};function oi(e){return null!==e&&void 0!==e}oe.util.Long!==se&&(oe.util.Long=se,(0,oe.configure)());const ai=e=>!(m(e)||si(e)),si=e=>I(e)&&!Number.isNaN(e)&&Number.isFinite(e);class ci{constructor(e){this.matrix=e}}ci.MirrorX=new ci([-1,0,0,0,1,0,1,0,1]),ci.MirrorY=new ci([1,0,0,0,-1,0,0,1,0]),ci.Identity=new ci([1,0,0,0,1,0,0,0,1]);class ui extends CustomEvent{constructor(e,t,n={}){super(e,Object.assign(Object.assign({},n),{detail:t}))}}const li={avgFps:0,averageProcessingTime:0,procFrameCount:0,procFrameMean:0,procFrameD2:0};class di{constructor(e){this.lensCore=e,this.state=Object.assign({},li),new Promise(((e,t)=>{this.lensCore.setOnFrameProcessedCallback({onFrameProcessed:({processingTimeMs:e})=>{this.computeRunningStats(e)},onSuccess:e,onFailure:t})}))}get metrics(){return{avgFps:this.state.avgFps,lensFrameProcessingTimeMsAvg:this.state.procFrameMean,lensFrameProcessingTimeMsStd:Math.sqrt(this.state.procFrameD2/this.state.procFrameCount)}}reset(){this.state=Object.assign({},li)}computeRunningStats(e){const t=e-this.state.procFrameMean;this.state.procFrameCount+=1,this.state.procFrameMean+=t/this.state.procFrameCount;const n=e-this.state.procFrameMean;if(this.state.procFrameD2+=t*n,void 0===this.priorFrameCompletedTime)this.priorFrameCompletedTime=performance.now();else{const e=(performance.now()-this.priorFrameCompletedTime)/1e3;e<1&&(this.state.avgFps=(this.state.avgFps+1/e)/2),this.priorFrameCompletedTime=performance.now()}}}var pi=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fi=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},vi=function(e,t){return function(n,r){t(n,r,e)}},Ei=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function mi(e){return"live"===e||"capture"===e||"all"===e||void 0===e}const yi={cameraType:"front",fpsLimit:Number.POSITIVE_INFINITY};class Ii{constructor(e,t,n,r,i){this.lensCore=e,this.events=t,this.requestBinary=n,this.lensAssetsProvider=r,this.lensRepository=i;const o=this.lensCore.getOutputCanvases();this.output={live:o[this.lensCore.CanvasType.Preview.value],capture:o[this.lensCore.CanvasType.Capture.value]},this.playing=!1,this.frameProcessingMetrics=new di(this.lensCore)}get metrics(){return{frames:this.frameProcessingMetrics.metrics}}applyLens(e,t){return Ei(this,void 0,void 0,(function*(){const n=t&&function(e){if(!T(e)||e instanceof Date)throw new Error("should be a record <string, number | string | string[] | number[]>");for(const t of Object.values(e))if(Array.isArray(t)){if(!t.every(m)&&!t.every(si))throw new Error("only number, string, string[], number[] values are allowed")}else if(ai(t))throw new Error("only number, string, string[], number[] values are allowed");return!0}(t)?(e=>ii.encode(ii.fromPartial({launchParams:{data:(new TextEncoder).encode(JSON.stringify(e))}})).finish())(t):null;return yield this.removeLens(),new Promise(((t,r)=>Ei(this,void 0,void 0,(function*(){try{const i=t=>{this.events.dispatchEvent(new ui(t,e)),"lensTurnedOff"!==t&&"lensTurnedOn"!==t||setTimeout((()=>this.frameProcessingMetrics.reset()))};i("lensApplyStart");const o=this.lensRepository.getCachedLens(e.id);if(!o)return r(Error(`Cannot apply lens because lens ${e.id} has not been loaded by the Lens repository. Use repository.loadLens or repository.loadLensGroups to load lenses into the repository before calling CameraKitSession.applyLens.`));const{id:a,content:s}=o;this.lensAssetsProvider.updateContext({activeLens:o});const[c,[u]]=yield Promise.all([this.lensAssetsProvider.preloadManifestData(s.assetManifest),this.requestBinary(zt(new Request(s.lnsUrlBolt),new Map([["content_type","lens_content"],["automatic_download","false"],["lens_id",a]])))]).finally((()=>i("lensDownloadComplete"))),l={lensId:a,lensDataBuffer:u,lensChecksum:s.lnsSha256,onSuccess:t,onFailure:e=>{this.removeLens(),r(e)},onTurnOn:()=>i("lensTurnedOn"),onTurnOff:()=>i("lensTurnedOff"),onResourcesLoaded:()=>i("lensLoaded")};n&&(l.launchData=n),i("lensInitiated"),this.lensCore.addLens(l)}catch(i){yield this.removeLens(),r(i)}}))))}))}removeLens(){return Ei(this,void 0,void 0,(function*(){yield new Promise(((e,t)=>this.lensCore.clearAllLenses({onSuccess:e,onFailure:t}))),this.lensAssetsProvider.updateContext({activeLens:null})}))}play(e="live"){return Ei(this,void 0,void 0,(function*(){if(this.playing)return;this.playing=e;const t=this.renderTargetToCanvasType(e);return new Promise(((e,n)=>{this.lensCore.playCanvas({type:t,onReady:e,onFailure:e=>{this.playing=!1,n(e)}})}))}))}pause(e="all"){return Ei(this,void 0,void 0,(function*(){if(!this.playing)return;const t=this.playing;this.playing=!1;const n=this.renderTargetToCanvasType(e);return new Promise(((e,r)=>{this.lensCore.pauseCanvas({type:n,onSuccess:e,onFailure:e=>{this.playing=t,r(e)}})}))}))}setRenderSize(e,t){return Ei(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{this.lensCore.setRenderSize({mode:"explicit",target:{width:e,height:t},onSuccess:n,onFailure:r})}))}))}setSource(e,t={}){return Ei(this,void 0,void 0,(function*(){const{cameraType:n,fpsLimit:r}=Object.assign(Object.assign({},yi),i(t)),o=this.playing;this.playing=!1,yield new Promise(((t,r)=>{this.lensCore.useMediaElement({media:e,startOnFrontCamera:"front"===n,onSuccess:t,onFailure:r,autoplayNewMedia:!1,autoplayPreviewCanvas:!1,pauseExistingMedia:!1,requestWebcam:!1,useManualFrameProcessing:!1})})),r<Number.POSITIVE_INFINITY&&(yield new Promise(((e,t)=>{this.lensCore.setFPSLimit({fps:r,onSuccess:e,onFailure:t})}))),o&&(yield this.play(o))}))}setSourceTransfrom(e){return Ei(this,void 0,void 0,(function*(){const t=new Float32Array(e.matrix);yield new Promise(((e,n)=>{this.lensCore.setInputTransform({matrix:t,onSuccess:e,onFailure:n})}))}))}destroy(){return Ei(this,void 0,void 0,(function*(){return yield this.removeLens(),new Promise(((e,t)=>{this.lensCore.teardown({onSuccess:e,onFailure:t})}))}))}renderTargetToCanvasType(e){return"live"===e?this.lensCore.CanvasType.Preview:"capture"===e?this.lensCore.CanvasType.Capture:this.lensCore.CanvasType.All}}pi([V,vi(0,M($)),fi("design:type",Function),fi("design:paramtypes",[Object,Object]),fi("design:returntype",Promise)],Ii.prototype,"applyLens",null),pi([V,vi(0,M(mi)),fi("design:type",Function),fi("design:paramtypes",[String]),fi("design:returntype",Promise)],Ii.prototype,"play",null),pi([V,vi(0,M(mi)),fi("design:type",Function),fi("design:paramtypes",[String]),fi("design:returntype",Promise)],Ii.prototype,"pause",null),pi([V,fi("design:type",Function),fi("design:paramtypes",[Number,Number]),fi("design:returntype",Promise)],Ii.prototype,"setRenderSize",null),pi([V,vi(0,M((function(e){return e instanceof MediaStream||e instanceof HTMLVideoElement||e instanceof HTMLImageElement}))),fi("design:type",Function),fi("design:paramtypes",[Object,Object]),fi("design:returntype",Promise)],Ii.prototype,"setSource",null),pi([V,fi("design:type",Function),fi("design:paramtypes",[ci]),fi("design:returntype",Promise)],Ii.prototype,"setSourceTransfrom",null);const gi=o("CameraKitSession",[w.token,"eventTarget",er.token,R.token,Bn.token,Sn.token,Ye.token],((e,t,n,r,i,o,a)=>new Ii(e,t,new u(r).map(Zt(i,o)).map(Yt()).handler,n,a))),hi=(e,t,n)=>new Promise(((r,i)=>{const o=(null===n||void 0===n?void 0:n.predicate)?n.predicate:()=>!0,a=({detail:n})=>{o(n)&&(r(n),e.removeEventListener(t,a))};e.addEventListener(t,a),(null===n||void 0===n?void 0:n.signal)&&n.signal.addEventListener("abort",(()=>{i(new Error(`Promise aborted while waiting for next ${t} event.`)),e.removeEventListener(t,a)}),{once:!0})}));var Ti=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const _i=()=>performance.now(),Ni=o("reportLensView",[gi.token,Sn.token],((e,t)=>{let n;e.events.addEventListener("lensInitiated",(({detail:r})=>Ti(void 0,void 0,void 0,(function*(){n&&n.abort(),n=new AbortController;const i=_i(),o={signal:n.signal,predicate:e=>e.id===r.id},a=hi(e.events,"lensLoaded",o).then(_i),s=hi(e.events,"lensTurnedOn",o).then(_i),c=hi(e.events,"lensTurnedOff",o).then(_i),[u,l]=yield Promise.all([a.then((e=>(e-i)/1e3)),Promise.all([s,c]).then((([e,t])=>(t-e)/1e3))]).catch((()=>[0,0]));if(l<.1)return;const{avgFps:d,lensFrameProcessingTimeMsAvg:p,lensFrameProcessingTimeMsStd:f}=e.metrics.frames,v={name:"lensView",applyDelaySec:u,avgFps:d,lensId:r.id,lensFrameProcessingTimeMsAvg:p,lensFrameProcessingTimeMsStd:f,recordingTimeSec:0,viewTimeSec:l};t.recordEvent(v),e.events.dispatchEvent(new ui("lensView",v))}))))}));class Oi extends EventTarget{addEventListener(e,t,n){return super.addEventListener(e,t,n)}dispatchEvent(e){return super.dispatchEvent(e)}removeEventListener(e,t,n){super.removeEventListener(e,t,n)}}const Si=o("reportLensWait",[gi.token,Sn.token],((e,t)=>{var n;(n={name:"NotStarted"},(e,t,r)=>{let i=n;const o=new Oi,a=e=>{i=r(i,e),o.dispatchEvent(new ui("state",i))};let s=!1;return o.addEventListener=new Proxy(o.addEventListener,{apply:(n,r,i)=>{if(s)throw new Error("Cannot addEventListener. The TypedEventTarget returned by scan only supports a single listener, and one has already been added.");s=!0,t.forEach((t=>e.addEventListener(t,a))),n.apply(r,i)}}),o.removeEventListener=new Proxy(o.removeEventListener,{apply:(n,r,i)=>{t.forEach((t=>e.removeEventListener(t,a))),n.apply(r,i)}}),o})(e.events,["lensApplyStart","lensLoaded"],((e,{type:t,detail:n})=>{const i=e=>({name:"Complete",lensId:e.lensId,waitingDurationMs:performance.now()-e.waitingStartTimeMs}),o=()=>({name:"Waiting",lensId:n.id,waitingStartTimeMs:performance.now()});switch(e.name){case"NotStarted":case"Complete":switch(t){case"lensApplyStart":return o();case"lensLoaded":return e;default:$e()}case"Waiting":switch(t){case"lensApplyStart":return r(i(e)),o();case"lensLoaded":return i(e);default:$e()}default:$e()}})).addEventListener("state",(({detail:e})=>r(e)));const r=n=>{if("Complete"!==n.name)return;const r=n.waitingDurationMs/1e3;if(r<.1)return;const i={name:"lensWait",lensId:n.lensId,viewTimeSec:r};t.recordEvent(i),e.events.dispatchEvent(new ui("lensWait",i))}})),Ai=new ze({}).provides(Ni).provides(Si),Ri="://";function bi(e){const t=e.indexOf(Ri);return[e.slice(0,t),e.slice(t+Ri.length)]}function Ci(e){return m(e)&&e.includes(Ri)}function Pi(e){return T(e)&&(Ci(e.uri)||g(Ci,e.uri))&&_(e.handleRequest)&&(h(e.cancelRequest)||_(e.cancelRequest))}function ki(e){return T(e)&&I(e.code)&&m(e.description)&&m(e.contentType)&&(function(e){return e instanceof ArrayBuffer}(e.data)||function(e){return e instanceof Object.getPrototypeOf(Uint8Array)}(e.data))&&(h(e.metadata)||N(m)(e.metadata))}const wi=o("UriHandlers",(()=>[]));function Ui(e,t){if(!g(Pi,t))throw new Error("Expected an array of UriHandler objects");for(const{uri:n,handleRequest:r,cancelRequest:i}of t){const t=Array.isArray(n)?n:[n];for(const[n,o]of t.map(bi))e.registerUriListener(n,o,{handleRequest:t=>{r(t,(n=>{if(!ki(n))throw new Error("Expected UriResponse object");e.provideUriResponse(t.identifier,n)}))},cancelRequest:i})}}var Di=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class Li{constructor({lenses:e},t,n,r){this.container=t,this.lensCore=n,this.uriHandlers=r,this.createSession=({liveRenderTarget:e,renderWhileTabHidden:t}={})=>Di(this,void 0,void 0,(function*(){const n=new Oi,r=e=>{n.dispatchEvent(new ui("error",e))};yield new Promise(((n,i)=>{this.lensCore.initialize({canvas:e,shouldUseWorker:!t&&this.container.get(s).shouldUseWorker,exceptionHandler:r,onSuccess:()=>n(),onFailure:i})})),yield new Promise(((e,n)=>{this.lensCore.setRenderLoopMode({mode:t?this.lensCore.RenderLoopMode.SetTimeout:this.lensCore.RenderLoopMode.RequestAnimationFrame,onSuccess:e,onFailure:n})})),Ui(this.lensCore,this.uriHandlers);return this.container.copy().provides(o("eventTarget",(()=>n))).provides(er).provides(gi).run(Ai).get(gi.token)})),this.lenses=e}}const Mi=o("CameraKit",[Ze,w.token,wi.token],((e,t,n)=>new Li({lenses:{repository:e.get(Ye.token)}},e,t,n)));var Vi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function Gi(e,t){return Vi(this,void 0,void 0,(function*(){j(y(e.apiToken),"Unsafe apiToken");const n=(e=>o(s,(()=>Object.assign(Object.assign({},a),i(e)))))(e),r=qe.provides(n).provides(R).provides(zn).provides(q).provides(wi),c=t?t(r):r,u=yield c.provides(w).get(w.token);return c.provides(o(w.token,(()=>u))).provides(J).provides(Ye).provides(Nn).provides(Bn).provides(Sn).provides(Hn).provides(qn).provides(Mi).get(Mi.token)}))}function Fi(){return new ze({})}const ji=De.encode({userAgent:Y.userAgent,locale:K}).finish();console.info(r)},57575:function(e,t,n){"use strict";n.d(t,{nb:function(){return f},x:function(){return E}});var r=n(27808),i=n.n(r),o=n(73737),a=n.n(o),s=n(99377);var c,u,l,d;!function(e){e[e.UNKNOWN_CONTEXT_PLATFORM=0]="UNKNOWN_CONTEXT_PLATFORM",e[e.IOS_PLATFORM=1]="IOS_PLATFORM",e[e.ANDROID_PLATFORM=2]="ANDROID_PLATFORM",e[e.SERVER_PLATFORM=3]="SERVER_PLATFORM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c||(c={})),function(e){e[e.UNKNOWN_OPERATOR=0]="UNKNOWN_OPERATOR",e[e.AND=1]="AND",e[e.OR=2]="OR",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u||(u={})),function(e){e[e.UNKNOWN_PREDICATE_OPERATOR=0]="UNKNOWN_PREDICATE_OPERATOR",e[e.EQUAL=1]="EQUAL",e[e.NOT_EQUAL=2]="NOT_EQUAL",e[e.GREATER_THAN_OR_EQUAL_TO=3]="GREATER_THAN_OR_EQUAL_TO",e[e.LESS_THAN_OR_EQUAL_TO=4]="LESS_THAN_OR_EQUAL_TO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(l||(l={})),function(e){e[e.UNKNOWN_PROPERTY=0]="UNKNOWN_PROPERTY",e[e.BATTERY_LEVEL=1]="BATTERY_LEVEL",e[e.IS_OFFLINE=2]="IS_OFFLINE",e[e.IS_CHARGING=3]="IS_CHARGING",e[e.BANDWIDTH=4]="BANDWIDTH",e[e.DISK_SIZE=5]="DISK_SIZE",e[e.DISK_AVAILABLE=6]="DISK_AVAILABLE",e[e.MEDIA_TYPE_DEPRECATED=7]="MEDIA_TYPE_DEPRECATED",e[e.IS_PUBLIC_STORY=8]="IS_PUBLIC_STORY",e[e.IS_OFFICIAL_STORY=9]="IS_OFFICIAL_STORY",e[e.CAMERA_DIRECTION=10]="CAMERA_DIRECTION",e[e.CAMERA_CONTEXT=11]="CAMERA_CONTEXT",e[e.CAMERA_API=12]="CAMERA_API",e[e.CAMERA_FLASH_STATE=13]="CAMERA_FLASH_STATE",e[e.SNAP_SOURCE=14]="SNAP_SOURCE",e[e.LEGACY_MUSHROOM_CONTENT_TYPE=15]="LEGACY_MUSHROOM_CONTENT_TYPE",e[e.UPLOAD_BANDWIDTH=16]="UPLOAD_BANDWIDTH",e[e.CAMERA2_LEVEL=17]="CAMERA2_LEVEL",e[e.CAMERA_NIGHT_MODE_STATE=18]="CAMERA_NIGHT_MODE_STATE",e[e.USER_LANGUAGE=19]="USER_LANGUAGE",e[e.VIDEO_DURATION=20]="VIDEO_DURATION",e[e.REALTIME_MOBILE_NETWORK_GENERATION=21]="REALTIME_MOBILE_NETWORK_GENERATION",e[e.REALTIME_NETWORK_TYPE=22]="REALTIME_NETWORK_TYPE",e[e.REALTIME_NETWORK_IS_METERED=23]="REALTIME_NETWORK_IS_METERED",e[e.REALTIME_NETWORK_IS_ROAMING=24]="REALTIME_NETWORK_IS_ROAMING",e[e.CAMERA_IS_FIRST_CAPTURE=25]="CAMERA_IS_FIRST_CAPTURE",e[e.PICTURE_MODE=26]="PICTURE_MODE",e[e.BOLT_USE_CASE=27]="BOLT_USE_CASE",e[e.BOLT_CDN_EXPERIMENTATION_ID=28]="BOLT_CDN_EXPERIMENTATION_ID",e[e.MINS_SINCE_LAST_LENS_ACTIVATION=29]="MINS_SINCE_LAST_LENS_ACTIVATION",e[e.MINS_SINCE_LAST_SNAPPABLE_LENS_ACTIVATION=30]="MINS_SINCE_LAST_SNAPPABLE_LENS_ACTIVATION",e[e.DAYS_SINCE_LAST_LOGIN_OR_OPEN=31]="DAYS_SINCE_LAST_LOGIN_OR_OPEN",e[e.SPECTACLES_VERSION=32]="SPECTACLES_VERSION",e[e.STICKY_MAX_CONNECTION_TYPE=33]="STICKY_MAX_CONNECTION_TYPE",e[e.WITH_ANIMATED_OVERLAY=34]="WITH_ANIMATED_OVERLAY",e[e.ESTIMATED_DURATION_FOR_EVENT_MS=35]="ESTIMATED_DURATION_FOR_EVENT_MS",e[e.URL=36]="URL",e[e.MEDIA_SOURCE=37]="MEDIA_SOURCE",e[e.ASSET_TYPE=38]="ASSET_TYPE",e[e.BOLT_IS_CONTENT_POPULAR=39]="BOLT_IS_CONTENT_POPULAR",e[e.CAPTURE_MODE=40]="CAPTURE_MODE",e[e.VP9_SOFTWARE_DECODING_SUPPORTED=41]="VP9_SOFTWARE_DECODING_SUPPORTED",e[e.AV1_SOFTWARE_DECODING_SUPPORTED=42]="AV1_SOFTWARE_DECODING_SUPPORTED",e[e.WITH_MUSIC=43]="WITH_MUSIC",e[e.FEATURE_PROVIDED_SIZE=44]="FEATURE_PROVIDED_SIZE",e[e.MEDIA_TYPE=45]="MEDIA_TYPE",e[e.SCANNED_CATEGORY_IDS=46]="SCANNED_CATEGORY_IDS",e[e.CONTENT_VIEW_SOURCE=47]="CONTENT_VIEW_SOURCE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(d||(d={}));const p={configId:"",ttlSeconds:0,priority:0,namespace:0,studyName:"",experimentId:0,delete:!1,servePlatforms:0,sequenceId:0},f={encode(e,t=a().Writer.create()){""!==e.configId&&t.uint32(10).string(e.configId),void 0!==e.value&&s.B4.encode(e.value,t.uint32(18).fork()).ldelim(),void 0!==e.targetingExpression&&E.encode(e.targetingExpression,t.uint32(26).fork()).ldelim(),0!==e.ttlSeconds&&t.uint32(32).int64(e.ttlSeconds),0!==e.configRuleUuidBytes.length&&t.uint32(42).bytes(e.configRuleUuidBytes),0!==e.priority&&t.uint32(48).int32(e.priority),0!==e.namespace&&t.uint32(56).int32(e.namespace),""!==e.studyName&&t.uint32(66).string(e.studyName),0!==e.experimentId&&t.uint32(72).int32(e.experimentId),!0===e.delete&&t.uint32(80).bool(e.delete),t.uint32(90).fork();for(const n of e.servePlatforms)t.int32(n);return t.ldelim(),0!==e.sequenceId&&t.uint32(96).int32(e.sequenceId),t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},p);for(i.servePlatforms=[],i.configRuleUuidBytes=new Uint8Array;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.configId=n.string();break;case 2:i.value=s.B4.decode(n,n.uint32());break;case 3:i.targetingExpression=E.decode(n,n.uint32());break;case 4:i.ttlSeconds=y(n.int64());break;case 5:i.configRuleUuidBytes=n.bytes();break;case 6:i.priority=n.int32();break;case 7:i.namespace=n.int32();break;case 8:i.studyName=n.string();break;case 9:i.experimentId=n.int32();break;case 10:i.delete=n.bool();break;case 11:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.servePlatforms.push(n.int32())}else i.servePlatforms.push(n.int32());break;case 12:i.sequenceId=n.int32();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},p);if(t.servePlatforms=[],void 0!==e.configId&&null!==e.configId?t.configId=e.configId:t.configId="",void 0!==e.value&&null!==e.value?t.value=s.B4.fromPartial(e.value):t.value=void 0,void 0!==e.targetingExpression&&null!==e.targetingExpression?t.targetingExpression=E.fromPartial(e.targetingExpression):t.targetingExpression=void 0,void 0!==e.ttlSeconds&&null!==e.ttlSeconds?t.ttlSeconds=e.ttlSeconds:t.ttlSeconds=0,void 0!==e.configRuleUuidBytes&&null!==e.configRuleUuidBytes?t.configRuleUuidBytes=e.configRuleUuidBytes:t.configRuleUuidBytes=new Uint8Array,void 0!==e.priority&&null!==e.priority?t.priority=e.priority:t.priority=0,void 0!==e.namespace&&null!==e.namespace?t.namespace=e.namespace:t.namespace=0,void 0!==e.studyName&&null!==e.studyName?t.studyName=e.studyName:t.studyName="",void 0!==e.experimentId&&null!==e.experimentId?t.experimentId=e.experimentId:t.experimentId=0,void 0!==e.delete&&null!==e.delete?t.delete=e.delete:t.delete=!1,void 0!==e.servePlatforms&&null!==e.servePlatforms)for(const n of e.servePlatforms)t.servePlatforms.push(n);return void 0!==e.sequenceId&&null!==e.sequenceId?t.sequenceId=e.sequenceId:t.sequenceId=0,t}},v={operator:0,property:0,predicateOperator:0},E={encode(e,t=a().Writer.create()){0!==e.operator&&t.uint32(8).int32(e.operator);for(const n of e.children)E.encode(n,t.uint32(18).fork()).ldelim();return 0!==e.property&&t.uint32(24).int32(e.property),0!==e.predicateOperator&&t.uint32(32).int32(e.predicateOperator),void 0!==e.value&&s.B4.encode(e.value,t.uint32(42).fork()).ldelim(),t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},v);for(i.children=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.operator=n.int32();break;case 2:i.children.push(E.decode(n,n.uint32()));break;case 3:i.property=n.int32();break;case 4:i.predicateOperator=n.int32();break;case 5:i.value=s.B4.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},v);if(t.children=[],void 0!==e.operator&&null!==e.operator?t.operator=e.operator:t.operator=0,void 0!==e.children&&null!==e.children)for(const n of e.children)t.children.push(E.fromPartial(n));return void 0!==e.property&&null!==e.property?t.property=e.property:t.property=0,void 0!==e.predicateOperator&&null!==e.predicateOperator?t.predicateOperator=e.predicateOperator:t.predicateOperator=0,void 0!==e.value&&null!==e.value?t.value=s.B4.fromPartial(e.value):t.value=void 0,t}};var m=(()=>{if("undefined"!==typeof m)return m;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function y(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new m.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}a().util.Long!==i()&&(a().util.Long=i(),a().configure())},16646:function(e,t,n){"use strict";n.d(t,{SX:function(){return l},n$:function(){return v}});var r=n(27808),i=n.n(r),o=n(73737),a=n.n(o);var s,c;!function(e){e[e.USER_WHITELISTED=0]="USER_WHITELISTED",e[e.USER_GROUP_WHITELISTED=1]="USER_GROUP_WHITELISTED",e[e.FILTER_CONDITIONS=2]="FILTER_CONDITIONS",e[e.SLICE_RANGE=3]="SLICE_RANGE",e[e.TRAFFIC_ALLOCATED=4]="TRAFFIC_ALLOCATED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(s||(s={})),function(e){e[e.VALIDATE_REQUEST=0]="VALIDATE_REQUEST",e[e.REQUEST_ATLAS=1]="REQUEST_ATLAS",e[e.BUILD_TARGETING_INFO=2]="BUILD_TARGETING_INFO",e[e.QUERY_INDEX=3]="QUERY_INDEX",e[e.REQUEST_AB=4]="REQUEST_AB",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c||(c={}));const u={abStep:0,info:""},l={encode:(e,t=a().Writer.create())=>(0!==e.abStep&&t.uint32(8).int32(e.abStep),""!==e.info&&t.uint32(18).string(e.info),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},u);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.abStep=n.int32();break;case 2:i.info=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},u);return void 0!==e.abStep&&null!==e.abStep?t.abStep=e.abStep:t.abStep=0,void 0!==e.info&&null!==e.info?t.info=e.info:t.info="",t}},d={cofStep:0,info:""},p={encode:(e,t=a().Writer.create())=>(0!==e.cofStep&&t.uint32(8).int32(e.cofStep),""!==e.info&&t.uint32(18).string(e.info),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},d);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.cofStep=n.int32();break;case 2:i.info=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},d);return void 0!==e.cofStep&&null!==e.cofStep?t.cofStep=e.cofStep:t.cofStep=0,void 0!==e.info&&null!==e.info?t.info=e.info:t.info="",t}},f={},v={encode:(e,t=a().Writer.create())=>(void 0!==e.lastCofStep&&p.encode(e.lastCofStep,t.uint32(10).fork()).ldelim(),void 0!==e.lastAbStep&&l.encode(e.lastAbStep,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},f);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.lastCofStep=p.decode(n,n.uint32());break;case 2:i.lastAbStep=l.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},f);return void 0!==e.lastCofStep&&null!==e.lastCofStep?t.lastCofStep=p.fromPartial(e.lastCofStep):t.lastCofStep=void 0,void 0!==e.lastAbStep&&null!==e.lastAbStep?t.lastAbStep=l.fromPartial(e.lastAbStep):t.lastAbStep=void 0,t}};a().util.Long!==i()&&(a().util.Long=i(),a().configure())},21554:function(e,t,n){"use strict";n.d(t,{KE:function(){return u}});var r=n(27808),i=n.n(r),o=n(73737),a=n.n(o);var s;!function(e){e[e.UNSET=0]="UNSET",e[e.USER=1]="USER",e[e.DEVICE=2]="DEVICE",e[e.WEB_CLIENT=3]="WEB_CLIENT",e[e.AD_ACCOUNT=4]="AD_ACCOUNT",e[e.USERNAME=5]="USERNAME",e[e.AD_MODERATION_AD=6]="AD_MODERATION_AD",e[e.WEB_SNAPCHAT_USER=7]="WEB_SNAPCHAT_USER",e[e.INTERNAL=8]="INTERNAL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(s||(s={}));const c={type:0,stringValue:""},u={encode:(e,t=a().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),""!==e.stringValue&&t.uint32(18).string(e.stringValue),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},c);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.type=n.int32();break;case 2:i.stringValue=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},c);return void 0!==e.type&&null!==e.type?t.type=e.type:t.type=0,void 0!==e.stringValue&&null!==e.stringValue?t.stringValue=e.stringValue:t.stringValue="",t}};a().util.Long!==i()&&(a().util.Long=i(),a().configure())},99377:function(e,t,n){"use strict";n.d(t,{B4:function(){return v}});var r=n(27808),i=n.n(r),o=n(73737),a=n.n(o);const s={typeUrl:""},c={encode:(e,t=a().Writer.create())=>(""!==e.typeUrl&&t.uint32(10).string(e.typeUrl),0!==e.value.length&&t.uint32(18).bytes(e.value),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},s);for(i.value=new Uint8Array;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.typeUrl=n.string();break;case 2:i.value=n.bytes();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},s);return void 0!==e.typeUrl&&null!==e.typeUrl?t.typeUrl=e.typeUrl:t.typeUrl="",void 0!==e.value&&null!==e.value?t.value=e.value:t.value=new Uint8Array,t}};a().util.Long!==i()&&(a().util.Long=i(),a().configure());const u={key:"",value:""},l={encode:(e,t=a().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},u);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},u);return void 0!==e.key&&null!==e.key?t.key=e.key:t.key="",void 0!==e.value&&null!==e.value?t.value=e.value:t.value="",t}},d={},p={encode(e,t=a().Writer.create()){for(const n of e.records)l.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},d);for(i.records=[];n.pos<r;){const e=n.uint32();if(e>>>3===1)i.records.push(l.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromPartial(e){const t=Object.assign({},d);if(t.records=[],void 0!==e.records&&null!==e.records)for(const n of e.records)t.records.push(l.fromPartial(n));return t}},f={},v={encode:(e,t=a().Writer.create())=>(void 0!==e.intValue&&t.uint32(8).int32(e.intValue),void 0!==e.longValue&&t.uint32(16).int64(e.longValue),void 0!==e.floatValue&&t.uint32(29).float(e.floatValue),void 0!==e.boolValue&&t.uint32(32).bool(e.boolValue),void 0!==e.stringValue&&t.uint32(42).string(e.stringValue),void 0!==e.anyValue&&c.encode(e.anyValue,t.uint32(50).fork()).ldelim(),void 0!==e.mapValue&&p.encode(e.mapValue,t.uint32(58).fork()).ldelim(),void 0!==e.intPairValue&&t.uint32(65).fixed64(e.intPairValue),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},f);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.intValue=n.int32();break;case 2:i.longValue=m(n.int64());break;case 3:i.floatValue=n.float();break;case 4:i.boolValue=n.bool();break;case 5:i.stringValue=n.string();break;case 6:i.anyValue=c.decode(n,n.uint32());break;case 7:i.mapValue=p.decode(n,n.uint32());break;case 8:i.intPairValue=m(n.fixed64());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},f);return void 0!==e.intValue&&null!==e.intValue?t.intValue=e.intValue:t.intValue=void 0,void 0!==e.longValue&&null!==e.longValue?t.longValue=e.longValue:t.longValue=void 0,void 0!==e.floatValue&&null!==e.floatValue?t.floatValue=e.floatValue:t.floatValue=void 0,void 0!==e.boolValue&&null!==e.boolValue?t.boolValue=e.boolValue:t.boolValue=void 0,void 0!==e.stringValue&&null!==e.stringValue?t.stringValue=e.stringValue:t.stringValue=void 0,void 0!==e.anyValue&&null!==e.anyValue?t.anyValue=c.fromPartial(e.anyValue):t.anyValue=void 0,void 0!==e.mapValue&&null!==e.mapValue?t.mapValue=p.fromPartial(e.mapValue):t.mapValue=void 0,void 0!==e.intPairValue&&null!==e.intPairValue?t.intPairValue=e.intPairValue:t.intPairValue=void 0,t}};var E=(()=>{if("undefined"!==typeof E)return E;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function m(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new E.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}a().util.Long!==i()&&(a().util.Long=i(),a().configure())},66359:function(e,t,n){"use strict";n.d(t,{_h:function(){return v}});var r=n(27808),i=n.n(r),o=n(73737),a=n.n(o);var s,c,u,l,d,p;!function(e){e[e.TYPE_DOUBLE=1]="TYPE_DOUBLE",e[e.TYPE_FLOAT=2]="TYPE_FLOAT",e[e.TYPE_INT64=3]="TYPE_INT64",e[e.TYPE_UINT64=4]="TYPE_UINT64",e[e.TYPE_INT32=5]="TYPE_INT32",e[e.TYPE_FIXED64=6]="TYPE_FIXED64",e[e.TYPE_FIXED32=7]="TYPE_FIXED32",e[e.TYPE_BOOL=8]="TYPE_BOOL",e[e.TYPE_STRING=9]="TYPE_STRING",e[e.TYPE_GROUP=10]="TYPE_GROUP",e[e.TYPE_MESSAGE=11]="TYPE_MESSAGE",e[e.TYPE_BYTES=12]="TYPE_BYTES",e[e.TYPE_UINT32=13]="TYPE_UINT32",e[e.TYPE_ENUM=14]="TYPE_ENUM",e[e.TYPE_SFIXED32=15]="TYPE_SFIXED32",e[e.TYPE_SFIXED64=16]="TYPE_SFIXED64",e[e.TYPE_SINT32=17]="TYPE_SINT32",e[e.TYPE_SINT64=18]="TYPE_SINT64",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(s||(s={})),function(e){e[e.LABEL_OPTIONAL=1]="LABEL_OPTIONAL",e[e.LABEL_REQUIRED=2]="LABEL_REQUIRED",e[e.LABEL_REPEATED=3]="LABEL_REPEATED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c||(c={})),function(e){e[e.SPEED=1]="SPEED",e[e.CODE_SIZE=2]="CODE_SIZE",e[e.LITE_RUNTIME=3]="LITE_RUNTIME",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u||(u={})),function(e){e[e.STRING=0]="STRING",e[e.CORD=1]="CORD",e[e.STRING_PIECE=2]="STRING_PIECE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(l||(l={})),function(e){e[e.JS_NORMAL=0]="JS_NORMAL",e[e.JS_STRING=1]="JS_STRING",e[e.JS_NUMBER=2]="JS_NUMBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(d||(d={})),function(e){e[e.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",e[e.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",e[e.IDEMPOTENT=2]="IDEMPOTENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(p||(p={}));const f={name:"",package:"",dependency:"",publicDependency:0,weakDependency:0,syntax:""},v={encode(e,t=a().Writer.create()){""!==e.name&&t.uint32(10).string(e.name),""!==e.package&&t.uint32(18).string(e.package);for(const n of e.dependency)t.uint32(26).string(n);t.uint32(82).fork();for(const n of e.publicDependency)t.int32(n);t.ldelim(),t.uint32(90).fork();for(const n of e.weakDependency)t.int32(n);t.ldelim();for(const n of e.messageType)m.encode(n,t.uint32(34).fork()).ldelim();for(const n of e.enumType)b.encode(n,t.uint32(42).fork()).ldelim();for(const n of e.service)D.encode(n,t.uint32(50).fork()).ldelim();for(const n of e.extension)O.encode(n,t.uint32(58).fork()).ldelim();return void 0!==e.options&&G.encode(e.options,t.uint32(66).fork()).ldelim(),void 0!==e.sourceCodeInfo&&ie.encode(e.sourceCodeInfo,t.uint32(74).fork()).ldelim(),""!==e.syntax&&t.uint32(98).string(e.syntax),t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},f);for(i.dependency=[],i.publicDependency=[],i.weakDependency=[],i.messageType=[],i.enumType=[],i.service=[],i.extension=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.package=n.string();break;case 3:i.dependency.push(n.string());break;case 10:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.publicDependency.push(n.int32())}else i.publicDependency.push(n.int32());break;case 11:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.weakDependency.push(n.int32())}else i.weakDependency.push(n.int32());break;case 4:i.messageType.push(m.decode(n,n.uint32()));break;case 5:i.enumType.push(b.decode(n,n.uint32()));break;case 6:i.service.push(D.decode(n,n.uint32()));break;case 7:i.extension.push(O.decode(n,n.uint32()));break;case 8:i.options=G.decode(n,n.uint32());break;case 9:i.sourceCodeInfo=ie.decode(n,n.uint32());break;case 12:i.syntax=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},f);if(t.dependency=[],t.publicDependency=[],t.weakDependency=[],t.messageType=[],t.enumType=[],t.service=[],t.extension=[],void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.package&&null!==e.package?t.package=e.package:t.package="",void 0!==e.dependency&&null!==e.dependency)for(const n of e.dependency)t.dependency.push(n);if(void 0!==e.publicDependency&&null!==e.publicDependency)for(const n of e.publicDependency)t.publicDependency.push(n);if(void 0!==e.weakDependency&&null!==e.weakDependency)for(const n of e.weakDependency)t.weakDependency.push(n);if(void 0!==e.messageType&&null!==e.messageType)for(const n of e.messageType)t.messageType.push(m.fromPartial(n));if(void 0!==e.enumType&&null!==e.enumType)for(const n of e.enumType)t.enumType.push(b.fromPartial(n));if(void 0!==e.service&&null!==e.service)for(const n of e.service)t.service.push(D.fromPartial(n));if(void 0!==e.extension&&null!==e.extension)for(const n of e.extension)t.extension.push(O.fromPartial(n));return void 0!==e.options&&null!==e.options?t.options=G.fromPartial(e.options):t.options=void 0,void 0!==e.sourceCodeInfo&&null!==e.sourceCodeInfo?t.sourceCodeInfo=ie.fromPartial(e.sourceCodeInfo):t.sourceCodeInfo=void 0,void 0!==e.syntax&&null!==e.syntax?t.syntax=e.syntax:t.syntax="",t}},E={name:"",reservedName:""},m={encode(e,t=a().Writer.create()){""!==e.name&&t.uint32(10).string(e.name);for(const n of e.field)O.encode(n,t.uint32(18).fork()).ldelim();for(const n of e.extension)O.encode(n,t.uint32(50).fork()).ldelim();for(const n of e.nestedType)m.encode(n,t.uint32(26).fork()).ldelim();for(const n of e.enumType)b.encode(n,t.uint32(34).fork()).ldelim();for(const n of e.extensionRange)I.encode(n,t.uint32(42).fork()).ldelim();for(const n of e.oneofDecl)A.encode(n,t.uint32(66).fork()).ldelim();void 0!==e.options&&j.encode(e.options,t.uint32(58).fork()).ldelim();for(const n of e.reservedRange)h.encode(n,t.uint32(74).fork()).ldelim();for(const n of e.reservedName)t.uint32(82).string(n);return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},E);for(i.field=[],i.extension=[],i.nestedType=[],i.enumType=[],i.extensionRange=[],i.oneofDecl=[],i.reservedRange=[],i.reservedName=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.field.push(O.decode(n,n.uint32()));break;case 6:i.extension.push(O.decode(n,n.uint32()));break;case 3:i.nestedType.push(m.decode(n,n.uint32()));break;case 4:i.enumType.push(b.decode(n,n.uint32()));break;case 5:i.extensionRange.push(I.decode(n,n.uint32()));break;case 8:i.oneofDecl.push(A.decode(n,n.uint32()));break;case 7:i.options=j.decode(n,n.uint32());break;case 9:i.reservedRange.push(h.decode(n,n.uint32()));break;case 10:i.reservedName.push(n.string());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},E);if(t.field=[],t.extension=[],t.nestedType=[],t.enumType=[],t.extensionRange=[],t.oneofDecl=[],t.reservedRange=[],t.reservedName=[],void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.field&&null!==e.field)for(const n of e.field)t.field.push(O.fromPartial(n));if(void 0!==e.extension&&null!==e.extension)for(const n of e.extension)t.extension.push(O.fromPartial(n));if(void 0!==e.nestedType&&null!==e.nestedType)for(const n of e.nestedType)t.nestedType.push(m.fromPartial(n));if(void 0!==e.enumType&&null!==e.enumType)for(const n of e.enumType)t.enumType.push(b.fromPartial(n));if(void 0!==e.extensionRange&&null!==e.extensionRange)for(const n of e.extensionRange)t.extensionRange.push(I.fromPartial(n));if(void 0!==e.oneofDecl&&null!==e.oneofDecl)for(const n of e.oneofDecl)t.oneofDecl.push(A.fromPartial(n));if(void 0!==e.options&&null!==e.options?t.options=j.fromPartial(e.options):t.options=void 0,void 0!==e.reservedRange&&null!==e.reservedRange)for(const n of e.reservedRange)t.reservedRange.push(h.fromPartial(n));if(void 0!==e.reservedName&&null!==e.reservedName)for(const n of e.reservedName)t.reservedName.push(n);return t}},y={start:0,end:0},I={encode:(e,t=a().Writer.create())=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),void 0!==e.options&&_.encode(e.options,t.uint32(26).fork()).ldelim(),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},y);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.start=n.int32();break;case 2:i.end=n.int32();break;case 3:i.options=_.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},y);return void 0!==e.start&&null!==e.start?t.start=e.start:t.start=0,void 0!==e.end&&null!==e.end?t.end=e.end:t.end=0,void 0!==e.options&&null!==e.options?t.options=_.fromPartial(e.options):t.options=void 0,t}},g={start:0,end:0},h={encode:(e,t=a().Writer.create())=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},g);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.start=n.int32();break;case 2:i.end=n.int32();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},g);return void 0!==e.start&&null!==e.start?t.start=e.start:t.start=0,void 0!==e.end&&null!==e.end?t.end=e.end:t.end=0,t}},T={},_={encode(e,t=a().Writer.create()){for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},T);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();if(e>>>3===999)i.uninterpretedOption.push(ee.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromPartial(e){const t=Object.assign({},T);if(t.uninterpretedOption=[],void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},N={name:"",number:0,label:1,type:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1},O={encode:(e,t=a().Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),0!==e.number&&t.uint32(24).int32(e.number),1!==e.label&&t.uint32(32).int32(e.label),1!==e.type&&t.uint32(40).int32(e.type),""!==e.typeName&&t.uint32(50).string(e.typeName),""!==e.extendee&&t.uint32(18).string(e.extendee),""!==e.defaultValue&&t.uint32(58).string(e.defaultValue),0!==e.oneofIndex&&t.uint32(72).int32(e.oneofIndex),""!==e.jsonName&&t.uint32(82).string(e.jsonName),void 0!==e.options&&K.encode(e.options,t.uint32(66).fork()).ldelim(),!0===e.proto3Optional&&t.uint32(136).bool(e.proto3Optional),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},N);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 3:i.number=n.int32();break;case 4:i.label=n.int32();break;case 5:i.type=n.int32();break;case 6:i.typeName=n.string();break;case 2:i.extendee=n.string();break;case 7:i.defaultValue=n.string();break;case 9:i.oneofIndex=n.int32();break;case 10:i.jsonName=n.string();break;case 8:i.options=K.decode(n,n.uint32());break;case 17:i.proto3Optional=n.bool();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},N);return void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.number&&null!==e.number?t.number=e.number:t.number=0,void 0!==e.label&&null!==e.label?t.label=e.label:t.label=1,void 0!==e.type&&null!==e.type?t.type=e.type:t.type=1,void 0!==e.typeName&&null!==e.typeName?t.typeName=e.typeName:t.typeName="",void 0!==e.extendee&&null!==e.extendee?t.extendee=e.extendee:t.extendee="",void 0!==e.defaultValue&&null!==e.defaultValue?t.defaultValue=e.defaultValue:t.defaultValue="",void 0!==e.oneofIndex&&null!==e.oneofIndex?t.oneofIndex=e.oneofIndex:t.oneofIndex=0,void 0!==e.jsonName&&null!==e.jsonName?t.jsonName=e.jsonName:t.jsonName="",void 0!==e.options&&null!==e.options?t.options=K.fromPartial(e.options):t.options=void 0,void 0!==e.proto3Optional&&null!==e.proto3Optional?t.proto3Optional=e.proto3Optional:t.proto3Optional=!1,t}},S={name:""},A={encode:(e,t=a().Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),void 0!==e.options&&W.encode(e.options,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},S);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.options=W.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},S);return void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.options&&null!==e.options?t.options=W.fromPartial(e.options):t.options=void 0,t}},R={name:"",reservedName:""},b={encode(e,t=a().Writer.create()){""!==e.name&&t.uint32(10).string(e.name);for(const n of e.value)w.encode(n,t.uint32(18).fork()).ldelim();void 0!==e.options&&H.encode(e.options,t.uint32(26).fork()).ldelim();for(const n of e.reservedRange)P.encode(n,t.uint32(34).fork()).ldelim();for(const n of e.reservedName)t.uint32(42).string(n);return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},R);for(i.value=[],i.reservedRange=[],i.reservedName=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.value.push(w.decode(n,n.uint32()));break;case 3:i.options=H.decode(n,n.uint32());break;case 4:i.reservedRange.push(P.decode(n,n.uint32()));break;case 5:i.reservedName.push(n.string());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},R);if(t.value=[],t.reservedRange=[],t.reservedName=[],void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.value&&null!==e.value)for(const n of e.value)t.value.push(w.fromPartial(n));if(void 0!==e.options&&null!==e.options?t.options=H.fromPartial(e.options):t.options=void 0,void 0!==e.reservedRange&&null!==e.reservedRange)for(const n of e.reservedRange)t.reservedRange.push(P.fromPartial(n));if(void 0!==e.reservedName&&null!==e.reservedName)for(const n of e.reservedName)t.reservedName.push(n);return t}},C={start:0,end:0},P={encode:(e,t=a().Writer.create())=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},C);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.start=n.int32();break;case 2:i.end=n.int32();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},C);return void 0!==e.start&&null!==e.start?t.start=e.start:t.start=0,void 0!==e.end&&null!==e.end?t.end=e.end:t.end=0,t}},k={name:"",number:0},w={encode:(e,t=a().Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),0!==e.number&&t.uint32(16).int32(e.number),void 0!==e.options&&z.encode(e.options,t.uint32(26).fork()).ldelim(),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},k);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.number=n.int32();break;case 3:i.options=z.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},k);return void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.number&&null!==e.number?t.number=e.number:t.number=0,void 0!==e.options&&null!==e.options?t.options=z.fromPartial(e.options):t.options=void 0,t}},U={name:""},D={encode(e,t=a().Writer.create()){""!==e.name&&t.uint32(10).string(e.name);for(const n of e.method)M.encode(n,t.uint32(18).fork()).ldelim();return void 0!==e.options&&q.encode(e.options,t.uint32(26).fork()).ldelim(),t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},U);for(i.method=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.method.push(M.decode(n,n.uint32()));break;case 3:i.options=q.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},U);if(t.method=[],void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.method&&null!==e.method)for(const n of e.method)t.method.push(M.fromPartial(n));return void 0!==e.options&&null!==e.options?t.options=q.fromPartial(e.options):t.options=void 0,t}},L={name:"",inputType:"",outputType:"",clientStreaming:!1,serverStreaming:!1},M={encode:(e,t=a().Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),""!==e.inputType&&t.uint32(18).string(e.inputType),""!==e.outputType&&t.uint32(26).string(e.outputType),void 0!==e.options&&X.encode(e.options,t.uint32(34).fork()).ldelim(),!0===e.clientStreaming&&t.uint32(40).bool(e.clientStreaming),!0===e.serverStreaming&&t.uint32(48).bool(e.serverStreaming),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},L);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.inputType=n.string();break;case 3:i.outputType=n.string();break;case 4:i.options=X.decode(n,n.uint32());break;case 5:i.clientStreaming=n.bool();break;case 6:i.serverStreaming=n.bool();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},L);return void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.inputType&&null!==e.inputType?t.inputType=e.inputType:t.inputType="",void 0!==e.outputType&&null!==e.outputType?t.outputType=e.outputType:t.outputType="",void 0!==e.options&&null!==e.options?t.options=X.fromPartial(e.options):t.options=void 0,void 0!==e.clientStreaming&&null!==e.clientStreaming?t.clientStreaming=e.clientStreaming:t.clientStreaming=!1,void 0!==e.serverStreaming&&null!==e.serverStreaming?t.serverStreaming=e.serverStreaming:t.serverStreaming=!1,t}},V={javaPackage:"",javaOuterClassname:"",javaMultipleFiles:!1,javaGenerateEqualsAndHash:!1,javaStringCheckUtf8:!1,optimizeFor:1,goPackage:"",ccGenericServices:!1,javaGenericServices:!1,pyGenericServices:!1,phpGenericServices:!1,deprecated:!1,ccEnableArenas:!1,objcClassPrefix:"",csharpNamespace:"",swiftPrefix:"",phpClassPrefix:"",phpNamespace:"",phpMetadataNamespace:"",rubyPackage:""},G={encode(e,t=a().Writer.create()){""!==e.javaPackage&&t.uint32(10).string(e.javaPackage),""!==e.javaOuterClassname&&t.uint32(66).string(e.javaOuterClassname),!0===e.javaMultipleFiles&&t.uint32(80).bool(e.javaMultipleFiles),!0===e.javaGenerateEqualsAndHash&&t.uint32(160).bool(e.javaGenerateEqualsAndHash),!0===e.javaStringCheckUtf8&&t.uint32(216).bool(e.javaStringCheckUtf8),1!==e.optimizeFor&&t.uint32(72).int32(e.optimizeFor),""!==e.goPackage&&t.uint32(90).string(e.goPackage),!0===e.ccGenericServices&&t.uint32(128).bool(e.ccGenericServices),!0===e.javaGenericServices&&t.uint32(136).bool(e.javaGenericServices),!0===e.pyGenericServices&&t.uint32(144).bool(e.pyGenericServices),!0===e.phpGenericServices&&t.uint32(336).bool(e.phpGenericServices),!0===e.deprecated&&t.uint32(184).bool(e.deprecated),!0===e.ccEnableArenas&&t.uint32(248).bool(e.ccEnableArenas),""!==e.objcClassPrefix&&t.uint32(290).string(e.objcClassPrefix),""!==e.csharpNamespace&&t.uint32(298).string(e.csharpNamespace),""!==e.swiftPrefix&&t.uint32(314).string(e.swiftPrefix),""!==e.phpClassPrefix&&t.uint32(322).string(e.phpClassPrefix),""!==e.phpNamespace&&t.uint32(330).string(e.phpNamespace),""!==e.phpMetadataNamespace&&t.uint32(354).string(e.phpMetadataNamespace),""!==e.rubyPackage&&t.uint32(362).string(e.rubyPackage);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},V);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.javaPackage=n.string();break;case 8:i.javaOuterClassname=n.string();break;case 10:i.javaMultipleFiles=n.bool();break;case 20:i.javaGenerateEqualsAndHash=n.bool();break;case 27:i.javaStringCheckUtf8=n.bool();break;case 9:i.optimizeFor=n.int32();break;case 11:i.goPackage=n.string();break;case 16:i.ccGenericServices=n.bool();break;case 17:i.javaGenericServices=n.bool();break;case 18:i.pyGenericServices=n.bool();break;case 42:i.phpGenericServices=n.bool();break;case 23:i.deprecated=n.bool();break;case 31:i.ccEnableArenas=n.bool();break;case 36:i.objcClassPrefix=n.string();break;case 37:i.csharpNamespace=n.string();break;case 39:i.swiftPrefix=n.string();break;case 40:i.phpClassPrefix=n.string();break;case 41:i.phpNamespace=n.string();break;case 44:i.phpMetadataNamespace=n.string();break;case 45:i.rubyPackage=n.string();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},V);if(t.uninterpretedOption=[],void 0!==e.javaPackage&&null!==e.javaPackage?t.javaPackage=e.javaPackage:t.javaPackage="",void 0!==e.javaOuterClassname&&null!==e.javaOuterClassname?t.javaOuterClassname=e.javaOuterClassname:t.javaOuterClassname="",void 0!==e.javaMultipleFiles&&null!==e.javaMultipleFiles?t.javaMultipleFiles=e.javaMultipleFiles:t.javaMultipleFiles=!1,void 0!==e.javaGenerateEqualsAndHash&&null!==e.javaGenerateEqualsAndHash?t.javaGenerateEqualsAndHash=e.javaGenerateEqualsAndHash:t.javaGenerateEqualsAndHash=!1,void 0!==e.javaStringCheckUtf8&&null!==e.javaStringCheckUtf8?t.javaStringCheckUtf8=e.javaStringCheckUtf8:t.javaStringCheckUtf8=!1,void 0!==e.optimizeFor&&null!==e.optimizeFor?t.optimizeFor=e.optimizeFor:t.optimizeFor=1,void 0!==e.goPackage&&null!==e.goPackage?t.goPackage=e.goPackage:t.goPackage="",void 0!==e.ccGenericServices&&null!==e.ccGenericServices?t.ccGenericServices=e.ccGenericServices:t.ccGenericServices=!1,void 0!==e.javaGenericServices&&null!==e.javaGenericServices?t.javaGenericServices=e.javaGenericServices:t.javaGenericServices=!1,void 0!==e.pyGenericServices&&null!==e.pyGenericServices?t.pyGenericServices=e.pyGenericServices:t.pyGenericServices=!1,void 0!==e.phpGenericServices&&null!==e.phpGenericServices?t.phpGenericServices=e.phpGenericServices:t.phpGenericServices=!1,void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.ccEnableArenas&&null!==e.ccEnableArenas?t.ccEnableArenas=e.ccEnableArenas:t.ccEnableArenas=!1,void 0!==e.objcClassPrefix&&null!==e.objcClassPrefix?t.objcClassPrefix=e.objcClassPrefix:t.objcClassPrefix="",void 0!==e.csharpNamespace&&null!==e.csharpNamespace?t.csharpNamespace=e.csharpNamespace:t.csharpNamespace="",void 0!==e.swiftPrefix&&null!==e.swiftPrefix?t.swiftPrefix=e.swiftPrefix:t.swiftPrefix="",void 0!==e.phpClassPrefix&&null!==e.phpClassPrefix?t.phpClassPrefix=e.phpClassPrefix:t.phpClassPrefix="",void 0!==e.phpNamespace&&null!==e.phpNamespace?t.phpNamespace=e.phpNamespace:t.phpNamespace="",void 0!==e.phpMetadataNamespace&&null!==e.phpMetadataNamespace?t.phpMetadataNamespace=e.phpMetadataNamespace:t.phpMetadataNamespace="",void 0!==e.rubyPackage&&null!==e.rubyPackage?t.rubyPackage=e.rubyPackage:t.rubyPackage="",void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},F={messageSetWireFormat:!1,noStandardDescriptorAccessor:!1,deprecated:!1,mapEntry:!1},j={encode(e,t=a().Writer.create()){!0===e.messageSetWireFormat&&t.uint32(8).bool(e.messageSetWireFormat),!0===e.noStandardDescriptorAccessor&&t.uint32(16).bool(e.noStandardDescriptorAccessor),!0===e.deprecated&&t.uint32(24).bool(e.deprecated),!0===e.mapEntry&&t.uint32(56).bool(e.mapEntry);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},F);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.messageSetWireFormat=n.bool();break;case 2:i.noStandardDescriptorAccessor=n.bool();break;case 3:i.deprecated=n.bool();break;case 7:i.mapEntry=n.bool();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},F);if(t.uninterpretedOption=[],void 0!==e.messageSetWireFormat&&null!==e.messageSetWireFormat?t.messageSetWireFormat=e.messageSetWireFormat:t.messageSetWireFormat=!1,void 0!==e.noStandardDescriptorAccessor&&null!==e.noStandardDescriptorAccessor?t.noStandardDescriptorAccessor=e.noStandardDescriptorAccessor:t.noStandardDescriptorAccessor=!1,void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.mapEntry&&null!==e.mapEntry?t.mapEntry=e.mapEntry:t.mapEntry=!1,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},x={ctype:0,packed:!1,jstype:0,lazy:!1,deprecated:!1,weak:!1},K={encode(e,t=a().Writer.create()){0!==e.ctype&&t.uint32(8).int32(e.ctype),!0===e.packed&&t.uint32(16).bool(e.packed),0!==e.jstype&&t.uint32(48).int32(e.jstype),!0===e.lazy&&t.uint32(40).bool(e.lazy),!0===e.deprecated&&t.uint32(24).bool(e.deprecated),!0===e.weak&&t.uint32(80).bool(e.weak);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},x);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.ctype=n.int32();break;case 2:i.packed=n.bool();break;case 6:i.jstype=n.int32();break;case 5:i.lazy=n.bool();break;case 3:i.deprecated=n.bool();break;case 10:i.weak=n.bool();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},x);if(t.uninterpretedOption=[],void 0!==e.ctype&&null!==e.ctype?t.ctype=e.ctype:t.ctype=0,void 0!==e.packed&&null!==e.packed?t.packed=e.packed:t.packed=!1,void 0!==e.jstype&&null!==e.jstype?t.jstype=e.jstype:t.jstype=0,void 0!==e.lazy&&null!==e.lazy?t.lazy=e.lazy:t.lazy=!1,void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.weak&&null!==e.weak?t.weak=e.weak:t.weak=!1,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},B={},W={encode(e,t=a().Writer.create()){for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},B);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();if(e>>>3===999)i.uninterpretedOption.push(ee.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromPartial(e){const t=Object.assign({},B);if(t.uninterpretedOption=[],void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},Y={allowAlias:!1,deprecated:!1},H={encode(e,t=a().Writer.create()){!0===e.allowAlias&&t.uint32(16).bool(e.allowAlias),!0===e.deprecated&&t.uint32(24).bool(e.deprecated);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Y);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 2:i.allowAlias=n.bool();break;case 3:i.deprecated=n.bool();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Y);if(t.uninterpretedOption=[],void 0!==e.allowAlias&&null!==e.allowAlias?t.allowAlias=e.allowAlias:t.allowAlias=!1,void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},J={deprecated:!1},z={encode(e,t=a().Writer.create()){!0===e.deprecated&&t.uint32(8).bool(e.deprecated);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},J);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.deprecated=n.bool();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},J);if(t.uninterpretedOption=[],void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},Z={deprecated:!1},q={encode(e,t=a().Writer.create()){!0===e.deprecated&&t.uint32(264).bool(e.deprecated);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Z);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 33:i.deprecated=n.bool();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Z);if(t.uninterpretedOption=[],void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},$={deprecated:!1,idempotencyLevel:0},X={encode(e,t=a().Writer.create()){!0===e.deprecated&&t.uint32(264).bool(e.deprecated),0!==e.idempotencyLevel&&t.uint32(272).int32(e.idempotencyLevel);for(const n of e.uninterpretedOption)ee.encode(n,t.uint32(7994).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},$);for(i.uninterpretedOption=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 33:i.deprecated=n.bool();break;case 34:i.idempotencyLevel=n.int32();break;case 999:i.uninterpretedOption.push(ee.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},$);if(t.uninterpretedOption=[],void 0!==e.deprecated&&null!==e.deprecated?t.deprecated=e.deprecated:t.deprecated=!1,void 0!==e.idempotencyLevel&&null!==e.idempotencyLevel?t.idempotencyLevel=e.idempotencyLevel:t.idempotencyLevel=0,void 0!==e.uninterpretedOption&&null!==e.uninterpretedOption)for(const n of e.uninterpretedOption)t.uninterpretedOption.push(ee.fromPartial(n));return t}},Q={identifierValue:"",positiveIntValue:0,negativeIntValue:0,doubleValue:0,aggregateValue:""},ee={encode(e,t=a().Writer.create()){for(const n of e.name)ne.encode(n,t.uint32(18).fork()).ldelim();return""!==e.identifierValue&&t.uint32(26).string(e.identifierValue),0!==e.positiveIntValue&&t.uint32(32).uint64(e.positiveIntValue),0!==e.negativeIntValue&&t.uint32(40).int64(e.negativeIntValue),0!==e.doubleValue&&t.uint32(49).double(e.doubleValue),0!==e.stringValue.length&&t.uint32(58).bytes(e.stringValue),""!==e.aggregateValue&&t.uint32(66).string(e.aggregateValue),t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},Q);for(i.name=[],i.stringValue=new Uint8Array;n.pos<r;){const e=n.uint32();switch(e>>>3){case 2:i.name.push(ne.decode(n,n.uint32()));break;case 3:i.identifierValue=n.string();break;case 4:i.positiveIntValue=ce(n.uint64());break;case 5:i.negativeIntValue=ce(n.int64());break;case 6:i.doubleValue=n.double();break;case 7:i.stringValue=n.bytes();break;case 8:i.aggregateValue=n.string();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},Q);if(t.name=[],void 0!==e.name&&null!==e.name)for(const n of e.name)t.name.push(ne.fromPartial(n));return void 0!==e.identifierValue&&null!==e.identifierValue?t.identifierValue=e.identifierValue:t.identifierValue="",void 0!==e.positiveIntValue&&null!==e.positiveIntValue?t.positiveIntValue=e.positiveIntValue:t.positiveIntValue=0,void 0!==e.negativeIntValue&&null!==e.negativeIntValue?t.negativeIntValue=e.negativeIntValue:t.negativeIntValue=0,void 0!==e.doubleValue&&null!==e.doubleValue?t.doubleValue=e.doubleValue:t.doubleValue=0,void 0!==e.stringValue&&null!==e.stringValue?t.stringValue=e.stringValue:t.stringValue=new Uint8Array,void 0!==e.aggregateValue&&null!==e.aggregateValue?t.aggregateValue=e.aggregateValue:t.aggregateValue="",t}},te={namePart:"",isExtension:!1},ne={encode:(e,t=a().Writer.create())=>(""!==e.namePart&&t.uint32(10).string(e.namePart),!0===e.isExtension&&t.uint32(16).bool(e.isExtension),t),decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},te);for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.namePart=n.string();break;case 2:i.isExtension=n.bool();break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},te);return void 0!==e.namePart&&null!==e.namePart?t.namePart=e.namePart:t.namePart="",void 0!==e.isExtension&&null!==e.isExtension?t.isExtension=e.isExtension:t.isExtension=!1,t}},re={},ie={encode(e,t=a().Writer.create()){for(const n of e.location)ae.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},re);for(i.location=[];n.pos<r;){const e=n.uint32();if(e>>>3===1)i.location.push(ae.decode(n,n.uint32()));else n.skipType(7&e)}return i},fromPartial(e){const t=Object.assign({},re);if(t.location=[],void 0!==e.location&&null!==e.location)for(const n of e.location)t.location.push(ae.fromPartial(n));return t}},oe={path:0,span:0,leadingComments:"",trailingComments:"",leadingDetachedComments:""},ae={encode(e,t=a().Writer.create()){t.uint32(10).fork();for(const n of e.path)t.int32(n);t.ldelim(),t.uint32(18).fork();for(const n of e.span)t.int32(n);t.ldelim(),""!==e.leadingComments&&t.uint32(26).string(e.leadingComments),""!==e.trailingComments&&t.uint32(34).string(e.trailingComments);for(const n of e.leadingDetachedComments)t.uint32(50).string(n);return t},decode(e,t){const n=e instanceof a().Reader?e:new(a().Reader)(e);let r=void 0===t?n.len:n.pos+t;const i=Object.assign({},oe);for(i.path=[],i.span=[],i.leadingDetachedComments=[];n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.path.push(n.int32())}else i.path.push(n.int32());break;case 2:if(2===(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.span.push(n.int32())}else i.span.push(n.int32());break;case 3:i.leadingComments=n.string();break;case 4:i.trailingComments=n.string();break;case 6:i.leadingDetachedComments.push(n.string());break;default:n.skipType(7&e)}}return i},fromPartial(e){const t=Object.assign({},oe);if(t.path=[],t.span=[],t.leadingDetachedComments=[],void 0!==e.path&&null!==e.path)for(const n of e.path)t.path.push(n);if(void 0!==e.span&&null!==e.span)for(const n of e.span)t.span.push(n);if(void 0!==e.leadingComments&&null!==e.leadingComments?t.leadingComments=e.leadingComments:t.leadingComments="",void 0!==e.trailingComments&&null!==e.trailingComments?t.trailingComments=e.trailingComments:t.trailingComments="",void 0!==e.leadingDetachedComments&&null!==e.leadingDetachedComments)for(const n of e.leadingDetachedComments)t.leadingDetachedComments.push(n);return t}};var se=(()=>{if("undefined"!==typeof se)return se;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw"Unable to locate global object"})();function ce(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new se.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}a().util.Long!==i()&&(a().util.Long=i(),a().configure())},52362:function(e,t,n){"use strict";var r=n(34406);Object.defineProperty(t,"__esModule",{value:!0}),t.backendEndpoint=function(){if("undefined"===typeof window){var e=r.env.BACKEND_ENDPOINT;return e||""}return"/api/proxy-to-backend"},t.WEB_CHAT_URL=t.BOLT_ORIGIN=t.S_ORIGIN=t.CF_ST_ORIGIN=t.COOKIE_SETTINGS_ORIGIN=t.IMAGE_TIMEOUT_DURATION_MS=t.snapchatFooterMinHeight=t.assetPrefix=t.TABLET_MAX_WIDTH=t.DESKTOP_MIN_WIDTH=t.MOBILE_MAX_WIDTH=void 0;t.MOBILE_MAX_WIDTH=479;t.DESKTOP_MIN_WIDTH=480;t.TABLET_MAX_WIDTH=768;var i=r.env.ASSET_PREFIX||"";t.assetPrefix=i;t.snapchatFooterMinHeight=48;t.IMAGE_TIMEOUT_DURATION_MS=7e3;t.COOKIE_SETTINGS_ORIGIN="https://www.snapchat.com";t.CF_ST_ORIGIN="https://cf-st.sc-cdn.net";t.S_ORIGIN="https://s.sc-cdn.net";t.BOLT_ORIGIN="https://bolt-gcdn.sc-cdn.net";t.WEB_CHAT_URL="https://web.snapchat.com/"},72828:function(e,t,n){"use strict";t.t=void 0;var r=n(52362);t.t=function(){return"undefined"!==typeof window&&window.innerWidth<r.DESKTOP_MIN_WIDTH}},42337:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var n,i=this;this.headersMap={},e&&("undefined"!==typeof Headers&&e instanceof Headers?r.getHeaderKeys(e).forEach((function(n){r.getHeaderValues(e,n).forEach((function(e){t.splitValues?i.append(n,r.splitHeaderValue(e)):i.append(n,e)}))})):"object"===typeof(n=e)&&"object"===typeof n.headersMap&&"function"===typeof n.forEach?e.forEach((function(e,t){i.append(e,t)})):"undefined"!==typeof Map&&e instanceof Map?e.forEach((function(e,t){i.append(t,e)})):"string"===typeof e?this.appendFromString(e):"object"===typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];Array.isArray(n)?n.forEach((function(e){i.append(t,e)})):i.append(t,n)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),n=0;n<t.length;n++){var r=t[n],i=r.indexOf(":");if(i>0){var o=r.substring(0,i).trim(),a=r.substring(i+1).trim();this.append(o,a)}}},e.prototype.delete=function(e,t){var n=r.normalizeName(e);if(void 0===t)delete this.headersMap[n];else{var i=this.headersMap[n];if(i){var o=i.indexOf(t);o>=0&&i.splice(o,1),0===i.length&&delete this.headersMap[n]}}},e.prototype.append=function(e,t){var n=this,i=r.normalizeName(e);Array.isArray(this.headersMap[i])||(this.headersMap[i]=[]),Array.isArray(t)?t.forEach((function(e){n.headersMap[i].push(r.normalizeValue(e))})):this.headersMap[i].push(r.normalizeValue(t))},e.prototype.set=function(e,t){var n=r.normalizeName(e);if(Array.isArray(t)){var i=[];t.forEach((function(e){i.push(r.normalizeValue(e))})),this.headersMap[n]=i}else this.headersMap[n]=[r.normalizeValue(t)]},e.prototype.has=function(e,t){var n=this.headersMap[r.normalizeName(e)];if(!Array.isArray(n))return!1;if(void 0!==t){var i=r.normalizeValue(t);return n.indexOf(i)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[r.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(n){e(n,t.headersMap[n])}),this)},e.prototype.toHeaders=function(){if("undefined"!==typeof Headers){var e=new Headers;return this.forEach((function(t,n){n.forEach((function(n){e.append(t,n)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BrowserHeaders=r.BrowserHeaders},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var n=e[Symbol.iterator](),r=n.next();!r.done;)t(r.value[0]),r=n.next()},t.iterateHeadersKeys=function(e,t){for(var n=e.keys(),r=n.next();!r.done;)t(r.value),r=n.next()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.normalizeName=function(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!==typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var n=e;if(n instanceof Headers&&n.getAll)return n.getAll(t);var r=n.get(t);return r&&"string"===typeof r?[r]:r},t.getHeaderKeys=function(e){var t=e,n={},i=[];return t.keys?r.iterateHeadersKeys(t,(function(e){n[e]||(n[e]=!0,i.push(e))})):t.forEach?t.forEach((function(e,t){n[t]||(n[t]=!0,i.push(t))})):r.iterateHeaders(t,(function(e){var t=e[0];n[t]||(n[t]=!0,i.push(t))})),i},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}])},e.exports=t()},50857:function(e,t,n){var r=n(37772).Symbol;e.exports=r},53366:function(e,t,n){var r=n(50857),i=n(62107),o=n(37157),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},51704:function(e,t,n){var r=n(52153),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},51242:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},62107:function(e,t,n){var r=n(50857),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(c){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},37157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},37772:function(e,t,n){var r=n(51242),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},52153:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},54073:function(e,t,n){var r=n(29259),i=n(61100),o=n(7642),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,l,d,p,f,v=0,E=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function I(t){var n=c,r=u;return c=u=void 0,v=t,d=e.apply(r,n)}function g(e){return v=e,p=setTimeout(T,t),E?I(e):d}function h(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-v>=l}function T(){var e=i();if(h(e))return _(e);p=setTimeout(T,function(e){var n=t-(e-f);return m?s(n,l-(e-v)):n}(e))}function _(e){return p=void 0,y&&c?I(e):(c=u=void 0,d)}function N(){var e=i(),n=h(e);if(c=arguments,u=this,f=e,n){if(void 0===p)return g(f);if(m)return clearTimeout(p),p=setTimeout(T,t),I(f)}return void 0===p&&(p=setTimeout(T,t)),d}return t=o(t)||0,r(n)&&(E=!!n.leading,l=(m="maxWait"in n)?a(o(n.maxWait)||0,t):l,y="trailing"in n?!!n.trailing:y),N.cancel=function(){void 0!==p&&clearTimeout(p),v=0,c=f=u=p=void 0},N.flush=function(){return void 0===p?d:_(i())},N}},29259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},15125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4795:function(e,t,n){var r=n(53366),i=n(15125);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},61100:function(e,t,n){var r=n(37772);e.exports=function(){return r.Date.now()}},6040:function(e,t,n){var r=n(54073),i=n(29259);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},7642:function(e,t,n){var r=n(51704),i=n(29259),o=n(4795),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},1738:function(e,t,n){var r,i=n(34406);!function(e){!function(t){var r="object"===typeof n.g?n.g:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),o=a(e);function a(e,t){return function(n,r){"function"!==typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}"undefined"===typeof r.Reflect?r.Reflect=e:o=a(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"===typeof Symbol,r=n&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,c=!a&&!s,u={create:a?function(){return ie(Object.create(null))}:s?function(){return ie({__proto__:null})}:function(){return ie({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"===typeof i&&i.env&&"true"===i.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=d||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?te():Map,f=d||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?ne():Set,v=new(d||"function"!==typeof WeakMap?re():WeakMap);function E(e,t,n,r){if(M(n)){if(!Y(e))throw new TypeError;if(!J(t))throw new TypeError;return S(e,t)}if(!Y(e))throw new TypeError;if(!F(t))throw new TypeError;if(!F(r)&&!M(r)&&!V(r))throw new TypeError;return V(r)&&(r=void 0),A(e,t,n=W(n),r)}function m(e,t){function n(n,r){if(!F(n))throw new TypeError;if(!M(r)&&!z(r))throw new TypeError;w(e,t,n,r)}return n}function y(e,t,n,r){if(!F(n))throw new TypeError;return M(r)||(r=W(r)),w(e,t,n,r)}function I(e,t,n){if(!F(t))throw new TypeError;return M(n)||(n=W(n)),b(e,t,n)}function g(e,t,n){if(!F(t))throw new TypeError;return M(n)||(n=W(n)),C(e,t,n)}function h(e,t,n){if(!F(t))throw new TypeError;return M(n)||(n=W(n)),P(e,t,n)}function T(e,t,n){if(!F(t))throw new TypeError;return M(n)||(n=W(n)),k(e,t,n)}function _(e,t){if(!F(e))throw new TypeError;return M(t)||(t=W(t)),U(e,t)}function N(e,t){if(!F(e))throw new TypeError;return M(t)||(t=W(t)),D(e,t)}function O(e,t,n){if(!F(t))throw new TypeError;M(n)||(n=W(n));var r=R(t,n,!1);if(M(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=v.get(t);return i.delete(n),i.size>0||v.delete(t),!0}function S(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!M(r)&&!V(r)){if(!J(r))throw new TypeError;t=r}}return t}function A(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!M(o)&&!V(o)){if(!F(o))throw new TypeError;r=o}}return r}function R(e,t,n){var r=v.get(e);if(M(r)){if(!n)return;r=new p,v.set(e,r)}var i=r.get(t);if(M(i)){if(!n)return;i=new p,r.set(t,i)}return i}function b(e,t,n){if(C(e,t,n))return!0;var r=ee(t);return!V(r)&&b(e,r,n)}function C(e,t,n){var r=R(t,n,!1);return!M(r)&&K(r.has(e))}function P(e,t,n){if(C(e,t,n))return k(e,t,n);var r=ee(t);return V(r)?void 0:P(e,r,n)}function k(e,t,n){var r=R(t,n,!1);if(!M(r))return r.get(e)}function w(e,t,n,r){R(n,r,!0).set(e,t)}function U(e,t){var n=D(e,t),r=ee(e);if(null===r)return n;var i=U(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new f,a=[],s=0,c=n;s<c.length;s++){var u=c[s];o.has(u)||(o.add(u),a.push(u))}for(var l=0,d=i;l<d.length;l++){u=d[l];o.has(u)||(o.add(u),a.push(u))}return a}function D(e,t){var n=[],r=R(e,t,!1);if(M(r))return n;for(var i=q(r.keys()),o=0;;){var a=X(i);if(!a)return n.length=o,n;var s=$(a);try{n[o]=s}catch(c){try{Q(i)}finally{throw c}}o++}}function L(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function M(e){return void 0===e}function V(e){return null===e}function G(e){return"symbol"===typeof e}function F(e){return"object"===typeof e?null!==e:"function"===typeof e}function j(e,t){switch(L(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=Z(e,r);if(void 0!==i){var o=i.call(e,n);if(F(o))throw new TypeError;return o}return x(e,"default"===n?"number":n)}function x(e,t){if("string"===t){var n=e.toString;if(H(n))if(!F(i=n.call(e)))return i;if(H(r=e.valueOf))if(!F(i=r.call(e)))return i}else{var r;if(H(r=e.valueOf))if(!F(i=r.call(e)))return i;var i,o=e.toString;if(H(o))if(!F(i=o.call(e)))return i}throw new TypeError}function K(e){return!!e}function B(e){return""+e}function W(e){var t=j(e,3);return G(t)?t:B(t)}function Y(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function H(e){return"function"===typeof e}function J(e){return"function"===typeof e}function z(e){switch(L(e)){case 3:case 4:return!0;default:return!1}}function Z(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!H(n))throw new TypeError;return n}}function q(e){var t=Z(e,o);if(!H(t))throw new TypeError;var n=t.call(e);if(!F(n))throw new TypeError;return n}function $(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Q(e){var t=e.return;t&&t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if("function"!==typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!==typeof i||i===e?t:i}function te(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function ne(){return function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function re(){var e=16,n=u.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(u.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",E),e("metadata",m),e("defineMetadata",y),e("hasMetadata",I),e("hasOwnMetadata",g),e("getMetadata",h),e("getOwnMetadata",T),e("getMetadataKeys",_),e("getOwnMetadataKeys",N),e("deleteMetadata",O)}(o)}()}(r||(r={}))}}]);
//# sourceMappingURL=777-0f509e5be4d28092.js.map
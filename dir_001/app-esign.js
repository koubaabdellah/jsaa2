/*!
  backgrid
  http://github.com/wyuenho/backgrid

  Copyright (c) 2014 Jimmy Yuen Ho Wong and contributors <wyuenho@gmail.com>
  Licensed under the MIT license.
*/
(function(a){if(typeof exports=="object"){module.exports=a(module.exports,require("underscore"),require("backbone"))}else{a(this,this._,this.Backbone)}}(function(v,Q,E){var P="\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";if(!String.prototype.trim||P.trim()){P="["+P+"]";var x=new RegExp("^"+P+P+"*"),p=new RegExp(P+P+"*$");String.prototype.trim=function a(){if(this===undefined||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(x,"").replace(p,"")}}function F(X,U,T){var W=U-(X+"").length;W=W<0?0:W;var V="";for(var S=0;S<W;S++){V=V+T}return V+X}var C=E.$;var R=v.Backgrid={Extension:{},resolveNameToClass:function(T,V){if(Q.isString(T)){var U=Q.map(T.split("-"),function(W){return W.slice(0,1).toUpperCase()+W.slice(1)}).join("")+V;var S=R[U]||R.Extension[U];if(Q.isUndefined(S)){throw new ReferenceError("Class '"+U+"' not found")}return S}return T},callByNeed:function(){var U=arguments[0];if(!Q.isFunction(U)){return U}var T=arguments[1];var S=[].slice.call(arguments,2);return U.apply(T,!!(S+"")?S:[])}};Q.extend(R,E.Events);var f=R.Command=function(S){Q.extend(this,{altKey:!!S.altKey,"char":S["char"],charCode:S.charCode,ctrlKey:!!S.ctrlKey,key:S.key,keyCode:S.keyCode,locale:S.locale,location:S.location,metaKey:!!S.metaKey,repeat:!!S.repeat,shiftKey:!!S.shiftKey,which:S.which})};Q.extend(f.prototype,{moveUp:function(){return this.keyCode==38},moveDown:function(){return this.keyCode===40},moveLeft:function(){return this.shiftKey&&this.keyCode===9},moveRight:function(){return !this.shiftKey&&this.keyCode===9},save:function(){return this.keyCode===13},cancel:function(){return this.keyCode===27},passThru:function(){return !(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var w=R.CellFormatter=function(){};Q.extend(w.prototype,{fromRaw:function(T,S){return T},toRaw:function(T,S){return T}});var y=R.NumberFormatter=function(S){Q.extend(this,this.defaults,S||{});if(this.decimals<0||this.decimals>20){throw new RangeError("decimals must be between 0 and 20")}};y.prototype=new w();Q.extend(y.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(U,T){if(Q.isNull(U)||Q.isUndefined(U)){return""}U=U.toFixed(~~this.decimals);var V=U.split(".");var W=V[0];var S=V[1]?(this.decimalSeparator||".")+V[1]:"";return W.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+S},toRaw:function(V,U){V=V.trim();if(V===""){return null}var Y="";var T=V.split(this.orderSeparator);for(var W=0;W<T.length;W++){Y+=T[W]}var X=Y.split(this.decimalSeparator);Y="";for(var W=0;W<X.length;W++){Y=Y+X[W]+"."}if(Y[Y.length-1]==="."){Y=Y.slice(0,Y.length-1)}var S=(Y*1).toFixed(~~this.decimals)*1;if(Q.isNumber(S)&&!Q.isNaN(S)){return S}}});var n=R.PercentFormatter=function(){R.NumberFormatter.apply(this,arguments)};n.prototype=new R.NumberFormatter(),Q.extend(n.prototype,{defaults:Q.extend({},y.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(U,T){var S=[].slice.call(arguments,1);S.unshift(U*this.multiplier);return(y.prototype.fromRaw.apply(this,S)||"0")+this.symbol},toRaw:function(T,S){var V=T.split(this.symbol);if(V&&V[0]&&V[1]===""||V[1]==null){var U=y.prototype.toRaw.call(this,V[0]);if(Q.isUndefined(U)){return U}return U/this.multiplier}}});var s=R.DatetimeFormatter=function(S){Q.extend(this,this.defaults,S||{});if(!this.includeDate&&!this.includeTime){throw new Error("Either includeDate or includeTime must be true")}};s.prototype=new w();Q.extend(s.prototype,{defaults:{includeDate:true,includeTime:true,includeMilli:false},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(X,Y){if((X+"").trim()===""){return null}var U,T=null;if(Q.isNumber(X)){var S=new Date(X);U=F(S.getUTCFullYear(),4,0)+"-"+F(S.getUTCMonth()+1,2,0)+"-"+F(S.getUTCDate(),2,0);T=F(S.getUTCHours(),2,0)+":"+F(S.getUTCMinutes(),2,0)+":"+F(S.getUTCSeconds(),2,0)}else{X=X.trim();var V=X.split(this.ISO_SPLITTER_RE)||[];U=this.DATE_RE.test(V[0])?V[0]:"";T=U&&V[1]?V[1]:this.TIME_RE.test(V[0])?V[0]:""}var Z=this.DATE_RE.exec(U)||[];var W=this.TIME_RE.exec(T)||[];if(Y){if(this.includeDate&&Q.isUndefined(Z[0])){return}if(this.includeTime&&Q.isUndefined(W[0])){return}if(!this.includeDate&&U){return}if(!this.includeTime&&T){return}}var S=new Date(Date.UTC(Z[1]*1||0,Z[2]*1-1||0,Z[3]*1||0,W[1]*1||null,W[2]*1||null,W[3]*1||null,W[5]*1||null));var aa="";if(this.includeDate){aa=F(S.getUTCFullYear(),4,0)+"-"+F(S.getUTCMonth()+1,2,0)+"-"+F(S.getUTCDate(),2,0)}if(this.includeTime){aa=aa+(this.includeDate?"T":"")+F(S.getUTCHours(),2,0)+":"+F(S.getUTCMinutes(),2,0)+":"+F(S.getUTCSeconds(),2,0);if(this.includeMilli){aa=aa+"."+F(S.getUTCMilliseconds(),3,0)}}if(this.includeDate&&this.includeTime){aa+="Z"}return aa},fromRaw:function(T,S){if(Q.isNull(T)||Q.isUndefined(T)){return""}return this._convert(T)},toRaw:function(T,S){return this._convert(T,true)}});var L=R.StringFormatter=function(){};L.prototype=new w();Q.extend(L.prototype,{fromRaw:function(T,S){if(Q.isUndefined(T)||Q.isNull(T)){return""}return T+""}});var K=R.EmailFormatter=function(){};K.prototype=new w();Q.extend(K.prototype,{toRaw:function(T,S){var U=T.trim().split("@");if(U.length===2&&Q.all(U)){return T}}});var q=R.SelectFormatter=function(){};q.prototype=new w();Q.extend(q.prototype,{fromRaw:function(T,S){return Q.isArray(T)?T:T!=null?[T]:[]}});var e=R.CellEditor=E.View.extend({initialize:function(S){this.formatter=S.formatter;this.column=S.column;if(!(this.column instanceof k)){this.column=new k(this.column)}this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(S,T){if(T==null||T.get("name")==this.column.get("name")){this.$el.focus()}return this}});var m=R.InputCellEditor=e.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(S){m.__super__.initialize.apply(this,arguments);if(S.placeholder){this.$el.attr("placeholder",S.placeholder)}},render:function(){var S=this.model;this.$el.val(this.formatter.fromRaw(S.get(this.column.get("name")),S));return this},saveOrCancel:function(W){var T=this.formatter;var S=this.model;var U=this.column;var Y=new f(W);var Z=W.type==="blur";if(Y.moveUp()||Y.moveDown()||Y.moveLeft()||Y.moveRight()||Y.save()||Z){W.preventDefault();W.stopPropagation();var X=this.$el.val();var V=T.toRaw(X,S);if(Q.isUndefined(V)){S.trigger("backgrid:error",S,U,X)}else{S.set(U.get("name"),V);S.trigger("backgrid:edited",S,U,Y)}}else{if(Y.cancel()){W.stopPropagation();S.trigger("backgrid:edited",S,U,Y)}}},postRender:function(S,T){if(T==null||T.get("name")==this.column.get("name")){if(this.$el.css("text-align")==="right"){var U=this.$el.val();this.$el.focus().val(null).val(U)}else{this.$el.focus()}}return this}});var t=R.Cell=E.View.extend({tagName:"td",formatter:w,editor:m,events:{click:"enterEditMode"},initialize:function(T){this.column=T.column;if(!(this.column instanceof k)){this.column=new k(this.column)}var W=this.column,S=this.model,V=this.$el;var U=R.resolveNameToClass(W.get("formatter")||this.formatter,"Formatter");if(!Q.isFunction(U.fromRaw)&&!Q.isFunction(U.toRaw)){U=new U()}this.formatter=U;this.editor=R.resolveNameToClass(this.editor,"CellEditor");this.listenTo(S,"change:"+W.get("name"),function(){if(!V.hasClass("editor")){this.render()}});this.listenTo(S,"backgrid:error",this.renderError);this.listenTo(W,"change:editable change:sortable change:renderable",function(Y){var Z=Y.changedAttributes();for(var X in Z){if(Z.hasOwnProperty(X)){V.toggleClass(X,Z[X])}}});if(R.callByNeed(W.editable(),W,S)){V.addClass("editable")}if(R.callByNeed(W.sortable(),W,S)){V.addClass("sortable")}if(R.callByNeed(W.renderable(),W,S)){V.addClass("renderable")}},render:function(){this.$el.empty();var S=this.model;this.$el.text(this.formatter.fromRaw(S.get(this.column.get("name")),S));this.delegateEvents();return this},enterEditMode:function(){var S=this.model;var U=this.column;var T=R.callByNeed(U.editable(),U,S);if(T){this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter});S.trigger("backgrid:edit",S,U,this,this.currentEditor);this.undelegateEvents();this.$el.empty();this.$el.append(this.currentEditor.$el);this.currentEditor.render();this.$el.addClass("editor");S.trigger("backgrid:editing",S,U,this,this.currentEditor)}},renderError:function(S,T){if(T==null||T.get("name")==this.column.get("name")){this.$el.addClass("error")}},exitEditMode:function(){this.$el.removeClass("error");this.currentEditor.remove();this.stopListening(this.currentEditor);delete this.currentEditor;this.$el.removeClass("editor");this.render()},remove:function(){if(this.currentEditor){this.currentEditor.remove.apply(this.currentEditor,arguments);delete this.currentEditor}return t.__super__.remove.apply(this,arguments)}});var M=R.StringCell=t.extend({className:"string-cell",formatter:L});var I=R.UriCell=t.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(S){I.__super__.initialize.apply(this,arguments);this.title=S.title||this.title;this.target=S.target||this.target},render:function(){this.$el.empty();var T=this.model.get(this.column.get("name"));var S=this.formatter.fromRaw(T,this.model);this.$el.append(C("<a>",{tabIndex:-1,href:T,title:this.title||S,target:this.target}).text(S));this.delegateEvents();return this}});var i=R.EmailCell=M.extend({className:"email-cell",formatter:K,render:function(){this.$el.empty();var S=this.model;var T=this.formatter.fromRaw(S.get(this.column.get("name")),S);this.$el.append(C("<a>",{tabIndex:-1,href:"mailto:"+T,title:T}).text(T));this.delegateEvents();return this}});var d=R.NumberCell=t.extend({className:"number-cell",decimals:y.prototype.defaults.decimals,decimalSeparator:y.prototype.defaults.decimalSeparator,orderSeparator:y.prototype.defaults.orderSeparator,formatter:y,initialize:function(S){d.__super__.initialize.apply(this,arguments);var T=this.formatter;T.decimals=this.decimals;T.decimalSeparator=this.decimalSeparator;T.orderSeparator=this.orderSeparator}});var G=R.IntegerCell=d.extend({className:"integer-cell",decimals:0});var O=R.PercentCell=d.extend({className:"percent-cell",multiplier:n.prototype.defaults.multiplier,symbol:n.prototype.defaults.symbol,formatter:n,initialize:function(){O.__super__.initialize.apply(this,arguments);var S=this.formatter;S.multiplier=this.multiplier;S.symbol=this.symbol}});var u=R.DatetimeCell=t.extend({className:"datetime-cell",includeDate:s.prototype.defaults.includeDate,includeTime:s.prototype.defaults.includeTime,includeMilli:s.prototype.defaults.includeMilli,formatter:s,initialize:function(S){u.__super__.initialize.apply(this,arguments);var T=this.formatter;T.includeDate=this.includeDate;T.includeTime=this.includeTime;T.includeMilli=this.includeMilli;var U=this.includeDate?"YYYY-MM-DD":"";U+=(this.includeDate&&this.includeTime)?"T":"";U+=this.includeTime?"HH:mm:ss":"";U+=(this.includeTime&&this.includeMilli)?".SSS":"";this.editor=this.editor.extend({attributes:Q.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:U})})}});var h=R.DateCell=u.extend({className:"date-cell",includeTime:false});var N=R.TimeCell=u.extend({className:"time-cell",includeDate:false});var z=R.BooleanCellEditor=e.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=true},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=false},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var S=this.model;var T=this.formatter.fromRaw(S.get(this.column.get("name")),S);this.$el.prop("checked",T);return this},enterOrExitEditMode:function(T){if(!this.mouseDown){var S=this.model;S.trigger("backgrid:edited",S,this.column,new f(T))}},saveOrCancel:function(W){var S=this.model;var V=this.column;var U=this.formatter;var Y=new f(W);if(Y.passThru()&&W.type!="change"){return true}if(Y.cancel()){W.stopPropagation();S.trigger("backgrid:edited",S,V,Y)}var T=this.$el;if(Y.save()||Y.moveLeft()||Y.moveRight()||Y.moveUp()||Y.moveDown()){W.preventDefault();W.stopPropagation();var X=U.toRaw(T.prop("checked"),S);S.set(V.get("name"),X);S.trigger("backgrid:edited",S,V,Y)}else{if(W.type=="change"){var X=U.toRaw(T.prop("checked"),S);S.set(V.get("name"),X);T.focus()}}}});var j=R.BooleanCell=t.extend({className:"boolean-cell",editor:z,events:{click:"enterEditMode"},render:function(){this.$el.empty();var S=this.model,U=this.column;var T=R.callByNeed(U.editable(),U,S);this.$el.append(C("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(S.get(U.get("name")),S),disabled:!T}));this.delegateEvents();return this}});var l=R.SelectCellEditor=e.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:Q.template('<option value="<%- value %>" <%- selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(S){this.optionValues=S;this.optionValues=Q.result(this,"optionValues")},setMultiple:function(S){this.multiple=S;this.$el.prop("multiple",S)},_renderOptions:function(V,S){var T="";for(var U=0;U<V.length;U++){T=T+this.template({text:V[U][0],value:V[U][1],selected:Q.indexOf(S,V[U][1])>-1})}return T},render:function(){this.$el.empty();var S=Q.result(this,"optionValues");var V=this.model;var T=this.formatter.fromRaw(V.get(this.column.get("name")),V);if(!Q.isArray(S)){throw new TypeError("optionValues must be an array")}var Z=null;var Y=null;var Z=null;var X=null;var U=null;for(var W=0;W<S.length;W++){var Z=S[W];if(Q.isArray(Z)){Y=Z[0];Z=Z[1];this.$el.append(this.template({text:Y,value:Z,selected:Q.indexOf(T,Z)>-1}))}else{if(Q.isObject(Z)){X=Z.name;U=C("<optgroup></optgroup>",{label:X});U.append(this._renderOptions.call(this,Z.values,T));this.$el.append(U)}else{throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }")}}}this.delegateEvents();return this},save:function(U){var S=this.model;var T=this.column;S.set(T.get("name"),this.formatter.toRaw(this.$el.val(),S))},close:function(U){var S=this.model;var T=this.column;var V=new f(U);if(V.cancel()){U.stopPropagation();S.trigger("backgrid:edited",S,T,new f(U))}else{if(V.save()||V.moveLeft()||V.moveRight()||V.moveUp()||V.moveDown()||U.type=="blur"){U.preventDefault();U.stopPropagation();this.save(U);S.trigger("backgrid:edited",S,T,new f(U))}}}});var J=R.SelectCell=t.extend({className:"select-cell",editor:l,multiple:false,formatter:q,optionValues:undefined,delimiter:", ",initialize:function(S){J.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"backgrid:edit",function(U,W,T,V){if(W.get("name")==this.column.get("name")){V.setOptionValues(this.optionValues);V.setMultiple(this.multiple)}})},render:function(){this.$el.empty();var ad=Q.result(this,"optionValues");var Z=this.model;var S=this.formatter.fromRaw(Z.get(this.column.get("name")),Z);var U=[];try{if(!Q.isArray(ad)||Q.isEmpty(ad)){throw new TypeError}for(var W=0;W<S.length;W++){var V=S[W];for(var Y=0;Y<ad.length;Y++){var ac=ad[Y];if(Q.isArray(ac)){var ae=ac[0];var ac=ac[1];if(ac==V){U.push(ae)}}else{if(Q.isObject(ac)){var ab=ac.values;for(var X=0;X<ab.length;X++){var T=ab[X];if(T[1]==V){U.push(T[0])}}}else{throw new TypeError}}}}this.$el.append(U.join(this.delimiter))}catch(aa){if(aa instanceof TypeError){throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}")}throw aa}this.delegateEvents();return this}});var k=R.Column=E.Model.extend({defaults:{name:undefined,label:undefined,sortable:true,editable:true,renderable:true,formatter:undefined,sortType:"cycle",sortValue:undefined,direction:null,cell:undefined,headerCell:undefined},initialize:function(){if(!this.has("label")){this.set({label:this.get("name")},{silent:true})}var T=R.resolveNameToClass(this.get("headerCell"),"HeaderCell");var S=R.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:S,headerCell:T},{silent:true})},sortValue:function(){var S=this.get("sortValue");if(Q.isString(S)){return this[S]}else{if(Q.isFunction(S)){return S}}return function(T,U){if(U==="created"){return Date.parse(T.get(U))}return T.get(U)}}});Q.each(["sortable","renderable","editable"],function(S){k.prototype[S]=function(){var T=this.get(S);if(Q.isString(T)){return this[T]}else{if(Q.isFunction(T)){return T}}return !!T}});var g=R.Columns=E.Collection.extend({model:k});var b=R.Row=E.View.extend({tagName:"tr",initialize:function(T){var V=this.columns=T.columns;if(!(V instanceof E.Collection)){V=this.columns=new g(V)}var S=this.cells=[];for(var U=0;U<V.length;U++){S.push(this.makeCell(V.at(U),T))}this.listenTo(V,"add",function(aa,Z){var Y=Z.indexOf(aa);var W=this.makeCell(aa,T);S.splice(Y,0,W);var X=this.$el;if(Y===0){X.prepend(W.render().$el)}else{if(Y===Z.length-1){X.append(W.render().$el)}else{X.children().eq(Y).before(W.render().$el)}}});this.listenTo(V,"remove",function(X,W,Y){S[Y.index].remove();S.splice(Y.index,1)})},makeCell:function(S){return new (S.get("cell"))({column:S,model:this.model})},render:function(){this.$el.empty();var S=document.createDocumentFragment();for(var T=0;T<this.cells.length;T++){S.appendChild(this.cells[T].render().el)}this.el.appendChild(S);this.delegateEvents();return this},remove:function(){for(var T=0;T<this.cells.length;T++){var S=this.cells[T];S.remove.apply(S,arguments)}return E.View.prototype.remove.apply(this,arguments)}});var r=R.EmptyRow=E.View.extend({tagName:"tr",emptyText:null,initialize:function(S){this.emptyText=S.emptyText;this.columns=S.columns},render:function(){this.$el.empty();var S=document.createElement("td");S.setAttribute("colspan",this.columns.length);S.appendChild(document.createTextNode(Q.result(this,"emptyText")));this.el.className="empty";this.el.appendChild(S);return this}});var c=R.HeaderCell=E.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(S){this.column=S.column;if(!(this.column instanceof k)){this.column=new k(this.column)}var U=this.column,V=this.collection,T=this.$el;this.listenTo(U,"change:editable change:sortable change:renderable",function(X){var Y=X.changedAttributes();for(var W in Y){if(Y.hasOwnProperty(W)){T.toggleClass(W,Y[W])}}});this.listenTo(U,"change:direction",this.setCellDirection);this.listenTo(U,"change:name change:label",this.render);if(R.callByNeed(U.editable(),U,V)){T.addClass("editable")}if(R.callByNeed(U.sortable(),U,V)){T.addClass("sortable")}if(R.callByNeed(U.renderable(),U,V)){T.addClass("renderable")}this.listenTo(V.fullCollection||V,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending");this.column.set("direction",null)},setCellDirection:function(S,T){this.$el.removeClass("ascending").removeClass("descending");if(S.cid==this.column.cid){this.$el.addClass(T)}},onClick:function(W){W.preventDefault();var T=this.column;var Y=this.collection;var U="backgrid:sort";function V(ab,aa){if(T.get("direction")==="ascending"){Y.trigger(U,aa,"descending")}else{if(T.get("direction")==="descending"){Y.trigger(U,aa,null)}else{Y.trigger(U,aa,"ascending")}}}function S(ab,aa){if(T.get("direction")==="ascending"){Y.trigger(U,aa,"descending")}else{Y.trigger(U,aa,"ascending")}}var Z=R.callByNeed(T.sortable(),T,this.collection);if(Z){var X=T.get("sortType");if(X==="toggle"){S(this,T)}else{V(this,T)}}},render:function(){this.$el.empty();var T=this.column;var U=R.callByNeed(T.sortable(),T,this.collection);var S;if(U){S=C("<a>").text(T.get("label")).append("<b class='sort-caret'></b>")}else{S=document.createTextNode(T.get("label"))}this.$el.append(S);this.$el.addClass(T.get("name"));this.$el.addClass(T.get("direction"));this.delegateEvents();return this}});var B=R.HeaderRow=R.Row.extend({requiredOptions:["columns","collection"],initialize:function(){R.Row.prototype.initialize.apply(this,arguments)},makeCell:function(T,S){var U=T.get("headerCell")||S.headerCell||c;U=new U({column:T,collection:this.collection});return U}});var A=R.Header=E.View.extend({tagName:"thead",initialize:function(S){this.columns=S.columns;if(!(this.columns instanceof E.Collection)){this.columns=new g(this.columns)}this.row=new R.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){this.$el.append(this.row.render().$el);this.delegateEvents();return this},remove:function(){this.row.remove.apply(this.row,arguments);return E.View.prototype.remove.apply(this,arguments)}});var o=R.Body=E.View.extend({tagName:"tbody",initialize:function(S){this.columns=S.columns;if(!(this.columns instanceof E.Collection)){this.columns=new g(this.columns)}this.row=S.row||b;this.rows=this.collection.map(function(U){var V=this.makeRow(U);return V},this);this.emptyText=S.emptyText;this._unshiftEmptyRowMayBe();var T=this.collection;this.listenTo(T,"add",this.insertRow);this.listenTo(T,"remove",this.removeRow);this.listenTo(T,"sort",this.refresh);this.listenTo(T,"reset",this.refresh);this.listenTo(T,"backgrid:sort",this.sort);this.listenTo(T,"backgrid:edited",this.moveToNextCell)},makeRow:function(S){return new this.row({columns:this.columns,model:S})},_unshiftEmptyRowMayBe:function(){if(this.rows.length===0&&this.emptyText!=null){this.rows.unshift(new r({emptyText:this.emptyText,columns:this.columns}))}},insertRow:function(W,Z,V){if(this.rows[0] instanceof r){this.rows.pop().remove()}if(!(Z instanceof E.Collection)&&!V){this.collection.add(W,(V=Z));return}var Y=this.makeRow(W);var U=Z.indexOf(W);this.rows.splice(U,0,Y);var X=this.$el;var T=X.children();var S=Y.render().$el;if(U>=T.length){X.append(S)}else{T.eq(U).before(S)}return this},removeRow:function(T,U,S){if(!S){this.collection.remove(T,(S=U));this._unshiftEmptyRowMayBe();return}if(this.rows&&this.rows.length>S.index){if(Q.isUndefined(S.render)||S.render){this.rows[S.index].remove()}this.rows.splice(S.index,1)}this._unshiftEmptyRowMayBe();return this},refresh:function(){for(var S=0;S<this.rows.length;S++){this.rows[S].remove()}this.rows=this.collection.map(function(T){var U=this.makeRow(T);return U},this);this._unshiftEmptyRowMayBe();this.render();this.collection.trigger("backgrid:refresh",this);return this},render:function(){this.$el.empty();var S=document.createDocumentFragment();for(var T=0;T<this.rows.length;T++){var U=this.rows[T];S.appendChild(U.render().el)}this.el.appendChild(S);this.delegateEvents();return this},remove:function(){for(var S=0;S<this.rows.length;S++){var T=this.rows[S];T.remove.apply(T,arguments)}return E.View.prototype.remove.apply(this,arguments)},sort:function(U,V){if(!Q.contains(["ascending","descending",null],V)){throw new RangeError('direction must be one of "ascending", "descending" or `null`')}if(Q.isString(U)){U=this.columns.findWhere({name:U})}var W=this.collection;var S;if(V==="ascending"){S=-1}else{if(V==="descending"){S=1}else{S=null}}var T=this.makeComparator(U.get("name"),S,S?U.sortValue():function(X){return X.cid.replace("c","")*1});if(E.PageableCollection&&W instanceof E.PageableCollection){W.setSorting(S&&U.get("name"),S,{sortValue:U.sortValue()});if(W.fullCollection){if(W.fullCollection.comparator==null){W.fullCollection.comparator=T}W.fullCollection.sort();W.trigger("backgrid:sorted",U,V,W)}else{W.fetch({reset:true,success:function(){W.trigger("backgrid:sorted",U,V,W)}})}}else{W.comparator=T;W.sort();W.trigger("backgrid:sorted",U,V,W)}U.set("direction",V);return this},makeComparator:function(T,S,U){return function(Z,X){var V=U(Z,T),Y=U(X,T),W;if(S===1){W=V,V=Y,Y=W}if(V===Y){return 0}else{if(V<Y){return -1}}return 1}},moveToNextCell:function(ad,X,Z){var ac=this.collection.indexOf(ad);var ab=this.columns.indexOf(X);var af,S,U,V,T;if(this.rows[ac]){this.rows[ac].cells[ab].exitEditMode()}if(Z.moveUp()||Z.moveDown()||Z.moveLeft()||Z.moveRight()||Z.save()){var W=this.columns.length;var Y=W*this.collection.length;if(Z.moveUp()||Z.moveDown()){V=ac+(Z.moveUp()?-1:1);var ag=this.rows[V];if(ag){af=ag.cells[ab];if(R.callByNeed(af.column.editable(),af.column,ad)){af.enterEditMode();ad.trigger("backgrid:next",V,ab,false)}}else{ad.trigger("backgrid:next",V,ab,true)}}else{if(Z.moveLeft()||Z.moveRight()){var ae=Z.moveRight();for(var aa=ac*W+ab+(ae?1:-1);aa>=0&&aa<Y;ae?aa++:aa--){V=~~(aa/W);T=aa-V*W;ag=this.rows[V];if(ag){af=ag.cells[T];S=R.callByNeed(af.column.renderable(),af.column,af.model);U=R.callByNeed(af.column.editable(),af.column,ad);if(S&&U){af.enterEditMode();ad.trigger("backgrid:next",V,T,false);break}}}if(aa==Y){ad.trigger("backgrid:next",~~(aa/W),aa-V*W,true)}}}}return this}});var H=R.Footer=E.View.extend({tagName:"tfoot",initialize:function(S){this.columns=S.columns;if(!(this.columns instanceof E.Collection)){this.columns=new R.Columns(this.columns)}}});var D=R.Grid=E.View.extend({tagName:"table",className:"backgrid",header:A,body:o,footer:null,initialize:function(T){if(!(T.columns instanceof E.Collection)){T.columns=new g(T.columns)}this.columns=T.columns;var S=Q.omit(T,["el","id","attributes","className","tagName","events"]);this.body=T.body||this.body;this.body=new this.body(S);this.header=T.header||this.header;if(this.header){this.header=new this.header(S)}this.footer=T.footer||this.footer;if(this.footer){this.footer=new this.footer(S)}this.listenTo(this.columns,"reset",function(){if(this.header){this.header=new (this.header.remove().constructor)(S)}this.body=new (this.body.remove().constructor)(S);if(this.footer){this.footer=new (this.footer.remove().constructor)(S)}this.render()})},insertRow:function(){this.body.insertRow.apply(this.body,arguments);return this},removeRow:function(){this.body.removeRow.apply(this.body,arguments);return this},insertColumn:function(){this.columns.add.apply(this.columns,arguments);return this},removeColumn:function(){this.columns.remove.apply(this.columns,arguments);return this},sort:function(){this.body.sort.apply(this.body,arguments);return this},render:function(){this.$el.empty();if(this.header){this.$el.append(this.header.render().$el)}if(this.footer){this.$el.append(this.footer.render().$el)}this.$el.append(this.body.render().$el);this.delegateEvents();this.trigger("backgrid:rendered",this);return this},remove:function(){this.header&&this.header.remove.apply(this.header,arguments);this.body.remove.apply(this.body,arguments);this.footer&&this.footer.remove.apply(this.footer,arguments);return E.View.prototype.remove.apply(this,arguments)}});return R}));(function(a,b){if(typeof exports=="object"){(function(){var c;try{c=require("lunr")}catch(d){}module.exports=b(require("underscore"),require("backbone"),require("backgrid"),c)}())}else{b(a._,a.Backbone,a.Backgrid,a.lunr)}}(this,function(b,g,e,c){var f=e.Extension.ServerSideFilter=g.View.extend({tagName:"form",className:"backgrid-filter form-search",template:b.template('<span class="search">&nbsp;</span><input type="search" <% if (placeholder) { %> placeholder="<%- placeholder %>" <% } %> name="<%- name %>" /><a class="clear" data-backgrid-action="clear" href="#">&times;</a>',null,{variable:null}),events:{"keyup input[type=search]":"showClearButtonMaybe","click a[data-backgrid-action=clear]":"clear",submit:function(h){h.preventDefault();this.search(h)}},name:"q",placeholder:null,initialize:function(i){f.__super__.initialize.apply(this,arguments);this.name=i.name||this.name;this.placeholder=i.placeholder||this.placeholder;this.template=i.template||this.template;var j=this.collection,h=this;if(g.PageableCollection&&j instanceof g.PageableCollection&&j.mode=="server"){j.queryParams[this.name]=function(){return h.searchBox().val()||null}}},showClearButtonMaybe:function(){var h=this.clearButton();var i=this.searchBox().val();if(i){h.show()}else{h.hide()}},searchBox:function(){return this.$el.find("input[type=search]")},clearButton:function(){return this.$el.find("a[data-backgrid-action=clear]")},search:function(j){if(j){j.preventDefault()}var i={};var h=this.searchBox().val();if(h){i[this.name]=h}var k=this.collection;if(g.PageableCollection&&k instanceof g.PageableCollection){k.getFirstPage({data:i,reset:true,fetch:true})}else{k.fetch({data:i,reset:true})}},clear:function(h){if(h){h.preventDefault()}this.searchBox().val(null);this.showClearButtonMaybe();var i=this.collection;if(g.PageableCollection&&i instanceof g.PageableCollection){i.getFirstPage({reset:true,fetch:true})}else{i.fetch({reset:true})}},render:function(){this.$el.empty().append(this.template({name:this.name,placeholder:this.placeholder,value:this.value}));this.showClearButtonMaybe();this.delegateEvents();return this}});var d=e.Extension.ClientSideFilter=f.extend({events:b.extend({},f.prototype.events,{"click a[data-backgrid-action=clear]":function(h){h.preventDefault();this.clear()},"keydown input[type=search]":"search",submit:function(h){h.preventDefault();this.search(h)}}),fields:null,wait:149,initialize:function(h){d.__super__.initialize.apply(this,arguments);this.fields=h.fields||this.fields;this.wait=h.wait||this.wait;this._debounceMethods(["search","clear"]);var j=this.collection=this.collection.fullCollection||this.collection;var i=this.shadowCollection=j.clone();this.listenTo(j,"add",function(l,m,k){i.add(l,k)});this.listenTo(j,"remove",function(l,m,k){i.remove(l,k)});this.listenTo(j,"sort",function(k){if(!this.searchBox().val()){i.reset(k.models)}});this.listenTo(j,"reset",function(l,k){k=b.extend({reindex:true},k||{});if(k.reindex&&k.from==null&&k.to==null){i.reset(l.models)}})},_debounceMethods:function(m){if(b.isString(m)){m=[m]}this.undelegateEvents();for(var k=0,h=m.length;k<h;k++){var j=m[k];var n=this[j];this[j]=b.debounce(n,this.wait)}this.delegateEvents()},makeRegExp:function(h){return new RegExp(h.trim().split(/\s+/).join("|"),"i")},makeMatcher:function(i){var h=this.makeRegExp(i);return function(k){var n=this.fields||k.keys();for(var m=0,j=n.length;m<j;m++){if(h.test(k.get(n[m])+"")){return true}}return false}},search:function(j){var i=b.bind(this.makeMatcher(this.searchBox().val()),this);var h=this.collection;if(h.pageableCollection){h.pageableCollection.getFirstPage({silent:true})}h.reset(this.shadowCollection.filter(i),{reindex:false})},clear:function(){this.searchBox().val(null);this.showClearButtonMaybe();var h=this.collection;if(h.pageableCollection){h.pageableCollection.getFirstPage({silent:true})}h.reset(this.shadowCollection.models,{reindex:false})}});var a=e.Extension.LunrFilter=d.extend({ref:"id",fields:null,initialize:function(h){a.__super__.initialize.apply(this,arguments);this.ref=h.ref||this.ref;var i=this.collection=this.collection.fullCollection||this.collection;this.listenTo(i,"add",this.addToIndex);this.listenTo(i,"remove",this.removeFromIndex);this.listenTo(i,"reset",this.resetIndex);this.listenTo(i,"change",this.updateIndex);this.resetIndex(i)},resetIndex:function(j,i){i=b.extend({reindex:true},i||{});if(i.reindex){var h=this;this.index=c(function(){b.each(h.fields,function(k,l){this.field(l,k);this.ref(h.ref)},this)});j.each(function(k){this.addToIndex(k)},this)}},addToIndex:function(i){var h=this.index;var j=i.toJSON();if(h.documentStore.has(j[this.ref])){h.update(j)}else{h.add(j)}},removeFromIndex:function(i){var h=this.index;var j=i.toJSON();if(h.documentStore.has(j[this.ref])){h.remove(j)}},updateIndex:function(h){var i=h.changedAttributes();if(i&&!b.isEmpty(b.intersection(b.keys(this.fields),b.keys(i)))){this.index.update(h.toJSON())}},search:function(){var j=this.collection;if(!this.searchBox().val()){j.reset(this.shadowCollection.models,{reindex:false});return}var l=this.index.search(this.searchBox().val());var m=[];for(var k=0;k<l.length;k++){var h=l[k];m.push(this.shadowCollection.get(h.ref))}if(j.pageableCollection){j.pageableCollection.getFirstPage({silent:true})}j.reset(m,{reindex:false})}})}));(function(a,b){if(typeof exports=="object"){module.exports=b(require("underscore"),require("backbone"),require("backgrid"),require("backbone-pageable"))}else{b(a._,a.Backbone,a.Backgrid)}}(this,function(a,e,b){var c=b.Extension.PageHandle=e.View.extend({tagName:"li",events:{"click a":"changePage"},title:a.template("Page {{% label }}",null,{variable:null}),isRewind:false,isBack:false,isForward:false,isFastForward:false,initialize:function(g){var m=this.collection;var j=m.state;var h=j.currentPage;var l=j.firstPage;var i=j.lastPage;a.extend(this,a.pick(g,["isRewind","isBack","isForward","isFastForward"]));var f;if(this.isRewind){f=l}else{if(this.isBack){f=Math.max(l,h-1)}else{if(this.isForward){f=Math.min(i,h+1)}else{if(this.isFastForward){f=i}else{f=+g.pageIndex;f=(l?f+1:f)}}}}this.pageIndex=f;this.label=(g.label||(l?f:f+1))+"";var k=g.title||this.title;this.title=a.isFunction(k)?k({label:this.label}):k},render:function(){this.$el.empty();var g=document.createElement("a");g.href="#";if(this.title){g.title=this.title}g.innerHTML=this.label;this.el.appendChild(g);var j=this.collection;var i=j.state;var h=i.currentPage;var f=this.pageIndex;if(this.isRewind&&h==i.firstPage||this.isBack&&!j.hasPreviousPage()||this.isForward&&!j.hasNextPage()||this.isFastForward&&(h==i.lastPage||i.totalPages<1)){this.$el.addClass("disabled")}else{if(!(this.isRewind||this.isBack||this.isForward||this.isFastForward)&&i.currentPage==f){this.$el.addClass("active")}}this.delegateEvents();return this},changePage:function(h){h.preventDefault();var g=this.$el,f=this.collection;if(!g.hasClass("active")&&!g.hasClass("disabled")){if(this.isRewind){f.getFirstPage()}else{if(this.isBack){f.getPreviousPage()}else{if(this.isForward){f.getNextPage()}else{if(this.isFastForward){f.getLastPage()}else{f.getPage(this.pageIndex,{reset:true})}}}}}return this}});var d=b.Extension.Paginator=e.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:0.5,controls:{rewind:{label:"《",title:"First"},back:{label:"〈",title:"Previous"},forward:{label:"〉",title:"Next"},fastForward:{label:"》",title:"Last"}},renderIndexedPageHandles:true,pageHandle:c,goBackFirstOnSort:true,initialize:function(h){var f=this;f.controls=a.defaults(h.controls||{},f.controls,d.prototype.controls);a.extend(f,a.pick(h||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var g=f.collection;f.listenTo(g,"add",f.render);f.listenTo(g,"remove",f.render);f.listenTo(g,"reset",f.render);f.listenTo(g,"backgrid:sorted",function(){if(f.goBackFirstOnSort){g.getFirstPage({reset:true})}})},slideMaybe:function(j,i,h,g,f){return Math.round(h%g/g)},slideThisMuch:function(j,i,h,g,f){return ~~(g*f)},_calculateWindow:function(){var k=this.collection;var f=k.state;var h=f.firstPage;var j=+f.lastPage;j=Math.max(0,h?j-1:j);var l=Math.max(f.currentPage,f.firstPage);l=h?l-1:l;var n=this.windowSize;var i=this.slideScale;var g=Math.floor(l/n)*n;if(l<=j-this.slideThisMuch()){g+=(this.slideMaybe(h,j,l,n,i)*this.slideThisMuch(h,j,l,n,i))}var m=Math.min(j+1,g+n);return[g,m]},makeHandles:function(){var j=[];var m=this.collection;var l=this._calculateWindow();var k=l[0],h=l[1];if(this.renderIndexedPageHandles){for(var g=k;g<h;g++){j.push(new this.pageHandle({collection:m,pageIndex:g}))}}var f=this.controls;a.each(["back","rewind","forward","fastForward"],function(n){var p=f[n];if(p){var i={collection:m,title:p.title,label:p.label};i["is"+n.slice(0,1).toUpperCase()+n.slice(1)]=true;var o=new this.pageHandle(i);if(n=="rewind"||n=="back"){j.unshift(o)}else{j.push(o)}}},this);return j},render:function(){this.$el.empty();if(this.handles){for(var j=0,f=this.handles.length;j<f;j++){this.handles[j].remove()}}var h=this.handles=this.makeHandles();var g=document.createElement("ul");for(var j=0;j<h.length;j++){g.appendChild(h[j].render().el)}this.el.appendChild(g);return this}})}));(function(a,b){if(typeof exports=="object"){module.exports=b(require("backbone"),require("backgrid"))}else{b(a.Backbone,a.Backgrid)}}(this,function(d,c){var a=c.Extension.SelectRowCell=d.View.extend({className:"select-row-cell",tagName:"td",events:{"keydown input[type=checkbox]":"onKeydown","change input[type=checkbox]":"onChange","click input[type=checkbox]":"enterEditMode"},initialize:function(f){this.column=f.column;if(!(this.column instanceof c.Column)){this.column=new c.Column(this.column)}var h=this.column,e=this.model,g=this.$el;this.listenTo(h,"change:renderable",function(i,j){g.toggleClass("renderable",j)});if(c.callByNeed(h.renderable(),h,e)){g.addClass("renderable")}this.listenTo(e,"backgrid:select",function(i,j){this.$el.find("input[type=checkbox]").prop("checked",j).change()})},enterEditMode:function(){this.$el.find("input[type=checkbox]").focus()},exitEditMode:function(){this.$el.find("input[type=checkbox]").blur()},onKeydown:function(f){var g=new c.Command(f);if(g.passThru()){return true}if(g.cancel()){f.stopPropagation();this.$el.find("input[type=checkbox]").blur()}else{if(g.save()||g.moveLeft()||g.moveRight()||g.moveUp()||g.moveDown()){f.preventDefault();f.stopPropagation();this.model.trigger("backgrid:edited",this.model,this.column,g)}}},onChange:function(){var e=this.$el.find("input[type=checkbox]").prop("checked");this.$el.parent().toggleClass("selected",e);this.model.trigger("backgrid:selected",this.model,e)},render:function(){this.$el.empty().append('<input tabindex="-1" type="checkbox" />');this.delegateEvents();return this}});var b=c.Extension.SelectAllHeaderCell=a.extend({className:"select-all-header-cell",tagName:"th",initialize:function(e){this.column=e.column;if(!(this.column instanceof c.Column)){this.column=new c.Column(this.column)}var h=this.collection;var i=this.selectedModels={};this.listenTo(h.fullCollection||h,"backgrid:selected",function(j,k){if(k){i[j.id||j.cid]=1}else{delete i[j.id||j.cid];this.$el.find("input[type=checkbox]").prop("checked",false)}});this.listenTo(h.fullCollection||h,"remove",function(j){delete i[j.id||j.cid]});this.listenTo(h,"backgrid:refresh",function(){var l=this.$el.find("input[type=checkbox]").prop("checked");for(var k=0;k<h.length;k++){var j=h.at(k);if(l||i[j.id||j.cid]){j.trigger("backgrid:select",j,true)}}});var g=this.column,f=this.$el;this.listenTo(g,"change:renderable",function(j,k){f.toggleClass("renderable",k)});if(c.callByNeed(g.renderable(),g,h)){f.addClass("renderable")}},onChange:function(){var e=this.$el.find("input[type=checkbox]").prop("checked");var f=this.collection;f.each(function(g){g.trigger("backgrid:select",g,e)});if(f.fullCollection){f.fullCollection.each(function(g){if(!f.get(g.cid)){g.trigger("backgrid:selected",g,e)}})}this.collection.trigger("backgrid:select-all",this.collection,e)}});c.Grid.prototype.getSelectedModels=function(){var f;var k=this.header.row.cells;for(var h=0,e=k.length;h<e;h++){var g=k[h];if(g instanceof b){f=g;break}}var o=[];if(f){var n=f.selectedModels;var j=this.collection.fullCollection||this.collection;for(var m in n){o.push(j.get(m))}}return o};c.Grid.prototype.clearSelectedModels=function(){var h=this.getSelectedModels();for(var g=0,e=h.length;g<e;g++){var f=h[g];f.trigger("backgrid:select",f,false)}}}));
/*!
 * ADOBE CONFIDENTIAL
 * ___________________
 * 
 * Copyright 2016 Adobe Systems Incorporated
 * All Rights Reserved.
 * 
 * NOTICE: All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 */
;
/*!
 * */
(function webpackUniversalModuleDefinition(a,b){if(typeof exports==="object"&&typeof module==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){exports.common=b()}else{a.adobe=a.adobe||{},a.adobe["sign"]=a.adobe["sign"]||{},a.adobe["sign"]["ui"]=a.adobe["sign"]["ui"]||{},a.adobe["sign"]["ui"]["common"]=b()}}}})(typeof self!=="undefined"?self:this,function(){return(function(a){var b={};function c(e){if(b[e]){return b[e].exports}var d=b[e]={i:e,l:false,exports:{}};a[e].call(d.exports,d,d.exports,c);d.l=true;return d.exports}c.m=a;c.c=b;c.d=function(e,f,d){if(!c.o(e,f)){Object.defineProperty(e,f,{configurable:false,enumerable:true,get:d})}};c.n=function(e){var d=e&&e.__esModule?function f(){return e["default"]}:function g(){return e};c.d(d,"a",d);return d};c.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};c.p="";return c(c.s=6)})([(function(b,a){(function(){var c={};c.content='<div id={{carouselId}} class="carousel slide carousel-modal">       <div class="carousel-inner" aria-live="polite" aria-atomic="true" aria-relevant="additions"></div>       <ol class="carousel-indicators" role="tablist"></ol>     </div>';c.slideContent='<div class="carousel-animation">        <img class="carousel-image" src="{{img}}" alt="" >      </div>       <div class="carousel-caption">         <h1 id="carousel-item-title-{{slideIndex}}">{{title}}</h1>         <h2>{{desc}}</h2>         <p>{{footnote}}</p>      </div>';c.footer='<div class="row carousel-buttons">        <button class="btn carousel-prev mr-auto" data-target="#{{carouselId}}" data-slide="prev">{{prevButtonText}}</button>        <button class="btn carousel-next" data-target="#{{carouselId}}" data-slide="next">{{nextButtonText}}</button>        <button class="btn carousel-done" data-target="#{{carouselId}}" data-dismiss="modal">{{doneButtonText}}</button>      </div>';c.CarouselIndicators='<li data-target="#{{carouselId}}" data-slide-to="{{slideIndex}}"        role="tab" tabindex="-1" aria-selected="false"        aria-controls="carousel-item-{{slideIndex}}"        aria-labelledby="carousel-item-title-{{slideIndex}}"></li>';App.Templates.Carousel=c}())}),(function(b,a){(function(){var c={};c.content='<% _.each(helpInfo, function(helpVal, helpKey) { %>      <h3 class="help-title">        <% if (helpVal.iconClass) { %>          <span class="icon {{helpVal.iconClass}}"></span><% } %>        <span class="help-title-string"> {{helpVal.helpTitle}}</span>      </h3>      <p class="help-text">{{helpVal.helpText}}</p>    <% }) %>';App.Templates.Help_modal_inner=c}())}),(function(b,a){(function(){var c={};c.tabbedDropdown='<a class="dropdown-toggle <% if (disableLink) { %> disableLink <% } %>"      <% if (disableLink) { %> aria-disabled="true" <% } else { %> href="#" <% } %>      data-toggle="dropdown" id="{{viewId}}_button" role="button" aria-haspopup="true" <% if (token) { %> data-analytics-click="{{ token }}" <% } %>>      <span class="name">{{title}}</span>    </a>    <div class="dropdown-content" role="dialog" aria-labelledby="{{viewId}}_button">          <ul class="dropdown-menu float-right" role="menubar">        <% if (filterEnabled) { %><div class="filter-content"><div class="a12-icon search" tabindex="-1">	         <span class="hidden-accessible">{{clearAriaText}}</span></div><input type="search"         placeholder="{{searchPlaceholder}}"></div><% } %>        <% _.each(dropdownList, function(dropdownItem) { %>          <li role="presentation"><a class="dropdown-item content-title" href="#{{ dropdownItem.id }}_tab" role="menuitemradio"           aria-checked="false" id="{{ dropdownItem.id }}" data-toggle="tab" aria-controls="{{ dropdownItem.id }}_tab" aria-describedby="{{ dropdownItem.id }}_tab">{{ dropdownItem.name }}</a></li>        <% }); %>      </ul>      <div class="tab-content">        <% _.each(dropdownList, function(dropdownItem) { %>          <div role="region" class="tab-pane fade" id="{{ dropdownItem.id }}_tab" aria-labelledby="{{ dropdownItem.id }}">{{ dropdownItem.text }}</div>        <% }); %>      </div>    </div>';App.ns("Templates").TabbedDropdown=c}())}),(function(b,a){(function(){var c={};c.content='<div class="timeline-outer" tabindex="0" role="progressbar" aria-valuemin="0" aria-valuemax="{{numSteps}}">      <h3 class="d-none d-md-inline-block timeline-label ">{{timelineLabel}}</h3>      <div class="dashed-line" aria-hidden="true">      <ul>      <% for(var i = 0; i < numSteps; i++) { %>        <li><div class="bubble <% if (i < initialStep) { %> done <% } %>"></div></li><% } %>      </ul>      <span class="progress-line"></span>     </div>    </div>';App.Templates.Timeline=c}())}),(function(b,a){(function(){var c={};c.toggle='<div id="toggle-{{toggleID}}" class="es-toggle-div {{disabled}}"><% if (!singleChoiceSwitch) { %><div class="label label-{{choiceFirstClass}}"><label class="show" for="radio-{{toggleID}}-0">{{choiceFirstLabel}}</label><span class="measure" aria-hidden="true">{{choiceFirstLabel}}</span></div><% } %><div class="switch-wrapper"><input type="radio" class="radio-0" role="button" aria-pressed="true" name="radio-{{toggleID}}" id="radio-{{toggleID}}-0"/><input type="radio" class="radio-1" role="button" aria-pressed="false" name="radio-{{toggleID}}" id="radio-{{toggleID}}-1"/><span class="toggle"></span></div><% if (!singleChoiceSwitch) { %><div class="label label-{{choiceSecondClass}}"><label class="show" for="radio-{{toggleID}}-1">{{choiceSecondLabel}}</label><span class="measure" aria-hidden="true">{{choiceSecondLabel}}</span></div><% } else { %><div class="label label-{{choiceSecondClass}}"><label class="show" for="radio-{{toggleID}}-1" title="{{choiceSecondLabel}}">{{choiceSecondLabel}}</label><span class="measure" aria-hidden="true">{{choiceSecondLabel}}</span></div><div class="label label-{{choiceFirstClass}}"><label class="show" for="radio-{{toggleID}}-0" title="{{choiceFirstLabel}}">{{choiceFirstLabel}}</label><span class="measure" aria-hidden="true">{{choiceFirstLabel}}</span></div><% } %></div>';App.ns("Templates").ToggleSwitch=c}())}),(function(b,a){(function(){var d=Backbone.View.extend({template:"",defaults:{},events:{},baseEvents:{"shown.bs.modal":"onShown","hidden.bs.modal":"onHidden",keydown:"onKeydown"},initialize:function(){this.options.eventProxy=this;this.events=_.extend(this.events,this.baseEvents);_.defaults(this.options,_.result(this,"defaults"),d.settings);if(this.options.autoRender){this.render()}},toModal:function(){return _.defaults(this.options,{content:this.toHTML(),onClick:_.bind(this.onClick,this),onClose:_.bind(this.onClose,this)})},isVisible:function(){return this.$el.getIsVisible()},onClick:function(){},onClose:function(){},onShown:function(){if(this.options.onShown){this.options.onShown.apply(this)}},onHidden:function(){if(this.options.onHidden){this.options.onHidden.apply(this)}if(this.options.origTarget){jQuery(this.options.origTarget).focus()}},show:c("show"),hide:c("hide"),toggle:c("toggle"),clickPrimary:function(){this.getPrimaryBtn().trigger("click")},clickClose:function(){this.getCloseBtn().trigger("click")},togglePrimaryBtn:function(e){var f=_.isUndefined(e)?undefined:!e;this.getPrimaryBtn().toggleClass("disabled",f).prop("disabled",f)},getPrimaryBtn:function(){return this.$el.find(".modal-footer .btn-primary")},getCloseBtn:function(){return this.$el.find(".modal-footer .btn-default")},render:function(){var e=App.Utils.createModal(this.toModal());this.setElement(e);return this},remove:function(){this.$el.removeClass("fade");this.hide();this._super()},onKeydown:function(m){if(!this.$el.data("bs.modal")._config.keyboard){return}if(App.Utils.KEY.isTab(m)){var f=$(m.target),l=this.$(":focusable"),i=l.index(f),h=l.filter(":tabbable"),j=h.first(),g=h.last(),k;m.preventDefault();if(m.shiftKey){if(i<=l.index(j)){k=g}else{k=l.slice(0,i).filter(":tabbable").last()}}else{if(i>=l.index(g)){k=j}else{k=l.slice(i+1).filter(":tabbable").first()}}if(k){k.focus()}}}},{settings:{title:"",classes:"center",backdrop:"static",show:true,keyboard:true,close:false,closeBtn:i18n("cancel"),primaryBtn:i18n("ok"),autoRender:false}});function c(e){return function(){this.$el.modal(e)}}App.Views.ModalView=d})()}),(function(b,a,c){c(7);b.exports=c(32)}),(function(b,a,c){function d(e){return e.keys().map(e)}c(8);d(c(9));d(c(10));d(c(11));d(c(22));b.exports={version:"5.0.8"}}),(function(b,a){if(!window.i18n){i18n=_.identity;i18n.curry=_.constant}}),(function(b,a,e){var d={"./carouselTemplate.js":0,"./helpModalInner.js":1,"./tabbedDropdownTmpl.js":2,"./timelineTmpl.js":3,"./toggleSwitchTmpl.js":4};function g(h){return e(c(h))}function c(h){var i=d[h];if(!(i+1)){throw new Error("Cannot find module '"+h+"'.")}return i}g.keys=function f(){return Object.keys(d)};g.resolve=c;b.exports=g;g.id=9}),(function(b,a,e){var d={"./modalView.js":5};function g(h){return e(c(h))}function c(h){var i=d[h];if(!(i+1)){throw new Error("Cannot find module '"+h+"'.")}return i}g.keys=function f(){return Object.keys(d)};g.resolve=c;b.exports=g;g.id=10}),(function(b,a,e){var d={"./gridView/templates/gridViewTmpl.js":12,"./gridView/views/gridView.js":13,"./gridView/views/gridViewBody.js":14,"./gridView/views/gridViewRow.js":15,"./gridView/views/gridViewSearch.js":16,"./gridView/views/gridViewSingleSelectRow.js":17,"./gridView/views/hierarchicalSelectRowCell.js":18,"./gridView/views/hierarchicalSelectRowHeaderCell.js":19,"./gridView/views/stringCellWithTooltip.js":20,"./gridView/views/toggleCell.js":21};function g(h){return e(c(h))}function c(h){var i=d[h];if(!(i+1)){throw new Error("Cannot find module '"+h+"'.")}return i}g.keys=function f(){return Object.keys(d)};g.resolve=c;b.exports=g;g.id=11}),(function(b,a){(function(){var c={};c.toggleCellTemplate='<button class="toggle-icon" type="button" aria-pressed="false">      <span class="hidden-accessible">{{toggleLabel}}</span>    </button>    <div class="icon row-type-icon" id="row-type-icon-{{viewId}}"></div>    <div class="cell-title" id="cell-title-{{viewId}}"></div>';c.stringCellWithTooltipTemplate='<div class="cell-title" id="cell-title-{{viewId}}"></div>';c.searchTemplate='<div class="search-icon">      <button class="clear" data-backgrid-action="clear" type="button">        <% if (clearString) { %> <span class="hidden-accessible">{{clearString}}</span> <% } %>      </button>    </div>    <input type="search"      <% if (autocomplete) { %> autocomplete="{{ autocomplete }}" <%} %>      <% if (placeholder) { %> placeholder="{{ placeholder }}" title="{{ placeholder }}" <% } %>      name="{{ name }}" />';c.selectRowCellTemplate='<div class="checkbox-a12">    <input type="checkbox" class="select-row-checkbox checkbox-input form-control"      <% if (selected) { %> checked="checked" <% } %>      <% if (title) { %>        title="{{ title }}" aria-labelledby="row-type-icon-{{viewId}} cell-title-{{viewId}}"      <% } else { %>        title="{{ selectAll }}"      <% } %>/>    <span class="checkbox-image"></span>  </div>';App.ns("Templates.Components").GridView=c}())}),(function(b,a){(function(){var c=App.Utils.KEY;var d=Backgrid.Grid.extend({className:"gridview backgrid",events:{keydown:"onKeydown","focusin tr":"onFocusIn","focusout tr":"onFocusOut"},initialize:function(){var f=0,e=this;if(this.options.singleSelectMode){this.options.row=App.Views.Components.GridView.GridViewSingleSelectRow;this.options.showSelectColumn=false}else{this.options.row=App.Views.Components.GridView.GridViewRow}this.options.body=App.Views.Components.GridView.GridViewBody;this.expandCollection(this.options.collection,f);this.collection=this.options.collection=new Backbone.Collection(this.flattenCollection());_.each(this.collection.models,function(g){e.listenTo(g,"gridview:toggleRow",e.toggleRow,e);e.listenTo(g,"gridview:clearSelectedModels",e.clearSelectedModels,e)});this._super(this.options);if(this.options.showSelectColumn){this.insertColumn({name:"",cell:App.Views.Components.GridView.HierarchicalSelectRowCell,headerCell:App.Views.Components.GridView.HierarchicalSelectRowHeaderCell},{at:0})}this.listenTo(this.collection,"backgrid:sort",this.onSort);this.analytics=this.options.analytics||_.noop},logAnalytics:function(e){this.analytics&&this.analytics(e)},render:function(){this._super();this.makeColumnHeadersAccessible();return this},expandCollection:function(e,i){var g=this.options.fieldMap,h=[],f=[];_.each(e.models,function(j){if(!_.isUndefined(g)&&g.items){f=j.get(g.items)||[]}j.set({level:i},{silent:true});if(!_.isEmpty(f)){h=new Backbone.Collection(f);h.parent=j;this.expandCollection(h,i+1)}j.children=h},this)},flattenCollection:function(){var f=_.clone(this.options.collection.models),e=[],g;while(!_.isEmpty(f)){g=f.shift();if(g.children.length>0){_.each(g.children.models.reverse(),function(h){f.unshift(h)})}e.push(g)}return e},toggleRow:function(f){var e=[],g;if(f.model.children.length>0){e=_.clone(f.model.children.models)}while(!_.isEmpty(e)){g=e.shift();if(f.state==="expanded"){this.$el.find('tr[data-cid="'+g.cid+'"]').css("display","table-row");this.logAnalytics("grid:row:exp")}else{this.$el.find('tr[data-cid="'+g.cid+'"]').hide();this.logAnalytics("grid:row:col")}if(g.children.length>0){_.each(g.children.models.reverse(),function(h){e.unshift(h)})}}},getSelectedModels:function(){var f=this.getSelectAllHeaderCell(),e=[],h,g;if(this.options.singleSelectMode){return[_.find(this.collection.models,function(i){return i.get("selected")===true})]}else{if(f){h=f.selectedModels;for(g in h){if(h[g].children.length<=0){e.push(h[g])}}}}return e},clearSelectedModels:function(){_.each(this.collection.models,function(e){e.set({selected:false});this.$el.find('tr[data-cid="'+e.cid+'"] td.select-row-cell input[type="checkbox"]').prop("checked",false);e.trigger("backgrid:selected",e,false);if(e.children.length>0){e.set({selectedCount:0},{silent:true})}},this);if(this.options.showSelectColumn){this.columns.models[0].trigger("gridview:selectionChanged")}},getSelectAllHeaderCell:function(){var e=this.header.row.cells,g=App.Views.Components.GridView.HierarchicalSelectRowHeaderCell,f;_.each(e,function(h){if(h instanceof g){f=h}});return f},insertRow:function(){return this},removeRow:function(){return this},onFocusIn:function(i){var g=jQuery(i.target),f=jQuery(i.currentTarget),h=f.parent();h.find(":tabbable").not(g).attr("tabindex",-1);f.addClass("is-focused").find(":focusable").attr("tabindex",0)},onFocusOut:function(f){jQuery(f.currentTarget).removeClass("is-focused").find(":focusable").attr("tabindex",-1).first().attr("tabindex",0)},onKeydown:function(k){var f=jQuery(k.target),l,p,o,j,m,h=k.keyCode||k.which,g=":gt",i=":first",n;k.stopPropagation();if(c.isKeyboardClick(k)&&f.is("th > a")){f.click();k.preventDefault()}if((k.ctrlKey||k.metaKey)&&h===65){n=this.$("th input[type=checkbox]");if(!n.is(":checked")||k.shiftKey){n.click();f.focus(0)}k.preventDefault()}if(!(c.isArrow(k)||h===c.HOME||h==c.END)){return}k.preventDefault();l=f.closest("tr");if(h===c.UP||h===c.LEFT||h===c.END){g=":lt";i=":last"}switch(h){case c.DOWN:case c.UP:p=this.$("tr:visible");j=p.index(l);m=p.filter(g+"("+j+" )"+i).find(":focusable:first");break;case c.RIGHT:case c.LEFT:o=l.find(":focusable");j=o.index(f);m=o.filter(g+"("+j+" )"+i);break;case c.HOME:case c.END:p=this.$("tbody > tr:visible");m=this.$("tr:visible"+i);break}m.focus()},makeColumnHeadersAccessible:function(){this.$("th > a").attr({role:"button",tabindex:this.options.singleSelectMode?0:-1})},onSort:function(e,g){var f=this.$("th.sortable."+e.get("name")),g=g||"none";this.$("th.sortable."+e.get("name")).attr("aria-sort",g);this.logAnalytics("grid:sort:"+e.get("name"))}});App.ns("Views.Components").GridView=d}())}),(function(b,a){(function(){var c=Backgrid.Body.extend({initialize:function(){this.columns=this.options.columns;if(!(this.columns instanceof Backbone.Collection)){this.columns=new Backgrid.Columns(this.columns)}this.row=this.options.row||Backgrid.Row;this.rows=this.constructRows();this.emptyText=this.options.emptyText;this._unshiftEmptyRowMayBe();this.listenTo(this.collection,"reset",this.refresh);this.listenTo(this.collection,"backgrid:sort",this.sort)},constructRows:function(){var d;return this.collection.map(function(e){d=new this.row({columns:this.columns,model:e,fieldMap:this.options.fieldMap,showSelectColumn:this.options.showSelectColumn});return d},this)},refresh:function(){_(this.rows).invoke("remove");this.rows=this.constructRows();this._unshiftEmptyRowMayBe();this.render();this.addAccessibleAlertsforEmptyText();this.collection.trigger("backgrid:refresh",this);return this},addAccessibleAlertsforEmptyText:function(){this.$("tr.empty td").attr("id","emptyTd");this.$("tr.empty").attr("id","emptyTr");var d=$("<div></div>");d.attr({role:"alert","class":"hiddenAlert","aria-live":"polite"});if(this.$("#emptyTr").length>0){this.$("#emptyTr").prepend(d);d.html(this.emptyText);this.$("#emptyTd").attr({role:"button",tabindex:-1});$("<a href='#'></a>").appendTo(this.$("#emptyTd")).attr({"aria-label":this.emptyText})}},sort:function(g,j){var h=[],e=[],l=[],i=true,k="name",f,d;if(!_.contains(["ascending","descending",null],j)){throw new RangeError('direction must be one of "ascending", "descending" or "null"')}if(_.isString(g)){g=this.columns.findWhere({name:g})}if(typeof g.get("name")!=="undefined"){k=g.get("name")}if(j==="ascending"){f=-1}else{if(j==="descending"){f=1}else{f=null}}this.collection.each(function(m){d=m.get("level");if(d===0){if(e.length!==0){h.push(e);e=[]}h.push(m)}else{if(d===1){e.push(m);i=false}}});if(e.length!==0){h.push(e)}if(i&&_.isArray(h)){h=h.sort(function(n,m){return App.Utils.naturalSort(n.get(k).toLowerCase(),m.get(k).toLowerCase())});if(f===1){h=h.reverse()}}_.each(h,function(m){if(_.isArray(m)){m=m.sort(function(o,n){return App.Utils.naturalSort(o.get(k).toLowerCase(),n.get(k).toLowerCase())});if(f===1){m=m.reverse()}_.each(m,function(n){l.push(n)})}else{l.push(m)}});this.collection.reset(l);g.set("direction",j);return this}});App.ns("Views.Components").GridView.GridViewBody=c}())}),(function(b,a){(function(){var c=Backgrid.Row.extend({events:{click:"toggleSelected"},modelEvents:{"change:selected":"changeSelectedAttr"},render:function(){var e=this.options.fieldMap,d=[],f=this.model.get("level");this._super();this.$el.addClass("level-"+f).attr({"data-cid":this.model.cid,"aria-level":f});if(this.model.collection&&this.model.collection.parent&&this.model.collection.parent.cid){this.$el.attr("data-parent-cid",this.model.collection.parent.cid)}if(!_.isUndefined(e)&&e.items){d=this.model.get(e.items)||[]}if(d.length>0){this.$el.addClass("header-row expanded").attr("aria-expanded",true)}return this},makeCell:function(d){return new (d.get("cell"))({column:d,model:this.model,fieldMap:this.options.fieldMap})},toggleSelected:function(g){g.stopPropagation();var d=jQuery(g.delegateTarget),f=d.find("input[type=checkbox]");if(!(d.hasClass("level-0")||g.target===f[0])){f.click()}},changeSelectedAttr:function(){var d=this.model.get("selected");this.$el.toggleClass("selected",d).attr("aria-selected",d)}});App.ns("Views.Components").GridView.GridViewRow=c}())}),(function(b,a){(function(){var c=Backgrid.Extension.ClientSideFilter.extend({template:_.template(App.Templates.Components.GridView.searchTemplate),clearString:i18n("clear"),placeholder:i18n("search"),autocomplete:"on",events:App.Views.inherit("events",{"click [data-backgrid-action=clear]":"clear","blur input[type=search]":"onBlur"}),initialize:function(){Backgrid.Extension.ServerSideFilter.prototype.initialize.apply(this,arguments);this.fields=this.options.fields||this.fields;this.wait=this.options.wait||this.wait;this.clearString=this.options.clearString||this.clearString;this.searchFolders=this.options.searchFolders||this.searchFolders;this.autocomplete=this.options.autocomplete||this.autocomplete;this._debounceMethods(["search","clear"]);this.shadowCollection=this.collection.clone();this.enablePlaceholder&&this.enablePlaceholder();this.analytics=this.options.analytics||_.noop},showClearButtonMaybe:function(){var d=this.clearButton();this._super();this.$el.find(".search-icon").toggleClass("blank",d.getIsVisible())},makeRegExp:function(d){return new RegExp(App.Utils.escapeRegex(d.trim()),"i")},makeMatcher:function(j){var i=this.makeRegExp(j),h=this.fields||model.keys(),d=false,g=this.searchFolders,k,f,e;return function(l){l.set({queryMatched:false},{silent:true});if(l.children.length>0){return true}_.each(h,function(m){if(g){f=l.collection.parent;while(!_.isUndefined(f)){e=i.test(App.Utils.unescape(f.get(m))+"");f=(!e&&f.collection)?f.collection.parent:undefined}}if(e||i.test(App.Utils.unescape(l.get(m))+"")){l.set({queryMatched:true},{silent:true});k=_.clone(l);f=k.collection.parent;while(!_.isUndefined(f)&&!f.get("queryMatched")){f.set({queryMatched:true},{silent:true});f=f.collection?f.collection.parent:undefined}d=true}});return d}},clearButton:function(){return this.$el.find("[data-backgrid-action=clear]")},search:function(g){var d=this.searchBox().val(),f;if(!(g.keyCode===App.Utils.KEY.TAB&&d==="")){f=_.bind(this.makeMatcher(d),this);this.collection.reset(this.shadowCollection.filter(f).filter(function(e){return e.get("queryMatched")===true}))}},onBlur:function(d){if(this.searchBox().val()){this.analytics("search:exe")}},clear:function(d){this.searchBox().val(null);this.showClearButtonMaybe();this.collection.reset(this.shadowCollection.models);if(d&&this.clearButton().is(d.target)){this.searchBox().focus()}this.analytics("search:clear")},render:function(){this.$el.empty().append(this.template({name:this.name,clearString:this.clearString,placeholder:this.placeholder,value:this.value,autocomplete:_.contains(["on","off"],this.autocomplete)?this.autocomplete:(this.autocomplete===false?"off":"on")}));this.showClearButtonMaybe();this.delegateEvents();return this}});App.ns("Views.Components").GridView.GridViewSearch=c}())}),(function(b,a){(function(){var c=App.Views.Components.GridView.GridViewRow.extend({render:function(){this._super();this.$el.addClass("single-select-row");return this},toggleSelected:function(g){g.stopPropagation();var d=jQuery(g.delegateTarget),f=d.find("button.toggle-icon");if(_.isEmpty(this.model.children)){this.model.trigger("gridview:clearSelectedModels");this.model.set({selected:true});this.columns.models[0].trigger("gridview:selectionChanged");f.focus()}}});App.ns("Views.Components").GridView.GridViewSingleSelectRow=c}())}),(function(b,a){(function(){var c=Backgrid.Extension.SelectRowCell.extend({template:App.Templates.Components.GridView.selectRowCellTemplate,events:App.Views.inherit("events",{"change input[type=checkbox]":"onChange"}),toTemplate:function(){return{selected:this.model.get("selected"),title:this.model.has("name")?App.Utils.escape(this.model.get("name")):"",selectAll:i18n("selectAll"),viewId:this.model.cid}},initialize:function(){var d;this._super(this.options);d=this.model.children;if(d&&d.length>0){if(!this.model.has("selectedCount")){this.model.set({selectedCount:0},{silent:true})}}if(!this.model.has("selected")){this.model.set({selected:false})}},render:function(){this.$el.empty().append(this.toHTML());this.delegateEvents();return this},onKeydown:function(d){},onClick:function(f){f.stopPropagation();var d=f.delegateTarget;jQuery(d).find("input[type=checkbox]").click()},onChange:function(){var i=this.model,e=this.$el.parents("table.backgrid"),f=i.collection.parent,d=f,l=this.$el.find("input[type=checkbox]").prop("checked"),n,m,j,h,g,k;i.set({selected:l});if(!_.isUndefined(f)){n=f.get("selectedCount");if(l){m=n+1>f.children.length?f.children.length:n+1;f.set({selectedCount:m},{silent:true})}else{m=n-1<0?0:n-1;f.set({selectedCount:m},{silent:true})}}if(i.children.length>0){if(l){i.set({selectedCount:i.children.length},{silent:true})}else{i.set({selectedCount:0},{silent:true})}j=_.clone(i.children.models);while(!_.isEmpty(j)){h=j.shift();h.set({selected:l});e.find('tr[data-cid="'+h.cid+'"] td.select-row-cell input[type="checkbox"]').prop("checked",l);if(h.children.length>0){_.each(h.children.models.reverse(),function(o){j.unshift(o)})}h.trigger("backgrid:selected",h,l)}}i.trigger("backgrid:selected",i,l);while(!_.isUndefined(f)){g=f.get("selectedCount")===f.children.length;f.set({selected:g});e.find('tr[data-cid="'+f.cid+'"] td.select-row-cell input[type="checkbox"]').prop("checked",g);f.trigger("backgrid:selected",f,g);f=_.clone(f.collection.parent);if(!_.isUndefined(f)){k=f.get("selectedCount");if(!_.isUndefined(d.changed.selected)){if(g){m=k+1>f.children.length?f.children.length:k+1;f.set({selectedCount:m},{silent:true})}else{m=k-1<0?0:k-1;f.set({selectedCount:m},{silent:true})}}}}this.column.trigger("gridview:selectionChanged")}});App.ns("Views.Components").GridView.HierarchicalSelectRowCell=c}())}),(function(b,a){(function(){var c=App.Views.Components.GridView.HierarchicalSelectRowCell.extend({className:"select-all-header-cell",tagName:"th",initialize:function(){this.column=this.options.column;this.model=new Backbone.Model({selected:false});if(!(this.column instanceof Backgrid.Column)){this.column=new Backgrid.Column(this.column)}this.addSelectionEvents();this.listenTo(this.column,"change:renderable",function(d,e){this.$el.toggleClass("renderable",e)});if(Backgrid.callByNeed(this.column.renderable(),this.column,this.collection)){this.$el.addClass("renderable")}},addSelectionEvents:function(){var f=this.selectedModels={},e=this,d;_.each(this.collection.models,function(g){g.on("backgrid:selected",function(h,i){d=true;if(i){f[h.id||h.cid]=h}else{delete f[h.id||h.cid];this.$el.find("input[type=checkbox]").prop("checked",false);this.model.set({selected:false},{silent:true})}_.each(this.collection.models,function(j){if(j.get("level")===0&&_.isUndefined(f[j.id||j.cid])){d=false}});if(d){this.$el.find("input[type=checkbox]").prop("checked",true);this.model.set({selected:true},{silent:true})}},e)})},onChange:function(){var d=this.$el.find("input[type=checkbox]").prop("checked"),e=this.$el.parents("table.backgrid");this.model.set({selected:d},{silent:true});_.each(this.collection.models,function(f){f.set({selected:d});e.find('tr[data-cid="'+f.cid+'"] td.select-row-cell input[type="checkbox"]').prop("checked",d);f.trigger("backgrid:selected",f,d);if(f.children.length>0){f.set({selectedCount:d?f.children.length:0},{silent:true})}});this.column.trigger("gridview:selectionChanged")}});App.ns("Views.Components").GridView.HierarchicalSelectRowHeaderCell=c}())}),(function(b,a){(function(){var c=Backgrid.StringCell.extend({template:App.Templates.Components.GridView.stringCellWithTooltipTemplate,className:"string-tooltip-cell",toTemplate:function(){return{viewId:this.model.cid}},render:function(){var e,d;this.$el.html(this.toHTML());this.$el.addClass(this.column.get("name"));e=this.$el.find("div.cell-title");e.empty();d=App.Utils.unescape(this.formatter.fromRaw(this.model.get(this.column.get("name")),this.model));e.text(d);e.attr("title",d);this.delegateEvents();return this}});App.ns("Views.Components").GridView.StringCellWithTooltip=c}())}),(function(b,a){(function(){var c=Backgrid.StringCell.extend({template:App.Templates.Components.GridView.toggleCellTemplate,className:"toggle-cell",events:{click:"toggle"},toTemplate:function(){return{toggleLabel:i18n("collapse"),viewId:this.model.cid}},toggle:function(){var f=this.options.fieldMap,e=[],g,d=false;if(!_.isUndefined(f)&&f.items){e=this.model.get(f.items)||[]}if(e.length>0){g=this.$el.parent("tr");g.toggleClass("expanded collapsed");d=g.hasClass("expanded");g.attr("aria-expanded",d);this.$toggleIconBtn.attr("aria-pressed",!d);if(d){this.model.trigger("gridview:toggleRow",{state:"expanded",model:this.model});this.$toggleIconBtnLabel.text(i18n("collapse"))}else{this.model.trigger("gridview:toggleRow",{state:"collapsed",model:this.model});this.$toggleIconBtnLabel.text(i18n("expand"))}}},render:function(){var e,d;this.$el.html(this.toHTML());this.$el.addClass(this.column.get("name"));e=this.$el.find("div.cell-title");e.empty();d=App.Utils.unescape(this.formatter.fromRaw(this.model.get(this.column.get("name")),this.model));e.text(d);e.attr("title",d);this.$toggleIconBtn=this.$(".toggle-icon");this.$toggleIconBtnLabel=this.$toggleIconBtn.children("span:first");this.delegateEvents();return this}});App.ns("Views.Components").GridView.ToggleCell=c}())}),(function(b,a,e){var d={"./models/toggleSwitch/toggleSwitch.js":23,"./templates/carouselTemplate.js":0,"./templates/helpModalInner.js":1,"./templates/tabbedDropdownTmpl.js":2,"./templates/timelineTmpl.js":3,"./templates/toggleSwitchTmpl.js":4,"./views/carousel/carouselModal.js":24,"./views/carousel/carouselSlideView.js":25,"./views/dropdown/dropdown.js":26,"./views/helpModal/helpModal.js":27,"./views/layout/layout.js":28,"./views/modalView/modalView.js":5,"./views/tabbedDropdown/tabbedDropdown.js":29,"./views/timeline/timeline.js":30,"./views/toggleSwitch/toggleSwitch.js":31};function g(h){return e(c(h))}function c(h){var i=d[h];if(!(i+1)){throw new Error("Cannot find module '"+h+"'.")}return i}g.keys=function f(){return Object.keys(d)};g.resolve=c;b.exports=g;g.id=22}),(function(b,a){(function(){var c=Backbone.Model.extend({validate:function(){var d=this.attributes;if(!_.isBoolean(d.editable)){return"Invalid editable: "+_.escape(d.editable)}if(!_.isBoolean(d.choice)){return"Invalid choice: "+_.escape(d.choice)}},toJSON:function(){return null},defaults:{isEditable:true}});App.ns("Models").ToggleSwitch=c})()}),(function(b,a){(function(){var c=App.Views.ModalView.extend({template:App.Templates.Carousel.content,defaults:{classes:"carousel-modal",close:true,backdrop:true,hasFooter:false},carouselOptions:{interval:false,pause:false,keyboard:true},events:{"slid.bs.carousel":"updateButtons"},keyEvents:{left:"onLeftKey",right:"onRightKey",home:"onHomeKey",end:"onEndKey",pageup:"onHomeKey",pagedown:"onEndKey"},slides:{},initialize:function(){this.carouselId=this.options.carouselId||("carousel-"+this.cid);this.carouselOptions=_.defaults(this.options.carouselOptions||{},this.carouselOptions);if(this.options.slides){this.slides=this.options.slides}this.slides=_.result(this,"slides");this._super()},render:function(){var d=0;this._super();this.$carousel=this.$(".carousel");this.$slidesDiv=this.$carousel.find(".carousel-inner");this.$indicatorsDiv=this.$(".carousel-indicators");this.totalSlides=_.size(this.slides);_(this.slides).each(function(g,e){var f=_.defaults(g,{carouselId:this.carouselId,slideIndex:d,footnote:""});(new App.Views.CarouselSlideView(f)).renderInto(this.$slidesDiv);if(this.totalSlides>1){this.renderIndicator(d)}++d},this);this.renderFooter();this.$carousel.carousel(this.carouselOptions);this.updateButtons();this.$el.attr("aria-labelledby","carousel-item-title-0");return this},toTemplate:function(){return{carouselId:this.carouselId}},renderIndicator:function(e){var d=_.template(App.Templates.Carousel.CarouselIndicators)({carouselId:this.carouselId,slideIndex:e});this.$indicatorsDiv.append(d);if(e===0){this.$indicatorsDiv.children("li").first().addClass("active").attr({tabindex:0,"aria-selected":true})}return this},renderFooter:function(){var d=_.template(App.Templates.Carousel.footer)({prevButtonText:i18n("previous"),nextButtonText:i18n("next"),doneButtonText:i18n("done"),carouselId:this.carouselId});this.$carousel.append(d);this.$prev=this.$carousel.find(".carousel-prev");this.$next=this.$carousel.find(".carousel-next");this.$done=this.$carousel.find(".carousel-done");return this},updateButtons:function(){var d=this.getActiveSlide();currIndex=d.index(),lastSlide=this.totalSlides-1,isLast=currIndex===lastSlide,indicators=this.$indicatorsDiv.find("li");activeIndicator=indicators.eq(currIndex),genericDiv=undefined;this.$prev.toggle(currIndex>0);this.$next.toggle(!isLast);this.$done.toggle(isLast);d.siblings().attr("aria-hidden",true);indicators.filter("[aria-selected=true]").attr({tabindex:-1,"aria-selected":false});activeIndicator.attr({tabindex:0,"aria-selected":true});if(this.focusOnIndicator()){activeIndicator.focus()}else{if(isLast){this.$done.focus()}}if(!this.$genericDiv){this.$genericDiv=$('<span class="hidden-accessible">&#8203;</span>')}genericDiv=this.$genericDiv.detach();_.delay(function(){d.attr("aria-hidden",false).children(":last").append(genericDiv)},250)},viewSlide:function(d){this.$carousel.carousel(d)},prevSlide:function(){this.$carousel.carousel("prev");if(!this.focusOnIndicator()){this.$prev.focus()}},nextSlide:function(){this.$carousel.carousel("next");if(!this.focusOnIndicator()){this.$next.focus()}},getSlideAt:function(d){return this.$slidesDiv.find(".carousel-item").eq(d)},getActiveSlide:function(){return this.$slidesDiv.find(".carousel-item.active")},onHidden:function(){this.viewSlide(0);this._super()},onLeftKey:function(){this.isVisible()&&this.prevSlide()},onRightKey:function(){this.isVisible()&&this.nextSlide()},onHomeKey:function(){this.isVisible()&&this.viewSlide(0)},onEndKey:function(){this.isVisible()&&this.viewSlide(this.totalSlides-1)},focusOnIndicator:function(){return $(document.activeElement).closest(this.$indicatorsDiv).length===1}});App.Views.CarouselModal=c})()}),(function(b,a){(function(){var c=Backbone.View.extend({template:App.Templates.Carousel.slideContent,className:"carousel-item",render:function(){this._super();this.$el.attr({id:"carousel-item-"+this.options.slideIndex,role:"tabpanel"});return this},postRender:function(){if(this.options.slideIndex===0){this.$el.addClass("active")}},toTemplate:function(){return this.options}});App.Views.CarouselSlideView=c})()}),(function(b,a){(function(){var c=Backbone.View.extend({tagName:"select",events:{change:"onChange"},optionTemplate:'<option {{selected}} value="{{% value}}">{{% label}}</option>',initialize:function(){this.labels=this.options.labels||this.options.values;this.values=this.options.values||this.options.labels;if(this.labels.length!==this.values.length){throw new TypeError("App.Views.Dropdown: labels and values have different lengths")}},render:function(){this._super();this.renderOptions();this.$select=this.$el.filter("select");if(this.options.disabled){this.$select.attr("disabled","disabled")}return this},renderOptions:function(){this.$el.html(this.toOptionsHtml());return this},onChange:function(d){if(this.options.onChange){this.options.onChange(d,this.getSelectedValue())}},getSelectedValue:function(){return this.$select.val()},getSelectedLabel:function(){return jQuery(this.getSelectedOption()).text()},getSelectedOption:function(){var d=this.$select.get(0);return d.options[d.selectedIndex]},setSelectedValue:function(d){this.$select.val(d)},toOptionsHtml:function(){var k=this.getLabels(),g=this.getValues(),d=this.options.defaultValue,j=this.options.byLabel,f=_.template(this.optionTemplate),h=false,e='selected="selected"',i="";i=_(k).map(function(m,l){var o=g[l],n=j?m:o;return f({label:m,value:o,selected:!h&&(h=n===d)?e:""})}).join("");if(_.isUndefined(this.options.selectLabel)||this.options.selectLabel){i=f({label:this.options.selectLabel||i18n("select_ellipsis"),value:"",selected:h?"":e})+i}return i},getLabels:function(){return this.labels},getValues:function(){return this.values}});App.ns("Views").Dropdown=c}())}),(function(b,a){(function(){var c=App.Views.ModalView.extend({template:App.Templates.Help_modal_inner.content,defaults:{title:"",classes:"help-modal",keyboard:true,backdrop:true,primaryBtn:false,closeBtn:false,close:true,show:false,hasHeaderDivider:true,hasFooter:false},toTemplate:function(){return{helpInfo:this.getHelpInfo()}},getHelpInfo:function(){return this.options.helpInfo}});App.Views.HelpModal=c})()}),(function(b,a){(function(){var c=Backbone.View.extend({template:"",views:{},initialize:function(){if(this.options.views){this.views=this.options.views}this.views=_.clone(_.result(this,"views"))},getView:function(d){return this.views[d]},hasView:function(d){return d&&(d in this.views)},getViewCount:function(){return _.size(this.views)},addView:function(d,f,e){if(this.hasView(f)){this.removeView(f)}f=f||this.getViewCount();this.views[f]=d;this._renderView(d,f,this.views,e);return this},removeView:function(d){if(!this.hasView(d)){return}this.getView(d).remove();delete this.views[d];return this},render:function(){this._super();_(this.views).each(this._renderView,this);return this},_renderView:function(d,h,g,f){var e;if(!d.model){d.model=this.options.model}d.inLayout=this;if(!f||f.autoRender!==false){e=this.$(h);if(e.length){d.renderInto(e)}else{if(!_(".#[".split("")).contains(h[0])){e=this.$("section["+h+"]");if(e.length){e.replaceWith(d.render().el);d.postRender()}}}}return d},remove:function(){_(this.views).invoke("remove");this.views={}}});App.ns("Views").Layout=c})()}),(function(b,a){(function(){var c=App.Utils.KEY;var d=Backbone.View.extend({template:App.Templates.TabbedDropdown.tabbedDropdown,className:"tabbed-dropdown",events:{"mouseover ul.dropdown-menu a":"switchDropdownItem","mouseout ul.dropdown-menu a":"displaySelectedItem","click ul.dropdown-menu a":"selectDropdownItem","focus ul.dropdown-menu a":"switchDropdownItem","touchend ul.dropdown-menu a":"touchDropdownItem","keydown .dropdown-content":"handleKeydown","shown.bs.dropdown":"onShownDropdown","hide.bs.dropdown":"onHideDropdown","click .filter-content":"onClickFilter","keyup .filter-content":"onKeyupFilter","click .a12-icon.remove-x":"onClickDelete"},toTemplate:function(){return{disableLink:this.options.disableLink||false,title:this.options.title||this.currentModel.get("name"),token:this.options.tabbedDropdownAnalytics,dropdownList:this.dropdownList.toJSON(),viewId:this.cid,filterEnabled:this.options.filterEnabled,searchPlaceholder:i18n("search"),clearAriaText:i18n("clear")}},initialize:function(){var e=this;this._super();_.each(this.options.dropdownList,function(f){f.id=f.id||_.uniqueId(e.options.prefix||"")});this.dropdownList=new Backbone.Collection(this.options.dropdownList);this.currentModel=this.dropdownList.findWhere({selected:true})},render:function(){this._super();this.$dropdownToggle=this.$el.find("a.dropdown-toggle");this.$dropdownMenu=this.$el.find("ul.dropdown-menu");this.$tabContent=this.$el.find(".tab-content");this.$searchIcon=this.$el.find(".filter-content .a12-icon");this.$searchInput=this.$el.find(".filter-content input");this.$dropdownContent=this.$el.find(".dropdown-content");this.setInitialValue();return this},setInitialValue:function(){this.$dropdownMenu.find('li > a[id="'+this.currentModel.get("id")+'"]').trigger("click")},switchDropdownItem:function(f){f.preventDefault();this._handleHoverItem($(f.target))},_handleHoverItem:function(f){var e=this.$dropdownMenu.find("li > a"),g=f.id||f.attr("id");e.attr("tabindex",-1).filter(f).attr("tabindex",0);e.removeClass("hovered");this.$dropdownMenu.find('li > a[id="'+g+'"]').addClass("hovered");this.$tabContent.find("div").removeClass("show active");this.$tabContent.find('div[id="'+g+'_tab"]').addClass("show active")},selectDropdownItem:function(g){var f=this.$dropdownMenu.find("li > a");g.preventDefault();f.attr({"aria-checked":false,tabindex:-1}).filter(g.target).attr({"aria-checked":true,tabindex:0});this._updateCurrentSelectedItem(g.target.id)},resetDropdown:function(f){var e=this.$dropdownMenu.find("li > a"),g=this.$dropdownMenu.find('li > a[id="'+f+'"]');e.attr({"aria-checked":false,tabindex:-1}).filter(g).attr({"aria-checked":true,tabindex:0});this._updateCurrentSelectedItem(f)},_updateCurrentSelectedItem:function(e){this.$dropdownMenu.find("li").removeClass("active");this.$dropdownMenu.find(".dropdown-item").removeClass("active");this.currentModel.set("selected",false);this.currentModel=this.dropdownList.findWhere({id:e});this.currentModel.set("selected",true);this.$dropdownMenu.find('a[id="'+this.currentModel.get("id")+'"]').parent("li").addClass("active");this.$dropdownMenu.find('a[id="'+this.currentModel.get("id")+'"]').addClass("active");this.trigger("tabDropdownSelected",this.currentModel.toJSON());if(_.isUndefined(this.options.title)){this.$el.find("a.dropdown-toggle > span.name").html(this.currentModel.get("name"))}},touchDropdownItem:function(f){f.preventDefault();if(this.currentModel.get("id")===f.target.id){this.$dropdownToggle.trigger("click")}else{this.switchDropdownItem(f);this.selectDropdownItem(f)}},displaySelectedItem:function(f){if(_.isUndefined(jQuery(f.toElement).data().toggle)){this.$tabContent.find("div").removeClass("show active");this.$tabContent.find('div[id="'+this.currentModel.get("id")+'_tab"]').addClass("show active")}},handleKeydown:function(j){var k=j.which,g=this.$dropdownMenu.find("li > a"),f=jQuery(j.target),i,h;if(g.filter(j.target).length&&(c.isArrow(j)||c.isSpace(j)||k===c.HOME||k===c.END)){j.preventDefault();switch(k){case c.HOME:g.first().focus();break;case c.END:g.last().focus();break;case c.UP:case c.LEFT:if(f.parent().prevAll("li:visible").length!==0){f.parent().prevAll("li:visible").children("a").get(0).focus()}break;case c.DOWN:case c.RIGHT:if(f.parent().nextAll("li:visible").length!==0){f.parent().nextAll("li:visible").children("a").get(0).focus()}break}}switch(k){case c.SPACE:case c.ENTER:f.click();break;case c.ESC:this.$dropdownToggle.dropdown("toggle");this.$dropdownToggle.focus();break;case c.TAB:i=this.$dropdownMenu.find(":focusable");h=i.filter(":tabbable");if(!j.shiftKey&&(h.last().is(f)||i.last().is(f))){h.first().focus();j.preventDefault();j.stopImmediatePropagation()}else{if(j.shiftKey&&(h.first().is(f)||i.first().is(f))){h.last().focus();j.preventDefault();j.stopImmediatePropagation()}}break}},onClickFilter:function(f){f.stopImmediatePropagation()},onKeyupFilter:function(j){j.stopImmediatePropagation();var h=this.$searchInput.val().toLowerCase(),i,g,f;if(j.which===c.TAB){return}this._doFilter(h);i=this.$dropdownMenu.find("li.active:visible a");if(i.length){this._handleHoverItem(i)}else{if(h.length){g=this.$dropdownMenu.find("li > a:visible").first();this._handleHoverItem(g)}}if(h.length){this.$searchIcon.removeClass("search").addClass("remove-x");this.$searchIcon.attr("tabIndex",0)}else{f=this.$dropdownMenu.find("li > a");f.removeClass("hovered");this.$searchIcon.attr("tabIndex",-1);this.$searchIcon.addClass("search").removeClass("remove-x")}},_doFilter:function(e){this.$dropdownMenu.find(".content-title").each(function(f,g){(g.text.search(new RegExp(App.Utils.escapeRegex(e),"i"))<0)?jQuery(g).parent().hide():jQuery(g).parent().css("display","list-item")});if(this.$dropdownMenu.find(".content-title:visible").length===0){this.$tabContent.find("div").removeClass("show active")}},onClickDelete:function(){this._resetFilter();this.$searchInput.focus()},_resetFilter:function(){this.$dropdownMenu.find("li").css("display","list-item");this.$searchInput.val("");this.$searchIcon.attr("tabIndex",-1);this.$searchIcon.addClass("search").removeClass("remove-x")},onShownDropdown:function(){var e=this;this.$dropdownContent.addClass("open");setTimeout(function(){e.$dropdownMenu.find("li.active > a").get(0).focus()},0);e.$el.setAriaHiddenOnSiblings(true)},onHideDropdown:function(){if(this.options.filterEnabled){this._resetFilter()}this.$dropdownContent.removeClass("open");this.$dropdownMenu.find("li.active > a").focus();this.$dropdownToggle.focus()}});App.ns("Views").TabbedDropdown=d})()}),(function(b,a){(function(){var d=75;var c=Backbone.View.extend({template:App.Templates.Timeline.content,className:"timeline",defaults:{timelineLabel:"",numSteps:3,initialStep:0,progressLabels:[]},initialize:function(){this.options=_.extend({},this.defaults,this.options);this._super()},render:function(){this._super();this.timeline=this.$el.find(".timeline-outer");this.dashedLine=this.$el.find(".dashed-line");this.allBubbles=this.$el.find(".bubble");this.progressLine=this.$el.find(".progress-line");this.progressLabel=this.$el.find(".timeline-label");return this},postRender:function(){var e=-2;this.dashedLine.css("width",(this.options.numSteps-1)*d);_.each(this.allBubbles,function(f){jQuery(f).css("left",e+"px");e+=d});this.setActiveStep(this.options.initialStep)},setActiveStep:function(f){var g=this.options.progressLabels[f],e=this,h;_.each(this.allBubbles,function(i,j){h=jQuery(i);h.removeClass("active done");if(j<f){e._setDoneStep(h)}});this.currentActiveBubble=jQuery(this.allBubbles[f]);this.currentActiveBubble.addClass("active");this.progressLine.css("width",f*d);if(g){this.progressLabel.html(g)}this.timeline.attr("aria-valuenow",f);this.timeline.attr("aria-valueText",g)},_setDoneStep:function(e){e.addClass("done")},toTemplate:function(){return{numSteps:this.options.numSteps,timelineLabel:this.options.timelineLabel,initialStep:this.options.initialStep}}});App.Views.Timeline=c}())}),(function(b,a){(function(){var c="es-toggle-div",j="choice-true",d="choice-false",h="disabled",g="editable",e="choice",k="single-choice-toggle",i="double-choice-toggle";var f=Backbone.View.extend({template:App.Templates.ToggleSwitch.toggle,className:c,events:{"click .toggle":"onClick",'change input[type="radio"]':"onChange","keydown .switch-wrapper":"onKeydown"},modelEvents:{change:"onChoiceChanged"},defaults:{choiceTrueIsFirst:true,choiceTrueLabel:"",choiceFalseLabel:"",classes:"",trigger:true,singleChoiceSwitch:false},initialize:function(){var l=this.options=_.defaults(this.options,this.defaults);if(!l.model){throw new Error("Instantiating with no model: App.Views.ToggleSwitch")}if(!l.model.isValid()){throw new Error(l.model.validationError)}},render:function(){this._super();if(this.options.classes){this.$el.addClass(this.options.classes)}this.options.singleChoiceSwitch?this.$el.addClass(k):this.$el.addClass(i);this.$toggle=this.$el.find(".toggle");this.$radio0=this.$el.find(".radio-0");this.$radio1=this.$el.find(".radio-1");this.onChoiceChanged();return this},toTemplate:function(){var n,p,l,o,m=!this.model.get(g)?"disabled":"";if(this.options.choiceTrueIsFirst){n="true";l=this.options.choiceTrueLabel;p="false";o=this.options.choiceFalseLabel}else{n="false";l=this.options.choiceFalseLabel;p="true";o=this.options.choiceTrueLabel}return{toggleID:_.uniqueId(),choiceFirstClass:n,choiceFirstLabel:l,choiceSecondClass:p,choiceSecondLabel:o,disabled:m,singleChoiceSwitch:this.options.singleChoiceSwitch}},isChoiceTrueChecked:function(){return this.$radio1.is(":checked")},onChoiceChanged:function(){var o=this.model,n=this.$toggle,m=this.$radio0,l=this.$radio1;if(!n){return}if(o.get(g)){n.prop(h,false);m.add(l).prop("disabled",false)}else{n.attr(h,h);m.add(l).prop("disabled",true)}if(o.get(e)){this.$el.addClass(j).removeClass(d);m.prop("checked",false).attr("tabindex","-1").attr("aria-pressed","false");l.prop("checked",true).attr("tabindex","0").attr("aria-pressed","true")}else{this.$el.addClass(d).removeClass(j);m.prop("checked",true).attr("tabindex","0").attr("aria-pressed","true");l.prop("checked",false).attr("tabindex","-1").attr("aria-pressed","false")}return this},_toggle:function(){var l=!this.model.get("choice");this.model.set("choice",l);this.triggerEvent();this.$("input:checked").focus(0)},triggerEvent:function(){if(!this.options.trigger){return}var l=this.model.get("choice");if(_.isString(this.options.trigger)){App.EventBus.trigger(this.options.trigger,{toggle:l,label:l?this.options.choiceTrueLabel:this.options.choiceFalseLabel})}if(l&&this.options.trueTrigger){App.EventBus.trigger(this.options.trueTrigger)}if(!l&&this.options.falseTrigger){App.EventBus.trigger(this.options.falseTrigger)}},onClick:function(l){if(!this.model.get(g)){return}if(l.which===1){this._toggle()}},onChange:function(m){var l=this.$("input:radio").index(this.$("input:checked"));this.model.set("choice",l);this.triggerEvent();this.$("input:checked").focus(0)},onKeydown:function(l){if(!this.model.get(g)){return}if(App.Utils.KEY.isEnter(l)||l.which===App.Utils.KEY.SPACE){l.preventDefault();this._toggle()}}});App.ns("Views").ToggleSwitch=f}())}),(function(b,a){})])});
/*!
 * ADOBE CONFIDENTIAL
 * ___________________
 * 
 * Copyright 2016 Adobe Systems Incorporated
 * All Rights Reserved.
 * 
 * NOTICE: All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 */
;
/*!
 * */
(function webpackUniversalModuleDefinition(a,b){if(typeof exports==="object"&&typeof module==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){exports.agreement=b()}else{a.adobe=a.adobe||{},a.adobe["sign"]=a.adobe["sign"]||{},a.adobe["sign"]["ui"]=a.adobe["sign"]["ui"]||{},a.adobe["sign"]["ui"]["agreement"]=b()}}}})(typeof self!=="undefined"?self:this,function(){return(function(a){var b={};function c(e){if(b[e]){return b[e].exports}var d=b[e]={i:e,l:false,exports:{}};a[e].call(d.exports,d,d.exports,c);d.l=true;return d.exports}c.m=a;c.c=b;c.d=function(e,f,d){if(!c.o(e,f)){Object.defineProperty(e,f,{configurable:false,enumerable:true,get:d})}};c.n=function(e){var d=e&&e.__esModule?function f(){return e["default"]}:function g(){return e};c.d(d,"a",d);return d};c.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};c.p="";return c(c.s=1)})([(function(b,a){(function(){var c="_",d="echosign"+c,g="contentType",f=App.Models.Agreement.ROLES,h;var e=function(j,i){var k=(j||{}).inputType,l=k in e.fields?e.fields[k]:e.Base;if(k in e.UNSUPPORTED_FIELDS){return null}return new l(j,i)};e.fields={};e.INPUT_TYPES=App.Utils.makeObj(["TEXT_FIELD","CHECKBOX","RADIO","DROP_DOWN","FILE_CHOOSER","SIGNATURE","BLOCK","PDF_SIGNATURE","LINK","MULTILINE","COMB","INLINE_IMAGE"]);e.UNSUPPORTED_FIELDS={BUTTON:true,LISTBOX:true};e.TODO_TYPES=["attachment","initials","invalid","required","signature"];e.VALIDATION_RULE=App.Utils.makeObj(["None","String","Number","Date","Time","US Zip","UK Post Code","US Zip 4","Phone","Social Security Number","Email Address","Currency","Percent","Custom","Formula"]);e.TODO=App.Utils.makeObj([].concat(e.TODO_TYPES,["required_invalid","transition"]));h=e.CONTENT_TYPE=App.Utils.makeObj(["DATA","SIGNER_NAME","SIGNER_FIRST_NAME","SIGNER_LAST_NAME","SIGNER_INITIALS","SIGNER_EMAIL","SIGNER_TITLE","SIGNER_COMPANY","SIGNATURE","SIGNATURE_DATE","SIGNATURE_BLOCK","AGREEMENT_NAME","AGREEMENT_MESSAGE","CALC","DIGITAL_SIGNATURE","TRANSACTION_ID","SIGNATURE_STAMP","PAYMENT","LINK"]);e.LINK_TYPE=App.Utils.makeObj(["EXTERNAL","INTERNAL","FROM_TEXT"]);e.DISPLAY_FORMAT_TYPE=App.Utils.makeObj(["DEFAULT","DATE","NUMBER"]);e.SIGNER_INFO_FIELDS=[h.SIGNER_NAME,h.SIGNER_FIRST_NAME,h.SIGNER_LAST_NAME,h.SIGNER_COMPANY,h.SIGNER_EMAIL,h.SIGNER_TITLE,h.SIGNATURE_DATE];e.FORMAT_DEFAULTS={unspecifiedDateFormat:"mmm d, yyyy",unspecifiedNumberFormat:",0.00",CUSTOM:"Custom"};e.Base=Backbone.Model.extend({initialize:function(){this.todoType=this.getTodoType();this.set("todo",0);this.initialValue=this.get("value");if(this.collection&&this.isAutosaved()){this.collection.is_autosaved=true}},postInit:function(){},getRoleValue:function(){var i=this.get("roleName"),k=this.get("role"),j=k===f.POST_SIGN;return k+(!j&&i?"_"+i:"")},isTabable:function(){return !this.isReadOnly()&&!this.get("hidden")},toJSON:function(){var i=this._super(),j=i.calculatedExpression;if(j&&j.substring(0,1)==="["&&j.substring(j.length-1)==="]"){i.correctedCalculatedExpression='"" + '+j}return i},isAutosaved:function(){return this.canAutoSave()&&this.initialValue!==this.get("defaultValue")},canAutoSave:function(){return this.get("name").indexOf(d)!==0},canSubmit:function(){return !this.has("conditionState")||this.get("conditionState")},isReadOnly:function(){return this.get("readOnly")},isVisible:function(){return App.appView.is_authoring||!this.hasConditions()||this.get("conditionState")},isDeleted:function(){return this.get("locations").length===0},isTodo:function(){return(this.isRequired()||this.hasValidation()||this.hasFormatting())&&!this.isReadOnly()},isCalculated:function(){return this.get(g)===h.CALC},isDataField:function(){return this.get(g)===h.DATA},isPaymentField:function(){return this.get("payment")},isCalculatedPaymentField:function(){return this.isPaymentField()&&this.isCalculated()},isUserEnteredPaymentField:function(){return this.isPaymentField()&&!this.isCalculated()},isSignerInfo:function(){return _(e.SIGNER_INFO_FIELDS).indexOf(this.get(g))!==-1},isStampField:function(){switch(this.get(g)){case h.TRANSACTION_ID:case h.SIGNATURE_STAMP:return true;default:return false}},hasConditions:function(){return this.get("conditions").length>0},supportsConditions:function(){switch(this.get(g)){case h.AGREEMENT_NAME:case h.AGREEMENT_MESSAGE:case h.TRANSACTION_ID:case h.SIGNATURE_STAMP:case h.DIGITAL_SIGNATURE:case h.PAYMENT:case h.LINK:return false;default:return true}},isDone:function(){return this.get("todo")===0},isEmpty:function(){var i=this.validationKey;return String.prototype.trim.call(this.get(i)==null?"":this.get(i))===""},isValid:function(){return !this.hasValidation()||this.isEmpty()||this.get("validated")},isFormatted:function(){return !this.hasFormatting()||this.isEmpty()||this.get("formatted")},hasFormatting:function(){return this.get("displayFormatType")!=="DEFAULT"&&this.isDataField()},isRequired:function(){return this.get("required")},hasValidation:function(){return this.get("validationRule")!=="None"&&!this.isCalculated()&&this.get("displayFormatType")!=="DATE"},validate:function(i,j){if(this.isVisible()){this.updateTodo()}return false},updateTodo:function(){if(!this.isTodo()){return}var i,j=e.TODO;switch(this.todoType){case j.invalid:i=this.isValid()&&this.isFormatted();break;case j.required_invalid:i=this.isValid()&&this.isFormatted()&&!this.isEmpty();break;default:i=!this.isEmpty()}this.set("todo",i?0:1)},getTodoType:function(){var j=this.get("inputType"),i=e.TODO;switch(j){case"SIGNATURE":case"BLOCK":return this.is_initials?i.initials:i.signature;case"FILE_CHOOSER":return i.attachment;case"INLINE_IMAGE":return i.required;default:if((this.hasValidation()||this.hasFormatting())&&this.isRequired()){return i.required_invalid}if(this.hasValidation()||this.hasFormatting()){return i.invalid}if(this.isRequired()){return i.required}}return""},getMappedTodoType:function(){var j=this.todoType,i=e.TODO;if(j===i.required_invalid){j=this.isEmpty()&&(this.isValid()||this.isFormatted())?i.required:i.invalid}return j},getSubmitData:function(){var i={};i[this.get("name")]=this.get("value");return i},getAutoSavedData:function(){return this.getSubmitData()},defaults:function(){return{alignment:"LEFT",anyOrAll:"ANY",backgroundColor:"",borderColor:"",borderStyle:"SOLID",borderWidth:-1,calculated:false,conditions:[],conditionsToggle:"",contentType:"DATA",currency:"",defaultValue:"",displayLabel:"",displayFormat:"",displayFormatType:"DEFAULT",formatted:false,errorMsg:"",fontColor:"",fontName:"",fontSize:-1,format:"NONE",hidden:false,hiddenOptions:[],inputType:"TEXT_FIELD",locations:[],masked:false,maskingChar:"*",maxLength:-1,maxNumberValue:-1,minLength:-1,minNumberValue:-1,name:"",origin:"AUTHORED",payment:false,radioCheckType:"CIRCLE",readOnly:false,regEx:"",required:false,role:"UNASSOCIATED",roleName:"",showOrHide:"SHOW",signerIndex:-1,specialErrMsg:"",specialRegEx:"",tooltip:"",validated:false,validationRule:"None",value:"",visibleOptions:[]}}});App.ns("Models").Field=e}())}),(function(b,a,c){var e=c(2);c(3);c(4);var d=function(f){return e(f.keys()).map(function(g){return c(f.resolve(g))})};d(c(5));b.exports={version:"2.0.20"}}),(function(b,a){function c(e,d){d=_.defaults(d||{},c.defaults);var f=_(e).groupBy(function(h){var g=h.split(d.sep);g.pop();return g});f=_(f).chain().pairs().sortBy(0).object().values().flatten().value();return f}c.defaults={sep:"/"};b.exports=c}),(function(b,a){if(!window.i18n){i18n=_.identity;i18n.curry=_.constant}}),(function(b,a){getAppViewHelper=function(c){return c.mainView?c.mainView:App.appView}}),(function(b,a,e){var d={"./models/agreement/DFLModel.js":6,"./models/agreement/agreement.js":7,"./models/agreement/page.js":8,"./models/agreement/service.js":9,"./models/agreement/thumb.js":10,"./models/agreement/thumbPoller.js":11,"./models/coachmark/coachmark.js":12,"./models/field/calculated.js":13,"./models/field/conditionals.js":14,"./models/field/field.js":0,"./models/field/fields/attachment.js":15,"./models/field/fields/checkbox.js":16,"./models/field/fields/digitalSignature.js":17,"./models/field/fields/dropdown.js":18,"./models/field/fields/image.js":19,"./models/field/fields/link.js":20,"./models/field/fields/radio.js":21,"./models/field/fields/signature.js":22,"./models/field/fields/signatureBlock.js":23,"./models/field/fields/text.js":24,"./models/field/validation.js":25,"./sets/agreement/pageList.js":26,"./sets/agreement/thumbList.js":27,"./sets/fieldList.js":28,"./sets/valuesList.js":29,"./templates/agreementTmpl.js":30,"./templates/hiddenAccessibleTmpl.js":31,"./templates/mobileAgreementViewTmpl.js":32,"./views/agreementView/HUDToolbar/downloadBtn.js":33,"./views/agreementView/HUDToolbar/pageDown.js":34,"./views/agreementView/HUDToolbar/pageNumber.js":35,"./views/agreementView/HUDToolbar/pageUp.js":36,"./views/agreementView/HUDToolbar/toolbar.js":37,"./views/agreementView/HUDToolbar/zoomDown.js":38,"./views/agreementView/HUDToolbar/zoomSlider.js":39,"./views/agreementView/HUDToolbar/zoomUp.js":40,"./views/agreementView/_pageViewer.js":41,"./views/agreementView/agreementDebug.js":42,"./views/agreementView/content.js":43,"./views/agreementView/footer.js":44,"./views/agreementView/header.js":45,"./views/agreementView/layout.js":46,"./views/agreementView/mainView.js":47,"./views/agreementView/mobileAgreementView.js":48,"./views/agreementView/mobileAgreementViewBanner.js":49,"./views/agreementView/pageItem.js":50,"./views/agreementView/pageList.js":51,"./views/agreementView/pinchZoomViewer.js":52,"./views/agreementView/smoothPinchZoomViewer.js":53,"./views/agreementView/thumbItem.js":54,"./views/agreementView/thumbList.js":55,"./views/coachmark/coachmark.js":56,"./views/coachmark/coachmark_mobile.js":57,"./views/field/_field.js":58,"./views/field/conditionals.js":59,"./views/field/fieldDebug.js":60,"./views/field/fieldsViewer.js":61};function g(h){return e(c(h))}function c(h){var i=d[h];if(!(i+1)){throw new Error("Cannot find module '"+h+"'.")}return i}g.keys=function f(){return Object.keys(d)};g.resolve=c;b.exports=g;g.id=5}),(function(b,a){(function(){var c=Backbone.Model.extend({defaults:{content:{},bootstrapUrl:""},urlRoot:App.Api.getMicroserviceUri("signdflforms/agreements")});App.ns("Models.DFL").Agreement=c}())}),(function(b,a){(function(){var c=Backbone.Model.extend({initialize:function(){},getPageInfo:function(e){var d=this.getPageIndex(e);return this.get("latestDocumentData").pages[d]},getPageIndex:_.memoize(function(d){return _(this.get("visiblePages")).indexOf(parseInt(d,10))},function(d){return[d,this.cid].join()}),getVisiblePageCount:function(){return this.get("visiblePages").length||0},defaults:{visiblePages:[],imageUrls:{},latestDocumentData:{}}},{AttributeMask:{SHARED:1,ACCOUNT_SHARE:2,ESIGN:4,PROTECTED:16,SIGN_PROTECTED:32,PREVIOUSLY_SIGNED:64,ACTIVE_REMINDERS:256,MULTICAST:512,WAITING_TO_SIGN_CHILDREN:1024,ROOT:4096,IS_EXPIRED:8192,MULTIMODE:16384,ESIGN_REQUIRE_COMPANY:32768,ESIGN_REQUIRE_JOB_TITLE:65536,IS_APPROVE:131072,IS_ACTIVE_FORM:262144,IS_EMBEDDED_FORM_PROTOTYPE:524288,IS_FORM_PROTOTYPE:1048576,TO_FAXEE:2097152,ALLOW_WRITTEN:4194304,PLURAL_PARTIES_ON_CANCEL:8388608,HAS_FORM_DATA:16777216,REUSABLE_DOCUMENT_SHARE:33554432,PREVIOUSLY_AUTHORED:67108864,ALLOW_REPLACE_SIGNER:134217728,ALLOW_UPLOAD_SIGNATURE:268435456,DOCUMENT_VISIBILITY_ENABLED:536870912,ALLOW_EXPIRATION_EDITING:1073741824,IS_WRITTEN:2147483648}});c.STATUS=App.Utils.makeObj(["WAITING_FOR_VERIFICATION","WAITING_FOR_SIGNATURES","SIGNED","ARCHIVED","ABANDONED","MULTICAST_PARTIAL","FORM_PROTOTYPE","FORM_PROTOTYPE_EMBEDDED","WIDGET_WAITING_FOR_VERIFICATION","PREFILL","WAITING_FOR_PAYMENT","WAITING_FOR_AUTHORING","EXPIRED","AUTHORING"]);c.USER_STATUS=App.Utils.makeObj(["WAITING_FOR_MY_SIGNATURE","OUT_FOR_SIGNATURE, SIGNED","RECALLED","HIDDEN","NOT_YET_VISIBLE","ARCHIVED","UNKNOWN","PARTIAL","FORM","WAITING_FOR_AUTHORING","WIDGET","EXPIRED","WAITING_FOR_MY_APPROVAL","OUT_FOR_APPROVAL","APPROVED","WAITING_FOR_MY_DELEGATION","WAITING_FOR_PREFILL"]);c.ROLES=App.Utils.makeObj(["PREFILL","UNASSOCIATED","SIGNER","SENDER","APPROVER","POST_SIGN","EVERYONE"]);c.PARTICIPATION_ROLES=App.Utils.makeObj(["SIGNER","APPROVER","ACCEPTOR","CERTIFIED_RECIPIENT","FORM_FILLER","DELEGATE_TO_SIGNER","DELEGATE_TO_APPROVER","DELEGATE_TO_ACCEPTOR","DELEGATE_TO_CERTIFIED_RECIPIENT","DELEGATE_TO_FORM_FILLER","NOTARY_SIGNER","ELECTRONIC_SEALER"]);c.isDelegatorRole=function(e){var d=c.PARTICIPATION_ROLES;return _([d.DELEGATE_TO_SIGNER,d.DELEGATE_TO_APPROVER,d.DELEGATE_TO_ACCEPTOR,d.DELEGATE_TO_CERTIFIED_RECIPIENT,d.DELEGATE_TO_FORM_FILLER]).contains(e)};c.SIGNATURE_FLOW=App.Utils.makeObj(["SEQUENTIAL","PARALLEL","HYBRID"]);c.TERMS_OF_USE_OPTIONS=App.Utils.makeObj(["NONE","DURING_SIGNING","BEFORE_SIGNING","FORCED_REVIEW","SHOW_NO_TERMS"]);c.TERMS_OF_USE_FLAVORS=App.Utils.makeObj(["AGREE_WHEN_SIGNING","AGREE_BEFORE_SIGNING","AGREE_BEFORE_VIEWING","CLICK_BEFORE_VIEWING","SHOW_NO_TERMS"]);App.ns("Models").Agreement=c}())}),(function(b,a){(function(){var c=Backbone.Model.extend({defaults:{pageIndex:1,imageUrl:"",pageInfo:{}}});App.ns("Models.Agreement").Page=c}())}),(function(b,a){(function(){var c=App.Models.Agreement,d;c.getService=function(){return App.Service.secureAgreementsAjaxService};d={initialize:function(){this.service=c.getService();this._super.apply(this,arguments)},service:null,idAttribute:"seriouslySecureId",getExperience:function(){return App.appView.model.get("experience")},sync:function(g,f,e){throw new Error("No Backbone sync specified for method: "+g)},areThumbnailsRasterized:function(e,f){this.service.blockingAreThumbnailsAvailableForDocument(this.get("latestDoc").seriouslySecureId,e.size,App.Service.getDWRHandler(this,f))},parse:function(g){var f=g.attributes,e=c.AttributeMask;g.shared=(f&e.SHARED)!==0;g.accountShare=(f&e.ACCOUNT_SHARE)!==0;g.esign=(f&e.ESIGN)!==0;g.isProtected=(f&e.PROTECTED)!==0;g.isSignProtected=(f&e.SIGN_PROTECTED)!==0;g.previouslySigned=(f&e.PREVIOUSLY_SIGNED)!==0;g.hasActiveReminders=(f&e.ACTIVE_REMINDERS)!==0;g.multicast=(f&e.MULTICAST)!==0;g.waitingToSignChildren=(f&e.WAITING_TO_SIGN_CHILDREN)!==0;g.isRoot=(f&e.ROOT)!==0;g.isExpired=(f&e.IS_EXPIRED)!==0;g.isMultimode=(f&e.MULTIMODE)!==0;g.esignRequireCompany=(f&e.ESIGN_REQUIRE_COMPANY)!==0;g.esignRequireJobTitle=(f&e.ESIGN_REQUIRE_JOB_TITLE)!==0;g.isApprove=(f&e.IS_APPROVE)!==0;g.isActiveForm=(f&e.IS_ACTIVE_FORM)!==0;g.isEmbeddedFormPrototype=(f&e.IS_EMBEDDED_FORM_PROTOTYPE)!==0;g.isFormPrototype=(f&e.IS_FORM_PROTOTYPE)!==0;g.isToFaxee=(f&e.TO_FAXEE)!==0;g.allowWritten=(f&e.ALLOW_WRITTEN)!==0;g.pluralPartiesOnCancel=(f&e.PLURAL_PARTIES_ON_CANCEL)!==0;g.hasFormData=(f&e.HAS_FORM_DATA)!==0;g.reusableDocumentShare=(f&e.REUSABLE_DOCUMENT_SHARE)!==0;g.previouslyAuthored=(f&e.PREVIOUSLY_AUTHORED)!==0;g.allowReplaceSigner=(f&e.ALLOW_REPLACE_SIGNER)!==0;g.allowUploadSignature=(f&e.ALLOW_UPLOAD_SIGNATURE)!==0;g.isDocumentVisibilityEnabled=(f&e.DOCUMENT_VISIBILITY_ENABLED)!==0;g.allowExpirationEditing=(f&e.ALLOW_EXPIRATION_EDITING)!==0;g.isWritten=(f&e.IS_WRITTEN)!==0;g.isListDTO=false;return g}};App.Models.Agreement=c.extend(d)}())}),(function(b,a){(function(){var c=Backbone.Model.extend({defaults:{imgUrl:"",alt:"",pageNumber:""}});App.ns("Models.Agreement").Thumb=c}())}),(function(b,a){(function(){var d=App.Models.Agreement,c;var e=function(f){this.agreement=f};e.prototype={maxPolls:100,maxErrors:3,decay:1.1,startingInterval:2000,stopped:true,currentInterval:null,currentDecay:null,errorCount:null,pollCount:null,start:function(){this.triggerEvent("thumbPoller:thumbsRequested");if(this.stopped&&this.agreement.get("latestDoc")){this.stopped=false;this.currentInterval=this.startingInterval;this.currentDecay=this.decay;this.errorCount=0;this.pollCount=0;if(this.agreement.get("latestDoc").thumbsDone){this.triggerEventAndStop("thumbsPoller:thumbsDone");return}this.checkThumbStatus()}},stop:function(){this.stopped=true},checkThumbStatus:function(){if(this.stopped){return}this.pollCount++;this.agreement.service.checkThumbStatus(this.agreement.id,this.agreement.getExperience(),{callback:_.bind(this.handleThumbStatusResult,this),errorHandler:_.bind(this.handleThumbStatusError,this)})},handleThumbStatusError:function(f){this.errorCount++;this.scheduleNextThumbStatusCheck()},handleThumbStatusResult:function(f){f=new App.Models.Agreement(f);if(f.get("errorMsg")||f.get("agrStatus")==="ABANDONED"){App.EventBus.trigger("thumbsPoller:abandoned",{conversionErrorMsg:f.get("conversionErrorMsg")});this.stop();return}if(!f.get("latestDoc").watermarked&&this.agreement.get("latestDoc").seriouslySecureId!==f.get("latestDoc").seriouslySecureId){this.triggerEvent("thumbsPoller:noChange");this.scheduleNextThumbStatusCheck();return}if(!f.get("latestDoc").thumbsDone){this.triggerEvent("thumbsPoller:noChange");this.scheduleNextThumbStatusCheck();return}this.triggerEventAndStop("thumbsPoller:thumbsDone")},scheduleNextThumbStatusCheck:function(){if(this.pollCount>=this.maxPolls){this.triggerEventAndStop("thumbsPoller:maxPolls");return}if(this.errorCount>=this.maxErrors){this.triggerEventAndStop("thumbsPoller:maxErrors");return}_.delay(_.bind(this.checkThumbStatus,this),this.getThumbPollingDecayingInterval())},getThumbPollingDecayingInterval:function(){this.currentInterval=(this.currentInterval*this.currentDecay);this.currentDecay=this.currentDecay*this.decay;return Math.round(this.currentInterval)},triggerEventAndStop:function(f){this.triggerEvent(f);this.stop()},triggerEvent:function(f){App.EventBus.trigger(f)}};c={getThumbPoller:function(){if(!this.thumbPoller){this.thumbPoller=new e(this)}return this.thumbPoller}};App.Models.Agreement=d.extend(c)}())}),(function(b,a){(function(){var c=Backbone.Model.extend({initialize:function(d){},defaults:{text:"",state:"",mode:"",direction:"",target:null}},{MODES:App.Utils.makeObj(["start","next","next_todo","continue_","noFields"])});App.ns("Models").Coachmark=c}())}),(function(b,a,c){c(0);(function(){var f=App.Models.Field,d=f.Base.prototype,e=f.FORMAT_DEFAULTS,j=f.DISPLAY_FORMAT_TYPE,i,g=[{name:"CHECKED",value:"checked"},{name:"UNCHECKED",value:"unchecked"}];f.CALCULATED=_.object(_.pluck(g,"name"),_.pluck(g,"value"));var h=["Currency","Currency(UK)"];i={previousFields:null,initCalculated:function(){if(!this.isCalculated()){return}var k=this,l;this.set("readOnly",true);this.set("required",false);this.previousFields=App.appView.fieldsViewer.values;l=this.parseCalculatedExpression();if(!l){return}_.each(l.variables(),function(n){var m=k.collection.where({name:n})[0];if(m&&(!m.isReadOnly()||m.isCalculated())){k.listenTo(m,"change:value",k.calculate)}});this.calculate()},getPostCalculationValue:function(k){return k},getCalcExpression:function(){return this.get("calculatedExpression")},getOverriddenCurrency:function(k){return(k==="MONEY_UK")?"en-GB":"en-US"},calculate:function(){var q=this.parseCalculatedExpression(),u=this,m="",o=q&&q.variables(),p={},t;if(!q){return}t=_.every(o,function(w){var v=u.collection.where({name:w})[0]||u.previousFields.where({name:w})[0];if(!v){return false}p[w]=v.getValueForCalculation();return true});usedCurrencies=this.getUsedCurrencies(o);overrideCurrency=(_.uniq(usedCurrencies).length===1);try{if(t){m=q.evaluate(p)}}catch(k){}if(m!==""){var r=this.get("displayFormatType"),s=this.get("displayFormat");if(r===j.DATE){try{var n=ParserDate.getDate(m);if(s.trim()!==""){m=n.toString(s)}else{m=n.toString(e.unspecifiedDateFormat)}}catch(l){}}else{if(r===j.NUMBER){if(overrideCurrency){NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos[this.getOverriddenCurrency(usedCurrencies[0])]}if(s.trim()!==""){m=NumberFormatter.format(m,s)}else{m=NumberFormatter.format(m,e.unspecifiedNumberFormat)}}else{if(!isNaN(m)&&(_.isString(m)||_.isNumber(m))&&NumberFormatter._cultureValue(".",".",false,false)!=="."){m=m.toString().replace(".",NumberFormatter._cultureValue(".",".",false,false))}}}}this.set("value",this.getPostCalculationValue(m))},getUsedCurrencies:function(m){var l=this;var k=[];_.each(m,function(p){var o=l.collection.findWhere({name:p})||l.previousFields.findWhere({name:p});if(o!=null){var n=o.get("validationRule");if(_.contains(h,n)){k.push(o.get("format"))}}});return k},getValueForCalculation:function(){var n=this.get("value");if(n===""){return n}var q=n,m=this.get("validationRule").toLowerCase();if(this.get("contentType")==="DATE"||this.get("displayFormatType")===j.DATE||m.indexOf("date")===0){var r=m.match(/\(([^)]+)\)/),p=this.getDateFormat(r);var k=ParserDate.getDate(n,p);if(k instanceof Date){q=ParserDate.getNumberFromDate(k,p)}}else{if(m.indexOf("zip")===-1&&m.indexOf("string")===-1&&m.indexOf("phone")===-1&&m.indexOf("social")===-1&&m.indexOf("email")===-1){try{var l=NumberFormatter.parseNumber(n);if(!isNaN(l)){if((m.indexOf("custom")===0||m.indexOf("formula")===0)&&q.indexOf("0")===0){}else{q=l}}}catch(o){}}}return q},getDateFormat:function(l){var k=this.get("displayFormat")?this.get("displayFormat"):l&&l[1];if(k==="custom"){return this.get("formatData")}else{return k}},parseCalculatedExpression:function(){var k=this.compiledCalculatedExpression;if(!k){try{k=Parser.parse(this.getCalcExpression())}catch(l){return}if(k){this.compiledCalculatedExpression=k}}return k}};_.extend(d,i)}())}),(function(b,a,c){c(0);(function(){var d=App.Models.Field,e=App.Models.Field.CONTENT_TYPE,g=new RegExp(',(?=(?:[^"]*"[^"]*")*(?![^"]*"))'),f;var h=d.CONDITIONAL=App.Utils.makeObj(["EQUALS","NOT_EQUALS","LESS_THAN","LESS_THAN_EQUALS","GREATER_THAN","GREATER_THAN_EQUALS","IN","NOT_IN","CONTAINS","NOT_CONTAINS","CHECKED","UNCHECKED","SIGNED","UNSIGNED","ATTACHED","UNATTACHED"]);f={postInit:function(){this._super();if(this.hasConditions()){this.cacheWhenFields();this.initConditionals()}},cacheWhenFields:function(){var j=this,l=this.get("conditions"),i=this.collection,k=App.appView.fieldsViewer.values;this.whenFields={};_(l).each(function(o){var n=o.whenFieldName,m=i.where({name:n})[0]||k.where({name:n})[0];if(!m){return}j.whenFields[n]=m})},initConditionals:function(){if(_.size(this.whenFields)===0){this.set("conditionState",this.showOrHide(false));return}this.registerConditionals();this.applyConditions();this.on("change:conditionState",this.onConditionalChange,this)},onConditionalChange:function(i,j){if(this.isVisible()){this.validate()}else{if(this.isTodo()){this.set("todo",0)}}},registerConditionals:function(){var i=this;_(this.whenFields).each(function(j){i.listenTo(j,"change:value",i.applyConditions);i.listenTo(j,"change:conditionState",i.applyConditions)})},applyConditions:function(){var l=this.get("conditions"),k=this.get("anyOrAll")==="ALL"?"all":"any",i=false,j=this,m;i=_(l)[k](function(r){var q=r.whenFieldName,p=j.whenFields[q]||null,n=false,o=false;if(!p){return false}n=p.evaluateCondition(r);if(p.hasConditionState()&&!p.get("conditionState")){o=j.showOrHide(n);n=o?!n:n}return n});m=this.showOrHide(i);if(!m&&(this.get("showOrHide")==="ENABLE"||this.get("showOrHide")==="DISABLE")&&this.get("contentType")===e.DATA){this.set("value",this.get("defaultValue"));this.trigger("fields:resetValue")}this.set("conditionState",m)},showOrHide:function(j){var i=this.get("showOrHide")==="SHOW"||this.get("showOrHide")==="ENABLE";return(i&&j)||(!i&&!j)},evaluateCondition:function(m){var j=App.Utils.unescape(this.getValueForCondition(m)),l=App.Utils.unescape(this.getConditionValue(m)),i=j!==undefined&&j!=="",k;switch(m.operator){case h.EQUALS:return j===l;case h.NOT_EQUALS:return j!==l;case h.LESS_THAN:return i&&+j<l;case h.LESS_THAN_EQUALS:return i&&+j<=l;case h.GREATER_THAN:return +j>l;case h.GREATER_THAN_EQUALS:return +j>=l;case h.IN:k=l.split(g);return _(k).indexOf(j)>-1;case h.NOT_IN:k=l.split(g);return _(k).indexOf(j)===-1;case h.CONTAINS:return(""+j).toLowerCase().indexOf((""+l).toLowerCase())>-1;case h.NOT_CONTAINS:return(""+j).toLowerCase().indexOf((""+l).toLowerCase())===-1}return false},getConditionValue:function(i){return i.value},getValueForCondition:function(i){return this.get("value")},hasConditionState:function(){return this.hasConditions()&&typeof this.get("conditionState")!=="undefined"}};d.Base=d.Base.extend(f)}())}),(function(b,a){(function(){var e=App.ns("Models.Field"),g="conversionStatus",d="conversionErrorMsg";var c=e.CONVERSION_STATUS=App.Utils.makeObj(["EMPTY","PREVIEW","UPLOADING","PROCESSING","FAILED","COMPLETED"]);var f=e.fields.FILE_CHOOSER=e.Base.extend({initialize:function(){this.on("change:secureId",this.onSecureIdChanged,this);var h=this.get("value");if(h){this.retrieveAutoSavedData(h)}this._super.apply(this,arguments)},retrieveAutoSavedData:function(i){try{var h=typeof i==="string"?JSON.parse(i):i;this.set("secureId",h.value);this.set("value",this.get("secureId"));this.set("fileName",h.fileName);this.setConversionStatus(c.COMPLETED)}catch(j){this.setEmpty()}},getUploadUrl:function(){return App.appView.model.get("uploadUrl")},onSecureIdChanged:function(){this.set("isUploaded",this.get("secureId")!=="")},setEmpty:function(){this.set("isUploaded",false);this.set("secureId","");this.set("fileName","");this.setConversionStatus(c.EMPTY);this.set("value","")},setUploading:function(){this.setConversionStatus(c.UPLOADING)},setProcessing:function(){this.setConversionStatus(c.PROCESSING)},setFailed:function(h){this.setConversionStatus(c.FAILED,h)},hasError:function(){return !!this.get(d)},hasTooltip:function(){return !!this.get("tooltip")},setConversionStatus:function(h,i){this.set(g,h);this.set(d,i||"");this.updateTodo();if(this.isCompleted()){this.set("value",this.get("secureId"))}},isTodo:function(){return true},updateTodo:function(){var h=0;if((this.get(g)===c.COMPLETED)||this.isReadOnly()||!this.isVisible()||(!this.isRequired()&&this.isEmpty())){h=0}else{h=1}this.set("todo",h)},validate:function(h,i){this.validationError=this._super.apply(this,arguments)||this.get("specialErrMsg");if(this.validationError){this.setConversionStatus(c.FAILED,this.validationError)}return this.validationError},isValid:function(){var h=this.get(g);return h===c.EMPTY||h===c.COMPLETED},isEmpty:function(){return this.get(g)===c.EMPTY},isUploaded:function(){return this.get("isUploaded")},isInProgress:function(){var h=this.get(g);return h===c.UPLOADING||h===c.PROCESSING},isCompleted:function(){return this.get(g)===c.COMPLETED},onValueChange:function(){},getMsg:function(){return this.get(d)},hasValidation:function(){return true},getConditionValue:function(h){return h.value.toUpperCase()},getValueForCondition:function(h){return this.isCompleted()?e.CONDITIONAL.ATTACHED:e.CONDITIONAL.UNATTACHED},defaults:App.Models.inherit("defaults",{inputType:"FILE_CHOOSER",conversionStatus:c.EMPTY,conversionErrorMsg:"",secureId:"",fileName:"",isUploaded:false}),getAutoSavedData:function(){if(!this.get("value")){return this._super()}var i={},h;h={value:this.get("value"),fileName:this.get("fileName")};i[this.get("name")]=JSON.stringify(h);return i}},{getFileTypesFilter:_.once(function(){return[{title:i18n("composePageController_allFiles"),extensions:"pdf,doc,docx,xls,xlsx,ppt,pptx,wpd,rtf,txt,htm,html,bmp,jpg,jpeg,gif,png,tif,tiff"},{title:i18n("composePageController_pdfFiles"),extensions:"pdf"},{title:i18n("composePageController_officeFiles"),extensions:"doc,docx,xls,xlsx,ppt,pptx,wpd,rtf"},{title:i18n("composePageController_textFiles"),extensions:"txt"},{title:i18n("composePageController_webFiles"),extensions:"htm,html"},{title:i18n("composePageController_imageFiles"),extensions:"bmp,jpg,jpeg,gif,png,tif,tiff"}]}),getAvailableRunTimes:_.once(function(){return"html5, html4"})})}())}),(function(b,a){(function(){var d=App.ns("Models.Field");var c=d.fields.CHECKBOX=d.Base.extend({initialize:function(){this._super.apply(this,arguments);this.initializeCheckboxOptions()},initializeCheckboxOptions:function(){var f=this.get("hiddenOptions"),e=this.get("value")||"";if(!f||f.length===0){this.set("hiddenOptions",[!this.isChecked()?"yes":e])}},isChecked:function(f){var e=f?"defaultValue":"value";return c.ACCEPTABLE_UNCHECKED_VALUES.indexOf(this.get(e).toLowerCase())<0},isEmpty:function(){return !this.isChecked()},getHiddenValue:function(){return this.get("hiddenOptions")[0]||""},getConditionValue:function(e){return e.value.toUpperCase()},getValueForCondition:function(e){return this.isChecked()?d.CONDITIONAL.CHECKED:d.CONDITIONAL.UNCHECKED},getValueForCalculation:function(){return this.isChecked()?d.CALCULATED.CHECKED:d.CALCULATED.UNCHECKED},getPostCalculationValue:function(e){return e===true?this.getHiddenValue():""},defaults:App.Models.inherit("defaults",{inputType:"CHECKBOX",hiddenOptions:["Yes"],radioCheckType:"CHECK",borderWidth:1,borderColor:-16777216,bckgroundColor:"#FFFFFF"})},{ACCEPTABLE_UNCHECKED_VALUES:["no","false","0","off","unchecked",""]})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.PDF_SIGNATURE=c.Base.extend({initialize:function(){var e=this.isDigSigRemoteSigning()?i18n("esign_digital_signature_tooltip"):i18n("esign_digsig_sigApplied_local_tooltip");this._super.apply(this,arguments);this.is_signed=this.isDigSigRemoteSigning()?false:true;this.collection.digitalSignatureFieldPresent=true;if(this.isDigSigRemoteSigning()){this.set("required",true);this.set("optionalSignatureOrInitials",false);this.set("requiredSignatureOrInitials",true);if(App.appView.is_esign){var d=this;this.sigData=App.appView.getSignatureModel();_(App.Models.Signature.prototype).chain().keys().reject(function(f){return f in d||!_.isFunction(d.sigData[f])}).each(function(f){d[f]=_.bind(d.sigData[f],d.sigData)})}}this.set("tooltip",e)},isDigSigRemoteSigning:function(){return App.appView.model.isDigSigRemoteSigning&&App.appView.model.isDigSigRemoteSigning()},canAutoSave:function(){return false},isEmpty:function(){return !this.is_signed},getSignatureData:function(){var e=App.appView.getSignatureModel(),d=App.Models.Signature.TYPE;switch(e.get("type")){case d.IMAGE:return e.get("data");case d.SCRIBBLE:return e.get("data");case d.TYPED:return e.get("name");default:return""}},addData:function(d,e,f){if(this.isDigSigRemoteSigning()){d[f]=App.appView.model.get("isDigitalSignatureSigningRemotely")?"REMOTE":"LOCAL";if(App.appView.model.get("isUIDSigning")){d.echosign_signature_uidsign_signer=e.get("name")}}else{d[f]=e.get("name")}d[f+"_SCRIBBLE"]=(e.isScribble()||e.isImage())?e.get("data"):"";d[f+"_SCRIBBLE_ID"]=""},getSubmitData:function(){if(this.is_signed&&!this.isDigSigRemoteSigning()){return{}}var d=this._super(),e=this.sigData,f=this.get("name");this.addData(d,e,f);if(this.is_initials&&f!==this.INITIALS_FIELD_KEY){f=this.INITIALS_FIELD_KEY;this.addData(d,e,f)}return d},isRequired:function(){return this.isDigSigRemoteSigning()?this._super():false},getTodoType:function(){return this.isDigSigRemoteSigning()?App.Models.Field.TODO.signature:""},hasSignature:function(){return this.isDigSigRemoteSigning()?this.isValid():false},defaults:App.Models.inherit("defaults",{})})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.DROP_DOWN=c.Base.extend({initialize:function(){this._super();var e=_.map(this.get("hiddenOptions"),App.Utils.unescape),d=_.map(this.get("visibleOptions"),App.Utils.unescape);this.set("hiddenOptions",e);this.set("visibleOptions",d)},hasOptions:function(){return this.get("hiddenOptions").length>0},hasExportValues:function(){return this.hasOptions()&&!_.isEqual(this.get("visibleOptions"),this.get("hiddenOptions"))},defaults:App.Models.inherit("defaults",{inputType:"DROP_DOWN",defaultValue:"",hiddenOptions:[],visibleOptions:[]})})}())}),(function(b,a){(function(){var d=App.Models.Field,c=App.Models.Field.CONVERSION_STATUS;d.fields.INLINE_IMAGE=d.fields.FILE_CHOOSER.extend({constructor:function(e,g){var f=this._getFieldFromContentType(e,g);if(f){return f}d.Base.apply(this,arguments)},_getFieldFromContentType:function(e,g){var f=null;if(e){if(e.contentType==="SIGNATURE"){f=new d.fields.SIGNATURE(e,g)}}return f},retrieveAutoSavedData:function(f){var e;try{e=typeof f==="string"?JSON.parse(f):f;this.set("secureId",e.value);this.set("fileName",e.fileName)}catch(g){this.setEmpty()}},hasSecureId:function(){return this.get("secureId")!==""},setPreview:function(){this.setConversionStatus(c.PREVIEW)},getAutoSavedData:function(){return this.getSubmitData()},getSubmitData:function(){var f,e={};if(!this.get("value")){e[this.get("name")]=""}else{f={value:this.get("value"),inputType:this.get("inputType")};e[this.get("name")]=JSON.stringify(f)}return e},defaults:App.Models.inherit("defaults",{inputType:"INLINE_IMAGE"})})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.LINK=c.Base.extend({is_link:true,getSubmitData:function(){if(App.appView.model.get("isRequiredHyperlinkAvailable")){return this._super()}else{return{}}},isTabable:function(){return false},toJSON:function(){var d=this._super();return _.omit(d,["hiddenOptions","visibleOptions"])},defaults:App.Models.inherit("defaults",{inputType:"LINK",URL:"",linkType:"EXTERNAL",contentType:"LINK",destinationLocation:{height:0,left:0,page:0,top:0,width:0}})})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.RADIO=c.Base.extend({defaults:App.Models.inherit("defaults",{inputType:"RADIO",hiddenOptions:["0"],borderWidth:1,borderColor:-16777216,backgroundColor:"#FFFFFF"})})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.SIGNATURE=c.Base.extend({SIGNATURE_FIELD_KEY:"echosign_signature",INITIALS_FIELD_KEY:"echosign_initials",STAMP_FIELD_KEY:"echosign_signatureStampImage",initialize:function(){this.is_signature=(this.get("inputType")==="SIGNATURE"&&this.get("contentType")==="SIGNATURE");this.is_initials=this.get("contentType")==="SIGNER_INITIALS";this.is_stamp=(this.get("inputType")==="INLINE_IMAGE"&&this.get("contentType")==="SIGNATURE");this._super.apply(this,arguments);_(this.get("locations")).each(function(d){d.is_signed=false});if(!this.is_initials&&!this.is_stamp){this.collection.signatureFieldPresent=true}if(App.appView.is_esign){this.sigData=this.is_initials?App.appView.getInitialsModel():(this.is_stamp?App.appView.getStampModel():App.appView.getSignatureModel());this.addEsignHelpers()}},getStampData:function(){var e=this.sigData,d=App.Models.Signature.TYPE;switch(e.get("type")){case d.IMAGE:return e.get("data");default:return""}},hasTooltip:function(){return !!this.get("tooltip")},addEsignHelpers:function(){var d=this;if(!App.Models.Signature){return}_(App.Models.Signature.prototype).chain().keys().reject(function(e){return e in d||!_.isFunction(d.sigData[e])}).each(function(e){d[e]=_.bind(d.sigData[e],d.sigData)})},isAnySigned:function(){return _(this.get("locations")).any(function(d){return d.is_signed})},isSignedAt:function(d){var e=this.get("locations");return e.length>0?e[d||0]["is_signed"]:this.get("value").trim()!==""},canAutoSave:function(){return false},getConditionValue:function(d){return d.value.toUpperCase()},getValueForCondition:function(d){return this.isSignedAt(d.whenFieldLocationIndex)?c.CONDITIONAL.SIGNED:c.CONDITIONAL.UNSIGNED},isEmpty:function(){return this.getEmptyCount()!==0},getEmptyCount:function(){return _(this.get("locations")).reduce(function(e,d){return e+(d.is_signed?0:1)},0)},updateTodo:function(){if(!this.isTodo()){return}this.set("todo",this.getEmptyCount())},getSignatureData:function(){var e=this.sigData,d=App.Models.Signature.TYPE;switch(e.get("type")){case d.IMAGE:return e.get("data");case d.SCRIBBLE:return e.get("data");case d.TYPED:return e.get("name");default:return""}},addData:function(d,e,f){d[f]=e.get("name");d[f+"_SCRIBBLE"]=(e.isScribble()||e.isImage())?e.get("data"):"";d[f+"_SCRIBBLE_ID"]=""},getSubmitData:function(){if(!this.isAnySigned()){return{}}var d=this._super(),e=this.sigData,f=this.get("name");this.addData(d,e,f);if(this.is_signature&&f!==this.SIGNATURE_FIELD_KEY){f=this.SIGNATURE_FIELD_KEY;this.addData(d,e,f)}if(this.is_initials&&f!==this.INITIALS_FIELD_KEY){f=this.INITIALS_FIELD_KEY;this.addData(d,e,f)}if(this.is_stamp&&f!==this.STAMP_FIELD_KEY){f=this.STAMP_FIELD_KEY;this.addData(d,e,f)}return d},defaults:App.Models.inherit("defaults",{})})}())}),(function(b,a){(function(){var c=App.ns("Models.Field");c.fields.BLOCK=c.Base.extend({defaults:App.Models.inherit("defaults",{inputType:"BLOCK",contentType:"SIGNATURE_BLOCK",required:true})})}())}),(function(b,a){(function(){var d=App.ns("Models.Field"),e=d.CONTENT_TYPE,f=d.DISPLAY_FORMAT_TYPE,c=d.FORMAT_DEFAULTS;d.fields.TEXT_FIELD=d.Base.extend({initialize:function(){this._super.apply(this,arguments);var h=this.get("contentType"),g;switch(h){case e.SIGNATURE_DATE:this.is_signerDate=true;g=(this.get("displayFormatType")===f.DATE&&this.get("displayFormat"))||c.unspecifiedDateFormat;this.set("value",new Date().toString(g));break;case e.SIGNER_NAME:if(App.appView.is_esign){App.appView.getSignatureModel().set("name",this.get("value"),{silent:true});if(!this.isReadOnly()){this.on("change:value",function(j,i){App.appView.getSignatureModel().set("name",i)})}}break;case e.SIGNER_EMAIL:if(App.appView.model.get("widget")&&App.appView.is_esign){if(!this.hasValidation()){this.set(d.VALIDATION.types.email);this.todoType=this.getTodoType()}if(this.get("value")){App.appView.getSignatureModel().set("email",this.get("value"))}if(!this.isReadOnly()){this.on("change:value",function(j,i){App.appView.getSignatureModel().set("email",i)})}}break}this.is_signerName=h===e.SIGNER_NAME||h===e.SIGNER_FIRST_NAME||h===e.SIGNER_LAST_NAME},postInit:function(){if(App.appView.is_esign&&this.is_signerName&&(this.collection.signatureFieldPresent||(App.appView.model.isWrittenRequired()&&(App.appView.model.get("kbaTransactionId")!==""||App.appView.model.get("webIdentityId")!=="")))){this.set("required",false);this.set("readOnly",true);this.todoType=this.getTodoType()}this._super()},getValueForCondition:function(m){var j=this.get("value"),l=m.value,i=j!==undefined&&j!=="",k=l!==undefined&&l!=="",g=j;if(i&&k&&this.get("displayFormatType")===d.DISPLAY_FORMAT_TYPE.NUMBER){try{g=NumberFormatter.parseNumber(j)}catch(h){g=j}}return g},getConditionValue:function(m){var j=this.get("value"),l=m.value,i=j!==undefined&&j!=="",k=l!==undefined&&l!=="",g=l;if(i&&k&&this.get("displayFormatType")===d.DISPLAY_FORMAT_TYPE.NUMBER){try{g=NumberFormatter.parseNumber(l)}catch(h){g=l}}return g},defaults:App.Models.inherit("defaults",{inputType:"TEXT_FIELD"})})}())}),(function(b,a,c){c(0);(function(){var i=App.Models.Field,j=i.FORMAT_DEFAULTS,f=i.DISPLAY_FORMAT_TYPE,l=i.VALIDATION={},e;l.types={email:{validationRule:"Email Address",errorMsg:"js.error_email_field"}};l.Fn={REGEX:function(n,o){o=h(o);return(new RegExp(o)).test(n)},MIN:function(o,n){return g(o)>=n},MAX:function(o,n){return g(o)<=n},RANGE:function(p,o,n){if(this.isPaymentField()){p=d(p,this.get("paymentAmountFormat"))}else{p=g(p)}return p>=o&&p<=n},MAX_LENGTH:function(o,n){return o.length<=n},FORMAT:function(o){var n=this.get("validationRule");if(n==="Date(Custom)"){return l.Fn.CUSTOM_DATE.apply(this,arguments)}return true},FORMULA:function(s,t){var q={fieldvalue:s,signingdate:Math.floor(ParserDate.getNumberFromDate(new Date()))},n="";try{try{n=Parser.evaluate(t,q)}catch(p){var o=ParserDate.getDate(s);if(o instanceof Date){q.fieldValue=ParserDate.getNumberFromDate(o);n=Parser.evaluate(t,q)}}var r=n.toString().toLowerCase();return r==="true"||r==="yes"||r==="1"}catch(p){}return true},CUSTOM_DATE:function(o,p){var n=Date.parseExact(o,k(p));return n&&(n.toString(p||j.unspecifiedDateFormat)===o)}};function d(n,o){switch(o){case"PaymentFormatUS":case"PaymentFormatIN":n=m(n,",","\\.");break;case"PaymentFormatEU":n=m(n,"\\.",",");break;case"PaymentFormatFR":n=m(n," ",",");break;case"PaymentFormatCH":n=m(n,"'",",");break;default:n=g(n);break}return n}function m(p,o,n){p=p.replace(new RegExp(o,"g"),"");p=+(p.replace(new RegExp(n,"g"),"."));return p}function g(n){return +(n.replace(/[^0-9.-]+/g,""))}function k(n){return(n||"").replace(/m/g,"M").replace(/n/g,"m").replace(/z/g,"")}function h(p){var o="ESBracketProtectionForJSON";var n=p;if(n&&n.indexOf(o)===0){n=n.substring(o.length)}return n}l.Rules={validationRule:{ignoreVal:"",fn:function(n,o){if(o==="Email Address"){return App.Utils.isValidEmail(n)}return true},msg:""},regEx:{ignoreVal:"",fn:l.Fn.REGEX,msg:""},minNumberValue:{ignoreVal:-1,fn:l.Fn.MIN,msg:"esign_min_range_validation"},maxNumberValue:{ignoreVal:-1,fn:l.Fn.MAX,msg:"esign_max_range_validation"},maxLength:{ignoreVal:-1,fn:l.Fn.MAX_LENGTH,msg:"error_maxlength_string_field"},formatData:{ignoreVal:-1,fn:l.Fn.FORMAT,msg:function(){var o=this.get("validationRule");if(o==="Date(Custom)"){var p=arguments[0]||j.unspecifiedDateFormat,n=(new Date()).toString(p);return i18n("error_date_custom_field",p,n)}return""}},specialFormula:{ignoreVal:"",fn:l.Fn.FORMULA,msg:""},Range:{attr:["minNumberValue","maxNumberValue"],fn:l.Fn.RANGE,msg:"esign_range_validation"}};e={initialize:function(n,o){this._super();this.validationKey=(o&&o.validationKey)||"value";this.validateReadOnly=(o&&o.validateReadOnly)||false;this.on("change:value",this.onValueChange,this)},onValueChange:function(n,o){if(this.todoType===i.TODO.required_invalid&&(this.isEmpty()||this.previous("value")==="")){this.attributes.todo=i.TODO.transition}},validate:function(t,z){if(t){return this._super.apply(this,arguments)}if((!z||z.doFormat)&&(!this.isReadOnly()||this.validateReadOnly)&&!this.isEmpty()){v=this.formatValue();this.validationError=v}if(v||!this.isVisible()||!this.hasValidation()||(this.isReadOnly()&&!this.validateReadOnly)||this.isEmpty()){return this._super.apply(this,arguments)||v}var w=this.get("validationRule"),q=this.validationKey,n=this.get(q),u=l.Rules.Range.attr,s=false,r=this,v="",y,p=_(["Custom","Formula"]),o=_(r.attributes).chain(),x=_(l.Rules).chain();y=x.pick(u).all(function(B,A){return r.has(A)&&r.get(A)!==B.ignoreVal}).value();if(y){x=x.omit(u)}else{x=x.omit("Range")}s=x.any(function(D,B){var C=[];if(D.attr){C=o.pick(D.attr).values().value()}else{if(!r.has(B)||(C=[r.get(B)])[0]===D.ignoreVal){return}}if(D.fn&&!D.fn.apply(r,[n].concat(C))){var A=r.getMsg(D)||_.identity;if(p.indexOf(w)!==-1){v=r.getSpecialMsg()}else{v=A.apply(r,C)}return true}}).value();this.validationError=v;this.set("validated",!s,z||{});return this._super.apply(this,arguments)||v},formatValue:function(){var r=this.validationKey,v=this.hasFormatting(),p=this.get(r),t="";if(p!==""&&v){var s=this.get("displayFormatType"),u=this.get("displayFormat");if(u==="Custom"){u=""}if(s===f.DATE){try{var q=ParserDate.getDate(p);if(u.trim()!==""){p=q.toString(u)}else{p=q.toString(j.unspecifiedDateFormat)}}catch(o){t=i18n("error_date_field")}}else{if(s===f.NUMBER){if(u.trim()!==""){p=NumberFormatter.format(p,u)}else{p=NumberFormatter.format(p,j.unspecifiedNumberFormat)}try{NumberFormatter.parseNumber(p)}catch(n){t=i18n("error_number_field")}}else{if(!isNaN(p)&&(_.isString(p)||_.isNumber(p))&&NumberFormatter._cultureValue(".",".",false,false)!=="."){p=p.toString().replace(".",NumberFormatter._cultureValue(".",".",false,false))}}}}if(!t){this.set("formatted",true);this.set(r,p)}else{this.set("formatted",false)}return t},getMsg:function(o){var p=o.msg;if(!p){try{p=this.get("errorMsg");p&&(p=p.split(".")[1])}catch(n){}}return p&&i18n.curry(p)},getSpecialMsg:function(){return this.get("specialErrMsg")||i18n("error_custom_field_default")}};i.Base=i.Base.extend(e)}())}),(function(b,a){(function(){var c=Backbone.Collection.extend({model:App.Models.Agreement.Page});App.ns("Collections.Agreement").PageList=c}())}),(function(b,a){(function(){var c=Backbone.Collection.extend({model:App.Models.Agreement.Thumb});App.ns("Collections.Agreement").ThumbList=c}())}),(function(b,a){(function(){var d=App.Models.Field,f=App.Models.Field.CONTENT_TYPE;var c=function(g,h){var k=new App.Collections.FieldList.Base(),i={collection:k,validationKey:App.appView.is_authoring?"defaultValue":"value",validateReadOnly:App.appView.is_authoring};_([].concat(g||[],h||[])).each(function(m){if(m.hidden&&!App.appView.is_authoring){return}var l=new d(m,i);if(!l){return}k.add(l,{validate:false,postInit:false,sort:false})});k.has_fields=(k.size()-(h||[]).length)>0;if(App.appView.is_esign){k.invoke("initCalculated")}k.invoke("postInit");k.calcTabOrder();k.calcTodoList();k.on("change:todo",k.onTodoChange,k);var j=k.filter(function(l){return !l.isVisible()||l.isReadOnly()});k.visible_fields=k.size()-(h||[]).length-j.length;k.on("change:conditionState",k.onConditionStateChange,k);if(k.size()>0){App.EventBus.on("agreementView:contentRendered",function(){k.onTodoChange(true)},k)}if(App.appView.is_esign&&App.appView.model.isSaveEnabled()){k.on("change:value",k.triggerSave,k)}return k};c.Base=Backbone.Collection.extend({model:d.Base,startTabIndex:1,todos:{},is_autosaved:false,dataSaveCounter:0,initialize:function(){this._init();this.on("add",this.onAdd,this);this.on("change:name",this.onRename,this);this.on("remove",this.onRemove,this);this.on("reset",this.onReset,this)},_init:function(){this.fieldCache={};this.pageFieldsCache={};this.tabIndex=this.startTabIndex;this.signatureFieldPresent=false;this.hasRequiredFields=false;this.digitalSignatureFieldPresent=false},onAdd:function(h,i,g){this.fieldCache[h.get("name")]=h;_(h.get("locations")).each(function(l,j){var k=l.page;if(!(k in i.pageFieldsCache)){i.pageFieldsCache[k]=[]}i.pageFieldsCache[k].push({model:h,locationIndex:j})});if(g.postInit!==false&&h.postInit){h.postInit()}if(g.validate!==false){if(h.isVisible()){h.validate()}}if(h.isRequired()){this.hasRequiredFields=true}},onRemove:function(g){delete this.fieldCache[g.get("name")];this.onTodoChange()},onRename:function(g,h){delete this.fieldCache[g.previous("name")];this.fieldCache[h]=g},onReset:function(){this._init();_(this.models).each(this.onAdd,this)},onTodoChange:function(g){this.mapTodos();App.EventBus.trigger("fields:requiredFields",this.todos,this.getTodoCount(),g===true)},onConditionStateChange:function(g,h){h?this.visible_fields++:this.visible_fields--},triggerSave:function(g){if(g&&g.canAutoSave()){App.EventBus.trigger("esignView:saveAgreement",g)}},mapTodos:function(){var h=d.TODO_TYPES,g=_.object(h,_.map(_(h.length).times(_.identity),Number.prototype.valueOf,0));this.each(function(i){var j=i.getMappedTodoType();if(!j){return}g[j]+=i.get("todo")});this.todos=g},getTodoCount:function(){return _.reduce(_.values(this.todos),function(g,h){return g+h},0)},isDone:function(){return this.getTodoCount()===0},getField:function(g){return this.fieldCache[g]},getFieldsForPage:function(g){return g in this.pageFieldsCache?this.pageFieldsCache[g]:[]},calcTodoList:function(){this.each(function(g){g.validate()})},calcTabOrder:function(i){i&&(this.startTabIndex=i);var g=this.startTabIndex,h=this;_(this.pageFieldsCache).chain().keys().sortBy(Number).each(function(k){var j=h.getFieldsForPage(k);g+=h.calcTabOrderForPage(k,g);h.pageFieldsCache[k]=_(j).sortBy("tabIndex")});this.tabIndex=g},calcTabOrderForPage:function(j,k){var i=[],h=k||1,g=this.getFieldsForPage(j);_(g).each(function(m,l){var n=m.model.get("locations")[m.locationIndex];i.push({top:n.top,left:n.left,order:l})});_(i.sort(e)).each(function(l){var n=g[l.order],m=n.model,o;o=m.get("locations")[n.locationIndex];o.tabIndex=h++;n.tabIndex=o.tabIndex});return h-(k||1)},getFirstTabIndex:function(){return this.startTabIndex},getLastTabIndex:function(){return this.tabIndex-1},getFieldData:function(l){var j={},i=l?"getSubmitData":"getAutoSavedData",h=App.appView.model.get("optionalWrittenActive"),g=this,k;this.each(function(m){if(!m.canSubmit()){return}k=m.get("contentType");if(!h||(h&&!(g.isInvalidFieldForWrittenSignatures(k)))){_.extend(j,m[i]())}});if(App.appView.is_esign){if(App.appView.model.shouldCollectSignerName()){j.echosign_name=App.appView.getSignatureModel().get("name")}if(App.appView.model.shouldCollectSignerEmail()){j.echosign_email=App.appView.getSignatureModel().get("email")}}return j},getSubmitData:function(){return this.getFieldData(true)},getAutoSavedData:function(){return this.getFieldData(false)},isInvalidFieldForWrittenSignatures:function(g){return g===f.SIGNATURE||g===f.SIGNER_INITIALS||g===f.DIGITAL_SIGNATURE||g===f.SIGNATURE_STAMP||g===f.SIGNATURE_BLOCK||g===f.SIGNATURE_DATE}});function e(h,g){var i=Math.abs(parseFloat(h.top-g.top));if(i<8){return h.left<g.left?-1:1}return h.top<g.top?-1:1}App.ns("Collections").FieldList=c}())}),(function(b,a){(function(){var d=App.Models.Field,c="___inputType";var e=function(f){var h=new Backbone.Collection([],{model:d.Base}),g={collection:h};_(f||[]).each(function(n,k){if(k.indexOf(c)>-1){return}var l=k+c,m=f[l],j={name:k,inputType:m,value:n,readOnly:true};var i=new d(j,g);if(m==="FILE_CHOOSER"&&n){i.set("conversionStatus","COMPLETED")}h.add(i,{validate:false})});return h};App.ns("Collections").ValuesList=e}())}),(function(b,a){(function(){var c={};c.container=_.template('<div class="container-fluid pdf" unselectable="on">         <div id="aria-actions" class="hidden-accessible" role="log" aria-live="polite"></div>        <div id="banner-container" aria-live="polite"></div>        <div id="document" class="clearfix"></div>    <div>');c.sideBar=_.template('<div id="es-sidebar-offcanvas" class="row-offcanvas row-offcanvas-left es-sidebar-offcanvas">       <div id="es-sidebar-container" class="sidebar-offcanvas" role="dialog"></div>     </div>');c.header=_.template('<div class="container-fluid agreement-band navbar navbar-default light-ui">     <div class="agreement-band-inner">      <div class="row">        <div class="col-xl-3 col-lg-3 col-md-2 col-sm-3 col-3 agreement-container"></div>        <div class="col-xl-5 col-lg-3 col-md-4 {{isMobile ? "col-sm-3 col-3" : "col-sm-4 col-4"}} agreement-name-container">        <p class="agreement-name pull-left" role="heading" aria-level="1"><span class="title">{{ agreementTitle }}</span></p>        </div>        <div class="col-xl-4 col-lg-6 col-md-6 {{isMobile ? "col-sm-6 col-6" : "col-sm-5 col-5"}} agreement-req-info"></div>      </div>    </div>    </div>');c.HUDPageNumber=_.template('<input type="text" class="hud-current-num" value="1" aria-label="{{ pageLabel }}"/><span class="hud-separator"> / </span><span class="hud-totalpage-count"> {{ totalCount }} </span>');c.HUDSeparator=_.template('<div class="hud-divider" role="separator"></div>');c.coachmark=_.template('<button class="popover" role="link" tabindex="0">      <div class="arrow"></div>      <div class="popover-body"></div>    </button>');c.coachmarkMobile=_.template('<button class="popover back" role="link" tabindex="0">      <div class="arrow"></div>      <div class="popover-body"></div>    </button>    <button class="popover" role="link" tabindex="0">      <div class="arrow"></div>      <div class="popover-body"></div>    </button>');App.Templates.Agreement=_.extend(App.Templates.Agreement||{},c)}())}),(function(b,a){(function(){var c={};c.span=_.template('<span class="hidden-accessible">{{% text }}</span>');c.label=_.template('<label class="hidden-accessible" for="{{ forId }}">{{% text }}</label>');App.ns("Templates").HiddenAccessible=c}())}),(function(b,a){(function(){var c={};c.viewTemplate=_.template('    <!-- Modal -->    <style>        #mobile-modal-iframe {            display: block;            height: calc(100vh - 48px);            width: 100vw;            border: 0px;            overflow-y: scroll;        }    </style>    <div class="modal" id="mobile-modal-dialog" tabindex="-1" role="dialog" aria-labelledby="modal-label" style="position: fixed; top: 0px; right: 0; bottom: 0; left: 0;">        <div class="modal-dialog" role="document" style="top: 0px; position: fixed; margin: 0; width: 100%; height: 100%; padding: 0;">            <div class="modal-content" style="position: absolute; top: 0; right: 0; bottom: 0; left: 0; padding:0;">                <div id="header" class="navbar fixed-top">                    <div class="container-fluid es-header">                        <div id="echo-nav-header" class="nav-clearfix">                            <div class="banner-bar" role="banner">                                <div class="dfl-mobile-header"></div>                            </div>                        </div>                    </div>                </div>                <div id="mobile-frame" style="margin-top:48px; height:100%;"> </div>            </div>        </div>    </div>');App.Templates.FormsModalViewer=_.extend(App.Templates.FormsModalViewer||{},c)}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"hud-download-btn",tagName:"button",attributes:{"data-analytics-click":"preSignPdf"},events:{click:"downloadPDF",mouseenter:"showTooltip",mouseleave:"hideTooltip"},initialize:function(){var d=i18n("esign_HUD_download");if(!App.Env.feature.isMobileBrowser){this.$el.tooltip({animation:true,placement:"top",title:d,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:d}))}else{this.$el.off("mouseenter mouseleave")}},downloadPDF:function(f){f.preventDefault();var d=this.model.get("agreement").get("openPDFUrl");window.open(d).focus()},showTooltip:function(){this.$el.tooltip("show")},hideTooltip:function(){this.$el.tooltip("hide")}});App.ns("Views.Agreement.HUD").DownloadBtn=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"hud-pagedown-btn",tagName:"button",attributes:{"data-analytics-click":"down"},events:{click:"pageDown",mouseenter:"showTooltip",mouseleave:"hideTooltip",blur:"hideTooltip"},appEvents:{"toolbarView:currentPage":"setCurrentPage","toolbarView:enablePageDown":"enablePageDown"},keyEvents:{pagedown:"pageDown","shift+pagedown":"lastPage",end:"lastPage"},initialize:function(){var d=i18n("esign_HUD_pageDown");this.totalPages=getAppViewHelper(this.options).getVisiblePageCount();if(!App.Env.feature.isMobileBrowser){this.$el.tooltip({animation:true,placement:"top",title:d,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:d}))}else{this.$el.off("mouseenter mouseleave")}},pageDown:function(d){if(d&&d.shiftKey){this.lastPage();return}this.currentPage++;if(this.isPageDownEnabled()){getAppViewHelper(this.options).scrollToPage(this.currentPage);App.EventBus.trigger("aria:action",this.currentPage===this.totalPages?i18n("agreement_hud_last_page",this.currentPage):i18n("agreement_hud_nav_page",this.currentPage))}},lastPage:function(){this.currentPage=this.totalPages-1;this.pageDown()},setCurrentPage:function(d){this.currentPage=d.currentPage;if(this.currentPage===this.totalPages){this.disablePageDown()}else{this.enablePageDown()}},isPageDownEnabled:function(){var d=true;if(this.currentPage>this.totalPages){d=false;this.disablePageDown();this.currentPage=this.totalPages}else{App.EventBus.trigger("toolbarView:enablePageUp")}return d},enablePageDown:function(d){this.$el.removeClass("disable").removeAttr("aria-disabled")},disablePageDown:function(){this.$el.addClass("disable").attr("aria-disabled",true);this.hideTooltip()},showTooltip:function(){this.currentPage!==this.totalPages&&this.$el.tooltip("show")},hideTooltip:function(){this.$el.tooltip("hide")}});App.ns("Views.Agreement.HUD").PageDown=c}())}),(function(b,a){(function(){var d=App.Utils.KEY;var c=Backbone.View.extend({className:"hud-pagenum",tagName:"div",events:{"keydown .hud-current-num":"onKeydown"},appEvents:{"toolbarView:currentPage":"setCurrentPage"},keyEvents:{"numbers g":"onShortcut"},onShortcut:function(h,g,f){this.scrollToPageNum(f)},initialize:function(){this.totalPages=getAppViewHelper(this.options).getVisiblePageCount()},setCurrentPage:function(e){this.currentPage=e.currentPage;this.$pageInput=this.$(".hud-current-num");this.$pageInput.val(this.currentPage)},onKeydown:function(h){var f=parseInt(this.$(".hud-current-num").val()),g=-1;if(!_.isNaN(f)&&d.isUpDownArrow(h)){h.preventDefault();switch(h.which){case d.UP:if(f>1){g=f-1}break;case d.DOWN:if(f<this.totalPages){g=f+1}break}}if(d.isEnter(h)||d.isTab(h)||d.isUpDownArrow(h)){if(_.isNaN(f)||(f===this.currentPage&&g===-1)){this.$(".hud-current-num").val(this.currentPage);g=this.currentPage}else{if(f>this.totalPages){this.$(".hud-current-num").val(this.totalPages);g=this.totalPages}else{if(f<1){this.$(".hud-current-num").val(1);g=1}}}if(g!==f){if(g===-1){g=f}this.scrollToPageNum(g)}ScAnalytics.logEvent(["pgNum"])}},scrollToPageNum:function(e){getAppViewHelper(this.options).scrollToPage(e);if(e>1){App.EventBus.trigger("toolbarView:enablePageUp")}if(e<this.totalPages){App.EventBus.trigger("toolbarView:enablePageDown")}},render:function(){this.$el.html(App.Templates.Agreement.HUDPageNumber({totalCount:this.totalPages,pageLabel:i18n("specific_page","")}));this.$el.parent().append(App.Templates.Agreement.HUDSeparator);return this}});App.ns("Views.Agreement.HUD").PageNumber=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"hud-pageup-btn",tagName:"button",attributes:{"data-analytics-click":"up"},events:{click:"pageUp",mouseenter:"showTooltip",mouseleave:"hideTooltip",blur:"hideTooltip"},appEvents:{"toolbarView:currentPage":"setCurrentPage","toolbarView:enablePageUp":"enablePageUp"},keyEvents:{pageup:"pageUp","shift+pageup":"firstPage",home:"firstPage"},initialize:function(){var d=i18n("esign_HUD_pageUp");if(!App.Env.feature.isMobileBrowser){this.$el.tooltip({animation:true,placement:"top",title:d,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:d}))}else{this.$el.off("mouseenter mouseleave")}},pageUp:function(d){if(d&&d.shiftKey){this.firstPage();return}this.currentPage--;if(this.isPageUpEnabled()){getAppViewHelper(this.options).scrollToPage(this.currentPage);App.EventBus.trigger("aria:action",this.currentPage===1?i18n("agreement_hud_first_page",this.currentPage):i18n("agreement_hud_nav_page",this.currentPage))}},firstPage:function(){this.currentPage=2;this.pageUp()},setCurrentPage:function(d){this.currentPage=d.currentPage;if(this.currentPage===1){this.disablePageUp()}else{this.enablePageUp()}},isPageUpEnabled:function(){var d=true;if(this.currentPage<=0){d=false;this.disablePageUp();this.currentPage=1}else{App.EventBus.trigger("toolbarView:enablePageDown")}return d},enablePageUp:function(d){this.$el.removeClass("disable").removeAttr("aria-disabled")},disablePageUp:function(){this.$el.addClass("disable").attr("aria-disabled",true);this.hideTooltip()},showTooltip:function(){this.currentPage!==1&&this.$el.tooltip("show")},hideTooltip:function(){this.$el.tooltip("hide")}});App.ns("Views.Agreement.HUD").PageUp=c}())}),(function(b,a){(function(){var g=false,h=false,e=false,f=false,c=App.Utils.KEY;var d=Backbone.View.extend({className:"hud-container",template:"<div class='hud-toolbar' role='toolbar'><% if (showClose) { %><button class='hud-close-btn' data-analytics-click='closeHud'></button><% } %></div>",SHOW_DELAY:500,HIDE_DELAY:1000,SHOW_DELAY_TOU:1000,FADE_DURATION:500,TRANSPARENT_HUD_HEIGHT:"50px",events:{"keydown button":"handleToolbarArrowKey"},appEvents:{"toolbarView:currentPage":"setCurrentPage"},initialize:function(){if(this.options.SHOW_DELAY){this.SHOW_DELAY=this.options.SHOW_DELAY}if(this.options.TRANSPARENT_HUD_HEIGHT){this.TRANSPARENT_HUD_HEIGHT=this.options.TRANSPARENT_HUD_HEIGHT}if(!App.Env.feature.isMobileBrowser){this.listenTo(App.EventBus,{"toolbarView:hideHUD":this.hideHUD,"esignView:TOUState":this.touStateChanged});this.trackDocumentFocus=_.bind(this.trackDocumentFocus,this);this.HUDFocusIn=_.bind(this.HUDFocusIn,this);this.HUDFocusOut=_.bind(this.HUDFocusOut,this);document.addEventListener("focus",this.trackDocumentFocus,true)}this.currentPage=1;App.EventBus.trigger("toolbarView:currentPage",{currentPage:this.currentPage})},toTemplate:function(){return{showClose:!App.Env.feature.isMobileBrowser}},postRender:function(){var i=this.$(".hud-toolbar"),j=this.$(".hud-close-btn"),k=i18n("esign_HUD_close_button");if(!App.Env.feature.isMobileBrowser){j.tooltip({animation:true,placement:"top",title:k,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:k}));j.on("click",_.bind(this.closeHUDAndRegisterEvents,this))}_.each(this.options.controls,function(l){i.append(l.el);l.render()},this);if(j.length){i.append(j)}return this},closeHUDAndRegisterEvents:function(){this.hideHUD();_.delay(_.bind(function(){this.$(".hud-close-btn").remove();this.$(".hud-toolbar").css({"margin-top":"50px"});this.HUDBlur()},this),this.FADE_DURATION);this.$el.off(".hud");this.$el.on("mouseenter.hud",_.bind(this.HUDMouseEnter,this));this.$el.on("mouseleave.hud",_.bind(this.HUDMouseLeave,this));this.$el[0].removeEventListener("focus",this.HUDFocusIn);this.$el[0].removeEventListener("blur",this.HUDFocusOut);this.$el[0].addEventListener("focus",this.HUDFocusIn,true);this.$el[0].addEventListener("blur",this.HUDFocusOut,true)},setCurrentPage:function(i){this.currentPage=i.currentPage},touStateChanged:function(i){f=i.visible;if(i.visible){if(this.$(".hud-close-btn").length===0){this.hideHUD()}else{this.closeHUDAndRegisterEvents()}}},HUDMouseLeave:function(){g=false;if(!e){e=true;_.delay(_.bind(this.hideHUDWithMouseCheck,this),this.HIDE_DELAY)}},HUDFocusOut:function(){h=false;if(!e){e=true;_.delay(_.bind(this.hideHUDWithMouseCheck,this),this.HIDE_DELAY)}},hideHUD:function(){var i=this,j=this.$(".hud-toolbar");j.stop(true).fadeOut(this.FADE_DURATION,_.bind(function(){App.EventBus.trigger("toolbarView:currentPage",{currentPage:i.currentPage});e=false;h=false;i.$el.css({"margin-top":"-50px",height:this.TRANSPARENT_HUD_HEIGHT});j.css({display:"",opacity:0});if(g||h){i.$el.trigger("mouseenter")}},this));this.$(".hud-close-btn").tooltip("hide")},hideHUDWithMouseCheck:function(){if(!g&&!h){this.hideHUD()}else{e=false}},HUDMouseEnter:function(){if(this.hideTimeout){clearTimeout(this.hideTimeout)}if(!g){g=true;if(!e&&!h){e=true;_.delay(_.bind(this.showHUD,this),f?this.SHOW_DELAY_TOU:this.SHOW_DELAY)}}},HUDFocusIn:function(i){if(!h){h=true;if(!e&&!g){e=true;this.showHUD()}}},showHUD:function(){if(g||h){var i=this;i.$el.css({"margin-top":"-100px",height:"0"});this.$(".hud-toolbar").stop(true).css({display:"",opacity:1}).fadeIn(this.FADE_DURATION,function(){e=false;if(!g&&!h){i.$el.trigger("mouseleave")}})}else{e=false}},prevControl:function(j){var i=jQuery(document.activeElement),l=this.$(":focusable"),k=l.index(i);if(k>0){l.eq(k-1).trigger("focus")}else{l.last().trigger("focus")}j.preventDefault()},nextControl:function(j){var i=jQuery(document.activeElement),l=this.$(":focusable"),m=l.length,k=l.index(i);if(k<(m-1)){l.eq(k+1).trigger("focus")}else{l.first().trigger("focus")}j.preventDefault()},handleToolbarArrowKey:function(j){var i=jQuery(j.target),k=j.keyCode;if(i.is("button")){if(k===c.LEFT){this.prevControl(j)}else{if(k===c.RIGHT){this.nextControl(j)}}}},trackDocumentFocus:function(i){if(this.blurTimeout){clearTimeout(this.blurTimeout)}if(!jQuery(document.activeElement).closest(this.$el).length){this.lastFocusedElement=document.activeElement}},HUDBlur:function(){this.blurTimeout=_.delay(_.bind(function(){if(this.lastFocusedElement){if((!document.activeElement||document.activeElement===document.body)&&!jQuery(document.activeElement).closest(this.$el).length){this.lastFocusedElement.focus();document.removeEventListener("focus",this.trackDocumentFocus)}this.lastFocusedElement=undefined}},this),1)}},{CONFIG:{HEIGHT:50},ShortcutsData:{title:i18n("shortcuts_toolbar"),content:{"[+] / [-]":i18n("shortcuts_zoom_in_out"),"[PgDn] / [PgUp]":i18n("shortcuts_next_prev_page"),"[SHIFT] + [PgDn] / [PgUp]":i18n("shortcuts_jump_to_last_first_page"),"&lt;number&gt; + g":i18n("shortcuts_jump_to_page_no"),"[←] / [→]":i18n("shortcuts_move_next_previous_toolbar_item")}}});App.ns("Views.Agreement.HUD").Toolbar=d}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"hud-zoomdown-btn",tagName:"button",attributes:{"data-analytics-click":"zoomout"},events:{click:"pageZoomDown",mouseenter:"showTooltip",mouseleave:"hideTooltip",blur:"hideTooltip"},appEvents:{"agreementView:zoomClz":"setZoomClzLevel"},keyEvents:{"-":"pageZoomDown"},initialize:function(d){var e=i18n("esign_HUD_zoomOut");this.options=d;this.setZoomClzLevel(this.options.zoomClz);if(!App.Env.feature.isMobileBrowser){this.$el.tooltip({animation:true,placement:"top",title:e,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:e}))}else{this.$el.off("mouseenter mouseleave")}this.enableTip=true},setZoomClzLevel:function(d){d=d||"z125";this.zoomLevel=App.Views.Agreement.HUD.ZoomDown.zoomClzToLevel(d);this.zoomLevel>0?this.enable():this.disable()},pageZoomDown:function(){if(this.zoomLevel===0){return}var d=App.Views.Agreement.HUD.ZoomDown.zoomLevelToClz(--this.zoomLevel);App.EventBus.trigger("agreementView:zoomClz",d);App.EventBus.trigger("aria:action",App.Views.Agreement.HUD.ZoomDown.ariaActionForZoomLevel(this.zoomLevel))},enable:function(){this.$el.removeClass("disable").removeAttr("aria-disabled");this.enableTip=true},disable:function(){this.$el.addClass("disable").attr("aria-disabled",true);this.enableTip=false;this.hideTooltip()},showTooltip:function(){this.enableTip&&this.$el.tooltip("show")},hideTooltip:function(){this.$el.tooltip("hide")}},{zoomLevelToClz:function(d){switch(d){case 0:return"z50";case 1:return"z75";case 2:return"z100";case 3:return"z125";case 4:return"z150";case 5:return"z200"}},zoomClzToLevel:function(d){switch(d){case"z50":return 0;case"z75":return 1;case"z100":return 2;case"z125":return 3;case"z150":return 4;case"z200":return 5}},ariaActionForZoomLevel:function(g){var d=App.Views.Agreement.HUD.ZoomDown.zoomLevelToClz(g),f=d.substring(1),e=g===0?"agreement_hud_min_zoom":"agreement_hud_zoom_out";return i18n(e,f)}});App.ns("Views.Agreement.HUD").ZoomDown=c}())}),(function(b,a){(function(){var c=App.Views.Agreement.HUD.ZoomDown;var d=Backbone.View.extend({className:"hud-zoom-slider-control",tagName:"div",template:'<input id="zoomInput" type="text"/>',appEvents:{"agreementView:zoomClz":"setSliderLevel"},initialize:function(){this.zoomLevel=c.zoomClzToLevel(this.options.zoomClz)},render:function(){this._super();this.$sliderInput=this.$("#zoomInput");this.renderSliderControl();return this},renderSliderControl:function(){this.$sliderInput.slider({tooltip:"show",min:1,max:6,step:1,value:++this.zoomLevel,handle:"square",formater:function(e){var f=c.zoomLevelToClz(--e);return f.slice(1,f.length)+"%"}}).on({slideStop:_.bind(this.triggerZoom,this),slide:_.bind(this.updateTooltip,this)});jQuery(".slider",this.$el).width("122px");this.tooltip=this.$sliderInput.data("slider").tooltip;this.tooltip.css("left",this.tooltip.getOuterWidth()/2)},setSliderLevel:function(e){var f=c.zoomClzToLevel(e);this.$sliderInput.data("slider")&&this.$sliderInput.data("slider").setValue(++f)},triggerZoom:function(e){var g=this.$sliderInput.data("slider").getValue(),f=c.zoomLevelToClz(--g);f&&App.EventBus.trigger("agreementView:zoomClz",f)},updateTooltip:function(e){this.$sliderInput.val(e.value)}});App.ns("Views.Agreement.HUD").ZoomSlider=d}())}),(function(b,a){(function(){var c=App.Views.Agreement.HUD.ZoomDown;var d=Backbone.View.extend({className:"hud-zoomup-btn",tagName:"button",attributes:{"data-analytics-click":"zoomIn"},events:{click:"pageZoomUp",mouseenter:"showTooltip",mouseleave:"hideTooltip",blur:"hideTooltip"},appEvents:{"agreementView:zoomClz":"setZoomClzLevel"},keyEvents:{"+":"pageZoomUp","=":"pageZoomUp"},initialize:function(e){var f=i18n("esign_HUD_zoomIn");this.options=e;this.setZoomClzLevel(this.options.zoomClz);if(!App.Env.feature.isMobileBrowser){this.$el.tooltip({animation:true,placement:"top",title:f,sanitize:false}).append(App.Templates.HiddenAccessible.span({text:f}))}else{this.$el.off("mouseenter mouseleave")}this.enableTip=true},setZoomClzLevel:function(e){e=e||"z125";this.zoomLevel=c.zoomClzToLevel(e);this.zoomLevel<5?this.enable():this.disable()},pageZoomUp:function(){if(this.zoomLevel===5){return}var e=c.zoomLevelToClz(++this.zoomLevel);App.EventBus.trigger("agreementView:zoomClz",e);App.EventBus.trigger("aria:action",App.Views.Agreement.HUD.ZoomUp.ariaActionForZoomLevel(this.zoomLevel))},enable:function(){this.$el.removeClass("disable").removeAttr("aria-disabled");this.enableTip=true},disable:function(){this.$el.addClass("disable").attr("aria-disabled",true);this.enableTip=false;this.hideTooltip()},showTooltip:function(){this.enableTip&&this.$el.tooltip("show")},hideTooltip:function(){this.$el.tooltip("hide")}},{ariaActionForZoomLevel:function(h){var e=c.zoomLevelToClz(h),g=e.substring(1),f=h===5?"agreement_hud_max_zoom":"agreement_hud_zoom_in";return i18n(f,g)}});App.ns("Views.Agreement.HUD").ZoomUp=d}())}),(function(b,a){(function(){var e=96/72,g=17*72,i="prcnt-scroll",f="prcnt-100",h=816;var c=Backbone.View.extend({COACHMARK_GUTTER:70,LAZY_LOAD_DELAY:500,LAZY_LOAD_THRESHOLD:300,fetchedImageCache:{},appEvents:{"agreementView:contentRendered":"onContentRendered","agreementView:resize":"updateLayout","agreementView:zoomClz":"updateZoomLevel","agreementView:updatePageAttr":"updatePageAttr"},initialize:function(){this.containerEle=this.options.containerSelector;this.agreement=getAppViewHelper(this.options).model.get("agreement");this.agreementUrls=this.agreement.get("imageUrls");this.documentData=this.agreement.get("latestDocumentData");this.zoomLevel=getAppViewHelper(this.options).getInitialZoomLevel();this.scrollMode=null;this.findMaxWidthPageIndex()},onContentRendered:function(j){this.setElement(j.$pageList);this.$document=j.$document;this.$pages=this.$("> .page");this.images=this.$pages.find("> img");this.$maxWidthPage=this.$pages.eq(this.maxPageIndex);App.EventBus.trigger("pageViewer:setElement");this.updateLayout(false,true)},updateZoomLevel:function(o,m,l){if(o===this.zoomLevel&&!m){return}var n=jQuery(document).scrollTop(),j=this.zoomLevel!==o;if(o){this.zoomLevel=o;this.updatePageAttr()}j&&this.checkThumbnailsAvailable();this.layoutChanged=this.updateLayout(j);var k=this.getZoom();k.force=m;k.noFieldResize=l;App.EventBus.trigger("pageViewer:zoom",k,n);jQuery(window).trigger("scroll")},getZoom:function(){return{zoomLevel:this.zoomLevel,zoomFactor:c.getZoomFactor(this.zoomLevel),layoutChanged:this.layoutChanged}},getLayout:function(){return{layoutMode:this.layoutMode,isScrolling:this.scrollMode===true}},updateScrollMode:function(){var j=this.$maxWidthPage.getWidth()+this.getGutterWidth(),k=c.containerWidth(this.options)<=j;jQuery("#header").attr("data-maxPageWidth",j);if(this.scrollMode===k){return false}this.scrollMode=k;return true},getGutterWidth:function(k){var j=0;if(k||getAppViewHelper(this.options).coachmark){j=App.Views.Coachmark.isMobileMode()?0:this.COACHMARK_GUTTER}return j},updateLayout:function(j,n){var m=c.containerWidth(this.options),l=this.prevWinW!==m,k=this.updateScrollMode();if(!k&&!l){this.scrollMode&&this.$pages.css({"margin-left":"0"});return false}this.prevWinW=m;this.$document.toggleClass(i,this.scrollMode).toggleClass(f,!this.scrollMode&&m>h).css({"margin-left":App.appView.is_esign&&this.scrollMode?this.getGutterWidth(n)+"px":"auto",width:this.scrollMode?"":m});this.layoutMode=this.scrollMode?c.LAYOUT_MODE.LEFT_ALIGNED:c.LAYOUT_MODE.CENTER_ALIGNED;if(this.scrollMode){this.$pages.css({"margin-left":"0"})}if(j!==true){this.updatePageAttr()}if(App.Utils.isKeyboardOpen()){App.Utils.fixiOSHeaderWidth()}App.EventBus.trigger("pageViewer:layout",this.getLayout());return true},findMaxWidthPageIndex:function(){var k=0,j=0;this.documentData&&_(this.documentData.pages).each(function(m,l){if(m.width>k){k=m.width;j=l}});this.maxPageIndex=j},getSLAString:_.memoize(function(k){var j=(_.last(this.documentData.pages)||{});return"&sns="+k+"&snp="+j.pageNumber}),normalizeImageUrl:function(j){return j+this.getSLAString(this.zoomLevel)},updatePageAttr:function(){var j=this.agreementUrls[this.zoomLevel],l=this.getSLAString(this.zoomLevel),k=this;_(j).each(function(q,n){var m=this.agreement.getPageIndex(n),o=this.$(".pdf-page-"+(m+1)),p=o.find("> img").attr("data-src",j[n]+l),r=this.agreement.getPageInfo(n);c.setPageItemAttr(r,o,p,k.options)},this)},updateZoomImageUrls:function(){App.Utils.lazyLoad({images:this.images,threshold:this.LAZY_LOAD_THRESHOLD,effect:"fadeIn",delay:this.LAZY_LOAD_DELAY,loadStyle:"sequential"})},checkThumbnailsAvailable:function(){if(this.zoomLevel in this.fetchedImageCache){this.updateZoomImageUrls()}else{this.areThumbnailsAvailableForDocument()}},areThumbnailsAvailableForDocument:function(){this.agreement.areThumbnailsRasterized({size:this.zoomLevel},{success:_.bind(this.handleAreThumbnailsRasterized,this)})},handleAreThumbnailsRasterized:function(l,j,k){if(j){this.fetchedImageCache[j]=true;this.updateZoomImageUrls()}},getPageElement:function(j){return jQuery(this.$pages[j-1])},getPageElements:function(){return this.$pages},getDocumentElement:function(){return this.$document},getPagesContainer:function(){return this.$el}},{LAYOUT_MODE:App.Utils.makeObj(["LEFT_ALIGNED","CENTER_ALIGNED"]),ZOOM_FACTOR:{z50:0.5,z75:0.75,z100:1,z125:1.25,z150:1.5,z200:2},containerWidth:function(k){var m=getAppViewHelper(k).pageViewer.containerEle,j=m&&jQuery(m),n=jQuery(window),l=m?j.getWidth():n.getWidth();return l},getZoomFactor:function(j){return c.ZOOM_FACTOR[j]||1.25},pageSizeInPixels:_.memoize(function(l,o){var k={};if(o!=="large"){var m=c.getZoomFactor(o),j=c.getSecondaryScaleFactor(l),n=e*m/j;k.width=Math.round(l.width*n);k.height=Math.round(l.height*n)}else{k.width=675;k.height=l.height*(675/l.width)}return k},function d(j,k){return[j.width,j.height,k].join()}),getSecondaryScaleFactor:_.memoize(function(k){var j=1,m=k.width-g,l=k.height-g;if(m>0&&m>=l){j=k.width/g}else{if(l>0){j=k.height/g}}return j},function d(j){return[j.width,j.height].join()}),setPageItemAttr:function(r,n,j,t){var l=getAppViewHelper(t).getZoomLevel(),s=c.pageSizeInPixels(r,l),m=c.containerWidth(t),q=(m-s.width)/2;var o=m/s.width;var p=o*s.height;var k=App.appView.pinchZoomViewer.options&&App.appView.pinchZoomViewer.options.smoothZoom;if(k){App.appView.pinchZoomViewer.ratio=o;n.css({width:m+"px",height:(p+1)+"px"});j.css({width:"100%"})}else{n.css({width:s.width+"px",height:(s.height+1)+"px",marginLeft:q+"px"});j.css({width:s.width+"px"})}},getDefaultImageUrl:function(j){var k=getAppViewHelper(j).getZoomLevel();return App.Env.root+"images/thumbnails/default_image_"+k+".png"}});App.ns("Views.Agreement").PageViewer=c}())}),(function(b,a){(function(){_.extend(App.Debug.usage.descr,{"printAgreement()":"print complete agreement. If true is passed, print all sub objects rather than linking","printLatestDocumentData()":"print agreement's latestDocumentData","printValidationRules()":"print agreement's validationRules"});App.Debug.printAgreement=function(c){var d=App.appView.model.get("agreement");return App.Debug.print({Agreement:d},c||{latestDocumentData:"App.Debug.printLatestDocumentData()",validationRules:"App.Debug.printValidationRules()"})};App.Debug.printLatestDocumentData=function(c){var d=App.appView.model.get("agreement").get("latestDocumentData");return App.Debug.print({"Agreement - latestDocumentData":d},c||{fields:"App.Debug.printFields()"})};App.Debug.printValidationRules=function(){var c=App.appView.model.get("agreement").get("validationRules");return App.Debug.print({"Agreement - validationRules":c})}}())}),(function(b,a){(function(){var d=60;var c=Backbone.View.extend({className:"agreementCnt",template:App.Templates.Agreement.container,appEvents:{"pageViewer:zoom":"onZoom"},initialize:function(){this.agreement=this.model.get("agreement")},attachClickViewer:function(){this.detachClickViewer();if(this.options.enableScrollableFocus){this.$("#document").on("click",this.onClick)}},detachClickViewer:function(){if(this.options.enableScrollableFocus){this.$("#document").off("click")}},onClick:function(e){if(jQuery(e.target).is("ul.pages, #document, li.page>img")){jQuery(e.currentTarget).trigger("focus");App.EventBus.trigger("agreementView:documentFocused")}},attachAppViewers:function(){getAppViewHelper(this.options).pageViewer=new App.Views.Agreement.PageViewer({containerSelector:".agreementCnt",mainView:this.options.mainView});getAppViewHelper(this.options).pinchZoomViewer=new App.Views.Agreement.PinchZoomViewer({targetSelector:"body"})},detachAppViewers:function(){getAppViewHelper(this.options).pageViewer.remove();getAppViewHelper(this.options).pageViewer=null;getAppViewHelper(this.options).pinchZoomViewer.remove();getAppViewHelper(this.options).pinchZoomViewer=null},addPageListView:function(){var g=this.agreement.get("latestDocumentData"),j=this.options.mainView?this.options.mainView.getInitialZoomLevel():getAppViewHelper(this.options).getInitialZoomLevel(),e=this.getImageUrlForZoomLevel(j),i=this.options.mainView?this.options.mainView.pageViewer:getAppViewHelper(this.options).pageViewer,h=App.Models.Agreement.Page,f=this;if(!e||!g){return}this.pageListView=new App.Views.Agreement.PageListView(this.options);_(e).chain().values().each(function(l,k){var m=new h({pageIndex:1+k,imageUrl:i.normalizeImageUrl(l),pageInfo:g.pages[k]});f.pageListView.addItem(m)})},render:function(){this._super();this.attachAppViewers();return this},postRender:function(){var k=this.$("#document"),f=jQuery("#header"),e=jQuery("#echo-nav-footer"),m=f.getHeight(),i=e.getHeight(),l=this.options.mainView?this.options.mainView.pageViewer:getAppViewHelper(this.options).pageViewer,h;var j=App.Templates.Agreement.sideBar;jQuery("body").append(j);var g=jQuery("#es-sidebar-container");this.addPageListView();this.attachClickViewer();h=this.pageListView.render();k.html(h.el).add(g).css({"margin-top":m,"margin-bottom":d+i});App.EventBus.trigger("agreementView:contentRendered",{$document:k,$pageList:h.$el,$sidebar:g});l.updateZoomLevel()},onZoom:function(g,e){var i=jQuery(document),j=jQuery(window),h=i.scrollTop(),f=j.getHeight()/3;if(this.currZoom&&h>0){i.scrollTop((e+f)*g.zoomFactor/this.currZoom.zoomFactor-f)}this.currZoom=g},getImageUrlForZoomLevel:function(f){var e=this.agreement.get("imageUrls");if(!(f in e)){f="z125"}return e[f]},remove:function(){this.pageListView.remove();this.detachAppViewers();this.detachClickViewer();this._super()}});App.ns("Views.Agreement").Content=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"agreement-footer",hudCurrPageNum:1,appEvents:{"agreementView:removeHUD":"removeHUD","agreementView:removeLangSelector":"removeLangSelector","agreementView:contentRendered":"onContentRendered"},initialize:function(){this.$esFooter=jQuery(".es-footer-inner")},onContentRendered:function(){if(!App.Env.feature.isMobileBrowser){this.currPageEvtListener=_.throttle(_.bind(this.onScrollCurrPageNum,this),200);jQuery(window).on("scroll",this.currPageEvtListener);this.$items=jQuery("li.page")}},render:function(){if(App.Env.feature.isMobileBrowser){if(this.$esFooter){this.$esFooter.hide()}return this}if(!this.HUD_toolbar){this.initHUDToolbar()}this.HUD_toolbar.renderInto(this.$el);return this},initHUDToolbar:function(){var d=this.getToolbarOptions();if(!_.isEmpty(d)){this.HUD_toolbar=new App.Views.Agreement.HUD.Toolbar(d)}},getToolbarOptions:function(){var e={},d={},f=getAppViewHelper(this.options);d.pageUp=new App.Views.Agreement.HUD.PageUp({model:this.model,mainView:this.options.mainView});d.pageDown=new App.Views.Agreement.HUD.PageDown({model:this.model,mainView:this.options.mainView});d.pageNumber=new App.Views.Agreement.HUD.PageNumber({model:this.model,mainView:this.options.mainView});if(f.isZoomEnabled()){d.zoomDown=new App.Views.Agreement.HUD.ZoomDown({zoomClz:f.getInitialZoomLevel()});d.zoomUp=new App.Views.Agreement.HUD.ZoomUp({zoomClz:f.getInitialZoomLevel()})}e.controls=d;return e},onScrollCurrPageNum:function(){var f=jQuery(window),e=f.scrollTop()+(f.getHeight()/2),d=1;if(e>0){d=this.$items.length;this.$items.each(function(g){var h=jQuery(this).position().top;if(h>e){d=g;return false}})}if(this.hudCurrPageNum!==d){this.hudCurrPageNum=d;this.updateInViewPageNum()}},updateInViewPageNum:function(){App.EventBus.trigger("toolbarView:currentPage",{currentPage:this.hudCurrPageNum})},removeHUD:function(){if(this.HUD_toolbar){this.HUD_toolbar.remove();this.HUD_toolbar=null}},remove:function(){jQuery(window).off("scroll",this.currPageEvtListener);this._super()},removeLangSelector:function(){jQuery("#footer-lang").remove()}});App.ns("Views.Agreement").Footer=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({className:"agreement-header",template:App.Templates.Agreement.header,documentPages:null,toTemplate:function(){return{isMobile:App.Env.feature.isMobileBrowser,agreementTitle:this.getAgreementTitle()}},getAgreementTitle:function(){return this.model.get("agreement")&&this.model.get("agreement").get("name")}});App.ns("Views.Agreement").Header=c}())}),(function(b,a){(function(){var c=App.Views.Layout.extend({el:"body",className:"agreementView",headerSelector:"#contentSubHeader",footerSelector:"app-footer",contentSelector:"#mainContent",initialize:function(){this._super();if(this.options.header){this.views[this.headerSelector]=this.options.header}if(this.options.content){this.views[this.contentSelector]=this.options.content}if(this.options.footer){this.views[this.footerSelector]=this.options.footer}jQuery(window).on("resize.agreementView",_.bind(this.agreementViewResized,this))},render:function(){this._super();App.EventBus.trigger("app:hideInterstitial");return this},agreementViewResized:_.debounce(function(){var f=jQuery(window),d,e;App.EventBus.trigger("agreementView:resize");d=f.getWidth();e=App.Env.responsiveType(d);App.EventBus.trigger("agreementView:screenType",e)},150),remove:function(){jQuery(window).off("resize.agreementView");this._super()}});App.ns("Views.Agreement").Layout=c}())}),(function(b,a){(function(){var c=App.Utils.KEY;var d=Backbone.View.extend({PAGE_SCROLL_TIME:200,appEvents:{"aria:action":"onAriaAction"},initialize:function(){this.$mainContent=this.$("#mainContent");this.$header=this.$("#header");this.$footer=this.$("#footer")},render:function(e){this.layout&&this.layout.remove();this.layout=e||this.getLayout();this.layout.render();this.monitorInteractionMode();return this},getLayout:function(){var e=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model,mainView:this}),content:new App.Views.Agreement.Content({model:this.model,mainView:this}),footer:new App.Views.Agreement.Footer({model:this.model,mainView:this})});return e},onAriaAction:function(e){var f=this.$("#aria-actions");f.text(e)},scrollToPage:function(e){var f=getAppViewHelper(this.options).getVisiblePageCount();if(e>0&&e<=f){jQuery.scrollTo(jQuery("#document li.pdf-page-"+e),this.PAGE_SCROLL_TIME,{offset:-this.$header.getHeight()})}},getInitialZoomLevel:_.once(function(){var e=this.model.get("agreement").get("imageUrls"),f=window.innerWidth,g;g=f<350?"z50":f<500?"z75":f<1000?"z100":App.Env.feature.isMobileBrowser?"z200":"z125";return g in e?g:"large"}),getZoomLevel:function(){var e=getAppViewHelper(this.options);return(e.pageViewer&&e.pageViewer.zoomLevel)||this.getInitialZoomLevel()},getZoomFactor:function(){return App.Views.Agreement.PageViewer.getZoomFactor(this.getZoomLevel())},isZoomEnabled:function(){return this.getInitialZoomLevel()!=="large"},getPageInfo:function(e){return this.model.get("agreement").getPageInfo(e)},getPageIndex:function(e){return this.model.get("agreement").getPageIndex(e)},getVisiblePageCount:function(){return this.model.get("agreement").getVisiblePageCount()},remove:function(){this.layout.remove();this._super()},stopListening:function(){this.stopMonitoringInteractionMode();this._super();return this},flagKeyboardNavigation:function(g){var f=this,h=g.keyCode||g.which;this.keyboardNavigation=c.isTab(g)||c.isArrow(g)||c.isEsc(g)||c.isDeleteAction(g)||c.isSpace(g)||c.isEnter(g)||h===c.HOME||h===c.END||h===c.PAGE_UP||h===c.PAGE_DOWN||(h===65&&(g.ctrlKey||g.metaKey));_.delay(function(){f.keyboardNavigation=undefined},100)},setKeyboardFocusedState:function(){if(this.$keyboardFocused){this.$keyboardFocused.removeClass("is-keyboardFocused");this.$keyboardFocused=undefined}if(this.keyboardNavigation){this.$keyboardFocused=jQuery(document.activeElement);this.$keyboardFocused.toggleClass("is-keyboardFocused",true).on("blur.keyboardFocused",function(f){jQuery(f.target).removeClass("is-keyboardFocused").off("blur.keyboardFocused")})}},monitorInteractionMode:function(){var e=this.$el.get(0);this.flagKeyboardNavigation=_.bind(this.flagKeyboardNavigation,this);this.setKeyboardFocusedState=_.bind(this.setKeyboardFocusedState,this);if(e){this.stopMonitoringInteractionMode();e.addEventListener("keydown",this.flagKeyboardNavigation,true);e.addEventListener("focus",this.setKeyboardFocusedState,true)}},stopMonitoringInteractionMode:function(){var e=this.$el.get(0);if(e){e.removeEventListener("keydown",this.flagKeyboardNavigation);e.removeEventListener("focus",this.setKeyboardFocusedState)}}});App.ns("Views.Agreement").MainView=d}())}),(function(b,a){(function(){var c=Backbone.View.extend({template:App.Templates.FormsModalViewer.viewTemplate,className:"dfl-modal-view",appEvents:{"agreementView:showMobileModalView":"show","agreementView:hideMobileModalView":"hide"},events:{"evt:show":"show","evt:hide":"hide"},initialize:function(d){this.options=d;this.dflBundle=undefined;_.bindAll(this,"render","show","hide","remove");App.Utils.showInterstitial();this._startup();this.banner=new App.Views.Agreement.FormsViewBanner({})},_logError:function(d,e){var f="Error while "+d;if(e&&e.code&&e.message){f=f+", code: "+e.code+", message: "+e.message}else{if(e&&e.statusText){f=f+", error status text: "+e.statusText}}App.Debug.log("severe",f)},_startup:function(){var e=this;this.render();var d="loading model data";this.model.fetch({error:function(h,f,g){if(f.status===404){g.errorHandled=true}}}).then(function(){d="loading DX bootstrap lib from "+e.model.get("bootstrapUrl");return e._loadDXBootstrap()}).then(function(){e.dflBundle=DCModule;DCModule.startup(e)}).catch(function(f){e._logError(d,f);e.hide();e.close();App.Utils.hideInterstitial()})},_loadDXBootstrap:function(){var d=this;return jQuery.ajax({type:"GET",url:this.model.get("bootstrapUrl"),dataType:"script",cache:true})},render:function(){this.$el.html(this.template(this.options));this.$el.insertBefore("#mainContent");this.$modal=this.$(".modal");this.$modal.on("hidden.bs.modal",_.bind(function(){this.hide()},this))},show:function(){if(this.dflBundle){this.dflBundle.onShowModal(this)}this.$modal.modal("show")},hide:function(){if(this.dflBundle){this.dflBundle.onHideModal(this)}this.$modal.modal("hide")},close:function(){if(this.dflBundle){this.dflBundle.onCloseModal(this)}this.off();this.remove()}});App.ns("Views.Agreement").FormsModalViewer=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({el:".dfl-mobile-header",initialize:function(e){this.options=e;var d=jQuery("#header").clone();d.find("#contentSubHeader").remove();d.find("#nav-help-tab").remove();d.appendTo(this.$el)}});App.ns("Views.Agreement").FormsViewBanner=c}())}),(function(b,a){(function(){var c=App.Views.Agreement.PageViewer;var d=Backbone.View.extend({template:'<img data-src="{{ imageUrl }}"/>',tagName:"li",attributes:{role:"presentation"},toTemplate:function(){return this.model.toJSON()},render:function(){this._super();this.setPageAttr();App.EventBus.trigger("agreementView:pageRendered",{container:this.$el,pageNo:this.model.get("pageInfo").pageNumber});return this},setPageAttr:function(){var f=this.model.get("pageInfo"),e=this.$("img");e.attr({src:c.getDefaultImageUrl(this.options),alt:i18n("pDFForms_page",f.pageNumber,getAppViewHelper(this.options).getVisiblePageCount()),"class":"page-image"});c.setPageItemAttr(f,this.$el,e,this.options)}});App.ns("Views.Agreement").PageItemView=d}())}),(function(b,a){(function(){var c=Backbone.View.extend({tagName:"ul",className:"pages",attributes:{role:"presentation"},PAGE_CLASSNAME_PREFIX:"page pdf-page-",initialize:function(){this.collection=new App.Collections.Agreement.PageList()},addItem:function(d){this.collection.add(d)},render:function(){this.$el.empty();this.container=document.createDocumentFragment();this.collection.each(this.appendItem,this);this.$el.append(this.container);return this},appendItem:function(d){var e=new App.Views.Agreement.PageItemView(_.defaults({model:d,className:this.PAGE_CLASSNAME_PREFIX+d.get("pageIndex")},this.options));this.container.appendChild(e.render().el)}});App.ns("Views.Agreement").PageListView=c}())}),(function(b,a){(function(){var c=0.99,e=1.01;var d=Backbone.View.extend({appEvents:{"pageViewer:zoom":"handleZoomComplete","agreementView:contentRendered":"handleContentRendered"},initialize:function(f){this.options=f},setupHammerJSHandler:function(){this.$target=jQuery(this.options.targetSelector).hammer({behavior:{userSelect:true,contentZooming:"none",touchAction:"none"}})},bindHammerGestures:function(){var f=this;this.setupHammerJSHandler();this.$target.hammer({behavior:{userSelect:true,contentZooming:"none",touchAction:"none"}}).on("pinchin",function(g){f.handlePinchZoom(g)}).on("pinchout",function(g){f.handlePinchZoom(g)}).on("release",function(g){f.handleGestureRelease(g)}).on("touchstart touchmove",function(g){if(g.originalEvent.targetTouches.length!==1){g.originalEvent.preventDefault()}})},handleContentRendered:function(){this.pausePinchZoom=false;if(App.Env.feature.isMobileBrowser){this.bindHammerGestures();this.$target.on("gesturestart gesturechange gestureend",function(f){f.preventDefault()})}},handlePinchZoom:function(j){var g,i,k,h,f;if(this.pausePinchZoom){return}if(j.type==="pinchin"&&j.gesture.scale>c){return}if(j.type==="pinchout"&&j.gesture.scale<e){return}g=App.Views.Agreement.HUD.ZoomDown;i=this.currentZoom.zoomLevel;k=g.zoomClzToLevel(i);h=k;if(j.type==="pinchout"){++h}else{--h}f=g.zoomLevelToClz(h);if(f){this.pausePinchZoom=true;this.requestZoomClz(f)}},requestZoomClz:_.throttle(function(f){App.EventBus.trigger("agreementView:zoomClz",f)},150,true),handleGestureRelease:function(f){this.pausePinchZoom=false},handleZoomComplete:function(f){this.currentZoom=f},remove:function(){if(this.$target){if(App.Env.feature.isMobileBrowser){this.$target.hammer().off("pinchin pinchout release touchstart touchmove")}this.$target.off("gesturestart gesturechange gestureend")}this._super()}},{});App.ns("Views.Agreement").PinchZoomViewer=d}())}),(function(b,a){(function(){var k=0.99,j=1.01,f=1,e=2.75,g=2,c=5,h=100,d=250;var i=App.ns("Views.Agreement").PinchZoomViewer.extend({appEvents:App.Views.inherit("appEvents",{"agreementView:scrollToTarget":"updateUserPanned"}),isPanAndZoomActive:function(){return this.panZoomAvailable&&!this.isTOUVisible},emitAnalyticsEvent:function(l){App&&App.appView&&App.appView.logAnalytics&&App.appView.logAnalytics(l)},initZoom:function(){this.appView=getAppViewHelper(this.options);this.targetSelector=this.options.targetSelector;this.$displayImage=$("#document ul.pages");this.$document=$("#document");this.$agrContainer=$(".agreementCnt");this.imgDefaultWidth=this.$displayImage[0].offsetWidth;this.imgDefaultHeight=this.$displayImage[0].offsetHeight;this.zoomDocumentUpdated=true;this.cachedWidth=0;if(this.panZoomAvailable){this.cachedWidth=window.innerWidth;this.emitAnalyticsEvent(["pnz:opened"])}this.currentImg={x:0,y:0,z:1};this.prevImg={x:0,y:0,z:1}},initialize:function(l){this._super(l);l.smoothZoom&&this.disableBrowserZoom();this.panZoomAvailable=App.appView.model.get("isEsignMobilePanZoomAvailable");if(this.panZoomAvailable){this.listenTo(App.EventBus,{"fields:inputFocus":this.handleFieldFocus,"esignView:TOUState":this.handleTOU,"fields:requiredCount":this.onRequiredCount})}},onRequiredCount:function(m,l){if(m===0){this.emitAnalyticsEvent(["pnz:reqFields-done"])}},disableBrowserZoom:function(){this.isTouching=false;var l=function(m){if(m.targetTouches.length!==1&&m.cancelable){m.preventDefault()}};document.addEventListener("touchstart",function(m){if(this.isTouching){m.preventDefault();return}else{this.isTouching=true;l(m)}},{passive:false});document.addEventListener("touchmove",function(m){l(m)},{passive:false});document.addEventListener("touchend",function(m){this.isTouching=false})},bindHammerGestures:function(){this._super();var l=this;this.$target.on("drag",function(m){l.handlePan(m)}).on("doubletap",function(m){l.handleDoubleTap(m)})},handleContentRendered:function(){this.initZoom();this.setupHammerJSHandler();if(App.Env.feature.isMobileBrowser){this.bindOrientationListeners();this.bindHammerGestures();setTimeout(function(){App.EventBus.trigger("agreementView:zoomClz","z200",true)},1000)}},handlePan:function(m){var l=m.gesture.direction;if(l==="down"||l==="up"){this.triggerScroll(l)}this.userPanned=true},triggerScroll:_.throttle(function(l){App.EventBus.trigger("agreementHeader:mobileScroll",l)},300),updateDocumentDimensions:function(l){this.$document.height(Math.round(this.imgDefaultHeight*l));this.$document.width(Math.round(this.imgDefaultWidth*l))},updateUserPanned:function(){this.userPanned=true},postRotateUpdates:_.throttle(function(){var l=this;_.delay(function(){if(l.cachedWidth===window.innerWidth){return}l.cachedWidth=window.innerWidth;l.imgDefaultWidth=window.innerWidth;l.imgDefaultHeight=l.$displayImage[0].offsetHeight;l.userPanned=true;l.updateDocumentDimensions(l.prevImg.z);App.EventBus.trigger("pageViewer:zoom",{force:true})},150)},150),bindOrientationListeners:function(){window.addEventListener("resize",this.postRotateUpdates.bind(this))},clampScale:function(l){return this.clamp(l,f,e)},clamp:function(n,m,l){return Math.min(Math.max(m,n),l)},doZoom:function(){var n=this.currentImg.x-this.prevImg.x;var m=this.currentImg.y-this.prevImg.y;var l="translate3d("+n+"px,"+(m)+"px, 0) scale3d("+this.currentImg.z+", "+this.currentImg.z+", 1)";this.$displayImage.css({transform:l})},updateValuesBasedOnOffset:function(){if(!this.userPanned){return}this.prevImg.x=-this.$agrContainer.scrollLeft();this.prevImg.y=-this.$agrContainer.scrollTop();this.userPanned=false},handlePinchZoom:function(l){l.preventDefault();if(l.type==="pinchin"&&l.gesture.scale>k){return}if(l.type==="pinchout"&&l.gesture.scale<j){return}this.$agrContainer&&this.$agrContainer.css("overflow","hidden");App.EventBus.trigger("agreementView:pinchZoom");this.zoomDocumentUpdated=false;var m=this.clampScale(l.gesture.scale*this.prevImg.z);if((m<=f||m>=e)&&!this.userPanned){return}this.updateValuesBasedOnOffset();this.updateCurrentValuesBasedOnScale(l,m);this.doZoom()},updateCurrentValuesBasedOnScale:function(p,q){var o=Math.round((p.gesture.center.clientX-this.prevImg.x)/this.prevImg.z);var n=Math.round((p.gesture.center.clientY-this.prevImg.y)/this.prevImg.z);var m=p.gesture.center.clientX-(o*q);var l=p.gesture.center.clientY-(n*q);this.currentImg.x=m<=0?m:-1;this.currentImg.y=l<=0?l:-1;this.currentImg.z=q},scrollAgreementAndScale:function(m){var l="scale3d("+m+", "+m+", 1)";this.$agrContainer.scrollLeft(-this.currentImg.x);this.$agrContainer.scrollTop(-this.currentImg.y);this.$displayImage.css({transform:l})},handleDoubleTap:function(l){l.preventDefault();if(!$(l.target).closest("#document img").length){return}this.updateValuesBasedOnOffset();var m=this.currentImg.z>f+0.1?f:e;this.updateCurrentValuesBasedOnScale(l,m);this.updateDocumentDimensions(m);this.scrollAgreementAndScale(m);this.prevImg.z=m;this.userPanned=true;this.updateValuesBasedOnOffset()},triggerGestureRelease:_.debounce(function(m){var l=jQuery(m.target);if(l.is(".page-image")){App.EventBus.trigger("esignAgreementView:handleGestureRelease")}},d),handleGestureRelease:function(l){this.$agrContainer&&this.$agrContainer.css("overflow","auto");this.triggerGestureRelease(l);if(this.zoomDocumentUpdated){return}this.updateDocumentDimensions(this.currentImg.z);this.scrollAgreementAndScale(this.currentImg.z);this.prevImg.x=this.currentImg.x;this.prevImg.y=this.currentImg.y;this.prevImg.z=this.currentImg.z;this.zoomDocumentUpdated=true},requestZoomClz:_.throttle(function(l){App.EventBus.trigger("agreementView:zoomClz",l,false,true)},150,true),remove:function(){if(this.$target){if(App.Env.feature.isMobileBrowser){this.$target.hammer().off("pinchin pinchout drag release touchstart touchmove doubletap")}}window.removeEventListener("resize",this.postRotateUpdates);this._super()},handleFieldFocus:function(m,l){if(this.isPanAndZoomActive()){this.emitAnalyticsEvent(["pnz:fieldFocus"]);_.delay(_.bind(function(){this.handleNavigationPanZoom(m,g)},this),150)}},handleTOU:function(l){if(this.panZoomAvailable&&l&&l.visible){this.emitAnalyticsEvent(["pnz:touVisible"]);this.isTOUVisible=true;_.delay(_.bind(function(){this.handleNavigationPanZoom()},this),150)}else{this.emitAnalyticsEvent(["pnz:touDismissed"]);this.isTOUVisible=false}},handleNavigationPanZoom:function(m,p){if(!m){this.forceZoom(f);this.forcePan(0,0);return}var q=(window.innerWidth>window.innerHeight);p=(q)?f:p;if(this.currentImg.z!==p){this.forceZoom(p)}else{this.updateValuesBasedOnOffset()}var o=(0.3*window.innerWidth);var n=(m.parent()[0].offsetLeft+m[0].offsetLeft)*this.currentImg.z-o;var l=(m.parent()[0].offsetTop+m[0].offsetTop)*this.currentImg.z-h;this.forcePan(n,l);var r=this;_.delay(function(){if(window.pageXOffset!==0){r.emitAnalyticsEvent(["pnz:pgXo:"+window.pageXOffset])}if(window.pageYOffset!==0){r.emitAnalyticsEvent(["pnz:pgYo:"+window.pageYOffset])}},250)},forceZoom:function(l){var m=l||g;this.updateValuesBasedOnOffset();this.updateDocumentDimensions(m);this.scrollAgreementAndScale(m);this.currentImg.z=m;this.userPanned=true;this.updateValuesBasedOnOffset()},forcePan:function(l,m){l=l>0?l:0;m=m>0?m:0;this.$agrContainer.scrollLeft(l);this.$agrContainer.scrollTop(m);this.userPanned=true;this.updateValuesBasedOnOffset();this.updateDocumentDimensions(this.currentImg.z);this.updateValuesBasedOnOffset()}},{});App.ns("Views.Agreement").SmoothPinchZoomViewer=i}())}),(function(b,a){(function(){var c=Backbone.View.extend({tagName:"li",className:"thumb-element",template:_.template("<img class='thb-img {{ pageNumber === \"1\" ? \"selected\" : \"\" }}' data-src='{{ imgUrl }}'/> <span class='thb-cnt'> {{ pageNumber }} </span>"),DOCUMENT_PAGE_SCROLL_OFFSET:-87,events:{"click .thb-img":"scrollToPage"},toTemplate:function(){return this.model.toJSON()},render:function(){this._super();this.$("img").attr("src",App.Env.root+"images/thumbnails/default_image_tiny.png");return this},scrollToPage:function(){this.additemSelection();var d=parseInt(this.model.get("pageNumber"));if(d){jQuery.scrollTo(jQuery("#document li.pdf-page-"+d),200,{offset:this.DOCUMENT_PAGE_SCROLL_OFFSET})}},additemSelection:function(){jQuery(".thb-img","#thumbs").each(function(d){if(jQuery(this).hasClass("selected")){jQuery(this).removeClass("selected")}});jQuery(".thb-img",this.$el).addClass("selected")}});App.ns("Views.Agreement").ThumbItemView=c}())}),(function(b,a){(function(){var c=Backbone.View.extend({tagName:"ul",className:"thumb-elements",initialize:function(){this.collection=new App.Collections.Agreement.ThumbList()},addItem:function(e,d){var f=new App.Models.Agreement.Thumb();f.set({imgUrl:d,alt:e,pageNumber:e});this.collection.add(f)},render:function(){var d=this;this.$el.empty();_.each(this.collection.models,function(e){d.appendItem(e)},this);return this},appendItem:function(d){var e=new App.Views.Agreement.ThumbItemView({model:d});this.$el.append(e.render().el)}});App.ns("Views.Agreement").ThumbListView=c}())}),(function(b,a){(function(){var d=App.Models.Coachmark,g=200,c=50+10,e=350,f=300;var h=Backbone.View.extend({directions_reset:"up down next",placement:"left",todoMode:false,todoDone:false,onlyHasOptionalFields:false,triggeredFromContentRendered:false,currentPage:1,gutterTemplate:'<div class="coachmark-gutter"></div>',events:{click:"onClick"},appEvents:{"fields:inputFocus":"onInputFocus","fields:inputBlur":"onInputBlur","fields:requiredCount":"onRequiredCount","fields:resetValue":"onFieldsResetValue","pageViewer:zoom":"onZoom","pageViewer:layout":"onLayoutChange","toolbarView:currentPage":"onCurrentPage","agreementView:resize":"updateCoachmark","esignView:TOUState":"onTOUStateChange"},initialize:function(j){var i=this;this.container=j.container||jQuery("body");this.footer=jQuery("#footer");this.firstField=j.firstField;this.model=new App.Models.Coachmark();this.render();this.gutterTemplate&&this.container.append(this.gutterTemplate);this.offsetTop=this.container.getOffset().top;this.offsetBottom=this.footer.getHeight()+c;this.offsetLeft=null;this.leftMargin=parseInt(this.container.css("margin-left"),10);this.bottomTrigger=0;this.debouncedBlurHandler=_.debounce(function(){if(i.blurred&&!i.isContinue()){i.setContinue()}},e);if(j.noFieldsMode){this.setNoFields()}else{this.setStart();this.firstField&&_.delay(_.bind(this.handleFirstField,this),f)}},onScroll:function(){this.requestFrame("scrollUpdate")},scrollUpdate:function(){this.$el.css({left:jQuery(window).scrollLeft()-this.container.getOffset().left})},onZoom:function(i){if(this.scrollPage===this.currentPage&&!this.isStart()&&!this.isContinue()){if(this.model.get("target")){App.EventBus.trigger("fields:focus-to",this.model.get("target"))}else{this.makeSticky("bottom")}}else{!i.layoutChanged&&this.refresh();this.updateCoachmark()}},onCurrentPage:function(i){this.scrollPage=i.currentPage;if(this.scrollPage!==this.currentPage&&this.sticky){this.updateSticky()}},onLayoutChange:function(i){if(!this.model.get("target")){return}this.scrollMode=i.isScrolling;this.scrollMode?jQuery(window).on("scroll.coachmark",_.bind(this.onScroll,this)):jQuery(window).off("scroll.coachmark");this.refresh()},refresh:function(){this.offsetLeft=this.getOffsetLeft();this.updatePosition();Waypoint.refreshAll()},onInputFocus:function(i,j){this.blurred=false;this.currentPage=j.pageIndex||1;if(this.isStart()||this.isContinue()){this.setNext()}this.offsetLeft=this.getOffsetLeft();if(this.wasLastField&&!j.isLastField){this.$el.toggleClass("next-todo",this.todoMode)}this.isLastField=j.isLastField;this.targetIsAttachment=j.targetIsAttachment;this.todoDone=App.appView.fieldsViewer.areTodosDone();this.todoMode=this.todoMode||(this.isLastField&&!this.todoDone);this.updateTarget(i);this.wasLastField=j.isLastField;this.scrollToTarget()},onInputBlur:function(i){if(!i.is(this.model.get("target"))){return}this.blurred=true;this.debouncedBlurHandler()},onClick:function(k){var l=this.model.get("mode"),j=this.model.get("target"),i;i=this.isStart()?"Start":"Next";ScAnalytics.logEvent([i]);switch(l){case d.MODES.start:j?App.EventBus.trigger("fields:focus-to",j)&&this.refresh():App.EventBus.trigger("fields:focus-first",j);break;case d.MODES.next:App.EventBus.trigger("fields:focus-next",j);break;case d.MODES.next_todo:this.focusNextTodo();break;case d.MODES.continue_:this.scrollToTarget();this.todoMode?this.focusNextTodo():App.EventBus.trigger("fields:focus-to",j);break;case d.MODES.noFields:App.EventBus.trigger("esign:toggleTOU",{visible:true});break}},onFieldsResetValue:function(){if(this.options.noFieldsMode){return}this.hide();App.appView.scrollToPage(1);this.todoMode=false;this.isLastField=false;this.firstField=App.appView.fieldsViewer.getFirstTabbableField(true);this.$el.toggleClass("next-todo",this.todoMode);this.setStart();this.postReset()},postReset:function(){var i=this;_.delay(function(){i.firstField&&i.handleFirstField();i.show()},App.appView.PAGE_SCROLL_TIME)},focusNextTodo:function(){var j=this.model.get("target"),i=App.appView.fieldsViewer;if(i.isTodo(j)&&i.collection.getTodoCount()===1){App.EventBus.trigger("fields:focus-to",j)}else{App.EventBus.trigger("fields:focus-next-todo",j)}},onRequiredCount:function(l,j,i,k){this.todoDone=l===0;this.onlyHasOptionalFields=i;this.triggeredFromContentRendered=k;this.checkDoneRequirements()?this.hide():this.show()},checkDoneRequirements:function(i,j){return this.todoDone&&!(this.isStart()&&this.onlyHasOptionalFields)&&!this.triggeredFromContentRendered&&!this.targetIsAttachment},onTOUStateChange:function(i){if(i.visible){this.hide()}},scrollToTarget:function(){if(!this.checkEdges()){return}var i=this.model.get("target");jQuery.scrollTo(i,g,{offset:{top:-Waypoint.viewportHeight()/2,left:this.scrollMode?-window.innerWidth/2:0}})},render:function(){var i=this;this.pop=this.container.popover("dispose").popover({content:function(){return i.model.get("text")},html:true,placement:this.placement,trigger:"manual",container:this.container,template:this.getCoachmarkTemplate(),sanitize:false,popperConfig:{eventsEnabled:false,onCreate:_.noop,onUpdate:_.noop,modifiers:{applyStyle:{enabled:false}}}}).data("bs.popover");this.pop.$tip=jQuery(this.pop.getTipElement());this.pop.$tip.addClass("coachmark").find(".popover-body").attr("unselectable","on");this.setElement(this.pop.$tip);return this},getCoachmarkTemplate:function(){return App.Templates.Agreement.coachmark()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},setNext:function(){this.model.set("mode",this.todoMode?d.MODES.next_todo:d.MODES.next);this.setDirection("next");this.setText(i18n("esign_next"))},setStart:function(i){this.model.set("mode",d.MODES.start);this.setDirection(i||"next");this.setText(App.appView.fieldsViewer.isAutosaved()?i18n("esign_resume"):i18n("esign_start"))},setContinue:function(i){this.model.set("mode",d.MODES.continue_);this.setDirection(i||"next");this.setText(i18n("esign_next"))},setNoFields:function(){this.model.set("mode",d.MODES.noFields);this.setDirection("down");this.setText(App.appView.fieldsViewer.isAutosaved()?i18n("esign_resume"):i18n("esign_start"));this.pop.$tip.attr("tabindex",0);this.pop.show();this.makeSticky("bottom")},isContinue:function(){return this.model.get("mode")===d.MODES.continue_},isStart:function(){return this.model.get("mode")===d.MODES.start},setText:function(i){this.model.set("text",i);if(this.pop){this.pop.setContent();this.pop.$tip.addClass(this.placement)}},setDirection:function(i){if(this.model.get("direction")===i){return}this.model.set("direction",i);this.$el.removeClass(this.directions_reset).addClass(i)},handleFirstField:function(){this.updateTarget(this.firstField);this.onLayoutChange(App.appView.pageViewer.getLayout());this.updateCoachmark()},checkEdges:function(){var l=this.model.get("target"),j=l[0].getBoundingClientRect(),k=j.top,i=k<this.offsetTop?"top":k>this.bottomTrigger?"bottom":j.left<this.leftMargin?"left":j.right>window.innerWidth?"right":"";return i},updateTarget:function(i){var k=this,m=this.model.get("target"),l;if(m&&m.waypointInstances){App.Utils.destroyWaypoints(m.waypointInstances);delete m.waypointInstances}this.model.attributes.target=i;l=[];l.push(i.waypoint({handler:j("top"),offset:this.offsetTop}));l.push(i.waypoint({handler:j("bottom"),offset:function(){return k.bottomTrigger=Waypoint.viewportHeight()-k.offsetBottom-i.getOuterHeight()}}));this.model.attributes.target.waypointInstances=l;if(!this.isLastField&&!this.todoDone||(this.isStart()&&this.onlyHasOptionalFields)||this.triggeredFromContentRendered){this.pop.show()}this.updatePosition();function j(n){return function(p){var o=(n==="top"&&p==="up")||(n==="bottom"&&p==="down");k.viewportHandler(o?n+"-in":n)}}},getOffsetLeft:function(j){var i=this.container.find(".pdf-page-"+(j||this.currentPage));if(!i.length){return 0}return i.getOffset().left-this.container.getOffset().left-this.$el.getWidth()},updatePosition:function(){this.$el.removeClass("sticky");this.sticky=false;var k=this.model.get("target"),j=k.getOffset().top+(k.height()-this.$el.getHeight())/2-this.offsetTop,i=this.scrollMode?jQuery(window).scrollLeft()-this.container.getOffset().left:this.offsetLeft;this.$el.css({top:j+"px",left:i+"px"});this.offsetLeft=i},makeSticky:function(j,m){var l=60,i=this.$el.getOuterWidth()/2,k=j==="top"?this.offsetTop+i:Waypoint.viewportHeight()-(this.offsetBottom+i+l);this.sticky=j;this.$el.addClass("sticky").css({top:k,left:this.container.getOffset().left+this.getOffsetLeft(m)})},updateSticky:function(){this.makeSticky(this.sticky,this.scrollPage)},updateCoachmark:function(){this.model.get("target")&&this.viewportHandler(this.checkEdges())},viewportHandler:function(i){switch(i){case"top":this.isStart()?this.setStart("up"):this.setContinue("up");this.makeSticky(i);this.hideFieldPopovers();break;case"bottom":this.isStart()?this.setStart("down"):this.setContinue("down");this.makeSticky(i);this.hideFieldPopovers();break;case"left":case"right":break;default:this.isStart()?this.setStart():this.isContinue()&&this.blurred?this.setContinue():this.setNext();this.updatePosition()}},hideFieldPopovers:function(){var l=this.model.get("target"),i=l&&jQuery(l).data(),k=i["bs.popover"],j=i["bs.popover2"];k&&k.hide();j&&j.hide()},remove:function(){var i=this.model.get("target");if(i&&i.waypointInstances){App.Utils.destroyWaypoints(i.waypointInstances);delete i.waypointInstances}this.container.popover("dispose");jQuery(window).off("scroll.coachmark");this._super()}},{isMobileMode:function(){return App.Env.feature.isMobileBrowser}});App.ns("Views").Coachmark=h}())}),(function(b,a){(function(){var c=App.Models.Coachmark;var d=App.Views.Coachmark.extend({todoMode:true,gutterTemplate:"",initialize:function(e){this._super(e);this.stopListening(App.EventBus,"toolbarView:currentPage agreementView:resize pageViewer:layout")},render:function(){var e=this;var f=jQuery(this.getCoachmarkTemplate());f.appendTo(this.container);this.pop=f;this.pop.element=this.container;this.pop.$tip=f;this.$popElem=jQuery(this.pop.element);this.pop.setContent=function(){e.setContent()};this.pop.$tip.addClass("coachmark").find(".popover-body").attr("unselectable","on");this.setElement(this.pop.$tip);return this},setContent:function(){var e=this.model.get("text");this.container.find(".coachmark:not(.back) .popover-body").text(e);this.container.find(".coachmark.back .popover-body").text(i18n("esign_previous"))},getCoachmarkTemplate:function(){return App.Templates.Agreement.coachmarkMobile()},onInputBlur:function(e){if(App.Env.feature.iOS){return}this._super.apply(this,arguments)},onLayoutChange:function(e){this.scrollMode=e.isScrolling},onClick:function(i){var j=this.model.get("mode"),h=this.model.get("target"),f=$(i.target).hasClass("back"),g;g=this.isStart()?"Start":f?"Previous":"Next";ScAnalytics.logEvent([g]);switch(j){case c.MODES.start:App.appView.fieldsViewer.areTodosDone()?App.EventBus.trigger("esign:toggleTOU",{visible:true}):App.EventBus.trigger("fields:focus-first-todo",h);break;case c.MODES.next:App.EventBus.trigger("fields:focus-next",h);break;case c.MODES.next_todo:f?this.focusPrevTodo():this.focusNextTodo();break;case c.MODES.continue_:this.scrollToTarget();this.todoMode?this.focusNextTodo():App.EventBus.trigger("fields:focus-to",h);break;case c.MODES.noFields:App.EventBus.trigger("esign:toggleTOU",{visible:true});break}},focusPrevTodo:function(){var f=this.model.get("target"),e=App.appView.fieldsViewer;if(e.isTodo(f)&&e.collection.getTodoCount()===1){App.EventBus.trigger("fields:focus-to",f)}else{App.EventBus.trigger("fields:focus-prev-todo",f)}},updateCoachmarkClass:function(){var e=App.appView.fieldsViewer.collection.getTodoCount();if(e===1){this.$popElem.addClass("next-mode");this.$popElem.removeClass("start-mode");this.$popElem.removeClass("review-mode")}else{if(e>1){this.$popElem.addClass("review-mode");this.$popElem.removeClass("start-mode");this.$popElem.removeClass("next-mode")}}},setNext:function(){this.updateCoachmarkClass();this.model.set("mode",c.MODES.next_todo);this.setText(i18n("esign_next"))},setStart:function(){this.$popElem.addClass("start-mode");this.model.set("mode",c.MODES.start);this.setText((App.appView.fieldsViewer.isAutosaved()?i18n("esign_resume"):i18n("esign_start")))},setContinue:function(){this.updateCoachmarkClass();this.model.set("mode",c.MODES.continue_);this.setText(i18n("esign_next"))},onFieldsResetValue:function(e){this._super();this.todoMode=true;this.postReset(e)},postReset:function(e){if(e&&e.optionalWritten){App.appView.fieldsViewer.areTodosDone()?this.hide():this.show()}},scrollToTarget:function(){App.EventBus.trigger("agreementView:scrollToTarget");var e=this.model.get("target");if(App.Env.feature.iOS&&e.has("input[type=radio], input[type=checkbox], button.faux_field").length){this._super()}},checkDoneRequirements:function(e,f){return this.todoDone&&!(this.isStart()&&this.onlyHasOptionalFields)&&!this.triggeredFromContentRendered},setDirection:function(e){},updatePosition:function(){},makeSticky:function(e,f){}});App.ns("Views").CoachmarkMobile=d}())}),(function(b,a){(function(){var d=App.ns("Views.Field");d.getFactory=function(e){return function(h){var g=h.model,i=g.get("inputType"),f=d[e];if(i in f){return new f[i](h)}else{var j="Bad field class, type: "+e+", "+i;App.Debug.log("severe",j);return null}}};d.Base=Backbone.View.extend({tagName:"div",className:"pdfFormField",fontPct:0.6,initialize:function(){this.locations=this.model.get("locations");this.locationIndex=this.options.locationIndex;this.location=this.locations[this.locationIndex];this.pageInfo=getAppViewHelper(this.options).getPageInfo(this.location.page);this.zoomFactor=getAppViewHelper(this.options).getZoomFactor()},toTemplate:function(){return{}},toHTML:function(){var f=_.extend({},this.model.toJSON(),this.toTemplate()),e=_.result(this,"template");return _.template(e)(f)},getFieldSpecificClassName:function(){return this.model.get("inputType")},render:function(){var g=this.model,f=g.get("inputType"),e=this.$el;e.empty().addClass(this.getFieldSpecificClassName().toLowerCase()).attr({"data-fieldname":g.get("name")});this.placeField();if(g.isRequired()){e.addClass("required")}e.append(this.renderContent());this.attachBehavior();this.resizeUserFields();return this},renderContent:function(){var f=jQuery(this.toHTML()),e=this.getUserFields(f);if(e.length>0){e.attr(this.getAttributes()).prop(this.getProperties()).css(this.getStyle()).data(this.getData())}return f},attachBehavior:function(){},getAttributes:function(){var j=this.model,i=j.get("readOnly"),h=this.getTooltipValue(),f=j.get("displayLabel"),g=h!==""?h:f,e={"aria-required":j.isRequired()||null,"aria-invalid":!j.isValid()||null,maxlength:this.getMaxLength()};if(i){e.readonly="readonly"}if(g!==""){e["aria-label"]=g}if(this.location.tabIndex){e.tabindex=i?-1:0;e["data-tabindex"]=this.location.tabIndex}return e},getProperties:function(){var e={};return e},getStyle:function(){var g=this.model,f=this.getFontSize(),e;e=_.pick(g.attributes,["backgroundColor","borderColor","borderStyle","borderWidth"]);e.color=g.get("fontColor");e.fontFamily=g.get("fontName");if(f>0){e.fontSize=f+"px"}if(e.borderWidth<0){delete e.borderWidth}else{e.borderWidth=this.toPx(e.borderWidth);e.margin=0}if(g.get("alignment")){e.textAlign=g.get("alignment")}return e},getData:function(){return{}},getUserFields:function(f){var e;if(this.userFields&&!getAppViewHelper(this.options).model.get("optionalWritten")){return this.userFields}else{e=(f||this.$el.find("*")).filter("input[name][type!=hidden], textarea, select");if(!e.length){e=(f||this.$el.find("*")).find("input.fileAttachmentClickArea")}}if(!f&&e.length){this.userFields=e}return e},hasClones:function(){return this.locations.length>1},getCloneFields:function(){if(!this.clones){this.clones=jQuery("ul.pages .pdfFormField *").filter('[name="'+this.model.get("name")+'"]')}return this.clones.not(":focus")},updateClones:function(){this.getCloneFields().val(this.model.get("value"))},setPxMod:function(){this.pxMod=this.options.$parent.getWidth()/this.pageInfo.width},placeField:function(i){this.setPxMod();var k=this.location,h=this.getFontSize()+"px",j=this.options.$parent,l=App.Env.feature.iOS&&j.getWidth()<480&&this.model.get("inputType")==="TEXT_FIELD",g=this.toPx(k.height),e=l?g+1.5:g,f;if(i){f=getAppViewHelper(this.options).pageViewer.getPageElement(k.page);this.$el=this.$el.detach();f.append(this.$el);this.options.$parent=f;this.pageInfo=getAppViewHelper(this.options).getPageInfo(k.page)}this.$el.css({top:this.toPx(k.top)+"px",left:this.toPx(k.left)+"px","font-size":h}).height(e).width(this.toPx(k.width));this.getUserFields().css({"font-size":h})},updateZoomLevel:function(e){if(this.zoomFactor===e.zoomFactor&&!e.force){return}this.zoomFactor=e.zoomFactor;this.placeField();e.noFieldResize!==true&&this.resizeUserFields()},getPageOffset:function(e){return{top:e?this.toPx(this.location.top):this.location.top,left:e?this.toPx(this.location.left):this.location.left}},getPosition:function(){return this.$el.getOffset()},toPx:function(e){return c(e*this.pxMod)},fromPx:function(e){return c(e/this.pxMod,2)},getMaxLength:function(){var f=this.model,e=f.get("maxLength");var g=f.get("contentType");if(g==="SIGNER_INITIALS"){return 4}if(g==="SIGNER_COMPANY"||g==="SIGNER_TITLE"){return 255}if(e===-1){return null}return e},getFontSize:function(){var e=this.model.get("fontSize");if(e>0){return this.toPx(e)}else{return this.toPx((this.location.height)*this.fontPct-(((this.location.height-16)*this.fontPct/3)))}},resizeUserFields:function(){},getResizeTransform:function(){var e=App.appView.pinchZoomViewer&&App.appView.pinchZoomViewer.options;return e&&e.smoothZoom?this.doResizeTransformWithSmoothZoom():this.doResizeTransformWithZoomLevels()},doResizeTransformWithZoomLevels:function(){var i=this.location,h=this.zoomFactor/this.defaultSize,f=c(i.width*h),e=c(i.height*h),j=10*e-25,g="translate3d(0, "+j+"%, 0) scale3d("+f+", "+e+",1)";return g},doResizeTransformWithSmoothZoom:function(){var j,i=this.location,h=(App.appView.pinchZoomViewer.ratio/this.defaultSize)*this.zoomFactor,f=i.width*h,e=i.height*h;if(e<1){j=(1%e*100)/2}else{j=(-(e%1*100)/2)*Math.trunc(e)}if(navigator.userAgent.toLowerCase().match(/(iphone)/i)){f=f<0.9?0.9:f;e=e<0.9?0.9:e}var g="translate3d(0,"+j+"%, 0) scale3d("+f+", "+e+",1)";return g},getTooltipValue:function(){return this.model.get("tooltip")}},{fix:c});function c(e,g){return +e.toFixed(g||1)}}())}),(function(b,a){(function(){var e=App.Views.Field,c=e.Base.prototype,d="transitionend.conditional input,textarea,select";e.CONDITIONAL={SHOWCLASS:"condition-show",HIDECLASS:"condition-hide",ENABLECLASS:"condition-enable",DISABLECLASS:"condition-disable"};var f={initialize:App.Views.override(c.initialize,function(){var g=_(arguments).last();g.apply(this,arguments);if(this.model.hasConditions()){this.model.on("change:conditionState",this.checkConditions,this);this.events[d]="onConditionalTransitionEnd"}}),checkConditions:function(){var g=this.model.get("conditionState");if(!this.hasSameConditionState(g)){this.applyCondition(g)}},render:App.Views.override(c.render,function(){var g=_(arguments).last();g.apply(this,arguments);if(this.model.hasConditions()){this.checkConditions()}this.onConditionalTransitionEnd();return this}),onConditionalTransitionEnd:function(){if(this.$el.hasClass(e.CONDITIONAL.HIDECLASS)){this.$el.css({display:"none"})}},applyCondition:function(h,g){if(!g&&this.$el.css("display")==="none"){this.$el.css("display","");_.defer(_.bind(this.applyCondition,this,h,true));return}if(h!==this.model.get("conditionState")){return}if(this.model.get("showOrHide")==="SHOW"||this.model.get("showOrHide")==="HIDE"){this.$el.toggleClass(e.CONDITIONAL.SHOWCLASS,h===true);this.$el.toggleClass(e.CONDITIONAL.HIDECLASS,h===false);this.refreshUploaderForVisibleAttachmentField(h===true)}else{if(this.model.get("showOrHide")==="ENABLE"||this.model.get("showOrHide")==="DISABLE"){this.$el.toggleClass(e.CONDITIONAL.ENABLECLASS,h===true);this.$el.toggleClass(e.CONDITIONAL.DISABLECLASS,h===false);if(this.$el.hasClass(e.CONDITIONAL.DISABLECLASS)){this.$el.find("input, textarea, select").attr("readonly","readonly").attr("disabled","disabled")}else{this.$el.find("input, textarea, select").prop("readonly",false).prop("disabled",false)}}}},refreshUploaderForVisibleAttachmentField:function(g){if(g&&this.model.get("inputType")==="FILE_CHOOSER"){App.EventBus.trigger("fileUpload:refreshUploaderIfRequired")}},hasSameConditionState:function(g){return(g&&(this.$el.hasClass(e.CONDITIONAL.SHOWCLASS)||this.$el.hasClass(e.CONDITIONAL.ENABLECLASS)))||(!g&&(this.$el.hasClass(e.CONDITIONAL.HIDECLASS)||this.$el.hasClass(e.CONDITIONAL.DISABLECLASS)))}};_.extend(c,f)}())}),(function(b,a){(function(){_.extend(App.Debug.usage.descr,{"printFields()":"print field data for all fields","printFieldsForPage(1)":"print field data for 1-based pageNo","printFieldsMeta()":"print field meta data","printFieldsWhere(clause)":'print field data matching clause, eg. {inputType: "TEXT_FIELD", required: true}',"showTabFields()":"show tab order of fields","toggleFieldHover()":"toggle the field info box on hover (CMD/CTRL hover in & out), \npass boolean argument to force state. "});var f="";App.Debug.showTabFields=function(g){if(f){jQuery("."+f).toggle(g);return}f="tabclass-"+(+new Date());jQuery(".pdfFormField [tabindex]").each(function(){var h=jQuery(this).parents(".pdfFormField");jQuery('<b class="'+f+'" style="position: absolute; border:1px solid; background-color: lightblue; padding: 0 .5em">'+this.tabIndex+"</b>").css({top:h[0].offsetTop-14,left:h[0].offsetLeft-16}).insertBefore(h)})};App.Debug.printFieldsMeta=function(i){var k=_.last(arguments),h=_.isObject(k)&&k,j=h?(new Backbone.Collection(h)):App.appView.fieldsViewer.collection,m={},n=_.isString(i)&&arguments,g=!n&&!!i,l=!n&&i||{};_(n||["inputType","contentType","validationRule","hidden","readOnly","required","role"]).each(function(o){m[o]=_.chain(j.pluck(o)).compact().countBy().value()});!n&&_(["conditions","locations"]).each(function(o){m[o+" by count"]=_.chain(j.pluck(o)).pluck("length").countBy().value()});!n&&(m["locations by page"]=_.chain(j.pluck("locations")).flatten().pluck("page").countBy().value());l["Fields Meta"+(h?" for subset":"")]=m;return g?l:App.Debug.print(l)};App.Debug.printFields=function(){return c("Fields")};App.Debug.printFieldsForPage=function(h){var g=_(App.appView.fieldsViewer.collection.getFieldsForPage(h)).pluck("model");return c("Fields for page "+h,g)};App.Debug.printFieldsWhere=function(h){var g=App.appView.fieldsViewer.collection.where(h);return c("Fields where "+JSON.stringify(h),g)};App.Debug.toggleFieldHover=e;if(location.href.search("local.corp.echosign.com")>-1){jQuery(_.delay(e,1500))}function c(h,g){var i={};App.Debug.printFieldsMeta(i,g);g=g||App.appView.fieldsViewer.collection.models;i[h]=_(g).invoke("toJSON");App.Debug.print(i);return g.length}var d=false;function e(g){var h="mouseenter.fieldDebug mouseleave.fieldDebug",i=jQuery("#document");if(typeof g!=="undefined"){d=!!g}else{d=!d}if(!d){i.off(h);return}i.on(h,".pdfFormField",function(q){if(!q.ctrlKey&&!q.metaKey){return}var j=jQuery(q.currentTarget).data("fieldname"),n=App.appView.fieldsViewer,k=n.collection.where({name:j})[0],r=q.type==="mouseenter",m,l;if(!k){k=n.collection.where({originalName:j})[0];j=k.get("name")}m=k.attributes.locations.length;l=k.attributes.conditions.length;var o=jQuery(q.currentTarget).popover({title:function(){return j+(m>1?" / "+m+" locations ":" ")+(l>0?" - "+l+" conditions":"")+'<a class="close">&times;</a><span  class="glyphicon glyphicon-new-window" style="opacity:.3;float:right;font-size:1em;margin-right:6px;cursor:pointer;top:4px" onclick="App.Debug.printFieldsWhere({name:\''+j+"'}); return false;\"></span>"},html:true,placement:"left",container:"body",content:JSON.stringify(k.attributes).replace(/,\s?\"/g,",<br>").replace(/\"\:/g,": ").replace('{"',"{"),template:'<div class="popover" style="height: 400px; max-height: 400px; overflow-y: auto; width:300px;line-height:1em;"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-body"></div></div>',sanitize:false}).data("bs.popover");o.$tip=jQuery(o.getTipElement());o.$element.attr("data-original-title","");r?o.show():o.destroy();o&&o.$tip.on("click",".close",function(){jQuery(q.currentTarget).popover("dispose")});if(m>1&&r){jQuery('#document .pdfFormField[data-fieldname="'+j+'"]').not(q.currentTarget).slideUp().slideDown()}})}}())}),(function(b,a){(function(){var d=".pdfFormField",c=".condition-hide,.condition-disable",g=":not(.non_required_link)",f=":not(.pdf_signature)";var e=Backbone.View.extend({appEvents:{"agreementView:pageRendered":"renderFields","fields:requiredFields":"onRequiredFields","agreementView:contentRendered":"onContentRendered","fields:resetValue":"onFieldsReset"},initialize:function(h){this.options=h;this.listenTo(App.EventBus,{"fields:focus-to":this.focusTo,"fields:focus-first":_.partial(this.focusFirst,false),"fields:focus-next":_.partial(this.focusNext,false),"fields:focus-prev":_.partial(this.focusPrev,false),"fields:focus-first-todo":_.partial(this.focusFirst,true),"fields:focus-next-todo":_.partial(this.focusNext,true),"fields:focus-prev-todo":_.partial(this.focusPrev,true),"fields:focus-required":_.partial(this.focus,"required"),"fields:focus-signature":_.partial(this.focus,"signature"),"fields:focus-initials":_.partial(this.focus,"initials"),"fields:focus-attachment":_.partial(this.focus,"attachment"),"fields:focus-invalid":_.partial(this.focus,"invalid")});if(this.options.digSigRemoteSigning){f=""}},onContentRendered:function(h){this.setElement(h.$pageList,false);if(this.viewList){this.viewList.sort()}},getFieldsContainer:function(){return this.$el},onRequiredFields:function(i,h,k){var j=(!this.hasRequiredFields()&&this.hasFields());App.EventBus.trigger("fields:requiredCount",h,i.invalid,j,k)},onFieldsReset:function(){this.collection.is_autosaved=false},init:function(){var h=this.options.documentData||{};this.values=new App.Collections.ValuesList(h.values||{});this.collection=new App.Collections.FieldList(h.fields,h.links);return this},hasFields:function(){return this.collection.has_fields},hasVisibleFields:function(){return this.collection.visible_fields>0},isAutosaved:function(){return this.collection.is_autosaved},hasRequiredFields:function(){return this.collection.hasRequiredFields},hasDigitalSignatureField:function(){return this.collection.digitalSignatureFieldPresent},areTodosDone:function(){return this.collection.isDone()},getTodosSelector:_.once(function(){return _(App.Models.Field.TODO_TYPES).map(function(h){return".todo-"+h}).join(",")}),renderFields:function(i){var h=this.options.viewFactory;_(this.collection.getFieldsForPage(i.pageNo)).each(function(j){var k;if(j.model.get("hidden")){return}k=h({model:j.model,locationIndex:j.locationIndex,$parent:i.container,viewList:this.viewList,dragHandler:this.dragHandler||null});if(!k){return}k.renderInto(i.container);if(this.viewList){this.viewList.add(k,{sort:false})}},this)},addNewField:function(j,k){var i=getAppViewHelper(this.options).pageViewer.getPageElement(j.location.page),h=j.model;this.collection.add(h);j.appendTo(i);if(this.viewList){this.viewList.add(j,{sort:false});this.viewList.sorted=false;j.viewList=j.options.viewList=this.viewList}j.pageInfo=getAppViewHelper(this.options).getPageInfo(j.location.page);j.options.$parent=i;j.options.dragHandler={handleDragStop:_.bind(this.handleFieldDragStop,this)};if(k){j.setFocus();getAppViewHelper(this.options).fieldSelectionViewer.clearSelection();j.select()}},getInputData:function(){return this.collection.getSubmitData()},getAutoSavedData:function(){return this.collection.getAutoSavedData()},getFirstTabbableField:function(j){var h=j?"":":not(.done)",k=":tabbable",i=jQuery(d+h+g+f+" [data-tabindex]"+k).parent(d).not(c);return i.length?i.first():null},getLastTabbableField:function(){var i=":tabbable",h=jQuery(d+g+f+" [data-tabindex]"+i).last().parent(d).not(c);return h.length?h.first():null},getFirstTabbableFieldIndex:_.memoize(function(m){var i=m?"":":not(.done)",n=":tabbable",l="tabindex",k="[data-"+l+"]",h=[d,g,f,i," ",k,n].join(""),j=jQuery(h).first();return j.length?j.first().data(l):null}),getLastTabbableFieldIndex:_.memoize(function(){var l=":tabbable",k="tabindex",j="[data-"+k+"]",h=[d,g,f," ",j,l].join(""),i=jQuery(h).last();return i.length?i.first().data(k):null}),focusNext:function(h,i){if(!h||i){return this._moveFocus(1,i,h)}var j=this.$(this.getTodosSelector()).not(c);j.first().find("[tabindex]").trigger("focus")},focusPrev:function(h,i){if(!h||i){this._moveFocus(-1,i,h)}else{var j=this.$(this.getTodosSelector()).not(c);j.last().find("[tabindex]").trigger("focus")}},focusFirst:function(h,i){this._moveFocus("first",i,h)},focusTo:function(h){this._moveFocus(0,h,false)},focus:function(h){jQuery(d+".todo-"+h+":first [tabindex]").trigger("focus")},isTodo:function(h){return/\btodo-(?!done)\b/.test(h.closest(d).attr("class"))},handleFieldDragStop:function(t,h,r){var l=t.$el.getOffset(),k=l.left,j=l.top,i=r.helper.data("dropPage"),o,n,w,v,s,q,m,p,u;o=getAppViewHelper(this.options).pageViewer.getPageElement(i);n=o.getOffset();w=n.left;v=n.top;s=k-w;q=j-v;m=t.fromPx(s);p=t.fromPx(q);u={left:m,top:p,page:i};return u},hasFileAttachment:function(){if(this.collection.findWhere({contentType:"DATA",inputType:"FILE_CHOOSER"})){return true}return false},_moveFocus:function(p,l,j,n){var q="data-tabindex",o="["+q+"]",i=l?(l.is(o)?l:jQuery(o,l)):this.$(d+".focused "+o),m=p==="first"&&(p=1)?this.collection.getFirstTabIndex():+(i.attr(q)||0)+p,k=[d," [",q,"=",m,"]"].join(""),h;if(m<0||!i.length){if(j&&(p===-1)){this.focusPrev(j)}return}if(m>this.collection.getLastTabIndex()){if((j||n)&&!this.collection.isDone()){j?this.focusNext(j,null):this.focusFirst(j)}return}h=this.$(k);if(!h.length){var r=[d,"[",q,"=",m,"]"].join("");h=this.$(r)}if(!h.length||!(h.is(":visible")&&(h[0].offsetWidth>0||h[0].offsetHeight>0))||h.parents(d).is(c)||!h.parents(d).is(g)||(f===""?false:!h.is(f))||!h.is(":tabbable")){return this._moveFocus(p,h,j,true)}if(j&&!this.isTodo(h)){return this._moveFocus(p,h,j,true)}h.trigger("focus")},remove:function(){if(this.viewList){this.viewList.invoke("remove")}if(this.collection){this.collection.reset();this.collection=null}this.stopListening()}});App.ns("Views").FieldsViewer=e}())})])});(function(){var b=App.Api.Agreements;var a=b.Base.extend({allowedCRUD:["update"],urlRoot:function(){return App.Api.Agreements.AgreementV6.prototype.urlRoot()},url:function(){return this.urlRoot()+"/"+this.get("id")+"/state"},initialize:function(c,d){if(d&&d.xApiClient){this.xApiClient=d.xApiClient}if(d&&d.workflow){this.listenTo(d.workflow,"change:authoringInfo",function(e,f){this.set("authoringRequested",f.defaultValue);this.stopListening(d.workflow)})}},save:function(d,c){var e={};if(!_.isUndefined(this.xApiClient)){e["x-api-client-id"]=this.xApiClient}e["If-Match"]=d["If-Match"];c.headers=_.extend(c.headers||{},e);return this._super(d,c)},toJSON:function(){v6TransformedRequestBody={};if(this.get("authoringRequested")){v6TransformedRequestBody.state="AUTHORING"}else{v6TransformedRequestBody.state="IN_PROCESS"}return v6TransformedRequestBody},defaults:{authoringRequested:false}});App.Api.Agreements.AgreementStateV6=a})();(function(){var a=App.Api.Agreements,c=1,d="DRAFT";var b=a.Agreement.extend(a.NewAgreement.prototype);b=b.extend({allowedCRUD:["update","read"],urlRoot:function(){return App.Api.getServiceUri("agreements","v6")},initialize:function(e,f){this._super(f);if(f&&f.xApiClient){this.xApiClient=f.xApiClient}},parse:function(f){var e={};_.mapObject(f,function(h,g){var i;switch(g){case"securityOption":e.securityOptions={protectOpen:!_.isUndefined(h.openPassword)};break;case"participantSetsInfo":i=e.participantSetInfos||[];e.participantSetInfos=i.concat(h);break;case"ccs":i=e.participantSetInfos||[];_.each(h,function(j){i.push({participantSetMemberInfos:[{email:j.email,label:j.label}],roles:["CC"]})});e.participantSetInfos=i;break;case"fileInfos":e.fileInfos=_.pluck(h,"document");break;case"formFieldLayerTemplates":e.formFieldLayerTemplates=_.pluck(h,"document");break;case"mergeFieldInfo":e.mergeFieldInfo=h;break;case"vaultingInfo":e.vaultingEnabled=h.enabled;break;case"postSignOption":e.postSignOptions=h;break;default:e[g]=h}});if(e.participantSetInfos){e.participantSetInfos=JSON.parse(JSON.stringify(e.participantSetInfos),function(g,h){switch(g){case"memberInfos":this.participantSetMemberInfos=h;break;case"role":this.roles=[h];break;case"name":this.participantSetName=h;break;case"order":this.signingOrder=h;break;case"securityOption":this.securityOptionsWithMetadata=h;this.securityOptions=[h.authenticationMethod];break;default:return h}})}if(e.fileInfos){e.fileInfos=JSON.parse(JSON.stringify(e.fileInfos),function(g,h){if(g==="id"){this.documentId=h}else{return h}})}if(e.formFieldLayerTemplates){e.formFieldLayerTemplates=JSON.parse(JSON.stringify(e.formFieldLayerTemplates),function(g,h){if(g==="documentId"){this.documentId=h}else{return h}})}this.documents=new App.Api.Agreements.Documents({},{documents:e.fileInfos});this.v6AgreementInfo=f;return e},toJSON:function(){var e=this._super(),h={},g,f=this;_.mapObject(e.documentCreationInfo,function(j,i){switch(i){case"securityOptions":j.protectOpen&&!j.openPassword&&(j.openPassword="");delete j.protectOpen;h.securityOption=j;break;case"recipientSetInfos":h.participantSetsInfo=j;break;case"postSignOptions":h.postSignOption=j;break;default:h[i]=j}});h.fileInfos=JSON.parse(JSON.stringify(h.fileInfos),function(i,j){if(i==="agreementDocumentId"){this.document={id:j}}else{if(i==="documentURL"){this.urlFileInfo=j}else{return j}}});if(this.attributes.formFieldLayerTemplates){h.formFieldLayerTemplates=JSON.parse(JSON.stringify(this.attributes.formFieldLayerTemplates),function(i,j){if(i==="id"){this.document={id:j}}else{return j}})}if(this.agreementSettingsInfo){h.agreementSettingsInfo=this.agreementSettingsInfo}if(this.attributes.mergeFieldInfo){h.mergeFieldInfo=this.attributes.mergeFieldInfo}if(h.ccs&&h.ccs.length){h.ccs=h.ccs.map(function(l){var j={},i=f.get("workflow"),k=i.get("ccsListInfo");if(k&&k.length){j=l}else{j.email=l}return j})}h.participantSetsInfo=JSON.parse(JSON.stringify(h.participantSetsInfo),function(i,j){switch(i){case"recipientSetMemberInfos":this.memberInfos=j;break;case"recipientSetName":this.name=j;break;case"recipientSetRole":this.role=j;break;case"securityOptions":j[0]&&j[0].authenticationMethod==="PASSWORD"&&_.isUndefined(j[0].password)&&(j[0].password="");this.securityOption=j[0];break;case"phoneInfos":this.phoneInfo=j[0];break;case"signingOrder":this.order=j;break;default:return j}});if(h.signatureFlow===App.Models.Agreement.SIGNATURE_FLOW.PARALLEL){_.each(h.participantSetsInfo,function(i){i.order=c})}else{if(h.signatureFlow===App.Models.Agreement.SIGNATURE_FLOW.SEQUENTIAL){g=1;_.each(h.participantSetsInfo,function(i){i.order=g++})}}if(this.attributes.expirationTime){h.expirationTime=this.attributes.expirationTime}h.status=d;if(this.get("workflowId")){h.workflowId=this.get("workflowId");this.handleDocumentVisibility(f,h);this.appendLabelToFileInfo(f,h)}return h},handleDocumentVisibility:function(e,f){f.documentVisibilityEnabled=e.get("documentVisibilityEnabled");if(!_.isUndefined(f.documentVisibilityEnabled)&&f.documentVisibilityEnabled==true){_.each(f.participantSetsInfo,function(g){_.each(e.recipients.models,function(h){if(!_.isUndefined(g.label)&&g.label==h.get("label")){g.visiblePages=h.get("visiblePages")}})})}},appendLabelToFileInfo:function(e,f){var g={};_.each(e.fileInfos.models,function(h){if(h.get("agreementDocumentId")){g=_.filter(f.fileInfos,function(i){return(_.isUndefined(i.label)&&i.document&&i.document.id==h.get("agreementDocumentId"))})[0]}else{if(h.get("transientId")){g=_.findWhere(f.fileInfos,{transientDocumentId:h.get("transientId")})}else{if(h.get("libraryDocumentId")){g=_.filter(f.fileInfos,function(i){return _.isUndefined(i.label)&&i.libraryDocumentId==h.get("libraryDocumentId")})[0]}else{if(h.getDownloadUrl&&h.getDownloadUrl()){g=_.filter(f.fileInfos,function(i){return _.isUndefined(i.label)&&i.urlFileInfo&&i.urlFileInfo.url.indexOf(h.getDownloadUrl())!==-1})[0]}else{g=_.filter(f.fileInfos,function(i){return _.isUndefined(i.label)&&i.urlFileInfo&&i.urlFileInfo.url.indexOf(h.get("@microsoft.graph.downloadUrl"))!==-1})[0]}}}}g.label=h.get("fileLabel")})},defaults:{signatureType:"ESIGN",securityOptions:{},callbackInfo:"",locale:"",ccs:[],externalId:{},vaultingInfo:{},message:null,fileInfos:[],formFieldLayerTemplates:[],mergeFieldInfo:{},reminderFrequency:"",postSignOption:{},name:""},attributesNotEditableBySendJs:{callbackInfo:"",externalId:{},postSignOptions:{},formFieldLayerTemplates:[],mergeFieldInfo:{}},fetch:function(e){var f={};if(!_.isUndefined(this.xApiClient)){f["x-api-client-id"]=this.xApiClient;e.headers=_.extend(e.headers||{},f)}return this._super(e)},save:function(f,e){var g={};if(!_.isUndefined(this.xApiClient)){g["x-api-client-id"]=this.xApiClient;e.headers=_.extend(e.headers||{},g)}return this._super(f,e)},convertIntoV5:function(f){var e={};ccsList=e.ccs||[],fileInfos=e.fileInfos||[],securityOption=e.securityOption||[],agrParticipants=e.recipientSetInfos||[],recipientGroupNew=[],recipientSetInfos=[];_.mapObject(f.attributes,function(h,g){switch(g){case"agreementNameInfo":e.name=h.defaultValue;break;case"ccsListInfo":_.each(h,function(i){_.each(i.defaultValues,function(j){ccsList.push(j)})});e.ccs=ccsList;break;case"fileInfos":_.each(h,function(i){fileInfos.push({libraryDocumentName:[i.name]})});e.fileInfos=fileInfos;break;case"localeInfo":e.locale=h.defaultValue;break;case"messageInfo":e.message=h.defaultValue;break;case"passwordInfo":securityOption.push({openPassword:[h.defaultValue]});e.securityOption=securityOption;break;case"participationStepsInfo":recipientSetInfos=[];_.each(h,function(i){agrParticipants=e.recipientSetInfos||[];recipientGroup=[];_.each(i.defaultValues,function(j){recipientGroup.push({email:j})});agrParticipants.label=i.label,agrParticipants.roles=i.allowedRoles,agrParticipants.allowedAuthenticationMethods=i.allowedAuthenticationMethods,agrParticipants.required=i.required,agrParticipants.participantSetMemberInfos=recipientGroup,agrParticipants.editable=i.editable;recipientSetInfos.push(agrParticipants)});e.participantSetInfos=recipientSetInfos;break;case"status":e.status="DRAFT";break;default:e[g]=h}});_.extend(this.attributes,e)},customComposeMapping:function(j){var e,g=this,i=0,h=this.get("ccs"),f;_.mapObject(j.attributes,function(l,k){switch(k){case"participationStepsInfo":e=g.get("participantSetInfos")||[];_.each(l,function(p){var o=_.findWhere(g.get("participantSetInfos"),{label:p.label});if(o==null){o={};var n={};o.participantSetMemberInfos=[];if(p.defaultValues!=null){n.email=p.defaultValues[0]}else{n.email=""}n.securityOptions=[];n.securityOptions.push(p.allowedAuthenticationMethods[0]);o.participantSetMemberInfos.push(n);_.extend(o,p,{signingOrder:i++});e.push(o);if(g.get("participantSetInfos")==null){g.set("participantSetInfos",e)}}else{o&&_.extend(o,p,{signingOrder:i++})}});break;case"fileInfos":g.set("workflowFileInfos",[]);agreementfileInfos=g.get("workflowFileInfos");var m=l;_.each(m,function(o){var n=_.findWhere(agreementfileInfos,{label:o.label});_.isUndefined(n)?agreementfileInfos.push(o):_.extend(n,o)});break;case"ccsListInfo":if(!h.length){f=[];_.each(l,function(p){var o=p.defaultValues,n=p.label;o&&_.each(o,function(q){f.push({email:q,label:n})})});e=g.get("participantSetInfos")||[];_.each(f,function(n){e.push({participantSetMemberInfos:[{email:n.email,label:n.label}],roles:["CC"]})});if(g.get("participantSetInfos")==null){g.set("participantSetInfos",e)}}break}})},hasParticipants:function(){if(this.attributes.participantSetInfos===undefined){return false}else{return this.attributes.participantSetInfos.length>0}},getSigningParticipants:function(){if(this.signingParticipants){return this.signingParticipants}this.signingParticipants=_.chain(this.get("participantSetInfos")).filter(function(e){return !_.isUndefined(e.signingOrder)}).map(function(e){var f=e.participantSetMemberInfos[0].email;if(!f){return e}f=f.replace(/\s*\(\d{1,2}\)$/,"");e.participantSetMemberInfos[0].email=f;return e}).sort(function(g,h){var f=g.signingOrder;var e=h.signingOrder;if(f!==e){if(f>e||_.isUndefined(f)){return 1}if(f<e||_.isUndefined(e)){return -1}}return g.participantSetMemberInfos[0].email>h.participantSetMemberInfos[0].email?1:-1}).value();return this.signingParticipants},validateOnWorkflow:function(){var h=[],e=false,f=this.get("workflow").get("ccsListInfo")?this.get("workflow").get("ccsListInfo"):[],g=this.get("workflow").get("expirationInfo");ccLessThenBucket=[],ccGreaterThenBucket=[],isSelfAddedAsCc=false,sendersEmails=this.getSendersEmails(),wfileInfos=this.get("workflow").get("fileInfos"),wcnt=0,acnt=0,recipientMems=this.recipients.models;recipientMems.forEach((function(i){if(i.attributes.isGroup&&i.attributes.maxListCount+1<i.collection.length){e=true;h.push({key:"recipientGrp:maxError",message:i18n.js2.custom_compose_max_recipient_grp_error_1(i.attributes.maxListCount+1,i.get("label"))})}if(i.attributes.isGroup&&i.collection.length>1&&i.attributes.minListCount+1>i.collection.length){e=true;h.push({key:"recipientGrp:minError",message:i18n.js2.custom_compose_min_recipient_grp_error_1(i.attributes.minListCount-1,i.get("label"))})}}));if(this.get("workflow").get("messageInfo").required&&!this.get("message")){e=true;h.push({key:"agreement:messageEmpty",message:i18n.js2.custom_compose_message_area_required_error()})}wfileInfos.forEach((function(i){if(i.required==true){wcnt++;this.fileInfos.models.forEach((function(j){if(j.get("fileLabel")==i.label){acnt++}}))}}).bind(this));if(wcnt!=acnt){e=true;h.push({key:"fileupload:norequiredfiles",message:i18n.js2.required_file_error()})}f.forEach((function(j){var i=this.ccRecipients.filter(function(k){if(k.get("label")===j.label){return true}}).length;if(i<j.minListCount){ccLessThenBucket.push(j.label)}if(i>j.maxListCount){ccGreaterThenBucket.push(j.label)}}).bind(this));if(ccLessThenBucket.length){e=true;h.push({key:"agreement:ccCountLower",message:i18n.js2.custom_compose_cccount_lower_error(ccLessThenBucket.join(","))})}if(ccGreaterThenBucket.length){e=true;h.push({key:"agreement:ccCountHigher",message:i18n.js2.custom_compose_cccount_higher_error(ccGreaterThenBucket.join(","))})}this.ccRecipients.forEach(function(i){if(_.contains(sendersEmails,i.get("email").toLowerCase())){isSelfAddedAsCc=true}});if(isSelfAddedAsCc){e=true;h.push({key:"agreement:senderAddedAsCC",message:i18n.js2.custom_compose_self_as_cc_error()})}if(g.visible&&((g.required&&!this.get("expirationTime"))||(this.get("deadlineCheckbox")&&!this.get("expirationTime")))){e=true;h.push({key:"agreement:missingExpiration",message:i18n.js2.custom_compose_expiration_required_error()})}if(e){return h}},getSendersEmails:function(){var e=App.Env.sharer||App.Env.user;return[e.email.toLowerCase(),e.realEmail.toLowerCase()]}});App.Api.Agreements.AgreementV6=b})();(function(){var a=Backbone.Model.extend({allowedCRUD:["read","update"],models:new Backbone.Collection(),urlRoot:function(){return App.Api.Agreements.AgreementV6.prototype.urlRoot()},url:function(){return this.urlRoot()+"/"+this.get("agreementId")+"/formFields/mergeInfo"},toJSON:function(){return{fieldMergeInfos:this.models.map(function(b){return{defaultValue:b.get("defaultValue"),fieldName:b.get("fieldName")}})}},validate:function(){var d=[],c=[],b=false;this.models.forEach(function(e){if(e.get("required")&&!e.get("defaultValue")){c.push(e.get("displayName"));e.set("error",true);b=true}});b&&d.push({key:"agreement:mergeField",message:i18n.js.custom_compose_merge_fields_required_error(c.join(", "))});if(b){return d}},save:function(d,c){var b=this;var e={success:function(i,g,h){var f=h.xhr.getResponseHeader("eTag");var j={"If-Match":f};c.headers=_.extend(c.headers||{},j);return Backbone.Model.prototype.save.call(b,d,c)}};return this.fetch(e)}});App.Api.Agreements.MergeInfo=a})();(function(){var a=App.Api.Agreements;var b={isCurrent:false,name:"",embeddedCode:"",expiration:"",url:""};var c=a.Base.extend({allowedCRUD:["create"],urlRoot:function(){return App.Api.Agreements.AgreementV6.prototype.urlRoot()},url:function(){return this.urlRoot()+"/"+this.get("agreementId")+"/views"},initialize:function(d,e){if(e&&e.xApiClient){this.xApiClient=e.xApiClient}},getNextURL:function(){var d=null;_.each(this.get("agreementViewList"),function(f){if(f.isCurrent){d=f.url}});if(d===null){return null}var e=!!App.Env.queryParam("noChrome");return App.Utils.appendOrUpdateUrlParam(d,{noChrome:e})},getSendProgressURL:function(){var d=null;_.each(this.get("agreementViewList"),function(f){if(f.name==="SEND_PROGRESS"){d=f.url}});var e=!!App.Env.queryParam("noChrome");return App.Utils.appendOrUpdateUrlParam(d,{noChrome:e})},save:function(f,e){var g={},d=App.Env.getEmbeddingClientId();if(!_.isUndefined(d)){g["Embedding-Application"]=d;e.headers=_.extend(e.headers||{},g)}return this._super(f,e)},waitUntilViewsReady:Backbone.retrySync("save",{doneCondition:function(){return this.get("agreementViewList").length!==0}}),toJSON:function(){return _.pick(this.attributes,"name","authoringViewConfiguration")},defaults:{agreementViewList:[]}});App.Api.Agreements.Views=c})();(function(){var a=Backbone.Model.extend({validate:function(h,j){if(!this.get("applicable")){return}var c=this.get("minDays"),g=this.get("maxDays"),e=h.daysUntilSigningDeadline,d=parseInt(e,10),f=_.isNaN(d),b=!f&&(d>=c),i=b&&(d<=g);if(!i){return f?i18n.js.compose_error_expiration_not_a_number():!b?i18n.js.compose_error_expiration_below_limit():i18n.js.compose_error_expiration_exceed_max(g)}},getDefaultValue:function(){return this.get("modifyDocument")?this.get("defaultValue"):parseInt(this.get("defaultValue"),10)},defaults:{modifyDocument:false,visible:true,editable:false,minDays:1,maxDays:0,applicable:false,required:false}});App.ns("Models").ExpirationInfo=a})();(function(){var a=Backbone.Model.extend({defaults:{minDays:1}});App.ns("Models").ExpirationInfoDateTimeBased=a})();(function(){var a=Backbone.Model.extend({toJSON:function(){var b=this._super();return{nameInfo:b}},defaults:{firstName:"",lastName:""},validateFirstName:function(){var b=this.get("firstName");if(b===undefined||b===""){return false}return true},validateLastName:function(){var b=this.get("lastName");if(b===undefined||b===""){return false}return true}});App.ns("Models").Name=a})();(function(){var a={EMPTY:0,WEAK:1,MEDIUM:2,STRONG:3,STRONG14:4},d={EMPTY:1,WEAK:6,MEDIUM:7,STRONG:8,STRONG14:14};var b=Backbone.Model.extend({initialize:function(f,e){this.isDummy=e&&e.isDummy;if(!this.get("passwordStrength")){this.set("passwordStrength",e&&e.requiredStrength?e.requiredStrength:c.EMPTY)}this.minLengthRequired=d[this.get("passwordStrength")];this.validationErrors={}},validate:function(){this.validationErrors={};if(!this.hasDummyPassword()){var g=this.get("password")||"",f=this.get("confirmPass")||"",h=a[this.getPasswordStrength(g)],e=/[^\x20-\x7E]/;g=g.trim();f=f.trim();if(h<a[this.get("passwordStrength")]){this.validationErrors.strength=i18n.js.compose_auth_password_strength_error()}if(g!==f){this.validationErrors.confirm=i18n.js.compose_auth_password_confirmation_error()}if(g.length<this.minLengthRequired){this.validationErrors.min_len=i18n.js.compose_auth_password_too_short(this.minLengthRequired)}if(g.length>32){this.validationErrors.max_len=i18n.js.compose_auth_password_too_long()}if(e.test(g)){this.validationErrors.chars=i18n.js.compose_auth_password_invalid_chars()}}if(_.keys(this.validationErrors).length===0){this.trigger("password:no_errors")}},toJSON:function(){if(this.hasDummyPassword()){return{}}return{password:this.get("password")}},hasDummyPassword:function(){return this.isDummy},removeDummyPassword:function(){delete this.isDummy},getPasswordStrength:function(l){
/*!
       The contents of this file are subject to the Mozilla Public License Version 1.1 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.mozilla.org/MPL/

       Software distributed under the License is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language governing rights and limitations under the License.

       The Original Code is mozilla.org code.

       The Initial Developer of the Original Code is Netscape Communications Corporation. Portions created by Paul Picazzo are Copyright (C) 2010 Adobe Corp. All Rights Reserved.

       Contributor(s):
       Bob Lord <lord@netscape.com>

       Date: 2014-05-01T17:11Z
       */
;var h=(l.length),i=0,k,g,m,o,e,f,j,p,n;if(h<6){return c.EMPTY}if(h===6){return c.WEAK}k=l.replace(/[0-9]/g,"");g=(h-k.length);if((g>0)){i+=1}m=l.replace(/[A-Z]/g,"");o=(h-m.length);if(o>0){i+=1}e=l.replace(/[a-z]/g,"");f=(h-e.length);if(f>0){i+=1}n=(h>=14)&&(i>=3);if(n){return c.STRONG14}j=(h>=8)&&(i>=3);if(j){return c.STRONG}p=(h>=7)&&(i>=2);if(p){return c.MEDIUM}return c.WEAK},defaults:{password:"",confirmPass:""}});var c=b.STRENGTH=App.Utils.makeObj(["EMPTY","WEAK","MEDIUM","STRONG","STRONG14"]);App.ns("Models").Password=b})();(function(){var a=/^[\d\-\(\)\s\.]+$/,d=/\d/g,b=64;var c=Backbone.Model.extend({validate:function(g,f){var e=this.get("phone")||"";return App.Models.Phone.validate({phone:e})},toJSON:function(){var e=this._super();return{phoneInfo:e}},defaults:{phone:"",countryCode:"",countryIsoCode:""}},{validate:function(g,f){var e=g.phone,h=(e.match(d)||[]).length;if(h<6||e.length>b||!a.test(e)){return true}}});c.DEFAULT_COUNTRY_ISO_CODE="US";c.COUNTRY_CODES={AF:93,AL:355,DZ:213,AD:376,AO:244,AI:1264,AQ:672,AG:1268,AR:54,AM:374,AW:297,AU:61,AT:43,AZ:994,BS:1242,BH:973,BD:880,BB:1246,BY:375,BE:32,BZ:501,BJ:229,BM:1441,BT:975,BO:591,BA:387,BW:267,BR:55,IO:1,BN:673,BG:359,BF:226,MM:95,BI:257,KH:855,CM:237,CA:1,CV:238,CW:599,KY:1345,CF:236,TD:235,CL:56,CN:86,CX:61,CC:61,CO:57,KM:269,CD:243,CG:242,CK:682,CR:506,HR:385,CY:357,CZ:420,DK:45,DJ:253,DM:1767,DO:1809,TL:670,EC:593,EG:20,SV:503,GQ:240,ER:291,EE:372,ET:251,FK:500,FO:298,FJ:679,FI:358,FR:33,GF:594,PF:689,GA:241,GM:220,GE:995,DE:49,GH:233,GI:350,GR:30,GL:299,GD:1473,GP:590,GT:502,GN:224,GW:245,GY:592,HT:509,HN:504,HK:852,HU:36,IS:354,IN:91,ID:62,IQ:964,IE:353,IL:972,IT:39,CI:225,JM:1876,JP:81,JO:962,KZ:7,KE:254,KI:686,KR:82,KW:965,KG:996,LA:856,LV:371,LB:961,LS:266,LR:231,LY:218,LI:423,LT:370,LU:352,MO:853,MK:389,MG:261,MW:265,MY:60,MV:960,ML:223,MT:356,MH:692,MQ:596,MR:222,MU:230,YT:262,MX:52,FM:691,MD:373,MC:377,MN:976,ME:382,MS:1664,MA:212,MZ:258,NA:264,NR:674,NP:977,NL:31,AN:599,NC:687,NZ:64,NI:505,NE:227,NG:234,NU:683,NF:672,NO:47,OM:968,PK:92,PS:970,PA:507,PG:675,PY:595,PE:51,PH:63,PN:870,PL:48,PT:351,QA:974,RE:262,RO:40,RU:7,RW:250,SH:290,KN:1869,LC:1758,PM:508,VC:1784,WS:685,SM:378,ST:239,SA:966,SN:221,SD:249,CS:382,RS:381,SC:248,SL:232,SG:65,SK:421,SI:386,SB:677,SO:252,ZA:27,GS:716,ES:34,LK:94,SR:597,SJ:1,SZ:268,SE:46,CH:41,TW:886,TJ:992,TZ:255,TH:66,TG:228,TK:690,TO:676,TT:1868,TN:216,TR:90,TM:993,TC:1649,TV:688,UG:256,UA:380,AE:971,GB:44,US:1,UM:1,UY:598,UZ:998,VU:678,VA:39,VE:58,VN:84,VG:850,WF:681,EH:1,XK:383,YE:967,ZM:260,ZW:263};c.AVAILABLE_COUNTRY_ISO_CODES="AR AU AT AN BE BR BG BM BW CA CL CN CX CC CO CZ CW DK EC EE FI FR DE GR HN HK HU IS IN ID IE IL IT JP KZ KI LV LT LU MY MX MN NL NZ NO PH PL SD PT RO RU SG SK ZA ES XK SE CH TW TH TR UA GB US VA VN".split(" "),App.ns("Models").Phone=c})();(function(){var a=Backbone.Model.extend({initialize:function(b){this.setHeaderActionData();this.setAppFooterData();this.setHudData()},setHeaderActionData:function(){var c=App.appView.model.getTemplateData();var b=_.extend({},c,{showCopyright:!App.appView.model.get("customTermsOfUse")});this.set(b,{silent:true})},setAppFooterData:function(){var b={help:i18n.js.sidebar_menu_help(),terms:i18n.js.sidebar_menu_terms(),privacy:i18n.js.sidebar_menu_privacy(),cookies:i18n.js.sidebar_menu_cookies(),copyrightYear:(new Date).getFullYear(),adobeSystems:i18n.js.sidebar_menu_adobeSystems(),allRightsReserved:i18n.js.sidebar_menu_allRightsReserved(),consumerDisclosure:i18n.js.sidebar_menu_consumerDisclosure(),liquidModeHint:i18n.js2.esign_mobile_view_hint(),supportURL:App.Env.supportURL,termsOfUseURL:App.Env.termsOfUseURL,privacyPolicyURL:App.Env.privacyPolicyURL,consumerDisclosureURL:App.Env.consumerDisclosureURL,marketingURL:App.Env.marketingURL,cookiesURL:App.Env.cookiesURL,addLangSelect:App.Env.addLangSelect,showSupport:App.Env.showSupport,availableUserLocales:App.Env.availableUserLocales,noChrome:App.appView.model.get("noChrome")};this.set(b,{silent:true})},setHudData:function(){var b,c=App.appView.model.isPdfDownloadAllowed();b={showDownload:c,download:i18n.js.esign_HUD_download()};this.set(b,{silent:true})},defaults:{}});App.ns("Models").Sidebar=a}());(function(){var b={},c;var a=b.MODE=App.Utils.makeObj(["signature","initials","stamp"]);var d=b.TYPE=App.Utils.makeObj(["SCRIBBLE","IMAGE","TYPED"]);b.CONST={signatureDataPct:0.36,cursiveFontMag:{adobehanda:1.3,adobehandb:1.1,adobehandc:1.05,adobehandd:0.9}};if(typeof PDFForms==="undefined"){PDFForms={}}_.extend(PDFForms||{},{signatureDataPct:b.CONST.signatureDataPct});b=Backbone.Model.extend({initialize:function(){c=App.appView.model;this.is_dirty=false;this.on("change",function(){this.is_dirty=true;if(this.hasChanged("name")){this.nameChanged=true}},this);this.loadSignatureData()},setData:function(e){var g=false,f;if(e&&e.render){this.set("data",e,{silent:true})}else{this.unset("data",{silent:true})}if(e&&e.render&&e.render.vector){this.set("type",d.SCRIBBLE,{silent:true});g=true}else{if(e&&e.render&&e.render.image){this.set("type",d.IMAGE,{silent:true});g=true}else{if(!this.allowTyped()){if(this.allowScribble()){this.set("type",d.SCRIBBLE,{silent:true})}else{this.set("type",d.IMAGE,{silent:true})}}}}if(g){this.set("savedSignaturePopulated",true,{silent:true});if(this.isSignature()){f=App.appView.model.get("signerName");this.set("name",f?f:App.appView.model.get("user").name,{silent:true})}else{this.set("name",App.appView.model.get("user").initials,{silent:true})}}},fetchData:function(g){var f,e;if(!this.hasSignatureProfile(g)){return jQuery.Deferred().resolve().promise()}f=(g===a.signature)?new App.Api.Users.Signatures.Profile({id:App.Api.Users.ME_ID}):new App.Api.Users.Initials.Profile({id:App.Api.Users.ME_ID});return f.fetch().then(function(h){if(h&&h.render&&h.render.image){e=(g===a.signature)?new App.Api.Users.Signatures.Profile.Image({id:App.Api.Users.ME_ID}):new App.Api.Users.Initials.Profile.Image({id:App.Api.Users.ME_ID});return e.fetch().then(function(i){if(i){delete h.render.image.assetURI;h.render.image.bytes=i;return h}})}return h},function(){return null})},loadSignatureData:function(){if(c.get("mandatoryMobileSignatureCapture")){return}if(this.allowScribble()||this.allowImage()){return this.fetchData(this.get("mode")).then(_.bind(this.setData,this))}},validate:function(){var e=this.get("type"),g=this.get("data"),f=!!e&&!!this.get("name")&&(e===d.TYPED||(e===d.SCRIBBLE&&!!g&&g.render&&g.render.vector)||(e===d.IMAGE&&!!g&&g.render&&g.render.image));return !f},getCursiveFontMag:function(e){return(e in b.CONST.cursiveFontMag)?b.CONST.cursiveFontMag[e]:1},getSignatureInfoPct:function(){return b.CONST.signatureDataPct},getSignerName:function(){return this.get("name")},hasSignature:function(){return this.isValid()},isSignature:function(){return this.get("mode")===a.signature},isInitials:function(){return this.get("mode")===a.initials},isStamp:function(){return this.get("mode")===a.stamp},isTyped:function(){return this.get("type")===d.TYPED},isScribble:function(){return this.get("type")===d.SCRIBBLE},isImage:function(){return this.get("type")===d.IMAGE},allowTyped:function(){return(!this.allowScribble()&&!this.allowImage())||/TYPED/g.test(c.get("signatureInputTypes"))},allowScribble:function(){return/SCRIBBLE/g.test(c.get("signatureInputTypes"))},allowImage:function(){return/IMAGE/g.test(c.get("signatureInputTypes"))},isSavedSignaturePopulated:function(){return this.get("savedSignaturePopulated")===true},hasSignatureProfile:function(f){if(App.appView.model.has("isBulkSign")&&App.appView.model.get("isBulkSign")){return null}var e=App.appView.model.get("agreement").get("latestDocumentData");if(f===a.signature){return(e.savedSignature&&(e.savedSignature.data||e.savedSignature.seriouslySecureId))}return e.savedInitials&&(e.savedInitials.data||e.savedInitials.seriouslySecureId)},defaults:{mode:a.signature,type:"",data:"",name:"",signatureId:"",webIdentity:"",kba:false,saved:false}},b);App.ns("Models").Signature=b}());(function(){var b=App.Api.Widgets;var a=b.Widget.extend(b.NewWidget.prototype);a=a.extend({allowedCRUD:["update","read"],urlRoot:function(){return App.Api.getServiceUri("widgets","v6")},initialize:function(c,d){this._super(d);if(d&&d.xApiClient){this.xApiClient=d.xApiClient}},parse:function(f){var l={};_.mapObject(f,function(q,o){var p;var n;switch(o){case"securityOption":l.securityOptions={protectOpen:!_.isUndefined(q.openPassword)};break;case"additionalParticipantSetsInfo":p=l.additionalParticipantSetsInfo||[];l.additionalParticipantSetsInfo=p.concat(q);break;case"widgetParticipantSetInfo":n=l.widgetParticipantSetInfo||[];l.widgetParticipantSetInfo=n.concat(q);break;case"ccs":p=l.additionalParticipantSetsInfo||[];_.each(q,function(r){p.push({participantSetMemberInfos:[{email:r.email,label:r.label}],roles:["CC"]})});l.additionalParticipantSetsInfo=p;break;case"fileInfos":l.fileInfos=_.pluck(q,"document");break;case"formFieldLayerTemplates":l.formFieldLayerTemplates=_.pluck(q,"document");break;case"mergeFieldInfo":l.mergeFieldInfo=q;break;case"vaultingInfo":l.vaultingEnabled=q.enabled;break;case"postSignOption":l.postSignOptions=q;break;default:l[o]=q}});if(l.additionalParticipantSetsInfo){l.additionalParticipantSetsInfo=JSON.parse(JSON.stringify(l.additionalParticipantSetsInfo),function(n,o){switch(n){case"id":this.participantSetId=o;break;case"memberInfos":this.participantSetMemberInfos=o;break;case"role":this.roles=[o];break;case"name":this.participantSetName=o;break;case"order":this.signingOrder=o;break;case"securityOption":this.securityOptionsWithMetadata=o;this.securityOptions=[o.authenticationMethod];break;case"providerParticipantSetInfo":this.isPds=true;return o;break;default:return o}})}if(l.widgetParticipantSetInfo){l.widgetParticipantSetInfo=JSON.parse(JSON.stringify(l.widgetParticipantSetInfo),function(n,o){switch(n){case"memberInfos":this.participantSetMemberInfos=o;break;case"role":this.roles=[o];break;case"name":this.participantSetName=o;break;case"order":this.signingOrder=o;break;case"securityOption":this.securityOptionsWithMetadata=o;this.securityOptions=[o.authenticationMethod];break;default:return o}});var k=l.widgetParticipantSetInfo[0];var e=k.participantSetMemberInfos,d=e?e[0]:k,j={};j.authenticationMethod=_.first(d.securityOptions)||a.AUTH_METHODS.NONE;if(j.authenticationMethod===a.AUTH_METHODS.PHONE){var g=d.securityOptionsWithMetadata||{};j.phoneInfo=(new App.Models.Phone(g.phoneInfo)).toJSON().phoneInfo;if(App.appView.isDraftMode()){var h=parseInt(j.phoneInfo.countryCode,10);var c=_.findKey(App.Models.Compose.Phone.COUNTRY_CODES,function(o,n){if(o===h&&n===j.phoneInfo.countryIsoCode){return true}});if(!c){c=_.findKey(App.Models.Compose.Phone.COUNTRY_CODES,function(n){if(n===h){return true}});var m=App.appView.model.settings.get("availablePhoneCountryCodes");if(_.indexOf(m,c)===-1){var i=App.appView.model.settings.get("defaultPhoneCountryCode");if(_.indexOf(m,i)===-1){j.phoneInfo.countryCode="1";j.phoneInfo.countryIsoCode="US"}else{j.phoneInfo.countryIsoCode=i}}else{j.phoneInfo.countryIsoCode=c}}}}l.widgetParticipantSetInfo={participantSetId:k.participantSetId||k.id,participantId:d.id,label:k.label,editable:k.editable,required:k.required,visible:k.visible,email:d.email,emptyEmail:_.isEmpty(d.email),role:_(k.roles).without(App.Models.Agreement.ROLES.SENDER)[0]||"",privateMessage:k.privateMessage||"",securityOptions:j,allowedAuthenticationMethods:k.allowedAuthenticationMethods,allowedRoles:k.allowedRoles,visiblePages:k.visiblePages}}if(l.fileInfos){l.fileInfos=JSON.parse(JSON.stringify(l.fileInfos),function(n,o){if(n==="id"){this.documentId=o}else{return o}})}if(l.formFieldLayerTemplates){l.formFieldLayerTemplates=JSON.parse(JSON.stringify(l.formFieldLayerTemplates),function(n,o){if(n==="documentId"){this.documentId=o}else{return o}})}this.documents=new App.Api.Agreements.Documents({},{documents:l.fileInfos});this.v6WidgetInfo=f;return l},fetch:function(c){var d={};if(!_.isUndefined(this.xApiClient)){d["x-api-client-id"]=this.xApiClient;c.headers=_.extend(c.headers||{},d)}return this._super(c)},save:function(d,c){var e={};if(!_.isUndefined(this.xApiClient)){e["x-api-client-id"]=this.xApiClient;c.headers=_.extend(c.headers||{},e)}return this._super(d,c)},hasParticipants:function(){if(this.attributes.additionalParticipantSetsInfo===undefined){return false}else{return this.attributes.additionalParticipantSetsInfo.length>0}},hasCCParticipants:function(){return this.getCCParticipants().length>0},hasPdsParticipants:function(){return this.getPdsParticipants().length>0},getSigningParticipants:function(){if(this.signingParticipants){return this.signingParticipants}this.signingParticipants=_.chain(this.get("additionalParticipantSetsInfo")).filter(function(c){return !_.isUndefined(c.signingOrder)&&!c.isPds}).map(function(c){var d=c.participantSetMemberInfos[0].email;if(!d){return c}d=d.replace(/\s*\(\d{1,2}\)$/,"");c.participantSetMemberInfos[0].email=d;return c}).sort(function(e,f){var d=e.signingOrder;var c=f.signingOrder;if(d!==c){if(d>c||_.isUndefined(d)){return 1}if(d<c||_.isUndefined(c)){return -1}}return e.participantSetMemberInfos[0].email>f.participantSetMemberInfos[0].email?1:-1}).value();return this.signingParticipants},getCCParticipants:function(){return _.filter(this.get("additionalParticipantSetsInfo"),function(c){return _.contains(c.roles,"CC")})},getPdsParticipants:function(){return _.filter(this.get("additionalParticipantSetsInfo"),function(c){return c.isPds&&c.isPds===true})}});a.AUTH_METHODS=App.Utils.makeObj(["NONE","PASSWORD","PHONE","WEB_IDENTITY","KBA","ADOBE_SIGN","GOV_ID"]);App.Api.Widgets.WidgetV6=a})();(function(){var a=Backbone.Model.extend({initialize:function(){},allowedCRUD:["read"],url:"/123",hasFileInfos:function(){return _.size(this.get("fileInfos"))>0}});App.Api.Workflow=a})();(function(){var a=Backbone.Model.extend({initialize:function(){},allowedCRUD:["read"],url:function(){var b=this.get("workflowId");return App.Api.getServiceUri("workflows","v6")+"/"+b+"/compositionInfo"},hasFileInfos:function(){return _.size(this.get("fileInfos"))>0},hasMergeFieldInfos:function(){return _.size(this.get("mergeFieldsInfo"))>0},hasLibraryDocumentSpecified:function(){var c=this.get("fileInfos"),b=false;_.each(c,function(d){b=b||(d.workflowLibraryDocumentSelectorList&&d.workflowLibraryDocumentSelectorList.length>0)});return b}});App.Api.Workflow=a})();(function(){var a=Backbone.Collection.extend({model:Backbone.View,sorted:true,lineThreshold:10,initialize:function(){this.collections=[]},syncTo:function(){_(arguments).each(function(b){return this.collections.push(b)},this);return this},set:function(){throw new Error("set() is not valid for SortedViewList.")},add:function(c,d){var b=-1;d=d||{};if(!c){return}if(_.isArray(c)){throw new TypeError("Adding array of views not supported in SortedViewList.")}if(this.models.length===0){this.models.push(c);b=0}else{if(d.sort===false){b=this.models.push(c)-1;this.sorted=false}else{if(!this.sorted){this.models.push(c);this.sort()}else{b=_.sortedIndex(this.models,c,this.byRank,this);this.models.splice(b,0,c);b=-1;this.updateIndexes()}}}this._addReference(c,d);if(b>=0){c.sortedIndex=b}this.length=this.size();if(!d.silent){c.trigger("add",c,this,d)}if(d.sync!==false){d.trigger={type:"add",model:c.model};this.syncCollections(d)}return c},remove:function(b,c){this._super.apply(this,arguments);c=c||{};c.trigger={type:"remove",model:b.model};this.syncCollections(c);if(c.updateIndex!==false){this.updateIndexes()}return b},syncCollections:function(b){b=b||{};if(!this.collections.length){return}var d=_(this.models).pluck("model"),c=b.trigger;_(this.collections).invoke("reset",d,_.extend({silent:true},b));if(c&&!b.silent){_(this.collections).each(function(e){e.trigger(c.type,c.model,e,b)})}return this},sort:function(b){if(this.sorted&&!b){return this}this.sorted=true;if(this.models.length){this.models=_.sortBy(this.models,this.byRank,this)}this.updateIndexes();this.syncCollections();return this},updateIndexes:function(){this.each(function(b,c){b.sortedIndex=c})},getNext:function(c){var b=this.indexOf(c);if(b===-1||this.size()===b-1){return null}return this.at(b+1)},getPrev:function(c){var b=this.indexOf(c);if(b<1){return null}return this.at(b-1)},byRank:function(c){var e=c.getPosition(),b=Math.floor(e.top/this.lineThreshold),d=Math.floor(e.left);return b+d/10000}});App.ns("Collections").SortedViewList=a}());(function(){var a={};a.content='<a href="{{url}}" class="btn-sm pill-link {{checked}}" target="_blank"><span class="checked-icon"></span>{{label}}</a>';App.Templates.CheckedPill=a}());(function(){var a={};a.content=_.template('<p class="delegate-desc">{{description}}</p>    <label class="hidden-accessible" for="delegatee-email">{{emailPlaceholder}}</label>    <input type="text" class="form-control delegatee-email" id="delegatee-email" placeholder="{{emailPlaceholder}}" aria-label="{{emailPlaceholder}}"/>    <% if (isPhoneAuth) { %>    	<div class="phone-input">    	  <div class="country-codes-container"></div>    	  <input type="text" class="form-control delegatee-phone" placeholder="{{phonePlaceholder}}"/>      </div>    <% } %>    <label class="hidden-accessible" for="delegatee-message">{{messagePlaceholder}}</label>    <textarea row="5" class="form-control delegatee-message" id="delegatee-message" placeholder="{{messagePlaceholder}}" aria-label="{{messagePlaceholder}}"></textarea>    <br/>    <% if (showAdobeTerms) { %>      <div class="checkbox-a12" role="presentation">        <label class="control-label">          <input type="checkbox" aria-label="{{checkboxLabelForAdobeTermsAria}}" class="ec-checkbox checkbox-input form-control adobe-terms"/><span class="checkbox-image"></span>        </label>        <span id="delegatee-terms" class="ec-checkbox-label">{{checkboxLabelForAdobeTerms}}</span>      </div>    <% } %>');App.Templates.DelegateModal=a}());(function(){var a={};a.content=_.template('<p class="delegate-desc">{{description}}</p>    <label class="hidden-accessible" for="delegatee-email">{{emailPlaceholder}}</label>    <input type="text" class="form-control delegatee-email" id="delegatee-email" placeholder="{{emailPlaceholder}}" aria-label="{{emailPlaceholder}}"/>    <% if (isPhoneAuth) { %>    	<div class="phone-input">    	  <div class="country-codes-container"></div>    	  <input type="text" class="form-control delegatee-phone" placeholder="{{phonePlaceholder}}"/>      </div>    <% } %>    <% if (requireRecipientNameEnabled) { %>      <div class="fullNameInput">        <label class="hidden-accessible" for="delegatee-fullName">{{fullNamePlaceholder}}</label>        <input type="text" class="form-control delegatee-fullName" id="delegatee-fullName" placeholder="{{fullNamePlaceholder}}" aria-label="{{fullNamePlaceholder}}" />      </div>    <% } %>    <label class="hidden-accessible" for="delegatee-message">{{messagePlaceholder}}</label>    <textarea row="5" class="form-control delegatee-message" id="delegatee-message" placeholder="{{messagePlaceholder}}" aria-label="{{messagePlaceholder}}"></textarea>    <br/>    <% if (showAdobeTerms) { %>      <div class="checkbox-a12" role="presentation">        <label class="control-label">          <input type="checkbox" aria-label="{{checkboxLabelForAdobeTermsAria}}" class="ec-checkbox checkbox-input form-control adobe-terms"/><span class="checkbox-image"></span>        </label>        <span id="delegatee-terms" class="ec-checkbox-label">{{checkboxLabelForAdobeTerms}}</span>      </div>    <% } %>');App.Templates.DelegateModalV6=a}());(function(){var a={};a.content='<div class="info-msg {{forClass}}" role="alert">      <p>{{infoMessage}}</p>    </div>';App.Templates.InfoMsg=a}());(function(){var a={};a.content='<div class="pass-strength-subtitle">{{passwordStrengthSubtitle}}</div>     <div class="pass-input">       <!-- Fix for Firefox autocomplete issue--> <input type="password" class="d-none"/>       <input aria-required="true" type="password" autocomplete="off" aria-label="{{passwordRequiredLabel}}" placeholder="{{passwordPlaceholder}}" class="password form-control"/>       <!-- Fix for Firefox autocomplete issue--> <input type="password" class="d-none"/>       <input aria-required="true" type="password" autocomplete="off" aria-label="{{confirmPasswordRequiredLabel}}" placeholder="{{confirmPasswordPlaceholder}}" class="confirm-pss form-control"/>     <% if (showPassword) { %>        <div class="checkbox-a12">         <div class="password-toggle-label control-label">           <input type="checkbox" class="password-checkbox checkbox-input form-control" id="password-checkbox-{{viewId}}"/>           <span class="checkbox-image"></span>           <label for="password-checkbox-{{viewId}}">{{showPasswordLabel}}</label>         </div>      </div> <% } %>     <div class="password-error"></div>     </div>';App.Templates.Password=_.extend(App.Templates.Password||{},a)}());(function(){var a={};a.mobileSidebarNav=_.template('<nav>      <ul class="nav nav-stacked es-sidebar-nav">        <li class="nav-item hidden-accessible"><a href="#" id="closeMenu">{{closeMenu}}</a></li>        <% if (showQuickFill)     { %> <li role="presentation" id="liquidModeSwitchView" class="nav-item es-sidebar-mobile-toggle d-none"><div role="menuitem" id="sidebarMobilePreviewToggle"></div><div class="liquidModeHintLabel">{{liquidModeHint}}</div></li><% } %>        <% if (showDelegate)      { %> <li class="nav-item"><a href="#" id="sidebarDelegateLink" class="nav-link delegateLink" data-analytics-click="delegate">{{delegate}}</a></li><% } %>        <% if (showReject)        { %> <li class="nav-item"><a href="#" id="sidebarRejectBtn" class="nav-link rejectBtn"  data-analytics-click="reject">{{reject}}</a></li><% } %>        <% if (showSignByWritten) { %> <li class="nav-item"><a href="#" class="nav-link written-in" data-analytics-click="written">{{esignRatherWritten}}</a></li><% } %>        <% if (showClearDocument) { %> <li class="nav-item"><a href="#" id="sidebarClearDocumentBtn" class="nav-link clearDocument" data-analytics-click="clear">{{clearDocument}}</a></li><% } %>        <% if (showSaveDocument)  { %> <li class="nav-item"><a href="#" id="headerSaveDocumentBtn" class="nav-link saveDocument" data-analytics-click="save">{{saveDocument}}</a></li><% } %>        <% if (showESign)         { %> <li class="nav-item"><a href="#" class="nav-link switchToEsign" data-analytics-click="switchToEsign">{{displayEsignLink}}</a></li> <% } %>        <% if (showSignerMessage) { %> <li class="nav-item"><a href="#" class="nav-link message-to-signer" aria-controls="esMessage-popup-dialog" data-analytics-click="msgToSigner">{{signerMessageTitle}}</a></li><% } %>        <% if (showReportAbuse)   { %> <li class="nav-item"><a href="#" id="reportAbuseLink" class="nav-link reportAbuseLink"  data-analytics-click="reportAbuse">{{reportAbuseLabel}}</a></li><% } %>        <% if (showDownload)      { %> <li class="nav-item"><a href="#" id="es-sidebar-download" class="nav-link " data-analytics-click="preSignPdf">{{download}}</a></li><% } %>        <span class="es-sidebar-divider"></span>        <% if (showSupport) { %><li><a href="{{supportURL}}" id="helpBtn" class="nav-link" target="_blank">{{help}}</a></li><% } %>        <% if (isAboutBoxAvailable) { %><li class="nav-item"><a href="#" id="legalNoticesLink" class="nav-link"  data-analytics-click="legalNotices">{{legalNoticesLink}}</a></li><% } else { %>          <li class="nav-item"><a href="{{termsOfUseURL}}" id="termsOfUseBtn" class="nav-link" target="_blank">{{terms}}</a></li>          <li class="nav-item"><a href="{{privacyPolicyURL}}" id="privacyPolicyBtn" class="nav-link" target="_blank">{{privacy}}</a></li>          <li class="nav-item"><a href="{{cookiesURL}}" id="cookiesBtn" class="nav-link" target="_blank">{{cookies}}</a></li>          <li class="nav-item"><a href="{{consumerDisclosureURL}}" id="consumerDisclosureBtn" class="nav-link" target="_blank">{{consumerDisclosure}}</a></li>        <% } %>        <li class="nav-item es-sidebar-dropdown">{{localeSelectHtml}}</li>        <% if (showCopyright && !isAboutBoxAvailable) { %>          <span class="es-sidebar-divider"></span>          <li class="nav-item es-sidebar-copyright">&copy {{copyrightYear}} {{adobeSystems}}<br>{{allRightsReserved}}</li>        <% } %>      </ul>    </nav>');App.Templates.Sidebar=_.extend(App.Templates.Sidebar||{},a)}());(function(){var a={};a.content='<div class="{{forClass}} alert alert-popup">      <p>{{warningMessage}}</p>    </div>';App.Templates.WarningMsg=a}());(function(){var f="mousedown.ESSession mousemove.ESSession keydown.ESSession",g="SESSION_TIMEOUT",b="POST_SESSION_TIMEOUT",d="PRE_SESSION_TIMEOUT",c=1000,l=60*c,e=10*c,i=2*c,a=15*c,h=null;var k=function(m){if(h){h.remove()}h=new j(m);return h};var j=Backbone.View.extend({clientTimeout:null,activity:false,warningDialog:null,expiredDialog:null,countdownTimer:null,sessionPingTimer:null,warningTimer:null,countdownTmpl:"<p>{{countdown_message}}</p><p>{{message}}</p>",expiredTmpl:"<p>{{message}}</p>",initialize:function(){this.sessionTimeout=(App.Env.sessionTimeout||0)*l;this.sessionRefreshFrequency=(App.Env.sessionRefreshFrequency||0)*l;this.sessionRefreshWarningPeriod=(App.Env.sessionRefreshWarningPeriod||0)*l;if(this.sessionTimeout<=0||this.sessionRefreshFrequency<=0){return}this.calcClientTimeout();this.actualPreWarningTime=i;this.startTime=_.now();this.bindActivities();this.sessionPingTimer=setInterval(_.bind(this.sessionPing,this),this.sessionRefreshFrequency)},bindActivities:function(){jQuery("body").on(f,_.bind(this.onUserActivity,this))},unbindActivities:function(){jQuery("body").off(f)},onUserActivity:function(){if(this.activity){return}this.activity=true;this.unbindActivities();this.resetWarningDialog()&&this.sessionPingAjaxCall()},hasWarning:function(){return this.sessionRefreshWarningPeriod>0},calcClientTimeout:function(){this.clientTimeout=_.now()+this.sessionTimeout-a},getTimeToExpiration:function(){return this.clientTimeout-_.now()},getTimeToWarning:function(){var m=this.getTimeToExpiration()-this.sessionRefreshWarningPeriod;this.actualPreWarningTime=m>i?i:0;return m-this.actualPreWarningTime},getSessionTime:function(n,m){var o=_.now()-this.startTime;if(n==="s"){o/=c}else{if(n==="m"){o/=c*60}}if(m!==void (0)){o=+o.toFixed(m)}return o},firePostEvent:function(m){App.Service.postEvent({type:g,data:{message:m,warningTimeMinutes:this.sessionRefreshWarningPeriod/l,expirationTimeMinutes:this.sessionTimeout/l}})},getCountdownText:function(n){var o=Math.floor(n/l),m=Math.floor(n/c)%60;return(o+":"+(m<10?"0":"")+m)},sessionPing:function(){if(!this.activity){var n=this.getTimeToWarning(),m=this.actualPreWarningTime;if(n<this.sessionRefreshFrequency&&!this.warningTimer){this.warningTimer=this._delay(this.sessionPreWarning,n-100,m)}}else{this.activity=false;this.bindActivities();this.sessionPingAjaxCall()}},sessionPingAjaxCall:function(){var n=App.Env.root+"sessionPing",m=this;jQuery.ajax({type:"GET",url:n,cache:false,timeout:e}).done(function(){m.calcClientTimeout()}).fail(function(){clearInterval(m.countdownTimer);m.sessionExpired()})},sessionPreWarning:function(m){this.firePostEvent(d);if(this.hasWarning()){this.warningTimer=this._delay(this.sessionWarning,m)}else{this._delay(this.sessionExpired,m)}},getWarningMessages:function(){var m=App.Env.acrobatOrReader;return{title:m?i18n.js.session_timeout_warning_title_AR:i18n.js.session_timeout_warning_title,countDown:m?i18n.js.session_timeout_warning_countdown_message_AR:i18n.js.session_timeout_warning_countdown_message,message:m?i18n.js.session_timeout_warning_message_AR:i18n.js.session_timeout_warning_message}},getExpiredMessages:function(){return{message:i18n.js.session_timeout_expired_message,title:i18n.js.session_timeout_expired_title,btnText:i18n.js.dwr_globalErrorReloadBtn}},sessionWarning:function(){if(this.warningDialog){return}var n=this.getTimeToExpiration(),r=this.getCountdownText(n),m=_.template(this.countdownTmpl),q='<span id="session-countdown">'+r+"</span>",o=this.getWarningMessages(),p=m({countdown_message:o.countDown(q),message:o.message()});this.warningDialog=App.Utils.createModal({title:o.title(),content:p,backdrop:"static",classes:"sessionModal",close:false,closeBtn:false,primaryBtn:false,autoDestroy:true});ScAnalytics.logEvent(["session:warning"]);this.countdownTimer=setInterval(_.bind(this.onCountDown,this),c)},resetWarningDialog:function(){clearTimeout(this.warningTimer);this.warningTimer=null;if(!this.warningDialog){return false}clearInterval(this.countdownTimer);this.warningDialog.modal("hide");this.warningDialog=null;return true},onCountDown:function(){var m=this.getTimeToExpiration();if(m<=0){clearInterval(this.countdownTimer);this.sessionExpired()}else{jQuery("#session-countdown").html(this.getCountdownText(m));App.EventBus.trigger("session:warning",{remainingSecs:m/c})}},sessionExpired:function(){clearInterval(this.sessionPingTimer);this.resetWarningDialog();this.unbindActivities();App.EventBus.trigger("session:expired");ScAnalytics.logEvent(["session:expired"]);this.firePostEvent(b);if(App.Env.acrobatOrReader&&App.appView.is_authoring){return}var n=this.getExpiredMessages(),m=_.template(this.expiredTmpl),o=m({message:n.message()});Utils.clearDataOnLogout();if(App.Env.isGovCloud){location.replace(location.origin+"/public/logout?timedout=true")}else{this.expiredDialog=App.Utils.createModal({title:n.title(),content:o,backdrop:"static",classes:"sessionModal",close:false,closeBtn:false,primaryBtn:n.btnText(),onClick:App.Utils.reloadPage,primaryBtnAnalytics:"sessReload"})}},remove:function(){this.unbindActivities();clearInterval(this.countdownTimer);clearInterval(this.sessionPingTimer);clearInterval(this.warningTimer);this.warningDialog&&this.warningDialog.remove();this.expiredDialog&&this.expiredDialog.remove();this._super()},_delay:function(n,o,m){return _.delay(_.bind(n,this),o,m)}});App.ns("Views").SessionTimeout=k}());(function(){var a=Backbone.View.extend({template:App.Templates.CheckedPill.content,defaults:{checked:false},events:{"click .pill-link":"defaultClickHandler"},initialize:function(){_.defaults(this.options,_.result(this,"defaults"))},toTemplate:function(){return{url:this.options.url,label:this.options.label,checked:this.options.checked?"checked":""}},render:function(){this._super();this.$link=this.$(".pill-link");if(this.options.classes){this.$el.addClass(this.options.classes)}return this},defaultClickHandler:function(){if(this.options.onClick){jQuery.proxy(this.options.onClick,this.options.eventProxy||el)();return}this.setChecked()},setChecked:function(){if(!this.$link.hasClass("checked")){this.$link.addClass("checked")}},isChecked:function(){return this.$link.hasClass("checked")}});App.Views.CheckedPill=a})();(function(){var a={"en-US":"en","en-GB":"en-gb","de-DE":"de","ru-RU":"ru","fr-FR":"fr","es-ES":"es","sv-SE":"sv","nl-NL":"nl","fi-FI":"fi","no-NO":"nn","nn-NO":"nn","nb-NO":"nb","pt-PT":"pt","pt-BR":"pt-br","it-IT":"it","da-DK":"da","ja-JP":"ja","is-IS":"is","zh-CN":"zh-cn","zh-TW":"zh-tw","ko-KR":"ko","iw-IL":"he","pl-PL":"pl","in-ID":"id","ms-MY":"ms-my","th-TH":"th","vi-VN":"vi","cs-CZ":"cs","tr-TR":"tr","ca-ES":"ca","eu-ES":"eu","hr-HR":"hr","hu-HU":"hu","ro-RO":"ro","sk-SK":"sk","sl-SI":"sl","uk-UA":"uk"};var b=Backbone.View.extend({allowedOptions:["useCurrent","defaultDate","maxDate","minDate","locale","format"],optionsDefault:{locale:a[App.Utils.getLocale()]||"en",tooltip:{today:i18n.js2.dateTimePicker_today(),clear:i18n.js2.dateTimePicker_clear(),close:i18n.js2.dateTimePicker_close(),selectMonth:i18n.js2.dateTimePicker_selectMonth(),prevMonth:i18n.js2.dateTimePicker_prevMonth(),nextMonth:i18n.js2.dateTimePicker_nextMonth(),selectYear:i18n.js2.dateTimePicker_selectYear(),prevYear:i18n.js2.dateTimePicker_prevYear(),nextYear:i18n.js2.dateTimePicker_nextYear(),selectDecade:i18n.js2.dateTimePicker_selectDecade(),prevDecade:i18n.js2.dateTimePicker_prevDecade(),nextDecade:i18n.js2.dateTimePicker_nextDecade(),prevCentury:i18n.js2.dateTimePicker_prevCentury(),nextCentury:i18n.js2.dateTimePicker_nextCentury(),pickHour:i18n.js2.dateTimePicker_pickHour(),incrementHour:i18n.js2.dateTimePicker_incrementHour(),decrementHour:i18n.js2.dateTimePicker_decrementHour(),pickMinute:i18n.js2.dateTimePicker_pickMinute(),incrementMinute:i18n.js2.dateTimePicker_incrementMinute(),decrementMinute:i18n.js2.dateTimePicker_decrementMinute(),pickSecond:i18n.js2.dateTimePicker_pickSecond(),incrementSecond:i18n.js2.dateTimePicker_incrementSecond(),decrementSecond:i18n.js2.dateTimePicker_decrementSecond(),togglePeriod:i18n.js2.dateTimePicker_togglePeriod(),selectTime:i18n.js2.dateTimePicker_selectTime()},format:"L LT"},initialize:function(){this.dateTimePickerOptions=_.pick(_.defaults(this.options,this.optionsDefault),this.allowedOptions);this.onChange=this.options.onChange||function(){}},render:function(){this.$el.datetimepicker(this.dateTimePickerOptions);this.$el.on("dp.change",this.onChange);return this}});App.ns("Views").DateTimePicker=b})();(function(){var f="delegateModal";var d=App.Models.Phone,c=d.COUNTRY_CODES,a=App.Utils.KEY,b=d.AVAILABLE_COUNTRY_ISO_CODES;var e=App.Views.ModalView.extend({template:App.Templates.DelegateModal.content,countriesTemplate:_.template("+{{ccode}} ({{name}})"),defaults:{title:i18n.js.esign_delegate_title(),classes:"center delegateModal",show:true,close:true,primaryBtn:i18n.js.esign_delegate()},events:{"change .delegatee-email":"onEmailChange","change .delegatee-message":"onMessageChange","change .delegatee-phone":"onPhoneChange","change .country-code":"onCountryCodeChange","keyup .delegatee-email":"onEmailKeyup","keyup .delegatee-message":"onMessageKeyup","keyup .delegatee-phone":"onPhoneKeyup","click .ec-checkbox":"toggleSubmitButton"},appEvents:{"esignView:hideDelegateModal":"hide","esignView:showDelegateModal":"show"},modelEvents:{invalid:"onModelInvalid"},initialize:function(){this._super();this.ensureModel();this.options.autoFocus=!App.Env.feature.iOS;var g=App.appView.model.get("availablePhoneCountryCodes");if(g){this.countryIsoCodes=g.split(" ")}else{this.countryIsoCodes=b}this.defaultCountryIsoCode=App.appView.model.get("defaultPhoneCountryCode")},toTemplate:function(){var h=App.appView.model.get("termsOfServiceUrl"),g=App.appView.model.get("privacyPolicyUrl");return{showAdobeTerms:App.appView.model.showTermsOfUseGate()&&!App.appView.model.get("isAgreeToTermsChecked"),checkboxLabelForAdobeTerms:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use(h,g),checkboxLabelForAdobeTermsAria:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use_aria_label(),description:i18n.js.esign_delegate_instructions_rolebased(this.options.role),emailPlaceholder:i18n.js.esign_delegate_email_placeholder(),messagePlaceholder:i18n.js.esign_delegate_message_placeholder(),phonePlaceholder:i18n.js.compose_auth_phone_placeholder(),isPhoneAuth:(this.options.signerAuthMethod==="PHONE")?true:false}},render:function(){this._super();this.renderCountryCodes();this.$delegateeEmail=this.$(".delegatee-email");this.$delegateeMessage=this.$(".delegatee-message");this.$delegateePhone=this.$(".delegatee-phone");this.$countryCode=this.$(".country-code");this.$delegateBtn=this.$(".btn-primary");this.$alertContainer=this.$(".alert-messages");this.$checkboxContainer=this.$(".checkbox-a12");this.$agreeToAdobeTermsCheckbox=this.$(".ec-checkbox.adobe-terms");new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".ec-checkbox-label",isExplicitConsent:App.appView.model.isExplicitConsentFlow()||App.appView.model.isForcedReviewRequired()});return this},ensureModel:function(){if(this.model){return}if(this.options.agreement&&this.options.agreement.delegate){this.model=this.options.agreement.delegate}else{if(this.options.id){this.model=(new App.Api.Agreements({id:this.options.id})).delegate}else{throw new Error("Delegate modal view requires a delegate model.")}}this.delegateModelEvents()},show:function(){this.resetContent();this._super()},onModelInvalid:function(h,i,g){this.updateFieldMarkers();this.showErrors(i)},onEmailChange:function(i,h){var g=String.prototype.trim.call(this.$delegateeEmail.val()==null?"":this.$delegateeEmail.val());this.model.validate({email:g},this.options);this.model.set("email",g);this.updateFieldMarkers(h)},onPhoneChange:function(i,h){var g=String.prototype.trim.call(this.$delegateePhone.val()==null?"":this.$delegateePhone.val());this.model.validate({phone:g},this.options);this.model.set("phone",g);this.updateFieldMarkers(h)},onMessageChange:function(i,g){var h=String.prototype.trim.call(this.$delegateeMessage.val()==null?"":this.$delegateeMessage.val());this.model.validate({message:h},this.options);this.model.set("message",h);this.updateFieldMarkers(g)},onEmailKeyup:function(g){if(App.Utils.KEY.isEnter(g)){if(this.model.validationError&&this.model.validationError.email){this.updateFieldMarkers()}else{this.$delegateeMessage.trigger("focus")}return}this.onEmailChange(g,{onkey:true})},onMessageKeyup:function(g){if(App.Utils.KEY.isTab(g)){return}this.onMessageChange(g,{onkey:true})},onPhoneKeyup:function(g){this.onPhoneChange(g,{onkey:true})},onCountryCodeChange:function(){this.updateCountryCodeModel(this.$countryCode.val())},updateCountryCodeModel:function(h){if(h){var g=h.split(" ");if(g.length===2){this.model.set("countryIsoCode",g[0]);this.model.set("countryCode",g[1]);return true}}return false},toggleSubmitButton:function(g){var h=this.$agreeToAdobeTermsCheckbox.is(":checked"),i;i=App.appView.model.showTermsOfUseGate()&&!App.appView.model.get("isAgreeToTermsChecked")?h&&g:g;this.$delegateBtn.toggleClass("disabled",!i)},showErrors:function(g){App.Utils.showAlerts(g,{container:this.$alertContainer,key:f,enumerate:true})},clearError:function(g){App.Utils.clearAlerts({container:this.$alertContainer,itemKey:g})},updateFieldMarkers:function(g){var h=_.extend({},this.model.changed,this.model.validationError),i=g&&g.onkey;_.chain(h).keys().each(function(l){var n=!!(this.model.validationError&&l in this.model.validationError),m=this.$(".delegatee-"+l),j="is-invalid",k=m.hasClass(j),o=!i||!n;if(o){m.toggleClass(j,n)}if(k&&!n){this.clearError(l)}},this);if(i){this.toggleSubmitButton(true)}},onClick:function(){this.submit();return false},submit:App.Views.singly(function(){var h;this.resetErrors();this.toggleSubmitButton(false);if(!_.has(this.model.attributes,"countryIsoCode")&&this.model.attributes.countryCode===1){if(!this.updateCountryCodeModel(this.$countryCode.val())){this.model.attributes.countryIsoCode="US"}}var g=_.defaults({},this.options,{success:this.onDelegateSuccess,error:this.onDelegateError});g.success=_.bind(g.success,this);g.error=_.bind(g.error,this);h=this.model.save(null,g);return h}),onDelegateSuccess:function(i,g,h){},onDelegateError:function(i,g,h){var j=g.responseJSON,k={SERVER_ERROR:j&&j.message||g.responseText||g.statusText};App.Utils.hideInterstitial(true);if(g.status===401){this.hide();return}h.errorHandled=true;if(g.status===409&&h.onConflictError){h.onConflictError();return}this.showErrors(k,true)},resetContent:function(){this.model.resetDelegateParams();this.$delegateeEmail.val("");this.$delegateeMessage.val("");this.$delegateePhone.val("");this.$delegateeEmail.removeClass("is-invalid");this.$delegateeMessage.removeClass("is-invalid");this.$delegateePhone.removeClass("is-invalid");this.$delegateBtn.removeClass("disabled");this.$agreeToAdobeTermsCheckbox.prop("checked",false);if(App.appView.model.get("isAgreeToTermsChecked")){this.$checkboxContainer.hide()}this.resetErrors()},resetErrors:function(){App.Utils.clearAlerts({container:this.$alertContainer})},renderCountryCodes:function(){this.countryCodeView=new App.Views.Dropdown({className:"country-code form-control",labels:this.getLabels(),values:this.getValues(),defaultValue:this.getCountryLabel(this.defaultCountryIsoCode||d.DEFAULT_COUNTRY_ISO_CODE),byLabel:true,selectLabel:false});this.countryCodeView.renderInto(this.$(".country-codes-container"));return this},getLabels:function(){return _(this.countryIsoCodes).map(this.getCountryLabel,this)},getCountryLabel:function(g){return this.countriesTemplate({ccode:c[g],name:i18n.country[g]()})},getValues:function(){return _(this.countryIsoCodes).map(function(g){return g+" "+c[g]})}});App.Views.DelegateModal=e})();(function(){var e="delegateModal";var d=App.Models.Phone,c=d.COUNTRY_CODES,b=d.AVAILABLE_COUNTRY_ISO_CODES;var a=App.Views.ModalView.extend({template:App.Templates.DelegateModalV6.content,countriesTemplate:_.template("+{{ccode}} ({{name}})"),defaults:{title:i18n.js.esign_delegate_title(),classes:"center delegateModal",show:true,close:true,primaryBtn:i18n.js.esign_delegate()},events:{"change .delegatee-email":"onEmailChange","change .delegatee-message":"onMessageChange","change .delegatee-phone":"onPhoneChange","change .delegatee-fullName":"onFullNameChange","change .country-code":"onCountryCodeChange","keyup .delegatee-email":"onEmailKeyup","keyup .delegatee-message":"onMessageKeyup","keyup .delegatee-phone":"onPhoneKeyup","keyup .delegatee-fullName":"onFullNameKeyup","click .ec-checkbox":"toggleSubmitButton"},appEvents:{"esignView:hideDelegateModal":"hide","esignView:showDelegateModal":"show"},modelEvents:{invalid:"onModelInvalid"},initialize:function(){this._super();if(!App.Api6.haveApi){App.Api6.init()}this.requireRecipientNameEnabled=App.appView.model.get("requireRecipientNameEnabled");this.ensureModel();this.options.autoFocus=!App.Env.feature.iOS;var f=App.appView.model.get("availablePhoneCountryCodes");if(f){this.countryIsoCodes=f.split(" ")}else{this.countryIsoCodes=b}this.defaultCountryIsoCode=App.appView.model.get("defaultPhoneCountryCode")},toTemplate:function(){var g=App.appView.model.get("termsOfServiceUrl"),f=App.appView.model.get("privacyPolicyUrl");return{showAdobeTerms:App.appView.model.showTermsOfUseGate()&&!App.appView.model.get("isAgreeToTermsChecked"),checkboxLabelForAdobeTerms:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use(g,f),checkboxLabelForAdobeTermsAria:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use_aria_label(),description:i18n.js.esign_delegate_instructions_rolebased(this.options.role),emailPlaceholder:i18n.js.esign_delegate_email_placeholder(),messagePlaceholder:i18n.js.esign_delegate_message_placeholder(),phonePlaceholder:i18n.js.compose_auth_phone_placeholder(),fullNamePlaceholder:i18n.js.esign_delegate_full_name_placeholder(),isPhoneAuth:this.options.signerAuthMethod==="PHONE",requireRecipientNameEnabled:this.requireRecipientNameEnabled}},render:function(){this._super();this.renderCountryCodes();this.$delegateeEmail=this.$(".delegatee-email");this.$delegateeMessage=this.$(".delegatee-message");this.$delegateeFullName=this.$(".delegatee-fullName");this.$delegateePhone=this.$(".delegatee-phone");this.$countryCode=this.$(".country-code");this.$delegateBtn=this.$(".btn-primary");this.$alertContainer=this.$(".alert-messages");this.$checkboxContainer=this.$(".checkbox-a12");this.$agreeToAdobeTermsCheckbox=this.$(".ec-checkbox.adobe-terms");new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".ec-checkbox-label",isExplicitConsent:App.appView.model.isExplicitConsentFlow()||App.appView.model.isForcedReviewRequired()});return this},ensureModel:function(){if(this.model){return}if(this.options.id){this.participantSetId=App.appView.model.get("participantSetId");this.model=new App.Api6.Agreements.Members.DelegatedParticipantSets({id:this.participantSetId},{agreementId:this.options.id})}else{throw new Error("Delegate modal view requires a delegate model.")}this.model.set("email","");this.model.set("fullName","");this.model.set("phone","");this.model.set("countryCode",1);this.delegateModelEvents()},show:function(){this.resetContent();this._super()},onModelInvalid:function(g,h,f){this.updateFieldMarkers();this.showErrors(h)},onChangeValidate:function(g,f){var h={};if("email" in g&&!App.Api.Utils.isValidEmail(g.email)){h.email=i18n.js.esign_delegate_invalid_email_errorMsg()}if("fullName" in g&&g.fullName===""&&this.requireRecipientNameEnabled){h.fullName=i18n.js.esign_delegate_recipient_name_empty_errorMsg()}if("phone" in g&&f.signerAuthMethod==="PHONE"&&App.Api.Utils.isValidPhone(g.phone)){h.phone=i18n.js.esign_delegate_invalid_phone_errorMsg()}if("message" in g&&g.message===""){h.message=i18n.js.esign_delegate_blank_message_errorMsg()}this.validationError=_.isEmpty(h)?null:h;return this.validationError},onEmailChange:function(h,g){var f=String.prototype.trim.call(this.$delegateeEmail.val()==null?"":this.$delegateeEmail.val());this.onChangeValidate({email:f},this.options);this.model.set("email",f);this.updateFieldMarkers(g)},onPhoneChange:function(h,g){var f=String.prototype.trim.call(this.$delegateePhone.val()==null?"":this.$delegateePhone.val());this.onChangeValidate({phone:f},this.options);this.model.set("phone",f);this.updateFieldMarkers(g)},onMessageChange:function(h,f){var g=String.prototype.trim.call(this.$delegateeMessage.val()==null?"":this.$delegateeMessage.val());this.onChangeValidate({message:g},this.options);this.model.set("privateMessage",g);this.updateFieldMarkers(f)},onFullNameChange:function(g,f){var h=(this.$delegateeFullName.val()||"").trim();this.onChangeValidate({fullName:h},this.options);this.model.set("fullName",h);this.updateFieldMarkers(f)},onEmailKeyup:function(f){if(App.Utils.KEY.isEnter(f)){if(this.validationError&&this.validationError.email){this.updateFieldMarkers()}else{this.$delegateeMessage.trigger("focus")}return}this.onEmailChange(f,{onkey:true})},onFullNameKeyup:function(f){if(App.Utils.KEY.isTab(f)){return}this.onFullNameChange(f,{onkey:true})},onMessageKeyup:function(f){if(App.Utils.KEY.isTab(f)){return}this.onMessageChange(f,{onkey:true})},onPhoneKeyup:function(f){this.onPhoneChange(f,{onkey:true})},onCountryCodeChange:function(){this.updateCountryCodeModel(this.$countryCode.val())},updateCountryCodeModel:function(g){if(g){var f=g.split(" ");if(f.length===2){this.model.set("countryIsoCode",f[0]);this.model.set("countryCode",f[1]);return true}}return false},toggleSubmitButton:function(f){var g=this.$agreeToAdobeTermsCheckbox.is(":checked"),h;h=App.appView.model.showTermsOfUseGate()&&!App.appView.model.get("isAgreeToTermsChecked")?g&&f:f;this.$delegateBtn.toggleClass("disabled",!h)},showErrors:function(f){App.Utils.showAlerts(f,{container:this.$alertContainer,key:e,enumerate:true})},clearError:function(f){App.Utils.clearAlerts({container:this.$alertContainer,itemKey:f})},getKeyForTemplate:function(f){if(f==="privateMessage"){return"message"}return f},updateFieldMarkers:function(f){var g=_.extend({},this.model.changed,this.validationError),h=f&&f.onkey;_.chain(g).keys().each(function(k){k=this.getKeyForTemplate(k);var m=!!(this.validationError&&k in this.validationError),l=this.$(".delegatee-"+k),i="is-invalid",j=l.hasClass(i),n=!h||!m;if(n){l.toggleClass(i,m)}if(j&&!m){this.clearError(k)}},this);if(h){this.toggleSubmitButton(true)}},onClick:function(){this.submit();return false},submit:App.Views.singly(function(){var g;this.resetErrors();this.toggleSubmitButton(false);if(!_.has(this.model.attributes,"countryIsoCode")&&this.model.attributes.countryCode===1){if(!this.updateCountryCodeModel(this.$countryCode.val())){this.model.attributes.countryIsoCode="US"}}this.memberInfo.email=this.model.get("email");if(this.requireRecipientNameEnabled){this.memberInfo.fullName=this.model.get("fullName")?this.model.get("fullName"):" "}if(!this.model.get("privateMessage")){this.model.set("privateMessage"," ")}if(this.options.signerAuthMethod==="PHONE"){this.phoneInfo.phone=this.model.get("phone")?this.model.get("phone"):" ";this.phoneInfo.countryCode=this.model.attributes.countryCode;this.phoneInfo.countryIsoCode=this.model.attributes.countryIsoCode}this.securityOption={};this.securityOption.phoneInfo=this.phoneInfo;this.memberInfo.securityOption=this.securityOption;this.model.set("memberInfos",[this.memberInfo]);var f=_.defaults({},this.options,{success:this.onDelegateSuccess,error:this.onDelegateError});f.success=_.bind(f.success,this);f.error=_.bind(f.error,this);g=this.model.save(null,f);return g}),onDelegateSuccess:function(h,f,g){},onDelegateError:function(h,f,g){var i=f.responseJSON,j={SERVER_ERROR:i&&i.message||f.responseText||f.statusText};App.Utils.hideInterstitial(true);if(f.status===401){this.hide();return}g.errorHandled=true;if(f.status===409&&g.onConflictError){g.onConflictError();return}this.showErrors(j,true)},resetContent:function(){this.model.set("email","");this.model.set("fullName","");this.model.set("phone","");this.model.set("memberInfos",[]);this.model.set("privateMessage","");this.memberInfo={};this.phoneInfo={};this.securityOption={};this.$delegateeEmail.val("");this.$delegateeFullName.val("");this.$delegateeMessage.val("");this.$delegateePhone.val("");this.$delegateeEmail.removeClass("is-invalid");this.$delegateeFullName.removeClass("is-invalid");this.$delegateeMessage.removeClass("is-invalid");this.$delegateePhone.removeClass("is-invalid");this.$delegateBtn.removeClass("disabled");this.$agreeToAdobeTermsCheckbox.prop("checked",false);if(App.appView.model.get("isAgreeToTermsChecked")){this.$checkboxContainer.hide()}this.resetErrors()},resetErrors:function(){App.Utils.clearAlerts({container:this.$alertContainer})},renderCountryCodes:function(){this.countryCodeView=new App.Views.Dropdown({className:"country-code form-control",labels:this.getLabels(),values:this.getValues(),defaultValue:this.getCountryLabel(this.defaultCountryIsoCode||d.DEFAULT_COUNTRY_ISO_CODE),byLabel:true,selectLabel:false});this.countryCodeView.renderInto(this.$(".country-codes-container"));return this},getLabels:function(){return _(this.countryIsoCodes).map(this.getCountryLabel,this)},getCountryLabel:function(f){return this.countriesTemplate({ccode:c[f],name:i18n.country[f]()})},getValues:function(){return _(this.countryIsoCodes).map(function(f){return f+" "+c[f]})}});App.Views.DelegateModalV6=a})();(function(){var a=Backbone.View.extend({template:App.Templates.InfoMsg.content,toTemplate:function(){return{infoMessage:this.options.msg,forClass:this.options.forClass}}});App.ns("Views").InfoMsg=a})();(function(){var b=App.Models.Password,d=b.STRENGTH,e="****************",c="has-error is-invalid";var a=Backbone.View.extend({template:App.Templates.Password.content,className:"password-container",events:{"change .password-checkbox":"showPassToggle","keydown .password":"onKeydownPassword","keydown .confirm-pss":"onKeydownPassword","keypress .password":"onKeypressPassword","keypress .confirm-pss":"onKeypressPassword","keyup .password":"onUpdatePassword","keyup .confirm-pss":"onUpdateConfirmPassword","change .password":"onUpdatePassword","change .confirm-pss":"onUpdateConfirmPassword"},initialize:function(){this._super();this.model=this.options.model||new App.Models.Password()},render:function(){this._super();this.$showPasswordField=this.$(".password-toggle-label");this.$passwordCheckbox=this.$(".password-checkbox");this.$passwordInput=this.$("input.password");this.$confirmPasswordInput=this.$(".confirm-pss");return this},postRender:function(){if(this.model.hasDummyPassword()){this.showDummyPassword()}},toTemplate:function(){return{passwordStrengthSubtitle:this.getStrengthExplanation(),showPassword:this.options.enableShowPassword||false,passwordPlaceholder:i18n.js.compose_auth_password_title(),passwordRequiredLabel:i18n.js.compose_auth_password_title()+" ("+i18n.js2.composeView_requiredText()+")",confirmPasswordPlaceholder:i18n.js.compose_auth_confirm_password_placeholder(),confirmPasswordRequiredLabel:i18n.js.compose_auth_confirm_password_placeholder()+" ("+i18n.js2.composeView_requiredText()+")",showPasswordLabel:i18n.js.compose_auth_toggle_show_password_label(),viewId:this.cid}},getStrengthExplanation:function(){var f="";switch(this.model.get("passwordStrength")){case d.EMPTY:f=i18n.js.compose_auth_empty_password_subtitle();break;case d.WEAK:f=i18n.js.compose_auth_weak_password_subtitle();break;case d.MEDIUM:f=i18n.js.compose_auth_medium_password_subtitle();break;case d.STRONG:f=i18n.js.compose_auth_strong_password_subtitle();break;case d.STRONG14:f=i18n.js.compose_auth_strong14_password_subtitle();break}return f},onUpdatePassword:function(f){if(App.Utils.KEY.isEnter(f)&&this.$passwordInput.val()!==""){this.$confirmPasswordInput.focus()}this.model.set("password",this.$passwordInput.val()).validate();this.updateVisuals()},onKeypressPassword:function(f){if(App.Utils.KEY.isValidCharacterForPDFPassword(f)){this.clearDummyPassword()}if(!App.Utils.KEY.isValidKeyForPDFPassword(f)){f.preventDefault()}},onKeydownPassword:function(f){if(App.Utils.KEY.isDeleteAction(f)){this.clearDummyPassword()}},onUpdateConfirmPassword:function(){this.model.set("confirmPass",this.$confirmPasswordInput.val()).validate();this.updateVisuals()},updateVisuals:function(){var h=this.model.validationErrors,g=["min_len","max_len","strength","chars"],f=("confirm" in h&&this.$confirmPasswordInput.val().length>0);if(!(_.keys(h).length)){this.model.trigger("passwordView:no_errors")}this.$confirmPasswordInput.toggleClass(c,f);if(_.any(g,function(i){return i in h})){this.$passwordInput.addClass(c);return}this.$passwordInput.removeClass(c)},setPasswordInputs:function(f){this.$passwordInput.val(f);this.$confirmPasswordInput.val(f)},toggleValidity:function(f){this.$passwordInput.toggleClass(c,f);this.$confirmPasswordInput.toggleClass(c,f)},showPassToggle:function(){var f=this.$passwordCheckbox.is(":checked");if(f){this.$passwordInput.attr("type","text");this.$confirmPasswordInput.attr("type","text")}else{this.$passwordInput.attr("type","password");this.$confirmPasswordInput.attr("type","password")}},showDummyPassword:function(){this.setPasswordInputs(e);this.removeShowPasswordOption()},clearDummyPassword:function(){if(this.model.hasDummyPassword()){this.setPasswordInputs("");this.addShowPasswordOption();this.model.removeDummyPassword()}},removeShowPasswordOption:function(){this.$showPasswordField.hide()},addShowPasswordOption:function(){this.$showPasswordField.show()}});App.Views.PasswordView=a})();(function(){var a=App.Utils.KEY;var b=Backbone.View.extend({appEvents:{"agreementView:resize":"hideSideBar","esignView:hideSidebar":"hideSideBar","sidebar:active":"onSidebarActive","sidebar:inactive":"onSidebarInactive"},backdropTemplate:'<div class="modal-backdrop sidebar-modal fade in"></div>',addLiquidModeToggleSwitch:function(){var d=this,f,c=App.appView.model.get("liquidModeModel"),e=jQuery("#mobile-modal-dialog");if(e.length===0||!App.Env.feature.isMobileBrowser){return}this.toggleView=new App.Views.ToggleSwitch({choiceTrueLabel:i18n.js.esign_mobile_view(),choiceFalseLabel:i18n.js.esign_mobile_view(),choiceTrueIsFirst:false,singleChoiceSwitch:true,trueTrigger:"esignView:hideSidebar agreementView:showMobileModalView",falseTrigger:"esignView:hideSidebar agreementView:hideMobileModalView",model:new App.Models.ToggleSwitch().set({choice:e.getIsVisible(),editable:true})});this.toggleView.renderInto(jQuery("#sidebarMobilePreviewToggle"));f=jQuery("#liquidModeSwitchView").addClass("d-none");this.listenTo(App.EventBus,"agreementView:showMobileModalView",function(){d.toggleView.model.set("choice",true)});this.listenTo(App.EventBus,"agreementView:hideMobileModalView",function(){d.toggleView.model.set("choice",false)});this.toggleView.model.on("change:choice",function(h,g){ScAnalytics.logEvent(["mobilePreviewToggle"+(g?"On":"Off")])});if(c){c.on("change:content",function(){f.toggleClass("d-none",false)});c.on("change:menuVisible",function(){f.toggleClass("d-none",!c.get("menuVisible"))})}},initialize:function(c){this.container=c.container||jQuery("#es-sidebar-container");this.sidebarOffCanvas=jQuery(".es-sidebar-offcanvas");this.appHeader=jQuery("#header");this.content=jQuery("#mainContent");this.footer=jQuery("#footer")},render:function(){var c=this,d=jQuery("#localeSelect"),f=d.prev('label[for="localeSelect"]').text(),g="",e=App.appView.fieldsViewer.hasFields();if(d.length){d=d.clone();d.attr({id:"sidebarLocaleSelect","aria-label":f});g=d[0].outerHTML}this.model.set("localeSelectHtml",g);this.container.append(App.Templates.Sidebar.mobileSidebarNav(_.extend({},this.model.attributes,{canClearDocument:e})));this.addLiquidModeToggleSwitch();jQuery(document).on("click",function(h){if((c.sidebarOffCanvas.hasClass("active"))&&(jQuery(h.target).closest(".es-dropdown, .es-sidebar, #es-sidebar-container").length===0)){c.hideSideBar()}});jQuery("#es-sidebar-download").on("click",_.bind(this.downloadPDF,this));if(App.appView.model.isWrittenRequired()||App.appView.model.get("agreement").get("esign")){$(".switchToEsign").parent().hide()}return this},downloadPDF:function(d){d.preventDefault();var c=App.appView.model.get("agreement").get("openPDFUrl");window.open(c).focus()},onSidebarActive:function(){if(!this.$sidebarBackdrop){this.$sidebarBackdrop=jQuery(_.template(this.backdropTemplate)()).appendTo(document.body);this.headerZIndex=parseInt(this.$sidebarBackdrop.css("z-index"))+10}this.$sidebarBackdrop.show();this.$sidebarBackdrop.on("touchstart touchmove",function(c){if(c.originalEvent.touches.length>1){c.stopPropagation();c.preventDefault()}});this.container.on("touchstart touchmove",function(c){if(c.originalEvent.touches.length>1){c.stopPropagation();c.preventDefault()}});this.appHeader.css("z-index",this.headerZIndex);this.container.show();this.escapeKey();if(jQuery(document.activeElement).is(".es-sidebar-toggle")){this.container.find(":tabbable:first").focus(0)}this.container.on("keydown.sidebar",_.bind(this.onKeydown,this));this.sidebarOffCanvas.next().attr("aria-hidden",true);this.content.attr("aria-hidden",true);this.footer.attr("aria-hidden",true)},onSidebarInactive:function(){this.appHeader.css("z-index","");this.$sidebarBackdrop&&this.$sidebarBackdrop.hide();this.container.hide();this.$sidebarBackdrop.off("touchstart touchmove");this.$sidebarBackdrop.attr("aria-modal","false");this.container.off("touchstart touchmove");this.escapeKey();this.container.off("keydown.sidebar");this.sidebarOffCanvas.next().removeAttr("aria-hidden");this.content.removeAttr("aria-hidden");this.footer.removeAttr("aria-hidden")},hideSideBar:function(){if(!this.sidebarOffCanvas.hasClass("active")){return}this.sidebarOffCanvas.removeClass("active");this.onSidebarInactive()},escapeKey:function(){var c=this.sidebarOffCanvas.hasClass("active");if(c){jQuery(document).on("keyup.dismiss.sidebar",_.bind(function(d){d.which===a.ESC&&App.EventBus.trigger("sidebar:inactive")&&this.hideSideBar()},this))}else{if(!c){jQuery(document).off("keyup.dismiss.sidebar")}}},onKeydown:function(i){var c=jQuery(i.target),g=this.container.find(":tabbable"),j=g.not("input, select"),f=-1,h="lt",d="last";if(a.isTab(i)&&c.is(g.last())&&!i.shiftKey){i.preventDefault()}else{if(a.isTab(i)&&c.is(g.first())&&i.shiftKey){i.preventDefault()}else{if(a.isUpDownArrow(i)){f=j.index(c);if(f!==-1){if(i.which===a.DOWN){h="gt";d="first"}j.filter(":"+h+"("+f+")")[d]().focus();i.preventDefault()}}}}}});App.ns("Views").Sidebar=b}());(function(){var a=Backbone.View.extend({template:App.Templates.WarningMsg.content,toTemplate:function(){return{warningMessage:this.options.msg,forClass:this.options.forClass}}});App.ns("Views").WarningMsg=a})();/*!
 * ADOBE CONFIDENTIAL
 * ___________________
 * 
 * Copyright 2018 Adobe Systems Incorporated
 * All Rights Reserved.
 * 
 * NOTICE: All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 */
;
/*!
 * */
(function webpackUniversalModuleDefinition(a,b){if(typeof exports==="object"&&typeof module==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){exports.v6=b()}else{a.adobe=a.adobe||{},a.adobe["sign"]=a.adobe["sign"]||{},a.adobe["sign"]["api"]=a.adobe["sign"]["api"]||{},a.adobe["sign"]["api"]["v6"]=b()}}}})(typeof self!=="undefined"?self:this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=292)})([,,,,,,,,,,(function(module,exports){var g;g=(function(){return this})();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object"){g=window}}module.exports=g}),,,,,,,,(function(module,exports){module.exports={account_creation_not_enabled:"The account cannot be created because this feature is not enabled for you.",agree_to_terms_not_accepted:"Agree to terms has not been accepted.",agreement_already_cancelled:"The agreement being modified has already been canceled.",agreement_already_completed:"The agreement being modified has already been completed.",agreement_already_completed_by_group:"This agreement has already been completed by another member of your group.",agreement_already_delegated:"The agreement being modified has already been delegated to a signer.",agreement_already_signed:"The agreement being modified has already been signed.",agreement_archived:"The agreement is archived.",agreement_cancelled:"The agreement is already canceled.",agreement_deleted:"The agreement has been deleted.",agreement_destroyed:"A member of the originator's account has removed this asset from Acrobat Sign. Data on this agreement is no longer available.",agreement_expiration_date_invalid:"You must set a future date for agreement expiration.",agreement_expiration_max_days_exceeded:"You have exceeded the maximum number of days allowed for document expiration.",agreement_expired:"The agreement is expired.",agreement_in_draft_state:"The agreement is in draft state.",agreement_migration_locked:"Agreement locked for migration. Please try again later.",agreement_modification_not_acknowledged:"The agreement has been modified by the sender. Please get the latest version.",agreement_not_available:"The agreement is not yet available or will have no pages to view.",agreement_not_exposed:"The agreement has not yet been exposed to the requested participant.",agreement_not_found:"The document is not part of the agreement.",agreement_not_having_prefill_fields:"Agreement must have prefill fields for transitioning to Prefill state.",agreement_not_in_authoring_state:"The agreement is not in Draft mode. Hence, Form Fields cannot be updated.",agreement_not_in_digsign_phase:"The agreement cannot be digitally signed since it is not in the digital sign phase.",agreement_not_modified:"The agreement has not been modified.",agreement_not_signable:"The agreement is not currently waiting for anyone to sign it.",agreement_not_visible:"The agreement is not visible to this user for signing.",agreement_removed:"The agreement has been removed from the system.",agreement_sharing_disabled:"Agreement sharing is not enabled for your account.",agreement_sharing_max_sharee_exceeded:"Agreements can be shared with at most 1 sharee at a time.",agreement_sharing_max_sharees_exceeded:"You have exceeded the maximum allowed number of agreement shares.",agreement_signed:"The agreement is already signed.",agreement_sharing_no_permission:"Agreement sharing with {emails} is not allowed, please contact your account administrator",already_signed:"Bulk send is already signed.",alternate_participant_addition_not_allowed:"User cannot perform delegation to the specified email address.",alternate_participant_addition_originator_not_allowed:"You can't delegate your signature to the sender.",alternate_participant_addition_prohibited_by_settings:"Your account admin does not allow delegation to this individual.",alternate_participant_addition_self_not_allowed:"You can't delegate a signature to yourself.",alternate_participant_addition_signatory_not_allowed:"You can't delegate your signature to an individual who is already a party to this agreement.",api_access_tokens_not_allowed:"Access tokens for the API are not permitted.",api_terms_not_accepted:"Your account is locked because an administrator has not agreed to Acrobat Sign's Terms of Use. Please contact your account administrator to activate your account.",app_disabled:"The application has been disabled.",app_revoked:"The application has been revoked.",auth_method_provided_is_not_allowed:"Auth method provided is not allowed.",auth_method_provided_more_than_once:"Auth method has been provided more than once.",auth_only_applicable_to_email:"Auth method can only be applied to email.",autologin_denied:"User settings do not permit autologin as requested.",authentication_method_not_matching:"Authentication method provided is different from the one applied by sender.",bad_request:"The request provided is invalid.",cannot_create_reminder_invalid_state:"Reminder cannot be created because either the agreement or the participant is in a completed state.",cannot_create_reminder_invalid_timing:"Reminder cannot be created because the combination of nextSendDate and frequency, firstReminderDelay, or startReminderCounterFrom is invalid.",cannot_create_reminder:"Reminder cannot be created.",cannot_create_reminder_past_expiration:"Reminder cannot be created past the agreement expiration date.",cannot_edit_agreement_expiration:"You do not have permission to set the expiration date for this agreement.","cannot_process_request ":"An error occurred and the request could not be processed.",cannot_send_for_written_with_doc_visibility:"We could not send your agreement for Written Signature because you have enforced limited document visibility for one or more recipients. Please send this agreement for Electronic Signature or disable the document visibility restrictions visibility for one or more recipients. Please send this agreement for Electronic Signature or disable the document visibility restrictions or your account.",cannot_send_reminder:"Reminder for agreement cannot be sent.",cannot_update_canceled_or_complete_reminder:"Canceled or complete reminders cannot be updated.",cannot_update_reminder_timing:"Reminder timing cannot be updated once started.",cannot_update_reminder_when_canceling:"Only status can be updated when canceling a reminder.",cc_field_name_missing:"Name is missing in CcField.",ccinfo_label_missing:"Required label field value is missing in CcInfo.",client_incapable_of_signing:"Features required for signing the agreement are supported by API but are not provided inside the supportedFeatures.",cloud_signing_provider_unavailable:"The cloud signing provider is unavailable. Please try again later.",consent_acceptance_required:"Consent acceptance is required for creation of user.",consumer_disclosure_not_accepted:"Consumer Disclosure not accepted.",delegation_not_allowed:"User cannot perform delegation to the specified email address.",delegation_settings_prohibit:"Your account admin does not allow delegation to this individual.",delegation_to_originator_not_allowed:"You can't delegate your signature to the sender.",delegation_to_previously_replaced_not_allowed:"You can't add an individual who was previously replaced.",delegation_to_self_not_allowed:"You can't delegate a signature to yourself.",delegation_to_signatory_not_allowed:"You can't delegate your signature to an individual who is already a party to this agreement.",delegator_cannot_update:"Delegator is not allowed to update partcipants.",digital_signature_size_error:"Digital signature size does not meet the expected size requirement.",disabled_workflow:"The workflow is in hidden/draft state.",doc_conversion_failed_common:"Acrobat Sign was unable to process your document(s).  This can occur if uploaded documents contain scripts, macros or Visual Basic code. You may wish to inspect your documents for these elements, remove them, and try again.",doc_conversion_failed_encrypted_pdf:"Acrobat Sign was unable to convert your PDF because it has limited access settings applied.",doc_conversion_failed_password_protected:"Acrobat Sign was unable to convert your document because it is password protected.",document_already_signed:"The document has already been signed by this user.",document_deleted:"The document has been deleted.",document_has_been_deleted:"The document has been deleted.",document_has_been_removed:"The document has already been removed.",document_not_available:"The document is not yet available or will have no pages to view.",document_not_exposed:"The document has not yet been exposed to the requested participant.",document_not_found:"The document is not part of the agreement.",document_not_signable:"The document is not currently waiting for anyone to sign it.",document_not_visible:"The document is not visible to this user for signing.",document_original_format_not_allowed:"The documents in original format are not enabled for this user.",document_removed:"The document has been removed from the system.",document_visibility_disabled:"Document visibility is disabled for this agreement.",document_visibility_update_not_allowed:"Document visibility cannot be altered when modifying this agreement.",documents_removed:"The documents have already been removed.",duplicate_email:"Recipient appears more than once for cases where it is not allowed.",duplicate_fax:"Fax number appears more than once for cases where it is not allowed.",duplicate_fileinfo_label:"The same label specified in more than one FileInfo object.",duplicate_participationset_label:"Duplicate label specified in more than one participant set.",duplicate_webhook_configuration:"There is already a webhook registered with same configuration.",dynamic_document_expiration_not_enabled:"The operation requires some account settings to be enabled. Please contact the Acrobat Sign team to enable the settings.",email_cannot_be_added:"You cannot add that email address to your account.",empty_externalid_parameter:"ExternalId parameter can not be empty.",empty_redirect_url:"If PostSignOptions are specified, the redirectUrl must not be empty.",error_megasign_MERGE_DUPLICATE_FIELD:"Send in Bulk merge files may not have duplicate fields",error_megasign_MERGE_MISSING_VALUES:"Send in Bulk merge file rows must have a value for all fields",error_megasign_MERGE_NO_RECIPIENT:"Send in Bulk merge file rows must have an email value",error_megasign_MERGE_NO_RECIPIENTS:"Send in Bulk merge files must contain an email field",existing_user:"A user with the specified email already exists.",external_auth_method_provided_is_not_allowed:"External auth method provided is not allowed.",external_auth_method_provided_more_than_once:"External auth method has been provided more than once.",failed_iauth_questions:"Your identity could not be verified.",fax_not_allowed:"Telephone numbers cannot be used for this workflow.",file_info_name_missing:"Name is missing in FileInfo field.",fileinfo_label_missing:"Required label field value is missing in FileInfo.",gov_id_limit_exceeded:"Government ID for identity verification is exhausted. Please select another method or contact your administrator.",gov_id_verification_unavailable:"The digital identity verification service is not available.",group_not_empty:"The group cannot be deleted because it is not empty.",hybrid_routing_not_allowed:"Hybrid routing is not enabled for this user.",implicit_txn_denied:"The client is not authorized to obtain Signature Activation Data.",individual_not_found:"Your identity could not be verified.",internal_auth_method_provided_is_not_allowed:"Internal auth method provided is not allowed.",internal_auth_method_provided_more_than_once:"Internal auth method has been provided more than once.",internal_signer_auth_not_allowed:"User settings do not permit internal signer auth.",invalid_access_token:"Access token provided is invalid or has expired.",invalid_account:"Specification of the account is invalid.",invalid_adobe_id_verification_token:"The AdobeID access token specified is invalid.",invalid_agreement_asset_id:"The Agreement Asset ID specified is invalid.",invalid_agreement_id_reminder:"The reminder to sign cannot be sent because the provided Agreement ID is invalid.",invalid_agreement_id:"The Agreement ID specified is invalid.",invalid_agreement_status:"Agreement state can not be updated to th e provided status.",invalid_api_access_point:"Request must be made to correct api access point (e.g. use get /base_uris).",invalid_api_key:"api_key provided is invalid.",invalid_app:"An invalid application ID or secret was specified.",invalid_application_description:"Invalid device description is provided.",invalid_arguments:"One or more arguments to the method are invalid.",invalid_authentication_method:"Authentication method provided is different from the one applied by sender.",invalid_authentication_otp:"Invalid verification code. Please try again.",invalid_authentication_password:"Invalid password. Please try again.",invalid_cc_visible_page_label:"One or more visible page labels in CC is invalid.",invalid_ccinfo_label:"The label specified in one or more CcInfo object is invalid.",invalid_ccinfo:"The value specified in one or more CcInfo object is invalid.",invalid_country_code:"Country code provided is invalid.",invalid_cursor:"Page cursor provided is invalid.",invalid_date_format:"The date format provided is invalid.",invalid_date:"Date requested is invalid. Please check end date is greater than start date and range is not greater than 180 days.",invalid_delegation_email:"The  email specified for the agreement delegation is invalid.",invalid_delegation_message:"The message specified for the agreement delegation cannot be blank.",invalid_device_date:"Device date provided is invalid.",invalid_device_description:"Device Description provided is invalid.",invalid_device_time_zone_offset:"Device Time zone offset provided is invalid.",invalid_document_id:"The Document ID specified is invalid.",invalid_email:"Email provided is invalid.",invalid_field_value:"Invalid form field value is provided.",invalid_file_info:"Invalid or no file info is provided.",invalid_fileinfo_label:"The label specified in one or more FileInfo object is invalid.",invalid_first_reminder_delay:"Invalid firstReminderDelay provided. It should be a positive integer greater than or equal to 1 and should not exceed agreement expiration time.",invalid_group_id:"The Group ID specified is invalid.",invalid_group_id_for_user:"Specified group is invalid or user is not a member.",invalid_group_key:"The Group ID specified is invalid.",invalid_group_name:"The group name provided is not valid or is already taken, group names must be a unique non-empty strings no longer than 255 characters.",invalid_image_size:"Must provide a comma separated list of valid image sizes.",invalid_image_type:"The Image type must be either png or jpeg.",invalid_initials_baseline_ratio:"Invalid value provided for Initials Baseline ratio.",invalid_initials_content:"Invalid value provided for Initials content.",invalid_initials_datapoints:"Invalid value provided for Initials Data points.",invalid_initials_datasequences:"Invalid value provided for Initials Data sequences.",invalid_initials_field_names:"Invalid field names provided for Initials field.",invalid_initials_height:"Invalid value provided for Initials height.",invalid_initials_image_info:"Invalid value provided for Initials image content.",invalid_initials_pen_width_ratio:"Invalid value provided for Initials Pen width ratio.",invalid_initials_scribble_type:"Invalid value provided for Initials Scribble type.",invalid_initials_width:"Invalid value provided for Initials width.",invalid_json_web_token:"The JSON web token is invalid. Please reauthenticate.",invalid_json:"An invalid json was specified.",invalid_kba_identity_details:"The identity details provided could not be verified.",invalid_kba_ssn:"The number of SSN digits entered is less than the required number.",invalid_librarydocument_id:"The Library Document ID specified is invalid.",invalid_librarydocument_name:"The Library Document name specified is invalid.",invalid_location:"Invalid location is provided.",invalid_megasign_id:"The bulk send ID specified is invalid.",invalid_mime_type:"The mime type specified is invalid.",invalid_multipart:"An invalid multipart was specified.",invalid_number_of_payment_fields:"Some participants have more than one payment field.",invalid_on_behalf_of_user_header:"Value provided in x-on-behalf-of-user header is in invalid format.",invalid_on_behalf_of_user:"Invalid user ID or email provided in x-on-behalf-of-user header.",invalid_or_expired_oauth_token:"The OAuth token is invalid or has expired. Please reauthenticate.",invalid_order:"Order of participant sets define an invalid range.",invalid_page_cursor:"Page cursor provided is invalid.",invalid_page_size:"Page size is either invalid or not within permissible range.",invalid_participant_id:"The participant ID specified is invalid.",invalid_participant_library:"The participant email specified for the library document is invalid.",invalid_participant_role:"Role provided is invalid.",invalid_participant_set_id:"The participant set ID specified is invalid.",invalid_participant_set_visible_page_label:"One or more visible page labels in participant set is invalid.",invalid_participant_widget:"The participant email specified for the web form is invalid.",invalid_participant:"The participant email specified is invalid.",invalid_participationset_label:"The label specified in one or more participant set is invalid.",invalid_password:"Invalid password. Please try again.",invalid_phone:"Phone number provided is invalid.",invalid_pin_otp:"Invalid PIN and/or OTP.",invalid_recipient_auth_method:"Invalid authentication method for recipient.",invalid_recipient_email:"Recipient email is missing or invalid.",invalid_redirect_delay:"The redirectDelay specified in PostSignOptions must be non-negative integer.",invalid_redirect_url:"The redirectUrl specified in PostSignOptions is not a valid url.",invalid_reminder_id:"The reminder ID specified is invalid.",invalid_reminder_recipient_pids:"One or more of the participant ID(s) of the reminder recipients provided in the request are invalid.",invalid_reminder_status:"Status of the reminder provided in the request is invalid. Reminder cannot be created in the CANCELED or updated to the ACTIVE state.",invalid_scope_id:"The Scope ID specified is invalid.",invalid_search_id:"Search ID provided is invalid.",invalid_seat_count:"The number of seats is not valid for this plan.",invalid_signature_baseline_ratio:"Invalid value provided for Signature Baseline ratio.",invalid_signature_content_type:"Invalid Signature content type provided. ",invalid_signature_content:"Invalid value provided for Signature content.",invalid_signature_datapoints:"Invalid value provided for Signature Data points.",invalid_signature_datasequences:"Invalid value provided for Signature data sequences.",invalid_signature_field_names:"Invalid field names provided for Signature field.",invalid_signature_field_value:"Either one of signature ID or signature info must be provided. Only one of them must be present.",invalid_signature_flow_for_written:"Parallel or hybrid recipients are not allowed for the WRITTEN signature type",invalid_signature_flow:"Only SENDER_SIGNATURE_NOT_REQUIRED and SENDER_SIGNS_LAST are permitted for web forms.",invalid_signature_height:"Invalid value provided for Signature height.",invalid_signature_identity_pen_width_ratio:"Invalid value provided for Signature identity Pen width ratio.",invalid_signature_image_info:"Invalid value provided for Signature image content.",invalid_signature_pen_width_ratio:"Invalid value provided for Signature Pen width ratio.",invalid_signature_scribble_type:"Invalid value provided for Signature Scribble type.",invalid_signature_type:"The Signature type specified is not a valid Acrobat Sign supported format.",invalid_signature_width:"Invalid value provided for Signature width.",invalid_signer_auth:"Signer identity verification method specified is not allowed by account settings.",invalid_signing_security_token:"Invalid signing security token provided.",invalid_signing_token_id:"Signing token provided is either invalid or expired.",invalid_stamp_content:"Invalid value provided for Stamp content.",invalid_stamp_field_names:"Invalid field names provided for Stamp field.",invalid_stamp_image_info:"Invalid value provided for Stamp image content.",invalid_start_reminder_from_when_agreement_in_authoring:"Reminders cannot be created when startReminderCounterFrom = REMINDER_CREATION and the agreement is waiting for authoring.",invalid_supported_features:"Supported features provided are invalid.",invalid_target_view:"Invalid Target View.",invalid_transaction_code:"The transaction code specified is invalid.",invalid_transientdocument_id:"The Transient Document ID specified is invalid.",invalid_url:"The redirect url is not valid.",invalid_user_credentials:"Invalid user credentials.",invalid_user_id:"The User ID specified is invalid.",invalid_user_token:"An invalid email and password combination or api key was specified.",invalid_user_view:"Invalid user ID or email provided in x-user header.",invalid_user:"An invalid user ID or email was provided.",invalid_vector_data:"The vector data is invalid.",invalid_version_id_library:"The Version ID of the library document specified is invalid.",invalid_version_id_widget:"The Version ID of the web form specified is invalid.",invalid_version_id:"The version ID specified is invalid.",invalid_webhook_conditional_params:"The webhook conditional parameters specified are invalid.",invalid_webhook_id:"The webhook id specified is invalid.",invalid_webhook_resource_id:"The resource id specified is invalid.",invalid_webhook_resource_type:"The resource type specified is invalid.",invalid_webhook_state:"The webhook state specified is invalid.",invalid_webhook_subscription_events:"One or more webhook subscription events specified is invalid.",invalid_webhook_url:"The webhook url specified is invalid. Please provide a well-formatted https based url.",invalid_widget_id:"The web form ID specified is invalid.",invalid_widget_status:"Web form state can not be updated to the provided status.",invalid_workflow_id:"The Workflow ID specified is invalid.",invalid_x_signing_token:"Invalid Value provided in x-signing-token header.",invalid_x_api_user_header:"Value provided in x-api-user header is in invalid format.",invalid_x_participant_auth_token:"The auth token specified in header is invalid.",invalid_xml:"XML is invalid.",kba_identity_unverified:"Your identity cannot be verified.",kba_limit_exceeded:"KBA limit for identity verification is exhausted. Please select another method or contact your administrator.",kba_quota_limit_exceeded:"You cannot sign this agreement as KBA quota has exhausted.",kba_service_unavailable:"KBA service unavailable.",large_file_size:"File size is too large.",librarydocument_deleted:"The library document has been deleted.",librarydocument_not_accessible_custom_workflow:"Workflow has library documents that are not accessible to you. Please contact your account admin to update this workflow.",librarydocument_not_available:"The library document is not yet available or will have no pages to view.",librarydocument_not_exposed:"The library document has not yet been exposed to the requested participant.",librarydocument_not_found:"The document is not part of the library document.",librarydocument_not_modified:"The library document has not been modified.",librarydocument_removed:"The library document has been removed from the system.",max_addresses_exceeded:"Fields maximum allowed entries requirement is exceeded.",max_signing_gov_id_attempts_exceeded:"You've exceeded the maximum number of government ID authentication attempts. The agreement has been canceled.",max_signing_kba_attempts_exceeded:"You've exceeded the maximum number of KBA authentication attempts. The agreement has been canceled.",max_signing_password_attempts_exceeded:"You've exceeded the maximum number of password authentication attempts. The agreement has been canceled.",max_signing_phone_attempts_exceeded:"You've exceeded the maximum number of phone authentication attempts. The agreement has been canceled.",mega_sign_expired:"The specified bulk send has expired.",megasign_already_cancelled:"The bulk send being modified has already been canceled.",megasign_deleted:"The bulk send has been deleted.",megasign_expiration_date_invalid:"You must set a future date for megasign expiration.",megasign_expiration_max_days_exceeded:"You have exceeded the maximum number of days allowed for document expiration.",megasign_in_process:"The bulk send is still being processed and cannot be modified.",method_not_allowed:"Method not allowed.",min_addresses_not_met:"Some fields minimum entries requirement is not met.",misc_error:"Some miscellaneous error has occurred.",misc_server_error:"Some miscellaneous error has occurred.",mismatch_in_role_settings:"There is a mismatch in role settings.",mismatch_in_workflow_participation_gov_id_auth_method_and_settings:"There is a mismatch in workflow participation Government ID auth method and settings. Change the workflow description or contact your account admin.",mismatch_in_workflow_participation_role_and_settings:"There is a mismatch in workflow participation role and settings.Change the workflow description or contact your account admin.",mismatch_in_workflow_particpation_adobe_sign_auth_method_and_settings:"There is a mismatch in workflow participation Acrobat Sign auth method and settings.Change the workflow description or contact your account admin.",mismatch_in_workflow_particpation_kba_auth_method_and_settings:"There is a mismatch in workflow participation kba auth method and settings.Change the workflow description or contact your account admin.",mismatch_in_workflow_particpation_phone_auth_method_and_settings:"There is a mismatch in workflow participation phone auth method and settings.Change the workflow description or contact your account admin.",missing_if_match_header:"If-Match header missing.",missing_required_cc_field:"Required Cc Field is missing.",missing_required_file_info:"Required FileInfo is missing.",missing_required_param:"Required parameters are missing.",missing_required_to_field:"Required ToField is missing.",missing_transient_document_id:"Must provide valid Transient Document ID.",modifying_immutable_fields:"Immutable fields cannot be modified.",more_than_one_counter_signer_specified:"Cannot specify more than one counterSigner in a counterSignerSetMemberInfos.",must_delegate:"You must delegate the signing of this agreement to an authorized party. Please click the link in the email you received to delegate this agreement.",multiple_delegations_not_supported:"Multiple delegations are not supported currently.",multiple_header_with_samename:"Multiple headers with same name.",must_provide_agreement_id:"Must provide an Agreement ID.",must_provide_email:"Must provide email.",must_provide_reminder_frequency:"Provide reminder frequency or set the default reminder frequency for the account.",must_provide_signature_flow:"Must provide a valid signature flow parameter.",must_provide_signature_type:"Must provide a valid signature type parameter.",must_provide_valid_agreement_status:"Must provide a valid agreement status.",must_provide_valid_recipient_role:"Must provide a valid recipient role.",must_provide_valid_widget_status:"Must provide a valid web form status.",no_access_token_header:"Access token header not provided.",no_action_specified:"Either a redirectUrl or a message is required.",no_agreement_asset_events:"No agreement asset events in your account.",no_authorization_header:"Authorization header not provided.",no_cc_to_self:"This workflow does not permit including yourself in some fields.",no_default_initial_associated:"No default initial is associated with the user.",no_default_signature_associated:"No default signature is associated with the user.",no_default_stamp_associated:"No default stamp is associated with the user.",no_file_content:"Must provide file body.",no_file_name:"Must provide file name.",no_form_data_widget:"There is no form data available for this web form.",no_form_data:"There is no form data available for this agreement.",no_image_associated_with_scribble:"No image associated with the scribble.",no_initials_associated:"No initials associated with user. Default behavior of Acrobat Sign will be applied.",no_media_type:"No media type specified.",no_permission_to_sign:"No permission to sign.",no_permission:"No permission to retrieve the user.",no_send_to_self:"This workflow does not permit including yourself in some fields.",no_signature_associated:"No signature associated with user. Default behavior of Acrobat Sign will be applied.",no_x_signing_token_header:"x-signing-token header not provided.",non_acceptable_signature_content_type:"The content type provided in the request is not supported for the signature.",not_acceptable:"The server cannot send the response in a format requested in the Accept header.",not_authorized_for_transient_resource:"Not authorized for the transient resource referred to in the request.",not_authorized_for_url:"Not authorized for the URL referred to in the request.",not_found:"Resource not found.",not_in_account:"The API user must have an account in order to use group management methods.",not_supported_by_api:"Features required for signing the agreement are not supported by API",only_sender_can_replace:"Only a sender can replace an existing participant.",operation_not_allowed:"Requested operation is not allowed.",operation_not_allowed_migration:"Resource (Agreement, Signer or User Account) locked for migration. Please try again after 5 minutes.",otp_locked:"An invalid OTP has locked your credential. Please contact your service provider.",page_limit_exceeded:"Acrobat Sign was unable to create your agreement because the document(s) exceeded your page limit.",participant_auth_token_expired:"The participant authentication token has expired. Please refresh and try again.",participant_replaced:"You have been replaced by another participant and are not a party to this document anymore.",participationset_label_missing:"Required label field value is missing in participant set.",past_expiry_time:"Expiry time is set before the use time.",payment_integration_disabled:"Request has payment fields, but payment feature is disabled.",per_signer_auth_not_allowed:"User settings do not permit per signer auth.",permission_denied_view:"User must be account administrator.",permission_denied:"You do not have the permission to execute this operation.",phone_auth_init_required:"Phone authentication initiation is not yet done for the trigger passed in the verification request.",phone_auth_limit_exceeded:"Phone usage limit for identity verification is exhausted. Please select another method or contact your administrator.",phone_otp_mismatch:"Invalid verification code. Please try again.",phone_token_expired:"This verification code has expired.",pin_locked:"An invalid PIN has locked your credential. Please try again in a few minutes.",private_messages_not_enabled:"Sending private messages to recipients is not enabled for this user.",problem_with_workflow_description:"There is a problem in workflow description. Change the workflow description or contact your account admin.",recipient_set_not_supported:"Recipient set with multiple recipients is not supported for a Send in Bulk.",remote_sign_service_unavailable:"The remoteSign microservice is unavailable. Please try again later.",remove_failed:"The system failed to remove the document.",resource_modified:"Resource is already modified with a newer version.",resource_not_modified:"Resource is not modified.",scribble_not_supported_for_stamps:"Scribble value is not supported for Stamp fields",send_limit_exceeded:"Agreement creation quota of the user is exhausted.",service_unavailable:"Service seems to be unavailable. Please try after some time.",sharee_already_participating:"One or more sharees is already a participant and cannot be shared with.",signed_document_password_protection_not_allowed:"Password protection for signed document is not allowed.",signer_auth_not_allowed:"User settings do not permit signer auth specification.",signer_authentication_required:"The participant must complete the signer authentication step to gain access to the document details or sign.",template_not_form_field_layer:"The specified template does not represent a form field layer.",to_field_name_missing:"Name is missing in ToField.",too_many_actions_specified:"Cannot specify both a redirectUrl and a message.",transient_resource_deleted:"Transient Resource deleted from the server.",transient_resource_processing_failed:"The transient document was deleted from the system because Acrobat Sign could not process the document. This can happen if uploaded document contains scripts, macros or Visual Basic code. You may wish to inspect your document for these elements, remove them, and try uploading the document again.",transient_resource_virus_detected:"The transient document was deleted because a virus was detected in the file.",unauthorized:"You cannot work on behalf of this user.",unknown_fields:"Unknown field is provided.",unsupported_media_type:"Content type was not provided or is not supported.",unverified_user:"The user has registered but has not verified their email address. The user must use the Acrobat Sign web site to complete verification.",update_not_allowed:"The agreement you are trying to update is not modifiable.",url_invalid:"Provided document URL is invalid.",url_not_supported:"Requested URL is not supported by the API.",url_not_valid:"Requested URL is not valid.",user_already_exists:"A user with the specified email already exists.",user_cannot_be_created:"Users cannot be created at this time. Please try again later.",user_info_remove_failed:"The system failed to remove user data.",user_password_weak:"The password specified is not secure enough (minimum 6 letters).",view_not_available:"Requested view is not available for the resource in the current state.",weak_password:"Password does not meet minimum strength level.",webhook_creation_not_allowed:"Webhook creation is not allowed.",webhook_limit_exceeded:"Webhook limit for this resource and event has been exceeded.","widget_deleted ":"The web form has been deleted.",widget_has_been_deleted:"The web form has been deleted.",widget_in_draft_state:"The web form is in draft state.","widget_not_available ":"The web form document is not yet available or will have no pages to view.","widget_not_exposed ":"The web form document has not yet been exposed to the requested participant.",widget_not_modified:"The web form has not been modified.","widget_removed ":"The web form has been removed from the system.",widget_sharing_disabled:"Web form sharing is not enabled for your account.",widget_sharing_max_sharee_exceeded:"Web forms can be shared with at most 1 sharee at a time.",widget_sharing_max_sharees_exceeded:"You have exceeded the maximum allowed number of web form shares.",wrong_user:"The participant is not the next person to sign."}}),(function(module,exports){module.exports={accepted:"Accepted",approved:"Approved",archived:"Archived",authoring:"Authoring",cancelled:"Canceled",completed:"Completed",delivered:"Delivered",documents_not_yet_processed:"Documents not yet processed",draft:"Draft",expired:"Expired",form_filled:"Filled",in_process:"Out for Signature",prefill:"Prefill",not_yet_visible:"Not yet visible",out_for_acceptance:"Out for Acceptance",out_for_approval:"Out for Approval",out_for_delivery:"Out for Delivery",out_for_form_filling:"Out for Form Filling",out_for_signature:"Out for Signature",recalled:"Canceled",signed:"Signed",unknown:"Unknown",waiting_for_faxin:"Waiting for faxin",waiting_for_my_acceptance:"Waiting For Me to Accept",waiting_for_my_approval:"Waiting For Me to Approve",waiting_for_my_acknowledgement:"Waiting For Me to Acknowledge",waiting_for_my_delegation:"Waiting For Me to Delegate",waiting_for_my_form_filling:"Waiting For Me to Fill",waiting_for_my_signature:"Waiting For Me to Sign",waiting_for_my_verification:"Waiting for Me to Verify",waiting_for_notarization:"Waiting for Notarization",waiting_for_others:"Waiting for Others",waiting_for_prefill:"Waiting for Prefill",waiting_for_verification:"Waiting for Verification",waiting_for_authoring:"Waiting for Authoring",widget:"Web Form",widget_waiting_for_verification:"Web Form waiting for verification"}}),,,,,,,(function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}}());function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}}),,,,(function(module,exports,__webpack_require__){(function(global,process){var fn=Backbone._.once(function(Api){Api={Helpers:{}};function _export(opt){opt=opt||{};Api._=Backbone._||global._;Api._.extend(Api,{apiVersion:opt.apiVersion||"v6",libVersion:opt.libVersion||"6.123.0",locale:opt.locale||"en-US"});__webpack_require__(31)(Api);__webpack_require__(33)(Api);__webpack_require__(34)(Api);__webpack_require__(35)(Api);__webpack_require__(36)(Api);__webpack_require__(37)(Api);__webpack_require__(38)(Api);__webpack_require__(39)(Api);__webpack_require__(40)(Api);__webpack_require__(41)(Api);__webpack_require__(42)(Api);__webpack_require__(43)(Api);__webpack_require__(44)(Api);__webpack_require__(45)(Api);__webpack_require__(46)(Api);__webpack_require__(47)(Api);__webpack_require__(48)(Api);__webpack_require__(49)(Api);__webpack_require__(50)(Api);__webpack_require__(51)(Api);__webpack_require__(52)(Api);if(!window.parcelRequire){Api.i18n.api=__webpack_require__(226)("./"+Api.locale+".json");Api.i18n.js=__webpack_require__(227)("./"+Api.locale+".json")}else{Api.i18n.api=__webpack_require__(18);Api.i18n.js=__webpack_require__(19)}Api._(Api.getAllApiClasses()).each(function(klass){if(klass===Api._){return}var sync=klass.prototype.sync,hasCustomSync=!(sync===Backbone.Model.prototype.sync||sync===Backbone.Collection.prototype.sync),syncStr;if(hasCustomSync){syncStr=sync.toString();if(syncStr.indexOf("this._super")>-1||syncStr.indexOf("Backbone.sync.")>-1){console.warn("WARNING -- make sure class is calling Backbone.sync_v6:");console.log(klass)}return}klass.prototype.sync=function(){return Backbone.sync_v6.apply(this,arguments)}});return Api}if(typeof process==="undefined"||process.title==="browser"){module.exports=_export()}else{module.exports=_export}return Api});module.exports=fn}.call(exports,__webpack_require__(10),__webpack_require__(26)))}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){__webpack_require__(32)(Api);var _=Api._;Backbone.Collection.originalPreInitialize=Backbone.Collection.originalPreInitialize||Backbone.Collection.prototype.preinitialize;Backbone.Collection.prototype.preinitialize=function(models,options){if(models&&!_.isArray(models)){throw new Error("Backbone.Models ctor first arg is not falsy or Array.")}attachUseApi.apply(this,arguments);this.timeMarker=0;Backbone.Collection.originalPreInitialize.apply(this,arguments)};Backbone.Model.originalPreInitialize=Backbone.Model.originalPreInitialize||Backbone.Model.prototype.preinitialize;Backbone.Model.prototype.preinitialize=function(attrs,options){attachUseApi.apply(this,arguments);this.timeMarker=0;Backbone.Model.originalPreInitialize.apply(this,arguments)};var attachUseApi=function(arg1,options){if(options&&options.useApi){this.useApi=options.useApi}else{if(options&&!this.useApi){var parent=_.find(options,function(item){return item&&!!item.useApi});if(parent){this.useApi=parent.useApi}}}};Backbone.Model.originalSave=Backbone.Model.originalSave||Backbone.Model.prototype.save;Backbone.Model.prototype.save=function(){var xhr=Backbone.Model.originalSave.apply(this,arguments);return xhr===false?Promise.reject(this.validationError):xhr};Backbone.Model.originalToJSON=Backbone.Model.originalToJSON||Backbone.Model.prototype.toJSON;Backbone.Model.prototype.toJSON=function(){return JSON.parse(JSON.stringify(Backbone.Model.originalToJSON.apply(this,arguments)))};Backbone.Collection.prototype.allowedCRUD=Backbone.Model.prototype.allowedCRUD=null;Backbone.Collection.prototype.canSync=Backbone.Model.prototype.canSync=function(method,model,options){var t=this.allowedCRUD;return !t||(_.isFunction(t)?t.apply(this,arguments):_(t).contains(method))};Backbone.Model.inherit=function(attrName,obj){return function(){if(_.isString(attrName)){return _.deepClone(_.extend({},_.result(this.constructor.__super__,attrName),obj))}else{return _.deepClone(_.extend({},attrName,_.result(this.constructor.__super__,obj)))}}};Backbone.Collection.prototype.validate=function(options){options=options||{};var errors=[];_.each(this.models,_validateOneModel,this);if(options.dedupe){errors=_(errors).chain().uniq(false,function(err){return JSON.stringify(err)}).value()}return errors.length?errors:undefined;function _validateOneModel(model){model.isValid(options);var error=model.validationError;if(!error){return}if(_.isArray(error)){errors=errors.concat(error)}else{if(_.isObject(error)){if(_(error).size()>1||_.isObject(_(error).values()[0])){errors=errors.concat(_(error).chain().values().flatten().value())}else{errors.push(error)}}else{errors.push({key:"set_"+model.cid,message:error})}}}};Backbone.Collection.prototype.validateAll=function(options){this.isValid(options);return this.validationError};Backbone.Collection.prototype.isValid=Backbone.Model.prototype.isValid;Backbone.Collection.prototype._validate=function _validate(ignore,options){if(!options.validate||!this.validate){return true}var error=(this.validationError=this.validate(options)||null);if(!error){return true}this.trigger("invalid:collection",this,error,_.extend(options,{validationError:error}));return false};Backbone.syncSettings={usePromise:true,retrySync:{max_retries:7,retry_interval:2200,retry_decay:0.3,stopOnError:false}};if(!Backbone.originalSync){Backbone.originalSync=Backbone.sync}Backbone.sync_v6=function(method,model,options){if(!this.canSync.apply(this,arguments)){throw new TypeError("CRUD method not allowed - "+method)}model.lastError=null;options.syncMethod=method;model.lastOptions=options;model.timeMarker=_.now();var origAttrs=model.toJSON();var origError=options.error,wrappedError=function(resp){Api.mapI18nMessage(resp,model);if(serverErrorHandled(resp)||!origError){return}origError.apply(this,arguments)},saveETag=function(model,opts){var eTag=opts.xhr.getResponseHeader("etag");if(eTag!==null){Api.etagCache.set(model,eTag)}return eTag!==null},onSuccess=function(model,resp,_options){saveETag(model,options);model.off("error",onError,model)},onError=function(model,resp,_options){model.off("sync",onSuccess,model);if(!options.errorHandled){useApi.errorHandler(model,resp,options)}},fetchEtag=function(){var proxyModel,proxyOptions;proxyModel=model.eTagParent||model;proxyOptions=_.extend({_etagFetch:true},_.omit(options,"success","error"));if(options.headers){delete options.headers["If-Match"]}delete options.forceEtagFetch;return options.proxyPromise=proxyModel.fetch(proxyOptions).then(function(opts){if(!saveETag(proxyModel,opts)){opts=(options.xhr||{}).options||opts;throw new Error("No eTag returned -- cannot complete "+opts.type+" on "+opts.url)}delete options.proxyPromise;var wrappedSuccess=options.success;options.success=function(_model,resp,_options){wrappedSuccess(resp)};delete options.error;return model.save(origAttrs,options).then(function(resp){Api.etagCache.set(model,null);return resp})})},serverErrorHandled=function(resp){var error=resp.responseJSON||resp.responseText||resp.response||resp.statusText,eTagErrors=[[options.eTagStatus||model.eTagStatus||412,options.eTagCode||model.eTagCode||"RESOURCE_MODIFIED"],[400,"MISSING_IF_MATCH_HEADER"]],modifiedBeforePUT,isUnauthorized;if(typeof error!=="object"){try{error=JSON.parse(error)}catch(e){}}else{if(/^<!DOCTYPE/i.test(error)){var d=document.createElement("div");d.innerHTML=error;error=d.textContent.replace(/\s\s+/g," ").substr(0,100)}}model.lastError=error;modifiedBeforePUT=_(eTagErrors).any(function(predicate){return predicate[0]===resp.status&&predicate[1]===error.code});if(modifiedBeforePUT&&options.forceEtagFetch!==false){model.off("sync",onSuccess,model);model.off("error",onError,model);fetchEtag();return true}isUnauthorized=resp.status===401;if((resp.status<500&&!isUnauthorized)||options.overrideServerErrors===true||resp instanceof Error){return}model.trigger("error",model,resp,options);return !isUnauthorized},headers={},usePromise=_.defaults({},options,Backbone.syncSettings).usePromise,needsETag=method==="update"||method==="delete",existingETag=Api.etagCache.get(this),useApi=options.useApi||this.useApi||Api,xhr,promise;options.error=wrappedError;if(needsETag&&(options.forceEtagFetch||(!existingETag&&this.collection&&options.forceEtagFetch!==false))){return fetchEtag()}if(!usePromise){this.once("error",onError,this)}if(options._etagFetch){delete options.success}else{if(!usePromise){this.once("sync",onSuccess,this)}}if(needsETag&&existingETag){headers=_.extend(headers,{"If-Match":existingETag})}if(method==="read"&&(!!window.MSInputMethodContext&&!!document.documentMode)){headers["If-None-Match"]="*"}options.headers=_.defaults(options.headers||{},headers,useApi.getHeaders());xhr=Backbone.originalSync.apply(this,arguments);if(usePromise){promise=new Promise(function(resolve,reject){xhr.then(function(resp){onSuccess(model,resp);resolve(options._etagFetch?options:resp)},function(xhr,status,statusText){var error=xhr instanceof Error?xhr:null;var handleErr=function(error){try{if(typeof error!=="object"){error=JSON.parse(error)}}catch(e){}onError(model,xhr,options);promise["catch"](_.noop);reject(error)};if(options.proxyPromise){options.proxyPromise.then(resolve).catch(handleErr)}else{error=error||xhr.responseJSON||xhr.responseText||xhr.error||statusText;handleErr(error)}})});promise.abort=function(){if(xhr.abort){xhr.abort()}};promise.xhr=xhr;return promise}else{return xhr}};Backbone.retrySync=function(methodName,retryOptions){var optionsArg=_(["fetch","destroy"]).contains(methodName)?0:1;return function(){var options=_.clone(arguments[optionsArg]||{});_.defaults(options,retryOptions,Backbone.syncSettings.retrySync);if(!options.doneCondition){throw new TypeError("doneCondition not specified for retry method: "+methodName)}var promise={},method=optionsArg>0?_.bind(this[methodName],this,arguments[0],options):_.bind(this[methodName],this,options),callMethod=function(){var result=method();syncAbort=result.abort;return result},next=function(){var wait=options.retry_interval*Math.pow(1+options.retry_decay,options._retry)||100;++options._retry;timer=_.delay(callMethod,wait)},canNext=function(model){syncAbort=null;return !aborted&&options._retry<options.max_retries&&!options.doneCondition.apply(model,arguments)},success=options.success,error=options.error,result,timer,syncAbort,aborted;promise.fn=new Promise(function(resolve,reject){promise.resolve=resolve;promise.reject=reject});if(!options._retry){options._retry=0}options.success=function(model,response,opt){if(canNext.apply(null,arguments)){next()}else{if(success){success(model,response,opt)}promise.resolve(response)}};options.error=function(model,response,opt){if(!options.stopOnError&&canNext.apply(null,arguments)){opt.errorHandled=true;next()}else{if(error){error(model,response,opt)}promise.reject(response)}};result=callMethod();result=result.then(function(){return promise.fn},function(){return promise.fn});result.abort=function(){if(timer){clearTimeout(timer)}aborted=true;if(syncAbort){syncAbort()}};return result}};Backbone.Model.isA=function(obj){return(obj&&obj.constructor&&(obj instanceof Backbone.Model||(obj.hasOwnProperty("extend")&&obj.hasOwnProperty("inherit")&&obj.hasOwnProperty("originalSet"))))};Backbone.Collection.isA=function(obj){return obj&&obj.constructor&&(obj instanceof Backbone.Collection||(obj.hasOwnProperty("extend")&&!obj.hasOwnProperty("originalSet")))};Backbone.Model.originalSet=Backbone.Model.originalSet||Backbone.Model.prototype.set;Backbone.Model.prototype.set=function(key,val,options){var Model=Backbone.Model,Collection=Backbone.Collection,opts;if(!Model.originalSet.apply(this,arguments)){return false}opts=_.extend({},options||val,{_parent:this});var self=this;if(opts.unset){return this}_(this.changed).map(function(_val,_key){if(!self.defaults){return}if(_val instanceof Model||_val instanceof Collection){_val._parent=self;return}var Schema=self.defaults[_key];if(!Schema||_val===false||_val===null){return}construct(Schema,self.attributes,_key,_val)});function construct(schema,target,_key,_val){if(schema instanceof Model||schema instanceof Collection){target[_key]=new schema.constructor((_val&&_val.attributes)||_val,opts);target[_key]._parent=self}else{if(Backbone.Model.isA(schema)||Backbone.Collection.isA(schema)){var values=_.isFunction(_val)?undefined:_val;target[_key]=new schema(values,opts);target[_key]._parent=self}else{if(_val&&schema&&typeof schema==="object"){_(schema).map(function(subVal,subKey){construct(subVal,_val,subKey,_val[subKey])})}}}}return this};module.exports=_.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var etagCache={};Api.etagCache={};Api.etagCache.set=function(modelClass,value){etagCache[modelClass.url()]=value};Api.etagCache.get=function(modelClass){return etagCache[(modelClass.eTagParent||modelClass).url()]};Api.etagCache.clear=function(){etagCache={}};module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PRE_REFRESH_TIME=30;var _=Api._;Api.init=function(options){options=options||{};if(options.i18n){var localApiStrings=Api.i18n.api;Api.i18n=options.i18n;Api.i18n.api=_.defaults(options.i18n.api||{},localApiStrings);delete options.i18n}var noConflict="noConflict" in options?options.noConflict:Api.init.instances.length>0;options.noConflict=noConflict;if(!noConflict){Api.sharer=options.sharer||null;_.extend(Api,options)}if(!Api.baseUri){Api.baseUri=options.baseUri}var api=new _Api(options);Api.init.instances.push(api);return api};Api.init.instances=[];var BoundMethods={getServiceUri:function(name,version){var api=this.baseUri?this:(this.useApi||Api);return Api.uriTmpl({baseUri:api.baseUri,version:version||api.apiVersion,service:name})},getMicroserviceUri:function(name){var api=this.baseUri?this:(this.useApi||Api);return Api.gatewayUriTmpl({baseUri:api.baseUri,service:name})},getOAuthUri:function(name){var api=this.baseUri?this:(this.useApi||Api);return Api.oAuthUriTmpl({baseUri:api.baseUri,service:name})},getMobileCaptureManager:function(){return Api.Gateway.MobileCaptureManager}};var lateBindMethods=_.object(_(BoundMethods).keys(),_(BoundMethods).map(function(fn){return function(name,version){if(this.baseUri){return fn.apply(this,arguments)}if(Api.baseUri){return fn.apply(null,arguments)}return _.partial(fn,name,version)}}));var Context={i18n:function(key){if(!(typeof describe==="function"&&typeof it==="function")){console.log("local i18n --",key)}return key},uriTmpl:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+=""+((__t=(baseUri))==null?"":__t)+"api/rest/"+((__t=(version))==null?"":__t)+"/"+((__t=(service))==null?"":__t)+""}return __p},gatewayUriTmpl:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+=""+((__t=(baseUri))==null?"":__t)+"api/gateway/"+((__t=(service))==null?"":__t)+""}return __p},oAuthUriTmpl:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+=""+((__t=(baseUri))==null?"":__t)+"oauth"+((__t=(service))==null?"":__t)+""}return __p},_getInstance:function(){return this.getHeaders&&this.getSharerHeader&&this.name?this:Api},getHeaders:function(options){var self=Api._getInstance.call(this),headers,accessToken;options=_.defaults({},options,_.pick(self.options||self,"isIMSToken","accessToken"));if(!_.isUndefined(_.result(options,"isIMSToken"))&&!_.isUndefined(window.adobeIMS)){accessToken=window.adobeIMS.getAccessToken();if(typeof accessToken==="object"){accessToken=accessToken.token}}else{accessToken=_.result(options,"accessToken")}if(!accessToken){throw new Error("No access token found for authorization.")}headers={Authorization:"Bearer "+accessToken};_.extend(headers,self.getSharerHeader(options));return headers},getSharerHeader:function(options){var self=Api._getInstance.call(this),value;options=_.defaults({},options,_.pick(self,"sharer"));if(!options.sharer){return{}}if(options.sharer.seriouslySecureId){value="userid:"+options.sharer.seriouslySecureId}else{if(options.sharer.realEmail){value="email:"+options.sharer.realEmail}}return value?{"x-on-behalf-of-user":value}:{}},errorHandler:function(model,xhr,options){options=options||{};if(typeof console!=="undefined"&&console.error&&!options.silent_logs){console.error("API Error",model," --- XHR:",xhr)}},mapI18nMessage:function(response,model){if(!response){return}if(!response.responseJSON){try{response.responseJSON=JSON.parse(response.responseText)}catch(err){if(model&&model.options&&!model.options.silent_logs){console.warn("Sign Api - mapI18nMessage: Neither responseJSON nor responseText exist on the xhr object.")}return}}var resp=response.responseJSON,errorCode=(resp.code||"").toLowerCase(),context=model&&model.i18nMessages&&errorCode in model.i18nMessages?model.i18nMessages:(Api.i18n&&Api.i18n.api)||{},msg=_.result(context,errorCode);if(msg&&msg!==resp.message){resp.origMessage=resp.message;resp.message=isCrossShardLockingRelated(resp.message)?_.result(context,"operation_not_allowed_migration"):msg}function isCrossShardLockingRelated(msg,code){return msg&&(msg.indexOf("Account locked for migration")!==-1||msg.indexOf("Agreement locked for migration")!==-1)}},getApiClasses:function(root){var api={};var classTest=function(val,key){if(/[A-Z]/.test(key[0])&&_.isFunction(val)){api[key]=val}};root=root||Api;if(_.isFunction(root)){root=_.object(_.keys(root),_.values(root))}_(root).each(classTest);_((root).Gateway).each(classTest);return api},cloneAndBind:function(instance){return apiCloner(Api,instance)},getAllApiClasses:function(root){var result=[],isAModel=Backbone.Model.isA,isACollection=Backbone.Collection.isA,backboneMembers=["extend","inherit","isA","originalSet","__super__"],traverse=function(obj){_(obj).each(function(val,key){if(_.isArray(val)){return}if(_.hasOwnProperty(key)){return}if(isAModel(val)||isACollection(val)){result.push(val);var subs=_(val).chain().keys().difference(backboneMembers).value();subs=_(val).pick(subs);return traverse(subs)}if(_.isFunction(val)){return traverse(_.values(val))}if(_.isObject(val)){return traverse(val)}})};traverse(root||Api);return result}};_.extend(Api,Context,lateBindMethods);function _Api(options){this.options=options;if(!options||!Api.OAuth){throw new Error("Api.init() is missing components.")}if(options.noConflict){_.extend(this,Api.cloneAndBind(this),options);this.name="sign-api-instance-"+Api.init.instances.length;this.getHeaders=_.bind(_Api.prototype.getHeaders,this)}if(!this.options.norefresh&&(!Api.init.instances.length||this.options.norefresh===false||!options.noConflict)){this.oauth=new Api.OAuth(this.options,{parse:true});this.startRefreshTimer()}this.validateSharer()}_Api.prototype={getHeaders:function(){return Api.getHeaders.apply(this,arguments)},validateSharer:function(){var sharer=this.options.sharer;if(!sharer){return}if(!sharer.realEmail&&!sharer.seriouslySecureId){console.warn("Format of options.sharer passed to Api.init() is not recognized!")}},refresh:function(){var self=this;return this.oauth.refreshWeb({success:function(model,response){var update=function(what){what.options.accessToken=response.access_token;what.options.accessTokenLifetime=response.expires_in};update(self);if(!self.options.noConflict){_.extend(Api,self.options)}_.chain(Api.init.instances).filter(function(api){return !api.oauth}).each(update);self.startRefreshTimer()}})},startRefreshTimer:function(){var lifetime=this.options.accessTokenLifetime||(2*PRE_REFRESH_TIME),delayTime=lifetime-PRE_REFRESH_TIME;if(delayTime<0){delayTime=0.2}this.stopRefreshTimer();this._refreshTimer=_.delay(_.bind(this.refresh,this),delayTime*1000)},stopRefreshTimer:function(){this._refreshTimer&&clearTimeout(this._refreshTimer);this._refreshTimer=null},getUserSettings:function(refresh){if(!this.cachedUserSettings||refresh){this.cachedUserSettings=new Api.Users.User({id:"me"}).settings.fetch()}return this.cachedUserSettings},getUser:function(refresh){if(!this.cachedUser||refresh){this.cachedUser=new Api.Users.User({id:"me"}).fetch()}return this.cachedUser}};function apiCloner(obj,instance){if(!_.isObject(obj)){return obj}if(obj instanceof _Api){return}if(_.isFunction(obj)){var extOptions={useApi:instance},staticMembers=Api.getApiClasses(obj),hasStaticMembers=_.keys(staticMembers).length,closureFn=obj.extend?obj.extend(extOptions):hasStaticMembers?function(firstArg,options){options=_.extend({},options,extOptions);return obj.call(obj,firstArg,options)}:obj;if(obj.extend||hasStaticMembers){_.extend(closureFn,apiCloner(staticMembers,instance))}return closureFn}if(_.isDate(obj)){return new Date(obj.getTime())}if(_.isRegExp(obj)){return new RegExp(obj.source,obj.toString().replace(/.*\//,""))}var isArr=(_.isArray(obj)||_.isArguments(obj));var func=function(memo,value,key){if(isArr){memo.push(apiCloner(value,instance))}else{memo[key]=apiCloner(value,instance)}return memo};return _.reduce(obj,func,isArr?[]:{})}module.exports=_.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Utils={makeObj:function(arr){return Api._.object(arr,arr)},isValidEmail:function(email){var tester=/^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-](\.?[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-])*\@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(\.[a-zA-Z](?:[a-zA-Z-]{0,61}[a-zA-Z]))$/;if(!email){return false}if(email.length>254){return false}var valid=tester.test(email);if(!valid){return false}var parts=email.split("@");if(parts[0].length>64){return false}return !parts[1].split(".").some(function(part){return part.length>63})},isValidPartialEmail:function(val){if(val&&!/@/.test(val)){val+="@"}val=val.replace(/@([^.]*)(\.?)(.*)$/,function(at,name,dot,com){return(!/@$/.test(at)?"@":at)+(name||(!dot?"adobe":""))+(dot||".")+(com.length===1?com+"om":(com||"com"))});return !val||Api.Utils.isValidEmail(val)},isValidPhone:function(phone){var validCharsRe=/^[\d\-()\s.]+$/,digitsRe=/\d/g,MAX_LENGTH=64,ndigits=(phone.match(digitsRe)||[]).length;if(ndigits<6||phone.length>MAX_LENGTH||!validCharsRe.test(phone)){return false}else{return true}},isBlank:function(value){return value&&value.trim().length===0},isRecipientNameTooLong:function(name){var MAX_RECIPIENT_NAME_CHARACTERS=512;if(!name){return false}return name.length>MAX_RECIPIENT_NAME_CHARACTERS},getBlobUrl:function(content,mediaType){if(typeof Blob==="undefined"||typeof URL==="undefined"){return""}return content instanceof Blob?URL.createObjectURL(content):content instanceof ArrayBuffer?URL.createObjectURL(new Blob([content])):URL.createObjectURL(new Blob([content],{type:mediaType}))},getDataUrl:function(content,mediaType){var url=Api.Utils.getBlobUrl(content,mediaType);if(url){return url}mediaType=(mediaType||"").replace(/;\s*encoding=/,";");return"data:"+mediaType+","+content},defaults:function(obj,def){var key,value;obj=obj||{};var isObjectHash=function(thing){return !Api._.isArray(thing)&&Api._.isObject(thing)};if(!isObjectHash(obj)||!Api._.isObject(def)){return obj}for(key in def){value=def[key];if(!(key in obj)){obj[key]=value}else{if(isObjectHash(obj[key])){Api._.defaults(obj[key],value)}}}return obj},i18nReplace:function(str,data){if(!data){return str}return Api.Utils.template(str,data,"{key}")},convertObjectToQueryString:function(params){var queryStringData=Api._(params).map(function(value,key){return key+"="+value}).join("&");return queryStringData},template:function(template,data,token){if(!data){return template}if(!token||typeof token!=="string"||token.indexOf("key")===-1){token=Api.Utils.templateKey}return(Object.keys(data)||[]).reduce(function(str,key){var val=data[key]!==undefined?data[key]:"";return str.replace(new RegExp(token.replace("key",key),"gi"),val)},template)},templateKey:"{{key}}"};module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Helpers.PageInfo={nextCursor:""};Api.Helpers.DateRange={range:{min:"",max:"",lt:"",gt:""}};Api.Helpers.AccountShareIdentity={id:"",type:"",name:"",email:""};Api.Helpers.AGREEMENT_TYPE=Api.Utils.makeObj(["ARCHIVE","ESIGN","FILL_SIGN","LIBRARY_TEMPLATE","MEGASIGN_CHILD","MEGASIGN_PARENT","WIDGET","WIDGET_INSTANCE"]);module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var _=Api._;var notEmpty=_.negate(_.isEmpty);var FileInfo=Backbone.Model.extend({validate:function(){var error=this.get("uploadError");if(error){return error}var numValues=_(this.toJSON()).chain().omit(["label","uploadError"]).values().value().length;if(numValues===0){return"FileInfo object is empty."}if(numValues>1){return"Only one FileInfo descriptor should be given."}var fileInfo=this.get("urlFileInfo");if("url" in fileInfo&&!fileInfo.url){return"A URL is required in urlFileInfo."}if(("url" in fileInfo||"mimeType" in fileInfo)&&!fileInfo.mimeType){return"The mime-type is required in urlFileInfo."}},toJSON:function(){var parent=this.collection&&this.collection._parent,options=(parent&&parent.lastOptions)||{},attrs=this.attributes;if(options.syncMethod=="create"){attrs=_.omit(attrs,"document")}return _.pick(attrs,notEmpty)},defaults:{document:{},label:"",libraryDocumentId:"",transientDocumentId:"",urlFileInfo:{},notarize:false}});var FileInfos=Backbone.Collection.extend({model:FileInfo,initialize:function(){},validate:function(options){var errors=[];if(this.models.length===0){errors=[{key:"fileupload:nofiles",message:"Please choose at least one document to upload."}];this.trigger("invalid:empty",this,errors)}errors=_(errors.concat(this._super(options))).compact();if(!_.size(errors)){errors=null}return errors}});FileInfos.FileInfo=FileInfo;Api.Helpers.FileInfos=FileInfos;module.exports=_.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PageImageUrl=Backbone.Model.extend({defaults:{pageNumber:1,url:""}});var DocumentImageUrls=Backbone.Model.extend({defaults:{imageSize:"",imagesAvailable:false,imageURLs:Backbone.Collection.extend({model:PageImageUrl})}});var DocumentImageUrlsList=Backbone.Collection.extend({model:DocumentImageUrls,getFirstThumbnailUrl:function(size){var item=size?this.findWhere({imageSize:size}):this.first();return item?item.get("imageURLs").at(0).get("url"):""},imagesReady:function(){return !this.isEmpty()&&!this.findWhere({imagesAvailable:false})}});var DocumentImageUrlsInfo=Backbone.Model.extend({getList:function(){return this.get("documentImageUrlsList")},imagesReady:function(){return this.getList().imagesReady()},defaults:{documentId:"",documentImageUrlsList:DocumentImageUrlsList}});var Mixin={getImageSizes:function(){return this.imageSizes||""},fetch:function(options){options=options||{};if(!options.data||!options.data.showImageAvailabilityOnly){var sizes=this.getImageSizes();if(sizes){sizes={imageSizes:sizes}}options.data=Api._.defaults(options.data,sizes)}return this._super(options)},fetchUntil:Backbone.retrySync("fetch",{doneCondition:function(){return this.imagesReady()}}),waitUntilImagesAvailable:Backbone.retrySync("fetch",{data:{showImageAvailabilityOnly:true},doneCondition:function(){return this.imagesReady()}})};var ImageUrls={Mixin:Mixin,DocumentImageUrlsList:DocumentImageUrlsList,DocumentImageUrlsInfo:DocumentImageUrlsInfo,IMAGE_SIZES:Api.Utils.makeObj(["ZOOM_50_PERCENT","ZOOM_75_PERCENT","ZOOM_100_PERCENT","ZOOM_125_PERCENT","ZOOM_150_PERCENT","ZOOM_200_PERCENT","FIXED_WIDTH_50px","FIXED_WIDTH_250px","FIXED_WIDTH_675px"])};Api.Helpers.ImageUrls=ImageUrls;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var Password=Backbone.Model.extend({initialize:function(attrs,options){if(attrs&&!Api._.isObject(attrs)){this.set({password:attrs,confirmPassword:attrs})}},validate:function(){var requiredStrength=this.get("passwordStrength")||Password.StrengthSetting||Password.STRENGTH.EMPTY,minLength=Password.MIN_PASSWORD_LEN_REQUIRED[requiredStrength],password=this.get("password")||"",confirmPassword=this.get("confirmPassword")||"",actualStrength=Password.PASSWORD_STRENGTHS[this.getPasswordStrength(password)],invalidPasswordChars=/[^\x20-\x7E]/,data={},errors=[];password=password.trim();if(!password){errors.push("You need to enter a password.");return errors}if(actualStrength<Password.PASSWORD_STRENGTHS[requiredStrength]){errors.push("Password does not meet strength requirements.")}if(password!==confirmPassword){errors.push("Passwords do not match.")}if(password.length<minLength){data.min=minLength;errors.push(Api.Utils.i18nReplace("Password needs to be at least {min} characters long.",data))}if(password.length>32){errors.push("Password exceeds 32 characters.")}if(invalidPasswordChars.test(password)){errors.push("Password can only contain letters, numbers, spaces and any of these special characters: !\"#$%&'()*+,-./:;<=>?@[\\]^_`&#123;|&#125;~ ")}return errors.length>0?errors:undefined},getPasswordStrength:function(pw){var pwlength=pw.length,diversity=0,numeric,numNumeric,upper,numUpper,lower,numLower,strong,medium,strong14;if(pwlength<6){return Password.STRENGTH.EMPTY}if(pwlength===6){return Password.STRENGTH.WEAK}numeric=pw.replace(/[0-9]/g,"");numNumeric=pwlength-numeric.length;if(numNumeric>0){diversity+=1}upper=pw.replace(/[A-Z]/g,"");numUpper=pwlength-upper.length;if(numUpper>0){diversity+=1}lower=pw.replace(/[a-z]/g,"");numLower=pwlength-lower.length;if(numLower>0){diversity+=1}strong14=pwlength>=14&&diversity>=3;if(strong14){return Password.STRENGTH.STRONG14}strong=pwlength>=8&&diversity>=3;if(strong){return Password.STRENGTH.STRONG}medium=pwlength>=7&&diversity>=2;if(medium){return Password.STRENGTH.MEDIUM}return Password.STRENGTH.WEAK},isEmpty:function(){return _.every(this.attributes,_.isEmpty)},toJSON:function(){return this.get("password")},defaults:{password:"",confirmPassword:"",passwordStrength:""}},{StrengthSetting:"",PASSWORD_STRENGTHS:{EMPTY:0,WEAK:1,MEDIUM:2,STRONG:3,STRONG14:4},MIN_PASSWORD_LEN_REQUIRED:{EMPTY:1,WEAK:6,MEDIUM:7,STRONG:8,STRONG14:14},STRENGTH:Api.Utils.makeObj(["EMPTY","WEAK","MEDIUM","STRONG","STRONG14"])});Api.Helpers.Password=Password;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserAgreement=Backbone.Model.extend({getModel:function(){return new Api.Agreements({id:this.get("id"),name:this.get("name"),groupId:this.get("groupId"),type:this.get("type")})},defaults:{displayDate:"",displayParticipantSetInfos:[],esign:false,groupId:"",hidden:false,id:null,latestVersionId:"",name:"",status:"",type:""}});Api.Helpers.UserAgreement=UserAgreement;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Event=Backbone.Model.extend({defaults:{actingUserEmail:"",actingUserIpAddress:"",actingUserParticipantId:"",comment:"",date:"",description:"",deviceLocation:[],devicePhoneNumber:"",digitalSignatureInfo:[],initiatingUserEmail:"",initiatingUserName:"",participantEmail:"",replacedParticipantName:"",replacedParticipantEmail:"",participantId:"",participantRole:"",synchronizationId:"",type:"",vaultEventId:"",vaultProviderName:"",versionId:""}},{EVENT_TYPE:Api.Utils.makeObj(["ACCESS_CODE_GENERATED","ACCESS_CODE_CONSUMED","AUTO_CANCELLED_CONVERSION_PROBLEM","ACTION_AUTO_DELEGATED","ACTION_COMPLETED","ACTION_COMPLETED_HOSTED","ACTION_COMPLETED_OFFLINE","ACTION_COMPLETED_OFFLINE_HOSTED","ACTION_COMPLETED_WIDGET_VERIFIED","ACTION_COMPLETED_WIDGET_VERIFIED_API_TOKEN","ACTION_COMPLETED_WIDGET_VERIFICATION_WAIVED","ACTION_DELEGATED","ACTION_REPLACED_SIGNER","ACTION_REQUESTED","CREATED","CREATED_FROM_WIDGET","CREATED_OFFLINE","CREATED_VIA_UPLOAD","CREATED_VIA_ACROBAT","CREATED_VIA_READER","ACTIVATED","DIGITAL_SIGN_UIDAI_SIGNER_CONSENT","DIGSIGNED","DEACTIVATED","DOCUMENTS_DELETED","DOWNLOADED","EMAIL_BOUNCED","EMAIL_VIEWED","EXPIRED","EXPIRED_AUTOMATICALLY","FAXED_BY_SENDER","FAXIN_RECEIVED","KBA_AUTHENTICATED","MODIFIED","OFFLINE_SYNC","OTHER","PAID","PRESIGNED","RECALLED","RECALLED_MAX_SIGNING_KBA_ATTEMPTS","RECALLED_MAX_SIGNING_GOV_ID_ATTEMPTS","RECALLED_MAX_SIGNING_PASSWORD_ATTEMPTS","RECALLED_MAX_SIGNING_PHONE_ATTEMPTS","RECALLED_MAX_SIGNING_DIG_ID_ATTEMPTS","REJECTED","SENDER_CREATED_NEW_REVISION","SHARED","SIGNED","SIGNING_URL_REQUESTED","UPLOADED_BY_SENDER","USER_ACK_AGREEMENT_MODIFIED","READY_TO_VAULT","VAULTED","WEB_IDENTITY_AUTHENTICATED","WEB_IDENTITY_SPECIFIED","WRITTEN_DOWNLOAD","WRITTEN_SIGNED","COUNTER_SIGNER_REPLACED","ALL_CCS_REPLACED","READY_TO_NOTARIZE","NOTARIZED","SIGNER_NAME_CHANGED_BY_SIGNER","ELECTRONICALLY_SEALED","URL_REAUTHENTICATION_REQUESTED"])});Api.Helpers.Event=Event;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Helpers.Events={};var EventDescription=Backbone.Model.extend({initialize:function(attr,options){},toJSON:function(){var attrs=Api._.clone(this.attributes);attrs.date=this.event.get("date");return attrs},defaults:{description:"",comment:"",event:{}}});Api.Helpers.Events.EventDescription=EventDescription;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var INVISIBLE_EVENT_TYPES=["OTHER","CANCELLED","DELETED","DIGITAL_SIGN_UIDAI_SIGNER_CONSENT","KBA_AUTHENTICATED","WEB_IDENTITY_AUTHENTICATED","WEB_IDENTITY_SPECIFIED"];var AGREEMENT_TYPES={ARCHIVE:"archive",ESIGN:"esign",FILL_SIGN:"fill_sign",LIBRARY_DOCUMENT:"library_template",MEGASIGN_PARENT:"megasign_parent",WIDGET:"widget"};var EventsDescriptions=Backbone.Collection.extend({model:Api.Helpers.Events.EventDescription,initialize:function(models,options){if(!options||!options.events||!options.members){throw new Error("Must instantiate with events and members")}if(!options.agreementType){throw new Error("Agreement type is required")}this.agreementType=options.agreementType;this.events=options.events;this.members=options.members;this.generatedDescriptions=false;this.listenTo(this.events,"change",this.onUpdatedCollection);this.listenTo(this.members,"change",this.onUpdatedCollection);this._super.apply(this,arguments)},onUpdatedCollection:function(){this.generatedDescriptions=false},_participantMemberSetMap:function(){var participantSetMap={};if(this.agreementType===AGREEMENT_TYPES.WIDGET){var pSet=this.members.get("widgetParticipantSet");pSet.get("memberInfos").each(function(member){participantSetMap[member.get("id")]=pSet.get("id")})}else{var participantSets=this.members.get("participantSets");if(participantSets){this.members.get("participantSets").each(function(pSet){pSet.get("memberInfos").each(function(member){participantSetMap[member.get("id")]=pSet.get("id")})})}}return participantSetMap},findReplacedMemberInParticipantSet:function(pSetId){var replacedMember=null;var pSet=this.members.get("participantSets").findWhere({id:pSetId});if(pSet){replacedMember=pSet.get("memberInfos").find(function(member){return member.get("status")==="REPLACED"})}return replacedMember},doEventsDescriptions:function(){var eventModels=this.events,groupAction=[],groupPartSetId="",data={},behalfOfEmail,behalfOfName,behalfOfString,participant,participantName,participantEmail,participantString,replacedParticipantName,replacedParticipantEmail,replacedParticipantString,type,role,i18nVal,evaluatedKeys,item,senderString,senderEmail,senderName,sender,actingUserName,actingUserEmail,actingUserString,paymentInfo=[],groupEventDate,participantId;if(this.agreementType===AGREEMENT_TYPES.WIDGET){sender=this.members.get("creatorInfo")}else{sender=this.members.get("senderInfo")}senderName=sender.get("name");senderEmail=sender.get("email");senderString=senderName?senderName+" ("+senderEmail+")":senderEmail;this.participantsMap=this._participantMemberSetMap();var isAgreementWidgetInstance=eventModels.at(0)&&eventModels.at(0).get("type")===Api.Helpers.Event.EVENT_TYPE.CREATED_FROM_WIDGET;var nameChangeEventsByPartipationId=buildNameChangeHistoryMapGroupedByParticipantId(eventModels);eventModels.each(function(event,i){var comment="";behalfOfEmail=event.get("initiatingUserEmail");behalfOfName=event.get("initiatingUserName");behalfOfString=makeNameLabel(behalfOfName,behalfOfEmail);actingUserName=event.get("actingUserName");actingUserEmail=event.get("actingUserEmail");actingUserString=makeNameLabel(actingUserName,actingUserEmail);participant=this._getParticipant(event);participantId=event.get("participantId");participantName=participant&&participant.get("name");participantEmail=participant&&participant.get("email");participantString=participant?makeNameLabel(participantName,participantEmail):event.get("participantEmail");replacedParticipantName=event.get("replacedParticipantName");replacedParticipantEmail=event.get("replacedParticipantEmail");replacedParticipantString=makeNameLabel(replacedParticipantName,replacedParticipantEmail);type=event.get("type");var signerOldName=event.get("signerOldName");var signerNewName=event.get("signerNewName");var participantsPreviousNameForThisEvent=getPreviousNameForThisEventIfSignerNameChanged(event,nameChangeEventsByPartipationId,participantEmail);if(groupAction.length){if(type!=="ACTION_REQUESTED"||this.participantsMap[event.get("participantId")]!==groupPartSetId){generateActionRequestedVal();argsArray=[groupAction.length>1?"":participantId,groupEventDate,"ACTION_REQUESTED",Api.Utils.i18nReplace(i18nVal,data),data];addToCollection.apply(this,argsArray);i18nVal="";groupAction=[]}}if(Api._.includes(INVISIBLE_EVENT_TYPES,type)){return}role=event.get("participantRole");data=_addDefaultArgs(participantsPreviousNameForThisEvent);switch(type){case Api.Helpers.Event.EVENT_TYPE.ACCESS_CODE_GENERATED:i18nVal=behalfOfEmail?"Access key generated by {behalfUser} on behalf of {user}":"Access key generated by {user}";break;case Api.Helpers.Event.EVENT_TYPE.ACCESS_CODE_CONSUMED:item=this.find(function(m){return m.get("eventType")===Api.Helpers.Event.EVENT_TYPE.ACCESS_CODE_CONSUMED&&m.get("participantId")===participantId});if(item){this.remove(item)}i18nVal=behalfOfEmail?"Access key consumed by {behalfUser} on behalf of {user}":"Access key consumed by {user}";break;case Api.Helpers.Event.EVENT_TYPE.ACTION_AUTO_DELEGATED:evaluatedKeys={APPROVER:"Document approval automatically delegated to {user2} by {user1}",SIGNER:"Document signing automatically delegated to {user2} by {user1}",NOTARY_SIGNER:"Document review automatically delegated to {user2} by {user1}",ELECTRONIC_SEALER:"Document signing automatically delegated to {user2} by {user1}",ACCEPTOR:"Document acceptance automatically delegated to {user2} by {user1}",CERTIFIED_RECIPIENT:"Document receipt acknowledgment automatically delegated to {user2} by {user1}",FORM_FILLER:"Form filling automatically delegated to {user2} by {user1}"};data.user1=actingUserString;data.user2=participantsPreviousNameForThisEvent||participantString;i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.AUTO_CANCELLED_CONVERSION_PROBLEM:i18nVal="Document automatically canceled - unable to process";break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED:comment=this.getComment(event);evaluatedKeys={APPROVER:behalfOfEmail?"Document approved by {behalfUser} on behalf of {user} - Time Source: server":"Document approved by {user} - Time Source: server",SIGNER:behalfOfEmail?"Document e-signed by {behalfUser} on behalf of {user} - Time Source: server":"Document e-signed by {user} - Time Source: server",NOTARY_SIGNER:behalfOfEmail?"Document reviewed by {behalfUser} on behalf of {user} - Time Source: server":"Document reviewed by {user} - Time Source: server",ELECTRONIC_SEALER:behalfOfEmail?"Document e-signed by {behalfUser} on behalf of {user} - Time Source: server":"Document e-signed by {user} - Time Source: server",ACCEPTOR:behalfOfEmail?"Document accepted by {behalfUser} on behalf of {user} - Time Source: server":"Document accepted by {user} - Time Source: server",CERTIFIED_RECIPIENT:behalfOfEmail?"Document receipt acknowledged by {behalfUser} on behalf of {user} - Time Source: server":"Document receipt acknowledged by {user} - Time Source: server",FORM_FILLER:behalfOfEmail?"Form filled by {behalfUser} on behalf of {user} - Time Source: server":"Form filled by {user} - Time Source: server"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_HOSTED:evaluatedKeys={APPROVER:"Document approved by {user}, hosted by {host} - Time Source: server",SIGNER:"Document e-signed by {user}, hosted by {host} - Time Source: server",NOTARY_SIGNER:"Document reviewed by {user}, hosted by {host} - Time Source: server",ELECTRONIC_SEALER:"Document e-signed by {user}, hosted by {host} - Time Source: server",ACCEPTOR:"Document accepted by {user}, hosted by {host} - Time Source: server",CERTIFIED_RECIPIENT:"Document receipt acknowledged by {user}, hosted by {host} - Time Source: server",FORM_FILLER:"Form filled by {user}, hosted by {host} - Time Source: server"};data.host=senderString;i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_OFFLINE:evaluatedKeys={APPROVER:"Document approved offline by {user} - Time Source: device",SIGNER:"Document e-signed offline by {user} - Time Source: device",NOTARY_SIGNER:"Document reviewed offline by {user} - Time Source: device",ELECTRONIC_SEALER:"Document e-signed offline by {user} - Time Source: device",ACCEPTOR:"Document accepted offline by {user} - Time Source: device",CERTIFIED_RECIPIENT:"Document receipt acknowledged offline by {user} - Time Source: device",FORM_FILLER:"Form filled offline by {user} Form Filling - Time Source: device"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_OFFLINE_HOSTED:evaluatedKeys={APPROVER:"Document approved offline by {user}, hosted by {host} - Time Source: device",SIGNER:"Document e-signed offline by {user}, hosted by {host} - Time Source: device",NOTARY_SIGNER:"Document reviewed offline by {user}, hosted by {host} - Time Source: device",ELECTRONIC_SEALER:"Document e-signed offline by {user}, hosted by {host} - Time Source: device",ACCEPTOR:"Document accepted offline by {user}, hosted by {host} - Time Source: device",CERTIFIED_RECIPIENT:"Document receipt acknowledged offline by {user}, hosted by {host} - Time Source: device",FORM_FILLER:"Form filled offline by {user}, hosted by {host} - Time Source: device"};data.host=senderString;i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_WIDGET_VERIFIED:evaluatedKeys={APPROVER:"Approval verified by {user} - Time Source: server",SIGNER:"E-signature verified by {user} - Time Source: server",ACCEPTOR:"Acceptance verified by {user} - Time Source: server",CERTIFIED_RECIPIENT:"Document receipt verified by {user} - Time Source: server",FORM_FILLER:"Form filling verified by {user} - Time Source: server"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_WIDGET_VERIFIED_API_TOKEN:i18nVal="E-signature verified by API token - Time Source: server";break;case Api.Helpers.Event.EVENT_TYPE.ACTION_COMPLETED_WIDGET_VERIFICATION_WAIVED:i18nVal="User email address verification waived - Time Source: server";break;case Api.Helpers.Event.EVENT_TYPE.ACTION_DELEGATED:data.user1=participantsPreviousNameForThisEvent||participantString;data.user2=actingUserString;evaluatedKeys={APPROVER:"Document approval delegated to {user1} by {user2}",SIGNER:"Document signing delegated to {user1} by {user2}",NOTARY_SIGNER:"Document review delegated to {user1} by {user2}",ELECTRONIC_SEALER:"Document signing delegated to {user1} by {user2}",ACCEPTOR:"Document acceptance delegated to {user1} by {user2}",CERTIFIED_RECIPIENT:"Document receipt acknowledgement delegated to {user1} by {user2}",FORM_FILLER:"Form filling delegated to {user1} by {user2}"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_REPLACED_SIGNER:data.user1=senderString;data.user2=participantsPreviousNameForThisEvent||participantString;data.replacedUser=replacedParticipantString;var isEventForAddedAlternateParticipant=event.get("comment")&&event.get("comment").toLowerCase().startsWith("alternate");if(!isEventForAddedAlternateParticipant&&this.findReplacedMemberInParticipantSet(this.participantsMap[participantId])){evaluatedKeys={APPROVER:behalfOfEmail?"{behalfUser} replaced approver with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced approver {replacedUser} with {user2}":"{user1} replaced approver with {user2}",SIGNER:behalfOfEmail?"{behalfUser} replaced signer with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced signer {replacedUser} with {user2}":"{user1} replaced signer with {user2}",NOTARY_SIGNER:behalfOfEmail?"{behalfUser} replaced signer with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced signer {replacedUser} with {user2}":"{user1} replaced signer with {user2}",ELECTRONIC_SEALER:behalfOfEmail?"On behalf of {user1}, {behalfUser} replaced signer with {user2}":replacedParticipantEmail?"{user1} replaced approver {replacedUser} with {user2}":"{user1} replaced signer with {user2}",ACCEPTOR:behalfOfEmail?"{behalfUser} replaced acceptor with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced acceptor {replacedUser} with {user2}":"{user1} replaced acceptor with {user2}",CERTIFIED_RECIPIENT:behalfOfEmail?"{behalfUser} replaced certified recipient with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced certified recipient {replacedUser} with {user2}":"{user1} replaced certified recipient with {user2}",FORM_FILLER:behalfOfEmail?"{behalfUser} replaced form filler with {user2} on behalf of {user1}":replacedParticipantEmail?"{user1} replaced form filler {replacedUser} with {user2}":"{user1} replaced form filler with {user2}"}}else{evaluatedKeys={APPROVER:behalfOfEmail?"{behalfUser} added alternate approver {user2} on behalf of {user1}, but the original approver(s) can still approve":"{user1} added alternate approver {user2}, but the original approver(s) can still approve",SIGNER:behalfOfEmail?"{behalfUser} added alternate signer {user2} on behalf of {user1}, but the original signer(s) can still sign":"{user1} added alternate signer {user2}, but the original signer(s) can still sign",NOTARY_SIGNER:behalfOfEmail?"{behalfUser} added alternate signer {user2} on behalf of {user1}, but the original signer(s) can still sign":"{user1} added alternate signer {user2}, but the original signer(s) can still sign",ELECTRONIC_SEALER:behalfOfEmail?"On behalf of {user1}, {behalfUser} replaced signer with {user2}, but the original signer(s) can still sign":"{user1} replaced signer with {user2}, but the original signer(s) can still sign",ACCEPTOR:behalfOfEmail?"{behalfUser} added alternate acceptor {user2} on behalf of {user1}, but the original acceptor(s) can still accept":"{user1} added alternate acceptor {user2}, but the original acceptor(s) can still accept",CERTIFIED_RECIPIENT:behalfOfEmail?"{behalfUser} added alternate certified recipient {user2} on behalf of {user1}, but the original certified recipient(s) can still certify":"{user1} added alternate certified recipient {user2}, but the original certified recipient(s) can still certify",FORM_FILLER:behalfOfEmail?"{behalfUser} added alternate form filler {user2} on behalf of {user1}, but the original form filler(s) can still fill the form":"{user1} added alternate form filler {user2}, but the original form filler(s) can still fill the form"}}i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.COUNTER_SIGNER_REPLACED:data.user1=senderString;data.user2=event.get("participantEmail");evaluatedKeys={SIGNER:behalfOfEmail?"On behalf of {user1}, {behalfUser} replaced counter signer with {user2}":"{user1} replaced counter signer with {user2}"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ALL_CCS_REPLACED:data.user1=senderString;data.user2=participantString;evaluatedKeys={SENDER:behalfOfEmail?"On behalf of {user1}, {behalfUser} replaced cc participants":"{user1} replaced cc participants"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.ACTION_REQUESTED:if(isAgreementWidgetInstance&&isFirstSigningParticipation(participantId,this)){i18nVal="Email verification link emailed to {user}";break}if(participantsPreviousNameForThisEvent){groupAction.push(participantsPreviousNameForThisEvent)}else{groupAction.push(participantString)}groupPartSetId=this.participantsMap[participantId];if(!groupPartSetId){throw Error("There is no participant set matching event participant id: "+participantId)}groupEventDate=event.get("date");if(i===eventModels.length-1){generateActionRequestedVal()}break;case Api.Helpers.Event.EVENT_TYPE.ACTIVATED:i18nVal=behalfOfEmail?"Web Form enabled by {behalfUser} on behalf of {user}":"Web Form enabled by {user}";break;case Api.Helpers.Event.EVENT_TYPE.CREATED:if(this.agreementType===AGREEMENT_TYPES.WIDGET){i18nVal=behalfOfEmail?"Web Form created by {behalfUser} on behalf of {user}":"Web Form created by {user}"}else{if(this.agreementType===AGREEMENT_TYPES.ARCHIVE){data.user=actingUserString;i18nVal=behalfOfEmail?"Document archived by {behalfUser} on behalf of {user}":"Document archived by {user}"}else{i18nVal=behalfOfEmail?"Document created by {behalfUser} on behalf of {user}":"Document created by {user}"}}break;case Api.Helpers.Event.EVENT_TYPE.CREATED_OFFLINE:i18nVal=behalfOfEmail?"Document created offline by {behalfUser} on behalf of {user}":"Document created offline by {user}";break;case Api.Helpers.Event.EVENT_TYPE.CREATED_FROM_WIDGET:i18nVal=behalfOfEmail?"Web Form completed by {behalfUser} on behalf of {user}":"Web Form completed by {user}";break;case Api.Helpers.Event.EVENT_TYPE.CREATED_VIA_UPLOAD:i18nVal=behalfOfEmail?"Document uploaded by {behalfUser} on behalf of {user}":"Document uploaded by {user})";break;case Api.Helpers.Event.EVENT_TYPE.CREATED_VIA_ACROBAT:i18nVal="Document uploaded by {user} from Acrobat";break;case Api.Helpers.Event.EVENT_TYPE.CREATED_VIA_READER:i18nVal="Document uploaded by {user} from Reader";break;case Api.Helpers.Event.EVENT_TYPE.DEACTIVATED:i18nVal=behalfOfEmail?"Web Form disabled by {behalfUser} on behalf of {user}":"Web Form disabled by {user}";break;case Api.Helpers.Event.EVENT_TYPE.DOWNLOADED:i18nVal="Document downloaded by {user}";break;case Api.Helpers.Event.EVENT_TYPE.FAXED_BY_SENDER:i18nVal="A signed copy was faxed in by {user}";break;case Api.Helpers.Event.EVENT_TYPE.FAXIN_RECEIVED:data.user=actingUserString;i18nVal="Fax received from {user}";break;case Api.Helpers.Event.EVENT_TYPE.DIGSIGNED:var digitalSignatureInfo=event.get("digitalSignatureInfo");comment=digitalSignatureInfo&&digitalSignatureInfo.signingReason?"Comment: "+digitalSignatureInfo.signingReason:"";i18nVal="Document digitally signed by {user}";break;case Api.Helpers.Event.EVENT_TYPE.DOCUMENTS_DELETED:i18nVal="Document retention applied - all documents deleted";break;case Api.Helpers.Event.EVENT_TYPE.EMAIL_BOUNCED:i18nVal="Email sent to {user} bounced and could not be delivered";break;case Api.Helpers.Event.EVENT_TYPE.EMAIL_VIEWED:i18nVal="Viewed by {user}";break;case Api.Helpers.Event.EVENT_TYPE.EXPIRED:i18nVal="Expired";break;case Api.Helpers.Event.EVENT_TYPE.EXPIRED_AUTOMATICALLY:i18nVal="Automatically expired";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED:comment=this.getComment(event);i18nVal=behalfOfEmail?"Document canceled by {behalfUser} on behalf of {user}":"Document canceled by {user}";break;case Api.Helpers.Event.EVENT_TYPE.MODIFIED:if(this.agreementType===AGREEMENT_TYPES.WIDGET){i18nVal=behalfOfEmail?"Web Form was modified by {behalfUser} on behalf of {user}":"Web Form was modified by {user}"}else{i18nVal=behalfOfEmail?"Agreement was modified by {behalfUser} on behalf of {user}":"Agreement was modified by {user}"}break;case Api.Helpers.Event.EVENT_TYPE.OFFLINE_SYNC:i18nVal="Offline document events synchronized and recorded";break;case Api.Helpers.Event.EVENT_TYPE.PAID:comment=event.get("comment");if(comment){paymentInfo=comment.split(";");data.transactionId=paymentInfo[0];data.createdAt=paymentInfo[1]}else{data.transactionId="";data.createdAt=""}i18nVal="Document paid by {user} at {createdAt}. Transaction ID: {transactionId}";break;case Api.Helpers.Event.EVENT_TYPE.PRESIGNED:i18nVal="Document digitally presigned by {user}";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED_MAX_SIGNING_KBA_ATTEMPTS:i18nVal="{user} failed to verify their identity, maximum number of KBA attempts exceeded";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED_MAX_SIGNING_PASSWORD_ATTEMPTS:i18nVal="{user} failed to verify their identity, maximum number of password attempts exceeded";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED_MAX_SIGNING_PHONE_ATTEMPTS:i18nVal="{user} failed to verify their identity, maximum number of phone attempts exceeded";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED_MAX_SIGNING_GOV_ID_ATTEMPTS:i18nVal="{user} failed to verify their identity, maximum number of Government ID attempts exceeded";break;case Api.Helpers.Event.EVENT_TYPE.RECALLED_MAX_SIGNING_DIG_ID_ATTEMPTS:i18nVal="{user} failed to verify their identity, maximum number of identity verification attempts exceeded";break;case Api.Helpers.Event.EVENT_TYPE.REJECTED:comment=this.getComment(event);i18nVal=behalfOfEmail?"Document declined by {behalfUser} on behalf of {user}":"Document declined by {user}";break;case Api.Helpers.Event.EVENT_TYPE.SENDER_CREATED_NEW_REVISION:i18nVal=behalfOfEmail?"Document revision created by {behalfUser} on behalf of {user}":"Document revision created by {user})";break;case Api.Helpers.Event.EVENT_TYPE.SHARED:i18nVal="Document shared with {user}";break;case Api.Helpers.Event.EVENT_TYPE.SIGNED:evaluatedKeys={APPROVER:"Approval received from {user}",SIGNER:"Signature received from {user}",NOTARY_SIGNER:"Review received from {user}",ELECTRONIC_SEALER:"Signature received from {user}",ACCEPTOR:"Acceptance received from {user}",CERTIFIED_RECIPIENT:"Receipt Acknowledgement received from {user}",FORM_FILLER:"Filled document received from {user}"};i18nVal=evaluatedKeys[role];break;case Api.Helpers.Event.EVENT_TYPE.READY_TO_NOTARIZE:i18nVal="Document sent for notarization";break;case Api.Helpers.Event.EVENT_TYPE.NOTARIZED:i18nVal="Document is notarized";break;case Api.Helpers.Event.EVENT_TYPE.SIGNING_URL_REQUESTED:data.user1=participantsPreviousNameForThisEvent||participantString;data.user2=actingUserString;i18nVal="Document URL for {user1} fetched by {user2}";break;case Api.Helpers.Event.EVENT_TYPE.UPLOADED_BY_SENDER:data.user=actingUserString;i18nVal=behalfOfEmail?"A signed copy was uploaded by {behalfUser} on behalf of {user}":"A signed copy was uploaded by {user}";break;case Api.Helpers.Event.EVENT_TYPE.USER_ACK_AGREEMENT_MODIFIED:i18nVal=behalfOfEmail?"Agreement modification was acknowledged by {behalfUser} on behalf of {user}":"Agreement modification was acknowledged by {user}";break;case Api.Helpers.Event.EVENT_TYPE.VAULTED:data.vaultEventId=event.get("vaultEventId");data.vaultProviderName=event.get("vaultProviderName");i18nVal="Document vaulted with the vault ID of {vaultEventId}";break;case Api.Helpers.Event.EVENT_TYPE.WRITTEN_DOWNLOAD:i18nVal="Document downloaded for signature by {user}";break;case Api.Helpers.Event.EVENT_TYPE.WRITTEN_SIGNED:i18nVal="Signed document uploaded by {user}";break;case Api.Helpers.Event.EVENT_TYPE.SIGNER_NAME_CHANGED_BY_SIGNER:data.user1=makeNameLabel(signerOldName,participantEmail);data.user2=signerNewName;i18nVal="Signer {user1} entered name at signing as {user2}";break;case Api.Helpers.Event.EVENT_TYPE.ELECTRONICALLY_SEALED:data.sealer=actingUserName;i18nVal="Document sealed by {sealer}";break;case Api.Helpers.Event.EVENT_TYPE.URL_REAUTHENTICATION_REQUESTED:i18nVal="New document URL requested by {user}";break;default:console.error("Could not generate an event description for event type: "+type);break}if(i18nVal){var desc=Api.Utils.i18nReplace(i18nVal,data),argsArray=[participantId,event.get("date"),type,desc,data];if(comment){argsArray.push(comment)}addToCollection.apply(this,argsArray);i18nVal=""}}.bind(this));function _addDefaultArgs(oldFullNameLabel){data={};if(behalfOfEmail){data.behalfUser=behalfOfString}data.user=participantString;if(oldFullNameLabel){data.user=oldFullNameLabel}return data}function makeNameLabel(name,email){return name?name+" ("+email+")":email}function generateActionRequestedVal(){var evaluatedKeysList={APPROVER:"Sent out for approval to {userList}. One of them to approve.",SIGNER:"Sent out for signature to {userList}. One of them to sign.",NOTARY_SIGNER:"Sent out for review to {userList}. One of them to review.",ELECTRONIC_SEALER:"Sent out for signature to {userList}. One of them to sign.",ACCEPTOR:"Sent out for acceptance to {userList}. One of them to accept.",CERTIFIED_RECIPIENT:"Sent out for delivery to {userList}. One of them to acknowledge receipt.",FORM_FILLER:"Sent out for form filling to {userList}. One of them to form fill.",DELEGATE_TO_ACCEPTOR:"Sent out for delegation to {userList}. One of them to delegate.",DELEGATE_TO_SIGNER:"Sent out for delegation to {userList}. One of them to delegate.",DELEGATE_TO_APPROVER:"Sent out for delegation to {userList}. One of them to delegate.",DELEGATE_TO_CERTIFIED_RECIPIENT:"Sent out for delegation to {userList}. One of them to delegate.",DELEGATE_TO_FORM_FILLER:"Sent out for delegation to {userList}. One of them to delegate."},evaluatedKeys={APPROVER:"Sent out for approval to {user}.",SIGNER:"Sent out for signature to {user}.",NOTARY_SIGNER:"Sent out for review to {user}.",ELECTRONIC_SEALER:"Sent out for signature to {user}.",ACCEPTOR:"Sent out for acceptance to {user}.",CERTIFIED_RECIPIENT:"Sent out for delivery to {user}.",FORM_FILLER:"Sent out for form filling to {user}.",DELEGATE_TO_ACCEPTOR:"Sent out for delegation to {user}.",DELEGATE_TO_SIGNER:"Sent out for delegation to {user}.",DELEGATE_TO_APPROVER:"Sent out for delegation to {user}.",DELEGATE_TO_CERTIFIED_RECIPIENT:"Sent out for delegation to {user}.",DELEGATE_TO_FORM_FILLER:"Sent out for delegation to {user}."};if(groupAction.length>1){data.usr0=groupAction[0];data.usr1=groupAction[1];switch(groupAction.length){case 2:data.userList=Api.Utils.i18nReplace("{usr0} and {usr1}",data);break;case 3:data.usr2=groupAction[2];data.userList=Api.Utils.i18nReplace("{usr0}, {usr1} and {usr2}",data);break;case 4:data.usr2=groupAction[2];data.usr3=groupAction[3];data.userList=Api.Utils.i18nReplace("{usr0}, {usr1}, {usr2}, and {usr3}",data);break;default:data.usr2=groupAction[2];data.usr3=groupAction[3];data.count=groupAction.length-4;data.userList=Api.Utils.i18nReplace("{usr0}, {usr1}, {usr2}, {usr3}, and {count} more",data)}i18nVal=evaluatedKeysList[role]}else{i18nVal=evaluatedKeys[role];data.user=Api._.first(groupAction)}}function buildNameChangeHistoryMapGroupedByParticipantId(eventModels){var nameChangeEventsByParticipationId={};eventModels.each(function(event){if(event.get("type")===Api.Helpers.Event.EVENT_TYPE.SIGNER_NAME_CHANGED_BY_SIGNER){nameChangeEventsByParticipationId[event.get("participantId")]=event}});return nameChangeEventsByParticipationId}function getPreviousNameForThisEventIfSignerNameChanged(event,nameChangeEventsByPartipationId,participantEmail){var nameChangeEvent=nameChangeEventsByPartipationId[participantId];if(nameChangeEvent){var eventDate=new Date(event.get("date"));var nameChangeDate=new Date(nameChangeEvent.get("date"));if(eventDate<=nameChangeDate){var signerOldName=nameChangeEvent.get("signerOldName");return makeNameLabel(signerOldName,participantEmail)}}return null}function isFirstSigningParticipation(participantId,self){var participantSets=self.members.get("participantSets");if(!participantSets){return false}var firstParticipantSet=participantSets.at(0);if(firstParticipantSet&&firstParticipantSet.get("id")===self.participantsMap[participantId]){return firstParticipantSet.get("order")===1}return false}function addToCollection(participantId,eventDate,eventType,description,data,comment){this.add({eventDate:eventDate,description:description,data:data,comments:comment,participantId:participantId,eventType:eventType})}this.generatedDescriptions=true},_getParticipant:function(event){var eventParticipantId=event.get("participantId"),type=event.get("type"),senderInfo,participantSet,indexOfParticipant,shareParticipant,participantSets;if(this.agreementType===AGREEMENT_TYPES.WIDGET){var creatorInfo=this.members.get("creatorInfo");if(eventParticipantId===creatorInfo.get("participantId")){return creatorInfo}switch(type){case Api.Helpers.Event.EVENT_TYPE.COUNTER_SIGNER_REPLACED:participantSet=this.members.get("additionalParticipantSets");break;case Api.Helpers.Event.EVENT_TYPE.ALL_CCS_REPLACED:participantSet=this.members.get("ccsInfo");break;default:participantSet=this.members.get("widgetParticipantSet");break}}else{senderInfo=this.members.get("senderInfo");if(eventParticipantId===senderInfo.get("participantId")){return senderInfo}if(type==="SHARED"){shareParticipant=this._getSharedParticipant(event);if(shareParticipant){return shareParticipant}}participantSets=this.members.get("participantSets");if(participantSets){participantSet=participantSets.findWhere({id:this.participantsMap[eventParticipantId]})}}if(!participantSet){return null}if(type===Api.Helpers.Event.EVENT_TYPE.COUNTER_SIGNER_REPLACED||type===Api.Helpers.Event.EVENT_TYPE.ALL_CCS_REPLACED){indexOfParticipant=this.getParticipantIndex(participantSet,eventParticipantId)}else{if(participantSet&&participantSet.get("memberInfos")){indexOfParticipant=participantSet.get("memberInfos").findWhere({id:eventParticipantId})}}return indexOfParticipant},getParticipantIndex:function(participantSet,eventParticipantId){for(var i=0;i<participantSet.length;i++){if(participantSet.models[i].get("memberInfos").models[0].get("id")===eventParticipantId){return participantSet.models[i].get("memberInfos").models[0]}}},_getSharedParticipant:function(event){var sharedParticipants=this.members.get("sharesInfo"),pId=event.get("participantId"),part;part=Api._.find(sharedParticipants.models,function(sharedParticipant){return sharedParticipant.get("participantId")===pId});if(part){return part}},getComment:function(event){var comment=event.get("comment");return comment?"Comment: "+comment:""},getAllDescriptions:function(){if(!this.generatedDescriptions){this.doEventsDescriptions()}return this}});Api.Helpers.Events.EventsDescriptions=EventsDescriptions;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ParticipantInfo=Backbone.Model.extend({defaults:{company:"",email:"",name:"",participantId:"",electronicSealId:""}});var CCParticipantInfo=ParticipantInfo.extend({defaults:Backbone.Model.inherit("defaults",{hidden:false,self:false})});var SharesInfo=ParticipantInfo.extend({defaults:Backbone.Model.inherit("defaults",{sharerParticipantId:""})});var SenderInfo=ParticipantInfo.extend({defaults:Backbone.Model.inherit("defaults",{hidden:false,self:false,status:"",createdDate:"",userId:""})});var DetailedParticipantInfo=ParticipantInfo.extend({getModel:function(attrs){var pSet=this.collection._parent,isWidget=this.collection.isWidget,NS=isWidget?Api.Widgets:Api.Agreements,parentOpt=isWidget?{widget:pSet.widget}:{agreement:pSet.agreement},options=Api._.extend({participantSet:pSet,collection:this.collection},parentOpt);if(attrs){attrs=Api._.extend({id:this.id},attrs)}return new NS.Members.Participant(attrs||this.attributes,options)},defaults:{securityOption:SecurityOption,fax:"",id:"",privateMessage:"",self:false,hidden:false,status:""}});var SecurityOption={authenticationMethod:"",password:"",phoneInfo:{},nameInfo:{},digAuthInfo:{},notaryAuthentication:""};function getWorkflow(pSets){var Workflow=Api.Agreements.Members.WORKFLOW,uniqueParticipantSetsLength=Api._.uniq(pSets.pluck("order")).length;if(uniqueParticipantSetsLength===1){return Workflow.PARALLEL}return uniqueParticipantSetsLength===pSets.length?Workflow.SEQUENTIAL:Workflow.HYBRID}function getActiveMembers(pSet){var REPLACED=Api.Agreements.Members.STATUS.REPLACED;return pSet.get("memberInfos").filter(function(member){return member.get("status")!==REPLACED})}function findParticipantBySelf(membersModel,isSelf,persona){if(!membersModel){return null}var personas=Api.Agreements.Members.PERSONAS,participant=null,senderObjectKey;if(membersModel.agreement||membersModel.megaSign){senderObjectKey="senderInfo"}else{if(membersModel.widget){senderObjectKey="creatorInfo"}}if(!persona){persona=personas.NON_ORIGINATOR_PARTICIPANTS}switch(persona){case personas.ORIGINATOR:var senderInfo=membersModel.get(senderObjectKey);if(senderInfo.get("self")===isSelf){participant=senderInfo}break;case personas.CC:var ccsInfo=membersModel.get("ccsInfo");participant=ccsInfo.find(function(ccParticipant){return ccParticipant.get("self")===isSelf});break;case personas.SHAREE:var sharesInfo=membersModel.get("sharesInfo");participant=sharesInfo.find(function(shareeParticipant){return shareeParticipant.get("self")===isSelf});break;case personas.NON_ORIGINATOR_PARTICIPANTS:if(membersModel.agreement||membersModel.megaSign){participant=membersModel.getMyself({isMyTurn:isSelf})||membersModel.getMyself()}else{if(membersModel.widget){participant=membersModel.getMyself()}}break;case personas.ANY:participant=this.findParticipantBySelf(membersModel,isSelf,null)||this.findParticipantBySelf(membersModel,isSelf,personas.ORIGINATOR)||this.findParticipantBySelf(membersModel,isSelf,personas.CC)||this.findParticipantBySelf(membersModel,isSelf,personas.SHAREE);break;default:break}return participant}var ROLE=Api.Utils.makeObj(["ACCEPTOR","APPROVER","CC","CERTIFIED_RECIPIENT","DELEGATE_TO_ACCEPTOR","DELEGATE_TO_APPROVER","DELEGATE_TO_CERTIFIED_RECIPIENT","DELEGATE_TO_FORM_FILLER","DELEGATE_TO_SIGNER","FORM_FILLER","ORIGINATOR","SHARE","SIGNER","NOTARY_SIGNER","ELECTRONIC_SEALER"]);var Members={CCParticipantInfo:CCParticipantInfo,SharesInfo:SharesInfo,SenderInfo:SenderInfo,DetailedParticipantInfo:DetailedParticipantInfo,findParticipantBySelf:findParticipantBySelf,getWorkflow:getWorkflow,getActiveMembers:getActiveMembers,ROLE:ROLE};Api.Helpers.Members=Members;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var BASE_64_ENCODING="encoding=base64";var Streamable={prepSyncOptions:function(options,asBase64){if(asBase64){var dataType=this.dataType?this.dataType+";"+BASE_64_ENCODING:"application/json;"+BASE_64_ENCODING;options=Api.Utils.defaults(options,{dataType:dataType,headers:{Accept:dataType}})}else{if(this.dataType){options=Api.Utils.defaults(options,{dataType:this.dataType,headers:{Accept:this.dataType}})}}if(options){options.wait=true}return options},fetch:function(options){return this._super(this.prepSyncOptions(options))},fetchAsBase64:function(options){return this.fetch(this.prepSyncOptions(options,true))},save:function(attrs,options){return this._super(attrs,this.prepSyncOptions(options))},saveAsBase64:function(attrs,options){return this.save(attrs,this.prepSyncOptions(options,true))},parse:function(response,options){return{value:response,url:Api.Utils.getDataUrl(response,options.dataType)}},defaults:{value:"",url:""}};Api.Helpers.Streamable=Streamable;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Sharee=Backbone.Model.extend({idAttribute:"participantId",toJSON:function(){return this.pick(Api._.keys(this.defaults))},defaults:{email:"",message:""}});Api.Helpers.Sharee=Sharee;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Share=Backbone.Collection.extend({allowedCRUD:["create"],url:function(){return this.members.url()+"/share"},model:Api.Helpers.Sharee,save:function(options){var self=this;options=options||{};return this.sync("create",this,options).then(function(resp){var models=self.parse(resp,options),message=self.models[0].get("message");Api._.each(models,function(model,index){model.message=message});self.set(models,options);return models})},parse:function(response){return response.shareCreationResponseList||response},toJSON:function(options){return{shareCreationInfo:this._super(options)}}});Api.Helpers.Members.Share=Share;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Settings={isLibraryDocumentsEnabled:function(){return Api._(this.get("libraryIntegrationsEnabled")).contains("INTERNAL")},isLibraryDocumentsOnlyEnabled:function(){var libraryIntegrationsEnabled=this.get("libraryIntegrationsEnabled");return libraryIntegrationsEnabled.length===1&&this.isLibraryDocumentsEnabled()},getExternalIntegrations:function(){return Api._(this.get("libraryIntegrationsEnabled")).without("INTERNAL")}};Api.Helpers.Settings=Settings;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ReminderBase=Backbone.Model.extend({idAttribute:"reminderId",isImmediateReminder:function(){return this.get("frequency")===ReminderBase.FREQ.ONCE},defaults:{recipientParticipantIds:[],status:"",firstReminderDelay:null,frequency:"",lastSentDate:"",nextSentDate:"",note:null,reminderId:null,startReminderCounterFrom:"",allUnsigned:false}},{STATUS:Api.Utils.makeObj(["ACTIVE","CANCELED","COMPLETE"]),FREQ:Api.Utils.makeObj(["ONCE","DAILY_UNTIL_SIGNED","WEEKDAILY_UNTIL_SIGNED","EVERY_OTHER_DAY_UNTIL_SIGNED","EVERY_THIRD_DAY_UNTIL_SIGNED","EVERY_FIFTH_DAY_UNTIL_SIGNED","WEEKLY_UNTIL_SIGNED"]),START_FROM:Api.Utils.makeObj(["AGREEMENT_AVAILABILITY","REMINDER_CREATION"])});var Reminders=Backbone.Collection.extend({allowedCRUD:["read"],parse:function(response){return response.reminderInfoList},model:null,fetch:function(options){return this._super(options)},isReminderSentOnceById:function(reminderId){return this.findWhere({id:reminderId}).get("frequency")===ReminderBase.FREQ.ONCE},isReminderSentOnceByIndex:function(index){return this.at(index).get("frequency")===ReminderBase.FREQ.ONCE}});Api.Helpers.Reminders=Reminders;Api.Helpers.ReminderBase=ReminderBase;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AccountShare=Backbone.Model.extend({allowedCRUD:[],defaults:{id:"",permissions:[],relationship:"",sharee:{},sharer:{},status:""}},{SHARE_PERMISSIONS:Api.Utils.makeObj(["VIEW","SEND","MODIFY"]),SHARE_RELATIONSHIP:Api.Utils.makeObj(["SHAREE","SHARER"]),SHARE_STATUS:Api.Utils.makeObj(["ACTIVE","CANCELLED_BY_SHAREE","CANCELLED_BY_SHARER","DECLINED_BY_SHAREE","DECLINED_BY_SHARER","REQUESTED_BY_SHAREE","REQUESTED_BY_SHARER"]),SHARE_TYPE:Api.Utils.makeObj(["GROUP","USER"])});Api.Helpers.AccountShare=AccountShare;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PERMISSIONS=Api.Helpers.AccountShare.SHARE_PERMISSIONS;var AccountSharerInfo=Backbone.Model.extend({_:null,defaults:{userId:"",email:"",fullName:"",permissions:[]},canView:function(){return this._canPermission(PERMISSIONS.VIEW)},canModify:function(){return this._canPermission(PERMISSIONS.MODIFY)},canSend:function(){return this._canPermission(PERMISSIONS.SEND)},_canPermission:function(permission){return Api._.contains(this.get("permissions"),permission)}});var MyAgreementInfo=Backbone.Model.extend({_:null,canShare:function(){return this._canOperation(MyAgreementInfo.ALLOWED_OPERATIONS.SHARE)},canSign:function(){return this._canOperation(MyAgreementInfo.ALLOWED_OPERATIONS.SIGN)},canDelegate:function(){return this._canOperation(MyAgreementInfo.ALLOWED_OPERATIONS.DELEGATE)},canReportAbuse:function(){return this._canOperation(MyAgreementInfo.ALLOWED_OPERATIONS.REPORT_ABUSE)},_canOperation:function(operation){return Api._.contains(this.get("allowedOperations"),operation)},defaults:{accountSharers:Backbone.Collection.extend({model:AccountSharerInfo}),allowedOperations:[]}},{ALLOWED_OPERATIONS:Api.Utils.makeObj(["SHARE","SIGN","DELEGATE","REPORT_ABUSE"])});Api.Helpers.MyAgreementInfo=MyAgreementInfo;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var View=Backbone.Model.extend({defaults:{isCurrent:false,embeddedCode:"",expiration:"",name:"",url:""}});var Views=Backbone.Collection.extend({model:View,initialize:function(){},getNextURL:function(){var view=this.findWhere({isCurrent:true});return view?view.get("url"):null}});Api.Helpers.Views=Views;module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var dirsort;var requireAll=function(requireContext){return dirsort(requireContext.keys()).map(function(key){return __webpack_require__(requireContext.resolve(key))(Api)})};if(true){dirsort=__webpack_require__(53);requireAll(__webpack_require__(54))}else{if(window.parcelRequire){require("./**/*.js")}else{var glob=require("glob");dirsort=require("../../lib/dirsort");var files=glob.sync("./*/**",{nosort:true,nodir:true,cwd:__dirname});files=dirsort(files);files.map(require)}}module.exports=Api._.identity;return Api});module.exports=fn}),(function(module,exports){function dirsort(files,options){var _=Backbone._;options=_.defaults(options||{},dirsort.defaults);var list=_(files).groupBy(function(file){var a=file.split(options.sep);a.pop();return a});list=_(list).chain().pairs().sortBy(0).object().values().flatten().value();return list}dirsort.defaults={sep:"/"};module.exports=dirsort}),(function(module,exports,__webpack_require__){var map={"./accessRequest/accessRequest.js":55,"./accounts/accounts.js":56,"./accounts/byId/agreements/agreements_list.js":57,"./agreements/agreements.js":58,"./agreements/agreements_list.js":59,"./agreements/byId/agreement.js":60,"./agreements/byId/auditTrail/auditTrail.js":61,"./agreements/byId/authoringInfo/authoringInfo.js":62,"./agreements/byId/combinedDocument/combinedDocument.js":63,"./agreements/byId/combinedDocument/pagesInfo/pagesInfo.js":64,"./agreements/byId/combinedDocument/url/url.js":65,"./agreements/byId/documents/byId/document.js":66,"./agreements/byId/documents/documents.js":67,"./agreements/byId/documents/imageUrls/imageUrls.js":68,"./agreements/byId/events/events.js":69,"./agreements/byId/formData/formData.js":70,"./agreements/byId/formFields/formFields.js":71,"./agreements/byId/formFieldsData/formFieldsData.js":72,"./agreements/byId/me/me.js":73,"./agreements/byId/members/members.js":74,"./agreements/byId/members/participantSets/byId/delegatedParticipantSets/delegatedParticipantSets.js":75,"./agreements/byId/members/participantSets/byId/participantSet.js":76,"./agreements/byId/members/participantSets/byId/participants/byId/auth/adobeSign/adobeSign.js":77,"./agreements/byId/members/participantSets/byId/participants/byId/auth/auth.js":78,"./agreements/byId/members/participantSets/byId/participants/byId/auth/authenticationTriggerInfo.js":79,"./agreements/byId/members/participantSets/byId/participants/byId/auth/govid/govid.js":80,"./agreements/byId/members/participantSets/byId/participants/byId/auth/kba/kba.js":81,"./agreements/byId/members/participantSets/byId/participants/byId/auth/password/password.js":82,"./agreements/byId/members/participantSets/byId/participants/byId/auth/phone/phone.js":83,"./agreements/byId/members/participantSets/byId/participants/byId/participant.js":84,"./agreements/byId/members/participantSets/byId/participants/byId/participationAuthToken/participationAuthToken.js":85,"./agreements/byId/members/participantSets/byId/participants/byId/remoteSign/remoteSign.js":86,"./agreements/byId/members/participantSets/byId/participants/byId/securityOptions/securityOptions.js":87,"./agreements/byId/members/participantSets/byId/participants/byId/signingInfo/signingInfo.js":88,"./agreements/byId/members/participantSets/byId/participants/byId/signingTokens/signingTokens.js":89,"./agreements/byId/members/participantSets/byId/participants/byId/singpassSign/singpassSign.js":90,"./agreements/byId/members/participantSets/byId/participants/byId/status/status.js":91,"./agreements/byId/members/share/share.js":92,"./agreements/byId/note/note.js":93,"./agreements/byId/reflowOptions/reflowOptions.js":94,"./agreements/byId/reminders/byId/reminder.js":95,"./agreements/byId/reminders/reminders.js":96,"./agreements/byId/restore/restore.js":97,"./agreements/byId/settings/settings.js":98,"./agreements/byId/signerIdentityReport/signerIdentityReport.js":99,"./agreements/byId/signingUrls/signingUrls.js":100,"./agreements/byId/state/state.js":101,"./agreements/byId/uidSign/uidSign.js":102,"./agreements/byId/views/views.js":103,"./agreements/byId/visibility/visibility.js":104,"./baseUris/baseUris.js":105,"./electronicSeals/byId/electronicSeal.js":106,"./electronicSeals/electronicSeals.js":107,"./electronicSeals/electronicSeals_list.js":108,"./gateway/addressbook/addressbook.js":109,"./gateway/addressbook/contacts/contacts.js":110,"./gateway/addressbook/contacts/search.js":111,"./gateway/advancedWorkflows/advancedWorkflows.js":112,"./gateway/advancedWorkflows/powerautomate/powerautomate.js":113,"./gateway/advancedWorkflows/powerautomate/powerautomate_list.js":114,"./gateway/agreementMetadata/agreementMetadata.js":115,"./gateway/agreementMetadata/agreements/agreements.js":116,"./gateway/agreementMetadata/agreements/agreements_list.js":117,"./gateway/agreementMetadata/agreements/byId/agreement.js":118,"./gateway/agreementMetadata/agreements/byId/dates/expirations/expirations.js":119,"./gateway/backgroundRemoval/backgroundRemoval.js":120,"./gateway/backgroundRemoval/signatureImage/signatureImage.js":121,"./gateway/fieldRecognition/fieldRecognition.js":122,"./gateway/gateway.js":123,"./gateway/mobilecapture/mobileCaptureManager.js":124,"./gateway/mobilecapture/mobilecapture.js":125,"./gateway/search/search.js":126,"./groups/byId/group.js":127,"./groups/byId/users/users.js":128,"./groups/groups.js":129,"./groups/groups_list.js":130,"./libraryDocuments/byId/auditTrail/auditTrail.js":131,"./libraryDocuments/byId/combinedDocument/combinedDocument.js":132,"./libraryDocuments/byId/combinedDocument/url/url.js":133,"./libraryDocuments/byId/documents/byId/document.js":134,"./libraryDocuments/byId/documents/byId/imageUrls/imageUrls.js":135,"./libraryDocuments/byId/documents/documents.js":136,"./libraryDocuments/byId/events/events.js":137,"./libraryDocuments/byId/formData/formData.js":138,"./libraryDocuments/byId/libraryDocument.js":139,"./libraryDocuments/byId/me/me.js":140,"./libraryDocuments/byId/note/note.js":141,"./libraryDocuments/byId/state/state.js":142,"./libraryDocuments/byId/views/views.js":143,"./libraryDocuments/byId/visibility/visibility.js":144,"./libraryDocuments/libraryDocuments.js":145,"./libraryDocuments/libraryDocuments_list.js":146,"./libraryDocuments/libraryDocuments_new.js":147,"./megaSigns/byId/childAgreementsInfo/byId/childAgreementsInfoFile.js":148,"./megaSigns/byId/combinedDocument/combinedDocument.js":149,"./megaSigns/byId/combinedDocument/url/url.js":150,"./megaSigns/byId/documents/byId/document.js":151,"./megaSigns/byId/documents/documents.js":152,"./megaSigns/byId/documents/imageUrls/imageUrls.js":153,"./megaSigns/byId/events/events.js":154,"./megaSigns/byId/formData/formData.js":155,"./megaSigns/byId/me/me.js":156,"./megaSigns/byId/megaSign.js":157,"./megaSigns/byId/members/members.js":158,"./megaSigns/byId/members/share/share.js":159,"./megaSigns/byId/note/note.js":160,"./megaSigns/byId/reminders/byId/reminder.js":161,"./megaSigns/byId/reminders/reminders.js":162,"./megaSigns/byId/state/state.js":163,"./megaSigns/byId/views/views.js":164,"./megaSigns/byId/visibility/visibility.js":165,"./megaSigns/megaSigns.js":166,"./megaSigns/megaSigns_list.js":167,"./messageTemplates/messageTemplates.js":168,"./messageTemplates/messageTemplates_list.js":169,"./oauth/oauth.js":170,"./oauth/oauth_refreshweb.js":171,"./paymentIntegration/merchantAccounts/merchantAccounts.js":172,"./paymentIntegration/paymentIntegration.js":173,"./paymentIntegration/transactions/transactions.js":174,"./signatureImage/signatureImage.js":175,"./transientDocuments/transientDocuments.js":176,"./users/byId/groups/byId/group.js":177,"./users/byId/groups/byId/settings/settings.js":178,"./users/byId/groups/groups.js":179,"./users/byId/initials/initials.js":180,"./users/byId/initials/profile/image/image.js":181,"./users/byId/initials/profile/profile.js":182,"./users/byId/recipientSettings/recipientSettings.js":183,"./users/byId/settings/settings.js":184,"./users/byId/shares/byId/share.js":185,"./users/byId/shares/shares.js":186,"./users/byId/signatures/profile/image/image.js":187,"./users/byId/signatures/profile/profile.js":188,"./users/byId/signatures/signatures.js":189,"./users/byId/user.js":190,"./users/byId/userInfo/userInfo.js":191,"./users/userByEmail/userByEmail.js":192,"./users/users.js":193,"./users/users_list.js":194,"./users/users_new.js":195,"./webhooks/byId/state/state.js":196,"./webhooks/byId/webhook.js":197,"./webhooks/webhooks.js":198,"./webhooks/webhooks_list.js":199,"./widgets/byId/auditTrail/auditTrail.js":200,"./widgets/byId/combinedDocument/combinedDocument.js":201,"./widgets/byId/combinedDocument/url/url.js":202,"./widgets/byId/documents/byId/document.js":203,"./widgets/byId/documents/documents.js":204,"./widgets/byId/documents/imageUrls/imageUrls.js":205,"./widgets/byId/events/events.js":206,"./widgets/byId/formData/formData.js":207,"./widgets/byId/me/me.js":208,"./widgets/byId/members/ccParticipants/ccParticipants.js":209,"./widgets/byId/members/members.js":210,"./widgets/byId/members/participantSets/byId/participantSet.js":211,"./widgets/byId/members/participantSets/byId/participants/byId/participant.js":212,"./widgets/byId/members/participantSets/byId/participants/byId/securityOptions/securityOptions.js":213,"./widgets/byId/members/share/share.js":214,"./widgets/byId/note/note.js":215,"./widgets/byId/state/state.js":216,"./widgets/byId/views/views.js":217,"./widgets/byId/visibility/visibility.js":218,"./widgets/byId/widget.js":219,"./widgets/widgets.js":220,"./widgets/widgets_list.js":221,"./widgets/widgets_new.js":222,"./workflows/byId/workflow.js":223,"./workflows/workflows.js":224,"./workflows/workflows_list.js":225};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1)){throw new Error("Cannot find module '"+req+"'.")}return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=54}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var AccessRequest=Backbone.Model.extend({defaults:{seriouslySecureId:"",requesterName:"",requesterEmail:"",requesterType:"Adobe Sign Support",granterName:"",granterEmail:"",granterId:"",requestTime:"",grantTime:"",expirationTime:"",status:"",reason:"",supportTicket:"",granterNote:"",maxDays:7,operations:[{action:"",resourceType:"",scope:"",operationDescription:"",operationAssociatedResourceInfo:"{}"}]},idAttribute:"adminAccessRequestId",urlRoot:Api.getServiceUri("adminAccessRequests"),allowedCRUD:["read","update"],parse:function(resp){resp=Api._.extend({},resp,{duration:this.getDuration(resp.requestTime,resp.grantTime,resp.expirationTime),requesterNameForDisplay:concatText(resp.requesterName,"Adobe Support"),granterNameAndEmail:concatText(resp.granterName,resp.granterEmail),granterNote:resp.granterNote?Api._.escape(resp.granterNote):Api.AccessRequest.isRequestEditable(resp.status)?"":"Not Specified"});return resp},toJSON:function(){return{expirationTime:this.get("expirationTime"),status:this.get("status"),granterNote:this.get("granterNote")}},getDuration:function(requestTime,grantTime,expirationTime){var MILLISECONDS_IN_A_DAY=86400000,duration;expirationTime=new Date(expirationTime);if(grantTime){grantTime=new Date(grantTime);duration=expirationTime-grantTime}else{if(requestTime){requestTime=new Date(requestTime);duration=expirationTime-requestTime}else{duration=0}}return Math.ceil(duration/MILLISECONDS_IN_A_DAY)}});function concatText(text,subText){if(text&&subText){return text+" ( "+subText+" )"}return text||subText||""}AccessRequest.CONSTANTS={AccessRequestActions:Api.Utils.makeObj(["APPROVAL","DENIAL","REAPPROVAL","VIEW"]),AccessRequestStatus:Api.Utils.makeObj(["PENDING","APPROVED","CANCELLED","EXPIRED","DENIED"]),WorkflowExecutionStatus:Api.Utils.makeObj(["SUCCESS","FAILURE"])};AccessRequest.isRequestEditable=function(accessRequestStatus){var ARS=Api.AccessRequest.CONSTANTS.AccessRequestStatus;return accessRequestStatus===ARS.PENDING||accessRequestStatus===ARS.APPROVED};Api.AccessRequest=AccessRequest;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Accounts={};var Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("accounts"),allowedCRUD:[]});Api.Accounts.Base=Base;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AccountAgreement=Api.Helpers.UserAgreement.extend({defaults:Backbone.Model.inherit("defaults",{isDestroyInProgress:false,isMegasign:false,isMegasignParent:false,lastUpdated:"",sender:""})});var MyAgreementsList=Backbone.Collection.extend({allowedCRUD:["read"],model:AccountAgreement,url:function(){return Api.Accounts.Base.prototype.urlRoot()+"/me/agreements"},initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.accountAgreementList}});Api.Accounts.MyAgreementsList=MyAgreementsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Agreements=function(attrs,options){var ModelClass;if(attrs){ModelClass=Api.Agreements.Agreement}else{ModelClass=Api.Agreements.AgreementsList}return new ModelClass(attrs,options)};Agreements.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("agreements"),allowedCRUD:[]});Api.Agreements=Agreements;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AgreementsList=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Helpers.UserAgreement,url:Api.Agreements.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.userAgreementList}});Api.Agreements.AgreementsList=AgreementsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var _=Api._;var MAX_PARTICIPANT_SET_NAME=255;var CcInfo=Backbone.Model.extend({validate:function(){if(!Api.Utils.isValidEmail(this.get("email"))){return[{key:"CCInfo:email:required",message:Api.i18n("compose_recipient_error_invalid_email_bis",this.get("email"))}]}},defaults:{email:"",label:"",visiblePages:[]}});var CREATION_ROLE=_.omit(Api.Helpers.Members.ROLE,["CC","ORIGINATOR"]);var PhoneInfo=Backbone.Model.extend({validate:function(){if(!Api.Utils.isValidPhone(this.get("phone"))){return[{key:"PhoneInfo:phone:required",message:Api.i18n("agreement_recipient_phone_number_required")}]}},isEmpty:function(){return _.every(this.attributes,_.isEmpty)},defaults:{countryCode:"",countryIsoCode:"",phone:""}});var NameInfo=Backbone.Model.extend({validate:function(){},isEmpty:function(){return _.every(this.attributes,_.isEmpty)},defaults:{firstName:"",lastName:""}});var DigAuthInfo=Backbone.Model.extend({validate:function(){},isEmpty:function(){return _.every(this.attributes,_.isEmpty)},defaults:{providerId:""}});var ParticipantSecurityOption=Backbone.Model.extend({toJSON:function(){var AuthMethods=Api.Agreements.Members.AUTHENTICATION_METHODS;var data=this.pick("authenticationMethod");switch(data.authenticationMethod){case AuthMethods.PHONE:data.phoneInfo=this.get("phoneInfo");break;case AuthMethods.PASSWORD:data.password=this.get("password");break;case AuthMethods.KBA:data.nameInfo=this.get("nameInfo");break;case AuthMethods.DIG_ID:data.digAuthInfo=this.get("digAuthInfo");break}data.notaryAuthentication=this.get("notaryAuthentication");return data},validate:function(){var AuthMethods=Api.Agreements.Members.AUTHENTICATION_METHODS;var errors=[],authMethod=this.get("authenticationMethod"),phoneInfo=this.get("phoneInfo"),password=this.get("password");if(!(authMethod in AuthMethods)){return{key:"SecurityOptions:authenticationMethod:unrecognized",message:Api.i18n("agreement_security_option_invalid_auth_method")}}if(authMethod!==AuthMethods.PHONE&&phoneInfo&&!phoneInfo.isEmpty()){errors.push({key:"SecurityOptions:phoneInfos:unexpected",message:Api.i18n("agreement_security_option_phone_info_unexpected")})}if(authMethod!==AuthMethods.PASSWORD&&password&&!password.isEmpty()){errors.push({key:"SecurityOptions:password:unexpected",message:Api.i18n("agreement_security_option_password_unexpected")})}if(authMethod===AuthMethods.PHONE){if(!phoneInfo||phoneInfo.isEmpty()){errors.push({key:"SecurityOptions:phoneInfo:required",message:Api.i18n("agreement_security_option_phone_info_required")})}else{errors=errors.concat(phoneInfo.validate())}}else{if(authMethod===AuthMethods.PASSWORD){if(!password||password.isEmpty()){errors.push({key:"SecurityOptions:password:required",message:Api.i18n("agreement_security_option_password_required")})}else{errors=errors.concat(password.validate())}}}errors=_.compact(errors);return errors.length?errors:undefined},defaults:{authenticationMethod:"NONE",phoneInfo:PhoneInfo,password:Api.Helpers.Password,nameInfo:NameInfo,digAuthInfo:DigAuthInfo,notaryAuthentication:""}});var ParticipantInfo=Backbone.Model.extend({validate:function(){var errors=[];var name=this.get("name");errors=errors.concat(this.get("securityOption").validate());if(!Api.Utils.isValidEmail(this.get("email"))){errors.push({key:"RecipientInfo:email_fax:required",message:Api.i18n("compose_recipient_error_invalid_email_bis",this.get("email"))})}if(Api.Utils.isBlank(name)){errors.push({key:"RecipientInfo:recipientName:isEmpty",message:Api.i18n("compose_agreement_recipient_name_empty_error")})}else{if(Api.Utils.isRecipientNameTooLong(name)){errors.push({key:"RecipientInfo:recipientName:tooLong",message:Api.i18n("compose_agreement_recipient_name_too_long_error")})}}errors=_.compact(errors);return errors.length?errors:undefined},defaults:{email:"",name:"",securityOption:ParticipantSecurityOption}});var ParticipantSetInfo=Backbone.Model.extend({validate:function(){var errors=[],memberInfos=this.get("memberInfos"),name=this.get("name");if(memberInfos.size()<1&&this.get("role")!=="ELECTRONIC_SEALER"){errors.push({key:"RecipientSetInfo:recipientSet:empty",message:Api.i18n("composeController_pleaseAddAtLeastOneRecipient")})}errors=errors.concat(memberInfos.validate());if(!(this.get("role") in CREATION_ROLE)){errors.push({key:"RecipientSetInfo:recipientSetRole:unrecognized",message:Api.i18n("agreement_recipient_set_role_unrecognized")})}if(name&&name.length>MAX_PARTICIPANT_SET_NAME){errors.push({key:"RecipientSetInfo:recipientSetName:tooLong",message:Api.i18n("agreement_recipient_set_name_too_long")})}errors=_.compact(errors);return errors.length?errors:undefined},defaults:{memberInfos:Backbone.Collection.extend({model:ParticipantInfo}),order:null,role:"",label:null,name:null,privateMessage:null,visiblePages:[]}});var Agreement=Api.Agreements.Base.extend({allowedCRUD:["create","read","update","delete"],initialize:function(attrs,options){options=options||{};this._super.apply(this,arguments);this.createSubCollections(options)},createSubCollections:function(options){options=options||{};if(!this.id){return}var refOpts={agreement:this};var attrs={id:this.id};var models=null;this.events=options.events||new Api.Agreements.Events(models,refOpts);this.members=options.members||new Api.Agreements.Members(attrs,refOpts);this.documents=options.documents||new Api.Agreements.Documents(attrs,refOpts);this.auditTrail=options.auditTrail||new Api.Agreements.AuditTrail(attrs,refOpts);this.combinedDocument=options.combinedDocument||new Api.Agreements.CombinedDocument(attrs,refOpts);this.imageUrls=this.documents.imageUrls;this.views=options.views||new Api.Agreements.Views(attrs,refOpts);this.state=options.state||new Api.Agreements.State(attrs,refOpts);this.reminders=options.reminders||new Api.Agreements.Reminders(models,refOpts);this.note=options.note||new Api.Agreements.Note(attrs,refOpts);this.formData=options.formData||new Api.Agreements.FormData(attrs,refOpts);this.formFields=options.formFields||new Api.Agreements.FormFields(attrs,refOpts);this.authoringInfo=options.authoringInfo||new Api.Agreements.AuthoringInfo(attrs,refOpts);this.visibility=options.visibility||new Api.Agreements.Visibility(attrs,refOpts);this.settings=options.settings||new Api.Agreements.Settings(attrs,refOpts);this.signingUrls=options.signingUrls||new Api.Agreements.SigningUrls(models,refOpts);this.me=options.me||new Api.Agreements.Me(attrs,refOpts);this.signerIdentityReport=options.signerIdentityReport||new Api.Agreements.SignerIdentityReport(attrs,refOpts);this.restore=options.restore||new Api.Agreements.Restore(attrs,refOpts)},parse:function(response,options){if(options.xhr.status===201&&response.id){this.id=response.id;this.createSubCollections()}return response},destroy:function(options){options=options||{};if(options.data){options.url=this.url()+"?"+Api.Utils.convertObjectToQueryString(options.data);delete options.data}return this._super(options)},isComplete:function(){return _.contains(Agreement.COMPLETED_STATUSES,this.get("status"))},isOutForCompletion:function(){return _.contains(Agreement.OUT_FOR_STATUSES,this.get("status"))},isCanceled:function(){return this.get("status")===Agreement.INCOMPLETE_STATUSES.CANCELLED},isExpired:function(){return this.get("status")===Agreement.INCOMPLETE_STATUSES.EXPIRED},isArchived:function(){return this.get("status")===Agreement.INCOMPLETE_STATUSES.ARCHIVED},isIncomplete:function(){return _.contains(Agreement.INCOMPLETE_STATUSES,this.get("status"))},isAuthoring:function(){return this.get("status")===Agreement.INCOMPLETE_STATUSES.AUTHORING},isWidgetInstanceWaitingForVerification:function(){return this.get("status")===Agreement.STATUS.WIDGET_WAITING_FOR_VERIFICATION},isWaitingForNotarization:function(){return this.get("status")===Agreement.STATUS.WAITING_FOR_NOTARIZATION},isPrefill:function(){return this.get("status")===Agreement.INCOMPLETE_STATUSES.WAITING_FOR_PREFILL},toJSON:function(){var data=this._super();if(!data.securityOption.openPassword){data.securityOption={}}return data},validate:function(){var errors=[],openPassword=this.get("securityOption").openPassword,pSets=this.get("participantSetsInfo"),ccs=this.get("ccs"),error;if(!this.isNew()){return}if(!this.get("name")){error={key:"agreement:name",message:Api.i18n("composeController_youNeedToNameYourDocument")};this.trigger("invalid:name",this,error);errors.push(error)}if(pSets.size()<1){error={key:"RecipientSetInfo:recipientSet:empty",message:Api.i18n("composeController_pleaseAddAtLeastOneRecipient")};errors.push(error)}else{errors=errors.concat(pSets.validate())}errors=errors.concat(ccs.validate());errors=errors.concat(this.get("fileInfos").validate());if(openPassword.hasChanged()){if(openPassword.isValid()){openPassword.trigger("valid:protect_pass")}else{error={key:"agreement:password_protect_pdf",message:Api.i18n("compose_password_protect_error")};openPassword.trigger("invalid:protect_pass");errors.push(error)}}errors=_.compact(errors);return errors.length>0?errors:undefined},defaults:{ccs:Backbone.Collection.extend({model:CcInfo}),createdDate:"",deviceInfo:{},documentRetentionApplied:false,documentVisibilityEnabled:false,emailOption:{},expirationTime:null,externalId:{},fileInfos:Api.Helpers.FileInfos,firstReminderDelay:null,formFieldLayerTemplates:Api.Helpers.FileInfos,groupId:"",hasFormFieldData:false,hasSignerIdentityReport:false,isDocumentRetentionApplied:false,locale:"en_US",mergeFieldInfo:[],message:null,name:"",parentId:"",participantSetsInfo:Backbone.Collection.extend({model:ParticipantSetInfo}),postSignOption:{},reminderFrequency:"",securityOption:{openPassword:Api.Helpers.Password},senderEmail:"",settings:{},signatureType:"ESIGN",state:"",status:"",type:"AGREEMENT",vaultingInfo:{},notaryInfo:{},workflowId:null}},{COMPLETED_STATUSES:Api.Utils.makeObj(["SIGNED","APPROVED","DELIVERED","ACCEPTED","FORM_FILLED","ACCEPTED_BEFORE_NOTARIZATION"]),INCOMPLETE_STATUSES:Api.Utils.makeObj(["ARCHIVED","AUTHORING","CANCELLED","EXPIRED","WAITING_FOR_PREFILL"]),OUT_FOR_STATUSES:Api.Utils.makeObj(["OUT_FOR_SIGNATURE","OUT_FOR_APPROVAL","OUT_FOR_DELIVERY","OUT_FOR_ACCEPTANCE","OUT_FOR_FORM_FILLING"]),STATE:Api.Utils.makeObj(["DRAFT","CANCELLED","IN_PROCESS","AUTHORING","ARCHIVED"]),CREATION_STATE:Api.Utils.makeObj(["DRAFT","IN_PROCESS","AUTHORING"]),SIGNATURE_TYPE:Api.Utils.makeObj(["ESIGN","WRITTEN"])});Agreement.STATUS=_.extend(Api.Utils.makeObj(["WIDGET_WAITING_FOR_VERIFICATION","WAITING_FOR_NOTARIZATION"]),Agreement.COMPLETED_STATUSES,Agreement.INCOMPLETE_STATUSES,Agreement.OUT_FOR_STATUSES);Api.Agreements.Agreement=Agreement;Api.Agreements.Agreement.PhoneInfo=PhoneInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AuditTrail=Api.Agreements.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.agreement.url()+"/auditTrail"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};attrs=attrs||{};if(!options.agreement&&!options.agreementId&&!attrs.id){throw new Error("An agreement is required")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId||attrs.id},{auditTrail:this})}}).extend(Api.Helpers.Streamable);Api.Agreements.AuditTrail=AuditTrail;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AuthoringInfo=Backbone.Model.extend({allowedCRUD:["read"],url:function(){return this.agreement.url()+"/authoringInfo"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{authoringInfo:this})},defaults:{advancedAuthoringEnabled:true,agreementIsBeingModified:false,agreementSignedOrDelegated:false,allowFieldRecognition:true,allowHyperlinksInEsign:true,allowPaymentIntegration:false,allowSaveAsTemplate:true,allowSignatureResize:false,allowSupportingDocuments:true,allowVerification:true,defaultDateFormat:"None",digitalSignaturesEnabled:true,digitalSignaturesFeatureAvailable:true,fieldRecognitionGuidedPlacementEnabled:true,fieldRecognitionPageLimit:25,fieldRecognitionTimeout:60000,inlineImageFieldEnabled:true,maxRecipients:25,minSignatureStampHeight:-1,minSignatureStampWidth:-1,preferredDimensionUnit:"IN",requiredHyperlinkAvailable:true,showWellFormattedSignature:true,stampOnlyWorkflowEnabled:false,stampSignatureFieldEnabled:true,structuredSelfSign:false}});Api.Agreements.AuthoringInfo=AuthoringInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocument=Api.Agreements.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.agreement.url()+"/combinedDocument"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}var refOpts={combinedDocument:this};this.combinedDocumentUrl=options.combinedDocumentUrl||new Api.Agreements.CombinedDocument.Url(null,refOpts);this.combinedDocumentPagesInfo=options.combinedDocumentPagesInfo||new Api.Agreements.CombinedDocument.PagesInfo(null,refOpts);this.agreement=options.agreement||new Api.Agreements({id:attrs.id},refOpts)}}).extend(Api.Helpers.Streamable);Api.Agreements.CombinedDocument=CombinedDocument;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PageInfo=Backbone.Model.extend({defaults:{height:-1,width:-1,rotation:-1,index:-1}});var CombinedDocumentPagesInfo=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.combinedDocument.url()+"/pagesInfo"},initialize:function(attrs,options){options=options||{};if(!options.combinedDocument&&!(attrs&&attrs.id)){throw new Error("An agreement ID or combinedDocument is required.")}this.documentsPagesInfo=new Backbone.Collection(null,{model:PageInfo});this.combinedDocument=options.combinedDocument||new Api.Agreements.CombinedDocument({id:attrs.id},{combinedDocumentPagesInfo:this})},parse:function(response){this.documentsPagesInfo.reset(response.documentPagesInfo);return null}});Api.Agreements.CombinedDocument.PagesInfo=CombinedDocumentPagesInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocumentUrl=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.combinedDocument.url()+"/url"+(this.versionId?"?versionId="+this.versionId:"")},initialize:function(attrs,options){options=options||{};if(!options.combinedDocument&&!(attrs&&attrs.id)){throw new Error("An agreement ID or combinedDocument is required.")}if(options.versionId){this.versionId=options.versionId}this.combinedDocument=options.combinedDocument||new Api.Agreements.CombinedDocument({id:attrs.id},{combinedDocumentUrl:this})},defaults:{url:""}});Api.Agreements.CombinedDocument.Url=CombinedDocumentUrl;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Document=Api.Agreements.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",urlRoot:function(){return this.documents.url()},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}if(options.dataType){this.dataType=options.dataType}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId});this.documents=this.agreement.documents}}).extend(Api.Helpers.Streamable);Api.Agreements.Document=Document;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var DocumentSurrogate=Backbone.Model.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};this.document=new Api.Agreements.Document({id:this.id},{agreement:(this.collection._parent||options._parent||{}).agreement,dataType:this.get("mimeType")})},getSurrogate:function(){return this.document},fetch:function(){return this.document.fetch.apply(this.document,arguments)}});var SupportingDocument=DocumentSurrogate.extend({defaults:{displayLabel:"",fieldName:"",id:"",mimeType:"",numPages:""}});var Document=DocumentSurrogate.extend({defaults:{id:"",label:"",numPages:"",mimeType:"",name:""}});var Documents=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.agreement.url()+"/documents"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.imageUrls=options.imageUrls||new Api.Agreements.Documents.ImageUrls(null,{documents:this});this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{documents:this})},fetch:function(options){return this._super(options)},size:function(){return this.get("supportingDocuments").size()+this.get("documents").size()},defaults:{documents:Backbone.Collection.extend({model:Document}),supportingDocuments:Backbone.Collection.extend({model:SupportingDocument})}},{SUPPORTING_DOCUMENT_CONTENT_FORMAT:Api.Utils.makeObj(["ORIGINAL","CONVERTED_PDF"])});Api.Agreements.Documents=Documents;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var DocumentImageUrlsInfo=Api.Helpers.ImageUrls.DocumentImageUrlsInfo;var ImageUrls=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.documents.url()+"/imageUrls"},initialize:function(attrs,options){options=options||{};if(!options.documents&&!(attrs&&attrs.id)){throw new Error("An agreement ID OR its corresponding documents are required.")}if(options.imageSizes){this.imageSizes=options.imageSizes}this.documents=options.documents||new Api.Agreements.Documents({id:attrs.id},{imageUrls:this})},getFirstThumbnailUrl:function(size){var coll=this.get("original");if(!coll.length){return""}return coll.at(0).getList().getFirstThumbnailUrl(size)},imagesReady:function(){var original=this.get("original"),supporting=this.get("supporting"),isNotAvailable=function(model){return !model.imagesReady()};return(!(original.length&&original.some(isNotAvailable))&&!(supporting.length&&supporting.some(isNotAvailable)))},parse:function(response){return{original:response.originalDocumentsImageUrlsInfo,supporting:response.supportingDocumentsImageUrlsInfo}},defaults:{original:Backbone.Collection.extend({model:DocumentImageUrlsInfo}),supporting:Backbone.Collection.extend({model:DocumentImageUrlsInfo})}},{IMAGE_SIZES:Api.Helpers.ImageUrls.IMAGE_SIZES}).extend(Api.Helpers.ImageUrls.Mixin);Api.Agreements.Documents.ImageUrls=ImageUrls;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Events=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Helpers.Event,url:function(){return this.agreement.url()+"/events"},initialize:function(models,options){options=options||{};if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId},{events:this})},parse:function(response){return response.events}});Api.Agreements.Events=Events;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FormData=Api.Agreements.Base.extend({allowedCRUD:["read"],dataType:"text/csv",url:function(){return this.agreement.url()+"/formData"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{formData:this})}}).extend(Api.Helpers.Streamable);Api.Agreements.FormData=FormData;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FormField=Backbone.Model.extend({defaults:{locations:[],name:"",alignment:"",assignee:"",backgroundColor:"",borderColor:"",borderStyle:"SOLID",borderWidth:-1,calculated:false,conditionalAction:{},contentType:"",defaultValue:"",displayFormat:"",displayFormatType:"DEFAULT",displayLabel:"",fontColor:"",fontName:"",fontSize:-1,hiddenOptions:[],hyperlink:{},inputType:"",masked:false,maskingText:"*",maxLength:-1,maxValue:-1,minLength:-1,minValue:-1,origin:"",radioCheckType:"CIRCLE",readOnly:false,required:true,tooltip:"",urlOverridable:false,validation:"",validationData:"",validationErrMsg:"",valueExpression:"",visible:true,visibleOptions:[]}});var FormFields=Api.Agreements.Base.extend({allowedCRUD:["read","create","update"],url:function(){return this.agreement.url()+"/formFields"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{formFields:this})},isNew:function(){return !!this.get("templateId")},toJSON:function(){return this.isNew()?Api._.pick(this.attributes,"templateId"):Api._.pick(this.attributes,"fields","completeAuthoring")},defaults:{fields:Backbone.Collection.extend({model:FormField}),templateId:""}});Api.Agreements.FormFields=FormFields;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Me=Api.Helpers.MyAgreementInfo.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}if(options.noCache){this.noCache=options.noCache}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{me:this})},url:function(){return this.agreement.url()+"/me"+(this.noCache?"?noCache=true":"")},setNoCache:function(){this.noCache=true}});Api.Agreements.Me=Me;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Agreement=Api.Agreements.Agreement;var Members=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.agreement.url()+"/members"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.workflowOrder=null;this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{members:this});this.share=options.share||new Api.Agreements.Members.Share(null,{members:this})},getWorkflow:function(){return this.workflowOrder=this.workflowOrder||Api.Helpers.Members.getWorkflow(this.get("participantSets"))},getMyself:function(options){var self=this,me;this.get("participantSets").find(function(pSet){me=pSet.get("memberInfos").findWhere({self:true});if(options&&options.isMyTurn){if(self.isMyTurn(pSet)){return me}else{return null}}return me});return me},getParticipantSetOfMyself:function(options){var myself=this.getMyself(options);if(!myself){return null}return this.get("participantSets").find(function(pSet){var me=pSet.get("memberInfos").findWhere({id:myself.get("id")});if(me){return pSet}return null})},isSender:function(){return this.get("senderInfo").get("self")},isCC:function(){return this.get("ccsInfo").some("self")},findParticipant:function(participantId,persona){var personas=Members.PERSONAS,participant=null;if(!persona){persona=personas.NON_ORIGINATOR_PARTICIPANTS}switch(persona){case personas.ORIGINATOR:var senderInfo=this.get("senderInfo");if(senderInfo.get("participantId")===participantId){participant=senderInfo}break;case personas.CC:var ccsInfo=this.get("ccsInfo");participant=ccsInfo.find(function(ccParticipant){return ccParticipant.get("participantId")===participantId});break;case personas.SHAREE:var sharesInfo=this.get("sharesInfo");participant=sharesInfo.find(function(shareeParticipant){return shareeParticipant.get("participantId")===participantId});break;case personas.NON_ORIGINATOR_PARTICIPANTS:var participantSets=this.get("participantSets"),matchedParticipantSet=participantSets.find(function(pSet){return pSet.get("memberInfos").findWhere({id:participantId})});participant=matchedParticipantSet&&matchedParticipantSet.get("memberInfos").findWhere({id:participantId});break;case personas.ANY:participant=this.findParticipant(participantId)||this.findParticipant(participantId,personas.ORIGINATOR)||this.findParticipant(participantId,personas.CC)||this.findParticipant(participantId,personas.SHAREE);break;default:break}return participant},findParticipantBySelf:function(isSelf,persona){return Api.Helpers.Members.findParticipantBySelf(this,isSelf,persona)},isMyTurn:function(participantSet){return Api._.contains(Members.WAITING_FOR_ME_STATUSES,participantSet.get("status"))},isMyTurnCompleted:function(participantSet){return Api._.contains(Members.PARTICIPANT_SET_FINISHED_STATUSES,participantSet.get("status"))},isSenderAlsoParticipant:function(participantSet){return Api._.contains(Members.SENDER_AS_PARTICIPANT_STATUSES,participantSet.get("status"))},getAgreementStatusFromNextParticipantSet:function(){var MWFMS=Members.WAITING_FOR_ME_STATUSES,AOFS=Agreement.OUT_FOR_STATUSES,myself=this.getMyself({isMyTurn:true}),senderIsMyself=myself&&this.get("senderInfo").get("email")===myself.get("email"),participantSetOfMyself=myself&&this.getParticipantSetOfMyself({isMyTurn:true}),senderIsNotMyself=myself&&this.get("senderInfo").get("email")!==myself.get("email"),selfParticipantSetStatus=myself&&participantSetOfMyself.get("status"),getAgreementStatusFromNextParticipantSet,nextParticipantSet,nextParticipantSetStatus;if((senderIsMyself&&!this.isSenderAlsoParticipant(participantSetOfMyself))||senderIsNotMyself){return selfParticipantSetStatus}nextParticipantSet=this.findNextParticipantSets();nextParticipantSetStatus=nextParticipantSet.length>0&&nextParticipantSet[0].get("status");switch(nextParticipantSetStatus){case MWFMS.WAITING_FOR_MY_APPROVAL:getAgreementStatusFromNextParticipantSet=AOFS.OUT_FOR_APPROVAL;break;case MWFMS.WAITING_FOR_MY_ACKNOWLEDGEMENT:getAgreementStatusFromNextParticipantSet=AOFS.OUT_FOR_DELIVERY;break;case MWFMS.WAITING_FOR_MY_ACCEPTANCE:getAgreementStatusFromNextParticipantSet=AOFS.OUT_FOR_ACCEPTANCE;break;case MWFMS.WAITING_FOR_MY_FORM_FILLING:getAgreementStatusFromNextParticipantSet=AOFS.OUT_FOR_FORM_FILLING;break;case MWFMS.WAITING_FOR_MY_SIGNATURE:getAgreementStatusFromNextParticipantSet=AOFS.OUT_FOR_SIGNATURE;break;case MWFMS.WAITING_FOR_MY_DELEGATION:default:getAgreementStatusFromNextParticipantSet=this.agreement.get("status");break}return getAgreementStatusFromNextParticipantSet},findNextParticipantSets:function(){var self=this;return this.get("participantSets").filter(function(pSet){return self.isMyTurn(pSet)})},hasNonSignerRoles:function(){return this.get("participantSets").some(function(pSet){return pSet.hasNonSignerRole()})},isOnlyISignWorkflow:function(){if(this.hasNonSignerRoles()){return false}var participantSets=this.get("participantSets"),signers=participantSets.where({role:"SIGNER"}),myself=this.getMyself();if(signers.length>1){return false}if(signers[0].get("memberInfos").length>1){return myself!==undefined}else{return signers[0].get("memberInfos").at(0).get("self")===true}},isNotarizationWorkflow:function(){var participantSets=this.get("participantSets"),signers=participantSets.where({role:"NOTARY_SIGNER"});return signers.length>0},isElectronicSealerWorkflow:function(){var participantSets=this.get("participantSets"),signers=participantSets.where({role:"ELECTRONIC_SEALER"});return signers.length>0},defaults:{senderInfo:Api.Helpers.Members.SenderInfo,participantSets:Backbone.Collection.extend({comparator:"order"}),nextParticipantSets:Backbone.Collection.extend(),ccsInfo:Backbone.Collection.extend({model:Api.Helpers.Members.CCParticipantInfo}),sharesInfo:Backbone.Collection.extend({model:Api.Helpers.Members.SharesInfo})}},{WORKFLOW:Api.Utils.makeObj(["HYBRID","SEQUENTIAL","PARALLEL"]),WAITING_FOR_ME_STATUSES:Api.Utils.makeObj(["WAITING_FOR_MY_APPROVAL","WAITING_FOR_MY_ACKNOWLEDGEMENT","WAITING_FOR_MY_ACCEPTANCE","WAITING_FOR_MY_FORM_FILLING","WAITING_FOR_MY_SIGNATURE","WAITING_FOR_MY_DELEGATION","WAITING_FOR_MY_VERIFICATION"]),SENDER_AS_PARTICIPANT_STATUSES:Api.Utils.makeObj(["NOT_YET_VISIBLE","WAITING_FOR_OTHERS"]),PARTICIPANT_SET_FINISHED_STATUSES:Api.Utils.makeObj(["CANCELLED","COMPLETED","EXPIRED"]),PERSONAS:Api.Utils.makeObj(["ANY","CC","NON_ORIGINATOR_PARTICIPANTS","ORIGINATOR","SHAREE"]),AUTHENTICATION_METHODS:Api.Utils.makeObj(["NONE","INHERITED_FROM_DOCUMENT","PASSWORD","WEB_IDENTITY","KBA","PHONE","ADOBE_SIGN","GOV_ID","DIG_ID"]),NOTARY_AUTHENTICATION_METHODS:Api.Utils.makeObj(["NONE","MULTI_FACTOR_AUTHENTICATION"]),STATUS:{}});Members.STATUS=Api._.extend({EXPIRED:"EXPIRED",REPLACED:"REPLACED"},Members.PARTICIPANT_SET_FINISHED_STATUSES,Members.WAITING_FOR_ME_STATUSES,Members.SENDER_AS_PARTICIPANT_STATUSES);Api.Agreements.Members=Members;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ParticipantSecurityOption=Backbone.Model.extend({validate:function(){var errors=[],phoneInfo=this.get("phoneInfo");if(phoneInfo&&!phoneInfo.isEmpty()){var validationErrors=phoneInfo.validate();if(validationErrors&&validationErrors[0].key==="PhoneInfo:phone:required"){validationErrors[0].message=Api.i18n("esign_delegate_invalid_phone_errorMsg")}errors=errors.concat(validationErrors)}errors=_.compact(errors);return errors.length?errors:undefined},defaults:{phoneInfo:Api.Agreements.Agreement.PhoneInfo}});var DelegatedParticipantInfo=Backbone.Model.extend({validate:function(){var errors=[],email=this.get("email"),fullName=this.get("fullName"),securityOption=this.get("securityOption");if(!Api.Utils.isValidEmail(email)){errors.push({key:"esign:delegate:invalidEmail",message:Api.i18n("esign_delegate_invalid_email_errorMsg")})}if(Api.Utils.isBlank(fullName)){errors.push({key:"esign:delegateName:isEmpty",message:Api.i18n("esign_delegate_recipient_name_empty_errorMsg")})}else{if(Api.Utils.isRecipientNameTooLong(fullName)){errors.push({key:"esign:delegateName:tooLong",message:Api.i18n("esign_delegate_recipient_name_too_long_errorMsg")})}}errors=errors.concat(securityOption.validate());errors=_.compact(errors);return errors.length>0?errors:undefined},defaults:{email:"",fullName:"",securityOption:ParticipantSecurityOption}});var DelegatedParticipantSets=Api.Agreements.Base.extend({allowedCRUD:["create"],url:function(){return this.participantSet.url()+"/delegatedParticipantSets"},isNew:function(){return true},initialize:function(attrs,options){attrs=attrs||{};options=options||{};if(!attrs.id){throw new Error("A participant set ID is required.")}if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId});this.participantSet=options.participantSet||new Api.Agreements.Members.ParticipantSet({id:attrs.id},{agreement:this.agreement})},validate:function(){var errors=[],memberInfos=this.get("memberInfos"),privateMessage=this.get("privateMessage");if(memberInfos.size()<1){errors.push({key:"esign:delegate:invalidEmail",message:Api.i18n("esign_delegate_invalid_email_errorMsg")})}else{if(memberInfos.size()>1){errors.push({key:"esign:delegate:multipleParticipants",message:Api.i18n("esign_delegate_multiple_participants_errorMsg")})}else{errors=errors.concat(memberInfos.validate())}}if(Api.Utils.isBlank(privateMessage)){errors.push({key:"esign:delegate:invalidMessage",message:Api.i18n("esign_delegate_blank_message_errorMsg")})}errors=_.compact(errors);return errors.length>0?errors:undefined},defaults:{memberInfos:Backbone.Collection.extend({model:DelegatedParticipantInfo}),privateMessage:""}});Api.Agreements.Members.DelegatedParticipantSets=DelegatedParticipantSets;Api.Agreements.Members.DelegatedParticipantSets.DelegatedParticipantInfo=DelegatedParticipantInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ParticipantSet=Api.Agreements.Base.extend({allowedCRUD:["read","update"],urlRoot:function(){return this.members.url()+"/participantSets"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!options.agreementId&&!options._parent){throw new Error("An agreement is required.")}this.agreement=options.agreement||(options.agreementId&&new Api.Agreements({id:options.agreementId}))||(options._parent&&options._parent.agreement);this.members=this.agreement.members},getActiveMembers:function(){return Api.Helpers.Members.getActiveMembers(this)},hasNonSignerRole:function(){var ROLE=Api.Helpers.Members.ROLE;return[ROLE.ACCEPTOR,ROLE.APPROVER,ROLE.CERTIFIED_RECIPIENT,ROLE.FORM_FILLER,ROLE.DELEGATE_TO_SIGNER,ROLE.DELEGATE_TO_ACCEPTOR,ROLE.DELEGATE_TO_APPROVER,ROLE.DELEGATE_TO_CERTIFIED_RECIPIENT,ROLE.DELEGATE_TO_FORM_FILLER,ROLE.NOTARY_SIGNER,ROLE.ELECTRONIC_SEALER].indexOf(this.get("role"))!==-1},defaults:{memberInfos:Backbone.Collection.extend({model:Api.Helpers.Members.DetailedParticipantInfo}),order:0,role:"",id:"",name:"",privateMessage:"",status:""}});Api.Agreements.Members.ParticipantSet=ParticipantSet;Api.Agreements.Members.prototype.defaults.participantSets.prototype.model=ParticipantSet;Api.Agreements.Members.prototype.defaults.nextParticipantSets.prototype.model=ParticipantSet;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AdobeSign=Api.Agreements.Members.Auth.Base.extend({allowedCRUD:["create"],url:function(){return this.urlRoot()+"/adobeSign/verify"},validate:function(attrs,options){var errors=this._super.apply(this,arguments);if(errors){return errors}},defaults:{adobeIdToken:"",authenticationTriggerInfo:Api.Agreements.Members.Auth.AuthenticationTriggerInfo}});Api.Agreements.Members.Auth.AdobeSign=AdobeSign;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PARTICIPATION_AUTH_TOKEN_HEADER_NAME="x-participation-auth-token";var Auth=Api.Agreements.Members.Participant.Base.extend({urlRoot:function(){return this.participant.url()+"/auth"},initialize:function(attrs,options){this._super.apply(this,arguments);var opts={participant:options.participant};this.adobeSign=new Api.Agreements.Members.Auth.AdobeSign(null,opts);this.govId=new Api.Agreements.Members.Auth.GovId(null,opts);this.kba=new Api.Agreements.Members.Auth.KBA(null,opts);this.password=new Api.Agreements.Members.Auth.Password(null,opts);this.phone=new Api.Agreements.Members.Auth.Phone(null,opts)},defaults:{participationAuthToken:""}});Auth.Base=Api.Agreements.Members.Participant.Base.extend({urlRoot:Auth.prototype.urlRoot,validate:function(attrs,options){if(!options.headers||!options.headers[PARTICIPATION_AUTH_TOKEN_HEADER_NAME]){return"Missing header "+PARTICIPATION_AUTH_TOKEN_HEADER_NAME+": "+this.url()}},save:function(attrs,options){options=Api.Utils.defaults(options||{},{headers:{"x-participation-auth-token":this.participant.auth.get("participationAuthToken")}});return this._super(attrs,options)}});Api.Agreements.Members.Auth=Auth;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AuthenticationTriggerInfo=Backbone.Model.extend({isEmpty:function(){return _.every(this.attributes,_.isEmpty)},defaults:{eventType:"",eventObjectIds:[]}},{EVENT_TYPE:Api.Utils.makeObj(["FIELD_CLICK","BEFORE_PAGE_LOAD"])});Api.Agreements.Members.Auth.AuthenticationTriggerInfo=AuthenticationTriggerInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var GovId=Api.Agreements.Members.Auth.Base.extend({url:function(){return this.urlRoot()+"/govid"},initialize:function(attrs,options){this._super.apply(this,arguments);options.govId=this;this.initModel=new Init(null,options);this.verifyModel=new Verify(null,options)},init:function(attrs){return this.initModel.save(attrs)},verify:function(attrs){return this.verifyModel.save(attrs)},defaults:{transactionCode:""}},{SIMULATOR_MODE:Api.Utils.makeObj(["NONE","VALID_TOKEN","INVALID_TOKEN","COMMUNICATIONS_ERROR","ATTEMPTS_EXCEEDED","PRE_VERIFICATION","SMS_SENT","IN_PROGRESS","FAILED","VALID_TOKEN_EXPIRED"]),STATUS:Api.Utils.makeObj(["PRE_VERIFICATION","SMS_SENT","INITIALIZED","COMPLETED","FAILED","COMPLETED_EXPIRED"])});GovId.Base=Api.Agreements.Members.Auth.Base.extend({allowedCRUD:["create"],initialize:function(attrs,options){this._super.apply(this,arguments);if(!options.govId){throw new Error("A GovId model is required.")}this.govId=options.govId}});var Init=GovId.Base.extend({url:function(){return this.govId.url()+"/init"}});var Verify=GovId.Base.extend({url:function(){return this.govId.url()+"/verify"},toJSON:function(){return _.pick(this.attributes,"transactionCode","simulatorMode")},defaults:{transactionCode:"",status:""}});Api.Agreements.Members.Auth.GovId=GovId;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var KBA=Api.Agreements.Members.Auth.Base.extend({url:function(){return this.urlRoot()+"/kba"},initialize:function(attrs,options){this._super.apply(this,arguments);options.kba=this;this.initModel=new Init(null,options);this.verifyModel=new Verify(null,options)},init:function(attrs){return this.initModel.save(attrs)},verify:function(attrs){return this.verifyModel.save(attrs)}},{SIMULATOR_MODE:Api.Utils.makeObj(["PASSED","QUESTIONS","INDIVIDUAL_NOT_FOUND","FAILED_IAUTH_QUESTIONS","COMMUNICATIONS_ERROR"])});KBA.Base=Api.Agreements.Members.Auth.Base.extend({allowedCRUD:["create"],initialize:function(attrs,options){this._super.apply(this,arguments);if(!options.kba){throw new Error("A KBA model is required.")}this.kba=options.kba}});var Address={city:"",state:"",street:"",zip:"",country:""};var PersonalInfo={firstName:"",lastName:"",ssn:"",address:Address};var KBAQuestionOption=Backbone.Model.extend({defaults:{optionId:-1,optionText:""}});var KBAQuestion=Backbone.Model.extend({defaults:{help:"",multipleAnswers:false,questionId:-1,questionText:"",options:Backbone.Collection.extend({model:KBAQuestionOption})}});var KBAQuestionSet=Backbone.Model.extend({defaults:{questionSetId:-1,questions:Backbone.Collection.extend({model:KBAQuestion})}});var Init=KBA.Base.extend({url:function(){return this.kba.url()+"/init"},toJSON:function(){return _.pick(this.attributes,"personInfo","simulatorMode")},defaults:{personInfo:PersonalInfo,questionSet:KBAQuestionSet}});var KBAAnswer=Backbone.Model.extend({defaults:{answerIds:[],questionId:-1}});var KBAAnswerSet=Backbone.Model.extend({defaults:{questionSetId:-1,answers:Backbone.Collection.extend({model:KBAAnswer})}});var Verify=KBA.Base.extend({url:function(){return this.kba.url()+"/verify"},toJSON:function(){return _.pick(this.attributes,"answerSet","simulatorMode")},defaults:{answerSet:KBAAnswerSet,questionSet:KBAQuestionSet}});Api.Agreements.Members.Auth.KBA=KBA;Api.Agreements.Members.Auth.KBA.KBAAnswerSet=KBAAnswerSet;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Password=Api.Agreements.Members.Auth.Base.extend({allowedCRUD:["create"],url:function(){return this.urlRoot()+"/password/verify"},validate:function(attrs,options){var errors=this._super.apply(this,arguments);if(errors){return errors}},defaults:{password:""}});Api.Agreements.Members.Auth.Password=Password;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Phone=Api.Agreements.Members.Auth.Base.extend({url:function(){return this.urlRoot()+"/phone"},initialize:function(attrs,options){this._super.apply(this,arguments);options.phone=this;this.initModel=new Init(null,options);this.verifyModel=new Verify(null,options)},init:function(attrs){return this.initModel.save(attrs)},verify:function(attrs){return this.verifyModel.save(attrs)},defaults:{authenticationTriggerInfo:Api.Agreements.Members.Auth.AuthenticationTriggerInfo}},{SIMULATOR_MODE:Api.Utils.makeObj(["NONE","VALID_TOKEN","INVALID_TOKEN","TOKEN_EXPIRED","ATTEMPTS_EXCEEDED","SERVICE_DOWN","VALID_PHONE","INVALID_PHONE"])});Phone.Base=Api.Agreements.Members.Auth.Base.extend({allowedCRUD:["create"],initialize:function(attrs,options){this._super.apply(this,arguments);if(!options.phone){throw new Error("A Phone model is required.")}this.phone=options.phone},save:function(attrs,options){var triggerInfo=this.phone.get("authenticationTriggerInfo");if(triggerInfo&&!triggerInfo.isEmpty()){this.set("authenticationTriggerInfo",triggerInfo,{silent:true})}return this._super(attrs,options)}});var Init=Phone.Base.extend({url:function(){return this.phone.url()+"/init"},defaults:{useVoice:false}});var Verify=Phone.Base.extend({url:function(){return this.phone.url()+"/verify"},defaults:{otpValue:""}});Api.Agreements.Members.Auth.Phone=Phone;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Participant=Api.Agreements.Base.extend({urlRoot:function(){return this.participantSet.url()+"/participants"},initialize:function(attrs,options){attrs=attrs||{};options=options||{};if(!attrs.id){throw new Error("A participant ID is required.")}if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}if(!options.participantSet&&!options.participantSetId){throw new Error("A participantSet is required.")}var opts={participant:this};this.agreement=options.agreement||new Api.Agreements({id:options.agreementId});this.participantSet=options.participantSet||new Api.Agreements.Members.ParticipantSet({id:options.participantSetId},{agreement:this.agreement});this.participationAuthToken=new Api.Agreements.Members.ParticipationAuthToken(null,opts);this.remoteSign=new Api.Agreements.Members.RemoteSign(null,opts);this.securityOptions=new Api.Agreements.Members.SecurityOptions(attrs.securityOption,{participant:this,collection:options.collection});this.status=new Api.Agreements.Members.Status(null,opts);this.signingTokens=new Api.Agreements.Members.SigningTokens(null,opts);this.singpassSign=new Api.Agreements.Members.SingPassSign(null,opts);this.signingInfo=new Api.Agreements.Members.SigningInfo(null,opts);this.auth=new Api.Agreements.Members.Auth(null,opts)}});Participant.Base=Api.Agreements.Base.extend({initialize:function(attrs,options){options=options||{};if(!options.participant){throw new Error("Missing parent participant.")}this.participant=options.participant;this.agreement=this.participant.agreement;this.participantSet=this.participant.participantSet}});Api.Agreements.Members.Participant=Participant;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ParticipationAuthToken=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["create"],url:function(){return this.participant.url()+"/participationAuthToken"},toJSON:function(){return{}},parse:function(response){if(response.participationAuthToken){this.participant.auth.set("participationAuthToken",response.participationAuthToken)}return response},defaults:{participationAuthToken:""}});Api.Agreements.Members.ParticipationAuthToken=ParticipationAuthToken;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var RemoteSign=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["update"],url:function(){return this.participant.url()+"/remoteSign"},isNew:function(){return false},defaults:{providerId:"",providerName:"",digitalSigningReason:"",signingDocumentToken:"",sourceDocumentId:"",credentialId:"",credentialInfo:{credentialAuthToken:"",pin:"",otp:""},reauthCallParams:{code:"",grantType:""}}});Api.Agreements.Members.RemoteSign=RemoteSign;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SecurityOptions=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["read","update"],url:function(){return this.participant.url()+"/securityOptions"},isNew:function(){return false},defaults:{authenticationMethod:"",password:"",phoneInfo:{},nameInfo:{},digAuthInfo:{},notaryAuthentication:""}});Api.Agreements.Members.SecurityOptions=SecurityOptions;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SigningInfo=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["read"],url:function(){return this.participant.url()+"/signingInfo"},defaults:{agreementInfo:{},appInfo:{},postSignInfo:{},signaturePanelInfo:{},signingConfigurations:[],signingReasonInfo:{},touInfo:{},writtenSignatureInfo:{},declineInfo:{},digitalSignatureInfo:{},isSignerNameEditable:false,liquidModeInfo:{},paymentsIntegrationInfo:{}}});Api.Agreements.Members.SigningInfo=SigningInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SigningTokens=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["read","create","update"],urlRoot:function(){return this.participant.url()+"/signingTokens"},idAttribute:"signingTokenId",toJSON:function(options){options=options||{};if(options.syncMethod==="create"){return this.pick("securityInfo","signingCapabilities")}else{if(options.syncMethod==="update"){return this.pick("latestCombinedDocumentUrl","userConsent")}}return this._super()},parse:function(response,option){if(response&&response.token){response[this.idAttribute]=response.token;delete response.token}return response},defaults:{securityInfo:{authenticationMethod:"NONE"},signingCapabilities:[],latestCombinedDocumentUrl:"",userConsent:{}}});Api.Agreements.Members.SigningTokens=SigningTokens;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SingPassSign=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["update"],url:function(){return this.participant.url()+"/initiateSingPass"},isNew:function(){return false},defaults:{digitalSigningReason:"",latestDocumentId:"",signRef:"",signerName:""}});Api.Agreements.Members.SingPassSign=SingPassSign;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var COMPLETED_STATUSES=Api._.values(Api.Agreements.Agreement.COMPLETED_STATUSES);var SIGNING_TOKEN_HEADER_NAME="x-signing-token";var Status=Api.Agreements.Members.Participant.Base.extend({allowedCRUD:["update"],url:function(){return this.participant.url()+"/status"},isNew:function(){return false},validate:function(attrs,options){if(!Api._(COMPLETED_STATUSES).contains(attrs.status)){return"Attribute status is not one of the following: ["+COMPLETED_STATUSES.join(", ")+"]"}if(!options.headers||!options.headers[SIGNING_TOKEN_HEADER_NAME]){return"Missing x-signing-token in header."}if(!attrs.deviceInfo.applicationDescription){return"deviceInfo.applicationDescription is required."}if(!attrs.deviceInfo.deviceDescription){return"deviceInfo.deviceDescription is required."}var location=attrs.deviceInfo.location;if(!location||!location.latitude||!location.longitude){return"deviceInfo.location is missing or incomplete."}},setSigningToken:function(tokenId){this.signingToken=tokenId},save:function(attrs,options){options=Api.Utils.defaults(options||{},{headers:{"x-signing-token":this.signingToken||""}});return this._super(attrs,options)},defaults:{deviceInfo:{applicationDescription:"",deviceDescription:"",location:{latitude:-360,longitude:-360},deviceTime:null},status:"",participantFullName:"",participantInitials:"",signatureFields:null,uploadSignedDocumentInfo:null,authenticationTriggerInfos:Backbone.Collection.extend({model:Api.Agreements.Members.Auth.AuthenticationTriggerInfo})}});Api.Agreements.Members.Status=Status;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Share=Api.Helpers.Members.Share.extend({initialize:function(models,options){options=options||{};this.members=options.members||new Api.Agreements.Members({id:options.agreementId},{agreement:options.agreement});this.agreement=this.members.agreement}});Api.Agreements.Members.Share=Share;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Note=Api.Agreements.Base.extend({allowedCRUD:["read","update"],initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{note:this})},url:function(){return this.agreement.url()+"/me/note"},defaults:{note:""}});Api.Agreements.Note=Note;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Reminder=Api.Helpers.ReminderBase.extend({allowedCRUD:["read","create","update"],urlRoot:function(){return this.agreement.url()+"/reminders"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.agreement&&!options.agreementId&&!(options.collection&&options.collection.agreement)){throw new Error("An agreement is required.")}if(attrs&&attrs.id&&!attrs.reminderId){this.set("reminderId",attrs.id,{silent:true})}this.agreement=options.agreement||(options.agreementId&&new Api.Agreements({id:options.agreementId}))||options.collection.agreement}});Api.Agreements.Reminders.Reminder=Reminder;Api.Agreements.Reminders.prototype.model=Reminder;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Reminders=Api.Helpers.Reminders.extend({url:function(){return this.agreement.url()+"/reminders"},model:null,initialize:function(models,options){options=options||{};if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId},{reminders:this})}});Api.Agreements.Reminders=Reminders;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Restore=Api.Agreements.Base.extend({allowedCRUD:["create"],url:function(){return this.agreement.url()+"/restore"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};attrs=attrs||{};if(!options.agreement&&!options.agreementId&&!attrs.id){throw new Error("An agreement is required")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId||attrs.id})},isNew:function(){return true}});Api.Agreements.Restore=Restore;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Settings=Api.Agreements.Base.extend({allowedCRUD:["read"],url:function(){return this.agreement.url()+"/settings"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("A agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{settings:this})},defaults:{canEditAgreementSettings:true,canEditElectronicSeals:true,canEditFiles:true}});Api.Agreements.Settings=Settings;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SignerIdentityReport=Api.Agreements.Base.extend({allowedCRUD:["create"],dataType:"application/pdf",url:function(){return this.agreement.url()+"/signerIdentityReport"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};attrs=attrs||{};if(!options.agreement&&!options.agreementId&&!attrs.id){throw new Error("An agreement is required")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId||attrs.id},{signerIdentityReport:this})},isNew:function(){return true},validate:function(attrs,opts){if(opts.xhr){return}if(attrs.securityOption&&"openPassword" in attrs.securityOption){var passw=attrs.securityOption.openPassword,password=new Api.Helpers.Password({password:passw,confirmPassword:passw,passwordStrength:this.get("passwordStrength")});return password.validate()}return},toJSON:function(){return Api._.pick(this.attributes,"securityOption")}}).extend(Api.Helpers.Streamable);Api.Agreements.SignerIdentityReport=SignerIdentityReport;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SigningUrl=Backbone.Model.extend({defaults:{email:"",esignUrl:""}});var SigningUrlSetInfo=Api.Agreements.Base.extend({defaults:{signingUrls:Backbone.Collection.extend({model:SigningUrl}),signingUrlSetName:""}});var SigningUrls=Backbone.Collection.extend({allowedCRUD:["read"],model:SigningUrlSetInfo,url:function(){return this.agreement.url()+"/signingUrls"},initialize:function(models,options){options=options||{};if(!options.agreement&&!options.agreementId){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:options.agreementId},{signingUrls:this})},parse:function(response){return response.signingUrlSetInfos},getEsignUrlByEmail:function(email){var signingUrl=null;this.find(function(model){signingUrl=model.get("signingUrls").findWhere({email:email});return signingUrl});return signingUrl&&signingUrl.get("esignUrl")}});Api.Agreements.SigningUrls=SigningUrls;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AgreementCancellationInfo={comment:"",notifyOthers:false};var AgreementRestartInfo={message:""};var State=Api.Agreements.Base.extend({allowedCRUD:["update"],url:function(){return this.agreement.url()+"/state"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id});this.eTagParent=this.agreement},defaults:{state:"",agreementCancellationInfo:AgreementCancellationInfo,agreementRestartInfo:AgreementRestartInfo}});Api.Agreements.State=State;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Views,VIEW_NAMES;Views=Api.Agreements.Base.extend({idAttribute:"agreementId",allowedCRUD:["create"],url:function(){return this.agreement.url()+"/views"},initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.list=new Api.Helpers.Views();this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{views:this})},validate:function(attrs){if(!attrs.name){return"Attribute name is required"}VIEW_NAMES=VIEW_NAMES||Api._.keys(Api.Agreements.Views.VIEW_NAME);if(attrs.name&&!Api._.contains(VIEW_NAMES,attrs.name)){return"Attribute name is not one of the following: ["+VIEW_NAMES.join(", ")+"]"}},getNextURL:function(){return this.list.getNextURL()},parse:function(response){this.list.reset(response.agreementViewList);return null},defaults:{name:"",commonViewConfiguration:{autoLoginUser:false,locale:"",noChrome:false},composeViewConfiguration:{isPreviewSelected:false}}},{VIEW_NAME:Api.Utils.makeObj(["COMPOSE","PREFILL","AUTHORING","DOCUMENT","MANAGE","POST_CREATE","SIGNING","SEND_PROGRESS","PUBLIC_LINK","FILL_SIGN","POST_FILL_SIGN","ALL","MODIFY"])});Api.Agreements.Views=Views;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Visibility=Api.Agreements.Base.extend({allowedCRUD:["update"],initialize:function(attrs,options){options=options||{};if(!options.agreement&&!(attrs&&attrs.id)){throw new Error("An agreement is required.")}this.agreement=options.agreement||new Api.Agreements({id:attrs.id},{visibility:this});this.eTagParent=this.agreement},url:function(){return this.agreement.url()+"/me/visibility"},show:function(){this.set("visibility","SHOW");return this},hide:function(){this.set("visibility","HIDE");return this},defaults:{visibility:""}});Api.Agreements.Visibility=Visibility;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var BaseURIs=Backbone.Model.extend({urlRoot:Api.getServiceUri("baseUris"),allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};this._super.apply(this,arguments)},defaults:{apiAccessPoint:"",webAccessPoint:""}});Api.BaseURIs=BaseURIs;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ElectronicSeal=Api.ElectronicSeals.Base.extend({allowedCRUD:["read"],defaults:{id:"",name:"",status:""}},{STATUS:Api.Utils.makeObj(["ACTIVE","INACTIVE"])});Api.ElectronicSeals.ElectronicSeal=ElectronicSeal;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ElectronicSeals=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.ElectronicSeals.ElectronicSeal}else{ModelClass=Api.ElectronicSeals.ElectronicSealsList}return new ModelClass(attrs,options)};ElectronicSeals.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("electronicSeals"),allowedCRUD:[]});Api.ElectronicSeals=ElectronicSeals;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ElectronicSealInfo=Backbone.Model.extend({defaults:{id:"",name:"",status:""}});var ElectronicSealsList=Backbone.Collection.extend({allowedCRUD:["read"],model:ElectronicSealInfo,url:Api.ElectronicSeals.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.electronicSealInfoList}});Api.ElectronicSeals.ElectronicSealsList=ElectronicSealsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Gateway.AddressBook={};return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Contacts=Backbone.Model.extend({allowedCRUD:["read","delete"],urlRoot:Api.getMicroserviceUri("addressbook/contacts")});Api.Gateway.AddressBook.Contacts=Contacts;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ContactsSearch=Backbone.Model.extend({allowedCRUD:["create"],urlRoot:Api.getMicroserviceUri("addressbook/contacts/search")});Api.Gateway.AddressBook.ContactsSearch=ContactsSearch;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Gateway.AdvancedWorkflows={};return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PowerAutomateListItem=Backbone.Model.extend({defaults:{id:"",created:"",modified:"",displayName:"",description:"",scope:"",scopeId:"",status:"",type:""}},{SCOPE:Api.Utils.makeObj(["ME","SHARED"]),STATUS:Api.Utils.makeObj(["ACTIVE","DRAFT","SUSPENDED"]),TYPE:Api.Utils.makeObj(["INSTANT","AUTOMATED","SCHEDULED"])});Api.Gateway.AdvancedWorkflows.PowerAutomateListItem=PowerAutomateListItem;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var PowerAutomateList=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Gateway.AdvancedWorkflows.PowerAutomateListItem,url:function(){return Api.getMicroserviceUri("advancedworkflows/powerautomate")},initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.userPowerAutomateWorkflowList}});Api.Gateway.AdvancedWorkflows.PowerAutomateList=PowerAutomateList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Gateway.AgreementMetadata={};return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Agreements=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.Gateway.AgreementMetadata.Agreements.Agreement}else{if(attrs&&attrs.ids){ModelClass=Api.Gateway.AgreementMetadata.Agreements.AgreementsList}}return new ModelClass(attrs,options)};Agreements.Base=Backbone.Model.extend({urlRoot:Api.getMicroserviceUri("agreementmetadata/agreements"),allowedCRUD:[]});Api.Gateway.AgreementMetadata.Agreements=Agreements;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AgreementsList=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Gateway.AgreementMetadata.Agreements.Agreement,url:Api.Gateway.AgreementMetadata.Agreements.Base.prototype.urlRoot});Api.Gateway.AgreementMetadata.Agreements.AgreementsList=AgreementsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Agreement=Api.Gateway.AgreementMetadata.Agreements.Base.extend({allowedCRUD:["read","update","delete"],initialize:function(attrs,options){options=options||{};this.expirations=options.expirations||new Api.Gateway.AgreementMetadata.Agreements.Expirations({agreement:this})},parse:function(response){if(Array.isArray(response)&&response.length!==0){return response[0]}return null},defaults:{agreementId:"",originatorId:"",participantsInfos:[]}});Api.Gateway.AgreementMetadata.Agreements.Agreement=Agreement;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){ExpirationDate=Backbone.Model.extend({defaults:{date:"",methodFound:""}});var Expirations=Backbone.Model.extend({allowedCRUD:["read","update"],url:function(){return this.agreement.url()+"/dates/expirations"},initialize:function(options){options=options||{};if(!options.agreement&&!options.id){throw new Error("An agreement id is required.")}this.values=new Backbone.Collection(null,{model:ExpirationDate});this.agreement=options.agreement||new Api.Gateway.AgreementMetadata.Agreements({id:options.id},{expirations:this})},parse:function(response){if(Array.isArray(response)&&response.length!==0){this.values.reset(response[0].values);return{userConfirmed:response[0].userConfirmed}}return null},toJSON:function(){var data=this._super();return Api._.extend(data,{agreementId:this.id,values:this.values.toJSON()})}});Api.Gateway.AgreementMetadata.Agreements.Expirations=Expirations;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Gateway.BackgroundRemoval={};return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SignatureImage=Backbone.Model.extend({allowedCRUD:["create"],urlRoot:Api.getMicroserviceUri("backgroundremoval/signatureImage"),save:function(attributes,options){options=Api._.extend(options||{},{contentType:false,processData:false,dataType:"text"});options.headers=Api._.extend(options.headers||{},{Accept:"image/*;encoding=base64"});return this._super(attributes,options)}});Api.Gateway.BackgroundRemoval.SignatureImage=SignatureImage;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FieldRecognition,FieldCandidate;FieldCandidate=Backbone.Model.extend({defaults:{contentType:"DATA",fontName:"",inputType:"TEXT_FIELD",locations:[],maxLength:-1,radioCheckType:"CIRCLE"}});FieldRecognition=Backbone.Model.extend({allowedCRUD:["read"],urlTmpl:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+=""+((__t=(root))==null?"":__t)+"/"+((__t=(type))==null?"":__t)+"/"+((__t=(id))==null?"":__t)+""}return __p},urlRoot:Api.getMicroserviceUri("fieldrecognition"),url:function(){return this.urlTmpl({root:Api._.result(this,"urlRoot"),type:this.get("resourceType"),id:this.id})},initialize:function(){this.candidates=new Backbone.Collection(null,{model:FieldCandidate})},parse:function(response){this.candidates.reset(response.fieldCandidates);return Api._.omit(response,"fieldCandidates")},getCandidatesOnPage:function(pageNumber){if(!this.candidatesByPage){this.candidatesByPage=this.candidates.groupBy(function(model){return model.get("locations")[0].pageNumber})}return this.candidatesByPage[pageNumber]||[]},defaults:{resourceType:"agreement"}});Api.Gateway.FieldRecognition=FieldRecognition;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){Api.Gateway={};return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var fn=Backbone._.once(function(Api){var MobileCaptureManager={_POLLING_PERIOD:2000,stop:function(mobileCaptureModel){if(mobileCaptureModel&&mobileCaptureModel.id&&!mobileCaptureModel.cancelled){mobileCaptureModel.cancelled=true;mobileCaptureModel.destroy({overrideServerErrors:true,error:function(model,response,options){options.errorHandled=true}})}},_check:function(mobileCaptureModel){if(!mobileCaptureModel||!mobileCaptureModel.id||mobileCaptureModel.cancelled){return}if(this._apiContext){this._apiContext.workflowId=mobileCaptureModel.id}mobileCaptureModel.fetch({overrideServerErrors:true,success:Api._.bind(function(model,response){if(response.signatureData){mobileCaptureModel.trigger("captured",response,this._apiContext)}else{Api._.delay(Api._.bind(this._check,this),this._POLLING_PERIOD,mobileCaptureModel)}},this),error:Api._.bind(function(model,response,options){options.errorHandled=true;var errInfo=this._getErrorMessage(response);mobileCaptureModel.trigger("error",errInfo,this._apiContext,options)},this)})},_cleanPhoneNumber:function(phoneNumber){return phoneNumber.replace(/[^\d]+/g,"")},start:function(intent,workflowOptions){var mobileCaptureModel=new Api.Gateway.MobileCapture();if(arguments.length>2){workflowOptions={tabs:arguments[1],messageType:"sms",address:arguments[2],signatureImageEndpoint:arguments[3]?"ms":"mono",locale:arguments[4]}}this._apiContext={intent:intent};if(intent==="initials"){workflowOptions.panelType="i"}else{if(intent==="stamp"){workflowOptions.panelType="st"}else{workflowOptions.panelType="s"}}if(workflowOptions.messageType==="sms"){this._apiContext.phoneNumber=workflowOptions.address=this._cleanPhoneNumber(workflowOptions.address)}mobileCaptureModel.save(null,{overrideServerErrors:true,data:JSON.stringify(workflowOptions),contentType:"application/json",success:Api._.bind(function(model,response){model.set("id",response.workflowId);mobileCaptureModel.trigger("waiting",response,intent);Api._.delay(Api._.bind(this._check,this),this._POLLING_PERIOD,mobileCaptureModel)},this),error:Api._.bind(function(model,response,options){options.errorHandled=true;var errInfo=this._getErrorMessage(response);mobileCaptureModel.trigger("error",errInfo,this._apiContext,options)},this)});return mobileCaptureModel},_getErrorMessage:function(errResponse){var errCode=errResponse&&errResponse.responseJSON?errResponse.responseJSON.code:null;switch(errCode){case"INVALID_MOBILE_NUMBER":return{title:"Invalid Mobile Number",errCode:"INVALID_MOBILE_NUMBER",msg:"The number entered might not be a mobile number. Please check the number and try again."};case"FAILED_SEND_SMS":return{title:"Failed to Send Text",errCode:"FAILED_SEND_SMS",msg:"An error occurred when we tried to send the text message. Please try again later."};default:return{title:"Server Error",errCode:"SERVER_ERROR",msg:"An error occurred while creating your signature via your mobile device. Please try again later."}}}};Api.Gateway.MobileCaptureManager=MobileCaptureManager;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MobileCapture=Backbone.Model.extend({urlRoot:Api.getMicroserviceUri("mobilesigcapture"),defaults:{id:null,workflowId:null,createdTime:0,signatureData:""}});Api.Gateway.MobileCapture=MobileCapture;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var _=Api._,Search,SearchRecord,Participation;Participation=Backbone.Model.extend({defaults:{address:"",label:"",organization:"",roles:[],set_names:[],state:"",title:""}});SearchRecord=Backbone.Model.extend({defaults:{active_participant:"",active_participant_org:"",agreement_id:"",agreement_parent_id:"",agreement_type:"",create_date:"",expire_date:"",group_id:"",modify_date:"",name:"",organization_id:"",participant_list:Backbone.Collection.extend({model:Participation}),participation_completion_count:0,participation_completion_percentage:0,participation_count:1,participation_set_names:[],reference_url:"",roles:[],sender:"",sender_organization:"",sharer:"",sharer_organization:"",state:"",user_id:"",user_name:"",user_organization:"",workflow_id:""}});Search=Backbone.Model.extend({allowedCRUD:["create"],urlRoot:Api.getMicroserviceUri("search"),initialize:function(){this.results=new Backbone.Collection(null,{model:SearchRecord});this.facets={}},parse:function(response){var resultSet=response.result_sets[0];this.results.reset(resultSet.items);this.facets=_.reduce(resultSet.facets,function(facets,facet){var values=_(facet.facet_values);if(!values.isEmpty()){facets[facet.facet_field]=values.reduce(function(values,facet_value){values[facet_value.value]=facet_value.count;return values},{})}return facets},{});return null},getAggregateStateFacetCount:function(states){var facetData=this.facets.state||{};return states.reduce(function(count,state){return count+(facetData[state]||0)},0)},defaults:{fetch_facets:false,limit:100,locale:"en_US",scope:"sign",sort_order:"asc",sort_orderby:"modify_date",start_index:0}},{SORT_ORDER:{ASC:"asc",DESC:"desc"},STATE:Api.Utils.makeObj(["ACCEPTED","APPROVED","ARCHIVED","DELIVERED","DRAFT","EXPIRED","FORM","FORM_FILLED","ACCEPTED_BEFORE_NOTARIZATION","OUT_FOR_ACCEPTANCE","OUT_FOR_APPROVAL","OUT_FOR_DELIVERY","OUT_FOR_FORM_FILLING","OUT_FOR_SIGNATURE","PARTIAL","RECALLED","SIGNED","UNKNOWN","WAITING_FOR_AUTHORING","WAITING_FOR_MY_ACCEPTANCE","WAITING_FOR_MY_ACKNOWLEDGEMENT","WAITING_FOR_MY_APPROVAL","WAITING_FOR_MY_DELEGATION","WAITING_FOR_MY_FORM_FILLING","WAITING_FOR_MY_SIGNATURE","WAITING_FOR_PREFILL","WAITING_FOR_NOTARIZATION","WIDGET"])});Api.Gateway.Search=Search;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Group=Api.Groups.Base.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};this.users=options.users||new Api.Groups.Users(null,{group:this})},defaults:{name:"",created:""}});Api.Groups.Group=Group;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var GroupUserInfo=Backbone.Model.extend({defaults:{email:"",id:"",isGroupAdmin:false,company:"",firstName:"",lastName:""}});var Users=Backbone.Collection.extend({allowedCRUD:["read"],model:GroupUserInfo,url:function(){return this.group.url()+"/users"},initialize:function(models,options){this.page={};options=options||{};if(!options.group&&!options.groupId){throw new Error("A group is required.")}this.group=options.group||new Api.Groups({id:options.groupId},{users:this})},parse:function(response){this.page=response.page;return response.groupUserInfo}});Api.Groups.Users=Users;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Groups=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.Groups.Group}else{ModelClass=Api.Groups.GroupsList}return new ModelClass(attrs,options)};Groups.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("groups"),allowedCRUD:[]});Api.Groups=Groups;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var GroupInfo=Backbone.Model.extend({defaults:{groupId:"",groupName:""}});var GroupsList=Backbone.Collection.extend({allowedCRUD:["read"],model:GroupInfo,url:Api.Groups.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.groupInfoList}});Api.Groups.GroupsList=GroupsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AuditTrail=Api.LibraryDocuments.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.libraryDocument.url()+"/auditTrail"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.auditTrail=this}}).extend(Api.Helpers.Streamable);Api.LibraryDocuments.AuditTrail=AuditTrail;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocument=Api.LibraryDocuments.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.libraryDocument.url()+"/combinedDocument"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.combinedDocument=this;this.combinedDocumentUrl=(options&&options.combinedDocumentUrl)||new Api.LibraryDocuments.CombinedDocument.Url(null,{combinedDocument:this})}}).extend(Api.Helpers.Streamable);Api.LibraryDocuments.CombinedDocument=CombinedDocument;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocumentUrl=Api.LibraryDocuments.Base.extend({allowedCRUD:["read"],url:function(){return this.combinedDocument.url()+"/url"},initialize:function(attrs,options){options=options||{};if(!options.combinedDocument&&!(attrs&&attrs.id)){throw new Error("A library document ID or combinedDocument is required.")}this.combinedDocument=options.combinedDocument||new Api.LibraryDocuments.CombinedDocument({id:attrs.id},{combinedDocumentUrl:this})},defaults:{url:""}});Api.LibraryDocuments.CombinedDocument.Url=CombinedDocumentUrl;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Document=Api.LibraryDocuments.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",urlRoot:function(){return this.libraryDocument.url()+"/documents"},initialize:function(attrs,options){options=options||{};if(!options.libraryDocument&&!options.libraryDocumentId&&!Api._.has(options,"collection")){throw new Error("A library document is required.")}this.imageUrls=options.imageUrls||new Api.LibraryDocuments.Document.ImageUrls(null,{document:this});this.libraryDocument=options.libraryDocument||(options.collection&&options.collection.libraryDocument)||new Api.LibraryDocuments({id:options.libraryDocumentId})}}).extend(Api.Helpers.Streamable).extend({parse:function(response,options){return options&&options.dataType?this._super.apply(this,arguments):response},defaults:Backbone.Model.inherit("defaults",{id:"",label:"",numPages:0,mimeType:"",name:""})});Api.LibraryDocuments.Document=Document;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ImageUrls=Api.Helpers.ImageUrls.DocumentImageUrlsList.extend({allowedCRUD:["read"],url:function(){return this.document.url()+"/imageUrls"},initialize:function(models,options){options=options||{};if(!options.document&&!(options.id&&options.libraryDocumentId)){throw new Error("A document is required.")}this.document=options.document||new Api.LibraryDocuments.Document({id:options.id},Api._.extend({imageUrls:this},options))},parse:function(response){return response.documentImageUrlsList}}).extend(Api.Helpers.ImageUrls.Mixin);Api.LibraryDocuments.Document.ImageUrls=ImageUrls;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var DocumentSurrogate=Backbone.Model.extend({allowedCRUD:["read"],initialize:function(attrs,options){this.document=new Api.LibraryDocuments.Document({id:this.id},{libraryDocument:this.collection.libraryDocument,dataType:this.get("mimeType")})},getSurrogate:function(){return this.document},fetch:function(){return this.document.fetch.apply(this.document,arguments)}});var Document=DocumentSurrogate.extend({defaults:{id:"",label:"",numPages:0,mimeType:"",name:""}});var Documents=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.libraryDocument.url()+"/documents"},model:Document,initialize:function(models,options){options=options||{};if(!options.libraryDocument&&!options.libraryDocumentId){throw new Error("A library document is required.")}this.libraryDocument=options.libraryDocument||new Api.LibraryDocuments({id:options.libraryDocumentId},{documents:this})},parse:function(response){return response.documents}});Api.LibraryDocuments.Documents=Documents;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Events=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Helpers.Event,url:function(){return this.libraryDocument.url()+"/events"},initialize:function(models,options){options=options||{};if(!options.libraryDocument&&!options.libraryDocumentId){throw new Error("A libraryDocument is required.")}this.libraryDocument=options.libraryDocument||new Api.LibraryDocuments({id:options.libraryDocumentId},{events:this})},parse:function(response){return response.events}});Api.LibraryDocuments.Events=Events;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FormData=Api.LibraryDocuments.Base.extend({allowedCRUD:["read"],dataType:"text/csv",url:function(){return this.libraryDocument.url()+"/formData"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.formData=this}}).extend(Api.Helpers.Streamable);Api.LibraryDocuments.FormData=FormData;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var LibraryDocument=Api.LibraryDocuments.Base.extend({allowedCRUD:["read","create","update"],initialize:function(attrs,options){options=options||{};this.fileInfos=this.get("fileInfos");if(!this.id){return}var opts={libraryDocument:this};var attrs={id:this.id};var models=null;this.documents=options.documents||new Api.LibraryDocuments.Documents(models,opts);this.note=options.note||new Api.LibraryDocuments.Note(attrs,opts);this.views=options.views||new Api.LibraryDocuments.Views(attrs,opts);this.formData=options.formData||new Api.LibraryDocuments.FormData(attrs,opts);this.combinedDocument=options.combinedDocument||new Api.LibraryDocuments.CombinedDocument(attrs,opts);this.auditTrail=options.auditTrail||new Api.LibraryDocuments.AuditTrail(attrs,opts);this.visibility=options.visibility||new Api.LibraryDocuments.Visibility(attrs,opts);this.state=options.state||new Api.LibraryDocuments.State(attrs,opts);this.me=options.me||new Api.LibraryDocuments.Me(attrs,opts);this.events=options.events||new Api.LibraryDocuments.Events(null,{libraryDocument:this})},isAuthoring:function(){return this.get("status")==="AUTHORING"},defaults:{createdDate:"",creatorEmail:"",modifiedDate:"",documentRetentionApplied:false,fileInfos:Api.Helpers.FileInfos,name:"",groupId:"",sharingMode:"USER",state:"",status:"",templateTypes:["DOCUMENT"]}},{TEMPLATE_TYPE:Api.Utils.makeObj(["DOCUMENT","FORM_FIELD_LAYER"]),STATUS:Api.Utils.makeObj(["ACTIVE","AUTHORING","REMOVED"]),STATE:Api.Utils.makeObj(["ACTIVE","AUTHORING","REMOVED"]),SHARING_MODE:Api.Utils.makeObj(["USER","GROUP","ACCOUNT","GLOBAL"]),STATE:Api.Utils.makeObj(["AUTHORING","ACTIVE"])});Api.LibraryDocuments.LibraryDocument=LibraryDocument;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Me=Api.Helpers.MyAgreementInfo.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};if(!options.libraryDocument&&!(attrs&&attrs.id)){throw new Error("A libraryDocument is required.")}if(options.noCache){this.noCache=options.noCache}this.libraryDocument=options.libraryDocument||new Api.LibraryDocuments({id:attrs.id},{me:this})},url:function(){return this.libraryDocument.url()+"/me"+(this.noCache?"?noCache=true":"")},setNoCache:function(){this.noCache=true}});Api.LibraryDocuments.Me=Me;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Note=Api.LibraryDocuments.Base.extend({allowedCRUD:["read","update"],url:function(){return this.libraryDocument.url()+"/me/note"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.note=this},defaults:{note:""}});Api.LibraryDocuments.Note=Note;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var STATUSES;var State=Api.LibraryDocuments.Base.extend({allowedCRUD:["update"],url:function(){return this.libraryDocument.url()+"/state"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.state=this},validate:function(attrs,options){if(!attrs.state){return"Attribute state is required"}STATUSES=STATUSES||Api._.keys(Api.LibraryDocuments.LibraryDocument.STATUS);if(attrs.state&&!Api._.contains(STATUSES,attrs.state)){return"Attribute state is not one of the following: ["+STATUSES.join(", ")+"]"}},defaults:{state:""}});Api.LibraryDocuments.State=State;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var VIEW_NAMES;var Views=Api.LibraryDocuments.Base.extend({idAttribute:"libraryDocumentId",allowedCRUD:["create"],url:function(){return this.libraryDocument.url()+"/views"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.views=this;this.list=new Api.Helpers.Views()},validate:function(attrs,options){if(!attrs.name){return"Attribute name is required"}VIEW_NAMES=VIEW_NAMES||Api._.keys(Views.VIEWS);if(attrs.name&&!Api._.contains(VIEW_NAMES,attrs.name)){return"Attribute name is not one of the following: ["+VIEW_NAMES.join(", ")+"]"}if(attrs.name===Views.VIEWS.SEND&&(!attrs.sendViewConfiguration||!attrs.sendViewConfiguration.agrName)){return"Agreement name is required for SEND view"}},getNextURL:function(){return this.list.getNextURL()},parse:function(response){this.list.reset(response.libraryViewList);return null},defaults:{name:"",commonViewConfiguration:{autoLoginUser:false,locale:"",noChrome:false},sendViewConfiguration:{agrName:""}}},{VIEWS:Api.Utils.makeObj(["EDIT","DOCUMENT","MANAGE","SEND","ALL"])});Api.LibraryDocuments.Views=Views;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Visibility=Api.LibraryDocuments.Base.extend({allowedCRUD:["update"],url:function(){return this.libraryDocument.url()+"/me/visibility"},initialize:function(attrs,options){this._super.apply(this,arguments);this.libraryDocument.visibility=this;this.eTagParent=this.libraryDocument},show:function(){this.set("visibility",Visibility.VISIBILITY.SHOW);return this},hide:function(){this.set("visibility",Visibility.VISIBILITY.HIDE);return this},defaults:{visibility:""}},{VISIBILITY:Api.Utils.makeObj(["SHOW","HIDE"])});Api.LibraryDocuments.Visibility=Visibility;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var LibraryDocuments=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.LibraryDocuments.LibraryDocument}else{ModelClass=Api.LibraryDocuments.LibraryDocumentsList}return new ModelClass(attrs,options)};LibraryDocuments.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("libraryDocuments"),allowedCRUD:[],initialize:function(attrs,options){options=options||{};if(!options.libraryDocument&&!(attrs&&attrs.id)){throw new Error("A library document is required.")}this.libraryDocument=options.libraryDocument||new Api.LibraryDocuments({id:attrs.id},options)}});Api.LibraryDocuments=LibraryDocuments;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ListItem=Backbone.Model.extend({defaults:{creatorEmail:"",hidden:false,id:"",modifiedDate:"",name:"",sharingMode:"",status:"",templateTypes:[]}});var LibraryDocumentsList=Backbone.Collection.extend({allowedCRUD:["read"],model:ListItem,url:Api.LibraryDocuments.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.libraryDocumentList}});Api.LibraryDocuments.LibraryDocumentsList=LibraryDocumentsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ChildAgreementsInfoFile=Api.MegaSigns.Base.extend({allowedCRUD:["read"],dataType:"text/csv",urlRoot:function(){return this.megaSign.url()+"/childAgreementsInfo"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.megaSign&&!options.megaSignId){throw new Error("A megaSign is required.")}this.megaSign=options.megaSign||(options.megaSignId&&new Api.MegaSigns({id:options.megaSignId}))}}).extend(Api.Helpers.Streamable);Api.MegaSigns.ChildAgreementsInfoFile=ChildAgreementsInfoFile;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocument=Api.MegaSigns.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.megaSign.url()+"/combinedDocument"},initialize:function(attrs,options){this._super.apply(this,arguments);this.combinedDocumentUrl=(options&&options.combinedDocumentUrl)||new Api.MegaSigns.CombinedDocument.Url(null,{combinedDocument:this})}}).extend(Api.Helpers.Streamable);Api.MegaSigns.CombinedDocument=CombinedDocument;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocumentUrl=Api.MegaSigns.Base.extend({allowedCRUD:["read"],url:function(){return this.combinedDocument.url()+"/url"},initialize:function(attrs,options){options=options||{};if(!options.combinedDocument&&!(attrs&&attrs.id)){throw new Error("A megaSign ID or combinedDocument is required.")}this.combinedDocument=options.combinedDocument||new Api.MegaSigns.CombinedDocument({id:attrs.id},{combinedDocumentUrl:this})},defaults:{url:""}});Api.MegaSigns.CombinedDocument.Url=CombinedDocumentUrl;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Document=Api.MegaSigns.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",urlRoot:function(){return this.documents.url()},initialize:function(attrs,options){this._super.apply(this,arguments);if(options.dataType){this.dataType=options.dataType}this.documents=this.megaSign.documents}}).extend(Api.Helpers.Streamable);Api.MegaSigns.Document=Document;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var DocumentSurrogate=Backbone.Model.extend({allowedCRUD:["read"],initialize:function(attrs,options){this.document=new Api.MegaSigns.Document({id:this.id},{megaSign:this.collection.megaSign,dataType:this.get("mimeType")})},getSurrogate:function(){return this.document}});var Document=DocumentSurrogate.extend({defaults:{id:"",label:"",numPages:0,mimeType:"",name:""}});var Documents=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.megaSign.url()+"/documents"},model:Document,initialize:function(models,options){options=options||{};if(!options.megaSign&&!options.megaSignId){throw new Error("A megaSign is required.")}this.megaSign=options.megaSign||new Api.MegaSigns({id:options.megaSignId},{documents:this});this.imageUrls=options.imageUrls||new Api.MegaSigns.Documents.ImageUrls(null,{documents:this})},parse:function(response){return response.documents}});Api.MegaSigns.Documents=Documents;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ImageUrls=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.documents.url()+"/imageUrls"},model:Api.Helpers.ImageUrls.DocumentImageUrlsInfo,initialize:function(models,options){options=options||{};this.documents=options.documents||new Api.MegaSigns.Documents(null,{megaSignId:options.megaSignId,megaSign:options.megaSign,imageUrls:this});if(options.imageSizes){this.imageSizes=options.imageSizes}this.megaSign=this.documents.megaSign},getFirstThumbnailUrl:function(size){if(!this.length){return""}return this.first().getList().getFirstThumbnailUrl(size)},imagesReady:function(){var isNotAvailable=function(model){return !model.imagesReady()};return !this.length||!this.some(isNotAvailable)},parse:function(response){return response.documentsImageUrlsInfo}},{IMAGE_SIZES:Api.Helpers.ImageUrls.IMAGE_SIZES}).extend(Api.Helpers.ImageUrls.Mixin);Api.MegaSigns.Documents.ImageUrls=ImageUrls;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Events=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Helpers.Event,url:function(){return this.megaSign.url()+"/events"},initialize:function(models,options){options=options||{};if(!options.megaSign&&!options.megaSignId){throw new Error("A megaSign is required.")}this.megaSign=options.megaSign||new Api.MegaSigns({id:options.megaSignId},{events:this})},parse:function(response){return response.events}});Api.MegaSigns.Events=Events;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FormData=Api.MegaSigns.Base.extend({allowedCRUD:["read"],dataType:"text/csv",url:function(){return this.megaSign.url()+"/formData"},initialize:function(attrs,options){this._super.apply(this,arguments);this.megaSign.formData=this}}).extend(Api.Helpers.Streamable);Api.MegaSigns.FormData=FormData;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Me=Api.Helpers.MyAgreementInfo.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};if(!options.megaSign&&!(attrs&&attrs.id)){throw new Error("A megasign is required.")}if(options.noCache){this.noCache=options.noCache}this.megaSign=options.megaSign||new Api.MegaSigns({id:attrs.id},{me:this})},url:function(){return this.megaSign.url()+"/me"+(this.noCache?"?noCache=true":"")},setNoCache:function(){this.noCache=true}});Api.MegaSigns.Me=Me;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MegaSignCCs=Backbone.Collection.extend({model:Backbone.Model.extend({validate:function(){if(!Api.Utils.isValidEmail(this.get("email"))){return[{key:"CCInfo:email:required",message:Api.i18n("compose_recipient_error_invalid_email_bis",this.get("email"))}]}},defaults:{email:""}})});var MegaSign=Api.MegaSigns.Base.extend({allowedCRUD:["create","read","update"],initialize:function(attrs,options){options=options||{};this.events=options.events||new Api.MegaSigns.Events(null,{megaSign:this});this.members=options.members||new Api.MegaSigns.Members({id:this.id},{megaSign:this});this.documents=options.documents||new Api.MegaSigns.Documents(null,{megaSign:this});this.combinedDocument=options.combinedDocument||new Api.MegaSigns.CombinedDocument({id:this.id},{megaSign:this});this.imageUrls=this.documents.imageUrls;this.views=options.views||new Api.MegaSigns.Views({id:this.id},{megaSign:this});this.state=options.state||new Api.MegaSigns.State({id:this.id},{megaSign:this});this.reminders=options.reminders||new Api.MegaSigns.Reminders(null,{megaSign:this});this.note=options.note||new Api.MegaSigns.Note({id:this.id},{megaSign:this});this.formData=options.formData||new Api.MegaSigns.FormData({id:this.id},{megaSign:this});this.visibility=options.visibility||new Api.MegaSigns.Visibility({id:this.id},{megaSign:this});this.me=options.me||new Api.MegaSigns.Me({id:this.id},{megaSign:this})},isComplete:function(){return Api._.contains(MegaSign.COMPLETED_STATUSES,this.get("status"))},isOutForCompletion:function(){return Api._.contains(MegaSign.OUT_FOR_STATUSES,this.get("status"))},isCanceled:function(){return this.get("status")===MegaSign.INCOMPLETE_STATUSES.CANCELLED},isExpired:function(){return this.get("status")===MegaSign.INCOMPLETE_STATUSES.EXPIRED},isArchived:function(){return false},isIncomplete:function(){return Api._.contains(MegaSign.INCOMPLETE_STATUSES,this.get("status"))},isAuthoring:function(){return this.get("status")===MegaSign.INCOMPLETE_STATUSES.AUTHORING},isPrefill:function(){return this.get("status")===MegaSign.INCOMPLETE_STATUSES.PREFILL},validate:function(){var errors=[];if(!this.isNew()){return}if(!this.get("name")){error={key:"Megasign:name",message:Api.i18n("createMegasign_pleaseNameYourMegasign")};errors.push(error)}errors=errors.concat(this.get("ccs").validate());errors=errors.concat(this.get("fileInfos").validate());errors=_.compact(errors);return errors.length>0?errors:undefined},defaults:{childAgreementsInfo:{},fileInfos:Api.Helpers.FileInfos,name:"",signatureType:"",state:"",status:"",ccs:MegaSignCCs,createdDate:"",externalId:{},firstReminderDelay:null,id:null,locale:"en_US",message:null,postSignOption:{},reminderFrequency:"",securityOption:{},senderEmail:"",vaultingInfo:{},documentRetentionApplied:false,expirationTime:null,isDocumentRetentionApplied:false,numChildren:null}},{COMPLETED_STATUSES:Api.Utils.makeObj(["COMPLETED"]),INCOMPLETE_STATUSES:Api.Utils.makeObj(["AUTHORING","CANCELLED","EXPIRED","PREFILL"]),OUT_FOR_STATUSES:Api.Utils.makeObj(["IN_PROCESS"])});Api.MegaSigns.MegaSign=MegaSign;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Members=Api.Agreements.Members.extend({url:function(){return this.megaSign.url()+"/members"},initialize:function(attrs,options){options=options||{};if(!options.megaSign&&!(attrs&&attrs.id)){throw new Error("A megaSign is required.")}this.agreement=this.megaSign=options.megaSign||options.agreement||new Api.MegaSigns({id:attrs.id},{members:this});this.share=options.share||new Api.MegaSigns.Members.Share(null,{members:this})},defaults:(function(){var defs=Api._.extend({},Api.Agreements.Members.prototype.defaults);delete defs.nextParticipantSets;return defs})()});Api.MegaSigns.Members=Members;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Share=Api.Helpers.Members.Share.extend({initialize:function(models,options){options=options||{};this.members=options.members||new Api.MegaSigns.Members({id:options.megaSignId},{megaSign:options.megaSign});this.megaSign=this.members.megaSign}});Api.MegaSigns.Members.Share=Share;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Note=Api.MegaSigns.Base.extend({allowedCRUD:["read","update"],url:function(){return this.megaSign.url()+"/me/note"},initialize:function(attrs,options){this._super.apply(this,arguments);this.megaSign.note=this},defaults:{note:""}});Api.MegaSigns.Note=Note;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Reminder=Api.Helpers.ReminderBase.extend({allowedCRUD:["read","create","update"],urlRoot:function(){return this.megaSign.url()+"/reminders"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};if(!options.megaSign&&!options.megaSignId&&!(options.collection&&options.collection.megaSign)){throw new Error("A megaSign is required.")}if(attrs&&attrs.id&&!attrs.reminderId){this.set("reminderId",attrs.id,{silent:true})}this.megaSign=options.megaSign||(options.megaSignId&&new Api.MegaSigns({id:options.megaSignId}))||options.collection.megaSign}});Api.MegaSigns.Reminders.Reminder=Reminder;Api.MegaSigns.Reminders.prototype.model=Reminder;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Reminders=Api.Helpers.Reminders.extend({url:function(){return this.megaSign.url()+"/reminders"},model:null,isMegaSign:true,initialize:function(models,options){options=options||{};if(!options.megaSign&&!options.megaSignId){throw new Error("A megaSign is required.")}this.megaSign=options.megaSign||new Api.MegaSigns({id:options.megaSignId},{reminders:this})}});Api.MegaSigns.Reminders=Reminders;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MegaSignCancellationInfo={comment:"",notifyOthers:false};var State=Api.MegaSigns.Base.extend({allowedCRUD:["update"],url:function(){return this.megaSign.url()+"/state"},initialize:function(attrs,options){this._super.apply(this,arguments);this.megaSign.state=this;this.eTagParent=this.megaSign},defaults:{state:"",megaSignCancellationInfo:MegaSignCancellationInfo}});Api.MegaSigns.State=State;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Views,VIEW_NAMES;Views=Api.MegaSigns.Base.extend({idAttribute:"megaSignId",allowedCRUD:["create"],url:function(){return this.megaSign.url()+"/views"},initialize:function(attrs,options){this._super.apply(this,arguments);this.megaSign.views=this;this.list=new Api.Helpers.Views()},validate:function(attrs){if(!attrs.name){return"Attribute name is required"}VIEW_NAMES=VIEW_NAMES||Api._.keys(Api.MegaSigns.Views.VIEW_NAME);if(attrs.name&&!Api._.contains(VIEW_NAMES,attrs.name)){return"Attribute name is not one of the following: ["+VIEW_NAMES.join(", ")+"]"}},getNextURL:function(){return this.list.getNextURL()},parse:function(response){this.list.reset(response.megaSignViewList);return null},saveUntil:Backbone.retrySync("save",{doneCondition:function(){return !!this.getNextURL()}}),defaults:{name:"",commonViewConfiguration:{autoLoginUser:false,locale:"",noChrome:false}}},{VIEW_NAME:Api.Utils.makeObj(["ACTIVITY_REPORT","PREFILL","AUTHORING","DOCUMENT","MANAGE","POST_CREATE","SIGNING","ALL"])});Api.MegaSigns.Views=Views;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Visibility=Api.MegaSigns.Base.extend({allowedCRUD:["update"],url:function(){return this.megaSign.url()+"/me/visibility"},initialize:function(attrs,options){this._super.apply(this,arguments);this.megaSign.visibility=this;this.eTagParent=this.megaSign},show:function(){this.set("visibility","SHOW");return this},hide:function(){this.set("visibility","HIDE");return this},defaults:{visibility:""}});Api.MegaSigns.Visibility=Visibility;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MegaSigns=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.MegaSigns.MegaSign}else{ModelClass=Api.MegaSigns.MegaSignsList}return new ModelClass(attrs,options)};MegaSigns.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("megaSigns"),allowedCRUD:[],initialize:function(attrs,options){options=options||{};if(!options.megaSign&&!(attrs&&attrs.id)&&!options.megaSignId){throw new Error("A megaSign is required.")}this.megaSign=options.megaSign||new Api.MegaSigns({id:options.megaSignId||attrs.id},options)}});Api.MegaSigns=MegaSigns;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MegaSign=Backbone.Model.extend({defaults:{displayDate:"",esign:"",id:"",name:"",status:""}});var MegaSignsList=Backbone.Collection.extend({allowedCRUD:["read"],model:MegaSign,url:Api.MegaSigns.Base.prototype.urlRoot,initialize:function(){this._super.apply(this,arguments);this.page={}},parse:function(response){this.page=response.page;return response.megaSignList}});Api.MegaSigns.MegaSignsList=MegaSignsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MessageTemplates=function(attrs,options){var ModelClass;ModelClass=Api.MessageTemplates.MessageTemplatesList;return new ModelClass(attrs,options)};MessageTemplates.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("messageTemplates"),allowedCRUD:["read"]});Api.MessageTemplates=MessageTemplates;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MessageTemplateItem=Backbone.Model.extend({idAttribute:"messageTemplateId",defaults:{messageTemplateId:"",name:"",locale:"",text:""}});var MessageTemplatesList=Backbone.Collection.extend({allowedCRUD:["read"],model:MessageTemplateItem,url:Api.MessageTemplates.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.messageTemplateList}});Api.MessageTemplates.MessageTemplatesList=MessageTemplatesList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Base=Backbone.Model.extend({urlRoot:Api.getOAuthUri(),allowedCRUD:["create"],initialize:function(){this.on("error",function(model,response,options){if(response&&response.responseJSON){var json=response.responseJSON;json.code=json.code||String(json.error||"").toUpperCase();json.message=json.message||json.error_description}})},sync:function(method,model,options){options=Api.Utils.defaults(options||{},{contentType:"application/x-www-form-urlencoded",data:Api.Utils.convertObjectToQueryString(this.toJSON(this.attributes)),headers:{"Content-Type":"application/x-www-form-urlencoded"}});return Backbone.sync_v6.call(this,method,model,options)}});var OAuth=Base.extend({_:null,refreshWeb:function(options){var self=this;if(!this.refreshModel){this.refreshModel=new Api.OAuth.RefreshWeb({client_id:this.get("client_id"),refresh_token:this.get("refresh_token")})}return this.refreshModel.refresh(options).then(function(response){self.set(response);return response})},refresh:Api._.constant("TODO"),revoke:Api._.constant("TODO"),getToken:Api._.constant("TODO"),parse:function(response){if("baseUri" in response&&"accessToken" in response){return{token_type:"",access_token:response.accessToken,refresh_token:response.refreshToken,expires_in:response.accessTokenLifetime,client_id:response.clientId}}else{return response}},defaults:{token_type:"",access_token:"",refresh_token:"",expires_in:0,client_id:""}});OAuth.Base=Base;Api.OAuth=OAuth;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var postData={grant_type:"refresh_token",client_id:"",refresh_token:""};var postAttrs=Api._.keys(postData);var RefreshWeb=Api.OAuth.Base.extend({url:function(){return this._super()+"/refreshweb"},toJSON:function(){return Api._.pick(this.attributes,postAttrs)},refresh:function(options){return this.save(null,options)},defaults:Api._.extend({access_token:"",expires_in:0,token_type:""},postData)});Api.OAuth.RefreshWeb=RefreshWeb;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FILE_SIZE_LIMIT=104857600;var TransientDocuments=Backbone.Model.extend({urlRoot:Api.getServiceUri("transientDocuments"),allowedCRUD:["create"],initialize:function(attrs,options){this.options=options||{};if(this.options.mimeTypes){if(!Api._.isString(this.options.mimeTypes)){throw new Error("options.mimeTypes must be a string.")}this.options.mimeTypes=this.options.mimeTypes.split(/\s*,\s*/)}this._super.apply(this,arguments)},sync:function(method,model,options){options=options||{};options=Api.Utils.defaults(options,{processData:false,contentType:false,data:(!options.headers||options.headers["Content-Type"]!=="application/json")?this.toFormData():null});if(options.data===null){delete options.data}return Backbone.sync_v6.call(this,method,model,options)},validate:function(attrs,options){if(!attrs.file){return"Missing file to upload"}if(attrs.fileName&&attrs.fileName.length>255){return"File Name must be 255 characters or less"}if(attrs.file.size>FILE_SIZE_LIMIT||(this.options.maxFileSize&&(attrs.file.size>this.options.maxFileSize))){return"File size is too large"}if(attrs.mimeType&&!Api._.includes(this.options.mimeTypes||TransientDocuments.MIMETYPES,attrs.mimeType)){return"Mime-type not allowed: "+attrs.mimeType}},toFormData:function(){var data=new FormData();data.append("File-Name",this.get("fileName"));data.append("Mime-Type",this.get("mimeType"));data.append("File",this.get("file"));return data},parse:function(response,options){options.validate=false;return response},defaults:{fileName:"",mimeType:"",file:null,transientDocumentId:""}},{MIMETYPES_PDF:Api.Utils.makeObj(["application/pdf"]),MIMETYPES_OFFICE:Api.Utils.makeObj(["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.text","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/rtf","text/rtf"]),MIMETYPES_TEXT:Api.Utils.makeObj(["text/plain"]),MIMETYPES_WEB:Api.Utils.makeObj(["text/html"]),MIMETYPES_IMAGE:Api.Utils.makeObj(["image/bmp","image/jpeg","image/gif","image/png","image/tiff"])});TransientDocuments.MIMETYPES=Api._.extend(TransientDocuments.MIMETYPES_PDF,TransientDocuments.MIMETYPES_OFFICE,TransientDocuments.MIMETYPES_TEXT,TransientDocuments.MIMETYPES_WEB,TransientDocuments.MIMETYPES_IMAGE);Api.TransientDocuments=TransientDocuments;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Group=Backbone.Model.extend({allowedCRUD:[],urlRoot:function(){return this.user.url()+"/groups"},initialize:function(attrs,options){options=options||{};if(!options.user&&!options.userId&&!(options.collection&&options.collection.user)){throw new Error("A user is required.")}this.user=options.user||(options.collection&&options.collection.user)||new Api.Users({id:options.userId},{groups:options.collection});this.settings=options.settings||new Api.Users.Groups.Settings({id:attrs&&attrs.id},{group:this})},defaults:{id:"",isGroupAdmin:false,isPrimaryGroup:false,name:"",settings:{}}});Api.Users.Group=Group;Api.Users.Groups.prototype.model=Group;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Settings=Backbone.Model.extend({allowedCRUD:["read"],url:function(){return this.group.user.url()+"/settings?groupId="+this.group.id},initialize:function(attrs,options){options=options||{};if(!options.group&&!options.user&&!options.userId){throw new Error("A group and user are required.")}this.group=options.group||new Api.Users.Group({id:attrs&&attrs.id},Api._.extend({settings:this},options));this.group.settings=this},defaults:{}}).extend(Api.Helpers.Settings);Api.Users.Groups.Settings=Settings;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Groups=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.user.url()+"/groups"},initialize:function(models,options){this.page={};options=options||{};if(!options.user&&!options.userId){throw new Error("A user is required.")}this.user=options.user||new Api.Users({id:options.userId},{groups:this})},parse:function(response){this.page=response.page;return response.groupInfoList}});Api.Users.Groups=Groups;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var RecipientSettings=Api.Users.Base.extend({allowedCRUD:["read"],url:function(){return this._super()+"/recipientSettings"},defaults:{availableAuthenticationMethods:[],signerAuthDefault:""}});Api.Users.RecipientSettings=RecipientSettings;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Settings=Api.Users.Base.extend({allowedCRUD:["read"],url:function(){return this.user.url()+"/settings"},initialize:function(attrs,options){options=options||{};if(!options.user&&!(attrs&&attrs.id)){throw new Error("A user is required.")}this.user=options.user||new Api.Users({id:attrs.id},{settings:this})},parse:function(resp,options){if(resp.userCanSend&&resp.maxMonthlyFreeSend===undefined){resp.userCanSend=false}return resp},defaults:{accountHasPods:false,advancedTemplateOptionsAvailable:false,allowPerRecipientAuthenticationRules:false,allowReplaceSigner:true,allowedSignatureTypesOnSend:[],authenticationMethodRequired:false,autocompleteEnabled:false,availableAuthenticationMethods:["NONE","PASSWORD"],digitalIdentityGatewayAuthInfo:[],availablePhoneCountryCodes:[],availableRecipientRoles:["SIGNER"],createLibraryTemplateHelpxUrl:"https://helpx.adobe.com/sign/help/creating-library-template.html",defaultSendPageSignatureType:"ESIGN",enableManageCsvExport:true,fillAndSignAvailable:true,hybridWorkflowEnabled:false,libraryIntegrationsEnabled:[],maxShareAgreementRecipients:20,maxUploadSize:10485760,maxUploadedFiles:20,messageTemplatesEnabled:false,parallelWorkflowDefault:false,parallelWorkflowEnabled:false,passwordStrength:"EMPTY",privateMessagesEnabled:false,recipientSetFeatureEnabled:false,recipientSetMaxUserCount:100,reminderAllowedOnSend:true,reminderFrequency:"NEVER",replaceSignerCheckboxDefaultSetting:true,replaceSignerType:"ORIGINAL_RECIPIENT_CANNOT_PARTICIPATE",sendJSEnabled:true,signIntegratedIntoDcWeb:false,signerIdentityReportEnabled:false,signerAuthDefault:"NONE",transactionLevel:"NOT_APPLICABLE",useMicroserviceForAutocomplete:false,widgetAvailableAuthenticationMethods:["NONE","PASSWORD"],widgetCcEnabled:false,widgetSignerAuthDefault:"NONE",writtenSignatureEnabled:true,canAddUnknownSignerInWidget:false,unifiedEditModifyOnManagePageAvailable:false,canModifyWebFormInFlight:false,showOwnerActionOnManagePage:false,isPrivacyAdmin:false,isPurgeQueueEnabled:false}}).extend(Api.Helpers.Settings);Api.Users.Settings=Settings;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserShare=Api.Helpers.AccountShare.extend({urlRoot:function(){return this.user.url()+"/shares"},initialize:function(attrs,options){options=options||{};if(!options.user&&!options.userId&&!(options.collection&&options.collection.user)){throw new Error("A user is required.")}this.user=options.user||(options.collection&&options.collection.user)||new Api.Users({id:options.userId},{shares:options.collection})}});Api.Users.Share=UserShare;Api.Users.Shares.prototype.model=UserShare;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Shares=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.user.url()+"/shares"},initialize:function(models,options){this.page={};options=options||{};if(!options.user&&!options.userId){throw new Error("A user is required.")}this.user=options.user||new Api.Users({id:options.userId},{shares:this})},parse:function(response){this.page=response.page;return response.accountShareInfoList}});Api.Users.Shares=Shares;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var User=Api.Users.Base.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};this.settings=options.settings||new Api.Users.Settings({id:this.id},{user:this});this.userInfo=options.userInfo||new Api.Users.UserInfo({id:this.id},{user:this});this.groups=options.groups||new Api.Users.Groups(null,{user:this});this.shares=options.shares||new Api.Users.Shares(null,{user:this})},defaults:{lastName:"",phone:"",locale:"",title:"",email:"",initials:"",company:"",accountType:"",isAccountAdmin:false,firstName:"",status:""}});Api.Users.User=User;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserInfo=Api.Users.Base.extend({allowedCRUD:["delete"],url:function(){return this.user.url()+"/userInfo"},initialize:function(attrs,options){options=options||{};if(!options.user&&!(attrs&&attrs.id)){throw new Error("A user is required.")}this.user=options.user||new Api.Users({id:attrs.id},{userInfo:this})},destroy:function(options){options=options||{};if(options.data){options.url=this.url()+"?"+Api.Utils.convertObjectToQueryString(options.data);delete options.data}return this._super(options)}});Api.Users.UserInfo=UserInfo;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var EMAIL_HEADER_NAME="x-email";var UserByEmail=Api.Users.Base.extend({url:function(){return Api.Users.Base.prototype.urlRoot()+"/userByEmail"},allowedCRUD:["read"],initialize:function(attrs){},validate:function(attrs,options){if(!options||!options.headers||!options.headers[EMAIL_HEADER_NAME]){return"Missing header "+EMAIL_HEADER_NAME+": "+this.url()}},fetch:function(options){options=options||{};options.headers=options.headers||{};if(!options.headers[EMAIL_HEADER_NAME]&&this.get("email")){options.headers[EMAIL_HEADER_NAME]=this.get("email")}if(!this.isValid(options)){throw new Error(this.validationError)}return this._super(options)},defaults:{userId:"",userName:""}});Api.Users.UserByEmail=UserByEmail;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Users=function(attrs,options){var ModelClass;if(!attrs||!attrs.id){ModelClass=Api.Users.UsersList}else{ModelClass=Api.Users.User}return new ModelClass(attrs,options)};Users.ME_ID="me";Users.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("users"),allowedCRUD:[],wrapFetchProfileError:function(options){var error=options.error;options.error=function(model,xhr,options){if(error){error(model,xhr,options)}if(xhr.status===404){options.errorHandled=true}}}});Api.Users=Users;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserInfo=Backbone.Model.extend({getModel:function(){var userId=this.get("userId");if(!userId){throw new Error("no user id")}return new Api.Users.User({id:userId})},defaults:{email:"",id:"",isAccountAdmin:false,company:"",firstName:"",lastName:""}});var UsersList=Backbone.Collection.extend({url:Api.Users.Base.prototype.urlRoot,model:UserInfo,allowedCRUD:["read"],initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.userInfoList}});Api.Users.UsersList=UsersList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var State=Api.Webhooks.Base.extend({allowedCRUD:["update"],url:function(){return this.webhook.url()+"/state"},initialize:function(attrs,options){options=options||{};if(!options.webhook&&!(attrs&&attrs.id)){throw new Error("A webhook is required.")}this.webhook=options.webhook||new Api.Webhooks({id:attrs.id},{state:this});this.eTagParent=this.webhook},defaults:{state:""}});Api.Webhooks.State=State;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var WebhookMegaSignEvents={includeDetailedInfo:""};var WebhookAgreementEvents={includeDetailedInfo:"",includeDocumentsInfo:"",includeParticipantsInfo:"",includeSignedDocuments:""};var WebhookWidgetEvents={includeDetailedInfo:"",includeDocumentsInfo:"",includeParticipantsInfo:""};var WebhookConditionalParams={webhookAgreementEvents:WebhookAgreementEvents,webhookMegaSignEvents:WebhookMegaSignEvents,webhookWidgetEvents:WebhookWidgetEvents};var Webhook=Api.Webhooks.Base.extend({allowedCRUD:["create","read","update","delete"],initialize:function(attrs,options){options=options||{};this._super.apply(this,arguments);this.createSubCollections(options)},createSubCollections:function(options){options=options||{};if(this.isNew()){return}this.state=options.state||new Api.Webhooks.State({id:this.id},{webhook:this})},parse:function(response,options){if(options.xhr.status===201&&response.id){this.id=response.id;this.createSubCollections()}return response},defaults:{name:"",scope:"",webhookSubscriptionEvents:[],webhookUrlInfo:{},applicationName:"",applicationDisplayName:"",created:"",lastModified:"",resourceId:null,resourceType:"",status:null,state:null,webhookConditionalParams:WebhookConditionalParams,problemNotificationEmails:[]}});Api.Webhooks.Webhook=Webhook;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Webhooks=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.Webhooks.Webhook}else{ModelClass=Api.Webhooks.WebhooksList}return new ModelClass(attrs,options)};Webhooks.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("webhooks"),allowedCRUD:["read"]});Api.Webhooks=Webhooks;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserWebhook=Backbone.Model.extend({defaults:{id:null,name:"",scope:"",webhookSubscriptionEvents:[],webhookUrlInfo:{},applicationName:"",applicationDisplayName:"",status:"",lastModified:"",resourceType:"",resourceId:null}});var WebhooksList=Backbone.Collection.extend({allowedCRUD:["read"],model:UserWebhook,url:Api.Webhooks.Base.prototype.urlRoot,initialize:function(){this.page={}},parse:function(response){this.page=response.page;return response.userWebhookList}});Api.Webhooks.WebhooksList=WebhooksList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var AuditTrail=Api.Widgets.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.widget.url()+"/auditTrail"},initialize:function(attrs,options){this._super.apply(this,arguments)}}).extend(Api.Helpers.Streamable);Api.Widgets.AuditTrail=AuditTrail;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocument=Api.Widgets.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",url:function(){return this.widget.url()+"/combinedDocument"},initialize:function(attrs,options){this._super.apply(this,arguments);this.combinedDocumentUrl=(options&&options.combinedDocumentUrl)||new Api.Widgets.CombinedDocument.Url(null,{combinedDocument:this})}}).extend(Api.Helpers.Streamable);Api.Widgets.CombinedDocument=CombinedDocument;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CombinedDocumentUrl=Api.Widgets.Base.extend({allowedCRUD:["read"],url:function(){return this.combinedDocument.url()+"/url"},initialize:function(attrs,options){options=options||{};if(!options.combinedDocument&&!(attrs&&attrs.id)){throw new Error("A widget ID or combinedDocument is required.")}this.combinedDocument=options.combinedDocument||new Api.Widgets.CombinedDocument({id:attrs.id},{combinedDocumentUrl:this})},defaults:{url:""}});Api.Widgets.CombinedDocument.Url=CombinedDocumentUrl;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Document=Api.Widgets.Base.extend({allowedCRUD:["read"],dataType:"application/pdf",urlRoot:function(){return this.documents.url()},initialize:function(attrs,options){options=options||{};if(!options.widget&&!options.widgetId){throw new Error("A widget is required.")}if(options.dataType){this.dataType=options.dataType}this.widget=options.widget||new Api.Widgets({id:options.widgetId});this.documents=this.widget.documents}}).extend(Api.Helpers.Streamable);Api.Widgets.Document=Document;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var DocumentSurrogate=Backbone.Model.extend({allowedCRUD:["read"],initialize:function(attrs,options){this.document=new Api.Widgets.Document({id:this.id},{widget:this.collection.widget,dataType:this.get("mimeType")})},getSurrogate:function(){return this.document},fetch:function(){return this.document.fetch.apply(this.document,arguments)}});var Document=DocumentSurrogate.extend({defaults:{id:"",label:"",numPages:0,mimeType:"",name:""}});var Documents=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.widget.url()+"/documents"},model:Document,initialize:function(models,options){options=options||{};if(!options.widget&&!options.widgetId){throw new Error("A widget is required.")}this.widget=options.widget||new Api.Widgets({id:options.widgetId},{documents:this});this.imageUrls=options.imageUrls||new Api.Widgets.Documents.ImageUrls(null,{documents:this})},parse:function(response){return response.documents}});Api.Widgets.Documents=Documents;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ImageUrls=Backbone.Collection.extend({allowedCRUD:["read"],url:function(){return this.documents.url()+"/imageUrls"},model:Api.Helpers.ImageUrls.DocumentImageUrlsInfo,initialize:function(models,options){options=options||{};this.documents=options.documents||new Api.Widgets.Documents(null,{widgetId:options.widgetId,widget:options.widget,imageUrls:this});if(options.imageSizes){this.imageSizes=options.imageSizes}this.widget=this.documents.widget},getFirstThumbnailUrl:function(size){if(!this.length){return""}return this.first().getList().getFirstThumbnailUrl(size)},imagesReady:function(){var isNotAvailable=function(model){return !model.imagesReady()};return !this.length||!this.some(isNotAvailable)},parse:function(response){return response.documentsImageUrlsInfo}},{IMAGE_SIZES:Api.Helpers.ImageUrls.IMAGE_SIZES}).extend(Api.Helpers.ImageUrls.Mixin);Api.Widgets.Documents.ImageUrls=ImageUrls;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Events=Backbone.Collection.extend({allowedCRUD:["read"],model:Api.Helpers.Event,url:function(){return this.widget.url()+"/events"},initialize:function(models,options){options=options||{};if(!options.widget&&!options.widgetId){throw new Error("A widget is required.")}this.widget=options.widget||new Api.Widgets({id:options.widgetId},{events:this})},parse:function(response){return response.events}});Api.Widgets.Events=Events;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var FormData=Api.Widgets.Base.extend({allowedCRUD:["read"],dataType:"text/csv",url:function(){return this.widget.url()+"/formData"},initialize:function(attrs,options){this._super.apply(this,arguments);this.widget.formData=this}}).extend(Api.Helpers.Streamable);Api.Widgets.FormData=FormData;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Me=Api.Helpers.MyAgreementInfo.extend({allowedCRUD:["read"],initialize:function(attrs,options){options=options||{};if(!options.widget&&!(attrs&&attrs.id)){throw new Error("A widget is required.")}if(options.noCache){this.noCache=options.noCache}this.widget=options.widget||new Api.Widgets({id:attrs.id},{me:this})},url:function(){return this.widget.url()+"/me"+(this.noCache?"?noCache=true":"")},setNoCache:function(){this.noCache=true}});Api.Widgets.Me=Me;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var CCParticipants=Api.Widgets.Base.extend({allowedCRUD:["update"],url:function(){return this.members.url()+"/ccParticipants"},initialize:function(attrs,options){options=options||{};this.members=options.members||new Api.Widgets.Members({id:options.widgetId},{widget:options.widget});this.widget=this.members.widget;this.eTagParent=this.members},defaults:{ccInfoList:Backbone.Collection.extend({model:Api.Helpers.Members.CCParticipantInfo})}});Api.Widgets.Members.ccsInfo=CCParticipants;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Members=Api.Widgets.Base.extend({allowedCRUD:["read"],url:function(){return this.widget.url()+"/members"},initialize:function(attrs,options){this._super.apply(this,arguments);options=options||{};this.widget=options.widget||new Api.Widgets({id:attrs.id},{members:this});this.share=options.share||new Api.Widgets.Members.Share(null,{members:this});this.workflowOrder=null;this.ccsInfo=new Api.Widgets.Members.ccsInfo({id:attrs.id},{members:this})},isSender:function(){return this.get("creatorInfo").get("self")},isMyTurn:function(){return false},getWorkflow:function(){return this.workflowOrder=this.workflowOrder||Api.Helpers.Members.getWorkflow(this.get("additionalParticipantSets"))},getMyself:function(){var me=null;this.get("additionalParticipantSets").find(function(pSet){me=pSet.get("memberInfos").findWhere({self:true});return me});return me},findParticipantBySelf:function(isSelf,persona){return Api.Helpers.Members.findParticipantBySelf(this,isSelf,persona)},defaults:{creatorInfo:Api.Helpers.Members.SenderInfo,ccsInfo:Backbone.Collection.extend({model:Api.Helpers.Members.CCParticipantInfo}),sharesInfo:Backbone.Collection.extend({model:Api.Helpers.Members.SharesInfo}),widgetParticipantSet:null,additionalParticipantSets:Backbone.Collection.extend({comparator:"order"})}});Api.Widgets.Members=Members;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ParticipantSet=Api.Widgets.Base.extend({allowedCRUD:["read","update"],urlRoot:function(){return this.members.url()+"/participantSets"},initialize:function(attrs,options){options=options||{};if(!options.widget&&!options.widgetId&&!options._parent){throw new Error("A widget is required.")}this.widget=options.widget||(options.widgetId&&new Api.Widgets({id:options.widgetId}))||(options._parent.widget||options._parent);this.members=this.widget.members},getActiveMembers:function(){return Api.Helpers.Members.getActiveMembers(this)},defaults:{memberInfos:Backbone.Collection.extend({model:Api.Helpers.Members.DetailedParticipantInfo,isWidget:true}),order:0,role:"",id:null}});Api.Widgets.Members.ParticipantSet=ParticipantSet;Api.Widgets.Members.prototype.defaults.widgetParticipantSet=ParticipantSet;Api.Widgets.Members.prototype.defaults.additionalParticipantSets.prototype.model=ParticipantSet;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Participant=Api.Widgets.Base.extend({urlRoot:function(){return this.participantSet.url()+"/participants"},initialize:function(attrs,options){attrs=attrs||{};options=options||{};if(!attrs.id){throw new Error("A participant ID is required.")}if(!options.widget&&!options.widgetId){throw new Error("A widget is required.")}if(!options.participantSet&&!options.participantSetId){throw new Error("A participantSet is required.")}this.widget=options.widget||new Api.Widgets({id:options.widgetId});this.participantSet=options.participantSet||new Api.Widgets.Members.ParticipantSet({id:options.participantSetId},{widget:this.widget});this.securityOptions=new Api.Widgets.Members.SecurityOptions(attrs.securityOption,{participant:this})}});Api.Widgets.Members.Participant=Participant;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var SecurityOptions=Api.Widgets.Base.extend({allowedCRUD:["read","update"],url:function(){return this.participant.url()+"/securityOptions"},initialize:function(attrs,options){if(!options.participant){throw new Error("Missing participant id")}this.participant=options.participant;this.widget=this.participant.widget;this.participantSet=this.participant.participantSet},isNew:function(){return false},defaults:{authenticationMethod:"",password:"",phoneInfo:{},nameInfo:{},notaryAuthentication:""}});Api.Widgets.Members.SecurityOptions=SecurityOptions;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Share=Api.Helpers.Members.Share.extend({initialize:function(models,options){options=options||{};this.members=options.members||new Api.Widgets.Members({id:options.widgetId},{widget:options.widget});this.widget=this.members.widget}});Api.Widgets.Members.Share=Share;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Note=Api.Widgets.Base.extend({allowedCRUD:["read","update"],url:function(){return this.widget.url()+"/me/note"},initialize:function(attrs,options){this._super.apply(this,arguments);this.widget.note=this},defaults:{note:""}});Api.Widgets.Note=Note;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var WidgetInActiveInfo={message:"",redirectUrl:""};var State=Api.Widgets.Base.extend({allowedCRUD:["update"],url:function(){return this.widget.url()+"/state"},initialize:function(attrs,options){this._super.apply(this,arguments);this.widget.state=this;this.eTagParent=this.widget},defaults:{state:"",widgetInActiveInfo:WidgetInActiveInfo}});Api.Widgets.State=State;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Views=Api.Widgets.Base.extend({idAttribute:"widgetId",allowedCRUD:["create"],url:function(){return this.widget.url()+"/views"},initialize:function(attrs,options){this._super.apply(this,arguments);this.widget.views=this;this.list=new Api.Helpers.Views()},validate:function(attrs,options){if(!attrs.name){return"Attribute name is required"}if(!Api._.contains(Views.NAME,attrs.name)){return"Attribute name is not one of the following: ["+Api._.keys(Views.NAME).join(", ")+"]"}},getNextURL:function(){return this.list.getNextURL()},parse:function(response){this.list.reset(response.widgetViewList);return null},saveUntil:Backbone.retrySync("save",{doneCondition:function(){return !!this.getNextURL()}}),defaults:{name:null,commonViewConfiguration:{autoLoginUser:false,locale:"",noChrome:false}}},{NAME:Api.Utils.makeObj(["AUTHORING","DOCUMENT","MANAGE","POST_CREATE","SIGNING","ALL"])});Api.Widgets.Views=Views;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Visibility=Api.Widgets.Base.extend({allowedCRUD:["update"],url:function(){return this.widget.url()+"/me/visibility"},initialize:function(attrs,options){this._super.apply(this,arguments);this.widget.visibility=this;this.eTagParent=this.widget},show:function(){this.set("visibility","SHOW");return this},hide:function(){this.set("visibility","HIDE");return this},defaults:{visibility:""}});Api.Widgets.Visibility=Visibility;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var MAX_PARTICIPANT_SET_NAME=255;var WidgetMemberInfos=Backbone.Collection.extend({model:Backbone.Model.extend({validate:function(){if(!Api.Utils.isValidEmail(this.get("email"))){return[{key:"RecipientInfo:email:required",message:Api.i18n("compose_recipient_error_invalid_email_bis",this.get("email"))}]}},defaults:{email:"",securityOption:{}}})});var WidgetParticipantSetInfo=Backbone.Model.extend({defaults:{memberInfos:WidgetMemberInfos,role:""}});var WidgetAdditionalParticipantSetsInfo=Backbone.Collection.extend({model:Backbone.Model.extend({validate:function(){var errors=[],name=this.get("name");errors=errors.concat(this.get("memberInfos").validate());if(name&&name.length>MAX_PARTICIPANT_SET_NAME){errors.push({key:"RecipientSetInfo:recipientSetName:tooLong",message:Api.i18n("agreement_recipient_set_name_too_long")})}errors=_.compact(errors);return errors.length?errors:undefined},defaults:{memberInfos:WidgetMemberInfos,order:0,role:"",name:""}})});var WidgetCCs=Backbone.Collection.extend({model:Backbone.Model.extend({validate:function(){if(!Api.Utils.isValidEmail(this.get("email"))){return[{key:"CCInfo:email:required",message:Api.i18n("compose_recipient_error_invalid_email_bis",this.get("email"))}]}},defaults:{email:""}})});var Widget=Api.Widgets.Base.extend({allowedCRUD:["read","create","update"],initialize:function(attrs,options){options=options||{};this.note=options.note||new Api.Widgets.Note({id:this.id},{widget:this});this.visibility=options.visibility||new Api.Widgets.Visibility({id:this.id},{widget:this});this.combinedDocument=options.combinedDocument||new Api.Widgets.CombinedDocument({id:this.id},{widget:this});this.members=options.members||new Api.Widgets.Members({id:this.id},{widget:this});this.state=options.state||new Api.Widgets.State({id:this.id},{widget:this});this.events=options.events||new Api.Widgets.Events(null,{widget:this});this.auditTrail=options.auditTrail||new Api.Widgets.AuditTrail({id:this.id},{widget:this});this.formData=options.formData||new Api.Widgets.FormData({id:this.id},{widget:this});this.views=options.views||new Api.Widgets.Views({id:this.id},{widget:this});this.documents=options.documents||new Api.Widgets.Documents(null,{widget:this});this.me=options.me||new Api.Widgets.Me(null,{widget:this});this.imageUrls=this.documents.imageUrls},isAuthoring:function(){return this.get("status")===Widget.STATUS.AUTHORING},isDisabled:function(){return this.get("status")===Widget.STATUS.DISABLED},isActive:function(){return this.get("status")===Widget.STATUS.ACTIVE},isOutForCompletion:function(){return false},validate:function(){var errors=[];if(!this.isNew()){return}if(!this.get("name")){error={key:"widget:name",message:Api.i18n("createWidget_pleaseNameYourWidget")};errors.push(error)}errors=errors.concat(this.get("additionalParticipantSetsInfo").validate());errors=errors.concat(this.get("ccs").validate());errors=errors.concat(this.get("fileInfos").validate());errors=_.compact(errors);return errors.length>0?errors:undefined},defaults:{additionalParticipantSetsInfo:WidgetAdditionalParticipantSetsInfo,authFailureInfo:{},ccs:WidgetCCs,completionInfo:{},createdDate:"",creatorEmail:"",documentRetentionApplied:false,fileInfos:Api.Helpers.FileInfos,groupId:"",locale:"",name:"",securityOption:{openPassword:Api.Helpers.Password},state:"",status:"",vaultingInfo:{},widgetInActiveInfo:{},widgetParticipantSetInfo:WidgetParticipantSetInfo}},{STATUS:Api.Utils.makeObj(["ACTIVE","AUTHORING","DISABLED","DISCARDED","DOCUMENTS_NOT_YET_PROCESSED","DRAFT"]),STATE:Api.Utils.makeObj(["DRAFT","AUTHORING","ACTIVE","INACTIVE","CANCELLED"])});Api.Widgets.Widget=Widget;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Widgets=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Widgets.Widget}else{ModelClass=Widgets.WidgetsList}return new ModelClass(attrs,options)};Widgets.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("widgets"),allowedCRUD:[],initialize:function(attrs,options){options=options||{};if(!options.widget&&!(attrs&&attrs.id)){throw new Error("A widget is required.")}this.widget=options.widget||new Api.Widgets({id:attrs.id},options)}});Api.Widgets=Widgets;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var UserWidget=Backbone.Model.extend({defaults:{hidden:false,id:"",javascript:"",modifiedDate:"",name:"",status:"",url:""}});var WidgetsList=Backbone.Collection.extend({model:UserWidget,url:Api.Widgets.Base.prototype.urlRoot,allowedCRUD:["read"],initialize:function(){this._super.apply(this,arguments);this.page={}},parse:function(response){this.page=response.page;return response.userWidgetList}});Api.Widgets.WidgetsList=WidgetsList;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var WorkflowCCListInfo=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{defaultValues:[""],editable:false,label:"",maxListCount:1,minListCount:1,name:"",required:false,visible:false}})});var WorkflowLibraryDocumentSelectorListInfo=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{label:"",modifiedDate:"",sharingMode:"",templateTypes:[""],workflowLibDoc:""}})});var WorkflowFileInfos=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{label:"",name:"",required:false,workflowLibraryDocumentSelectorList:WorkflowLibraryDocumentSelectorListInfo}})});var WorkflowMergeFieldsInfo=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{defaultValue:"",displayName:"",editable:false,fieldName:"",required:false,visible:false}})});var WorkflowRecipientListInfo=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{allowSender:false,allowfax:false,authenticationMethod:"",defaultValue:"",editable:false,label:"",maxListCount:"",minListCount:"",name:"",visible:false}})});var Workflow=Api.Workflows.Base.extend({allowedCRUD:["read"],defaults:{agreementNameInfo:{},authoringInfo:{},created:"",ccsListInfo:WorkflowCCListInfo,description:"",displayName:"",expirationInfo:{},fileInfos:WorkflowFileInfos,localeInfo:{},mergeFieldsInfo:WorkflowMergeFieldsInfo,messageInfo:{},modified:"",name:"",passwordInfo:{},recipientsListInfo:WorkflowRecipientListInfo,scope:"",status:"",scopeId:""}},{SCOPE:Api.Utils.makeObj(["ACCOUNT","GROUP","OTHER","USER"]),STATUS:Api.Utils.makeObj(["ACTIVE","DRAFT","INACTIVE","OTHER"])});Api.Workflows.Workflow=Workflow;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var Workflows=function(attrs,options){var ModelClass;if(attrs&&attrs.id){ModelClass=Api.Workflows.Workflow}else{ModelClass=Api.Workflows.WorkflowsList}return new ModelClass(attrs,options)};Workflows.Base=Backbone.Model.extend({urlRoot:Api.getServiceUri("workflows"),allowedCRUD:[]});Api.Workflows=Workflows;return Api});module.exports=fn}),(function(module,exports){var fn=Backbone._.once(function(Api){var ListItem=Backbone.Model.extend({defaults:{created:"",description:"",displayName:"",id:"",name:"",scope:"",status:"",scopeId:""}});var WorkflowsList=Backbone.Collection.extend({allowedCRUD:["read"],model:ListItem,url:Api.Workflows.Base.prototype.urlRoot,initialize:function(){},parse:function(response){return response.userWorkflowList}});Api.Workflows.WorkflowsList=WorkflowsList;return Api});module.exports=fn}),(function(module,exports,__webpack_require__){var map={"./en-US.json":18};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1)){throw new Error("Cannot find module '"+req+"'.")}return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=226}),(function(module,exports,__webpack_require__){var map={"./en-US.json":19};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1)){throw new Error("Cannot find module '"+req+"'.")}return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=227}),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(function(module,exports,__webpack_require__){Backbone._=_;module.exports=__webpack_require__(30)()})])});(function(j,m,e){var b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var v={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var p={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var w;for(var r=1;r<20;++r){b[111+r]="f"+r}for(r=0;r<=9;++r){b[r+96]=r}function s(i,x,y){if(i.addEventListener){i.addEventListener(x,y,false);return}i.attachEvent("on"+x,y)}function u(x){if(x.type=="keypress"){var i=String.fromCharCode(x.which);if(!x.shiftKey){i=i.toLowerCase()}return i}if(b[x.which]){return b[x.which]}if(h[x.which]){return h[x.which]}return String.fromCharCode(x.which).toLowerCase()}function k(x,i){return x.sort().join(",")===i.sort().join(",")}function f(x){var i=[];if(x.shiftKey){i.push("shift")}if(x.altKey){i.push("alt")}if(x.ctrlKey){i.push("ctrl")}if(x.metaKey){i.push("meta")}return i}function l(i){if(i.preventDefault){i.preventDefault();return}i.returnValue=false}function t(i){if(i.stopPropagation){i.stopPropagation();return}i.cancelBubble=true}function o(i){return i=="shift"||i=="ctrl"||i=="alt"||i=="meta"}function d(){if(!w){w={};for(var i in b){if(i>95&&i<112){continue}if(b.hasOwnProperty(i)){w[b[i]]=i}}}return w}function n(x,i,y){if(!y){y=d()[x]?"keydown":"keypress"}if(y=="keypress"&&i.length){y="keydown"}return y}function c(i){if(i==="+"){return["+"]}i=i.replace(/\+{2}/g,"+plus");return i.split("+")}function q(A,C){var B;var z;var y;var x=[];B=c(A);for(y=0;y<B.length;++y){z=B[y];if(p[z]){z=p[z]}if(C&&C!="keypress"&&v[z]){z=v[z];x.push("shift")}if(o(z)){x.push(z)}}C=n(z,x,C);return{key:z,modifiers:x,action:C}}function a(x,i){if(x===m){return false}if(x===i){return true}return a(x.parentNode,i)}function g(G){var J=this;G=G||m;if(!(J instanceof g)){return new g(G)}J.target=G;J._callbacks={};J._directMap={};var B={};var A;var x=false;var z=false;var E=false;function H(K){K=K||{};var M=false,L;for(L in B){if(K[L]){M=true;continue}B[L]=0}if(!M){E=false}}function D(P,T,Q,V,R,K){var N;var U;var O=[];var L=Q.type;if(!J._callbacks[P]){return[]}if(L=="keyup"&&o(P)){T=[P]}for(N=0;N<J._callbacks[P].length;++N){U=J._callbacks[P][N];if(!V&&U.seq&&B[U.seq]!=U.level){continue}if(L!=U.action){continue}if((L=="keypress"&&!Q.metaKey&&!Q.ctrlKey)||k(T,U.modifiers)){var S=!V&&U.combo==R;var M=V&&U.seq==V&&U.level==K;if(S||M){J._callbacks[P].splice(N,1)}O.push(U)}}return O}function i(N,L,K,M){if(J.stopCallback(L,L.target||L.srcElement,K,M)){return}if(N(L,K)===false){l(L);t(L)}}J._handleKey=function(O,R,P){var Q=D(O,R,P);var M;var L={};var S=0;var N=false;for(M=0;M<Q.length;++M){if(Q[M].seq){S=Math.max(S,Q[M].level)}}for(M=0;M<Q.length;++M){if(Q[M].seq){if(Q[M].level!=S){continue}N=true;L[Q[M].seq]=1;i(Q[M].callback,P,Q[M].combo,Q[M].seq);continue}if(!N){i(Q[M].callback,P,Q[M].combo)}}var K=P.type=="keypress"&&z;if(P.type==E&&!o(O)&&!K){H(L)}z=N&&P.type=="keydown"};function F(L){if(typeof L.which!=="number"){L.which=L.keyCode}var K=u(L);if(!K){return}if(L.type=="keyup"&&x===K){x=false;return}J.handleKey(K,f(L),L)}function C(){clearTimeout(A);A=setTimeout(H,1000)}function I(M,R,P,N){B[M]=0;function Q(T){return function(){E=T;++B[M];C()}}function S(T){i(P,T,M);if(N!=="keyup"){x=u(T)}setTimeout(H,10)}for(var O=0;O<R.length;++O){var L=O+1===R.length;var K=L?S:Q(N||q(R[O+1]).action);y(R[O],K,N,M,O)}}function y(K,Q,L,N,P){J._directMap[K+":"+L]=Q;K=K.replace(/\s+/g," ");var O=K.split(" ");var M;if(O.length>1){I(K,O,Q,L);return}M=q(K,L);J._callbacks[M.key]=J._callbacks[M.key]||[];D(M.key,M.modifiers,{type:M.action},N,K,P);J._callbacks[M.key][N?"unshift":"push"]({callback:Q,modifiers:M.modifiers,action:M.action,seq:N,level:P,combo:K})}J._bindMultiple=function(L,N,M){for(var K=0;K<L.length;++K){y(L[K],N,M)}};s(G,"keypress",F);s(G,"keydown",F);s(G,"keyup",F)}g.prototype.bind=function(x,z,y){var i=this;x=x instanceof Array?x:[x];i._bindMultiple.call(i,x,z,y);return i};g.prototype.unbind=function(x,y){var i=this;return i.bind.call(i,x,function(){},y)};g.prototype.trigger=function(x,y){var i=this;if(i._directMap[x+":"+y]){i._directMap[x+":"+y]({},x)}return i};g.prototype.reset=function(){var i=this;i._callbacks={};i._directMap={};return i};g.prototype.stopCallback=function(y,x){var i=this;if((" "+x.className+" ").indexOf(" mousetrap ")>-1){return false}if(a(x,i.target)){return false}return x.tagName=="INPUT"||x.tagName=="SELECT"||x.tagName=="TEXTAREA"||x.isContentEditable};g.prototype.handleKey=function(){var i=this;return i._handleKey.apply(i,arguments)};g.init=function(){var x=g(m);for(var i in x){if(i.charAt(0)!=="_"){g[i]=(function(y){return function(){return x[y].apply(x,arguments)}}(i))}}};g.init();j.Mousetrap=g;if(typeof module!=="undefined"&&module.exports){module.exports=g}if(typeof define==="function"&&define.amd){define(function(){return g})}})(window,document);(function(c){var b="0,1,2,3,4,5,6,7,8,9";var a=1000;var f=c.prototype.bind;c.prototype.bind=function(i,l,j){if(i instanceof Array){return f.apply(this,arguments)}var g=i,k=g;if(g==="number"){this._bindMultiple.call(this,b.split(","),l,j);return this}if(/numbers?/.test(g)){g=g.replace(/\s*numbers?\s*/,"");g=g.replace(/\s+/g," ");var h=new d(l,k,!g);if(g){this._bindMultiple.call(this,[g],e(h.onSeqComplete,h),j)}this.bind("number",e(h.onNumber,h),j);return this}return f.apply(this,arguments)};var e=function(h,g){return function(){h.apply(g,arguments)}};function d(i,h,g){this.numbers=[];this.combo=h;this.keyTimer=null;this.callback=i;this.executeOnLast=/numbers?$/.test(h);this.seqOK=g}d.prototype={onNumber:function(h,g){this.numbers.push(g);this.keyPing();this.lastEvent=h},keyPing:function(){var g=this;if(this.keyTimer){clearTimeout(this.keyTimer)}this.keyTimer=setTimeout(function(){if(g.executeOnLast){g.execute()}g.reset()},a)},reset:function(){this.numbers=[];this.seqOK=false},execute:function(){if(this.seqOK&&this.numbers.length){this.callback(this.lastEvent,this.combo,this.getNumber());this.reset();return true}return false},getNumber:function(){return Number(this.numbers.join(""))},onSeqComplete:function(){this.seqOK=true;if(!this.executeOnLast&&this.execute()){return}this.reset();this.seqOK=true;this.keyPing()}}})(Mousetrap);(function(){var a={};a.main=_.template('<div class="help-content help-container">{{content}}</div>');a.block=_.template('<div class="help-block">{{block}}</div>');a.line=_.template('<div class="help-line">{{line}}</div>');a.keyCell=_.template('<div class="help-key-cell">{{cell}}</div>');a.cell=_.template('<div class="help-cell">{{cell}}</div>');a.titleCell=_.template('<div class="help-section-title help-cell">{{cell}}</div>');a.key=_.template('<span class="help-key">{{key}}</span>');a.delim=_.template('<span class="help-key-delimiter">{{delim}}</span>');App.ns("Templates.Components").Shortcuts=a}());(function(){var c=/^mac/i.test(navigator.platform),b=750;var a=Backbone.View.extend({template:App.Templates.Components.Shortcuts,title:i18n.js.shortcuts_shortcuts(),delimiter:":",modalOptions:{content:"",classes:"shortcuts "+(c?"platform-mac":""),close:true,closeBtn:"",primaryBtn:"",show:false},templateData:[],i18nMap:{TAB:"Tab",SHIFT:"Shift",CMD:c?"Cmd":"Ctrl",ALT:c?"Opt":"Alt",DELETE:"Delete",ESC:"Esc",ENTER:"Enter",CLICK:i18n.js.shortcuts_click(),number:i18n.js.shortcuts_number()},reSplitKeys:new RegExp(/\s+/),reKey:new RegExp(/^\[(.*)\]$/),initialize:function(){_.defaults(this.options,this.modalOptions,{title:this.title})},render:function(){var d=this;if(!this.options.content){this.options.content=this.toHTML()}this.$dialog=App.Utils.createModal(this.options);this.$dialog.on("hidden.bs.modal",function(){d._toggleable_shown=false});return this},show:function(){if(!this.$dialog){this.render()}this.$dialog.modal("show")},hide:function(){this.$dialog&&this.$dialog.modal("hide")},toggle:_.throttle(function(d){d?this.show():this.hide();return this},b),localize:function(e){var d=this.i18nMap;return e.replace(/\w+/g,function(f){return f in d?d[f]:f})},toTemplate:function(){var d=_(_.result(this,"templateData")).chain().compact().map(this.toBlock,this).value();return{content:d.join("")}},toBlock:function(f){var e=this.template.line({line:this.toKeyCell()+this.template.titleCell({cell:f.title})}),d=_(f.content).map(this.toLine,this);return this.template.block({block:e+d.join("")})},toLine:function(d,e){e=_(e.split(this.reSplitKeys)).compact();if(e.length){e.push(this.delimiter)}return this.template.line({line:this.toKeyCell(e)+this.toCell(d)})},toKeyCell:function(d){var e=_(d).map(function(g){var f=this.reKey.exec(g);if(f){return this.template.key({key:this.localize(f[1])})}else{return this.template.delim({delim:this.localize(g)})}},this).join("");return this.template.keyCell({cell:e})},toCell:function(d){return this.template.cell({cell:d})},toHTML:function(){return this.template.main(this.toTemplate())},remove:function(){if(this.$dialog){this.$dialog.data("bs.modal")._removeBackdrop();this.$dialog.empty().removeData().remove();this.$dialog=null}this._super()}},App.Mixins.Toggleable);App.ns("Views.Components").Shortcuts=a}());var NumberFormatter={validFormatChars:"@$09,.+-_()",format:function(e,q){var h="";if(q.toString().toLowerCase()=="accounting"){q="@,0.00"}else{if(q.toString().toLowerCase()=="default"){q=",0.00"}else{if(q.toString().toLowerCase()=="currency"){q="$,0.00"}}}for(var g=0;g<q.length;g++){var m=q.charAt(g);if(NumberFormatter.validFormatChars.indexOf(m)==-1){h=h+m}else{break}}var r="";for(var g=q.length-1;g>=0;g--){var m=q.charAt(g);if(NumberFormatter.validFormatChars.indexOf(m)==-1){r=m+r}else{break}}q=q.substring(h.length);var j=q.length-r.length;if(j>0){q=q.substring(0,j)}else{q=""}if(q==""&&h==r){if(h=="%"){h=""}else{r=""}}if(q==""){q="9.9999999999";if(h!=""){h=h.trim()+" "}}var s=q.indexOf("$")===0;var a=q.indexOf(",")>-1;var o=q.indexOf("(")>-1&&q.indexOf(")")>-1;var p=!o&&q.indexOf("+")>-1;var f=!o&&!p&&q.indexOf("-")>-1;var l=q.indexOf("@")>-1;var b="";for(var g=0;g<q.length;g++){var m=q.charAt(g);if(m==="$"||m===","||m==="("||m===")"||m==="+"||m==="-"){continue}if(NumberFormatter.validFormatChars.indexOf(m)>-1){if(m==="."&&b.indexOf(m)>-1){continue}if(m==="_"){m="9"}b=""+b+m}}var d;if(typeof e==="number"){d=e.toString()}else{try{d=NumberFormatter.parseNumber(e.toString());d=d.toString()}catch(k){d=undefined}}return NumberFormatter._formatNumber(d,b,r,h,s,a,o,p,f,l)},_cultureValue:function(b,c,e,d){var a=c;if(NumberFormatter.CultureInfo&&NumberFormatter.CultureInfo.numberFormat){if(NumberFormatter.CultureInfo.numberFormat[b]){a=NumberFormatter.CultureInfo.numberFormat[b];if(a.indexOf("&")>-1){a=jQuery("<div></div>").html(a).text();NumberFormatter.CultureInfo.numberFormat[b]=a}}if(e&&NumberFormatter.CultureInfo.numberFormat.percent&&NumberFormatter.CultureInfo.numberFormat.percent[b]){a=NumberFormatter.CultureInfo.numberFormat.percent[b];if(a.indexOf("&")>-1){a=jQuery("<div></div>").html(a).text();NumberFormatter.CultureInfo.numberFormat.percent[b]=a}}else{if(d&&NumberFormatter.CultureInfo.numberFormat.currency&&NumberFormatter.CultureInfo.numberFormat.currency[b]){a=NumberFormatter.CultureInfo.numberFormat.currency[b];if(a.indexOf("&")>-1){a=jQuery("<div></div>").html(a).text();NumberFormatter.CultureInfo.numberFormat.currency[b]=a}}}}return a},_formatNumber:function(d,y,f,w,b,H,p,F,g,t){if(isNaN(d)||d===""){return NumberFormatter._cultureValue("NaN","NaN")}if(d==0&&t){return" - "}var m=d<0;var a=f==="%";if(a){d=d*100;b=false;f=""}var l="";var h="";if(y.indexOf(".")>-1){h=y.substring(y.indexOf(".")+1)}if(h!=""&&h!="."){var q=NumberFormatter._cultureValue(".",".",a,b);d=new Number(NumberFormatter._roundNumber(d,h.length));var k=d%1;if(d<0){d=Math.ceil(d)}else{d=Math.floor(d)}k=new Number(NumberFormatter._roundNumber(Math.abs(k),h.length));var n=new String(k);n=n.substring(n.indexOf(".")+1);for(var x=0;x<h.length;x++){var D=h.charAt(x)==="0"?"0":"";if(n.length>x){D=n.charAt(x)}q+=D}l=q}else{d=Math.round(d)}var j=d;var o="";if(y.indexOf(".")==-1){o=y}else{o=y.substring(0,y.indexOf("."))}var B="";if(m){j=Math.abs(j)}if(j>0||o!=""){B=new String(j);if(o.length>B.length){var v=true;for(var x=o.length-B.length-1;x>-1;x--){var s=o.charAt(x)==="0";var G=o.charAt(x)==="9";v=v&&(s||G);if(v){if(s){B="0"+B}else{if(G){B=" "+B}}}}}if(H){var A=NumberFormatter._cultureValue("groupSizes",[3],a,b);var e=1;var u=A[e-1];var r=0;if(u>0){var E=NumberFormatter._cultureValue(",",",",a,b);var C="";for(var x=B.length-1;x>-1;x--){C=""+B.charAt(x)+C;r++;if(r%u===0&&x>0){C=E+C;e++;if(A.length>e){u=A[e-1]}}}B=C}}}l=B+l;if(F||p||g){if(p){if(m){l="("+l+")"}}if(F){if(m){l="-"+l}else{l="+"+l}}else{if(g){if(m){l="-"+l}else{l=" "+l}}}if(a){l=l+"%"}}var z=["-n","n"];if(F||p||g){z=""}if(a){z=["-n%","n%"]}else{if(b){z=["$-n","$n"]}}if(z!=""){z=NumberFormatter._cultureValue("pattern",z,a,b);if(m&&!p&&!F&&!g){z=z[0]}else{z=z[1]}l=z.replace("n",l);if(b){l=l.replace("$",NumberFormatter._cultureValue("symbol","$",false,true))}}return w+l+f},_roundNumber:function(b,a){var c=String(Number(Math.round(b+"e+"+a)+"e-"+a));if(a>0){var d=c.indexOf(".");if(d==-1){c+=".";d=0}else{d=c.length-(d+1)}while(d<a){c+="0";d++}}return c},parseNumber:function(d){var n=d.trim();if(n===""){throw new Error("An empty string is not a number")}var h=n.indexOf("%");var b=false;if(h==n.length-1){n=n.substring(0,n.length-1).trim();b=true}else{var f=NumberFormatter._cultureValue("symbol","$",false,true);var p=n.indexOf(f);if(p==-1&&f!="$"){f="$";p=n.indexOf(f)}if(p==-1){f="£";p=n.indexOf(f)}if(p>-1){var j=n.substring(0,p);n=String.prototype.trim.call(j+n.substring(p+f.length))}}var r="";var e=NumberFormatter._cultureValue(".",".");var q=NumberFormatter._cultureValue(",",",");var k=false;for(var g=0;g<n.length;g++){var m=n.charAt(g);if(g===0&&m==="-"){r="-"}else{if(g===0&&m==="+"){continue}else{if(g===0&&m==="("){k=true}else{if(k&&(g===n.length-1)&&m===")"){r="-"+r}else{if(m>="0"&&m<="9"){r+=""+m}else{if((m==="e"||m==="E")&&r.indexOf("e")==-1){r+="e"}else{if(m==="+"||m==="-"){if(r.indexOf("e")==r.length-1){r+=m}else{throw new Error("The "+m+" character is not valid at the "+g+" position")}}else{if(e===m&&r.indexOf(e)==-1){r+="."}else{if(q===m||" "===m){continue}else{if(m==="."&&e!=="."&&NumberFormatter.CultureInfo.name!=="en-US"){var o=NumberFormatter.CultureInfo.name;try{NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["en-US"];return this.parseNumber(d)}catch(l){throw l}finally{NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos[o]}}throw new Error("The following is not a number: "+d)}}}}}}}}}}var a=parseFloat(r.toString());if(b){a=a/100}return a}};if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["ca-ES"]={name:"ca-ES",englishName:"Spanish (Spain, International Sort)",nativeName:"Español (Espanya, alfabetización internacional)",language:"ca",numberFormat:{",":".",".":",","NaN":"NeuN",negativeInfinity:"-Infinito",positiveInfinity:"Infinito",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["ca-ES"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["da-DK"]={name:"da-DK",englishName:"Danish (Denmark)",nativeName:"dansk (Danmark)",language:"da",numberFormat:{",":".",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"kr."}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["da-DK"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["de-DE"]={name:"de-DE",englishName:"German (Germany)",nativeName:"Deutsch (Deutschland)",language:"de",numberFormat:{",":".",".":",","NaN":"n. def.",negativeInfinity:"-unendlich",positiveInfinity:"+unendlich",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["de-DE"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["en-GB"]={name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"&#163;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["en-GB"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["en-US"]={name:"en-US",englishName:"English (United States)"};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["en-US"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["es-ES"]={name:"es-ES",englishName:"Spanish (Spain, International Sort)",nativeName:"Español (España, alfabetización internacional)",language:"es",numberFormat:{",":".",".":",","NaN":"NeuN",negativeInfinity:"-Infinito",positiveInfinity:"Infinito",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["es-ES"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["fi-FI"]={name:"fi-FI",englishName:"Finnish (Finland)",nativeName:"suomi (Suomi)",language:"fi",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":"&nbsp;",".":","},currency:{pattern:["-n $","n $"],",":"&nbsp;",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["fi-FI"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["fr-FR"]={name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":"&nbsp;",".":",","NaN":"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":"&nbsp;",".":","},currency:{pattern:["-n $","n $"],",":"&nbsp;",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["fr-FR"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["in-ID"]={name:"in-ID",englishName:"Indonesian (Indonesia)",nativeName:"Bahasa Indonesia (Indonesia)",language:"in",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{decimals:0,",":".",".":",",symbol:"Rp"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["in-ID"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["is-IS"]={name:"is-IS",englishName:"Icelandic (Iceland)",nativeName:"íslenska (Ísland)",language:"is",numberFormat:{",":".",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":".",".":",",symbol:"kr."}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["is-IS"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["it-IT"]={name:"it-IT",englishName:"Italian (Italy)",nativeName:"italiano (Italia)",language:"it",numberFormat:{",":".",".":",","NaN":"Non un numero reale",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["it-IT"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["ja-JP"]={name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",language:"ja",numberFormat:{"NaN":"NaN (非数値)",negativeInfinity:"-∞",positiveInfinity:"+∞",percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"&#165;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["ja-JP"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["ko-KR"]={name:"ko-KR",englishName:"Korean (Korea)",nativeName:"한국어 (대한민국)",language:"ko",numberFormat:{currency:{pattern:["-$n","$n"],decimals:0,symbol:"&#8361;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["ko-KR"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["ms-MY"]={name:"ms-MY",englishName:"Malay (Malaysia)",nativeName:"Bahasa Melayu (Malaysia)",language:"ms",numberFormat:{currency:{decimals:0,symbol:"RM"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["ms-MY"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["nb-NO"]={name:"nb-NO",englishName:"Norwegian, Bokmål (Norway)",nativeName:"norsk, bokmål (Norge)",language:"nb",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":"&nbsp;",".":","},currency:{pattern:["$ -n","$ n"],",":"&nbsp;",".":",",symbol:"kr"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["nb-NO"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["nl-NL"]={name:"nl-NL",englishName:"Dutch (Netherlands)",nativeName:"Nederlands (Nederland)",language:"nl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["nl-NL"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["nn-NO"]={name:"nn-NO",englishName:"Norwegian, Nynorsk (Norway)",nativeName:"norsk, nynorsk (Noreg)",language:"nn",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":"&nbsp;",".":","},currency:{pattern:["$ -n","$ n"],",":"&nbsp;",".":",",symbol:"kr"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["nn-NO"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["no-NO"]={name:"no-NO",englishName:"Norwegian",nativeName:"norsk",language:"no",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":"&nbsp;",".":","},currency:{pattern:["$ -n","$ n"],",":"&nbsp;",".":",",symbol:"kr"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["no-NO"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["pl-PL"]={name:"pl-PL",englishName:"Polish (Poland)",nativeName:"polski (Polska)",language:"pl",numberFormat:{",":"&nbsp;",".":",","NaN":"nie jest liczbą",negativeInfinity:"-nieskończoność",positiveInfinity:"+nieskończoność",percent:{pattern:["-n%","n%"],",":"&nbsp;",".":","},currency:{pattern:["-n $","n $"],",":"&nbsp;",".":",",symbol:"z&#322;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["pl-PL"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["pt-BR"]={name:"pt-BR",englishName:"Portuguese (Brazil)",nativeName:"Português (Brasil)",language:"pt",numberFormat:{",":".",".":",","NaN":"NaN (Não é um número)",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"R$"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["pt-BR"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["pt-PT"]={name:"pt-PT",englishName:"Portuguese (Portugal)",nativeName:"português (Portugal)",language:"pt",numberFormat:{",":".",".":",","NaN":"NaN (Não é um número)",negativeInfinity:"-Infinito",positiveInfinity:"+Infinito",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"&#8364;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["pt-PT"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["ru-RU"]={name:"ru-RU",englishName:"Russian (Russia)",nativeName:"русский (Россия)",language:"ru",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-бесконечность",positiveInfinity:"бесконечность",percent:{pattern:["-n%","n%"],",":"&nbsp;",".":","},currency:{pattern:["-n$","n$"],",":"&nbsp;",".":",",symbol:"&#1088;&#1091;&#1073;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["ru-RU"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["sv-SE"]={name:"sv-SE",englishName:"Swedish (Sweden)",nativeName:"svenska (Sverige)",language:"sv",numberFormat:{",":"&nbsp;",".":",",negativeInfinity:"-INF",positiveInfinity:"INF",percent:{",":"&nbsp;",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["sv-SE"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["th-TH"]={name:"th-TH",englishName:"Thai (Thailand)",nativeName:"ไทย (ไทย)",language:"th",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"&#3647;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["th-TH"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["vi-VN"]={name:"vi-VN",englishName:"Vietnamese (Vietnam)",nativeName:"Tiếng Việt (Việt Nam)",language:"vi",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"&#8363;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["vi-VN"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["zh-CN"]={name:"zh-CN",englishName:"Chinese (Simplified, PRC)",nativeName:"中文(中华人民共和国)",language:"zh-CHS",numberFormat:{"NaN":"非数字",negativeInfinity:"负无穷大",positiveInfinity:"正无穷大",percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"&#165;"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["zh-CN"];if(!NumberFormatter.AllCultureInfos){NumberFormatter.AllCultureInfos={}}NumberFormatter.AllCultureInfos["zh-TW"]={name:"zh-TW",englishName:"Chinese (Traditional, Taiwan)",nativeName:"中文(台灣)",language:"zh-CHT",numberFormat:{"NaN":"不是一個數字",negativeInfinity:"負無窮大",positiveInfinity:"正無窮大",percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],symbol:"NT$"}}};NumberFormatter.CultureInfo=NumberFormatter.AllCultureInfos["zh-TW"];if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ca-ES"]={name:"ca-ES",englishName:"Spanish (Spain)",nativeName:"español (España)",dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],abbreviatedDayNames:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],shortestDayNames:["do.","lu.","ma.","mi.","ju.","vi.","sá."],firstLetterDayNames:["d","l","m","m","j","v","s"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],abbreviatedMonthNames:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd, d' de 'MMMM' de 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM' de 'yyyy"},regexPatterns:{jan:/^ene(ro)?/i,feb:/^feb(rero)?/i,mar:/^mar(zo)?/i,apr:/^abr(il)?/i,may:/^may(o)?/i,jun:/^jun(io)?/i,jul:/^jul(io)?/i,aug:/^ago(sto)?/i,sep:/^sep(tiembre)?/i,oct:/^oct(ubre)?/i,nov:/^nov(iembre)?/i,dec:/^dic(iembre)?/i,sun:/^do(m(ingo)?)?/i,mon:/^lu(n(es)?)?/i,tue:/^ma(r(tes)?)?/i,wed:/^mi(é(rcoles)?)?/i,thu:/^ju(e(ves)?)?/i,fri:/^vi(e(rnes)?)?/i,sat:/^sá(b(ado)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["cs-CZ"]={name:"cs-CZ",englishName:"Czech (Czech Republic)",nativeName:"čeština (Česká republika)",dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],abbreviatedDayNames:["ne","po","út","st","čt","pá","so"],shortestDayNames:["ne","po","út","st","čt","pá","so"],firstLetterDayNames:["n","p","ú","s","č","p","s"],monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],abbreviatedMonthNames:["led","ún","břez","dub","květ","červ","červen","srp","zář","říj","list","pros"],amDesignator:"dop.",pmDesignator:"odp.",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"d.M.yyyy",longDate:"d. MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d. MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^leden/i,feb:/^únor/i,mar:/^březen/i,apr:/^duben/i,may:/^květen/i,jun:/^červen/i,jul:/^červenec/i,aug:/^srpen/i,sep:/^září/i,oct:/^říjen/i,nov:/^listopad/i,dec:/^prosinec/i,sun:/^neděle/i,mon:/^pondělí/i,tue:/^úterý/i,wed:/^středa/i,thu:/^čtvrtek/i,fri:/^pátek/i,sat:/^sobota/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["da-DK"]={name:"da-DK",englishName:"Danish (Denmark)",nativeName:"dansk (Danmark)",dayNames:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],abbreviatedDayNames:["sø","ma","ti","on","to","fr","lø"],shortestDayNames:["sø","ma","ti","on","to","fr","lø"],firstLetterDayNames:["s","m","t","o","t","f","l"],monthNames:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],abbreviatedMonthNames:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd-MM-yyyy",longDate:"d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^mar(ts)?/i,apr:/^apr(il)?/i,may:/^maj/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^søndag/i,mon:/^mandag/i,tue:/^tirsdag/i,wed:/^onsdag/i,thu:/^torsdag/i,fri:/^fredag/i,sat:/^lørdag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["de-DE"]={name:"de-DE",englishName:"German (Germany)",nativeName:"Deutsch (Deutschland)",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],abbreviatedDayNames:["So","Mo","Di","Mi","Do","Fr","Sa"],shortestDayNames:["So","Mo","Di","Mi","Do","Fr","Sa"],firstLetterDayNames:["S","M","D","M","D","F","S"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],abbreviatedMonthNames:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"dddd, d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dddd, d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^märz/i,apr:/^apr(il)?/i,may:/^mai/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dez(ember)?/i,sun:/^sonntag/i,mon:/^montag/i,tue:/^dienstag/i,wed:/^mittwoch/i,thu:/^donnerstag/i,fri:/^freitag/i,sat:/^samstag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["en-GB"]={name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"d MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["en-US"]={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"MM/dd/yyyy",longDate:"dddd, MMMM d, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.CultureInfo=Date.AllCultureInfos["en-US"];if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["es-ES"]={name:"es-ES",englishName:"Spanish (Spain)",nativeName:"español (España)",dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],abbreviatedDayNames:["dom","lun","mar","mié","jue","vie","sáb"],shortestDayNames:["do","lu","ma","mi","ju","vi","sá"],firstLetterDayNames:["d","l","m","m","j","v","s"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],abbreviatedMonthNames:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd, d' de 'MMMM' de 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM' de 'yyyy"},regexPatterns:{jan:/^ene(ro)?/i,feb:/^feb(rero)?/i,mar:/^mar(zo)?/i,apr:/^abr(il)?/i,may:/^may(o)?/i,jun:/^jun(io)?/i,jul:/^jul(io)?/i,aug:/^ago(sto)?/i,sep:/^sep(tiembre)?/i,oct:/^oct(ubre)?/i,nov:/^nov(iembre)?/i,dec:/^dic(iembre)?/i,sun:/^do(m(ingo)?)?/i,mon:/^lu(n(es)?)?/i,tue:/^ma(r(tes)?)?/i,wed:/^mi(é(rcoles)?)?/i,thu:/^ju(e(ves)?)?/i,fri:/^vi(e(rnes)?)?/i,sat:/^sá(b(ado)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["eu-ES"]={name:"eu-ES",englishName:"Basque (Basque)",nativeName:"euskara (euskara)",dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],abbreviatedDayNames:["ig.","al.","as.","az.","og.","or.","lr."],shortestDayNames:["ig","al","as","az","og","or","lr"],firstLetterDayNames:["i","a","a","a","o","o","l"],monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua"],abbreviatedMonthNames:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe."],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy/MM/dd",longDate:"dddd, yyyy.'eko' MMMM'k 'd",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dddd, yyyy.'eko' MMMM'k 'd HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"yyyy.'eko' MMMM"},regexPatterns:{jan:/^urt(.(arrila)?)?/i,feb:/^ots(.(aila)?)?/i,mar:/^mar(.(txoa)?)?/i,apr:/^api(.(rila)?)?/i,may:/^mai(.(atza)?)?/i,jun:/^eka(.(ina)?)?/i,jul:/^uzt(.(aila)?)?/i,aug:/^abu(.(ztua)?)?/i,sep:/^ira(.(ila)?)?/i,oct:/^urr(.(ia)?)?/i,nov:/^aza(.(roa)?)?/i,dec:/^abe(.(ndua)?)?/i,sun:/^ig((.(andea)?)?)?/i,mon:/^al((.(telehena)?)?)?/i,tue:/^as((.(teartea)?)?)?/i,wed:/^az((.(teazkena)?)?)?/i,thu:/^og((.(teguna)?)?)?/i,fri:/^or((.(tirala)?)?)?/i,sat:/^lr((.(runbata)?)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["fi-FI"]={name:"fi-FI",englishName:"Finnish (Finland)",nativeName:"suomi (Suomi)",dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],abbreviatedDayNames:["su","ma","ti","ke","to","pe","la"],shortestDayNames:["su","ma","ti","ke","to","pe","la"],firstLetterDayNames:["s","m","t","k","t","p","l"],monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],abbreviatedMonthNames:["tammi","helmi","maalis","huhti","touko","kesä","heinä","elo","syys","loka","marras","joulu"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d. MMMM'ta 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d. MMMM'ta 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM'ta'",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^tammi(kuu)?/i,feb:/^helmi(kuu)?/i,mar:/^maalis(kuu)?/i,apr:/^huhti(kuu)?/i,may:/^touko(kuu)?/i,jun:/^kesä(kuu)?/i,jul:/^heinä(kuu)?/i,aug:/^elo(kuu)?/i,sep:/^syys(kuu)?/i,oct:/^loka(kuu)?/i,nov:/^marras(kuu)?/i,dec:/^joulu(kuu)?/i,sun:/^sunnuntai/i,mon:/^maanantai/i,tue:/^tiistai/i,wed:/^keskiviikko/i,thu:/^torstai/i,fri:/^perjantai/i,sat:/^lauantai/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["fr-FR"]={name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],abbreviatedDayNames:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],shortestDayNames:["di","lu","ma","me","je","ve","sa"],firstLetterDayNames:["d","l","m","m","j","v","s"],monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],abbreviatedMonthNames:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd d MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dddd d MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^janv(\.|ier)?/i,feb:/^févr(\.|ier)?/i,mar:/^mars/i,apr:/^avr(\.|il)?/i,may:/^mai/i,jun:/^juin/i,jul:/^juil(\.|let)?/i,aug:/^août/i,sep:/^sept(\.|embre)?/i,oct:/^oct(\.|obre)?/i,nov:/^nov(\.|embre)?/i,dec:/^déc(\.|embre)?/i,sun:/^di(m(\.|anche)?)?/i,mon:/^lu(n(\.|di)?)?/i,tue:/^ma(r(\.|di)?)?/i,wed:/^me(r(\.|credi)?)?/i,thu:/^je(u(\.|di)?)?/i,fri:/^ve(n(\.|dredi)?)?/i,sat:/^sa(m(\.|edi)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["hr-HR"]={name:"hr-HR",englishName:"Croatian (Croatia)",nativeName:"hrvatski (Hrvatska)",dayNames:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],abbreviatedDayNames:["ned","pon","uto","sri","čet","pet","sub"],shortestDayNames:["ne","po","ut","sr","če","pe","su"],firstLetterDayNames:["n","p","u","s","č","p","s"],monthNames:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac"],abbreviatedMonthNames:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"d.M.yyyy",longDate:"d. MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d. MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^sij(ečanj)?/i,feb:/^veljača/i,mar:/^ožu(jak)?/i,apr:/^tra(vanj)?/i,may:/^svi(banj)?/i,jun:/^lip(anj)?/i,jul:/^srp(anj)?/i,aug:/^kol(ovoz)?/i,sep:/^ruj(an)?/i,oct:/^lis(topad)?/i,nov:/^stu(deni)?/i,dec:/^pro(sinac)?/i,sun:/^ne(d(jelja)?)?/i,mon:/^po(n(edjeljak)?)?/i,tue:/^ut(o(rak)?)?/i,wed:/^sr(i(jeda)?)?/i,thu:/^če(t(vrtak)?)?/i,fri:/^pe(t(ak)?)?/i,sat:/^su(b(ota)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["hu-HU"]={name:"hu-HU",englishName:"Hungarian (Hungary)",nativeName:"magyar (Magyarország)",dayNames:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],abbreviatedDayNames:["V","H","K","Sze","Cs","P","Szo"],shortestDayNames:["V","H","K","Sze","Cs","P","Szo"],firstLetterDayNames:["V","H","K","S","C","P","S"],monthNames:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],abbreviatedMonthNames:["jan.","febr.","márc.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."],amDesignator:"de.",pmDesignator:"du.",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy. MM. dd.",longDate:"yyyy. MMMM d.",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"yyyy. MMMM d. H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM d.",yearMonth:"yyyy. MMMM"},regexPatterns:{jan:/^jan(.(uár)?)?/i,feb:/^febr(.(uár)?)?/i,mar:/^márc(.(ius)?)?/i,apr:/^ápr(.(ilis)?)?/i,may:/^máj(.(us)?)?/i,jun:/^jún(.(ius)?)?/i,jul:/^júl(.(ius)?)?/i,aug:/^aug(.(usztus)?)?/i,sep:/^szept(.(ember)?)?/i,oct:/^okt(.(óber)?)?/i,nov:/^nov(.(ember)?)?/i,dec:/^dec(.(ember)?)?/i,sun:/^vasárnap/i,mon:/^hétfő/i,tue:/^kedd/i,wed:/^szerda/i,thu:/^csütörtök/i,fri:/^péntek/i,sat:/^szombat/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["in-ID"]={name:"in-ID",englishName:"Indonesian (Indonesia)",nativeName:"Bahasa Indonesia (Indonesia)",dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],abbreviatedDayNames:["Minggu","Sen","Sel","Rabu","Kamis","Jumat","Sabtu"],shortestDayNames:["M","S","S","R","K","J","S"],firstLetterDayNames:["M","S","S","R","K","J","S"],monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agust","Sep","Okt","Nop","Des"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dd MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dd MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uari)?/i,feb:/^feb(ruari)?/i,mar:/^mar(et)?/i,apr:/^apr(il)?/i,may:/^mei/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^agust(us)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nop(ember)?/i,dec:/^des(ember)?/i,sun:/^m(in(g(gu)?)?)?/i,mon:/^s(en(in)?)?/i,tue:/^s(el(asa)?)?/i,wed:/^r(a(b(u)?)?)?/i,thu:/^k(a(m(is)?)?)?/i,fri:/^j(u(m(at)?)?)?/i,sat:/^s(a(b(tu)?)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["is-IS"]={name:"is-IS",englishName:"Icelandic (Iceland)",nativeName:"íslenska (Ísland)",dayNames:["sunnudagur","mánudagur","þriðjudagur","miðvikudagur","fimmtudagur","föstudagur","laugardagur"],abbreviatedDayNames:["sun.","mán.","þri.","mið.","fim.","fös.","lau."],shortestDayNames:["su","má","þr","mi","fi","fö","la"],firstLetterDayNames:["s","m","þ","m","f","f","l"],monthNames:["janúar","febrúar","mars","apríl","maí","júní","júlí","ágúst","september","október","nóvember","desember"],abbreviatedMonthNames:["jan.","feb.","mar.","apr.","maí","jún.","júl.","ágú.","sep.","okt.","nóv.","des."],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(\.|úar)?/i,feb:/^feb(\.|rúar)?/i,mar:/^mar(\.|s)?/i,apr:/^apr(\.|íl)?/i,may:/^maí/i,jun:/^jún(\.|í)?/i,jul:/^júl(\.|í)?/i,aug:/^ágú(\.|st)?/i,sep:/^sep(\.|tember)?/i,oct:/^okt(\.|óber)?/i,nov:/^nóv(\.|ember)?/i,dec:/^des(\.|ember)?/i,sun:/^su(n(\.|nudagur)?)?/i,mon:/^má(n(\.|udagur)?)?/i,tue:/^þr(i(\.|ðjudagur)?)?/i,wed:/^mi(ð(\.|vikudagur)?)?/i,thu:/^fi(m(\.|mtudagur)?)?/i,fri:/^fö(s(\.|tudagur)?)?/i,sat:/^la(u(\.|gardagur)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["it-IT"]={name:"it-IT",englishName:"Italian (Italy)",nativeName:"italiano (Italia)",dayNames:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],abbreviatedDayNames:["dom","lun","mar","mer","gio","ven","sab"],shortestDayNames:["do","lu","ma","me","gi","ve","sa"],firstLetterDayNames:["d","l","m","m","g","v","s"],monthNames:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],abbreviatedMonthNames:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd d MMMM yyyy",shortTime:"H.mm",longTime:"H.mm.ss",fullDateTime:"dddd d MMMM yyyy H.mm.ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^gen(naio)?/i,feb:/^feb(braio)?/i,mar:/^mar(zo)?/i,apr:/^apr(ile)?/i,may:/^mag(gio)?/i,jun:/^giu(gno)?/i,jul:/^lug(lio)?/i,aug:/^ago(sto)?/i,sep:/^set(tembre)?/i,oct:/^ott(obre)?/i,nov:/^nov(embre)?/i,dec:/^dic(embre)?/i,sun:/^do(m(enica)?)?/i,mon:/^lu(n(edì)?)?/i,tue:/^ma(r(tedì)?)?/i,wed:/^me(r(coledì)?)?/i,thu:/^gi(o(vedì)?)?/i,fri:/^ve(n(erdì)?)?/i,sat:/^sa(b(ato)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ja-JP"]={name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],abbreviatedDayNames:["日","月","火","水","木","金","土"],shortestDayNames:["日","月","火","水","木","金","土"],firstLetterDayNames:["日","月","火","水","木","金","土"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],abbreviatedMonthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],amDesignator:"午前",pmDesignator:"午後",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy/MM/dd",longDate:"yyyy'年'M'月'd'日'",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"yyyy'年'M'月'd'日' H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"M'月'd'日'",yearMonth:"yyyy'年'M'月'"},regexPatterns:{jan:/^1(月)?/i,feb:/^2(月)?/i,mar:/^3(月)?/i,apr:/^4(月)?/i,may:/^5(月)?/i,jun:/^6(月)?/i,jul:/^7(月)?/i,aug:/^8(月)?/i,sep:/^9(月)?/i,oct:/^10(月)?/i,nov:/^11(月)?/i,dec:/^12(月)?/i,sun:/^日曜日/i,mon:/^月曜日/i,tue:/^火曜日/i,wed:/^水曜日/i,thu:/^木曜日/i,fri:/^金曜日/i,sat:/^土曜日/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ko-KR"]={name:"ko-KR",englishName:"Korean (Korea)",nativeName:"한국어 (대한민국)",dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],abbreviatedDayNames:["일","월","화","수","목","금","토"],shortestDayNames:["일","월","화","수","목","금","토"],firstLetterDayNames:["일","월","화","수","목","금","토"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],abbreviatedMonthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],amDesignator:"오전",pmDesignator:"오후",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy-MM-dd",longDate:"yyyy'년' M'월' d'일' dddd",shortTime:"tt h:mm",longTime:"tt h:mm:ss",fullDateTime:"yyyy'년' M'월' d'일' dddd tt h:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"M'월' d'일'",yearMonth:"yyyy'년' M'월'"},regexPatterns:{jan:/^1(월)?/i,feb:/^2(월)?/i,mar:/^3(월)?/i,apr:/^4(월)?/i,may:/^5(월)?/i,jun:/^6(월)?/i,jul:/^7(월)?/i,aug:/^8(월)?/i,sep:/^9(월)?/i,oct:/^10(월)?/i,nov:/^11(월)?/i,dec:/^12(월)?/i,sun:/^일요일/i,mon:/^월요일/i,tue:/^화요일/i,wed:/^수요일/i,thu:/^목요일/i,fri:/^금요일/i,sat:/^토요일/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ms-MY"]={name:"ms-MY",englishName:"Malay (Malaysia)",nativeName:"Bahasa Malaysia (Malaysia)",dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],abbreviatedDayNames:["Ahad","Isnin","Sel","Rabu","Khamis","Jumaat","Sabtu"],shortestDayNames:["A","I","S","R","K","J","S"],firstLetterDayNames:["A","I","S","R","K","J","S"],monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],abbreviatedMonthNames:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogos","Sept","Okt","Nov","Dis"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"d MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dd MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uari)?/i,feb:/^feb(ruari)?/i,mar:/^mac/i,apr:/^apr(il)?/i,may:/^mei/i,jun:/^jun/i,jul:/^jul(ai)?/i,aug:/^ogos/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dis(ember)?/i,sun:/^a(h(ad)?)?/i,mon:/^i(s(nin)?)?/i,tue:/^s(e(l(asa))??)?/i,wed:/^r(a(bu)?)?/i,thu:/^k(h(a(mis)?)?)?/i,fri:/^j(u(maat)?)?/i,sat:/^s(a(b(tu)?)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["nb-NO"]={name:"nb-NO",englishName:"Norwegian, Bokmål (Norway)",nativeName:"norsk, bokmål (Norge)",dayNames:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],abbreviatedDayNames:["sø","ma","ti","on","to","fr","lø"],shortestDayNames:["sø","ma","ti","on","to","fr","lø"],firstLetterDayNames:["s","m","t","o","t","f","l"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],abbreviatedMonthNames:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^mar(s)?/i,apr:/^apr(il)?/i,may:/^mai/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^des(ember)?/i,sun:/^søndag/i,mon:/^mandag/i,tue:/^tirsdag/i,wed:/^onsdag/i,thu:/^torsdag/i,fri:/^fredag/i,sat:/^lørdag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["nl-NL"]={name:"nl-NL",englishName:"Dutch (Netherlands)",nativeName:"Nederlands (Nederland)",dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],abbreviatedDayNames:["zo","ma","di","wo","do","vr","za"],shortestDayNames:["zo","ma","di","wo","do","vr","za"],firstLetterDayNames:["z","m","d","w","d","v","z"],monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],abbreviatedMonthNames:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd-MM-yyyy",longDate:"dddd d MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd d MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uari)?/i,feb:/^feb(ruari)?/i,mar:/^maart/i,apr:/^apr(il)?/i,may:/^mei/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ustus)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^zondag/i,mon:/^maandag/i,tue:/^dinsdag/i,wed:/^woensdag/i,thu:/^donderdag/i,fri:/^vrijdag/i,sat:/^zaterdag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["nn-NO"]={name:"nn-NO",englishName:"Norwegian, Nynorsk (Norway)",nativeName:"norsk, nynorsk (Noreg)",dayNames:["søndag","mandag","tysdag","onsdag","torsdag","fredag","laurdag"],abbreviatedDayNames:["sø","må","ty","on","to","fr","la"],shortestDayNames:["sø","må","ty","on","to","fr","la"],firstLetterDayNames:["s","m","t","o","t","f","l"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],abbreviatedMonthNames:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^mar(s)?/i,apr:/^apr(il)?/i,may:/^mai/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^des(ember)?/i,sun:/^søndag/i,mon:/^m(å|a)ndag/i,tue:/^tysdag/i,wed:/^onsdag/i,thu:/^torsdag/i,fri:/^fredag/i,sat:/^laurdag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["no-NO"]={name:"no-NO",englishName:"Norwegian, Nynorsk (Norway)",nativeName:"norsk, nynorsk (Noreg)",dayNames:["søndag","mandag","tysdag","onsdag","torsdag","fredag","laurdag"],abbreviatedDayNames:["sø","må","ty","on","to","fr","la"],shortestDayNames:["sø","må","ty","on","to","fr","la"],firstLetterDayNames:["s","m","t","o","t","f","l"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],abbreviatedMonthNames:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d. MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d. MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^mar(s)?/i,apr:/^apr(il)?/i,may:/^mai/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^des(ember)?/i,sun:/^søndag/i,mon:/^m(å|a)ndag/i,tue:/^tysdag/i,wed:/^onsdag/i,thu:/^torsdag/i,fri:/^fredag/i,sat:/^laurdag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["pl-PL"]={name:"pl-PL",englishName:"Polish (Poland)",nativeName:"polski (Polska)",dayNames:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],abbreviatedDayNames:["N","Pn","Wt","Śr","Cz","Pt","So"],shortestDayNames:["N","Pn","Wt","Śr","Cz","Pt","So"],firstLetterDayNames:["N","P","W","Ś","C","P","S"],monthNames:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],abbreviatedMonthNames:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd-MM-yyyy",longDate:"d MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^sty(czeń)?/i,feb:/^lut(y)?/i,mar:/^mar(zec)?/i,apr:/^kwi(ecień)?/i,may:/^maj/i,jun:/^cze(rwiec)?/i,jul:/^lip(iec)?/i,aug:/^sie(rpień)?/i,sep:/^wrz(esień)?/i,oct:/^paź(dziernik)?/i,nov:/^lis(topad)?/i,dec:/^gru(dzień)?/i,sun:/^niedziela/i,mon:/^poniedziałek/i,tue:/^wtorek/i,wed:/^środa/i,thu:/^czwartek/i,fri:/^piątek/i,sat:/^sobota/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["pt-BR"]={name:"pt-BR",englishName:"Portuguese (Brazil)",nativeName:"Português (Brasil)",dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],abbreviatedDayNames:["dom","seg","ter","qua","qui","sex","sáb"],shortestDayNames:["dom","seg","ter","qua","qui","sex","sáb"],firstLetterDayNames:["d","s","t","q","q","s","s"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],abbreviatedMonthNames:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],amDesignator:"",pmDesignator:"",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd, d' de 'MMMM' de 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd, d' de 'MMMM' de 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd' de 'MMMM",yearMonth:"MMMM' de 'yyyy"},regexPatterns:{jan:/^jan(eiro)?/i,feb:/^fev(ereiro)?/i,mar:/^mar(ço)?/i,apr:/^abr(il)?/i,may:/^mai(o)?/i,jun:/^jun(ho)?/i,jul:/^jul(ho)?/i,aug:/^ago(sto)?/i,sep:/^set(embro)?/i,oct:/^out(ubro)?/i,nov:/^nov(embro)?/i,dec:/^dez(embro)?/i,sun:/^domingo/i,mon:/^segunda-feira/i,tue:/^terça-feira/i,wed:/^quarta-feira/i,thu:/^quinta-feira/i,fri:/^sexta-feira/i,sat:/^sábado/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["pt-PT"]={name:"pt-PT",englishName:"Portuguese (Portugal)",nativeName:"português (Portugal)",dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],abbreviatedDayNames:["dom","seg","ter","qua","qui","sex","sáb"],shortestDayNames:["dom","seg","ter","qua","qui","sex","sáb"],firstLetterDayNames:["d","s","t","q","q","s","s"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],abbreviatedMonthNames:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd-MM-yyyy",longDate:"dddd, d' de 'MMMM' de 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd, d' de 'MMMM' de 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d/M",yearMonth:"MMMM' de 'yyyy"},regexPatterns:{jan:/^jan(eiro)?/i,feb:/^fev(ereiro)?/i,mar:/^mar(ço)?/i,apr:/^abr(il)?/i,may:/^mai(o)?/i,jun:/^jun(ho)?/i,jul:/^jul(ho)?/i,aug:/^ago(sto)?/i,sep:/^set(embro)?/i,oct:/^out(ubro)?/i,nov:/^nov(embro)?/i,dec:/^dez(embro)?/i,sun:/^domingo/i,mon:/^segunda-feira/i,tue:/^terça-feira/i,wed:/^quarta-feira/i,thu:/^quinta-feira/i,fri:/^sexta-feira/i,sat:/^sábado/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ro-RO"]={name:"ro-RO",englishName:"Romanian (Romania)",nativeName:"română (România)",dayNames:["duminică","luni","marţi","miercuri","joi","vineri","sâmbătă"],abbreviatedDayNames:["D","L","Ma","Mi","J","V","S"],shortestDayNames:["D","L","Ma","Mi","J","V","S"],firstLetterDayNames:["D","L","M","M","J","V","S"],monthNames:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],abbreviatedMonthNames:["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec."],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"d MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^ian(.(uarie)?)?/i,feb:/^feb(.(ruarie)?)?/i,mar:/^mar(.(tie)?)?/i,apr:/^apr(.(ilie)?)?/i,may:/^mai(.()?)?/i,jun:/^iun(.(ie)?)?/i,jul:/^iul(.(ie)?)?/i,aug:/^aug(.(ust)?)?/i,sep:/^sep(.(tembrie)?)?/i,oct:/^oct(.(ombrie)?)?/i,nov:/^noiembrie/i,dec:/^dec(.(embrie)?)?/i,sun:/^duminică/i,mon:/^luni/i,tue:/^marţi/i,wed:/^miercuri/i,thu:/^joi/i,fri:/^vineri/i,sat:/^sâmbătă/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["ru-RU"]={name:"ru-RU",englishName:"Russian (Russia)",nativeName:"русский (Россия)",dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],abbreviatedDayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],shortestDayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstLetterDayNames:["В","П","В","С","Ч","П","С"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],abbreviatedMonthNames:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d MMMM yyyy 'г.'",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d MMMM yyyy 'г.' H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM yyyy 'г.'"},regexPatterns:{jan:/^янв(арь)?/i,feb:/^фев(раль)?/i,mar:/^мар(т)?/i,apr:/^апр(ель)?/i,may:/^май/i,jun:/^июн(ь)?/i,jul:/^июл(ь)?/i,aug:/^авг(уст)?/i,sep:/^сен(тябрь)?/i,oct:/^окт(ябрь)?/i,nov:/^ноя(брь)?/i,dec:/^дек(абрь)?/i,sun:/^воскресенье/i,mon:/^понедельник/i,tue:/^вторник/i,wed:/^среда/i,thu:/^четверг/i,fri:/^пятница/i,sat:/^суббота/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["sk-SK"]={name:"sk-SK",englishName:"Slovak (Slovakia)",nativeName:"slovenčina (Slovenská republika)",dayNames:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"],abbreviatedDayNames:["ne","po","ut","st","št","pi","so"],shortestDayNames:["ne","po","ut","st","št","pi","so"],firstLetterDayNames:["n","p","u","s","š","p","s"],monthNames:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"],abbreviatedMonthNames:["jan","feb","mar","apr","máj","jún","júl","aug","sept","okt","nov","dec"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"d. M. yyyy",longDate:"d. MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d. MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^január/i,feb:/^február/i,mar:/^marec/i,apr:/^apríl/i,may:/^máj/i,jun:/^jún/i,jul:/^júl/i,aug:/^august/i,sep:/^sep(t(ember)?)?/i,oct:/^október/i,nov:/^november/i,dec:/^december/i,sun:/^nedeľa/i,mon:/^pondelok/i,tue:/^utorok/i,wed:/^streda/i,thu:/^štvrtok/i,fri:/^piatok/i,sat:/^sobota/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["sl-SI"]={name:"sl-SI",englishName:"Slovenian (Slovenia)",nativeName:"slovenski (Slovenija)",dayNames:["nedelja","ponedeljek","torek","sreda","četrtek","petek","sobota"],abbreviatedDayNames:["ned","pon","tor","sre","čet","pet","sob"],shortestDayNames:["ne","po","to","sr","če","pe","so"],firstLetterDayNames:["n","p","t","s","č","p","s"],monthNames:["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],abbreviatedMonthNames:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"d.M.yyyy",longDate:"d. MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d. MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d. MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uar)?/i,feb:/^feb(ruar)?/i,mar:/^mar(ec)?/i,apr:/^apr(il)?/i,may:/^maj/i,jun:/^jun(ij)?/i,jul:/^jul(ij)?/i,aug:/^avg(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^ne(d(elja)?)?/i,mon:/^po(n(edeljek)?)?/i,tue:/^to(r(ek)?)?/i,wed:/^sr(e(da)?)?/i,thu:/^če(t(rtek)?)?/i,fri:/^pe(t(ek)?)?/i,sat:/^so(b(ota)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["sv-SE"]={name:"sv-SE",englishName:"Swedish (Sweden)",nativeName:"svenska (Sverige)",dayNames:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],abbreviatedDayNames:["sö","må","ti","on","to","fr","lö"],shortestDayNames:["sö","må","ti","on","to","fr","lö"],firstLetterDayNames:["s","m","t","o","t","f","l"],monthNames:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],abbreviatedMonthNames:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy-MM-dd",longDate:"'den 'd MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"'den 'd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"'den 'd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^jan(uari)?/i,feb:/^feb(ruari)?/i,mar:/^mar(s)?/i,apr:/^apr(il)?/i,may:/^maj/i,jun:/^jun(i)?/i,jul:/^jul(i)?/i,aug:/^aug(usti)?/i,sep:/^sep(t(ember)?)?/i,oct:/^okt(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^söndag/i,mon:/^måndag/i,tue:/^tisdag/i,wed:/^onsdag/i,thu:/^torsdag/i,fri:/^fredag/i,sat:/^lördag/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["th-TH"]={name:"th-TH",englishName:"Thai (Thailand)",nativeName:"ไทย (ไทย)",dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],abbreviatedDayNames:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],shortestDayNames:["อ","จ","อ","พ","พ","ศ","ส"],firstLetterDayNames:["อ","จ","อ","พ","พ","ศ","ส"],monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],abbreviatedMonthNames:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2572,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"d MMMM yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d MMMM yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^ม(.(กราค)?)?/i,feb:/^ก(.(ุมภาพันธ์)?)?/i,mar:/^มี(.(นาคม)?)?/i,apr:/^เม(.(ษายน)?)?/i,may:/^พ(.(ฤษภาคม)?)?/i,jun:/^มิ(.(ถุนายน)?)?/i,jul:/^ก(.(รฎาคม)?)?/i,aug:/^ส(.(ิงหาคม)?)?/i,sep:/^ก(.(ันยายน)?)?/i,oct:/^ต(.(ุลาคม)?)?/i,nov:/^พ(.(ฤศจิกายน)?)?/i,dec:/^ธ(.(ันวาคม)?)?/i,sun:/^อ(า(.(ทิตย์)?)?)?/i,mon:/^จ((.(ันทร์)?)?)?/i,tue:/^อ((.(ังคาร)?)?)?/i,wed:/^พ((.(ุธ)?)?)?/i,thu:/^พ(ฤ(.(หัสบดี)?)?)?/i,fri:/^ศ((.(ุกร์)?)?)?/i,sat:/^ส((.(สาร์)?)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["tr-TR"]={name:"tr-TR",englishName:"Turkish (Turkey)",nativeName:"Türkçe (Türkiye)",dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],abbreviatedDayNames:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"],shortestDayNames:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],firstLetterDayNames:["P","P","S","Ç","P","C","C"],monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],abbreviatedMonthNames:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"dd MMMM yyyy dddd",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy dddd HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^oca(k)?/i,feb:/^şub(at)?/i,mar:/^mar(t)?/i,apr:/^nis(an)?/i,may:/^may(ıs)?/i,jun:/^haz(iran)?/i,jul:/^tem(muz)?/i,aug:/^ağu(stos)?/i,sep:/^eyl(ül)?/i,oct:/^eki(m)?/i,nov:/^kas(ım)?/i,dec:/^ara(lık)?/i,sun:/^pz(z(ar)?)?/i,mon:/^pt(t(artesi)?)?/i,tue:/^sa(l(ı)?)?/i,wed:/^ça(r(şamba)?)?/i,thu:/^pe(r(şembe)?)?/i,fri:/^cu(m(a)?)?/i,sat:/^ct(t(artesi)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["uk-UA"]={name:"uk-UA",englishName:"Ukrainian (Ukraine)",nativeName:"україньска (Україна)",dayNames:["неділя","понеділок","вівторок","середа","четвер","п'ятниця","субота"],abbreviatedDayNames:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],shortestDayNames:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],firstLetterDayNames:["Н","П","В","С","Ч","П","С"],monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],abbreviatedMonthNames:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],amDesignator:"",pmDesignator:"",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd.MM.yyyy",longDate:"d MMMM yyyy' р.'",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"d MMMM yyyy' р.' H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"d MMMM",yearMonth:"MMMM yyyy' р.'"},regexPatterns:{jan:/^січ(ень)?/i,feb:/^лют(ий)?/i,mar:/^бер(езень)?/i,apr:/^кві(тень)?/i,may:/^тра(вень)?/i,jun:/^чер(вень)?/i,jul:/^лип(ень)?/i,aug:/^сер(пень)?/i,sep:/^вер(есень)?/i,oct:/^жов(тень)?/i,nov:/^лис(топад)?/i,dec:/^гру(день)?/i,sun:/^неділя/i,mon:/^понеділок/i,tue:/^вівторок/i,wed:/^середа/i,thu:/^четвер/i,fri:/^п'ятниця/i,sat:/^субота/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["vi-VN"]={name:"vi-VN",englishName:"Vietnamese (Vietnam)",nativeName:"Tiếng Việt (Việt Nam)",dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],abbreviatedDayNames:["CN","Hai","Ba","Tư","Năm","Sáu","Bảy"],shortestDayNames:["C","H","B","T","N","S","B"],firstLetterDayNames:["C","H","B","T","N","S","B"],monthNames:["Tháng Giêng","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],abbreviatedMonthNames:["Thg1","Thg2","Thg3","Thg4","Thg5","Thg6","Thg7","Thg8","Thg9","Thg10","Thg11","Thg12"],amDesignator:"SA",pmDesignator:"CH",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"d MMMM yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dd MMMM yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"},regexPatterns:{jan:/^tháng giêng/i,feb:/^tháng hai/i,mar:/^tháng ba/i,apr:/^tháng tư/i,may:/^tháng năm/i,jun:/^tháng sáu/i,jul:/^tháng bảy/i,aug:/^tháng tám/i,sep:/^tháng chín/i,oct:/^tháng mười/i,nov:/^tháng mười một/i,dec:/^tháng mười hai/i,sun:/^c(n(ủ nhật)?)?/i,mon:/^h(ai(́ hai)?)?/i,tue:/^b(a(ứ ba)?)?/i,wed:/^t(ư(ứ tư)?)?/i,thu:/^n(ăm(́ năm)?)?/i,fri:/^s(áu( sáu)?)?/i,sat:/^b(ảy( bảy)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["zh-CN"]={name:"zh-CN",englishName:"Chinese (People's Republic of China)",nativeName:"中文(中华人民共和国)",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],abbreviatedDayNames:["日","一","二","三","四","五","六"],shortestDayNames:["日","一","二","三","四","五","六"],firstLetterDayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],abbreviatedMonthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],amDesignator:"上午",pmDesignator:"下午",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy/MM/dd",longDate:"yyyy'年'M'月'd'日'",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"yyyy'年'M'月'd'日' H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"M'月'd'日'",yearMonth:"yyyy'年'M'月'"},regexPatterns:{jan:/^一月/i,feb:/^二月/i,mar:/^三月/i,apr:/^四月/i,may:/^五月/i,jun:/^六月/i,jul:/^七月/i,aug:/^八月/i,sep:/^九月/i,oct:/^十月/i,nov:/^十一月/i,dec:/^十二月/i,sun:/^星期日/i,mon:/^星期一/i,tue:/^星期二/i,wed:/^星期三/i,thu:/^星期四/i,fri:/^星期五/i,sat:/^星期六/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};if(!Date.AllCultureInfos){Date.AllCultureInfos={}}Date.AllCultureInfos["zh-TW"]={name:"zh-TW",englishName:"Chinese (Taiwan)",nativeName:"中文(台灣)",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],abbreviatedDayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortestDayNames:["日","一","二","三","四","五","六"],firstLetterDayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],abbreviatedMonthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],amDesignator:"上午",pmDesignator:"下午",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"ymd",formatPatterns:{shortDate:"yyyy/MM/dd",longDate:"yyyy'年'M'月'd'日'",shortTime:"tt hh:mm",longTime:"tt hh:mm:ss",fullDateTime:"yyyy'年'M'月'd'日' tt hh:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"M'月'd'日'",yearMonth:"yyyy'年'M'月'"},regexPatterns:{jan:/^一月/i,feb:/^二月/i,mar:/^三月/i,apr:/^四月/i,may:/^五月/i,jun:/^六月/i,jul:/^七月/i,aug:/^八月/i,sep:/^九月/i,oct:/^十月/i,nov:/^十一月/i,dec:/^十二月/i,sun:/^星期日/i,mon:/^星期一/i,tue:/^星期二/i,wed:/^星期三/i,thu:/^星期四/i,fri:/^星期五/i,sat:/^星期六/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};(function(){var b=Date,a=b.prototype,f=function(i,h){if(!h){h=2}return("000"+i).slice(h*-1)};a.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};a.setTimeToNow=function(){var h=new Date();this.setHours(h.getHours());this.setMinutes(h.getMinutes());this.setSeconds(h.getSeconds());this.setMilliseconds(h.getMilliseconds());return this};b.today=function(){return new Date().clearTime()};b.compare=function(i,h){if(isNaN(i)||isNaN(h)){throw new Error(i+" - "+h)}else{if(i instanceof Date&&h instanceof Date){return(i<h)?-1:(i>h)?1:0}else{throw new TypeError(i+" - "+h)}}};b.equals=function(i,h){return(i.compareTo(h)===0)};b.getDayNumberFromName=function(j){var q=b.CultureInfo.dayNames,h=b.CultureInfo.abbreviatedDayNames,p=b.CultureInfo.shortestDayNames,l=j.toLowerCase();for(var k=0;k<q.length;k++){if(q[k].toLowerCase()==l||h[k].toLowerCase()==l||p[k].toLowerCase()==l){return k}}return -1};b.getMonthNumberFromName=function(j){var o=b.CultureInfo.monthNames,h=b.CultureInfo.abbreviatedMonthNames,l=j.toLowerCase();for(var k=0;k<o.length;k++){if(o[k].toLowerCase()==l||h[k].toLowerCase()==l){return k}}return -1};b.isLeapYear=function(h){return((h%4===0&&h%100!==0)||h%400===0)};b.getDaysInMonth=function(h,i){return[31,(b.isLeapYear(h)?29:28),31,30,31,30,31,31,30,31,30,31][i]};b.getTimezoneAbbreviation=function(k){var j=b.CultureInfo.timezones;for(var h=0;h<j.length;h++){if(j[h].offset===k){return j[h].name}}return null};b.getTimezoneOffset=function(h){var k=b.CultureInfo.timezones;for(var j=0;j<k.length;j++){if(k[j].name===h.toUpperCase()){return k[j].offset}}return null};a.clone=function(){return new Date(this.getTime())};a.compareTo=function(h){return Date.compare(this,h)};a.equals=function(h){return Date.equals(this,h||new Date())};a.between=function(i,h){return this.getTime()>=i.getTime()&&this.getTime()<=h.getTime()};a.isAfter=function(h){return this.compareTo(h||new Date())===1};a.isBefore=function(h){return(this.compareTo(h||new Date())===-1)};a.isToday=a.isSameDay=function(h){return this.clone().clearTime().equals((h||new Date()).clone().clearTime())};a.addMilliseconds=function(h){this.setMilliseconds(this.getMilliseconds()+h*1);return this};a.addSeconds=function(h){return this.addMilliseconds(h*1000)};a.addMinutes=function(h){return this.addMilliseconds(h*60000)};a.addHours=function(h){return this.addMilliseconds(h*3600000)};a.addDays=function(h){this.setDate(this.getDate()+h*1);return this};a.addWeeks=function(h){return this.addDays(h*7)};a.addMonths=function(h){var i=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+h*1);this.setDate(Math.min(i,b.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};a.addYears=function(h){return this.addMonths(h*12)};a.add=function(i){if(typeof i=="number"){this._orient=i;return this}var h=i;if(h.milliseconds){this.addMilliseconds(h.milliseconds)}if(h.seconds){this.addSeconds(h.seconds)}if(h.minutes){this.addMinutes(h.minutes)}if(h.hours){this.addHours(h.hours)}if(h.weeks){this.addWeeks(h.weeks)}if(h.months){this.addMonths(h.months)}if(h.years){this.addYears(h.years)}if(h.days){this.addDays(h.days)}return this};var d,e,c;a.getWeek=function(){var p,o,m,l,k,j,i,h,t,q;d=(!d)?this.getFullYear():d;e=(!e)?this.getMonth()+1:e;c=(!c)?this.getDate():c;if(e<=2){p=d-1;o=(p/4|0)-(p/100|0)+(p/400|0);m=((p-1)/4|0)-((p-1)/100|0)+((p-1)/400|0);t=o-m;k=0;j=c-1+(31*(e-1))}else{p=d;o=(p/4|0)-(p/100|0)+(p/400|0);m=((p-1)/4|0)-((p-1)/100|0)+((p-1)/400|0);t=o-m;k=t+1;j=c+((153*(e-3)+2)/5)+58+t}i=(p+o)%7;l=(j+i-k)%7;h=(j+3-l)|0;if(h<0){q=53-((i-t)/5|0)}else{if(h>364+t){q=1}else{q=(h/7|0)+1}}d=e=c=null;return q};a.getISOWeek=function(){d=this.getUTCFullYear();e=this.getUTCMonth()+1;c=this.getUTCDate();return f(this.getWeek())};a.setWeek=function(h){return this.moveToDayOfWeek(1).addWeeks(h-this.getWeek())};var g=function(k,j,h,i){if(typeof k=="undefined"){return false}else{if(typeof k!="number"){throw new TypeError(k+" is not a Number.")}else{if(k<j||k>h){throw new RangeError(k+" is not a valid value for "+i+".")}}}return true};b.validateMillisecond=function(h){return g(h,0,999,"millisecond")};b.validateSecond=function(h){return g(h,0,59,"second")};b.validateMinute=function(h){return g(h,0,59,"minute")};b.validateHour=function(h){return g(h,0,23,"hour")};b.validateDay=function(i,h,j){return g(i,1,b.getDaysInMonth(h,j),"day")};b.validateMonth=function(h){return g(h,0,11,"month")};b.validateYear=function(h){return g(h,0,9999,"year")};a.set=function(h){if(b.validateMillisecond(h.millisecond)){this.addMilliseconds(h.millisecond-this.getMilliseconds())}if(b.validateSecond(h.second)){this.addSeconds(h.second-this.getSeconds())}if(b.validateMinute(h.minute)){this.addMinutes(h.minute-this.getMinutes())}if(b.validateHour(h.hour)){this.addHours(h.hour-this.getHours())}if(b.validateMonth(h.month)){this.addMonths(h.month-this.getMonth())}if(b.validateYear(h.year)){this.addYears(h.year-this.getFullYear())}if(b.validateDay(h.day,this.getFullYear(),this.getMonth())){this.addDays(h.day-this.getDate())}if(h.timezone){this.setTimezone(h.timezone)}if(h.timezoneOffset){this.setTimezoneOffset(h.timezoneOffset)}if(h.week&&g(h.week,0,53,"week")){this.setWeek(h.week)}return this};a.moveToFirstDayOfMonth=function(){return this.set({day:1})};a.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())})};a.moveToNthOccurrence=function(i,j){var h=0;if(j>0){h=j-1}else{if(j===-1){this.moveToLastDayOfMonth();if(this.getDay()!==i){this.moveToDayOfWeek(i,-1)}return this}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(i,+1).addWeeks(h)};a.moveToDayOfWeek=function(h,i){var j=(h-this.getDay()+7*(i||+1))%7;return this.addDays((j===0)?j+=7*(i||+1):j)};a.moveToMonth=function(j,h){var i=(j-this.getMonth()+12*(h||+1))%12;return this.addMonths((i===0)?i+=12*(h||+1):i)};a.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1};a.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset())};a.setTimezoneOffset=function(j){var h=this.getTimezoneOffset(),i=Number(j)*-6/10;return this.addMinutes(i-h)};a.setTimezone=function(h){return this.setTimezoneOffset(b.getTimezoneOffset(h))};a.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset())};a.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()};a.getUTCOffset=function(){var k,j,h,i,m="",l;k=this.getTimezoneOffset();j=k/60;h=Math.abs(j);i=Math.floor(h);if(j>=0){m+="-"}else{m+="+"}if(j<10&&j>-10){m+="0"}if(j==0){m+="000"}else{m+=(i);l=(h-i)*100;if(l>0){m+=(l*60/100)}else{m+="00"}}return m};a.getElapsed=function(h){return(h||new Date())-this};if(!a.toISOString){a.toISOString=function(){function h(i){return i<10?"0"+i:i}return'"'+this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+'Z"'}}if(a._toString===undefined){a._toString=a.toString}a.toString=function(s){var q=this;var h=function(i){switch(i*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};if(s){var p=/("(.*?)")|('(.*?)')|(\\)?(dd?d?d?|mm?m?m?|yy?y?y?|hh?|HH?|nn?|MM?|ss?|z?z|tt?|[.\\/,:\- 年月日년월일])/g;var o="";var n=s.match(p);var k=function(i){if((i.charAt(0)==='"'&&i.charAt(i.length-1)==='"')||(i.charAt(0)==="'"&&i.charAt(i.length-1)==="'")){return i.substring(1,i.length-1)}if(i.charAt(0)==="\\"){return i.replace("\\","")}q.h=q.getHours;switch(i){case"hh":return f(q.h()<13?(q.h()===0?12:q.h()):(q.h()-12));case"h":return q.h()<13?(q.h()===0?12:q.h()):(q.h()-12);case"HH":return f(q.h());case"H":return q.h();case"MM":case"nn":return f(q.getMinutes());case"M":case"n":return q.getMinutes();case"ss":return f(q.getSeconds());case"s":return q.getSeconds();case"yyyy":return f(q.getFullYear(),4);case"yy":return f(q.getFullYear());case"dddd":return b.CultureInfo.dayNames[q.getDay()];case"ddd":return b.CultureInfo.abbreviatedDayNames[q.getDay()];case"dd":return f(q.getDate());case"d":return q.getDate();case"mmmm":return b.CultureInfo.monthNames[q.getMonth()];case"mmm":return b.CultureInfo.abbreviatedMonthNames[q.getMonth()];case"mm":return f((q.getMonth()+1));case"m":return q.getMonth()+1;case"t":return q.h()<12?b.CultureInfo.amDesignator.substring(0,1):b.CultureInfo.pmDesignator.substring(0,1);case"tt":return q.h()<12?b.CultureInfo.amDesignator:b.CultureInfo.pmDesignator;case"zz":return"UTC"+q.getUTCOffset();case"z":var t=q.getTimezoneOffset()/-60;return t>=0?"GMT+"+t:"GMT"+t;default:return i}};for(var l=0;n&&l<n.length;l++){var j=n[l];o+=k(j)}return o}return this._toString()}}());(function(){var c=Date,b=c.prototype,d=c.CultureInfo,a=[],e=function(g,f){if(!f){f=2}return("000"+g).slice(f*-1)};c.normalizeFormat=function(g){a=[];var f=new Date().$format(g);return a.join("")};c.strftime=function(g,f){return new Date(f*1000).$format(g)};c.strtotime=function(f){var g=c.parse(f);g.addMinutes(g.getTimezoneOffset()*-1);return Math.round(c.UTC(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds())/1000)};b.$format=function(h){var f=this,i,g=function(j){a.push(j);return f.toString(j)};return h?h.replace(/(%|\\)?.|%%/g,function(j){if(j.charAt(0)==="\\"||j.substring(0,2)==="%%"){return j.replace("\\","").replace("%%","%")}switch(j){case"d":case"%d":return g("dd");case"D":case"%a":return g("ddd");case"j":case"%e":return g("d");case"l":case"%A":return g("dddd");case"N":case"%u":return f.getDay()+1;case"S":return g("S");case"w":case"%w":return f.getDay();case"z":return f.getOrdinalNumber();case"%j":return e(f.getOrdinalNumber(),3);case"%U":var n=f.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),l=f.clone().addDays(1).moveToDayOfWeek(0,-1);return(l<n)?"00":e((l.getOrdinalNumber()-n.getOrdinalNumber())/7+1);case"W":case"%V":return f.getISOWeek();case"%W":return e(f.getWeek());case"F":case"%B":return g("MMMM");case"m":case"%m":return g("MM");case"M":case"%b":case"%h":return g("MMM");case"n":return g("M");case"t":return c.getDaysInMonth(f.getFullYear(),f.getMonth());case"L":return(c.isLeapYear(f.getFullYear()))?1:0;case"o":case"%G":return f.setWeek(f.getISOWeek()).toString("yyyy");case"%g":return f.$format("%G").slice(-2);case"Y":case"%Y":return g("yyyy");case"y":case"%y":return g("yy");case"a":case"%p":return g("tt").toLowerCase();case"A":return g("tt").toUpperCase();case"g":case"%I":return g("h");case"G":return g("H");case"h":return g("hh");case"H":case"%H":return g("HH");case"i":case"%M":return g("mm");case"s":case"%S":return g("ss");case"u":return e(f.getMilliseconds(),3);case"I":return(f.isDaylightSavingTime())?1:0;case"O":return f.getUTCOffset();case"P":i=f.getUTCOffset();return i.substring(0,i.length-2)+":"+i.substring(i.length-2);case"e":case"T":case"%z":case"%Z":return f.getTimezone();case"Z":return f.getTimezoneOffset()*-60;case"B":var k=new Date();return Math.floor(((k.getHours()*3600)+(k.getMinutes()*60)+k.getSeconds()+(k.getTimezoneOffset()+60)*60)/86.4);case"c":return f.toISOString().replace(/\"/g,"");case"U":return c.strtotime("now");case"%c":return g("d")+" "+g("t");case"%C":return Math.floor(f.getFullYear()/100+1);case"%D":return g("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return g("hh:mm tt");case"%R":return g("H:mm");case"%T":return g("H:mm:ss");case"%x":return g("d");case"%X":return g("t");default:a.push(j);return j}}):this._toString()};if(!b.format){b.format=b.$format}}());(function(){Date.Parsing={Exception:function(i){this.message="Parse error at '"+i.substring(0,10)+" ...'"}};var a=Date.Parsing;var c=a.Operators={rtoken:function(i){return function(j){var k=j.match(i);if(k){return([k[0],j.substring(k[0].length)])}else{throw new a.Exception(j)}}},token:function(i){return function(j){return c.rtoken(new RegExp("^s*"+j+"s*"))(j)}},stoken:function(i){return c.rtoken(new RegExp("^"+i))},until:function(i){return function(j){var k=[],m=null;while(j.length){try{m=i.call(this,j)}catch(l){k.push(m[0]);j=m[1];continue}break}return[k,j]}},many:function(i){return function(j){var m=[],k=null;while(j.length){try{k=i.call(this,j)}catch(l){return[m,j]}m.push(k[0]);j=k[1]}return[m,j]}},optional:function(i){return function(j){var k=null;try{k=i.call(this,j)}catch(l){return[null,j]}return[k[0],k[1]]}},not:function(i){return function(j){try{i.call(this,j)}catch(k){return[null,j]}throw new a.Exception(j)}},ignore:function(i){return i?function(j){var k=null;k=i.call(this,j);return[null,k[1]]}:null},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(c.each(k[j],l))}return m},cache:function(k){var i={},j=null;return function(l){try{j=i[l]=(i[l]||k.call(this,l))}catch(m){j=i[l]=m}if(j instanceof a.Exception){throw j}else{return j}}},any:function(){var i=arguments;return function(k){var l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue}try{l=(i[j].call(this,k))}catch(m){l=null}if(l){return l}}throw new a.Exception(k)}},each:function(){var i=arguments;return function(k){var n=[],l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue}try{l=(i[j].call(this,k))}catch(m){throw new a.Exception(k)}n.push(l[0]);k=l[1]}return[n,k]}},all:function(){var j=arguments,i=i;return i.each(i.optional(j))},sequence:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;if(i.length==1){return i[0]}return function(o){var p=null,t=null;var v=[];for(var n=0;n<i.length;n++){try{p=i[n].call(this,o)}catch(u){break}v.push(p[0]);try{t=j.call(this,p[1])}catch(m){t=null;break}o=t[1]}if(!p){throw new a.Exception(o)}if(t){throw new a.Exception(t[1])}if(k){try{p=k.call(this,p[1])}catch(l){throw new a.Exception(p[1])}}return[v,(p?p[1]:o)]}},between:function(j,k,i){i=i||j;var l=c.each(c.ignore(j),k,c.ignore(i));return function(m){var n=l.call(this,m);return[[n[0][0],r[0][2]],n[1]]}},list:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;return(i instanceof Array?c.each(c.product(i.slice(0,-1),c.ignore(j)),i.slice(-1),c.ignore(k)):c.each(c.many(c.each(i,c.ignore(j))),px,c.ignore(k)))},set:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;return function(B){var l=null,n=null,m=null,o=null,t=[[],B],A=false;for(var v=0;v<i.length;v++){m=null;n=null;l=null;A=(i.length==1);try{l=i[v].call(this,B)}catch(y){continue}o=[[l[0]],l[1]];if(l[1].length>0&&!A){try{m=j.call(this,l[1])}catch(z){A=true}}else{A=true}if(!A&&m[1].length===0){A=true}if(!A){var w=[];for(var u=0;u<i.length;u++){if(v!=u){w.push(i[u])}}n=c.set(w,j).call(this,m[1]);if(n[0].length>0){o[0]=o[0].concat(n[0]);o[1]=n[1]}}if(o[1].length<t[1].length){t=o}if(t[1].length===0){break}}if(t[0].length===0){return t}if(k){try{m=k.call(this,t[1])}catch(x){throw new a.Exception(t[1])}t[1]=m[1]}return t}},forward:function(i,j){return function(k){return i[j].call(this,k)}},replace:function(j,i){return function(k){var l=j.call(this,k);return[i,l[1]]}},process:function(j,i){return function(k){var l=j.call(this,k);return[i.call(this,l[0]),l[1]]}},min:function(i,j){return function(k){var l=j.call(this,k);if(l[0].length<i){throw new a.Exception(k)}return l}}};var h=function(i){return function(){var j=null,m=[];if(arguments.length>1){j=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){j=arguments[0]}}if(j){for(var l=0,k=j.shift();l<k.length;l++){j.unshift(k[l]);m.push(i.apply(null,j));j.shift();return m}}else{return i.apply(null,arguments)}}};var g="optional not ignore cache".split(/\s/);for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]])}var f=function(i){return function(){if(arguments[0] instanceof Array){return i.apply(null,arguments[0])}else{return i.apply(null,arguments)}}};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]])}}());(function(){var e=Date,k=e.prototype;var f=function(l){var m=[];for(var g=0;g<l.length;g++){if(l[g] instanceof Array){m=m.concat(f(l[g]))}else{if(l[g]){m.push(l[g])}}}return m};e.Grammar={};e.Translator={hour:function(g){return function(){this.hour=Number(g)}},minute:function(g){return function(){this.minute=Number(g)}},second:function(g){return function(){this.second=Number(g)}},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase()}},timezone:function(g){return function(){var l=g.replace(/[^\d\+\-]/g,"");if(l.length){this.timezoneOffset=Number(l)}else{this.timezone=g.toLowerCase()}}},day:function(g){var l=g[0];return function(){this.day=Number(l.match(/\d+/)[0])}},month:function(g){return function(){this.month=(g.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(g)/4:Number(g)-1}},year:function(g){return function(){var l=Number(g);this.year=((g.length>2)?l:(l+(((l+2000)<e.CultureInfo.twoDigitYearMax)?2000:1900)))}},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(g){g=(g instanceof Array)?g:[g];for(var m=0;m<g.length;m++){if(g[m]){g[m].call(this)}}var l=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=l.getDate()}if(!this.year){this.year=l.getFullYear()}if(!this.month&&this.month!==0){this.month=l.getMonth()}if(!this.day){this.day=1}if(!this.hour){this.hour=0}if(!this.minute){this.minute=0}if(!this.second){this.second=0}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.day>e.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var n=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){n.set({timezone:this.timezone})}else{if(this.timezoneOffset){n.set({timezoneOffset:this.timezoneOffset})}}return n},finish:function(g){g=(g instanceof Array)?f(g):[g];if(g.length===0){return null}for(var p=0;p<g.length;p++){if(typeof g[p]=="function"){g[p].call(this)}}var m=e.today();if(this.now&&!this.unit&&!this.operator){return new Date()}else{if(this.now){m=new Date()}}var q=!!(this.days&&this.days!==null||this.orient||this.operator);var s,o,n;n=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){m.setTimeToNow()}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;q=true}}if(!q&&this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate();if(!this.month){this.month=l.getMonth()}this.year=l.getFullYear()}if(q&&this.weekday&&this.unit!="month"){this.unit="day";s=(e.getDayNumberFromName(this.weekday)-m.getDay());o=7;this.days=s?((s+(n*o))%o):(n*o)}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1}if(this.month&&!this.day&&this.value){m.set({day:this.value*1});if(!q){this.day=this.value*1}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;q=true}if(q&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";s=(this.month-m.getMonth());o=12;this.months=s?((s+(n*o))%o):(n*o);this.month=null}if(!this.unit){this.unit="day"}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*n}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}this[this.unit+"s"]=this.value*n}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else{if(this.meridian=="a"&&this.hour==12){this.hour=0}}}if(this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate();if(l.getMonth()!==m.getMonth()){this.month=l.getMonth()}}if((this.month||this.month===0)&&!this.day){this.day=1}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value)}if(q&&this.timezone&&this.day&&this.days){this.day=this.days}return(q)?m.add(this):m.set(this)}};var h=e.Parsing.Operators,d=e.Grammar,j=e.Translator,b;d.datePartDelimiter=h.rtoken(/^([\s\-\.\,\/\u5E74\u6708\u65E5\uB144\uC6D4\uC77C\x27]+)/);d.timePartDelimiter=h.stoken(":");d.whiteSpace=h.rtoken(/^\s*/);d.generalDelimiter=h.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};d.ctoken=function(o){var n=a[o];if(!n){var p=e.CultureInfo.regexPatterns;var m=o.split(/\s+/),l=[];for(var g=0;g<m.length;g++){l.push(h.replace(h.rtoken(p[m[g]]),m[g]))}n=a[o]=h.any.apply(null,l)}return n};d.ctoken2=function(g){return h.rtoken(e.CultureInfo.regexPatterns[g])};SetupLocaleFormatRoutines=function(){d.h=h.cache(h.process(h.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),j.hour));d.hh=h.cache(h.process(h.rtoken(/^(0[0-9]|1[0-2])/),j.hour));d.H=h.cache(h.process(h.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),j.hour));d.HH=h.cache(h.process(h.rtoken(/^([0-1][0-9]|2[0-3])/),j.hour));d.m=h.cache(h.process(h.rtoken(/^([0-5][0-9]|[0-9])/),j.minute));d.mm=h.cache(h.process(h.rtoken(/^[0-5][0-9]/),j.minute));d.s=h.cache(h.process(h.rtoken(/^([0-5][0-9]|[0-9])/),j.second));d.ss=h.cache(h.process(h.rtoken(/^[0-5][0-9]/),j.second));d.hms=h.cache(h.sequence([d.H,d.m,d.s],d.timePartDelimiter));d.t=h.cache(h.process(d.ctoken2("shortMeridian"),j.meridian));d.tt=h.cache(h.process(d.ctoken2("longMeridian"),j.meridian));d.z=h.cache(h.process(h.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),j.timezone));d.zz=h.cache(h.process(h.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),j.timezone));d.zzz=h.cache(h.process(d.ctoken2("timezone"),j.timezone));d.timeSuffix=h.each(h.ignore(d.whiteSpace),h.set([d.tt,d.zzz]));d.time=h.each(h.optional(h.ignore(h.stoken("T"))),d.hms,d.timeSuffix);d.d=h.cache(h.process(h.each(h.rtoken(/^([0-2]\d|3[0-1]|\d)/),h.optional(d.ctoken2("ordinalSuffix"))),j.day));d.dd=h.cache(h.process(h.each(h.rtoken(/^([0-2]\d|3[0-1])/),h.optional(d.ctoken2("ordinalSuffix"))),j.day));d.ddd=d.dddd=h.cache(h.process(d.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g}}));d.M=h.cache(h.process(h.rtoken(/^(1[0-2]|0\d|\d)/),j.month));d.MM=h.cache(h.process(h.rtoken(/^(1[0-2]|0\d)/),j.month));d.MMM=d.MMMM=h.cache(h.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),j.month));d.y=h.cache(h.process(h.rtoken(/^(\d\d?)/),j.year));d.yy=h.cache(h.process(h.rtoken(/^(\d\d)/),j.year));d.yyy=h.cache(h.process(h.rtoken(/^(\d\d?\d?\d?)/),j.year));d.yyyy=h.cache(h.process(h.rtoken(/^(\d\d\d\d)/),j.year));b=function(){return h.each(h.any.apply(null,arguments),h.not(d.ctoken2("timeContext")))};d.day=b(d.d,d.dd);d.month=b(d.M,d.MMM);d.year=b(d.yyyy,d.yy);d.orientation=h.process(d.ctoken("past future"),function(g){return function(){this.orient=g}});d.operator=h.process(d.ctoken("add subtract"),function(g){return function(){this.operator=g}});d.rday=h.process(d.ctoken("yesterday tomorrow today now"),j.rday);d.unit=h.process(d.ctoken("second minute hour day week month year"),function(g){return function(){this.unit=g}});d.value=h.process(h.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"")}});d.expression=h.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]);b=function(){return h.set(arguments,d.datePartDelimiter)};d.mdy=b(d.ddd,d.month,d.day,d.year);d.ymd=b(d.ddd,d.year,d.month,d.day);d.dmy=b(d.ddd,d.day,d.month,d.year);d.date=function(g){return((d[e.CultureInfo.dateElementOrder]||d.mdy).call(this,g))}};SetupLocaleFormatRoutines();d.format=h.process(h.many(h.any(h.process(h.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(d[g]){return d[g]}else{throw e.Parsing.Exception(g)}}),h.process(h.rtoken(/^[^dMyhHmstz]+/),function(g){return h.ignore(h.stoken(g))}))),function(g){return h.process(h.each.apply(null,g),j.finishExact)});var i={};var c=function(g){return i[g]=(i[g]||d.format(g)[0])};e.ResetParseFormats=function(){i={};a={};SetupLocaleFormatRoutines()};d.formats=function(l){if(l instanceof Array){var m=[];for(var g=0;g<l.length;g++){m.push(c(l[g]))}return h.any.apply(null,m)}else{return c(l)}};d._formats=d.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);d._start=h.process(h.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),j.finish);d.start=function(g){try{var l=d._formats.call({},g);if(l[1].length===0){return l}}catch(m){}return d._start.call({},g)};e._parse=e.parse;e.parse=function(g){var l=null;if(!g){return null}if(g instanceof Date){return g}try{l=e.Grammar.start.call({},g.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(m){return null}return(((l[1].length===0)||l[1]==="日"||l[1]==="일")?l[0]:null)};e.getParseFunction=function(l){var g=e.Grammar.formats(l);return function(m){var n=null;try{n=g.call({},m)}catch(o){return null}return((n[1].length===0)?n[0]:null)}};e.parseExact=function(g,l){return e.getParseFunction(l)(g)}}());(function(){var v=Date,g=v.prototype,w=v.CultureInfo,o=Number.prototype;g._orient=+1;g._nth=null;g._is=false;g._same=false;g._isSecond=false;o._dateElement="day";g.next=function(){this._orient=+1;return this};v.next=function(){return v.today().next()};g.last=g.prev=g.previous=function(){this._orient=-1;return this};v.last=v.prev=v.previous=function(){return v.today().last()};g.is=function(){this._is=true;return this};g.same=function(){this._same=true;this._isSecond=false;return this};g.today=function(){return this.same().day()};g.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun())}return false};g.at=function(i){return(typeof i==="string")?v.parse(this.toString("d")+" "+i):this.set(i)};o.fromNow=o.after=function(i){var j={};j[this._dateElement]=this;return((!i)?new Date():i.clone()).add(j)};o.ago=o.before=function(i){var j={};j[this._dateElement]=this*-1;return((!i)?new Date():i.clone()).add(j)};var e=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),h=("january february march april may june july august september october november december").split(/\s/),n=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),p=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),b=("final first second third fourth fifth").split(/\s/),y;g.toObject=function(){var k={};for(var j=0;j<n.length;j++){k[n[j].toLowerCase()]=this["get"+p[j]]()}return k};v.fromObject=function(i){i.week=null;return Date.today().set(i)};var x=function(i){return function(){if(this._is){this._is=false;return this.getDay()==i}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1)}this._isSecond=false;var k=this._nth;this._nth=null;var j=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(i,k);if(this>j){throw new RangeError(v.getDayName(i)+" does not occur "+k+" times in the month of "+v.getMonthName(j.getMonth())+" "+j.getFullYear()+".")}return this}return this.moveToDayOfWeek(i,this._orient)}};var f=function(i){return function(){var k=v.today(),j=i-k.getDay();if(i===0&&w.firstDayOfWeek===1&&k.getDay()!==0){j=j+7}return k.addDays(j)}};for(var u=0;u<e.length;u++){v[e[u].toUpperCase()]=v[e[u].toUpperCase().substring(0,3)]=u;v[e[u]]=v[e[u].substring(0,3)]=f(u);g[e[u]]=g[e[u].substring(0,3)]=x(u)}var z=function(i){return function(){if(this._is){this._is=false;return this.getMonth()===i}return this.moveToMonth(i,this._orient)}};var m=function(i){return function(){return v.today().set({month:i,day:1})}};for(var t=0;t<h.length;t++){v[h[t].toUpperCase()]=v[h[t].toUpperCase().substring(0,3)]=t;v[h[t]]=v[h[t].substring(0,3)]=m(t);g[h[t]]=g[h[t].substring(0,3)]=z(t)}var c=function(i){return function(){if(this._isSecond){this._isSecond=false;return this}if(this._same){this._same=this._is=false;var C=this.toObject(),B=(arguments[0]||new Date()).toObject(),A="",l=i.toLowerCase();for(var j=(n.length-1);j>-1;j--){A=n[j].toLowerCase();if(C[A]!=B[A]){return false}if(l==A){break}}return true}if(i.substring(i.length-1)!="s"){i+="s"}return this["add"+i](this._orient)}};var d=function(i){return function(){this._dateElement=i;return this}};for(var s=0;s<n.length;s++){y=n[s].toLowerCase();g[y]=g[y+"s"]=c(n[s]);o[y]=o[y+"s"]=d(y)}g._ss=c("Second");var a=function(i){return function(j){if(this._same){return this._ss(arguments[0])}if(j||j===0){return this.moveToNthOccurrence(j,i)}this._nth=i;if(i===2&&(j===undefined||j===null)){this._isSecond=true;return this.addSeconds(this._orient)}return this}};for(var q=0;q<b.length;q++){g[b[q]]=(q===0)?a(-1):a(q)}}());var TimeSpan=function(m,h,e,j,d){var l="days hours minutes seconds milliseconds".split(/\s+/);var c=function(i){return function(){return this[i]}};var k=function(i){return function(n){this[i]=n;return this}};for(var g=0;g<l.length;g++){var b=l[g],a=b.slice(0,1).toUpperCase()+b.slice(1);TimeSpan.prototype[b]=0;TimeSpan.prototype["get"+a]=c(b);TimeSpan.prototype["set"+a]=k(b)}if(arguments.length==4){this.setDays(m);this.setHours(h);this.setMinutes(e);this.setSeconds(j)}else{if(arguments.length==5){this.setDays(m);this.setHours(h);this.setMinutes(e);this.setSeconds(j);this.setMilliseconds(d)}else{if(arguments.length==1&&typeof m=="number"){var f=(m<0)?-1:+1;this.setMilliseconds(Math.abs(m));this.setDays(Math.floor(this.getMilliseconds()/86400000)*f);this.setMilliseconds(this.getMilliseconds()%86400000);this.setHours(Math.floor(this.getMilliseconds()/3600000)*f);this.setMilliseconds(this.getMilliseconds()%3600000);this.setMinutes(Math.floor(this.getMilliseconds()/60000)*f);this.setMilliseconds(this.getMilliseconds()%60000);this.setSeconds(Math.floor(this.getMilliseconds()/1000)*f);this.setMilliseconds(this.getMilliseconds()%1000);this.setMilliseconds(this.getMilliseconds()*f)}}}this.getTotalMilliseconds=function(){return(this.getDays()*86400000)+(this.getHours()*3600000)+(this.getMinutes()*60000)+(this.getSeconds()*1000)};this.compareTo=function(o){var n=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds()),i;if(o===null){i=new Date(1970,1,1,0,0,0)}else{i=new Date(1970,1,1,o.getHours(),o.getMinutes(),o.getSeconds())}return(n<i)?-1:(n>i)?1:0};this.equals=function(i){return(this.compareTo(i)===0)};this.add=function(i){return(i===null)?this:this.addSeconds(i.getTotalMilliseconds()/1000)};this.subtract=function(i){return(i===null)?this:this.addSeconds(-i.getTotalMilliseconds()/1000)};this.addDays=function(i){return new TimeSpan(this.getTotalMilliseconds()+(i*86400000))};this.addHours=function(i){return new TimeSpan(this.getTotalMilliseconds()+(i*3600000))};this.addMinutes=function(i){return new TimeSpan(this.getTotalMilliseconds()+(i*60000))};this.addSeconds=function(i){return new TimeSpan(this.getTotalMilliseconds()+(i*1000))};this.addMilliseconds=function(i){return new TimeSpan(this.getTotalMilliseconds()+i)};this.get12HourHour=function(){return(this.getHours()>12)?this.getHours()-12:(this.getHours()===0)?12:this.getHours()};this.getDesignator=function(){return(this.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};this.toString=function(n){this._toString=function(){if(this.getDays()!==null&&this.getDays()>0){return this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())}else{return this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())}};this.p=function(o){return(o.toString().length<2)?"0"+o:o};var i=this;return n?n.replace(/dd?|HH?|hh?|nn?|ss?|tt?/g,function(o){switch(o){case"d":return i.getDays();case"dd":return i.p(i.getDays());case"H":return i.getHours();case"HH":return i.p(i.getHours());case"h":return i.get12HourHour();case"hh":return i.p(i.get12HourHour());case"n":return i.getMinutes();case"nn":return i.p(i.getMinutes());case"s":return i.getSeconds();case"ss":return i.p(i.getSeconds());case"t":return((i.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return(i.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()};return this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(n,f,e,q,o,k,g){var m="years months days hours minutes seconds milliseconds".split(/\s+/);var j=function(i){return function(){return this[i]}};var b=function(i){return function(v){this[i]=v;return this}};for(var p=0;p<m.length;p++){var d=m[p],c=d.slice(0,1).toUpperCase()+d.slice(1);TimePeriod.prototype[d]=0;TimePeriod.prototype["get"+c]=j(d);TimePeriod.prototype["set"+c]=b(d)}if(arguments.length==7){this.years=n;this.months=f;this.setDays(e);this.setHours(q);this.setMinutes(o);this.setSeconds(k);this.setMilliseconds(g)}else{if(arguments.length==2&&arguments[0] instanceof Date&&arguments[1] instanceof Date){var u=n.clone();var t=f.clone();var s=u.clone();var h=(u>t)?-1:+1;this.years=t.getFullYear()-u.getFullYear();s.addYears(this.years);if(h==+1){if(s>t){if(this.years!==0){this.years--}}}else{if(s<t){if(this.years!==0){this.years++}}}u.addYears(this.years);if(h==+1){while(u<t&&u.clone().addDays(Date.getDaysInMonth(u.getYear(),u.getMonth()))<t){u.addMonths(1);this.months++}}else{while(u>t&&u.clone().addDays(-u.getDaysInMonth())>t){u.addMonths(-1);this.months--}}var l=t-u;if(l!==0){var a=new TimeSpan(l);this.setDays(a.getDays());this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds())}}}return this};(function(b){f.DP=20;f.RM=1;var i=1000000,e=1000000,c=-7,h=21,g=f.prototype,k=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i,a=new f(1);function f(q){var p,o,m,l=this;if(!(l instanceof f)){return new f(q)}if(q instanceof f){l.s=q.s;l.e=q.e;l.c=q.c.slice();return}if(q===0&&1/q<0){q="-0"}else{if(!k.test(q+="")){throw NaN}}l.s=q.charAt(0)=="-"?(q=q.slice(1),-1):1;if((p=q.indexOf("."))>-1){q=q.replace(".","")}if((o=q.search(/e/i))>0){if(p<0){p=o}p+=+q.slice(o+1);q=q.substring(0,o)}else{if(p<0){p=q.length}}for(o=0;q.charAt(o)=="0";o++){}if(o==(m=q.length)){l.c=[l.e=0]}else{for(;q.charAt(--m)=="0";){}l.e=p-o-1;l.c=[];for(p=0;o<=m;l.c[p++]=+q.charAt(o++)){}}}function d(l,q,p,n){var o=l.c,m=l.e+q+1;if(p!==0&&p!==1&&p!==2){throw"!Big.RM!"}p=p&&(o[m]>5||o[m]==5&&(p==1||n||m<0||o[m+1]!=null||o[m-1]&1));if(m<1||!o[0]){l.c=p?(l.e=-q,[1]):[l.e=0]}else{o.length=m--;if(p){for(;++o[m]>9;){o[m]=0;if(!m--){++l.e;o.unshift(1)}}}for(m=o.length;!o[--m];o.pop()){}}return l}g.cmp=function(s){var m,t=this,u=t.c,r=(s=new f(s))["c"],q=t.s,p=s.s,o=t.e,n=s.e;if(!u[0]||!r[0]){return !u[0]?!r[0]?0:-p:q}if(q!=p){return q}m=q<0;if(o!=n){return o>n^m?1:-1}for(q=-1,p=(o=u.length)<(n=r.length)?o:n;++q<p;){if(u[q]!=r[q]){return u[q]>r[q]^m?1:-1}}return o==n?0:o>n^m?1:-1};g.div=function(u){var v=this,q=v.c,l=(u=new f(u))["c"],B=v.s==u.s?1:-1,F=f.DP;if(F!==~~F||F<0||F>i){throw"!Big.DP!"}if(!q[0]||!l[0]){if(q[0]==l[0]){throw NaN}if(!l[0]){throw B/0}return new f(B*0)}var G,A,D,z,t,r=l.slice(),E=G=l.length,C=q.length,m=q.slice(0,G),o=m.length,H=new f(a),p=H.c=[],n=0,w=F+(H.e=v.e-u.e)+1;H.s=B;B=w<0?0:w;r.unshift(0);for(;o++<G;m.push(0)){}do{for(D=0;D<10;D++){if(G!=(o=m.length)){z=G>o?1:-1}else{for(t=-1,z=0;++t<G;){if(l[t]!=m[t]){z=l[t]>m[t]?1:-1;break}}}if(z<0){for(A=o==G?l:r;o;){if(m[--o]<A[o]){for(t=o;t&&!m[--t];m[t]=9){}--m[t];m[o]+=10}m[o]-=A[o]}for(;!m[0];m.shift()){}}else{break}}p[n++]=z?D:++D;m[0]&&z?(m[o]=q[E]||0):(m=[q[E]])}while((E++<C||m[0]!=null)&&B--);if(!p[0]&&n!=1){p.shift();H.e--}if(n>w){d(H,F,f.RM,m[0]!=null)}return H};g.minus=function(q){var p,m,l,r,u=this,t=u.s,s=(q=new f(q))["s"];if(t!=s){return q.s=-s,u.plus(q)}var w=u.c,v=u.e,o=q.c,n=q.e;if(!w[0]||!o[0]){return o[0]?(q.s=-s,q):new f(w[0]?u:0)}if(w=w.slice(),t=v-n){p=(r=t<0)?(t=-t,w):(n=v,o);for(p.reverse(),s=t;s--;p.push(0)){}p.reverse()}else{l=((r=w.length<o.length)?w:o).length;for(t=s=0;s<l;s++){if(w[s]!=o[s]){r=w[s]<o[s];break}}}if(r){p=w,w=o,o=p;q.s=-q.s}if((s=-((l=w.length)-o.length))>0){for(;s--;w[l++]=0){}}for(s=o.length;s>t;){if(w[--s]<o[s]){for(m=s;m&&!w[--m];w[m]=9){}--w[m];w[s]+=10}w[s]-=o[s]}for(;w[--l]==0;w.pop()){}for(;w[0]==0;w.shift(),--n){}if(!w[0]){w=[n=0]}return q.c=w,q.e=n,q};g.mod=function(p){p=new f(p);var o,l=this,n=l.s,m=p.s;if(!p.c[0]){throw NaN}l.s=p.s=1;o=p.cmp(l)==1;l.s=n,p.s=m;return o?new f(l):(n=f.DP,m=f.RM,f.DP=f.RM=0,l=l.div(p),f.DP=n,f.RM=m,this["minus"](l.times(p)))};g.plus=function(o){var n,r=this,q=r.s,p=(o=new f(o))["s"];if(q!=p){return o.s=-p,r.minus(o)}var s=r.e,t=r.c,l=o.e,m=o.c;if(!t[0]||!m[0]){return m[0]?o:new f(t[0]?r:q*0)}if(t=t.slice(),q=s-l){n=q>0?(l=s,m):(q=-q,t);for(n.reverse();q--;n.push(0)){}n.reverse()}if(t.length-m.length<0){n=m,m=t,t=n}for(q=m.length,p=0;q;p=(t[--q]=t[q]+m[q]+p)/10^0,t[q]%=10){}if(p){t.unshift(p);++l}for(q=t.length;t[--q]==0;t.pop()){}return o.c=t,o.e=l,o};g.pow=function(n){var m=n<0,l=new f(this),o=a;if(n!==~~n||n<-e||n>e){throw"!pow!"}for(n=m?-n:n;;){if(n&1){o=o.times(l)}n>>=1;if(!n){break}l=l.times(l)}return m?a.div(o):o};g.round=function(n,m){var l=new f(this);if(n==null){n=0}else{if(n!==~~n||n<0||n>i){throw"!round!"}}d(l,n,m==null?f.RM:m);return l};g.sqrt=function(){var t,n,p,l=this,s=l.c,m=l.s,q=l.e,o=new f("0.5");if(!s[0]){return new f(l)}if(m<0){throw NaN}m=Math.sqrt(l.toString());if(m==0||m==1/0){t=s.join("");if(!(t.length+q&1)){t+="0"}n=new f(Math.sqrt(t).toString());n.e=(((q+1)/2)|0)-(q<0||q&1)}else{n=new f(m.toString())}m=n.e+(f.DP+=4);do{p=n;n=o.times(p.plus(l.div(p)))}while(p.c.slice(0,m).join("")!==n.c.slice(0,m).join(""));d(n,f.DP-=4,f.RM);return n};g.times=function(p){var o,s=this,t=s.c,n=(p=new f(p))["c"],r=t.length,q=n.length,m=s.e,l=p.e;p.s=s.s==p.s?1:-1;if(!t[0]||!n[0]){return new f(p.s*0)}p.e=m+l;if(r<q){o=t,t=n,n=o,l=r,r=q,q=l}for(l=r+q,o=[];l--;o.push(0)){}for(m=q-1;m>-1;m--){for(q=0,l=r+m;l>m;q=o[l]+n[m]*t[l-m-1]+q,o[l--]=q%10|0,q=q/10|0){}if(q){o[l]=(o[l]+q)%10}}q&&++p.e;!o[0]&&o.shift();for(l=o.length;!o[--l];o.pop()){}return p.c=o,p};g.toString=g.valueOf=function(){var l=this,n=l.e,o=l.c.join(""),m=o.length;if(n<=c||n>=h){o=o.charAt(0)+(m>1?"."+o.slice(1):"")+(n<0?"e":"e+")+n}else{if(n<0){for(;++n;o="0"+o){}o="0."+o}else{if(n>0){if(++n>m){for(n-=m;n--;o+="0"){}}else{if(n<m){o=o.slice(0,n)+"."+o.slice(n)}}}else{if(m>1){o=o.charAt(0)+"."+o.slice(1)}}}}return l.s<0&&l.c[0]?"-"+o:o};function j(l,p,n){var m=p-(l=new f(l))["e"],o=l.c;if(o.length>++p){d(l,m,f.RM)}m=!o[0]?m+1:n?p:(o=l.c,l.e+m+1);for(;o.length<m;o.push(0)){}m=l.e;return n==1||n==2&&(p<=m||m<=c)?(l.s<0&&o[0]?"-":"")+(o.length>1?(o.splice(1,0,"."),o.join("")):o[0])+(m<0?"e":"e+")+m:l.toString()}g.toExponential=function(l){if(l==null){l=this["c"].length-1}else{if(l!==~~l||l<0||l>i){throw"!toExp!"}}return j(this,l,1)};g.toFixed=function(p){var m,l=this,o=c,n=h;c=-(h=1/0);if(p==null){m=l.toString()}else{if(p===~~p&&p>=0&&p<=i){m=j(l,l.e+p);if(l.s<0&&l.c[0]&&m.indexOf("-")<0){m="-"+m}}}c=o,h=n;if(!m){throw"!toFix!"}return m};g.toPrecision=function(l){if(l==null){return this.toString()}else{if(l!==~~l||l<1||l>i){throw"!toPre!"}}return j(this,l-1,2)};if(typeof module!=="undefined"&&module.exports){module.exports=f}else{if(typeof define=="function"&&define.amd){define(function(){return f})}else{b.Big=f}}})(this);var ParserDate={MILLIS_IN_SECOND:1000,MILLIS_IN_MINUTE:1000*60,MILLIS_IN_HOUR:1000*60*60,MILLIS_IN_DAY:1000*60*60*24,_localeMaskMap:{},_loggingEnabled:false,getDate:function(f,b){var c=undefined;if(f instanceof Date){return f}try{if(f instanceof Number){var a=Math.round(f*ParserDate.MILLIS_IN_DAY);c=new Date(a);c.addMilliseconds(c.getTimezoneOffset()*ParserDate.MILLIS_IN_MINUTE)}else{if(!(f instanceof Big)){if(f==0){return""}try{f=new Big(f)}catch(e){c=ParserDate.ParseDate(f.toString(),b)}}}if(f instanceof Big){var g=f.times(ParserDate.MILLIS_IN_DAY);g=Math.round(g.toString());c=new Date(g);c.addMilliseconds(c.getTimezoneOffset()*ParserDate.MILLIS_IN_MINUTE)}}catch(e){c=f}return c},getNumberFromDate:function(d,b){var c;if(d instanceof Date){c=d.clone()}else{c=ParserDate.ParseDate(d.toString(),b)}var a=undefined;if(c&&!isNaN(c)){c=c-(c.getTimezoneOffset()*ParserDate.MILLIS_IN_MINUTE);a=c/ParserDate.MILLIS_IN_DAY}return a},DatePart:function(b,g){var e=ParserDate.getDate(g);if(b!=="H"){b=b.toString().toLowerCase()}if("y"===b){return e.getFullYear()}if("dy"===b){var a=new Date(e.getFullYear(),0,1);var h=parseFloat(e.getUTCOffset())/100;var j=parseFloat(a.getUTCOffset())/100;var f=h-j;return Math.floor((e-a+(f*ParserDate.MILLIS_IN_HOUR))/ParserDate.MILLIS_IN_DAY)+1}if("m"===b){return e.getMonth()+1}if("mm"===b){var k=e.getMonth()+1;if(k<10){return"0"+k}return k}if("mmm"===b){return Date.CultureInfo.abbreviatedMonthNames[e.getMonth()]}if("mmmm"===b){return Date.CultureInfo.monthNames[e.getMonth()]}if("w"===b){return e.getDay()+1}if("ww"===b){return e.getWeek()}if("d"===b){return e.getDate()}if("dd"===b){return Date.CultureInfo.abbreviatedDayNames[e.getDay()]}if("ddd"===b){return Date.CultureInfo.dayNames[e.getDay()]}if("h"===b){var i=e.getHours();i=i<13?i:i-12;return i}if("H"===b){return e.getHours()}if("n"===b){return e.getMinutes()}if("s"===b){return e.getSeconds()}if("q"===b){var c=e.getMonth()+1;if(c<=3){return 1}if(c<=6){return 2}if(c<=9){return 3}return 4}throw new Error(i18n.js.esign_expr_error_datepart(b))},DateAdd:function(c,e,f){var b=ParserDate.getDate(e);c=c.toString().toLowerCase();f=parseInt(f);if(c==="y"){b.addYears(f)}else{if(c==="m"){b.addMonths(f)}else{if(c==="w"){b.addWeeks(f)}else{if(c==="d"){b.addDays(f)}else{if(c==="h"){b.addHours(f)}else{if(c==="n"){b.addMinutes(f)}else{if(c==="s"){b.addSeconds(f)}else{if(c==="q"){b.addMonths(f*3)}else{throw new Error(i18n.js.esign_expr_error_dateadd(c))}}}}}}}}var a=ParserDate.getNumberFromDate(b);return a},DaysIn:function(e,f){var c=ParserDate.getDate(f);e=e.toString().toLowerCase();if(e==="y"){if(Date.isLeapYear(c.getFullYear())){return 366}return 365}if(e==="q"){var b=c.getMonth()+1;if(b<=3){var a=31+28+31;if(Date.isLeapYear(c.getFullYear())){a++}return a}if(b<=6){return 30+31+30}if(b<=9){return 31+31+30}return 31+30+31}if(e==="m"){return Date.getDaysInMonth(c.getFullYear(),c.getMonth())}if(e==="w"){return 7}if(e==="d"){return 1}if(e==="h"||e==="n"||e==="s"){return 0}throw new Error(i18n.js.esign_expr_error_daysin(e))},DateDiff:function(c,b,a){var i=ParserDate.getDate(b);var h=ParserDate.getDate(a);c=c.toString().toLowerCase();if(h<i){var f=h;h=i;i=f}var e=h.getTime()-i.getTime();var d=i.isDaylightSavingTime();var g=h.isDaylightSavingTime();if(d!=g){if(g){e+=ParserDate.MILLIS_IN_HOUR}else{e-=ParserDate.MILLIS_IN_HOUR}}if("dy"==c||"d"==c||"dd"==c||"ddd"==c){return Math.floor(e/ParserDate.MILLIS_IN_DAY)}else{if("h"==c){return Math.floor(e/ParserDate.MILLIS_IN_HOUR)}else{if("n"==c){return Math.floor(e/ParserDate.MILLIS_IN_MINUTE)}else{if("s"==c){return Math.floor(e/ParserDate.MILLIS_IN_SECOND)}}}}throw new Error(i18n.js.esign_expr_error_datediff(c))},Now:function(){return ParserDate.getNumberFromDate(new Date())},ParseDate:function(c,b){ParserDate._initializeFormatters();c=jQuery.trim(c);var d=ParserDate._localeMaskMap[Date.CultureInfo.name];var a;if(b){a=ParserDate._formatMatch(c,ParserDate._convertFormat(b))}if(!a){a=ParserDate._arrayMatch(c,d.arrayDTs)}if(!a){a=ParserDate._arrayMatch(c,d.arrayDs)}if(!a){a=ParserDate._arrayMatch(c,d.arrayTs)}if(!a&&c.length>10){a=Date.parse(c)}if(a&&a.getFullYear()<100){if(a.getFullYear()<70){a.addYears(2000)}else{a.addYears(1900)}}return a},_initializeFormatters:function(){if(ParserDate._localeMaskMap[Date.CultureInfo.name]!=undefined){return}var e={};var a=Date.CultureInfo.formatPatterns;var f=[];e.arrayDTs=f;f.push(a.shortDate+" "+a.shortTime);f.push(a.shortDate.replace("yyyy","yy")+" "+a.shortTime);f.push(a.longDate+" "+a.longTime);f.push(a.fullDateTime);f.push(a.fullDateTime.replace("dddd","dd"));var d=[];e.arrayDs=d;var c=ParserDate._getDefaultSeparator(a.shortDate);ParserDate._addAllPermutations(a.shortDate,c,d,true,true,true);d.push(a.longDate);ParserDate._addAllPermutations("yyyy-M-d","-",d,true);ParserDate._addAllPermutations("d-M-yyyy","-",d,true);ParserDate._addAllPermutations("M/d/yyyy","/",d,true);ParserDate._addAllPermutations("d/MMM/yyyy","/",d,true);ParserDate._addAllPermutations("MMM/d/yyyy","/",d,true);ParserDate._addAllPermutations("MMM/yyyy","/",d,true);ParserDate._addAllPermutations("M/yyyy","/",d,true);ParserDate._addAllPermutations("MMM d, yyyy",undefined,d,true);ParserDate._addAllPermutations("MMMM d, yyyy",undefined,d,true);ParserDate._addAllPermutations("ddd, MMMM d, yyyy",undefined,d);ParserDate._addAllPermutations("dddd, MMMM d, yyyy",undefined,d);var b=[];e.arrayTs=b;b.push(a.longTime);b.push("H:mm:ss.Z");b.push("h:mm:ss tt");b.push("H:m:ss");b.push("h:mm tt");b.push("H:mm");b.push(a.shortTime);ParserDate._localeMaskMap[Date.CultureInfo.name]=e},_convertFormat:function(a){a=a.replace(/M/g,"Min");a=a.replace(/m/g,"M");a=a.replace(/Min/g,"m");a=a.replace(/n/g,"m");a=a.replace(/z/g,"Z");return a},_getDefaultSeparator:function(e){var f={};f["/"]=e.indexOf("/");f["\\"]=e.indexOf("\\");f["."]=e.indexOf(".");f["-"]=e.indexOf("-");f[" "]=e.indexOf(" ");var a="/";var b=Number.MAX_VALUE;for(var c in f){if(f.hasOwnProperty(c)){var d=f[c];if(d>-1&&d<b){a=c}}}return a},_addAllPermutations:function(e,d,a,f,c,b){a.push(e);if(d){ParserDate._addSeparatorPermutation(e,d,"/",a);ParserDate._addSeparatorPermutation(e,d,"\\",a);ParserDate._addSeparatorPermutation(e,d,".",a);ParserDate._addSeparatorPermutation(e,d,"-",a);ParserDate._addSeparatorPermutation(e,d," ",a)}if(f||c||b){var g=e;if(c){g=g.replace(/MM/g,"M")}if(b){g=g.replace(/dd/g,"d")}if(f){if(c||b){if(ParserDate._loggingEnabled){console.log("locale: "+Date.CultureInfo.name+"   original: "+e+"   shortened: "+g)}ParserDate._addAllPermutations(g,d,a)}g=g.replace(/yyyy/g,"yy")}if(ParserDate._loggingEnabled){console.log("locale: "+Date.CultureInfo.name+"   original: "+e+"   shortened: "+g)}ParserDate._addAllPermutations(g,d,a)}},_addSeparatorPermutation:function(b,c,d,a){if(c==d){return}var e=b;e=e.replace(new RegExp(c,"g"),d);a.push(e)},_arrayMatch:function(d,g){var a=undefined;var c=0;while(a==undefined&&c<g.length){try{var b=ParserDate._formatMatch(d,g[c]);if(b){a=b}else{c++}}catch(f){}}return a},_formatMatch:function(b,c){if(ParserDate._loggingEnabled){console.log("attempt match: "+c)}var a=Date.parseExact(b,c);if(a&&a instanceof Date){if(ParserDate._loggingEnabled){console.log("matched "+b+" with: "+c+" (for locale "+Date.CultureInfo.name+")")}return a}else{return null}}};var Parser=(function(R){var b=" ".charCodeAt(0);function W(ah){function ag(){}ag.prototype=ah;return new ag()}var t=0;var T=1;var Q=2;var D=3;var M=4;var l=5;var z=new Big(0);function h(ah,aj,ai,ag){this.type_=ah;this.key_=aj||0;this.prio_=ai||0;this.value_=(ag!=null)?ag:0;this.toString=function(){switch(this.type_){case t:return this.value_;case T:case Q:case D:return this.key_;case M:return this.key_+"()";default:return"Invalid Token"}}}function Z(ak,aj,ag,ai,ah){this.tokens=ak;this.functionsAsOperators=aj;this.operators=ag;this.functions=ai;this.constants=ah}Z.prototype={evaluate:function(ap){ap=ap||{};var aj=[];var am;var al;var ak;var ao=this.tokens.length;var aq;var ai;var ah;for(ai=0;ai<ao;ai++){aq=this.tokens[ai];switch(aq.type_){case t:aj.push(aq.value_);break;case D:ah=aq.key_;if(!(ah in ap)){ah=ah.toLowerCase()}if(ah in ap){aj.push(ap[ah])}else{throw new Error(i18n.js.esign_expr_error_undefined_variable(aq.key_))}break;case T:am=aj.pop();ak=this.functionsAsOperators[aq.key_];aj.push(ak(am));break;case Q:al=aj.pop();am=aj.pop();ak=this.operators[aq.key_];aj.push(ak(am,al));break;case M:ah=this.functions[aq.key_];if(ah){var an=[];var ag=aj.pop();while(ag.type_!==l){an.unshift(ag);ag=aj.pop()}aj.push(ah.apply(undefined,an))}else{throw new Error(i18n.js.esign_expr_error_invalid_function(aq.key_))}break;case l:aj.push(aq);break}}if(aj.length>1){throw new Error(i18n.js.esign_expr_error_invalid_expression_parity())}var ar=aj[0];if(ar instanceof Big){ar=ar.toString()}return ar},variables:function(){var ag=this.tokens.length;var aj=[];for(var ah=0;ah<ag;ah++){var ai=this.tokens[ah];if(ai.type_===D&&(aj.indexOf(ai.key_)===-1)){aj.push(ai.key_)}}return aj}};function J(ah){if(ah instanceof Big){return ah}if(ah===""){return z}if(typeof ah==="number"){return new Big(ah)}var ag=ah.toString();if(ag.substring(0,1)===NumberFormatter._cultureValue(".",".",false,false)){ah="0"+ag}try{return new Big(NumberFormatter.parseNumber(ah.toString()))}catch(ai){throw new Error(i18n.js.esign_expr_error_invalid_number(ah))}}function C(ah,ag){if(ah===""||isNaN(ah)){return ag}try{return J(ah)}catch(ai){return ag}}function v(ai,aj,ah,ag){if(!ah&&!ag){return}if((!aj&&ah===0)||(aj&&aj===ah)){return}if(aj<ah){throw new Error(i18n.js.esign_expr_error_funcArgs_min(ai,ah,aj))}if(!ag&&aj>ah){throw new Error(i18n.js.esign_expr_error_funcArgs_min2(ai,ah,aj))}if(ag&&ag>-1&&aj>ag){throw new Error(i18n.js.esign_expr_error_funcArgs_max(ai,ah,ag,aj))}}function i(ah,ag){try{return J(ah).plus(J(ag))}catch(ai){return H(ah,ag)}}function E(ah,ag){return J(ah).minus(J(ag))}function f(ah,ag){return J(ah).times(J(ag))}function ad(ah,ag){var ai=J(ag);if(ai.cmp(z)===0){return NaN}return J(ah).div(J(ag))}function j(ah,ag){return J(ah).mod(J(ag))}function o(ah,ag){var ai=J(ah).cmp(J(ag));return ai>0}function n(ah,ag){var ai=J(ah).cmp(J(ag));return ai>=0}function G(ah,ag){var ai=J(ah).cmp(J(ag));return ai<0}function K(ah,ag){var ai=J(ah).cmp(J(ag));return ai<=0}function aa(ah,ag){try{var aj=J(ah).cmp(J(ag));return aj===0}catch(ai){return ah==ag}}function k(ah,ag){return !aa(ah,ag)}function H(ah,ag){return""+ah+ag}function Y(){v("min",arguments.length,2,-1);var ag=C(arguments[0],0);for(var ah=1;ah<arguments.length;ah++){ag=Math.min(ag,C(arguments[ah],0))}return ag}function y(){v("max",arguments.length,2,-1);var ag=C(arguments[0],0);for(var ah=1;ah<arguments.length;ah++){ag=Math.max(ag,C(arguments[ah],0))}return ag}function d(ag,ah){v("datePart",arguments.length,2);return ParserDate.DatePart(ag,ah)}function q(ag,ah,ai){v("dateAdd",arguments.length,3);return ParserDate.DateAdd(ag,ah,J(ai).valueOf())}function X(ag,ah){v("daysIn",arguments.length,2);return ParserDate.DaysIn(ag,ah)}function u(ai,ah,ag){v("dateDiff",arguments.length,3);return ParserDate.DateDiff(ai,ah,ag)}function S(ah){v("date",arguments.length,1);try{return J(ah)}catch(ag){return ParserDate.getNumberFromDate(ah)}}function U(ai,ah){v("dateFormat",arguments.length,2);var ag=ParserDate.getDate(ai);if(ag){return ag.toString(ah)}else{Error(i18n.js.esign_expr_error_invalid_date(ai))}}function af(ah,ag){v("numberFormat",arguments.length,2,-1);return NumberFormatter.format(J(ah),ag)}function N(){v("now",arguments.length,0);return ParserDate.Now()}function c(ag){var ah=ag.toString().toLowerCase();var ai=parseInt(ag);return ah==="true"||ah==="yes"||ah==="on"||ai>0}function B(ah,ag,ai){v("if",arguments.length,3);if(c(ah)){return ag}return ai}function P(){v("and",arguments.length,2,-1);for(var ag=0;ag<arguments.length;ag++){if(!c(arguments[ag])){return false}}return true}function x(){v("or",arguments.length,2,-1);for(var ag=0;ag<arguments.length;ag++){if(c(arguments[ag])){return true}}return false}function O(ag){v("not",arguments.length,1);return !c(ag)}function ac(ai,ah){v("round",arguments.length,1,2);var al=J(ai);var ak=null;if(ah){try{ak=Math.floor(ah)}catch(aj){}}if(ak!=null){al=al*Math.pow(10,ak)}var ag=Math.round(al);if(ak!=null){ag=ag/Math.pow(10,ak)}return ag}function a(aj){if(aj==null||aj.length===0){return{}}aj=aj.toString();var ag=null;var ao={};var am=[];var al=[];var an=am;function ak(){var ap=F(am.join("").trim());if(ap.length>0){var aq=F(al.join("").trim());ao[ap]=aq;if(!(ap.toLowerCase() in ao)){ao[ap.toLowerCase()]=aq}}}for(var ah=0;ah<aj.length;ah++){var ai=aj.charAt(ah);if(an.length===0&&ai.charCodeAt(0)<=b){continue}switch(ai){case",":if(ag){an.push(ai)}else{ak();am.length=0;al.length=0;an=am}break;case"=":if(ag||an===al){an.push(ai)}else{an=al}break;case"'":case'"':if(ag){if(ag===ai){ag=null}}else{if(an.length===0){ag=ai}}an.push(ai);break;default:an.push(ai)}}ak();return ao}function F(ai){if(ai.length>1){var ag=ai.charAt(0);var ah=ai.charAt(ai.length-1);if((ag==="'"||ag==='"')&&ag===ah){ai=ai.substring(1,ai.length-1)}}return ai}function I(ak,ai,ah){v("lookup",arguments.length,2,3);var aj=ak.toString();var ag=a(ai.toString());if(aj in ag){return ag[aj]}if(aj.toLowerCase() in ag){return ag[aj.toLowerCase()]}return ah?ah:""}function V(ag){v("length",arguments.length,1,1);return ag.toString().length}function s(ag){v("lowercase",arguments.length,1,1);return ag.toString().toLowerCase()}function m(ag){v("uppercase",arguments.length,1,1);return ag.toString().toUpperCase()}function g(){this.functionsAsOperators={abs:Math.abs,roundup:Math.ceil,rounddown:Math.floor};this.operators={"+":i,"-":E,"*":f,"/":ad,"%":j,"^":Math.pow,"&":H,"<":G,"<=":K,">":o,">=":n,"=":aa,"!=":k};this.functions={min:Y,max:y,datepart:d,dateadd:q,daysin:X,datediff:u,date:S,dateformat:U,numberformat:af,now:N,"if":B,and:P,or:x,not:O,round:ac,lookup:I,length:V,lowercase:s,uppercase:m};this.constants={"true":true,"false":false};this.expression="";this.pos=0;this.tokenvalue=0;this.tokenprio=0;this.tokenkey=0;this.tmpprio=0}g.parse=function(ag){return new g().parseExpression(ag)};g.evaluate=function(ag,ah){return g.parse(ag).evaluate(ah)};g.Expression=Z;var ae=1<<0;var ab=1<<1;var e=1<<2;var p=1<<3;var r=1<<4;var w=1<<5;var A=1<<6;var L=1<<7;g.prototype={parseExpression:function(aj){var ak=[];var ag=[];var am=[];var at=[];var az=[];var ap=(ae|p|e|L);var ax=0;var aw=0;var ah=false;var au=false;var al=[];this.tmpprio=0;this.pos=0;this.tokenkey=null;this.expression=aj==null?"":aj.replace(/\s+$/,"");while(this.pos<this.expression.length){if(this.isOperator()){var aq=false;if(this.isSign()&&(ap&L)!==0){aq=true;if(this.isNegativeSign()){this.tokenkey="-"}else{this.tokenkey="+"}}else{if((ap&ab)===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_operator(this.tokenkey))}}if(aq&&(ag.length===0||ak.length!==0||ah||au)){this.tokenprio=2;ax++;this.addfunc(ag,ak,T)}else{ax+=2;this.addfunc(ag,ak,Q)}ap=(ae|p|e|L)}else{if(this.isNumber()||this.isString()){if((ap&ae)===0){if(isNaN(this.tokenvalue)){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_number(this.tokenvalue))}else{this.error_parsing(this.pos-this.tokenvalue.toString().length+1,i18n.js.esign_expr_error_unexpected_number(this.tokenvalue))}}if(this.tokenvalue==null){this.error_parsing(this.pos+1,i18n.js.esign_expr_error_unmatched_quotes(this.expression.charAt(this.pos)))}if(ak.length>0){var ay=ak[ak.length-1];if(ay.type_===T&&("-"===ay.key_||"+"===ay.key_)){ak.pop();ax--;if("-"===ay.key_){this.tokenvalue=this.tokenvalue*-1}}}var ao=new h(t,0,0,this.tokenvalue);ag.push(ao);ap=(ab|w|A)}else{if(this.isLeftParenth()){if((ap&p)===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_openParen())}if((ap&r)!==0){var ao=new h(l,0,0,this.tokenvalue);aw++;ax++;ag.push(ao);az.push(al);al=[]}else{al.push(ak.length)}au=true;ap=(ae|p|e|L);continue}else{if(this.isRightParenth()){if(am.length>0&&al.length===0){aw--;al=az.pop();var ai=at.pop();while(ak.length>ai){var ay=ak.pop();ag.push(ay)}var an=am.pop();ag.push(an);ax=ag.length-1;if(ai>0){ax++}}else{if((ap&w)===0||al.length===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_closeParen())}else{var av=al.pop();while(ak.length>av){var ay=ak.pop();ag.push(ay)}}}ap=(ab|w|A|p)}else{if(this.isComma()){if((ap&A)===0||aw===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_comma())}var ai=at[at.length-1];while(ak.length>ai){var ay=ak.pop();ag.push(ay)}ah=true;ap=(ae|p|e|L);continue}else{if(this.isConst()){if((ap&ae)===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_constant(this.tokenvalue))}var ar=new h(t,"",0,this.tokenvalue);ag.push(ar);ap=(ab|w|A)}else{if(this.isOp1()){if((ap&e)===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_function(this.tokenkey))}this.addfunc(ag,ak,T);ax++;ap=(p)}else{if(this.isFunc()){if((ap&ae)===0){this.error_parsing(this.pos,i18n.js.esign_expr_error_unexpected_function(this.tokenkey))}else{if(this.functions.hasOwnProperty(this.tokenkey)){var an=new h(M,this.tokenkey,this.tokenprio+this.tmpprio,0);am.push(an);at.push(ak.length)}else{this.error_parsing(this.pos,i18n.js.esign_expr_error_unknown_function(this.tokenkey))}}ap=(p|r)}else{if(this.isVar()){if((ap&ae)===0){this.error_parsing(this.pos-this.tokenkey.length+1,i18n.js.esign_expr_error_unexpected_variable(this.tokenkey))}if(this.tokenkey==null){this.error_parsing(this.pos+1,i18n.js.esign_expr_error_unbalanced_bracket())}var aA=new h(D,this.tokenkey,0,0);ag.push(aA);ap=(ab|w|A|p)}else{if(this.isWhite()){continue}else{this.error_parsing(this.pos+1,i18n.js.esign_expr_error_unknown_character(this.expression[this.pos]))}}}}}}}}}}ah=false;au=false}if(this.tmpprio<0||this.tmpprio>=10){this.error_parsing(this.pos,i18n.js.esign_expr_error_unmatched_parens())}while(ak.length>0){var ay=ak.pop();ag.push(ay)}if(ax+1!==ag.length){if(this.pos===0){this.error_parsing(1,i18n.js.esign_expr_error_invalid_expression_blank())}else{this.error_parsing(this.pos,i18n.js.esign_expr_error_invalid_expression_parity())}}return new Z(ag,W(this.functionsAsOperators),W(this.operators),W(this.functions),W(this.varants))},error_parsing:function(ag,ah){var ai=i18n.js.esign_expr_parse_error(ag,ah);throw new Error(ai)},addfunc:function(aj,ag,ai){var ah=new h(ai,this.tokenkey,this.tokenprio+this.tmpprio,0);while(ag.length>0){if(ah.prio_<=ag[ag.length-1].prio_){aj.push(ag.pop())}else{break}}ag.push(ah)},isNumber:function(){var ah=this.pos;var aj=false;var al="";var ak=false;while(this.pos<this.expression.length){var ai=this.expression.charCodeAt(this.pos);if((ai>=48&&ai<=57)||(ai===46&&!ak)){if(ai===46){ak=true}al+=this.expression.charAt(this.pos);this.pos++;aj=true}else{break}}if(aj){if(al==="."){this.tokenvalue=NaN}else{this.tokenvalue=new Big(parseFloat(al))}if(this.pos<this.expression.length){var ag=this.expression.charCodeAt(this.pos);if((ag>=65&&ag<=90)||(ag>=97&&ag<=122)||ag===95){this.pos=ah;return false}}}return aj},unescape:function(ah,am){var ag=[];var al=false;for(var aj=0;aj<ah.length;aj++){var ak=ah.charAt(aj);if(al){switch(ak){case"'":ag.push("'");break;case'"':ag.push('"');break;case"\\":ag.push("\\");break;case"/":ag.push("/");break;case"b":ag.push("\b");break;case"f":ag.push("\f");break;case"n":ag.push("\n");break;case"r":ag.push("\r");break;case"t":ag.push("\t");break;case"u":var ai=parseInt(ah.substring(aj+1,aj+5),16);ag.push(String.fromCharCode(ai));aj+=4;break;default:throw this.error_parsing(am+aj,i18n.js.esign_expr_parse_illegal_escape(ak))}al=false}else{if(ak==="\\"){al=true}else{ag.push(ak)}}}return ag.join("")},isString:function(){var ag=this.getValueBetweenMatchingChars("'\"");if(ag!=null){this.tokenvalue=this.unescape(ag,this.pos);this.pos+=ag.length+2;return true}else{if(this.expression.charAt(this.pos)==='"'||this.expression.charAt(this.pos)==="'"){this.tokenvalue=null;return true}}return false},getValueBetweenMatchingChars:function(ao,al){if(al==null){al=ao}var ag=ao.indexOf(this.expression.charAt(this.pos));if(this.pos>=this.expression.length||ag===-1){return null}var ai=al.charAt(ag);var ak="";var ah=this.pos+1;var am=false;var an=false;while(ah<this.expression.length){var aj=this.expression.charAt(ah);if(aj===ai&&!an){am=true;break}else{an=!an&&aj==="\\";ak+=aj;ah++}}return am?ak:null},isOperator:function(){var ag=this.expression.charCodeAt(this.pos);if(ag===43){this.tokenprio=0;this.tokenkey="+"}else{if(ag===45){this.tokenprio=0;this.tokenkey="-"}else{if(ag===38){this.tokenprio=0;this.tokenkey="&";if(this.expression.charCodeAt(this.pos+1)===38){this.pos++}}else{if(ag===42){this.tokenprio=1;this.tokenkey="*"}else{if(ag===47){this.tokenprio=2;this.tokenkey="/"}else{if(ag===37){this.tokenprio=2;this.tokenkey="%"}else{if(ag===94){this.tokenprio=3;this.tokenkey="^"}else{if(ag===60){this.tokenprio=0;if(this.expression.charCodeAt(this.pos+1)===61){this.pos++;this.tokenkey="<="}else{this.tokenkey="<"}}else{if(ag===33){if(this.expression.charCodeAt(this.pos+1)===61){this.tokenprio=0;this.pos++;this.tokenkey="!="}else{return false}}else{if(ag===61){this.tokenprio=0;this.tokenkey="=";if(this.expression.charCodeAt(this.pos+1)===61){this.pos++}}else{if(ag===62){this.tokenprio=0;if(this.expression.charCodeAt(this.pos+1)===61){this.pos++;this.tokenkey=">="}else{this.tokenkey=">"}}else{return false}}}}}}}}}}}this.pos++;return true},isSign:function(){var ag=this.expression.charCodeAt(this.pos-1);return ag===45||ag===43},isNegativeSign:function(){var ag=this.expression.charCodeAt(this.pos-1);return(ag===45)},isLeftParenth:function(){var ag=this.expression.charCodeAt(this.pos);if(ag===40){this.pos++;this.tmpprio+=10;return true}return false},isRightParenth:function(){var ag=this.expression.charCodeAt(this.pos);if(ag===41){this.pos++;this.tmpprio-=10;return true}return false},isComma:function(){var ag=this.expression.charCodeAt(this.pos);if(ag===44){this.pos++;this.tokenprio=-1;this.tokenkey=",";return true}return false},isWhite:function(){var ag=this.expression.charCodeAt(this.pos);if(ag===32||ag===9||ag===10||ag===13){this.pos++;return true}return false},getTokenString:function(ai){if(ai==null){ai=""}var ah="";for(var ag=this.pos;ag<this.expression.length;ag++){var aj=this.expression.charAt(ag);if(aj.toUpperCase()===aj.toLowerCase()&&ai.indexOf(aj)===-1){if(ag===this.pos||(aj!=="_"&&(aj<"0"||aj>"9"))){break}}ah+=aj}return ah},isOp1:function(){var ag=this.getTokenString().toLowerCase();if(ag.length>0&&(ag in this.functionsAsOperators)){this.tokenkey=ag;this.tokenprio=5;this.pos+=ag.length;return true}return false},isVar:function(){var ah;var ag=false;if(this.expression.charAt(this.pos)==="["){ah=this.getValueBetweenMatchingChars("[","]");ag=true;if(ah==null){this.tokenkey=null;return true}}else{ah=this.getTokenString("01234567890")}if(ah.length>0){this.tokenkey=ah;this.tokenprio=4;this.pos+=ah.length;if(ag){this.pos+=2}return true}return false},isConst:function(){var ag=this.getTokenString().toLowerCase();if(ag.length>0&&this.constants.hasOwnProperty(ag)){this.tokenvalue=this.constants[ag];this.pos+=ag.length;return true}return false},isFunc:function(){var aj=this.getTokenString();if(aj.length>0){aj=aj.toLowerCase();var ag=false;for(var ah=this.pos+aj.length;ah<this.expression.length;ah++){var ai=this.expression.charCodeAt(ah);if(ai===32||ai===9||ai===10||ai===13){continue}else{if(ai===40){ag=true;break}else{break}}}if(ag){this.tokenkey=aj;this.tokenprio=6;this.pos+=aj.length;return true}}return false}};g.Functions={parseRangeString:a};R.Parser=g;return g})(typeof exports==="undefined"?{}:exports);(function(){var d=function(f,h){return function(){return h||f((h={exports:{}}).exports,h),h.exports}};var g=d(function(h,f){f.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var e=d(function(f,h){h.exports=/[\0-\x1F\x7F-\x9F]/});var a=d(function(f,h){h.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var i=d(function(h,f){f.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var b=d(function(f,h){h.exports=function(k){var l={};k=k||{},l.src_Any=g().source,l.src_Cc=e().source,l.src_Z=a().source,l.src_P=i().source,l.src_ZPCc=[l.src_Z,l.src_P,l.src_Cc].join("|"),l.src_ZCc=[l.src_Z,l.src_Cc].join("|");var j="[><\uFF5C]";return l.src_pseudo_letter="(?:(?!"+j+"|"+l.src_ZPCc+")"+l.src_Any+")",l.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",l.src_auth="(?:(?:(?!"+l.src_ZCc+"|[@/\\[\\]()]).)+@)?",l.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",l.src_host_terminator="(?=$|"+j+"|"+l.src_ZPCc+")(?!"+(k["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+l.src_ZPCc+"))",l.src_path="(?:[/?#](?:(?!"+l.src_ZCc+"|"+j+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+l.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+l.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+l.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+l.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+l.src_ZCc+"|[']).)+\\'|\\'(?="+l.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+l.src_ZCc+"|[.]|$)|"+(k["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+l.src_ZCc+"|$)|;(?!"+l.src_ZCc+"|$)|\\!+(?!"+l.src_ZCc+"|[!]|$)|\\?(?!"+l.src_ZCc+"|[?]|$))+|\\/)?",l.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',l.src_xn="xn--[a-z0-9\\-]{1,59}",l.src_domain_root="(?:"+l.src_xn+"|"+l.src_pseudo_letter+"{1,63})",l.src_domain="(?:"+l.src_xn+"|(?:"+l.src_pseudo_letter+")|(?:"+l.src_pseudo_letter+"(?:-|"+l.src_pseudo_letter+"){0,61}"+l.src_pseudo_letter+"))",l.src_host="(?:(?:(?:(?:"+l.src_domain+")\\.)*"+l.src_domain+"))",l.tpl_host_fuzzy="(?:"+l.src_ip4+"|(?:(?:(?:"+l.src_domain+")\\.)+(?:%TLDS%)))",l.tpl_host_no_ip_fuzzy="(?:(?:(?:"+l.src_domain+")\\.)+(?:%TLDS%))",l.src_host_strict=l.src_host+l.src_host_terminator,l.tpl_host_fuzzy_strict=l.tpl_host_fuzzy+l.src_host_terminator,l.src_host_port_strict=l.src_host+l.src_port+l.src_host_terminator,l.tpl_host_port_fuzzy_strict=l.tpl_host_fuzzy+l.src_port+l.src_host_terminator,l.tpl_host_port_no_ip_fuzzy_strict=l.tpl_host_no_ip_fuzzy+l.src_port+l.src_host_terminator,l.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+l.src_ZPCc+"|>|$))",l.tpl_email_fuzzy="(^|"+j+'|"|\\(|'+l.src_ZCc+")("+l.src_email_name+"@"+l.tpl_host_fuzzy_strict+")",l.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+l.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+l.tpl_host_port_fuzzy_strict+l.src_path+")",l.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+l.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+l.tpl_host_port_no_ip_fuzzy_strict+l.src_path+")",l}});var c=d(function(o,f){function y(k){var l=Array.prototype.slice.call(arguments,1);return l.forEach(function(p){!p||Object.keys(p).forEach(function(q){k[q]=p[q]})}),k}function z(k){return Object.prototype.toString.call(k)}function K(k){return z(k)==="[object String]"}function j(k){return z(k)==="[object Object]"}function m(k){return z(k)==="[object RegExp]"}function A(k){return z(k)==="[object Function]"}function r(k){return k.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var H={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function n(k){return Object.keys(k||{}).reduce(function(p,l){return p||H.hasOwnProperty(l)},!1)}var u={"http:":{validate:function(l,p,k){var q=l.slice(p);return k.re.http||(k.re.http=new RegExp("^\\/\\/"+k.re.src_auth+k.re.src_host_port_strict+k.re.src_path,"i")),k.re.http.test(q)?q.match(k.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(l,p,k){var q=l.slice(p);return k.re.no_http||(k.re.no_http=new RegExp("^"+k.re.src_auth+"(?:localhost|(?:(?:"+k.re.src_domain+")\\.)+"+k.re.src_domain_root+")"+k.re.src_port+k.re.src_host_terminator+k.re.src_path,"i")),k.re.no_http.test(q)?p>=3&&l[p-3]===":"||p>=3&&l[p-3]==="/"?0:q.match(k.re.no_http)[0].length:0}},"mailto:":{validate:function(l,p,k){var q=l.slice(p);return k.re.mailto||(k.re.mailto=new RegExp("^"+k.re.src_email_name+"@"+k.re.src_host_strict,"i")),k.re.mailto.test(q)?q.match(k.re.mailto)[0].length:0}}},s="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",C="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function v(k){k.__index__=-1,k.__text_cache__=""}function h(k){return function(p,l){var q=p.slice(l);return k.test(q)?q.match(k)[0].length:0}}function x(){return function(k,l){l.normalize(k)}}function G(l){var p=l.re=b()(l.__opts__),k=l.__tlds__.slice();l.onCompile(),l.__tlds_replaced__||k.push(s),k.push(p.src_xn),p.src_tlds=k.join("|");function w(F){return F.replace("%TLDS%",p.src_tlds)}p.email_fuzzy=RegExp(w(p.tpl_email_fuzzy),"i"),p.link_fuzzy=RegExp(w(p.tpl_link_fuzzy),"i"),p.link_no_ip_fuzzy=RegExp(w(p.tpl_link_no_ip_fuzzy),"i"),p.host_fuzzy_test=RegExp(w(p.tpl_host_fuzzy_test),"i");var q=[];l.__compiled__={};function B(I,F){throw new Error('(LinkifyIt) Invalid schema "'+I+'": '+F)}Object.keys(l.__schemas__).forEach(function(L){var I=l.__schemas__[L];if(I!==null){var F={validate:null,link:null};if(l.__compiled__[L]=F,j(I)){m(I.validate)?F.validate=h(I.validate):A(I.validate)?F.validate=I.validate:B(L,I),A(I.normalize)?F.normalize=I.normalize:I.normalize?B(L,I):F.normalize=x();return}if(K(I)){q.push(L);return}B(L,I)}}),q.forEach(function(F){!l.__compiled__[l.__schemas__[F]]||(l.__compiled__[F].validate=l.__compiled__[l.__schemas__[F]].validate,l.__compiled__[F].normalize=l.__compiled__[l.__schemas__[F]].normalize)}),l.__compiled__[""]={validate:null,normalize:x()};var D=Object.keys(l.__compiled__).filter(function(F){return F.length>0&&l.__compiled__[F]}).map(r).join("|");l.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+p.src_ZPCc+"))("+D+")","i"),l.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+p.src_ZPCc+"))("+D+")","ig"),l.re.schema_at_start=RegExp("^"+l.re.schema_search.source,"i"),l.re.pretest=RegExp("("+l.re.schema_test.source+")|("+l.re.host_fuzzy_test.source+")|@","i"),v(l)}function t(l,p){var k=l.__index__,w=l.__last_index__,q=l.__text_cache__.slice(k,w);this.schema=l.__schema__.toLowerCase(),this.index=k+p,this.lastIndex=w+p,this.raw=q,this.text=q,this.url=q}function E(l,p){var k=new t(l,p);return l.__compiled__[k.schema].normalize(k,l),k}function J(k,l){if(!(this instanceof J)){return new J(k,l)}l||n(k)&&(l=k,k={}),this.__opts__=y({},H,l),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=y({},u,k),this.__compiled__={},this.__tlds__=C,this.__tlds_replaced__=!1,this.re={},G(this)}J.prototype.add=function(l,k){return this.__schemas__[l]=k,G(this),this};J.prototype.set=function(k){return this.__opts__=y(this.__opts__,k),this};J.prototype.test=function(I){if(this.__text_cache__=I,this.__index__=-1,!I.length){return !1}var F,k,L,l,p,w,q,D,B;if(this.re.schema_test.test(I)){for(q=this.re.schema_search,q.lastIndex=0;(F=q.exec(I))!==null;){if(l=this.testSchemaAt(I,F[2],q.lastIndex),l){this.__schema__=F[2],this.__index__=F.index+F[1].length,this.__last_index__=F.index+F[0].length+l;break}}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(D=I.search(this.re.host_fuzzy_test),D>=0&&(this.__index__<0||D<this.__index__)&&(k=I.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(p=k.index+k[1].length,(this.__index__<0||p<this.__index__)&&(this.__schema__="",this.__index__=p,this.__last_index__=k.index+k[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(B=I.indexOf("@"),B>=0&&(L=I.match(this.re.email_fuzzy))!==null&&(p=L.index+L[1].length,w=L.index+L[0].length,(this.__index__<0||p<this.__index__||p===this.__index__&&w>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=p,this.__last_index__=w))),this.__index__>=0};J.prototype.pretest=function(k){return this.re.pretest.test(k)};J.prototype.testSchemaAt=function(l,k,p){return this.__compiled__[k.toLowerCase()]?this.__compiled__[k.toLowerCase()].validate(l,p,this):0};J.prototype.match=function(l){var k=0,q=[];this.__index__>=0&&this.__text_cache__===l&&(q.push(E(this,k)),k=this.__last_index__);for(var p=k?l.slice(k):l;this.test(p);){q.push(E(this,k)),p=p.slice(this.__last_index__),k+=this.__last_index__}return q.length?q:null};J.prototype.matchAtStart=function(l){if(this.__text_cache__=l,this.__index__=-1,!l.length){return null}var k=this.re.schema_at_start.exec(l);if(!k){return null}var p=this.testSchemaAt(l,k[2],k[0].length);return p?(this.__schema__=k[2],this.__index__=k.index+k[1].length,this.__last_index__=k.index+k[0].length+p,E(this,0)):null};J.prototype.tlds=function(l,k){return l=Array.isArray(l)?l:[l],k?(this.__tlds__=this.__tlds__.concat(l).sort().filter(function(q,p,w){return q!==w[p-1]}).reverse(),G(this),this):(this.__tlds__=l.slice(),this.__tlds_replaced__=!0,G(this),this)};J.prototype.normalize=function(k){k.schema||(k.url="http://"+k.url),k.schema==="mailto:"&&!/^mailto:/i.test(k.url)&&(k.url="mailto:"+k.url)};J.prototype.onCompile=function(){};f.exports=J});window.LinkifyIt=c()})();(function(){App.Esign=Backbone.View.extend({appEvents:{"esignView:signaturePanelView":"showSignaturePad","esignView:initialsPanelView":"showInitialsPad","esignView:syncSignerDetails":"onSyncSignerDetails","esignView:stampPanelView":"showStampPad","esign:showLoading":"showInterstitial","app:hideInterstitial":"hideInterstitial","thumbsPoller:thumbsDone":"completeThumbPolling","thumbsPoller:maxPolls":"thumbsNotLoaded","thumbsPoller:maxErrors":"thumbsNotLoaded","thumbsPoller:abandoned":"thumbsNotLoaded"},initialize:function(){if(!App.Api6.haveApi){App.Api6.init()}var b;var c=new App.Models.Esign.Main(_.extend({},this.options,{user:App.Env.user}));if(c.get("sessionId")){dwr.engine.setHeaders({"x-adobesign-sessionid":c.get("sessionId")})}if(c.get("widget")){App.appView=new App.Views.Esign.MainWidgetView({el:jQuery("body"),model:c});b="WEB_FORM"}else{App.appView=new App.Views.Esign.MainView({el:jQuery("body"),model:c});b="ESIGN"}App.Service.postEvent({type:"PAGE_LOAD",data:{pageName:b}});var a=new App.Models.Esign.Agreement({seriouslySecureId:this.options.agreementId});a.fetch({success:_.bind(this.handleAgreementLoaded,this)});App.appView.sessionTimeout=new App.Views.SessionTimeout()},handleAgreementLoaded:function(f,b,j){var h=f.get("latestDocumentData").locale;Date.CultureInfo=(h&&Date.AllCultureInfos[h])||Date.AllCultureInfos["en-US"];Date.ResetParseFormats();if(window.NumberFormatter){NumberFormatter.CultureInfo=(h&&NumberFormatter.AllCultureInfos[h])||NumberFormatter.AllCultureInfos["en-US"]}if(App.appView.model.get("widget")){var d=f.get("latestDocumentData").fields;var e=this.parseHashFragment(location.hash);var a=_.keys(e);if(a.length){ScAnalytics.logEventWithProps(["HashFrag:"].concat(a))}for(var c=0;c<d.length;c++){var g=d[c];if(g.urlOverridable&&(g.inputType==="TEXT_FIELD"||g.inputType==="MULTILINE")&&g.contentType==="DATA"&&e[g.name]){g.value=g.defaultValue=e[g.name]}}}jQuery("#mainContent").addClass("esign");App.appView.model.set("agreement",f);if(App.appView.model.get("isReadyForDigitalSignature")){App.appView.render()}else{App.appView.model.get("agreement").getThumbPoller().start()}},parseHashFragment:function(f){var c={};if(typeof f!=="string"){return c}f=f.trim().replace(/^[?#&]/,"");if(!f){return c}var d=f.split("&");for(var h=0,b=d.length;h<b;h++){var a=d[h].replace(/\+/g," ").split("=");try{var g=decodeURIComponent(a[0]);if(a.length>1&&a[1]){c[g]=decodeURIComponent(a[1])}else{c[g]=""}}catch(j){}}return c},showInterstitial:function(a){if(App.appView.model.get("isReadyForDigitalSignature")||(_.has(a,"skipInterstitial")&&a.skipInterstitial)){return}App.Utils.showInterstitial(a)},hideInterstitial:function(){App.Utils.hideInterstitial()},completeThumbPolling:function(){if(App.Env.feature.isFramed&&App.Env.feature.iOS){this.iframeOnIOSFix()}this.stopListening(App.EventBus,"thumbsPoller:thumbsDone thumbsPoller:maxPolls thumbsPoller:maxErrors thumbsPoller:abandoned");if(!App.appView.model.get("isReadyForDigitalSignature")){App.appView.render()}},thumbsNotLoaded:function(){App.EventBus.trigger("app:hideInterstitial");App.Service.errorHandler("",{},{close:false,closeBtn:false})},iframeOnIOSFix:function(){var b=window.innerHeight,a=window.innerWidth;jQuery("body").css({height:b,width:a});jQuery("#header, #footer").width(a);jQuery("#mainContent").css({overflow:"scroll",height:b})},showSignaturePad:function(b){var a;if(!this.signaturePanelView){if(App.appView.model.has(App.Models.Signature.MODE.stamp)){a={signerName:App.appView.getStampModel().get("name")}}this.signaturePanelView=new App.Views.Esign.SignaturePanelView(a);this.signaturePanelView.render();if(App.Env.feature.isPhone){this.signaturePanelView.$el.on({"shown.bs.modal":_.partial(App.Utils.fixMobilePosition,this.signaturePanelView.$el)})}}this.signaturePanelView.callerId=b.viewId;this.signaturePanelView.show()},showStampPad:function(b){var a;if(!this.stampPanelView){if(App.appView.model.has(App.Models.Signature.MODE.signature)){a={signerName:App.appView.getSignatureModel().get("name")}}this.stampPanelView=new App.Views.Esign.StampPanelView(a);this.stampPanelView.render()}this.stampPanelView.callerId=b.viewId;this.stampPanelView.show()},showInitialsPad:function(a){if(!this.initialsPanelView){this.initialsPanelView=new App.Views.Esign.InitialsPanelView();this.initialsPanelView.render();if(App.Env.feature.isPhone){this.initialsPanelView.$el.on({"shown.bs.modal":_.partial(App.Utils.fixMobilePosition,this.initialsPanelView.$el)})}}this.initialsPanelView.callerId=a.viewId;this.initialsPanelView.show()},onSyncSignerDetails:function(a){if(App.appView.model.has(App.Models.Signature.MODE.stamp)&&a.mode!==App.Models.Signature.MODE.stamp&&a.nameChanged){App.appView.getStampModel().set("name",a.name)}if(App.appView.model.has(App.Models.Signature.MODE.signature)&&a.nameChanged&&a.mode!==App.Models.Signature.MODE.signature){App.appView.getSignatureModel().set("name",a.name)}if(a.nameChanged){App.EventBus.trigger("esignView:nameChanged",a)}}})})();(function(){App.BulkSign=Backbone.View.extend({appEvents:{"esignView:signaturePanelView":"showSignaturePad","esignView:initialsPanelView":"showInitialsPad","esignView:syncSignerDetails":"onSyncSignerDetails","esignView:stampPanelView":"showStampPad","app:hideInterstitial":"hideInterstitial","thumbsPoller:thumbsDone":"completeThumbPolling","thumbsPoller:maxPolls":"thumbsNotLoaded","thumbsPoller:maxErrors":"thumbsNotLoaded","thumbsPoller:abandoned":"thumbsNotLoaded","bulksign:renderBulkSign":"renderBulkSign","bulksign:showLoading":"showInterstitial"},initialize:function(){var a=new App.Models.Esign.Main(_.extend({},this.options,{user:App.Env.user}));App.appView=new App.Views.Esign.BulkSignMainView({el:jQuery("body"),model:a});pageName="BULK_SIGN";App.EventBus.trigger("bulksign:renderBulkSign");App.appView.sessionTimeout=new App.Views.SessionTimeout()},renderBulkSign:function(){App.appView.render()},parseHashFragment:function(f){var c={};if(typeof f!=="string"){return c}f=f.trim().replace(/^[?#&]/,"");if(!f){return c}var d=f.split("&");for(var h=0,b=d.length;h<b;h++){var a=d[h].replace(/\+/g," ").split("=");try{var g=decodeURIComponent(a[0]);if(a.length>1&&a[1]){c[g]=decodeURIComponent(a[1])}else{c[g]=""}}catch(j){}}return c},showInterstitial:function(a){if(App.appView.model.get("isReadyForDigitalSignature")||(_.has(a,"skipInterstitial")&&a.skipInterstitial)){return}App.Utils.showInterstitial(a)},hideInterstitial:function(){App.Utils.hideInterstitial()},completeThumbPolling:function(){if(App.Env.feature.isFramed&&App.Env.feature.iOS){this.iframeOnIOSFix()}this.stopListening(App.EventBus,"thumbsPoller:thumbsDone thumbsPoller:maxPolls thumbsPoller:maxErrors thumbsPoller:abandoned");if(!App.appView.model.get("isReadyForDigitalSignature")){App.appView.render()}},thumbsNotLoaded:function(){App.EventBus.trigger("app:hideInterstitial");App.Service.errorHandler("",{},{close:false,closeBtn:false})},iframeOnIOSFix:function(){var b=window.innerHeight,a=window.innerWidth;jQuery("body").css({height:b,width:a});jQuery("#header, #footer").width(a);jQuery("#mainContent").css({overflow:"scroll",height:b})},showSignaturePad:function(b){var a;if(!this.signaturePanelView){if(App.appView.model.has(App.Models.Signature.MODE.stamp)){a={signerName:App.appView.getStampModel().get("name")}}else{if(_.has(b,"signerName")){a={signerName:b.signerName}}}this.signaturePanelView=new App.Views.Esign.SignaturePanelView(a);this.signaturePanelView.render();if(App.Env.feature.isPhone){this.signaturePanelView.$el.on({"shown.bs.modal":_.partial(App.Utils.fixMobilePosition,this.signaturePanelView.$el)})}}this.signaturePanelView.callerId=b.viewId;this.signaturePanelView.show()},showStampPad:function(b){var a;if(!this.stampPanelView){if(App.appView.model.has(App.Models.Signature.MODE.signature)){a={signerName:App.appView.getSignatureModel().get("name")}}this.stampPanelView=new App.Views.Esign.StampPanelView(a);this.stampPanelView.render()}this.stampPanelView.callerId=b.viewId;this.stampPanelView.show()},showInitialsPad:function(a){if(!this.initialsPanelView){this.initialsPanelView=new App.Views.Esign.InitialsPanelView();this.initialsPanelView.render();if(App.Env.feature.isPhone){this.initialsPanelView.$el.on({"shown.bs.modal":_.partial(App.Utils.fixMobilePosition,this.initialsPanelView.$el)})}}this.initialsPanelView.callerId=a.viewId;this.initialsPanelView.show()},onSyncSignerDetails:function(a){if(App.appView.model.has(App.Models.Signature.MODE.stamp)&&a.mode!==App.Models.Signature.MODE.stamp&&a.nameChanged){App.appView.getStampModel().set("name",a.name)}if(App.appView.model.has(App.Models.Signature.MODE.signature)&&a.nameChanged&&a.mode!==App.Models.Signature.MODE.signature){App.appView.getSignatureModel().set("name",a.name)}if(a.nameChanged){App.EventBus.trigger("esignView:nameChanged",a)}}})}());(function(){var a={determinateAuthURI:function(){if(App.appView.model.attributes.signerAuthMethod==="PHONE"){return"/public/signerAuth"}if(App.appView.model.attributes.isSUSIRedirectionEnabled){return"/public/adobeLogin"}return"/public/login"},isPhoneAuth:function(){return App.appView.model.attributes.signerAuthMethod==="PHONE"},getWindowLocationParams:function(){var i=window.screenLeft!=undefined?window.screenLeft:0,f=window.screenTop!=undefined?window.screenTop:0,d=(this.isPhoneAuth()||App.appView.model.attributes.isSUSIRedirectionEnabled)?730:400,e=this.isPhoneAuth()?780:550,h=((window.outerHeight/2)-(d/2))+f,g=((window.outerWidth/2)-(e/2))+i,c={toolbar:"yes",scrollbars:"yes",resizable:"yes",top:h,left:g,width:e,height:d};var b="";_.each(c,function(k,j){b+=j+"="+k+","});return b.substring(0,b.length-1)},getQueryParams:function(c){var d={isAdobeSignAuth:true,isMultipleEsignAuthEnabled:true,pid:App.appView.model.attributes.pid,aid:App.appView.model.attributes.agreementId,fieldCid:c,isEmailPrefilled:App.appView.model.attributes.isEmailPrefilled,isRedirectionEnabled:App.appView.model.attributes.isRedirectionEnabled,skipSignLoginForMandatorySAML:App.appView.model.attributes.skipSignLoginForMandatorySAML};if(App.appView.model.attributes.isSUSIRedirectionEnabled){d.preEsignAuth=false}var b="";_.each(d,function(f,e){b+=e+"="+f+"&"});return"?"+b.substring(0,b.length-1)},showWindowForAuth:function(b){if(b.authWindow===undefined){this.openWindow(b)}else{this.focusOrOpenWindow(b)}},openWindow:function(e){var d=this.getQueryParams(e.cid),c=this.getWindowLocationParams(),b=this.determinateAuthURI()+d;e.authWindow=window.open(b,"Authentication",c)},focusOrOpenWindow:function(b){if(b.authWindow.closed){this.openWindow(b)}else{b.authWindow.focus()}},signatureFieldsViewCid:[],isAuthenticationOnSignatureRequired:function(){return App.appView.model.get("isMultipleEsignAuthEnabled")&&App.appView.model.get("authenticateSignatureField")}};App.ns("Utils").MultipleEsignAuth=a})();(function(){var a=App.Models.Agreement;var b=Backbone.Model.extend({initialize:function(){},getSigModelInstance:function(c){if(!this.has(c)){this.set(c,new App.Models.Signature({mode:c}))}return this.get(c)},isPdfDownloadAllowed:function(){var c=false;if(this.get("widget")){if(this.get("widgetPdfPreviewEnabled")){return true}}else{if(this.get("showPdfLinks")){return true}}return c},isDigSigRemoteSigning:function(){return this.get("digitalSignaturesRemoteCloudSigningEnabled")},isDelegateAllowed:function(){return this.get("canDelegate")&&!this.isWidgetPrefillOrDelegate()&&(App.appView.fieldsViewer.hasDigitalSignatureField()?this.get("digSigDelegationFromSignPageAvailable"):true)},isWidgetPrefillOrDelegate:function(){return this.get("widget")||this.isPrefill()||this.isAgentDelegate()},isRejectAllowed:function(){if(this.isCertifiedRecipient()&&!this.get("canCertifiedRecipientReject")){return false}return !this.get("widget")&&!this.isPrefill()&&this.get("allowDecline")},isApprove:function(){return this.get("role")===a.PARTICIPATION_ROLES.APPROVER&&!this.isPrefill()},isFormFiller:function(){return this.get("role")===a.PARTICIPATION_ROLES.FORM_FILLER&&!this.isPrefill()},isAcceptor:function(){return this.get("role")===a.PARTICIPATION_ROLES.ACCEPTOR&&!this.isPrefill()},isCertifiedRecipient:function(){return this.get("role")===a.PARTICIPATION_ROLES.CERTIFIED_RECIPIENT&&!this.isPrefill()},isNotarySigner:function(){return this.get("role")===a.PARTICIPATION_ROLES.NOTARY_SIGNER&&!this.isPrefill()},isNonSignerRole:function(){return this.isCertifiedRecipient()||this.isAcceptor()||this.isFormFiller()||this.isApprove()||this.isNotarySigner()},isPrefill:function(){return this.get("prefill")===true},isAgentDelegate:function(){return App.Models.Agreement.isDelegatorRole(this.get("role"))&&!this.isPrefill()},isMessageToSignerAllowed:function(){var c=this.get("agreement"),d=c&&(c.get("agreementMessage")||c.get("privateMessage"));return this.get("showMessage")&&!this.isPrefill()&&!!d},isSaveEnabled:function(){return this.get("esignSaveEnabled")},isWrittenSignaturesEnabled:function(){return this.get("writtenSignaturesEnabled")},isSignByWrittenSignaturesAllowed:function(){return this.isWrittenSignatureTypeAllowed()&&this.isWrittenSignaturesEnabled()},isWrittenSignatureTypeAllowed:function(){return !this.isNonSignerRole()&&this.get("agreement").get("allowWritten")&&!this.isWidgetPrefillOrDelegate()&&!this.isWrittenRequired()},isWrittenRequired:function(){return(this.get("isParticipantForcedWritten")||this.get("agreement").get("isWritten"))&&!(this.isNonSignerRole()||this.isAgentDelegate())},shouldCollectSignerName:function(){return App.appView.model.get("widget")||(!App.appView.model.get("signerNameLocked")&&!this.get("isWrittenSignPhase")&&(this.isWrittenRequired()||this.get("optionalWrittenActive")||this.isNonSignerRole()))},shouldCollectSignerEmail:function(){return App.appView.model.get("widget")===true},isOptionalWrittenFlowAllowed:function(){return this.isSignByWrittenSignaturesAllowed()&&!this.get("agreement").get("isDocumentVisibilityEnabled")&&!this.get("vaultingWorkflow")},isSaveOnOpenOpted:function(){return this.get("widget")&&this.get("webformSaveOnOpenEnabled")},showReadAgreementOption:function(){return this.get("showReadAgreementOption")&&!!this.get("viewAgreementUrl")},isAgreeToTermsRequiredDuringESign:function(){var c=this.get("termsOfUseFlavor");return(c===App.Models.Agreement.TERMS_OF_USE_OPTIONS.DURING_SIGNING||c===App.Models.Agreement.TERMS_OF_USE_FLAVORS.AGREE_BEFORE_SIGNING)},isExplicitConsentFlow:function(){var c=this.get("termsOfUseFlavor");return(c===App.Models.Agreement.TERMS_OF_USE_OPTIONS.BEFORE_SIGNING||c===App.Models.Agreement.TERMS_OF_USE_FLAVORS.AGREE_BEFORE_VIEWING)},isForcedReviewRequired:function(){var c=this.get("termsOfUseFlavor");return(c===App.Models.Agreement.TERMS_OF_USE_OPTIONS.FORCED_REVIEW||c===App.Models.Agreement.TERMS_OF_USE_FLAVORS.CLICK_BEFORE_VIEWING)},isWebformEsignViewEnabled:function(){var c=this.get("webformEsignViewEnabled");return c},isShowNoTermsFlow:function(){var c=this.get("termsOfUseFlavor");return(c===App.Models.Agreement.TERMS_OF_USE_OPTIONS.SHOW_NO_TERMS||c===App.Models.Agreement.TERMS_OF_USE_FLAVORS.SHOW_NO_TERMS)},eSignRequiresDocumentReview:function(){return this.get("eSignRequiresDocumentReview")},hasOptions:function(){return App.Env.feature.isMobileBrowser||this.isDelegateAllowed()||this.isRejectAllowed()||this.isSignByWrittenSignaturesAllowed()||App.appView.fieldsViewer.hasFields()||this.isWrittenRequired()},isQuickFillViewingEnabled:function(){return !!this.get("isQuickFillViewingEnabled")},isQuickFillViewingAvailable:function(){return !!this.get("isQuickFillViewingAvailable")},shouldAutoOpenQuickFillView:function(){return !!this.get("isQuickFillAutoOpen")},showTermsOfUseGate:function(){return this.get("isUnregisteredUser")},isAdobeTermsAccepted:function(){return this.get("adobeTermsAccepted")||!this.showTermsOfUseGate()},isRequireRecipientNameEnabled:function(){return this.get("requireRecipientNameEnabled")||false},isDelegateV6Enabled:function(){return this.get("delegationV6Enabled")||false},getTemplateData:function(){var g=this.get("role");var d=this.get("noChrome");var f="";if(d){var c=jQuery("#localeSelect");if(c.length){var e=c.prev('label[for="localeSelect"]').text();c=c.clone();c.attr({id:"optionsMenuLocaleSelect","aria-label":e});f=c[0].outerHTML}}return{showReadAgreement:this.showReadAgreementOption()&&!d,showReportAbuse:this.get("showReportAbuseOption"),showDelegate:this.isDelegateAllowed()&&!this.get("webformEsignViewEnabled"),showReject:this.isRejectAllowed()&&!this.get("webformEsignViewEnabled"),showSignByWritten:this.isOptionalWrittenFlowAllowed()&&!this.get("webformEsignViewEnabled"),showClearDocument:App.appView.fieldsViewer.hasFields()&&!App.appView.model.get("clearDocumentAlwaysHidden"),showSaveDocument:this.get("webformSaveEnabled"),showSaveOnOpenDocument:this.get("webformSaveOnOpenEnabled"),showESign:!(this.isNonSignerRole()||this.isWidgetPrefillOrDelegate())&&!this.get("webformEsignViewEnabled"),showSignerMessage:App.Env.feature.isMobileBrowser&&App.appView.model.isMessageToSignerAllowed(),showAudit:this.get("auditAvailable")&&!d,showDownload:this.isPdfDownloadAllowed(),showLocale:f&&d,showQuickFill:this.isQuickFillViewingAvailable(),esignOptions:i18n.js.esign_options(),esignOptionsMobile:i18n("esign_options_mobile"),completed:i18n.js.esign_completed(),closeMenu:i18n.js2.sidebar_menu_close_accessibility(),delegate:this.isDelegateAllowed()?i18n.js.esign_somebody_else_title_rolebased(g):"",readAgreement:i18n.js.esign_read_agreement_link(),readAgreementTitle:i18n.js.esign_read_agreement_link_title(),reportAbuseLabel:i18n.js2.esign_report_abuse(),delegateURL:this.get("delegateURL"),reject:g==="SIGNER"&&this.isWrittenRequired()?i18n.js.esign_reject_written_signature():i18n.js.esign_reject_rolebased(g),esignRatherWritten:i18n.js.esign_rather_written(),displayEsignLink:i18n.js.switch_to_esign(),displayAuditLink:i18n.js.view_audit(),auditTrailLink:this.get("auditTrailURL"),readyToESign:i18n.js.esign_ready_to_esign(),nextRequired:i18n.js.esign_next_required(),requiredFieldLabel:i18n.js.esign_required_fields_label(),clearDocument:i18n.js.esign_clear_document(),saveDocument:i18n.js2.esign_save_document(),download:i18n.js.esign_HUD_download(),downloadTitle:i18n.js2.esign_HUD_download_title(),signerMessageTitle:i18n.js.esign_message_from_sender_btn_label(),localeSelectHtml:f,noChrome:d,isMobile:App.Env.feature.isMobileBrowser,shouldShowFinishBtn:App.Env.feature.isMobileBrowser&&!App.appView.model.get("hasAlwaysVisibleFooter"),isRequireRecipientNameEnabled:this.isRequireRecipientNameEnabled(),isDelegateV6Enabled:this.isDelegateV6Enabled(),isAboutBoxAvailable:this.get("isAboutBoxAvailable")&&!this.get("webformEsignViewEnabled"),legalNoticesLink:i18n("esign_legal_notices_link")}},defaults:{adobeTermsAccepted:false,agreement:null,user:{},termsOfUseFlavor:"",requireDeclineReason:false,isAgreeToTermsChecked:false,optionalWritten:false,optionalWrittenActive:false,signature:null,initials:null}});App.ns("Models.Esign").Main=b}());(function(){var a=App.Models.Agreement.extend({removeScribbleOnMsc:function(d,b){var c=d[b];if(c.mscInfo){d[b]=_.pick(c,"mscInfo")}},preprocessData:function(e){e=e||{};var d=App.appView.model.get("isSaveWidget");if(d){e.widgetSignerName=App.appView.model.get("widgetSignerName");e.widgetSignerEmail=App.appView.model.get("widgetSignerEmail");e.description=App.appView.model.get("widgetSignerDescription")}if(typeof e.echosign_signature_SCRIBBLE==="object"){this.removeScribbleOnMsc(e,"echosign_signature_SCRIBBLE");e.echosign_signature_SCRIBBLE=JSON.stringify(e.echosign_signature_SCRIBBLE)}if(typeof e.echosign_initials_SCRIBBLE==="object"){this.removeScribbleOnMsc(e,"echosign_initials_SCRIBBLE");e.echosign_initials_SCRIBBLE=JSON.stringify(e.echosign_initials_SCRIBBLE)}if(typeof e.echosign_signatureStampImage_SCRIBBLE==="object"){this.removeScribbleOnMsc(e,"echosign_signatureStampImage_SCRIBBLE");e.echosign_signatureStampImage_SCRIBBLE=JSON.stringify(e.echosign_signatureStampImage_SCRIBBLE)}_.each(e,function(i,g,h){if(i==="REMOTE"){var f=g+"_SCRIBBLE";if(_.isObject(h[f])){if(_.isUndefined(h.echosign_signature_SCRIBBLE)){h.echosign_signature_SCRIBBLE=JSON.stringify(h[f])}}}});e.esignVersion=App.appView.model.get("version");e.echosign_webidentityid=App.appView.model.get("webIdentityId");e.echosign_kbatransactionid=App.appView.model.get("kbaTransactionId");e.echosign_srcdocumentid=App.appView.model.get("srcDocumentId");if(App.appView.model.get("isAgreementPayable")){if(App.appView.model.get("paymentNonce")){e.echosign_payment_nonce=App.appView.model.get("paymentNonce")}}if(App.Utils.MultipleEsignAuth.isAuthenticationOnSignatureRequired()){var b=_.uniq(App.Utils.MultipleEsignAuth.signatureFieldsViewCid),c="";_.each(b,function(f){c+=f+" "});e.signatureFieldsViewCid=c.trim()}if(App.appView.model.get("allowESignatureReasonInput")){_.each(App.appView.model.attributes.agreement.attributes.latestDocumentData.fields,function(g){if(g.inputType==App.Models.Field.INPUT_TYPES.SIGNATURE&&g.contentType==App.Models.Field.CONTENT_TYPE.SIGNATURE){var f=g.name+"_REASON";e[f]=App.appView.model.get(f)}})}return e},reject:App.Service.dwrPromisify(function(b,c){this.service.rejectAgreement(App.appView.model.attributes.pid,b.refusalCode,b.comment,b.notify,this.preprocessData(b.data),App.Service.getDWRHandler(this,c))}),saveExplicitConsentEvent:function(b){this.service.participantAgreedToTerms(App.appView.model.attributes.pid,this.id,App.Service.getDWRHandler(this,b))},saveModificationAckEvent:function(c){var b=App.appView.model,d=b.get("user").seriouslySecureId;this.service.saveAckEvent(this.id,d,App.Service.getDWRHandler(this,c))},saveToServer:function(b,c){this.service.saveFormAgreement(this.id,this.preprocessData(b.data),App.Service.getDWRHandler(this,c))},sign:App.Service.dwrPromisify(function(b,c){if(App.appView.model.get("widget")){this.service.esignWidgetAgreement(this.id,App.appView.model.get("token"),this.preprocessData(b.data),b.agreedToTerms,new Date().getTimezoneOffset(),App.appView.model.get("participationAuthToken"),App.Service.getDWRHandler(this,c))}else{this.service.esignFormAgreement(App.appView.model.attributes.pid,this.preprocessData(b.data),b.agreedToTerms,new Date().getTimezoneOffset(),b.conversionProjectSecureId,App.appView.model.get("participationAuthToken"),App.Service.getDWRHandler(this,c))}}),saveFormForWrittenDownload:App.Service.dwrPromisify(function(b,c){this.service.saveFormDataAndGenerateDocumentForWrittenDownload(App.appView.model.attributes.pid,this.preprocessData(b.data),b.agreedToTerms,new Date().getTimezoneOffset(),App.appView.model.get("participationAuthToken"),App.Service.getDWRHandler(this,c))}),prefill:App.Service.dwrPromisify(function(b,c){this.service.prefillFormAgreement(this.id,this.preprocessData(b.data),new Date().getTimezoneOffset(),App.Service.getDWRHandler(this,c))}),saveSignature:function(b,c){if(b.mode===App.Models.Signature.MODE.signature){this.service.saveSignatureScribble(b.data,this.id,App.Service.getDWRHandler(this,c))}else{this.service.saveInitialsScribble(b.data,this.id,App.Service.getDWRHandler(this,c))}},signAgreementRemotely:function(g,l){var i=App.appView.model.attributes.signerAgreementCapabilityId,f=App.appView.model.attributes.participantId,e=App.appView.model.attributes.participantSetId,m,c,d,h,b,j=App.appView.fieldsViewer.collection.findWhere({inputType:App.Models.Field.INPUT_TYPES.PDF_SIGNATURE});if(j&&j.has("digSigProviderChoice")&&j.get("digSigProviderChoice").has("id")&&j.get("digSigProviderChoice").get("id")==="singpass"){if(!App.Api6.haveApi){App.Api6.init()}if(App.Api6.haveApi&&_.has(App.Api6.Agreements.Members,"SingPassSign")){var k=new App.Api6.Agreements.Members.Participant({id:f},{agreementId:i,participantSetId:e});m=k.singpassSign;c=new Backbone.Model;c.set({digitalSigningReason:j.get("digSigSigningReason")||"",latestDocumentId:g.sourceDocumentId,signRef:_.has(g,"singpassSigningReference")?g.singpassSigningReference:"",signerName:App.appView.model.get("signerName")||App.Env.user.fullNameOrEmail})}}else{if(App.appView.model.get("isReadyForUIDSigning")){c=g;m=new App.Api.Agreements.UIDSign({id:i},{participantSetId:e,participantId:f,initiate:l.initiate,finish:l.finish});c.set({digitalSigningReason:j.get("digSigSigningReason")})}else{c=new DigSigUI.OneTimePassword();if(!App.Api6.haveApi){App.Api6.init()}if(App.Api6.haveApi&&_.has(App.Api6.Agreements.Members,"RemoteSign")){var k=new App.Api6.Agreements.Members.Participant({id:f},{agreementId:i,participantSetId:e});m=k.remoteSign}else{m=new App.Api.Agreements.RemoteSign({id:i});m.setParticipant(e,f)}h=j.get("selectedCertificateModel");b=j.get("digSigProviderChoice");c.set({accessWebToken:j.ticket,providerId:b.get("id"),providerName:b.get("name"),credentialId:h.get("credID"),pin:g.digSigPin,otp:g.digSigOtp,digitalSigningReason:j.get("digSigSigningReason"),sourceDocumentId:g.sourceDocumentId,code:_.has(g,"code")?g.code:"",grantType:_.has(g,"grantType")?g.grantType:"",credentialAuthToken:_.has(g,"credentialAuthToken")?g.credentialAuthToken:"",signingDocumentToken:_.has(g,"signingDocumentToken")?g.signingDocumentToken:""})}}m.set(c.toJSON());if(_.has(g,"credentialAuthToken")){g=_.omit(g,"credentialAuthToken")}return m.save(g,l)},sync:App.Service.dwrPromisify(function(e,c,b){var d=App.Service.getDWRHandler(c,b);switch(e){case"read":if(App.appView.model.get("widget")){this.service.getAgreementForWidgetEsign(this.id,App.appView.model.get("token"),d)}else{this.service.getAgreementForNewEsign(App.appView.model.attributes.pid,this.getExperience(),App.appView.model.get("participationAuthToken"),d)}break;default:return this._super.apply(this,arguments)}})});App.ns("Models.Esign").Agreement=a}());(function(){var a;var b=function(c){this.agreement=c};b.prototype={maxTime:300000,maxErrors:3,maxInterval:10000,decay:1.1,startingInterval:1000,stopped:true,currentInterval:null,currentDecay:null,errorCount:null,projectCache:{},poll:function(c){if(!this.projectCache[c.get("secureId")]){this.projectCache[c.get("secureId")]={startTime:new Date().getTime(),model:c};this.reset()}if(this.stopped){this.stopped=false;this.checkProjectStatus()}},stop:function(){this.stopped=true},reset:function(){this.currentInterval=this.startingInterval;this.currentDecay=this.decay;this.errorCount=0},checkProjectStatus:function(){if(this.stopped){return}var d=this,c=[],e=new Date().getTime(),f;if(_.isEmpty(this.projectCache)){this.stop();return}_.each(this.projectCache,function(h,g){if(e-h.startTime>d.maxTime){f=h.model;if(f){d.setProjectStatusAndCleanCache(f,{status:"FAILED",errorMessage:i18n.js.esign_attachment_server_error()})}}else{c.push(g)}});if(_.isEmpty(c)){this.stop();return}this.agreement.service.checkConversionProjectsStatus(c,{callback:_.bind(this.handleProjectStatusResult,this),errorHandler:_.bind(this.handleProjectStatusError,this)})},handleProjectStatusError:function(c){this.errorCount++;if(this.errorCount===this.maxErrors){this.stop()}else{this.scheduleNextProjectStatusCheck()}},handleProjectStatusResult:function(e){if(_.isEmpty(e)){return}var c=this,d;_.each(e.projectStatusMap,function(f,g){if(f&&f.status!=="PROCESSING"){d=c.projectCache[g].model;if(d){c.setProjectStatusAndCleanCache(d,f);c.reset()}}});this.scheduleNextProjectStatusCheck()},setProjectStatusAndCleanCache:function(d,c){d.setConversionStatus(c.status,c.errorMessage);delete this.projectCache[d.get("secureId")]},scheduleNextProjectStatusCheck:function(){if(_.isEmpty(this.projectCache)){this.stop();return}_.delay(_.bind(this.checkProjectStatus,this),this.getAttachementPollingDecayingInterval())},getAttachementPollingDecayingInterval:function(){this.currentInterval=(this.currentInterval*this.currentDecay);this.currentDecay=this.currentDecay*this.decay;this.currentInterval=Math.min(Math.round(this.currentInterval),this.maxInterval);return this.currentInterval}};a={getAttachmentPoller:function(){if(!this.attachmentPoller){this.attachmentPoller=new b(this)}return this.attachmentPoller}};App.Models.Esign.Agreement=App.Models.Esign.Agreement.extend(a)}());(function(){var a;var b=function(d,c){this.agreement=d;this.throttledSave=_.throttle(function(){this.unthrottledSave()},c.saveTime,{leading:false})};b.prototype={skipNextSave:false,failures:0,save:_.debounce(function(){if(this.skipNextSave===true){this.skipNextSave=false;return}this.throttledSave()},100),reset:function(){this.skipNextSave=true;this.saveToServer(null,{success:_.bind(this.resetSuccess,this),error:_.bind(this.resetFail,this)})},unthrottledSave:function(){App.EventBus.trigger("lastSaved:savingMsg");this.saveToServer(App.appView.fieldsViewer.getAutoSavedData(),{success:_.bind(this.saveSuccess,this),error:_.bind(this.saveFail,this)})},saveToServer:function(d,c){this.agreement.saveToServer({data:d},c)},saveSuccess:function(){_.delay(function(){App.EventBus.trigger("lastSaved:savedMsg")},700)},saveFail:function(d,e,c){if(App.Service.checkIfMessageRelatedToCrossShardMigration(e)){App.Service.errorHandler(e)}this.failures++},resetSuccess:function(){},resetFail:function(){this.failures++}};a={getSaveService:function(){if(!this.esignSave){this.esignSave=new b(this,{saveTime:App.appView.model.get("esignSaveTime")*1000})}return this.esignSave}};App.Models.Esign.Agreement=App.Models.Esign.Agreement.extend(a)}());(function(){var a={};a.digSigDownload=_.template('<div class="postsign-header-container">       <h1 id="download-digsig-title" class="title"> {{ title }} </h1>     </div>     <div class="postsign-descr-message-container">      <h3 id="download-digsig-message" class="sub-text"> {{ message }} </h3>     </div>     <a id="download-signed-pdf" class="btn btn-primary btn-lg" href="{{ downloadUrl }}" target="_blank" style="margin-top:20px;"> {{ download }} </a>     <div class="get-reader">       <h3 id="download-digsig-reader" class="sub-text">  {{ getReaderLinkText }} </h3>     </div>');a.digSigSignOnDesktop=_.template('<div class="postsign-header-container">       <h1 id="download-digsig-title" class="title"> {{ title }} </h1>     </div>     <div class="postsign-descr-message-container">       <h3 id="download-digsig-message" class="sub-text"> {{ message }} </h3>     </div>');a.digitalSignaturePinAndOtpDialogContent=_.template('<div class="digital-signature-modal-screen-spinner" role="progressbar"></div>    <div class="digital-signature-modal-screen screen-set-two certificate-confirmation-screen">    </div>    <div class="digital-signature-modal-screen screen-set-two one-time-password-screen">    </div>');a.digitalSignatureUIDModal=_.template('<div class="digital-signature-modal-screen-spinner" role="progressbar"></div>      <div class="digital-signature-modal-screen iframe-screen">      </div>');a.digitalSignatureOneTimePasswordContent=_.template('<div class="message-part">      <span class="message-text"></span>    </div>    <div class="pin-block">      <div class="help-part">        <span id="generalText" class="general-text">{{pinText}}</span>      </div>      <div class="form-horizontal">        <div class="form-group form-part">          <label class="col-sm-3 control-label label-otp"">{{pinTitle}}</label>          <div class="col-sm-7"><input type="password" class="form-control input-lg" id="pin" style="text-align: center; font-style: italic"></div>          <div class="col-sm-2">&nbsp;</div>        </div>      </div>    </div>    <div class="otp-block">      <div class="help-part">        <span id="generalText" class="general-text">{{otpText}}</span>      </div>      <div class="form-horizontal">        <div class="form-group form-part">          <label class="col-sm-3 control-label label-otp" for="otp">{{otpTitle}}</label>            <div class="col-sm-7"><input type="text" class="form-control input-lg" id="otp" style="text-align: center; font-style: italic">              <% if(otpOnline) { %><div id="generalText" class="general-text">{{didntGetCodeText}}&nbsp;<a href="#" id="resend-otp">{{sendCodeText}}</a></div><% } %>            </div>            <div class="col-sm-2">&nbsp;</div>        </div>      </div>    </div>');a.digitalSignatureUIDContent=_.template('<iframe id="uid-frame" class="uid-frame">      </iframe>');a.stateTransition={modal:_.template('<div id="{{modalId}}" class="state-transition-modal"><div class="alert alert-danger state-error d-none " style="text-align: center"></div><div class="row states-content"></div></div>'),footer:_.template('<div class="row footer text-right"><button class="btn btn-default state-cancel">{{cancelButtonText}}</button><button class="btn btn-default state-prev">{{prevButtonText}}</button><button class="btn btn-primary state-next">{{nextButtonText}}</button></div>'),states:{service:_.template('<div class="option-area">          <div class="col-xs-2 digsig-radio-col"><input type="radio" class="signature-type-radio radio-input" name="digital-signature-option" id="online-digital-signature" value="{{ online }}" checked><span class="radio-image"></span>          </div>          <div class="col-xs-10 digsig-label-col">           <label for="online-digital-signature" class="digital-signature-option-label online">            <span class="label-icon online-label-icon d-none d-md-block"></span>            <span class="service-chooser-info">              <div class="service-chooser title">{{ online }}</div>              <div class="service-chooser desc">{{ onlineDescriptionText }}</div>            <span>           </label>          </div>         </div>         <div class="option-area">          <div class="col-xs-2 digsig-radio-col"><input type="radio" class="signature-type-radio" name="digital-signature-option" id="local-digital-signature" value="{{ local }}"></div>          <div class="col-xs-10 digsig-label-col">           <label for="local-digital-signature" class="digital-signature-option-label local">            <span class="label-icon local-label-icon d-none d-md-block"></span>            <span class="service-chooser-info">              <div class="service-chooser title">{{ local }}</div>              <div class="service-chooser desc">{{ localDescriptionText }}</div>            </span>           </label>           <% if (isMobile) { %> <div class="col-xs-10 local-warning">{{localNotAvailableText}}</div> <% } %>          </div>         </div>'),provider:_.template('<div class="provider-logo"></div>          <div class="provider-chooser">            <select id="digital-signature-rsi-provider-chooser" class="digital-signature-rsi-provider-chooser col-xs-8 center-block" name="rsi-providers">              <option value="" disabled selected>{{providerPlaceholder}}</option>            </select>          </div>          <a class="sign-up-url d-block d-sm-none" href="{{ signUpURL }}" target="_blank" rel="noreferrer" data-analytics-click="oid:signup">{{ signUpForOnlineCredential }}</a>          <a class="sign-up-url d-none d-md-block" href="{{ signUpURL }}" target="_blank" rel="noreferrer" data-analytics-click="oid:signup">{{ signUpForOnlineCredential }}</a>'),certificate:_.template('<div class="certificates-list">          <div class="part chooser-part">            <ul id="digital-signature-certificate-list" role="menu" class="digital-signature-certificate-list center-block" tabindex="0" aria-label="{{title}}">            </ul>          </div>          <div class="show-invalid-certificates-part">            <div class="checkbox show-invalid-certificates">              <label for="checkbox-show-invalid">                <input type="checkbox" id="checkbox-show-invalid">                <span>{{ showInvalidCertificates }}</span>              </label>            </div>            <div class="show-invalid-certificates-help" data-toggle="tooltip" title="{{ toolTipText }}"></div>          </div>          <span class="obtain-digital-id-link">            <a class="obtain-id-url" href="{{ obtainDigitalIdURL }}" target="_blank" rel="noreferrer" data-analytics-click="oid:get">{{ obtainDigitalID }}</a>          </span>        </div>'),signWithAcrobat:_.template('<div class="sign-with-acrobat row"><div class="col-xs-2 text-center"><i class="icon sign-with-acrobat"></i></div><div class="col-xs-10 content"><p class="description-text">{{descriptionText}}</p><ol class="instruction-list"><li>{{completeOtherFieldsText}}</li><li>{{clickBlueButtonText}}</li><li>{{downloadAndOpenDocumentText}}</li><li>{{signWithLocalDigitalCertificateText}}</li></ol></div></div>'),noDigitalId:_.template('<div class="no-digital-id row"><div class="col-xs-2 text-center"><i class="icon no-digital-id"></i></div><div class="col-xs-10 content"><p class="description-text">{{descriptionText}}</p><ul class="instruction-list"><li>{{getNewDigitalIdText0}}<a href="{{getNewDigitalIdLink}}" target="_blank" rel="noreferrer" data-analytics-click="oid:noId">{{getNewDigitalIdText1}}</a>{{getNewDigitalIdText2}}</li><li>{{useAcrobatText}}</li></ul></div></div>'),signature:_.template('<div class="digital-signature-appearance-section"><div class="dig-sig-appearance-message-container row"><div class="col-xs-12 dig-sig-appearance-message">{{appearanceMessage}}</div></div><% if(!isReturningUser) { %><div class="dig-sig-appearance-link-container row"><div class="dig-sig-appearance-signature-panel-link col-xs-12"><button class="sig-panel-link text-right" type="button" data-analytics-click="signaturePanel">{{signaturePanelLink}}</button></div></div><% } %><div class="dig-sig-appearance row"><div class="pdfFormField pdf_signature remote_allowed done <% if(isReturningUser) { %>returning-user <% } %>ratio1_6 col-xs-12"><div class="applied-signature"><div class="not-available<% if(!isReturningUser) { %> d-none<% } %>"><span class="not-available-text">{{notAvailableMessage}}</span></div><div class="signature<% if(isReturningUser) { %> d-none<% } %>"></div><div class="certificate-info"></div><div class="trefoil"><img class="softened centered auto-fit" src="{{ App.Env.root }}images/esignJS/cloudsign_trefoil_icon.png"></div></div></div></div><div class="dig-sig-appearance-message-container row"><div class="col-12 dig-sig-appearance-message" style="margin-top: 15px; margin-bottom: -15px;">{{bulkSigningDisclaimer}}</div></div><div class="dig-sig-reason row"><% if (allowDigitalSignatureReasonInput) { %><div class="form form-inline form-multiline"><div class="form-group"><label class="label-reason" for="digSigReason">{{reasonLabel}}</label><input type="text" class="form-control input-lg dig-sig-reason-input" id="digSigReason" maxlength="{{maxLength}}" placeholder="{{placeholderText}}"></div></div><% } %></div></div>')}};a.rsiProviderItemView=_.template('<div value="{{name}}" id ="{{id}}" >{{name}}</div>');a.digSigCertificateView=_.template('<% if (valid) { %> <div class="digital-signature-certificate" id = "{{ id }}" role="menu-item">        <% } else { %> <div class="digital-signature-certificate d-none" disabled="disabled" id = "{{ id }}" role="menu-item"><% } %>        <div class="digital-signature-certificate-left-side">          <div class="digital-signature-certificate-user-name">{{ name }}</div>          <div class="digital-signature-certificate-information">            <span>{{ issuedBy }}, {{validTo}} </span>          </div>        </div>        <div class="digital-signature-certificate-right-side pull-right">          <% if (!valid) { %>          <span class="digital-signature-status-text">{{ status }}</span>          <% } %>        </div>        </div>      </ul>    </div>');a.field='<div class="initial-state"><div class="content"><div class="prompt-icon ml-8 mr-8"><div class="v-middle"><div class="icon prompt {{serviceType}} ml-8 v-middle" data-service-type="{{serviceType}}"></div></div></div><div class="prompt-text truncate"><span class="inner-text v-middle">{{promptTxt}}</span></div></div></div><div class="applied-signature d-none"><div class="signature"></div><div class="certificate-info"></div><div class="trefoil"><img class="softened centered auto-fit" src="{{ App.Env.root }}images/esignJS/cloudsign_trefoil_icon.png"></div></div><div class="singpass-signature d-none"><div class="singpass-lion-sign"><div class="singpass-lion"></div><div class="singpass-sign"></div></div><div class="singpass-underline"></div></div><input class="digital-signature-field" name="{{% name}}" aria-label="{{% promptTxt}}" type="text" readonly="readonly" unselectable="on" aria-hidden="true" disabled /><div class="faux-field" aria-label="{{% promptTxt}}" role="button" tabindex="0"></div><button class="close" title="{{closeTitle}}" aria-label="{{closeTitle}}">&times;</button>';a.certificateInfo=_.template('<ul class="factors"><li>{{%signedBy}}</li><li class="reason d-none">{{reason}}</li><li>{{signedDate}}</li></ul>');a.signature={image:_.template('<img src="{{imgSrc}}" class="v-middle">'),typed:_.template('<div class="typed-signature"><span class="signature-name {{cursiveFont}}">{{%name}}</span></div>')};App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={};a.headerActions=_.template('<div class="nav-collapse float-left">      <a class="readAgreementLink hidden-accessible" tabindex="-1" href="#" data-analytics-click="readAgreement">{{ readAgreement }}: {{ readAgreementTitle }}</a>      <ul role="presentation" class="nav">        <li role="presentation" class="nav-item dropdown es-dropdown">          <a role="button" aria-haspopup="true" href="#" class="nav-link dropdown-toggle esign-options d-none d-md-block" data-toggle="dropdown" data-analytics-click="altAction">{{ esignOptions }}          </a>          <ul role="menu" id="no-sign-menu" class="dropdown-menu">            <% if (showReadAgreement) { %><li role="presentation"><a role="menuitem" id="readAgreementLink" class="dropdown-item readAgreementLink" href="#" data-analytics-click="readAgreement">{{readAgreement}}<span class="hidden-accessible">: {{readAgreementTitle}}</span></a></li><% } %>            <% if (showDelegate)      { %><li role="presentation"><a role="menuitem" id="delegateLink" class="dropdown-item delegateLink" href="#" data-analytics-click="delegate">{{delegate}}</a></li><% } %>            <% if (showReject)        { %><li role="presentation"><a role="menuitem" id="rejectBtn" class="dropdown-item rejectBtn" href="#" data-analytics-click="reject">{{reject}}</a></li><% } %>            <% if (showSignByWritten) { %><li role="presentation"><a role="menuitem" class="dropdown-item written-in" href="#" data-analytics-click="written">{{esignRatherWritten}}</a></li><% } %>            <% if (showClearDocument) { %><li role="presentation"><a role="menuitem" id="headerClearDocumentBtn" class="dropdown-item clearDocument" href="#" data-analytics-click="clear">{{clearDocument}}</a></li><% } %>            <% if (showSaveDocument)  { %><li role="presentation"><a role="menuitem" id="headerSaveDocumentBtn" class="dropdown-item saveDocument" href="#" data-analytics-click="save">{{saveDocument}}</a></li><% } %>            <% if (showESign)         { %><li role="presentation"><a role="menuitem" class="dropdown-item switchToEsign" href="#" data-analytics-click="switchToEsign">{{displayEsignLink}}</a></li><% } %>            <% if (showSignerMessage) { %><li><a href="#" class="dropdown-item message-to-signer" aria-controls="esMessage-popup-dialog" data-analytics-click="msgToSigner">{{signerMessageTitle}}</a></li><% } %>            <% if (showReportAbuse)   { %><hr role="separator"/><li role="presentation"><a role="menuitem" id="reportAbuseLink" class="dropdown-item reportAbuseLink" href="#" data-analytics-click="reportAbuse">{{reportAbuseLabel}}</a></li><% } %>            <% if (showAudit)         { %><li role="presentation"><a role="menuitem" class="dropdown-item" id="auditTrailLink" href="{{ auditTrailLink }}" target="_blank" data-analytics-click="audit">{{displayAuditLink}}</a></li><% } %>            <% if (showDownload)      { %><li role="presentation"><a role="menuitem" class ="dropdown-item es-download" href="#" target="_blank" data-analytics-click="preSignPdf">{{download}}<span class="hidden-accessible">: {{downloadTitle}}</span></a></li><% } %>            <% if (isAboutBoxAvailable) { %><li role="presentation"><a role="menuitem" class="dropdown-item" id="legalNoticesLink" href="#" data-analytics-click="legalNotices">{{legalNoticesLink}}</a></li><% } %>            <% if (showLocale)          { %><li class="es-sidebar-dropdown">{{localeSelectHtml}}</li><% } %>          </ul>        </li>      </ul>    </div>');a.headerActionsSmall=_.template('<div class="d-md-none navbar navbar-default <% if (isMobile) { %> dark-mode <% } else { %> light-ui<% } %> es-sidebar">      <a class="readAgreementLink hidden-accessible" tabindex="-1" href="#" data-analytics-click="readAgreement">{{ readAgreement }}: {{ readAgreementTitle }}</a>      <div class="navbar-header es-sidebar-header">        <button type="button" class="navbar-toggle es-sidebar-toggle" data-toggle="offcanvas" data-target=".es-sidebar-nav" data-analytics-click="altAction" aria-label="{{ esignOptionsMobile }}" title="{{ esignOptionsMobile }}" role="button" aria-expanded="false">          <span class="icon-bar"></span>          <span class="icon-bar"></span>          <span class="icon-bar"></span>        </button>      </div>    </div>');a.headerRHS=_.template('<div class="subnav float-right">      <ul role="presentation" class="nav nav-pills">        <% if (showMessageToSigner) { %>          <li role="presentation" class="nav-item esMessage-container">            <button class="esMessage-icon" aria-haspopup="true" title="{{ agreementMsgTitle }}" aria-controls="esMessage-popup-dialog" data-analytics-click="msgToSigner">              <span class="hidden-accessible">{{ agreementMsgLabel }}</span>            </button>          </li>        <% } %>        <li role="presentation" class="nav-item required-info" data-analytics-click="reqField">          <a href="#" class="nav-link requiredFields d-none d-xl-block"> {{ requiredFieldLabel }} </a>          <a href="#" class="nav-link requiredFields d-none d-md-block d-lg-block d-xl-none"> {{ nextRequired }} </a>          <button class="requiredFieldsIcon badge"></button>        </li>        <li class="nav-item completed-info" role="status">          <span class="completed-label d-none d-md-inline-block">{{ completed }} </span> <% if (isMobile) { %><span class="completed-icon d-none d-md-inline-block"></span><% } else { %>          <span class="completed-icon" title="{{ completed }}"></span><% } %>          <% if (shouldShowFinishBtn) { %><button class="finish-btn btn btn-primary d-none" data-analytics-click="tou:finishTrigger" role="button" aria-label="{{ finishAriaLabel }}">{{finishBtnLabel}}</button> <% } %>        </li>        <li role="presentation" class="nav-item coachmark-mobile-container"></li>      </ul>    </div>');a.requiredFieldsPopoverContent=_.template('<div class="next" role="tooltip">      <p class="nextRequiredMsg">{{ nextReqMsg }} </p>      <p class="nextReqInvalidMsg">{{ nextReqInvalidMsg }} </p>      <p class="nextInvalidMsg">{{ nextInvalidMsg }} </p>      <div class="progress fieldsRemaining"><div class="progress-bar" role="progressbar"></div></div>    </div>');a.messageToSignerContent=_.template(' <% if (showClose) { %><button class="close-popover" aria-label="{{close}}" title="{{close}}" tabindex="-1" aria-hidden="true"></button> <% } %>    <% if (showAgreementMsg) { %>      <div class="agreementMsg-container">        <h3 class="agreementMsg-title">{{agreementMsgTitle}}</h3>        <hr/>        <p class="agreementMsg">{{agreementMsg}}</p>      </div>    <% } %>    <% if (showPrivateMsg) { %>      <div class="privateMsg-container">        <h3 class="privateMsg-title">{{privateMsgTitle}}</h3>        <hr/>    <p class="privateMsg">{{privateMsg}} </p>      </div>    <% } %>');a.rejectPanel=_.template('<% if(!declineAvailable){ %>      <div class="modal fade reject-modal" role="dialog">        <div class="modal-dialog">          <div class="modal-content">            <div class="modal-header">              <h3 class="modal-title">{{ refusalHeadText }}</h3>            </div>            <div class="dropdown es-dropdown">              <p><label for="form-control-declineComments">{{ refusalBodyText }}</label></p>              <textarea id="form-control-declineComments" row="5" class="form-control declineComments"></textarea>            </div>            <% if (showAdobeTerms) { %>              <div class="checkbox-a12" role="presentation">                <label class="control-label">                  <input type="checkbox" aria-label="{{checkboxLabelForAdobeTermsAria}}" class="ec-checkbox checkbox-input form-control adobe-terms"/><span class="checkbox-image"></span>                </label>                <span class="ec-checkbox-label">{{checkboxLabelForAdobeTerms}}</span>              </div>            <% } %>            <div class="modal-footer">              <div class="float-right">                <button class="btn btn-default cancel" data-dismiss="modal">{{ cancel }}</button>                <button class="btn btn-primary decline">{{ decline }}</button>              </div>            </div>          </div>        </div>      </div>    <% } else { %>      <div class="modal fade reject-modal" role="dialog">        <div class="modal-dialog">          <div class="modal-content">            <div class="modal-header">              <h3 class="modal-title">{{ declineHeadText }}</h3>            </div>            <div>              <p><label class="label-reason" for="form-control-declineComments">{{ declineBodyText }}</label></p>            </div>            <div class="form form-multiline">              <div class="form-group decline-reason-form-group">                <div class="decline-reason-dropdown-container decline-reason-form-control select-container">                  <label for="declineReasonFormControlDropdown">{{reasonLabel}}</label>                </div>                <div class="decline-reason-text-container decline-reason-form-control">                  <textarea id="form-control-declineComments" row="5" class="form-control declineComments" maxlength="{{maxLength}}" placeholder="{{ placeholderText }}"></textarea>                </div>              </div>            </div>            <% if (showAdobeTerms) { %>              <div class="checkbox-a12" role="presentation">                <label class="control-label">                  <input type="checkbox" aria-label="{{checkboxLabelForAdobeTermsAria}}" class="ec-checkbox checkbox-input form-control adobe-terms"/><span class="checkbox-image"></span>                </label>                <span class="ec-checkbox-label">{{checkboxLabelForAdobeTerms}}</span>              </div>            <% } %>            <div class="modal-footer">              <div class="float-right">                <button class="btn btn-default cancel" data-dismiss="modal">{{ cancel }}</button>                <button class="btn btn-primary decline">{{ decline }}</button>              </div>            </div>          </div>        </div>      </div>    <% } %>');a.dcSignPanel=_.template('<div class="modal dc-signature-panel" role="dialog">');a.signerDetailsPanel={};a.signerDetailsPanel.container=_.template('<div id="errorDialog"></div>     <div class="signer-detail-container">       <div class="signer-detail-body">         <div id="nextSignerPanelHeader" class="nextSignerPanelHeader">            <p>{{ nextSignerDetailsBodyText }}</p>         </div>         <div id="signerDetailsBodyText" class="hidden-accessible">            <p>{{ signerDetailsBodyText }}</p>         </div>         <div id="nextSignerDetails"></div>         <div id="signerDetails" class="hidden-accessible"></div>       </div>	   </div>');a.signerDetailsPanel.name=_.template('<div class="signerNameRow">      <label class="hidden-accessible" for="form-control-signerName">{{signerNameLabel}}</label>      <input type="text" id="form-control-signerName" class="form-control signerName" placeholder="{{signerNameLabel}}" maxlength="{{maxLength}}" data-submits/>    </div>');a.signerDetailsPanel.email=_.template('<div class="signerEmailRow">      <label class="hidden-accessible" for="form-control-signerEmail">{{signerEmailLabel}}</label>      <input type="text" id="form-control-signerEmail" class="form-control signerEmail" placeholder="{{signerEmailLabel}}" data-submits/>    </div>');a.signerDetailsPanel.nextSignerDetails=_.template('<div>    <p>{{ nextSignerDetailsBodyTextSaveWidget }}</p>     <% if(pdsSignerIndex === 0) { %>      <hr class="participant-separator" />      <% } %>     <div class="row nextSignerPanelHeader" ><div class="col-sm-11 participant-name-{{required ? "required" : ""}} {{required ?  "required-field" : "" }}"><b id="nextSignerPanelHeader{{pdsSignerIndex}}">{{unknownParticipantName}}</b></div>     <div class="col-sm-1"><div id="participant-name{{pdsSignerIndex}}" class="col-md-1 participant-name participant-name-expanded"></div></div></div>     <div class="col-sm-12 nextSignerDetails-body-expanded" id="nextSignerDetails-body{{pdsSignerIndex}}">    <div>        <div class="col-12 admin-table-row" >          <div class="expandable-container">            <div id="next-signer-instruction{{pdsSignerIndex}}" class="next-signer-instruction">{{nextSignerDetailsDescription}}</div>            <div class="read-more-less-button"></div>          </div>          </div>          <div class="col-4 input-field-nextsigner">{{firstNameLabel}}</div>          <div class="col-4 input-field-nextsigner">{{lastNameLabel}}</div>          <div class="col-4 input-field-nextsigner">{{emailLabel}}</div>          <div class="col-4 input-field-nextsigner"><input type="text" id="form-control-nextSignerName{{pdsSignerIndex}}" class="form-control nextSignerName" placeholder="{{nextSignerNamePlaceHolder}}" maxlength="{{maxLength}}" /></div>          <div class="col-4 input-field-nextsigner"><input type="text" id="form-control-nextSignerLastName{{pdsSignerIndex}}" class="form-control nextSignerLastName" placeholder="{{nextSignerLastNamePlaceHolder}}" maxlength="{{maxLength}}" /></div>          <div class="col-4 input-field-nextsigner next-signer-email"><input type="text" id="form-control-nextSignerEmail{{pdsSignerIndex}}" class="form-control nextSignerEmail" placeholder="{{nextSignerEmailPlaceHolder}}" /></div>        </div><br/>          <div class="input-field-nextsigner email-label d-none" id="email-label{{pdsSignerIndex}}">{{nextSignerMessageLabel}}</div>          <textarea id="form-control-nextSignerMessage{{pdsSignerIndex}}" class="form-control nextSignerMessage d-none" placeholder="{{nextSignerMessagePlaceHolder}}" maxlength="{{maxLengthForMessage}}"></textarea>          <button class="message-btn" data-analytics-click="add-message" type="button" id="message-btn{{pdsSignerIndex}}">{{addMessageLabel}}</button>      </div>      <hr class="participant-separator"/>      </div>    </div>');a.signerDetailsPanel.footer=_.template('<div class="row footer text-right">    <button id="stateCancel" class="btn btn-default state-cancel footer-btn-signerDetails">{{cancelButtonText}}</button>    <button id="statePrev" class="btn btn-primary state-prev footer-btn-signerDetails">{{prevButtonText}}</button>    <button id="stateNext" class="btn btn-primary state-next footer-btn-signerDetails">{{nextButtonText}}</button>    </div>');a.alertMsg=_.template('<div class="esign-alert alert alert-dismissable alert-danger fade in" role="alertdialog">    <button data-dismiss="alert" class="close" type="button">x</button>    <h4 class="alert-heading">{{ msgHeading }}</h4>    <p>{{ userMsg}}</p>    </div>');a.explicitConsentPage=_.template('<div class="row ec-row">      <div class="col-xl-4 col-lg-4 col-md-4 col-sm-2"></div>      <div class="explicit-consent-container col-xl-4 col-lg-4 col-md-4 col-sm-8">        <h1 class="ec-title"> {{ explicitConsentDocument }} </h1>        <h3 class="ec-sub-text sender-info"> {{ explicitConsentFrom }} </h3>        <h3 class="ec-sub-text sender-info"> {{ explicitConsentMessage }} </h3>      </div>      <div class="col-xl-4 col-lg-4 col-md-4 col-sm-2"></div>    </div>    <div class="terms-of-use">      <div class="row tou-container bottom clearfix">        <div class="terms col-xl-9 col-lg-9 col-md-9 col-sm-8">          <% if (isForcedReview) { %>            <div>{{clickText}}</div>          <% } %>          <br/>          <section ec-checkbox-container></section>          <div class="ec-actions">          <% if (canReject || canDelegate) { %> <div class="ec-or"><span>{{ or }}</span></div> <% } %>          <% if (canReject) { %> <div class="ec-alternatives"><a href="#" id="ec-rejectLink" class="ec-link" data-analytics-click="consent:reject">{{ reject }}</a></div> <% } %>          <% if (canReject && canDelegate) { %> <div class="ec-vertical-bar"></div> <% } %>          <% if (canDelegate) { %>            <div class="ec-alternatives"><a id="ec-delegateLink" class="ec-link" href="#" data-analytics-click="consent:delegate">{{ delegate }}</a></div>          <% } %>        </div>        </div>        <div class="tou-btn col-xl-3 col-lg-3 col-md-3 col-sm-4">          <div class="tou-btn-inner">            <button class="btn btn-primary agree-to-terms" data-analytics-click="consent:accept">{{ accept }}</button>          </div>        </div>      </div>      <% if (isEmbedded) { %>        <div class="row embedded-container bottom clearfix">          {{embeddedText}}        </div>      <% } %>    </div>');a.explicitConsentCheckbox=_.template('<% if (showTermsOfUseGate) { %>      <div class="checkbox-a12" role="presentation">        <label class="control-label">          <input type="checkbox" aria-label="{{checkboxLabelForAdobeTermsAria}}" class="ec-checkbox checkbox-input form-control adobe-terms"/><span class="checkbox-image"></span>        </label>        <span class="ec-checkbox-label">{{checkboxLabelForAdobeTerms}}</span>      </div>    <% } %>    <div class="checkbox-a12" role="presentation">      <label class="control-label">        <input type="checkbox" aria-label="{{checkboxLabelForConsumerDisclosureAria}}" class="ec-checkbox checkbox-input form-control consumer-disclosure"/><span class="checkbox-image"></span>      </label>      <span class="ec-checkbox-label">{{checkboxLabelForConsumerDisclosure}}</span>    </div>');a.ModifiedConsentPage=_.template('<div class="row">      <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10 modified-consent">        <h1 class="mc-title">{{ title }}</h1>        <h3 class="mc-sub-text">{{ from }}</h3>        <p class="mc-content">{{ content }}</p>        <div class="mc-actions">          <button class="btn btn-primary accept-modification" data-analytics-click="modified-consent:accept">{{ btnText }}</button>        </div>      </div>      <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>     </div>');a.PaidAgreementPage=_.template('<div class="row">      <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10 modified-consent">        <h1 class="mc-title">{{ title }}</h1>        <br>        <p class="mc-content">{{ content }}</p>        <br>        <div class="mc-actions">          <button class="btn btn-primary accept-modification" data-analytics-click="modified-consent:accept">{{ btnText }}</button>        </div>      </div>      <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>     </div>');a.throttlingErrorTemplate=_.template("<p>{{userMsg}}</p><p>{{contactMsg}}</p>"),a.savingMsg=_.template('<div class="lastsave-container"><div class="lastsave-info"><span class="lastsaved"></span></div>');a.savePopupMsg=_.template('{{ savedAt }}<span class="popup-date"> {{ date }} </span>');a.savingMsgSmallScreen=_.template('<div class="lastsave-info-icon"><div class="icons"><span class="lastsaved"></span></div></div>');a.forcedReviewDocModalContent=_.template('<p class="fr-doc-modal-content">{{ forcedReviewDocContent }}</p>');a.forcedSaveWidgetModalContent=_.template('<div>      <div class="col-lg-12 forcedSaveContent" >{{forcedSaveWidgetModalContent}}</div>      <div class="col-lg-12 input-field-forcesave required-field"><b>{{forcedSaveWidgetNameLabel}}</b></div>      <div class="col-lg-12 input-field-forcesave"><input type="text" id="input-field-forcesave-name" class="form-control widgetSignerName" maxlength="255"/></div>      <div class="col-6 input-field-forcesave required-field"><b>{{forcedSaveWidgetEmailLabel}}</b></div>      <div class="col-6 input-field-forcesave required-field"><b>{{forcedSaveWidgetConfirmEmailLabel}}</b></div>      <div class="col-6"><input type="text" id="input-field-forcesave-email" class="form-control widgetSignerEmail" placeholder="{{forcedSaveWidgetEmailPlaceholder}}" /></div>      <div class="col-6 next-signer-email"><input type="text" id="input-field-forcesave-confirmEmail" class="form-control widgetSignerConfirmEmail" autocomplete="false" placeholder="{{forcedSaveWidgetEmailPlaceholder}}" /></div>      <div class="row col-lg-12 input-field-forcesave-short-description required-field-short-desc"><b>{{forcedSaveWidgetDescriptionLabel}}</b></div>      <div class="col-lg-12 input-field-forcesave short-description"><input type="text" id="input-field-description" class="form-control description" placeholder="{{forcedSaveWidgetDescriptionPlaceholder}}" maxlength="255"/></div>      <div class="footer-next-signer text-right">        <button id="stateCancel" class="btn btn-default state-cancel footer-btn-signerDetails">{{cancelButtonText}}</button>        <button id="stateNext" class="btn btn-primary state-next footer-btn-signerDetails">{{nextButtonText}}</button>      </div>    </div>');a.forcedSaveCancelConfirmationModalContent=_.template('<div>      <div class="col-lg-12 popupSaveSuccessContent" style="text-align: center;color: #4b4b4b;font-size: 16px;">{{forcedSaveWidgetModalContent}}</div>      <div class="alert alert-popup alert-danger">{{forcedSaveWidgetCancelAlertContent}}</div>    </div>');a.postSaveSuccessfulModalTemplate=_.template('<div>      <div class="col-lg-12 postSaveTitle" style="text-align: center;font-size: 16px;color: #4b4b4b;">{{postSuccessFulSaveWidgetModalContentTitle}}</div>      <div class="alert alert-popup alert-danger">{{postSuccessFulSaveWidgetModalContentAlertMsgTitle}}</div>    </div>');App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={mobileHeader:_.template('<div class="container-fluid agreement-band navbar dark-mode">       <div class="agreement-band-inner">        <div class="row">          <div class="col-xl-4 col-lg-4 col-md-3 col-3 agreement-container"></div>          <div class="col-xl-4 col-lg-4 col-md-4 col-5 agreement-name-container">          <p tabindex="1" class="agreement-name float-left" role="heading" aria-level="1"><span class="title">{{ agreementTitle }}</span></p>          </div>          <div class="col-xl-4 col-lg-4 col-md-5 col-4 agreement-req-info"></div>        </div>      </div>      </div>')};App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={};a.postSigningPage=_.template('<div class="content-page">      <div class="post-sign-content">        <section closeTabBanner></section>      </div>    </div>');a.closeTabBanner=_.template('<div id="close-tab-banner">      <summary>        <p>{{ closeTab }}</p>      </summary>      <button type="button" class="close-tab">{{ closeTabBtn }}</button>    </div>');a.postEsign=_.template('<div class="postsign-message-container">        <div class="postsign-header-container">          <% if (!isWidgetWithVerification) { %>          <div class="postsign-success-header-icon"></div>          <% } %>          <h1>{{ postEsignHeading }}</h1>        </div>        <div class="postsign-descr-message-container">          <h3>{{ title }}</h3>          <h3 class="margin-block-elements"> {{ message }} </h3>          <% if (showPostSignRedirect) { %>            <br/>            <h3>{{ postSignRedirectMessage }}</h3>            <br/>            <br/>            <div style="text-align: center;"><h1 id="redirectCountdown"></h1></div>            <script nonce="{{App.Env.nonce}}">                /* Per https://secure.echosign.com/public/docs/EchoSignDocumentService18#WidgetCompletionInfo                   in the case of embedded widgets, browser security restrictions do not permit automatic redirection in the full browser window                   setting deframe to false is recommended for embedded widgets                */                var headerContainer = document.getElementById("redirectCountdown");                var count = {{ postSignRedirectDelay}};                function countdownFn() {                    if (count > 0) {                        headerContainer.innerHTML = count;                        count--;                        setTimeout(countdownFn, 1000);                    } else {                        {{postSignRedirectToParent ? "window.parent" : "window"}}.location.href = "{{ postSignRedirectUrl }}";                    }                }                countdownFn();            <\/script>          <% } %>        </div>     </div>    <% if (showRegisterLink || userIsPending) { %>       <div class="social-container"></div>    <% } %>    <% if (showRegisterLink) { %>      <div class="start-trial-container">        <h2> {{ postEsignTrialHeader }} </h2>        <p class="start-trial-text margin-block-elements" > {{ postEsignTrialBody }} </p>        <a class="btn btn-primary btn-lg margin-start-trial-elements" href="{{ registerLinkUrl }}" data-analytics-click="crtFree" target="_blank">{{ registerLinkText }}</a>      </div>      <div class="suggest-container">          <h2>{{ postEsignTrialDescHeader }}</h2>        <div class="margin-block-elements">          <h3><b>{{ trialSuggestHeader1 }}</b></h3>          <h4>{{ trialSuggestText1 }}</h4>        </div>        <div class="margin-block-elements">          <h3><b>{{ trialSuggestHeader2 }}</b></h3>          <h4>{{ trialSuggestText2 }}</h4>        </div>        <div class="margin-block-elements">          <h3><b>{{ trialSuggestHeader3 }}</b></h3>          <h4>{{ trialSuggestText3 }}</h4>        </div>        <div class="seperator-div margin-block-elements"></div>        <p class="start-trial-text">{{ trialTextBottom }}</p>      </div>    <% } %>    <% if (showManagePageLink) { %>      <div class="manage-docs-container">        <div class="seperator-div"></div>        <h2 style="margin-top:28px;">{{ manageDocsHeaderText }}</h2>        <a id="post-sign-manage-link" class="btn btn-primary btn-lg margin-block-elements" href="<% if(isEmbeddedAcrobatSend) { %>#<% }         else { %>{{ manageLinkUrl }}<% } %>" data-analytics-click="manage">{{ manageLinkText }}</a>      </div>      <div class="social-container">      </div>    <% } %>');a.postEsignFeedback=_.template('<div class="row feedback">       <div class="col-lg-3 col-md-4 col-sm-4 hidden-xs">         <div class="feedback-image pull-right"></div>       </div>       <div class="col-lg-9 col-md-8 col-sm-8 col-xs-12 message">         <h1 class="title"> {{ feedbackMessage }} </h1>         <h3 class="sub-text"><a class="link" href="{{ feedbackUrl }}" target="_blank"><b class="pointer">&gt;</b>{{ feedbackLinkText }}</a></h3>       </div>     </div>');a.postEsignSocial=_.template('<div>      <div class="seperator-div"></div>      <div class="margin-block-elements">        <h2> {{ feedbackMessage }} </h2>        <h3>{{ socialDescription }}</h3>      <div class="margin-btn margin-block-elements">      <% if (facebookEnabled) { %>      <div id="facebook-preview" class="social-button">{{facebookScript}}</div>      <% } %>      <% if (linkedInEnabled) { %>      <div id="linkedin-preview" class="social-button">{{linkedInScript}}</div>{{linkedInScript2}}      <% } %>      <% if (twitterEnabled) { %>      <div id="twitter-preview" class="social-button">        <a href="https://twitter.com/share" class="twitter-share-button" data-text="{{twitterDefaultTweet}}" data-url="{{% twitterUrl}}" data-via="{{twitterUserName}}" data-lang="en" {{twitterLayout}}>Tweet</a>      </div>      <% } %>      </div>      </div>      </div>');a.postDelegate=a.postReject=_.template('<div class="postsign-header-container">        <h1 class="title"> {{ heading }} </h1>       </div>       <div class="postsign-descr-message-container">        <h3 class="sub-text"> {{ message }} </h3>        </div>');a.postReportAbuseView=_.template('<div class="postReportAbuse-message">      <div class="postReportAbuse-title ">        <img src="{{ img }}" alt="{{ heading }}" class="usd-image"/>        <h1>{{ heading }}</h1></div>      <p>{{ message1 }}</p>      <p>{{ message2 }}</p>    </div>');App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={};a.signingPanelNameInput=_.template('<form class="form-inline" onsubmit="return false">      <div class="input-group signature-name-wrapper">        <input class="form-control signature-name" type="text" value="{{% value }}" placeholder="{{ defaultText }}" aria-label="{{ defaultText }}" maxlength="{{ maxLength }}"/>        <span role="button" tabindex="0" class="input-group-addon close clear-name" title="{{close_title}}" aria-label="{{close_title}}">&times;</span>      </div>    </form>');a.signingPanel=_.template('<div class="modal fade" tabindex="-1" role="dialog">      <div class="modal-dialog">      <div class="modal-content">        <div class="modal-header sign-panel-header">          <% if(is_phone) { %>            <div class="pull-left">{{ signerInputControls }}</div>          <% } %>          <ul role="tablist" class="signing-options <% if(is_phone) { %>pull-right<% } %>">            <% if ((allow_typed && allow_scribble) || (allow_typed && allow_image) || (allow_scribble && allow_image)) { %>              <% if (allow_typed) { %><li role="tab" tabindex="0" class="option type" data-original-title="{{ typeTooltip }}"><span class="icons type-signature"></span><p class="title">{{ typeText }}</p></li><% } %>              <% if (allow_scribble) { %><li role="tab" tabindex="0" class="option draw" data-original-title="{{ drawTooltip }}"><span class="icons draw-signature"></span><p class="title">{{ drawText }}</p></li><% } %>              <% if (allow_image) { %><li role="tab" tabindex="0" class="option image" data-original-title="{{ imageTooltip }}"><span class="icons image-signature"></span><p class="title">{{ imageText }}</p></li><% } %>            <% }  else if (!is_phone) { %>              <% if (allow_typed && !allow_scribble && !allow_image) { %> <li role="tab" aria-selected="true" tabindex="0" class="option type left" data-original-title="{{ typeTooltip }}"><a class="icons type-signature"></a><h1 class="single-title">{{ typeOnlyText }}</h1></li> <% } %>              <% if (!allow_typed && allow_scribble && !allow_image) { %> <li role="tab" aria-selected="true" tabindex="0" class="option draw left" data-original-title="{{ drawTooltip }}"><a class="icons draw-signature"></a><h1 class="single-title">{{ drawOnlyText }}</h1></li> <% } %>              <% if (!allow_typed && !allow_scribble && allow_image) { %> <li role="tab" aria-selected="true" tabindex="0" class="option image left" data-original-title="{{ imageTooltip }}"><a class="icons image-signature"></a><h1 class="single-title">{{ imageOnlyText }}</h1></li> <% } %>           <% } %>          </ul>        </div>         <div role="tabpanel" class="modal-body sign-panel-body">          <div class="signature-panel-inner">            <% if(!is_phone) { %>                <div class="row">{{ signerInputControls }}</div>            <% } %>             <div class="signing-control clearfix">               <div class="signature-pad-wrapper"></div>             </div>          </div>        </div>        <div class="modal-footer signature-footer">           <div class="row">             <div class="save-signature-wrapper clearfix">                <label class="save-signature-label pull-left"><input type="checkbox" class="save-signature pull-left"/>{{ saveLabel }}</label>             </div>             <div class="footer-buttons">                <button class="btn btn-default cancel">{{ cancel }}</button>                <button class="btn btn-primary apply" data-analytics-click="sigpanel:apply">{{ apply }}</button>             </div>             <div class="clearfix"></div>           </div>        </div>       </div>    </div>  </div>');a.mobilePortraitSigningMsg=_.template('<div class="mobile-portrait">          <h3 class="title">{{message}}</h3>      </div>');a.signaturePad=_.template('<div class="signature-info"></div>     <% if (is_signature) { %>       <div class="scribble-top-guideline"></div>       <div class="scribble-middle-guideline"></div>     <% } %>     <div class="signature-pad-marketing-sticky">       <img src="{{ adobeSignImg }}" srcset="{{ adobeSignImg2x }} 2x" alt="" />     </div>     <div class="signature-pad"></div>     <a role="button" class="pull-right clear">{{ clearTxt }}</a>');a.drawSignature=_.template('<div class="draw-canvas pad default-draw-txt">{{% defaultTxt }}</div>');a.imageSignature=_.template('<div id="{{ imageCanvasId }}" class="image-canvas pad">        <button id="{{ selectImageId }}" class="btn btn-link select-image-btn">{{% defaultTxt }}</button>        <div class="uploaded-object-container image">          <div><img class="signature"></div>        </div>      </div>');a.typeSignature=_.template('<div class="type-canvas {{className}}">{{% defaultTxt }}</div>');App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={};a.phishingWarningText=_.template('<span class="tou-content hide-on-forced-review">{{ messageText }}</span>');a.termsText=_.template('<% if (messageText) { %>      <span class="tou-content hide-on-forced-review">{{ messageText }}</span>     <% } else { %>      <% if (!requireExplicitConsent && !forcedReview) { %>        <% if (requireAgreeToTerms) { %>          <p class="tou-content hide-on-forced-review checkbox">            <label class="text">              <input type="checkbox" class="tou-checkbox"/>              {{ agreeToTermsText }}            </label><% if (redirectDisclaimer) { %><br/>{{ redirectDisclaimer }}<% } %>          </p>        <% } else { %>          <span class="tou-content hide-on-forced-review">{{ agreeToTermsText }}<% if (redirectDisclaimer) { %><br/>{{ redirectDisclaimer }}<% } %></span>          <% if (isNotarySigner) { %><span class="tou-content hide-on-forced-review">{{ agreeToNotarization }}<% } %></span>        <% } %>      <% } else if (redirectDisclaimer) { %>        <span class="tou-content hide-on-forced-review">{{ redirectDisclaimer }}</span>      <% } else if (requireExplicitConsent || forcedReview) { %>        <span class="tou-content">{{ explicitConsentText }}</span>      <% } %>    <% } %>');a.termsContainerMobile=_.template('<div class="tou-container top clearfix">         <% if (showPhishingWarning && showTerms) { %>           <div class="hide-on-forced-review">             <div class="terms col-xl-7 col-lg-7 col-md-7 col-sm-12 col-12">               {{phishingWarningText}}             </div>             <div class="col-xl-5 col-lg-5 col-md-5 d-none d-sm-block"></div>             <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">               <hr class="tou-hr">             </div>           </div>         <% } %>         <div class="terms col-xl-7 col-lg-7 col-md-7 col-sm-12 col-12">           <section forcedReviewDocBeforeTerms></section>           <% if (showTerms) { %>             {{termsText}}           <% } else if (showPhishingWarning)  {%>             {{phishingWarningText}}           <% } %>         </div>         <div class="tou-btn col-xl-5 col-lg-5 col-md-5 d-none d-sm-block col-sm-12 col-12">            <% if (isNotarySigner) {%>            <div class="tou-btn-notary">            <% } else { %>            <div class="tou-btn-inner">            <% } %>             <% if (hasAlwaysVisibleFooter) {%>               <button class="btn btn-default click-to-decline" data-analytics-click="reject">{{ declineButtonTxt }}</button>             <% } else { %>               <button class="btn btn-default cancel-tou-btn" data-analytics-click="{{cancelAnalyticsToken}}">{{cancelButtonTxt}}</button>             <% } %>             <button class="btn btn-primary click-to-esign {{disabled}}" data-analytics-click="{{analyticsToken}}">{{ clickToEsign}}</button>             </div>         </div>         <div class="tou-btn d-block d-sm-none col-sm-12 col-12">            <% if (isNotarySigner) {%>            <div class="tou-btn-notary">            <% } else { %>            <div class="tou-btn-inner">            <% } %>             <% if (hasAlwaysVisibleFooter) {%>               <button class="btn btn-default click-to-decline" data-analytics-click="reject">{{ declineButtonTxt }}</button>             <% } else { %>               <button class="btn btn-default cancel-tou-btn" data-analytics-click="{{cancelAnalyticsToken}}">{{cancelButtonTxt}}</button>             <% } %>             <button class="btn btn-primary click-to-esign {{disabled}}" data-analytics-click="{{analyticsToken}}">{{ clickToEsign }}</button>           </div>         </div>       </div>');a.termsContainerDesktop=_.template('<div class="tou-container bottom clearfix">      <% if (showPhishingWarning && showTerms) { %>        <div class="hide-on-forced-review">          <div class="terms col-xl-9 col-lg-9 col-md-9 col-sm-8 col-8">            {{phishingWarningText}}          </div>          <div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-4"></div>          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">            <hr class="tou-hr">          </div>        </div>      <% } %>      <% if (hasAlwaysVisibleFooter) {%>      <div class="terms col-xl-8 col-lg-8 col-md-8 col-sm-6 col-6">      <% } else { %>      <div class="terms col-xl-9 col-lg-9 col-md-9 col-sm-8 col-8">      <% } %>        <section forcedReviewDocBeforeTerms></section>        <% if (showTerms) { %>           {{termsText}}        <% } else if (showPhishingWarning)  {%>           {{phishingWarningText}}        <% } %>      </div>      <% if (hasAlwaysVisibleFooter) {%>      <div class="tou-btn col-xl-4 col-lg-4 col-md-4 col-sm-6 col-6">          <% if (isNotarySigner) {%>          <div class="tou-btn-notary">          <% } else { %>          <div class="tou-btn-inner">          <% } %>          <button class="btn btn-decline click-to-decline" data-analytics-click="reject">{{ declineButtonTxt }}</button>        </div>      <% } else { %>      <div class="tou-btn col-xl-3 col-lg-3 col-md-3 col-sm-4 col-4">      <% } %>          <% if (isNotarySigner) {%>          <div class="tou-btn-notary">          <% } else { %>          <div class="tou-btn-inner">          <% } %>                    <% if (esignMarketingBrand === "ADOBE") { %>          <div class="esign-marketing-sticky">            <img src="{{ App.Env.root }}images/esignJS/AdobeSign_Tag.png" srcset="{{ App.Env.root }}images/esignJS/AdobeSign_Tag_2x.png 2x" alt="" />          </div>          <% } else if (esignMarketingBrand === "DEBRAND") { %>          <div class="esign-marketing-sticky esign-marketing-sticky-debrand">            <div class="esign-marketing-sticky-label" style="background: #ff0300 url({{ App.Env.root }}images/marketing-sticky-adobe-debrand-top.png) 0 0 repeat-x;">{{ labelFinish }}</div><img src="{{ App.Env.root }}images/marketing-sticky-adobe-debrand-bottom.png" />          </div>          <% } %>          <button class="btn btn-primary click-to-esign {{disabled}}" data-analytics-click="{{analyticsToken}}" {{isSendLimitExceeded ? "disabled=disabled" : ""}}>{{ clickToEsign }}</button>        </div>      </div>    </div>');a.forcedReviewDocBeforeTerms=_.template('<span class="fr-doc-before-terms">{{ forcedReviewDocBeforeTermsText }}</span>');App.Templates.Esign=_.extend(App.Templates.Esign||{},a)}());(function(){var a={};a.WrittenInformationalModal='<div role="list">      <div class="modal-info" role="listitem">        <span class="icon review-and-fill"></span>        <span class="content {{ reviewAndFillClass }}">{{reviewAndFillText}}</span>      </div>      <div class="icon next" role="presentation"></div>      <div class="modal-info" role="listitem">        <span class="icon download-and-sign"></span>        <span class="content">{{downloadAndSignText}}</span>      </div>      <div class="icon next" role="presentation"></div>      <div class="modal-info" role="listitem">        <span class="icon upload-and-submit"></span>        <span class="content">{{uploadAndSubmitText}}</span>      </div>    </div>';a.DownloadToSignModal='<div id="download-timeline"></div><p class="download-text">{{innerText}}</p><input class="download-url" type="hidden" aria-hidden="true" aria-disabled="true" value="{{downloadPDFUrl}}"/>';a.uploadSignedDocumentPage='<div class="row">      <div class="col-lg-4 offset-lg-0 col-md-4 offset-md-0 d-none d-md-block">          <img src="{{ uploadDocumentImg }}" alt="{{ uploadDocumentAltText }}" class="usd-image"/>      </div>      <div class="col-lg-8 offset-lg-0 col-md-8 offset-md-0 col-sm-11 offset-sm-1  upload-content">        <div class="upload-info" role="alert" aria-labelledby="upload-title" aria-describedby="upload-desc" aria-live="assertive">         <div class="usd-content">          <h1 id="upload-title">{{ uploadTitle }}</h1>         </div>          <div class="usd-sub-text" role="alert" aria-live="assertive">            <h3 id="upload-desc">{{ uploadDesc }}</h3>          </div>          <div class="usd-actions" id="upload-container">          <button class="btn btn-primary upload-and-submit" id="upload-button" aria-live="assertive" data-analytics-click="upload">{{ buttonText }}</button>        </div>        </div>        <div class="usd-alternative-actions">          <button type="button" class="usd-links download-link" data-analytics-click="download">{{ downloadAgainText }}</button>        </div>        <% if (allowDecline) { %>        <div class="vertical-bar"></div>        <div class="usd-alternative-actions">          <button type="button" class="usd-links reject-link" data-analytics-click="reject">{{ wontSignText }}</button>        </div>        <% } %>      </div>    </div>';a.SwitchToWrittenModal='<div class="switch-content">{{ innerText }}</div>';App.Templates.Esign=_.extend(App.Templates.Esign||{},a)})();(function(){var b,c=App.Api.Users;var a=Backbone.View.extend({panelDoneEvent:"esignView:signatureDone",panelCloseEvent:"esignView:signaturePanelClosed",appEvents:{"esignView:submissionFinished":"_onSubmissionFinished"},initialize:function(d){b=App.appView.model;this.model=this.getModel();this.signatureImageAvailable=b.get("signatureImageAvailable");this.mobileSignatureCaptureAvailable=b.get("mobileSignatureCaptureAvailable");this.mobileSignatureCaptureWorkflowTimeout=b.get("mobileSignatureCaptureWorkflowTimeout");this.mandatoryMobileCapture=b.get("mandatoryMobileSignatureCapture");this.esignMarketingBrand=b.get("esignMarketingBrand")==="ADOBE";this.isRequireRecipientNameEnabled=b.get("requireRecipientNameEnabled");this.cursiveFont=b.get("cursiveFontCSSClass");this._initName(d);this._intlTelInputPromise=this._initIntlTelInput()},render:function(){if(!this.signaturePanelView){this.signaturePanelView=jQuery(App.Templates.Esign.dcSignPanel());jQuery("body").append(this.signaturePanelView);this._updateClassNameforAnalytics(this._getSelectedTab());if(!this.mobileSignatureCaptureWorkflowTimeout){this.mobileSignatureCaptureWorkflowTimeout=5}this.panel=new DCSignaturePanel({el:this.signaturePanelView,intent:this.getIntent(),name:this.model.get("name"),imageTransform:_.bind(this._imageTransform,this),mobileFunction:_.bind(this._startMobileWorkflow,this),mobileTimeout:this.mobileSignatureCaptureWorkflowTimeout*60*1000,defaultTypeFont:this.cursiveFont,saveList:this._getSaveList(),typeList:this._getTypeList(),nameEditable:b.get("signerNameIsEditable")!=="false",nameRequired:true,adobeBranded:this.esignMarketingBrand,selected:this._getSelectedTab(),mobileOnly:this.mandatoryMobileCapture,minDrawPoints:b.get("minimumScribbleLength"),initIntlTelInput:this._intlTelInputPromise});this.signaturePanelView.modal({show:false,backdrop:"static",keyboard:false}).on("hidePrevented.bs.modal",function(d){d.preventDefault()})}return this},show:function(){this.signaturePanelView.modal("show");this._stopMobileWorkflow();this.panel.on("signature-panel:apply",_.bind(this._onSignaturePadApply,this));this.panel.on("signature-panel:cancel",_.bind(this._onSignaturePadCancel,this));this.panel.on("signature-panel:analytic",_.bind(this._onSignaturePadAnalytic,this));this.panel.show({name:this.model.get("name"),phoneNumber:App.appView.model.get("mobileCapturePhoneNumber")||App.appView.model.get("phoneNumber")||"",nameEditable:!this.getSignerNameLocked(),nameRequired:true,clearImageData:true,clearDrawData:true});if(this.model.get("data")){this._updatePanel({data:this.model.get("data")})}this.signaturePanelView.setAriaHiddenOnSiblings(true)},_updatePanel:function(d){if(!d){return}var e=this.panel.$el;if(!e.getIsVisible()){_.delay(_.bind(this._updatePanel,this,d),150);return}this.panel.update(d)},hide:function(d){this.signaturePanelView.modal("hide");this.signaturePanelView.setAriaHiddenOnSiblings(false);if(this.panel){this.panel.hide();this.panel.off("signature-panel:apply");this.panel.off("signature-panel:cancel");this.panel.off("signature-panel:analytic")}App.EventBus.trigger(this.panelCloseEvent,{applied:d})},getIntent:function(){return"signature"},getSignerNameLocked:function(){return b.get("signerNameLocked")||(b.get("signerNameIsEditable")==="false")},getModel:function(){return App.appView.getSignatureModel()},_initIntlTelInput:function(){if(this.mobileSignatureCaptureAvailable&&(this.mandatoryMobileCapture||!App.Env.mobileDetect.mobile())){return App.Utils.initIntlTelInput()}return jQuery.Deferred().resolve().promise()},_initName:function(e){var d=b.get("participantDefinedSigner")&&b.get("participantDefinedSigner").signature?b.get("participantDefinedSigner").signature:b.get("signerName")?b.get("signerName"):b.get("user").name;if(e&&e.signerName){this.model.set("name",e.signerName,{silent:true})}if(!this.model.get("name")){this.model.set("name",d,{silent:true})}if(this.isRequireRecipientNameEnabled){this.model.set("name",d,{silent:true})}},_getProfileModel:function(){return new c.Signatures.Profile({id:c.ME_ID})},_imageTransform:function(f){var d=jQuery.Deferred(),g=new FormData(),e=this.signatureImageAvailable?new App.Api.Gateway.BackgroundRemoval.SignatureImage():new App.Api.SignatureImage();g.append("image",f);e.save(null,{data:g,overrideServerErrors:true,error:function(j,h,i){i.errorHandled=true;d.reject(h.status)}}).then(function(h){d.resolve(h)},function(){d.reject()});return d.promise()},_startMobileWorkflow:function(d){var l=jQuery.Deferred(),j=App.Utils.getLocale().replace("-","_"),i,h,f,g;this._stopMobileWorkflow();this.panel.on("signature-panel:mobile:cancel",_.bind(function(){l.reject({type:"cancel"});this._stopMobileWorkflow()},this));i=this._getMobileCaptureTabs();this.panel.update({clearImageData:true,clearDrawData:true});var e=App.appView.model.get("pid");var k=App.appView.model.get("companyName");this.mobileWorkflow=App.Api.getMobileCaptureManager().start(this.getIntent(),{tabs:i,messageType:"sms",address:d.phoneNumber,signatureImageEndpoint:this.signatureImageAvailable?"ms":"mono",locale:j,securePid:e,companyName:k,forceSend:d.forceSend,workflowTimeout:this.mobileSignatureCaptureWorkflowTimeout*60});this.listenTo(this.mobileWorkflow,"captured",_.bind(function(m,n){h=JSON.parse(m.signatureData);g=(h.render&&h.render.vector)?"draw":"image";this.mscInfo={workflowId:this.mobileWorkflow.id,type:g};f=n.phoneNumber;if((f.indexOf("+"))!==0){f="+"+f}App.appView.model.set("mobileCapturePhoneNumber",f);l.resolve({data:h});this._updateClassNameforAnalytics(g);this.stopListening(this.mobileWorkflow)},this));this.listenTo(this.mobileWorkflow,"error",_.bind(function(m){var n="error";if(m.errCode==="INVALID_MOBILE_NUMBER"){n="InvalidMobileNumber"}l.reject({type:n,title:m.title,message:m.msg});this._stopMobileWorkflow()},this));return l.promise()},_getMobileCaptureTabs:function(){var d="";if(this.mandatoryMobileCapture){d+="di"}else{if(this._allowScribble()){d+="d"}if(this._allowImage()){d+="i"}}return d},_maskPhoneNumber:function(d){var e=d.match(/(.*)(\d\d\d\d)/);if(!e){return d}return e[1].replace(/\d/g,"X")+e[2]},_stopMobileWorkflow:function(){this.panel.off("signature-panel:mobile:cancel");delete this.mscInfo;if(this.mobileWorkflow){this.stopListening(this.mobileWorkflow);App.Api.getMobileCaptureManager().stop(this.mobileWorkflow);delete this.mobileWorkflow}},_stopActiveMobileWorkflow:function(){if(this.activeMobileWorkflow){this.stopListening(this.activeMobileWorkflow);App.Api.getMobileCaptureManager().stop(this.activeMobileWorkflow);delete this.activeMobileWorkflow}},_onSignaturePadApply:function(i){var h,f,e,g,k,j,d;if(!i||i===null){return}j=this.model.get("name")!==jQuery.trim(i.name);if(j){this.model.set("name",jQuery.trim(i.name))}e=this.model.get("type");g=this.model.get("data");f=i.type==="type"?"TYPED":(i.type==="draw"?"SCRIBBLE":"IMAGE");this.model.set("type",f);k=f!==e;if(i.type==="draw"){h=i.data;if(g||h){k=k||JSON.stringify(g)!==JSON.stringify(h)}}else{if(i.type==="image"){h={render:{image:{bytes:i.data}}};if(g&&g.render&&g.render.image){d=g.render.image.bytes}k=k||d!==i.data}}if(g&&g.mscInfo){if(k){this._stopActiveMobileWorkflow()}else{h.mscInfo=g.mscInfo}}if(h){if(this.mscInfo&&this.mscInfo.type===i.type){h.mscInfo=this.mscInfo;this.activeMobileWorkflow=this.mobileWorkflow;delete this.mscInfo;delete this.mobileWorkflow}this.model.set("data",h)}this._stopMobileWorkflow();if(i.save){this._saveSignature(i)}App.EventBus.trigger(this.panelDoneEvent,{success:true,changed:true,name:this.model.get("name"),nameChanged:j,viewId:this.callerId});this.hide(true)},_onSignaturePadCancel:function(){this._stopMobileWorkflow();App.EventBus.trigger(this.panelDoneEvent,{success:false,viewId:this.callerId});this.hide(false)},_onSignaturePadAnalytic:function(f){var e="sigPanel",d=false;switch(f.intent){case"initials":e="iniPanel";break;case"stamp":e="staPanel";break;default:e="sigPanel"}if(this.mscInfo&&f.action==="clear"&&(f.name===this.mscInfo.type)){this._stopMobileWorkflow()}if(f.action==="click"){if(f.name==="tab:image"||f.name==="tab:draw"||f.name==="tab:type"||f.name==="tab:mobile"){this._updateClassNameforAnalytics(f.name.split(":")[1])}}switch(f.action){case"change":if(f.name==="image"||f.name==="image:error"){d=true}break;case"click":if(f.name==="rotate"){d=true}else{if(f.name==="mobile:send"||f.name==="mobile:invalid"||f.name==="mobile:cancel"){d=true}else{if(f.name.indexOf("close")!==-1){d=true}else{if(f.name.indexOf("apply")!==-1){d=true}}}}break;case"receive":d=true;break}if(d){ScAnalytics.logEvent([e,f.name])}},_updateClassNameforAnalytics:function(d){this.signaturePanelView.removeClass("type draw image mobile").addClass(d)},_saveSignature:function(e){var d,f;if(e.type==="image"){f={fileContent:e.data,fileName:"signature.png",mimeType:"image/png"};d=new App.Api.TransientDocuments(f);d.save(null,{success:_.bind(this._handleTransientDocumentsSuccess,this),error:_.bind(this._handleSaveError,this)})}else{if(e.type==="draw"){d=this._getProfileModel();d.set("render",e.data.render);d.save(null,{success:_.bind(this._handleSaveSuccess,this),error:_.bind(this._handleSaveError,this)})}}},_handleTransientDocumentsSuccess:function(e,d){var f={render:{image:{assetId:JSON.parse(d).transientDocumentId}}};e=this._getProfileModel();e.set("render",f.render);e.save(null,{success:_.bind(this._handleSaveSuccess,this),error:_.bind(this._handleSaveError,this)})},_handleSaveSuccess:function(){},_handleSaveError:function(e,h,d){var g=(h&&h.responseJSON&&h.responseJSON.message)?h.responseJSON.message:"",f=App.Api.errorTmpl({userMsg:this.getSaveErrorMessage(),contactMsg:i18n.js.dwr_globalErrorContactMsg(),showMsg:g.length>0,message:"Error message: "+g});d.errorHandled=true;App.Utils.createModal({title:this.getSaveErrorTitle(),content:f,backdrop:"static"})},_getImageServerError:function(){return i18n.js.esign_signature_panel_image_server_error()},_getSaveList:function(){var d=[];if(this.mandatoryMobileCapture){return[]}if(b.get("canSaveType")){d.push("type")}if(b.get("canSaveScribble")){d.push("draw")}if(b.get("canSaveImage")){d.push("image")}return d},_getSelectedTab:function(){if(App.Env.mobileDetect.mobile()&&this._allowScribble()){return"draw"}if(this._allowTyped()){return"type"}if(this._allowScribble()){return"draw"}return""},_getTypeList:function(){var d=[];if(this._allowTyped()){d.push("type")}if(this._allowScribble()){d.push("draw")}if(this._allowImage()){d.push("image")}if((this._allowScribble()||this._allowImage())&&this.mobileSignatureCaptureAvailable){d.push("mobile")}return d},_allowTyped:function(){if(this.mandatoryMobileCapture){return false}return(!this._allowScribble()&&!this._allowImage())||/TYPED/g.test(b.get("signatureInputTypes"))},_allowScribble:function(){return this.mandatoryMobileCapture||/SCRIBBLE/g.test(b.get("signatureInputTypes"))},_allowImage:function(){return this.mandatoryMobileCapture||/IMAGE/g.test(b.get("signatureInputTypes"))},_onSubmissionFinished:function(){this._stopActiveMobileWorkflow()}});App.ns("Views.Esign").SignaturePanelView=a}());(function(){var a=Backbone.View.extend({postThumbHeight:180,tagName:"div",template:App.Templates.Esign.postSigningPage,closeTabBannerTemplate:App.Templates.Esign.closeTabBanner,className:_.constant("post-page clearfix"),smallThumbTmpl:_.template('<img class="small-thumb" style="display:none;"/>'),initialize:function(){jQuery("body").addClass("post-signing-page");jQuery(window).scrollTop(0)},getAgreement:function(){return this.model.get("agreement")},toTemplate:function(){var d={},e=this.getAgreement(),c=e.get("latestDocumentData").pages[0],b=0;if(c){b=c.height*(this.postThumbHeight/c.width)}d.height=Math.ceil(b)+"px";return d},render:function(){this._super();if(App.appView.timelineView){App.appView.timelineView.remove()}return this},postRender:function(){if(App.Env.queryParam("fromIframe")==="true"){this.$("section[closeTabBanner]").replaceWith(App.Templates.Esign.closeTabBanner({closeTab:i18n.js.esign_post_close_tab(),closeTabBtn:i18n.js.esign_post_close_tab_btn()}));this.$(".close-tab").on("click",_.bind(this.closeTab,this))}},closeTab:function(){window.close()},thumbsNotLoaded:function(b){App.Service.errorHandler(b.conversionErrorMsg,{},{close:false,closeBtn:false})},displayPlaceholderThumb:function(){this.$(".post-thumb").append(this.smallThumbTmpl())},completeThumbPolling:function(){this.stopListening(App.EventBus,"thumbsPoller:thumbsDone");var d=this.getAgreement(),b=this.$(".small-thumb"),c=d.get("latestDocumentData").pages[0];if(c){_.delay(_.bind(function(){b.attr("src",d.get("imageUrls")["small"][c.pageNumber]+"&u="+new Date().getTime()+"&sns=small&snp="+c.pageNumber).show();this.$(".spinner").hide()},this),500)}},remove:function(){jQuery("body").removeClass("post-signing-page");this._super()}});App.ns("Views.Esign").PostSign=a}());(function(){var c=App.ns("Views.Agreement").MainView;var b=App.Utils.KEY;var a=c.extend({is_esign:true,appEvents:App.Views.inherit("appEvents",{"esignView:processSuccessfulSingPassSigning":"processSuccessfulSingPassSigning","esignView:saveAgreement":"saveAgreement","esignView:uidFinishV2":"finishUidV2Agreement","esignView:secondOAuthCall":"remoteSignRESTCall","esignView:submitAgreement":"submitAgreement","writtenSignature:download":"submitAgreement","esignView:showDialogs":"showDialogs"}),events:{"click .click-to-accept-tou":"onTermsContinue","keydown #es-underlay":"onTabTOUBanner"},keyEvents:{"?":"toggleShortcuts"},initialize:function(){this.isNonSignerRole=this.model.isNonSignerRole();this.isPrefill=this.model.isPrefill();this.isAgentDelegate=this.model.isAgentDelegate();this.isAgreementModified=this.model.get("isModified");this.isNSDLView=false;this.autosaveCount=0;this.attachBeforeUnload();this._super()},render:function(h){this.$mainContent=$("#mainContent");this.$elemToScroll=App.Env.feature.isMobileBrowser?this.$mainContent:jQuery;var d=this.model.get("isWrittenSignPhase"),i=this.model.isAgreeToTermsRequiredDuringESign(),k=this.model.isExplicitConsentFlow(),g=this.model.isForcedReviewRequired(),j=i||k||g?this.model.get("isAgreeToTermsChecked"):true,f;if(d&&!h){var e=_.bind(this._super,this);App.Views.lazyloadify(function(){e(h)})}else{this._super(h)}this.addAltForPdfDownload();if(this.isAgreementModified){return this}if(this.model.showTermsOfUseGate()&&!d&&!(this.model.isExplicitConsentFlow()||this.model.isForcedReviewRequired())){jQuery("#es-underlay").addClass("open");jQuery("#es-underlay .tou-content").html(i18n.js2.esign_unregistered_user_accept_terms_of_use(this.model.get("termsOfServiceUrl"),this.model.get("privacyPolicyUrl")));if(this.model.get("noChrome")){jQuery("#es-underlay .embedded-container").html(i18n.js2.esign_powered_by_adobe_sign())}jQuery("#es-underlay .click-to-accept-tou").html(i18n.common.continue_next());new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".tou-content"})}setTimeout(function(){var m=new DigSigUI.Certificate({friendlyCertName:"Adobe DEMO"});var n=new DigSigUI.CloudSignData({bulkSignId:App.appView.model.get("bid"),cursiveFontMag:1,hasSignature:false,isCustomReasonAllowed:App.appView.model.get("isCustomSignatureReasonEnabled"),isSigningReasonAllowed:App.appView.model.get("allowDigitalSignatureReasonInput"),isSigningReasonRequired:App.appView.model.get("isSignatureReasonRequired"),signerName:"",signingReasons:App.appView.model.get("signatureReasons")});n.set("selectedCertificateModel",m);var l=new DigSigUI.StateTransitionModal({cloudSignData:n,views:{consent:DigSigUI.Consent,onlineProvider:DigSigUI.ProviderChoiceState,certificate:DigSigUI.CertificateChoiceState,noCertificate:DigSigUI.NoDigitalIdState,signature:DigSigUI.SignatureState}});l.render("consent")},1000);return this},showDialogs:function(){if(this.shouldShowForcedReviewDocModal()){this.showForcedReviewDocModal()}else{if(this.isAgentDelegate&&!this.model.eSignRequiresDocumentReview()){this.showDelegateModal()}else{this.showLastUIComponent()}}},onTermsContinue:function(){App.appView.logAnalytics(["adobe-sign-tou:"+App.appView.model.get("agreementId")]);jQuery("#es-underlay").removeClass("open");this.model.set("adobeTermsAccepted",true);App.EventBus.trigger("esignView:showDialogs")},onTabTOUBanner:function(h){var d=jQuery(h.target),f=false,g;if(h.which===b.TAB){g=jQuery("#es-underlay").find(":tabbable");if(h.shiftKey&&g.first().is(d)){g.last().focus();f=true}else{if(!h.shiftKey&&g.last().is(d)){g.first().focus();f=true}}}if(f){h.preventDefault()}},scrollToPage:function(d){var e=getAppViewHelper(this.options).getVisiblePageCount();if(d>0&&d<=e){this.$elemToScroll.scrollTo(jQuery("#document li.pdf-page-"+d),this.PAGE_SCROLL_TIME,{offset:-this.$header.getHeight()})}},showLastUIComponent:function(){this.showMessageToSignerFirstTime()},addAltForPdfDownload:function(){if(this.model.isPdfDownloadAllowed()){var e=this.$(".page-image");var d=e.attr("alt")+" "+i18n.js.pDFForms_download();e.attr({alt:d})}},shouldShowForcedReviewDocModal:function(){return this.model.eSignRequiresDocumentReview()&&App.appView.fieldsViewer.collection.getTodoCount()>0},getMessageToSignerTemplateData:function(){var f=this.model.get("agreement"),d=f.get("agreementMessage"),e=f.get("privateMessage");return{agreementMsgTitle:i18n.js.esign_message_from_sender_title(f.get("originatingUser").fullNameOrEmail),privateMsgTitle:i18n.js.esign_private_message_title(),showAgreementMsg:!!d,agreementMsg:d,showPrivateMsg:!!e,privateMsg:e,close:i18n.common.close(),showClose:true}},showWrittenInitialStepsModal:function(){var d=this;if(!this.initialWrittenInfoModal){this.initialWrittenInfoModal=new App.Views.Esign.WrittenInformationalModal({onHidden:function(){d.shouldShowForcedReviewDocModal()&&!d.model.get("optionalWrittenActive")?d.showForcedReviewDocModal():d.showLastUIComponent();d.$el.find(".timeline-outer").trigger("focus")}});this.initialWrittenInfoModal.render()}this.initialWrittenInfoModal.show()},showDownloadToSignModal:function(){if(!this.downloadToSignModal){this.downloadToSignModal=new App.Views.Esign.DownloadToSignModal({model:this.model,origTarget:jQuery("body").find(".btn-primary.click-to-esign")});this.downloadToSignModal.render()}this.downloadToSignModal.show()},showMessageToSignerFirstTime:function(){if(!this.model.isMessageToSignerAllowed()){return}App.EventBus.trigger("esignView:showMessageToSignerPopover")},showDelegateModal:function(){var d=this,e;this.delegateModalViewRelatedTarget=document.activeElement;if(this.delegateModalView){this.delegateModalView.show();return}e=App.Env.feature.isMobileBrowser?i18n.js.esign_delegate_review():i18n.js.esign_delegate_review_document();this.delegateModalView=new App.Views.DelegateModal({id:App.appView.model.get("signerAgreementCapabilityId"),role:App.appView.model.get("role"),signerAuthMethod:App.appView.model.get("signerAuthMethod"),success:_.bind(this.delegateSuccess,this),onConflictError:_.bind(this.onDelegateConflictError,this),closeBtn:this.isAgentDelegate?e:i18n.common.cancel(),closeBtnAnalytics:this.isAgentDelegate?"delegReview":"",onHidden:function(){var g=jQuery(d.delegateModalViewRelatedTarget),f;if(!g.length||g.is("body")){g=d.$("#contentSubHeader .agreement-name > .title")}f=g.not(":focusable").attr("tabindex",-1);g.trigger("focus");f.removeAttr("tabindex");d.delegateModalViewRelatedTarget=undefined}});this.delegateModalView.renderInto(this.$mainContent).show();this.delegateModalView.model.set("participantId",App.appView.model.get("participantId"));this.delegateModalView.model.set("participantSetId",App.appView.model.get("participantSetId"));this.delegateModalView.model.set("agreementId",App.appView.model.get("signerAgreementCapabilityId"));if(this.isAgentDelegate){this.delegateModalView.$el.one("hidden.bs.modal",function(){jQuery(this).find(".modal-footer button[data-dismiss=modal]").text(i18n.common.cancel());d.showLastUIComponent()})}},getLastRequiredField:function(){var e=".pdfFormField",d=".condition-hide,.condition-disable",h=":not(.link)",g=":not(.pdf_signature)",f=".required";el=jQuery(e+h+g+f).last();return el.length?el.first():null},getLastPage:function(){var d=App.appView.getVisiblePageCount();return d>0?jQuery("#document li.pdf-page-"+d):null},isDocumentConsideredReviewed:function(){var d=App.appView.getVisiblePageCount(),e,f,g;if(d==0){return true}e=this.getLastPage();f=this.getLastRequiredField();g=e&&f?f.parent().is(e):false;if(g){return true}return false},showForcedReviewDocModal:function(){var d=this;if(this.forcedReviewDocModalFTE){this.forcedReviewDocModalFTE.show();return}this.forcedReviewDocModalFTE=new App.Views.Esign.ForcedReviewDocModalFTE({onHidden:function(){d.showLastUIComponent();d.$(".header-logo").trigger("focus")}});this.forcedReviewDocModalFTE.renderInto(this.$mainContent).show()},onDelegateConflictError:function(){this.delegateModalView.hide();this.showAgreementReloadDialog()},delegateSuccess:function(d){var e;App.Utils.hideInterstitial();App.appView.postEsignCommonCleanUp();App.Service.postEvent({type:"DELEGATE",data:{}});e=new App.Views.Agreement.Layout({content:new App.Views.Esign.PostDelegateView({model:App.appView.model,delegateeEmail:d.get("email")})});App.appView.render(e)},toggleShortcuts:function(){App.Views.Esign.Shortcuts.toggle()},getLayout:function(){return new App.Views.Agreement.Layout(this.getLayoutViewsHash())},getLayoutViewsHash:function(){var f=this.model.get("isDigitalSignPhase")&&this.model.get("isReadyForDigitalSignature"),d=this.model.get("isDigitalSignatureSigningRemotely"),i=this.model.get("isAgreeToTermsChecked"),h=this.model.isExplicitConsentFlow()&&!i,g=this.model.isForcedReviewRequired()&&!i,e=!this.isPrefill&&!this.isAgentDelegate;if(this.isAgreementModified){return{content:new App.Views.Esign.ModifiedConsentView({model:this.model})}}if(g&&e){return{content:new App.Views.Esign.ForcedReviewTerms({model:this.model})}}if(h&&e){return{content:new App.Views.Esign.ExplicitConsent({model:this.model})}}if(this.model.get("reportAbuseOpenOnLoad")){return{header:App.Env.feature.isMobileBrowser?new App.Views.Esign.HeaderMobile({model:this.model}):new App.Views.Esign.Header({model:this.model}),content:null,footer:new App.Views.Esign.Footer({model:this.model})}}if(this.model.get("isWrittenSignPhase")){return{content:new App.Views.Esign.UploadSignedDocumentView({model:this.model})}}if(f&&d){return this.getEsignMainLayoutViewsHash()}if(f){return{content:new App.Views.Esign.DigSigDownloadView({model:this.model})}}return this.getEsignMainLayoutViewsHash()},getEsignMainLayoutViewsHash:function(){return{header:App.Env.feature.isMobileBrowser?new App.Views.Esign.HeaderMobile({model:this.model}):new App.Views.Esign.Header({model:this.model}),content:new App.Views.Esign.Content({model:this.model}),footer:new App.Views.Esign.Footer({model:this.model})}},getSignatureModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.signature)},getInitialsModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.initials)},getStampModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.stamp)},saveAgreement:function(d){this.autosaveCount+=1;if(d){d.dirty=true}this.model.get("agreement").getSaveService().save()},getConversionProjectId:function(){var d=App.appView.getSignatureModel();return d&&d.get("conversionProjectSecureId")},shutdownOAuth2Authentication:function(d){if(_.has(d,"pinAndOtpView")&&_.isObject(d.pinAndOtpView)){if(_.has(d.pinAndOtpView,"providerAuthenticator")&&_.isObject(d.pinAndOtpView.providerAuthenticator)){d.pinAndOtpView.providerAuthenticator.clearCookieKeyCheck();d.pinAndOtpView.providerAuthenticator.removeMessageListener();d.pinAndOtpView.providerAuthenticator.clearParentWindowSend();d.pinAndOtpView.providerAuthenticator.clearWindowCheck();d.pinAndOtpView.providerAuthenticator.clearLogInWindow();d.pinAndOtpView.clearProviderAuthenticatorObject()}}},saveOptionsForSingPass:function(d){this.singpassOptions=d},processSuccessfulSingPassSigning:function(){var d=this.singpassOptions;this.postRemoteSignSpinner(d);this.postEsignCommonCleanUp();if(d.pinAndOtpModalView){d.pinAndOtpModalView.hide()}if(!d.didFormSubmit){if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}App.EventBus.trigger("esignHeader:hideContentSubHeader");this.postEsignCommonCleanUp()}if(!this.redirectSelfSign()&&!this.redirect()){this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}this.onSignSuccess(this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN")},remoteSignRESTCall:function(e){var d;if(!_.has(e,"sourceDocumentId")){e.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId}if(!e.didFormSubmit){if(App.appView.model.get("isReadyForUIDSigning")){e.digSigUIDModalView.displayTheSpinner()}else{e.pinAndOtpModalView.displayTheSpinner()}}if(App.appView.model.get("isReadyForUIDSigning")){d=e.digSigUIDView.model;d.set("latestDocumentId",e.sourceDocumentId);d.set("signerName",App.appView.getSignatureModel().get("name"))}else{d={credentialAuthToken:e.credentialAuthToken,digSigOtp:e.otp,digSigPin:e.pin,signingDocumentToken:e.signingDocumentToken,sourceDocumentId:e.sourceDocumentId};if(_.isObject(e)&&_.has(e,"code")){d=_.extend(d,_.pick(e,"code"))}if(_.isObject(e)&&_.has(e,"grant_type")){d=_.extend(d,{grantType:e.grant_type})}if(_.isObject(e)&&_.has(e,"signingReference")){d=_.extend(d,{singpassSigningReference:e.signingReference})}}this.model.get("agreement").signAgreementRemotely(d,{errorHandled:e.errorHandled,overrideServerErrors:true,success:_.bind(function(g,f){if(_.has(f,"isSingPass")&&f.isSingPass){this.saveOptionsForSingPass(e);return}if(_.has(f,"errorURI")&&_.has(f,"credentialAuthInfo")){if(_.has(e,"alreadyRetrievedSAD")&&e.alreadyRetrievedSAD){console.error("Re-entrant SAD processing error.")}else{this.digSigFailureOccurred=true;e.pinAndOtpView.retrieveSADInfo(_.pick(f,"credentialAuthInfo","errorURI","signingDocumentToken"))}return}this.postRemoteSignSpinner(e);if(App.appView.model.get("uidSigningVersion")!=="1.0"&&e.initiate){App.Utils.hideInterstitial();e.digSigUIDView.sendXMLToIFrameV2(f)}else{this.postEsignCommonCleanUp();if(App.appView.model.get("isReadyForUIDSigning")){e.digSigUIDModalView.hide()}else{if(e.pinAndOtpModalView){e.pinAndOtpModalView.hide()}}if(!e.didFormSubmit){if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}App.EventBus.trigger("esignHeader:hideContentSubHeader");this.postEsignCommonCleanUp()}if(!this.redirectSelfSign()&&!this.redirect()){this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}this.onSignSuccess(this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN")}},this),error:_.bind(function(i,g){var j=g.status.toString(),h,l=!_.isUndefined(g.responseJSON.reason)?g.responseJSON.reason:!_.isUndefined(g.responseJSON.code)?g.responseJSON.code:undefined,f=j==="401"&&_.contains(["INVALID_JSON_WEB_TOKEN","INVALID_OR_EXPIRED_OAUTH_TOKEN"],l),k=j==="500"&&l==="DIGITAL_SIGNATURE_SIZE_ERROR";if(j==="401"&&l==="INVALID_ACCESS_TOKEN"){App.appView.sessionTimeout.sessionExpired()}else{if(j==="409"&&l==="AGREEMENT_SIGNED_BY_ANOTHER_SIGNER"){e.pinAndOtpModalView.hide();this.showAgreementReloadDialog(g.agreementModifiedMessage)}else{if(k){h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}e.isSignatureSizeError=true}else{if(App.appView.model.get("isReadyForUIDSigning")){if(j==="409"){if(e.digSigUIDModalView){e.digSigUIDModalView.closeUidSignWindow()}this.showAgreementReloadDialog()}else{e.digSigUIDView.sendErrorToIFrame(j,l)}}else{if(j==="400"&&l==="MISC_ERROR"){h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}if(e.pinAndOtpModalView){e.pinAndOtpModalView.setOKReload();e.pinAndOtpModalView.setCancelReload()}}else{h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}if(e.pinAndOtpModalView){e.pinAndOtpModalView.setExpiredAuthorization(f);e.pinAndOtpModalView.setFailedRemoteSign(f);e.pinAndOtpModalView.setCancelReload()}if(f&&e.pinAndOtpModalView){e.pinAndOtpModalView.setErrorURI(g.responseJSON.errorURI);e.pinAndOtpModalView.enablePrimaryButton()}}}}}}this.shutdownOAuth2Authentication(e);this.digSigFailureOccurred=true;App.Utils.hideInterstitial(true);if(_.contains(["400","404","500"],j)||(j==="503"&&e.pinAndOtpModalView.isNumberOfAttemptsExceeded())){if(e.pinAndOtpModalView){e.pinAndOtpModalView.disableNextOption(j);e.pinAndOtpModalView.removeTheSpinner()}}else{this.postRemoteSignSpinner(e)}jQuery("#header").addClass("showHeader");jQuery(".agree-terms").addClass("showHeader")},this),initiate:!!e.initiate,finish:!!e.finish})},finishUidV2Agreement:function(d){d.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(_.extend(d,{didFormSubmit:true}))},postRemoteSignSpinner:function(d){var e=!!d.isSignatureSizeError;if(App.appView.model.get("isReadyForUIDSigning")){d.digSigUIDModalView.removeTheSpinner()}else{if(d.pinAndOtpModalView){d.pinAndOtpModalView.removeTheSpinner();if(!e){d.pinAndOtpModalView.enableDefaultButton();d.pinAndOtpModalView.enablePrimaryButton()}}}},populateSignatureModel:function(){var e=App.appView.getSignatureModel(),i=e&&e.get("name"),d=App.appView.model.get("user"),h=d.name,g=d.email;if(this.model.shouldCollectSignerName()&&!i&&h){var f=App.appView.model.get("hideUserProfileInfo")?"":h;e.set("name",f,{silent:true})}e.set("email",g,{silent:true})},shouldShowSignerDetailsDialog:function(){var d=App.appView.getSignatureModel(),f=d&&d.get("name");if(!f){var e=App.appView.getStampModel();f=e&&e.get("name")}return(this.model.shouldCollectSignerName()&&!f)||this.shouldShowUnknownSignerDetailsDialog()},shouldShowUnknownSignerDetailsDialog:function(){var d=this.model.get("unknownSigners")&&this.model.get("unknownSigners").length>0;var e=this.model.get("widget");var f=this.model.get("unknownSignersPrefilled");return e&&d&&!f},populateSubmitHandler:function(){var d={success:_.bind(this.esignHandler,this)};return d},submitAgreement:App.Views.singly(function(l){var e=this.model.get("widget"),h=this.model.get("agreement"),f=this.getConversionProjectId(),i,k;l=l||{};if(e){l=_.extend({noGlobalReject:true},l)}this.populateSignatureModel();if(this.model.get("hasValidationError")){App.EventBus.trigger("esignView:errorState");return}if(this.model.eSignRequiresDocumentReview()&&App.appView.isDocumentReviewed===false){return}if(((this.model.isAgreeToTermsRequiredDuringESign()&&!this.model.get("isAgreeToTermsChecked"))&&!this.isPrefill)&&!this.model.get("isWrittenSignPhase")){return}if(this.shouldShowSignerDetailsDialog()){this.showSignerDetailsDialog();return}if(App.appView.model.get("isUIDSigning")){this.isNSDLView=true}i=this.populateSubmitHandler();this.goToPostSendPage=!e&&!h.get("previouslySigned")&&this.model.get("user").seriouslySecureId===h.get("originatingUser").seriouslySecureId;jQuery("#header").removeClass("showHeader");jQuery(".agree-terms").removeClass("showHeader");if(!(App.appView.model.get("isUIDSigning")&&App.appView.model.get("iframeUIDSigningEnabled"))){App.EventBus.trigger("esign:showLoading",{text:i18n.js.esign_signing_interstitial(),skipInterstitial:_.has(l,"pin")||_.has(l,"signingReference")})}var j=App.appView.fieldsViewer?App.appView.fieldsViewer.getInputData():"";var d=App.appView.model.get("unknownParticipantFieldValues");if(d){if(j===""){j=[]}Object.keys(d).forEach(function(m){j[m]=d[m]})}if(this.isPrefill){k=h.prefill({data:j},i)}else{if(!f&&(this.model.isWrittenRequired()||this.model.get("optionalWrittenActive"))){k=h.saveFormForWrittenDownload({data:j,agreedToTerms:this.model.get("isAgreeToTermsChecked")&&this.model.isAdobeTermsAccepted()},i)}else{k=h.sign({data:j,agreedToTerms:this.model.get("isAgreeToTermsChecked")&&this.model.isAdobeTermsAccepted(),conversionProjectSecureId:f},_.extend(i,_.extend(l,{didFormSubmit:true})))}}var g=function(){App.EventBus.trigger("esignView:submissionFinished")};return k.then(g,g)}),showSignerDetailsDialog:function(){if(!this.signerDetailsModalView){this.signerDetailsModalView=new App.Views.Esign.SignerDetailsPanelView({model:this.model});this.signerDetailsModalView.render()}this.signerDetailsModalView.show()},getRedirectUrl:function(){return this.model.get("postSignRedirectUrl")},getRedirectDelay:function(){return this.model.get("postSignRedirectDelay")},getRedirectWindow:function(){return window},redirect:function(){var f=this.getRedirectWindow(),e=this.getRedirectUrl(),d=Number(this.getRedirectDelay());if(!e){return false}if(d===0){_.delay(function(){f.location.href=e},1);return true}return false},getSelfSignRedirectUrl:function(){return this.model.get("selfSignCompletionUrl")},redirectSelfSign:function(){var d=this.getSelfSignRedirectUrl();if(!d){return false}App.Utils.loadPage(App.Utils.joinUrl(App.Env.root,d));return true},esignHandler:function(f,d,e){if(d.isAgreementSignedOrDelegated){App.Utils.hideInterstitial();this.showAgreementSignedOrDelegatedDialog();return}if(d.agreementModified){if(this.digSigFailureOccurred){if(e.pinAndOtpModalView){e.pinAndOtpModalView.setCancelReload()}if(e.digSigUIDModalView){e.digSigUIDModalView.setCancelReload()}e.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(e)}else{this.shutdownOAuth2Authentication(e);App.EventBus.trigger("esign:agreementModified");App.Utils.hideInterstitial();if(e.digSigUIDModalView){e.digSigUIDModalView.closeUidSignWindow()}this.showAgreementReloadDialog(d.agreementModifiedMessage)}return}else{if(d.paymentTransactionFailed){App.Utils.hideInterstitial();App.EventBus.trigger("paymentView:showPaymentFormWithErrorMessage",d.paymentTransactionFailedMessage);return}else{if(d.setSignerFullNameFailed){App.Utils.hideInterstitial();this.showAgreementSignerFullNameErrorReloadDialog(d.setSignerFullNameFailedMessage);return}}}this.esignSuccess(f,d,e)},showAgreementSignedOrDelegatedDialog:function(){var e=App.appView.model.get("agreementId"),d={title:i18n.js.compose_modify_error_recipient_has_signed_the_document_title(),content:i18n.js.compose_modify_error_recipient_has_signed_the_document(),backdrop:"static",close:false,primaryBtn:i18n.js.compose_see_signed_agreement_btn(),onClick:function(){App.Utils.loadPage(App.Utils.joinUrl(App.appView.model.get("remoteHostUrl")?App.appView.model.get("remoteHostUrl"):App.Env.root,"account/agreements?aid="+e))}};App.Utils.createModal(d)},showAgreementReloadDialog:function(g){var h=this.model.get("isDigitalSignatureSigningRemotely"),d,f,e;if(h){d=i18n.js.cloud_sign_agreement_modified_title();f=i18n.js.cloud_sign_agreement_modified_message()}else{if(this.model.get("widget")){d=i18n.js2.esign_widget_modified_title();f=(g?g:i18n.js2.esign_widget_modified_message())}else{d=i18n.js.esign_agreement_modified_title();f=(g?g:i18n.js.esign_agreement_modified_message())}}e={title:d,content:f,backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(e)},showAgreementSignerFullNameErrorReloadDialog:function(d){options={title:i18n.js.esign_agreement_signer_name_error_title(),content:(d?d:i18n.js.esign_agreement_signer_name_error_message()),backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(options)},esignSuccess:function(h,f,g){var i,e;if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}this.detachBeforeUnload();this.model.set("experience",f.experience);this.updateAgreementModel(f);jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}if(f.isWrittenSignPhase){this.model.set("isWrittenSignPhase",true);App.Service.postEvent({type:"WRITTEN_DOWNLOAD",data:{}});if(App.Env.feature.isMobileBrowser){window.open(this.model.get("agreement").get("downloadPDFUrl")).trigger("focus")}else{window.location.href=this.model.get("agreement").get("downloadPDFUrl")}}if(!this.model.get("isWrittenSignPhase")){App.EventBus.trigger("agreementView:removeLangSelector")}App.EventBus.trigger("esignHeader:hideContentSubHeader");if(!(this.model.get("isDigitalSignPhase")&&!this.model.get("isWrittenSignPhase")&&this.model.isDigSigRemoteSigning()&&this.model.get("isDigitalSignatureSigningRemotely"))){this.postEsignCommonCleanUp()}e=!this.model.get("isDigitalSignPhase")&&!f.isWrittenSignPhase&&(this.redirectSelfSign()||this.redirect());i=this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN";if(this.model.get("isDigitalSignPhase")&&!this.model.get("isWrittenSignPhase")){if(this.model.isDigSigRemoteSigning()&&this.model.get("isDigitalSignatureSigningRemotely")){g.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(g);return}else{this.postViewlayout=new App.Views.Agreement.Layout({content:new App.Views.Esign.DigSigDownloadView({model:this.model})})}}else{if(f.isWrittenSignPhase){App.appView.timelineView.setActiveStep(2);this.postViewlayout=new App.Views.Agreement.Layout({content:new App.Views.Esign.UploadSignedDocumentView({model:this.model})})}else{if(!e){if(this.goToPostSendPage&&this.model.get("agreement").get("agrStatus")===App.Models.Agreement.STATUS.WAITING_FOR_SIGNATURES){var d=App.Utils.joinUrl(App.Env.root,"account/postSend?aid="+this.model.get("agreementId"));App.Service.postEvent({type:i,data:{postSendUrl:d}});_.delay(function(){window.location.href=d},50);return}else{this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}}}}this.onSignSuccess(i)},onSignSuccess:function(d){App.Service.postEvent({type:d,data:{}});this.postViewlayout.render();this.$mainContent.addClass("post-esign")},postEsignCommonCleanUp:function(){App.EventBus.trigger("agreementHeader:unhideApplicationHeader");this.detachBeforeUnload();if(this.signerDetailsModalView){this.signerDetailsModalView.remove()}if(this.delegateModalView){this.delegateModalView.remove()}if(this.forcedReviewDocModalFTE){this.forcedReviewDocModalFTE.remove()}if(this.layout){this.layout.remove();this.layout=null}else{if(this.postViewlayout){this.postViewlayout.remove();this.postViewlayout=null}}},updateAgreementModel:function(d){var e=null,f=this.model.get("agreement");f.clear();if(d.updatedAgreement){e=d.updatedAgreement;delete d.updatedAgreement}else{if(d.agreement){e=d.agreement;delete d.agreement}}if(e!==null){d.postSignRedirectToParent=d.postSignRedirectDeframe&&this.model.get("hosted");this.model.set(d);this.model.set("agreement",new App.Models.Esign.Agreement(e,{parse:true}))}else{f.set(d)}},remove:function(){this.postEsignCommonCleanUp();this.detachBeforeUnload();this._super()},attachBeforeUnload:function(){jQuery(window).on(this.getUnloadEventName(),_.bind(this.handleBeforeUnload,this))},detachBeforeUnload:function(){jQuery(window).off(this.getUnloadEventName())},getUnloadEventName:function(){return App.Env.feature.iOS?"pagehide.esignJS":"beforeunload.esignJS"},handleBeforeUnload:function(){var d,e;if(this.isNSDLView){ScAnalytics.logEvent("quit:wUID_NSDLview");return"Are you sure you want to close the window without completing the Aadhaar Signing?"}ScAnalytics.logEvent(["quit",App.Views.Esign.MainView.getQuitStats()]);d=jQuery(".modal.in");if(d.length){e=_(d.toArray()).pluck("className").join(" ").replace(/(modal|fade| in|center|dc-signature-panel)/ig,"").trim().replace(/\s+/g,":");ScAnalytics.logEvent(["quitModal",e])}return void (0)},showUIDDigSigNotReachableModal:function(){var d={title:i18n.js.esign_digsig_unresponsive_error_modal_title(),content:i18n.js.esign_digsig_unresponsive_uid_provider(),backdrop:"static",close:false,keyboard:false};App.Utils.createModal(d)},showMiscellaneousErrorModal:function(){var d={title:i18n.js.esign_digsig_misc_error_modal_title(),content:i18n.js.esign_digsig_misc_error_modal_content(),backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(d)}});App.ns("Views.Esign").BulkSignMainView=a}());(function(){var b=App.ns("Views.Agreement.Content"),a=App.Utils.KEY;var c=b.extend({appEvents:App.Views.inherit("appEvents",{"agreementView:contentRendered":"onContentRendered","agreementView:removeCoachmark":"removeCoachmark","pageViewer:zoom":"refreshWaypoints","esignAgreementView:handleGestureRelease":"refreshWaypoints"}),attachAppViewers:function(){var e=App.Env.feature.isMobileBrowser,d={targetSelector:"body",smoothZoom:e};getAppViewHelper(this.options).pageViewer=new App.Views.Agreement.PageViewer({containerSelector:".agreementCnt",mainView:this.options.mainView,page:"esign"});getAppViewHelper(this.options).pinchZoomViewer=e?new App.Views.Agreement.SmoothPinchZoomViewer(d):new App.Views.Agreement.PinchZoomViewer(d)},addSideBar:function(){App.appView.sidebarView=new App.Views.Sidebar({model:new App.Models.Sidebar(),container:jQuery("#es-sidebar-container")});App.appView.sidebarView.render()},onContentRendered:function(){if(this.model.eSignRequiresDocumentReview()){this.setupWhenDocumentRequiresReview()}else{if(!App.appView.model.attributes.isSendLimitExceeded){this.addCoachmark()}}if(App.appView.model.attributes.isSendLimitExceeded){jQuery("#document").addClass("esign-disable-click")}},setupWhenDocumentRequiresReview:function(){var d=this,f=App.appView.getLastPage(),g,e;if(App.appView.fieldsViewer.collection.getTodoCount()===0){App.EventBus.trigger("esign:toggleTOU",{visible:true})}App.appView.isDocumentReviewed=false;if(App.appView.isDocumentConsideredReviewed()){this.triggerDocumentReviewed()}g=[{handler:h,offset:jQuery("#document").getOffset().top},{handler:h,offset:"bottom-in-view"}];if(App.Env.feature.isMobileBrowser){g.forEach(function(i){i.context=".agreementCnt"})}e=[];f&&g.forEach(function(i){e.push(f.waypoint(i))});function h(){if(!App.appView.isDocumentReviewed){d.triggerDocumentReviewed()}if(App.appView.getVisiblePageCount()>1){App.EventBus.trigger("agreementView:toggleRequiredFieldPopover")}App.Utils.destroyWaypoints(e);this.destroy()}},refreshWaypoints:function(){Waypoint.refreshAll()},triggerDocumentReviewed:function(){App.appView.isDocumentReviewed=true;App.EventBus.trigger("agreementView:documentReviewed")},isNoFieldsMode:function(){return this.model.isNonSignerRole()||this.model.get("isDigitalSignPhase")||this.model.isPrefill()||this.model.isWrittenRequired()||this.model.isAgentDelegate()},hasNoFields:function(){var e=App.appView.fieldsViewer,d=e.getFirstTabbableField();return !e.hasVisibleFields()||this.agreement.get("visiblePages").length===0||(e.hasDigitalSignatureField()&&!d)},addCoachmark:function(){App.Views.lazyloadify(function(){if(jQuery("html.wf-loading").length){App.EventBus.once("typekit.loaded",_.bind(this.initializeCoachmark,this))}else{this.initializeCoachmark()}},this)},initializeCoachmark:function(){var d=App.appView.fieldsViewer.getFirstTabbableField(),f=App.Views.Coachmark.isMobileMode(),e=this.hasNoFields();if(e&&!this.isNoFieldsMode()){return}if(f){App.appView.coachmark=new App.Views.CoachmarkMobile({container:jQuery("#header .agreement-req-info .subnav .coachmark-mobile-container"),firstField:d,noFieldsMode:e})}else{App.appView.coachmark=new App.Views.Coachmark({container:jQuery("#document"),firstField:d,noFieldsMode:e})}},postRender:function(){this._super();this.addSideBar();return this},removeCoachmark:function(){App.appView.coachmark&&App.appView.coachmark.remove()},remove:function(){this.removeCoachmark();App.appView.coachmark=null;if(!this.model.get("isWrittenSignPhase")){App.appView.fieldsViewer.remove();App.appView.fieldsViewer=null}this._super()}});App.ns("Views.Esign").Content=c}());(function(){var a=App.Views.FieldsViewer.extend({renderFields:App.Views.lazyloadify()});App.ns("Views.Esign").FieldsViewer=a})();(function(){App.Debug.printAll=_.partial(App.Debug.printAll,{agreement:"App.Debug.printAgreement()"})}());(function(){var a=Backbone.View.extend({facebookTemplate:'<iframe src="//www.facebook.com/plugins/like.php?href={{facebookUrlEncoded}}&amp;send=false&amp;layout={{facebookLayout}}&amp;width={{facebookWidth}}&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=61" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:{{facebookWidth}}px; height:61px" allowTransparency="true"></iframe>',linkedInTemplate:'<script type="IN/Share" data-url="{{linkedInUrl}}" {{linkedInLayout}}><\/script>',linkedInScript2:'<script src="//platform.linkedin.com/in.js" type="text/javascript"><\/script>',initialize:function(){this._super();this.bubblesEnabled=this.model.get("bubblesEnabled");this.googlePlusEnabled=this.model.get("googlePlusEnabled");this.twitterEnabled=this.model.get("twitterEnabled");if(this.twitterEnabled){a.initTwitter()}},getFacebookData:function(){var b={facebookEnabled:this.model.get("facebookEnabled")};if(!b.facebookEnabled){return b}b.facebookScript=_.template(this.facebookTemplate)({facebookUrlEncoded:this.model.get("facebookUrlEncoded"),facebookLayout:this.bubblesEnabled?"box_count":"button",facebookWidth:52});return b},getLinkedInData:function(){var b={linkedInEnabled:this.model.get("linkedInEnabled")};if(!b.linkedInEnabled){return b}b.linkedInScript=_.template(this.linkedInTemplate)({linkedInLayout:this.bubblesEnabled?'data-counter="top"':"",linkedInUrl:_.escape(this.model.get("linkedInUrl"))});b.linkedInScript2=this.linkedInScript2;return b},getTemplateData:function(){var b={};b.feedbackMessage=i18n.js.esign_feedback_message1();b.socialDescription=this.model.get("socialDescription");b.googlePlusEnabled=this.googlePlusEnabled;b.googlePlusLayout=this.bubblesEnabled?"":'data-annotation="none"';b.googlePlusUrl=this.model.get("googlePlusUrl");b.twitterEnabled=this.model.get("twitterEnabled");b.twitterUrl=this.model.get("twitterUrl");b.twitterDefaultTweet=this.model.get("twitterDefaultTweet");b.twitterUserName=this.model.get("twitterUserName");b.twitterLayout=this.bubblesEnabled?'data-count="vertical"':'data-count="none"';return _.extend(b,this.getFacebookData(),this.getLinkedInData())},render:function(){this._super();this.$el.html(App.Templates.Esign.postEsignSocial(this.getTemplateData()));return this}},{initTwitter:function(){!function(f,b,g){var e,c=f.getElementsByTagName(b)[0];if(!f.getElementById(g)){e=f.createElement(b);e.id=g;e.src="//platform.twitter.com/widgets.js";c.parentNode.insertBefore(e,c)}}(document,"script","twitter-wjs")},disableSocialScriptLoading:function(){a.initGooglePlus=_.constant(true);a.initTwitter=_.constant(true);a.prototype.facebookTemplate="";a.prototype.linkedInTemplate="";a.prototype.linkedInScript2=""}});App.ns("Views.Esign").SocialView=a}());(function(){var b="consent:TOU",a="consent:disclosure";var c=Backbone.View.extend({className:"explicit-consent-wrapper clearfix",events:{"click .agree-to-terms":"handleAccept","click #ec-rejectLink":"handleReject","click #ec-delegateLink":"handleDelegate","click .ec-checkbox":"toggleAcceptBtn"},initialize:function(){this.consumerDisclosureURL=this.model.get("consumerDisclosureURL");jQuery("body").addClass("explicit-consent-page");new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".ec-checkbox-label",isExplicitConsent:true})},render:function(){var d=jQuery("#header").getHeight();this.$el.html(App.Templates.Esign.explicitConsentPage(this.getExplicitConsentData())).css({"margin-top":d,"margin-bottom":jQuery("#echo-nav-footer").getHeight()});this.renderCheckboxSection();this.$(".tou-link").attr("data-analytics-click",b);this.$(".consumer-disclosure").attr("data-analytics-click",a);this.$agreeToAdobeTermsCheckbox=this.$(".ec-checkbox.adobe-terms");this.$agreeToConsumerDisclosureCheckbox=this.$(".ec-checkbox.consumer-disclosure");this.$acceptBtn=this.$(".agree-to-terms");this.$mainContent=jQuery("#mainContent");this.toggleAcceptBtn();return this},renderCheckboxSection:function(){return this.addView(this.getCheckboxView(),{replaceSection:"ec-checkbox-container"})},getCheckboxView:function(){return new App.Views.Esign.ExplicitConsentCheckbox({model:this.model})},getExplicitConsentData:function(){var e=this.model.get("role"),d={isForcedReview:false,explicitConsentFrom:i18n.common.pre_esign_from()+" "+this.model.get("agreement").get("originatingUser").fullNameOrEmail,explicitConsentDocument:this.model.get("agreement").get("name"),explicitConsentMessage:i18n.js2.esign_explicit_consent_message(),accept:i18n.common.pre_esign_review_documents(),or:i18n.common.esign_or(),delegate:this.model.isDelegateAllowed()?i18n.js.esign_somebody_else_title_rolebased(e):"",canDelegate:this.model.isDelegateAllowed(),delegateURL:this.model.get("delegateURL"),canReject:this.model.isRejectAllowed(),reject:e==="SIGNER"&&this.model.isWrittenRequired()?i18n.js.esign_reject_written_signature():i18n.js.esign_reject_rolebased(e),isEmbedded:this.model.get("noChrome"),embeddedText:i18n.js2.esign_powered_by_adobe_sign()};return d},toggleAcceptBtn:function(){var e=this.$agreeToAdobeTermsCheckbox.is(":checked"),f=this.$agreeToConsumerDisclosureCheckbox.is(":checked"),d;if(this.model.showTermsOfUseGate()){d=e&&f}else{d=f}this.$acceptBtn.toggleClass("disabled",!d).prop("disabled",!d)},handleAccept:function(){if(this.$acceptBtn.hasClass("disabled")){return}if(this.model.showTermsOfUseGate()){App.appView.logAnalytics(["adobe-sign-tou:"+this.model.get("agreementId")]);this.model.set("adobeTermsAccepted",true)}App.EventBus.trigger("esign:showLoading",{text:i18n.js.esign_signing_interstitial()});this.model.get("agreement").saveExplicitConsentEvent({success:_.bind(this.handleAcceptSuccess,this)})},handleReject:function(){if(!this.rejectModalView){this.rejectModalView=new App.Views.Esign.RejectPanelView({model:this.model,$relatedTarget:document.activeElement});this.$mainContent.append(this.rejectModalView.render().el)}this.rejectModalView.show()},handleDelegate:function(){App.appView.showDelegateModal()},handleAcceptSuccess:function(f,d,e){App.appView.model.set("isAgreeToTermsChecked",true);this.remove();App.appView.render()},remove:function(){jQuery("body").removeClass("explicit-consent-page");return this._super()}});App.ns("Views.Esign").ExplicitConsent=c}());(function(){var a=Backbone.View.extend({className:"ec-content",template:App.Templates.Esign.explicitConsentCheckbox,toTemplate:function(){var c=this.model.get("termsOfServiceUrl"),b=this.model.get("privacyPolicyUrl");return{showTermsOfUseGate:this.model.showTermsOfUseGate(),checkboxLabelForAdobeTerms:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use(c,b),checkboxLabelForAdobeTermsAria:i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use_aria_label(),checkboxLabelForConsumerDisclosure:this.getCheckboxLabelForConsumerDisclosure()["mainLabel"],checkboxLabelForConsumerDisclosureAria:this.getCheckboxLabelForConsumerDisclosure()["ariaLabel"]}},getCheckboxLabelForConsumerDisclosure:function(){var c=this.model.get("consumerDisclosureURL"),d=this.model.get("customerTermsURL"),e=this.model.get("customerConsumerDisclosureUrl"),b=this.model.get("agreeToTermsEntity");if(d&&e){return{mainLabel:i18n.js2.esign_explicit_consent_custom_terms(b,d,e),ariaLabel:i18n.js2.esign_explicit_consent_custom_terms_aria_label(b)}}else{if(d){return{mainLabel:i18n.js2.esign_explicit_consent_custom_terms(b,d,c),ariaLabel:i18n.js2.esign_explicit_consent_custom_terms_aria_label(b)}}else{if(e){return{mainLabel:i18n.js2.esign_explicit_consent_consumer_disclosure(e),ariaLabel:i18n.js2.esign_explicit_consent_consumer_disclosure_aria_label()}}else{return{mainLabel:i18n.js2.esign_explicit_consent_consumer_disclosure(c),ariaLabel:i18n.js2.esign_explicit_consent_consumer_disclosure_aria_label()}}}}}});App.ns("Views.Esign").ExplicitConsentCheckbox=a})();(function(){var b=App.ns("Views.Agreement.Footer"),d=700,c=300;var a=b.extend({appEvents:App.Views.inherit("appEvents",{"fields:requiredCount":"onRequiredCount","esignView:showFooter":"showFooter","fields:focus-first":"onFocusChanged","fields:inputFocus":"onFocusChanged","esign:toggleTOU":"onToggleTOU"}),initialize:function(){this._super();this.onlyHasOptionalFields=false;this.triggeredFromContentRendered=false;this.todoCount=0;this.hasAlwaysVisibleFooter=this.model.get("hasAlwaysVisibleFooter")},getToolbarOptions:function(){var e=this._super();if(this.model.isPdfDownloadAllowed()){e.controls.downloadBtn=new App.Views.Agreement.HUD.DownloadBtn({model:this.model})}return e},render:function(){this._super();this.renderContent();return this},renderContent:function(){var e=App.appView.layout,f=e&&e.options.header;if(!this.termsOfUseView){if(this.model.eSignRequiresDocumentReview()&&!App.appView.isDocumentReviewed){this.termsOfUseView=new App.Views.Esign.TermsOfUseNeedsDocReview({model:App.appView.model})}else{this.termsOfUseView=new App.Views.Esign.TermsOfUse({model:App.appView.model})}if(!App.Env.feature.isMobileBrowser){this.$el.append(this.termsOfUseView.render().el)}else{f&&f.$el.append(this.termsOfUseView.render().el)}}if(!App.Env.feature.isMobileBrowser&&this.model.isSaveEnabled()&&!this.lastSavedView){this.addLastSavedInfoView()}},onFocusChanged:function(e){if(this.onlyHasOptionalFields||(this.triggeredFromContentRendered&&this.todoCount===0)){_.delay(_.bind(this.showTermsView,this),d)}},onRequiredCount:function(i,g,f,h){this.onlyHasOptionalFields=f;this.triggeredFromContentRendered=h;this.todoCount=i;var e=i===0&&!f&&!(this.model.isWrittenRequired()?false:h);!App.Env.feature.isMobileBrowser&&this.onToggleTOU(e);if(g>0){App.EventBus.trigger("esignView:disableSaveInOptionMenu")}else{App.EventBus.trigger("esignView:enableSaveInOptionsMenu")}},onToggleTOU:function(e){if(this.hasAlwaysVisibleFooter){App.EventBus.trigger("esignView:toggleEsignBtn");return}e?_.delay(_.bind(this.showTermsView,this),d):_.delay(_.bind(this.hideTermsView,this),c)},showTermsView:function(){if(!App.appView.fieldsViewer.areTodosDone()){return}this.$esFooter.hide();App.EventBus.trigger("esignView:showTOU");App.EventBus.trigger("esignView:enableSaveInOptionsMenu")},hideTermsView:function(){if(App.appView.fieldsViewer.areTodosDone()){return}App.EventBus.trigger("esignView:hideTOU")},showFooter:function(){if(!App.Env.feature.isMobileBrowser){this.$esFooter.show()}},addLastSavedInfoView:function(){this.lastSavedView=new App.Views.Esign.LastSavedInfo({isIconView:false});this.$el.append(this.lastSavedView.render().el)}});App.ns("Views.Esign").Footer=a}());(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.forcedReviewDocModalContent,defaults:{classes:"forcedReviewDocumentModal",close:true},initialize:function(){this._super();this.options.title=i18n.js.esign_req_forced_review_doc_modal_title_1(this.getTodoCount())},toTemplate:function(){return{forcedReviewDocContent:i18n.js.esign_req_forced_review_doc_modal_content(this.getTodoCount())}},getTodoCount:function(){return App.appView.fieldsViewer.collection.getTodoCount()}});App.ns("Views.Esign").ForcedReviewDocModalFTE=a})();(function(){var a=App.Views.Esign.ExplicitConsent.extend({getExplicitConsentData:function(){var c=this._super(),b=this.model.get("customerTermsURL");c.isForcedReview=true;c.clickText=b?i18n.js2.esign_forced_review_click_text():i18n.js2.esign_forced_review_click_cd_text();return c},getCheckboxView:function(){return new App.Views.Esign.ForcedReviewTermsCheckbox({model:this.model})}});App.ns("Views.Esign").ForcedReviewTerms=a}());(function(){var a=App.Views.Esign.ExplicitConsentCheckbox.extend({toTemplate:function(){var b=this._super();b.checkboxLabelForConsumerDisclosure=this.getCheckboxLabelForConsumerDisclosure()["mainLabel"];b.checkboxLabelForConsumerDisclosureAria=this.getCheckboxLabelForConsumerDisclosure()["ariaLabel"];return b},getCheckboxLabelForConsumerDisclosure:function(){var c=this.model.get("customerTermsURL"),d=this.model.get("customerConsumerDisclosureUrl"),b=this.model.get("agreeToTermsEntity");if(c&&d){this.customTerms=true;this.customConsumerDisclosure=true;return{mainLabel:i18n.js2.esign_forced_review_custom_terms(b,"<section custom-tou-section></section>","<section cd-section></section>"),ariaLabel:i18n.js2.esign_explicit_consent_custom_terms_aria_label(b)}}else{if(c){this.customTerms=true;return{mainLabel:i18n.js2.esign_forced_review_custom_terms(b,"<section custom-tou-section></section>","<section cd-section></section>"),ariaLabel:i18n.js2.esign_explicit_consent_custom_terms_aria_label(b)}}else{if(d){this.customConsumerDisclosure=true;return{mainLabel:i18n.js2.esign_forced_review_consumer_disclosure("<section cd-section></section>"),ariaLabel:i18n.js2.esign_explicit_consent_consumer_disclosure_aria_label()}}else{return{mainLabel:i18n.js2.esign_forced_review_consumer_disclosure("<section cd-section></section>"),ariaLabel:i18n.js2.esign_explicit_consent_consumer_disclosure_aria_label()}}}}},render:function(){this._super();this.$("input.consumer-disclosure").attr("disabled",true);this.renderPills();return this},renderPills:function(){if(this.customTerms){this.checkedPillForCustomTOUView=new App.Views.CheckedPill({classes:"fr-tou-link",url:this.model.get("customerTermsURL"),label:i18n.common.forced_review_terms_terms_of_use(),eventProxy:this,onClick:this.onClickCustomTOULink});this.addView(this.checkedPillForCustomTOUView,{replaceSection:"custom-tou-section"})}this.checkedPillForCDView=new App.Views.CheckedPill({classes:"fr-cd-link",url:this.customConsumerDisclosure?this.model.get("customerConsumerDisclosureUrl"):this.model.get("consumerDisclosureURL"),label:i18n.common.forced_review_terms_consumer_disclosure(),eventProxy:this,onClick:this.onClickCDLink});this.addView(this.checkedPillForCDView,{replaceSection:"cd-section"})},onClickCustomTOULink:function(){this.checkedPillForCustomTOUView.setChecked();this.enableCheckboxIfAppropriate()},onClickCDLink:function(){this.checkedPillForCDView.setChecked();this.enableCheckboxIfAppropriate()},enableCheckboxIfAppropriate:function(){var b=this.checkedPillForCDView.isChecked();this.$("input.consumer-disclosure").attr("disabled",this.customTerms?!(this.checkedPillForCustomTOUView.isChecked()&&b):!b)}});App.ns("Views.Esign").ForcedReviewTermsCheckbox=a})();(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.forcedSaveCancelConfirmationModalContent,defaults:{title:i18n.js2.esign_req_forced_save_widget_modal_title(),closeBtn:i18n.js2.esign_req_forced_save_widget_go_back_button(),classes:"forcedSaveWidgetCancelModal",hasHeaderDivider:false,keyboard:true,close:false,backdrop:"static",primaryBtn:i18n.common.continue_next()},initialize:function(b){this._super();this.options.title="";this.parentContext=b.parentContext},onClose:function(){$(".modal-backdrop").css("visibility","hidden");this.hide();this.removeNextSignerDialog()},toModal:function(){return _.defaults(this.options,{content:this.toHTML(),onClick:_.bind(this.onClose,this),onClose:_.bind(this.onClick,this)})},toTemplate:function(){return{forcedSaveWidgetModalContent:i18n.js2.esign_req_forced_save_widget_modal_cancel_content(),forcedSaveWidgetCancelAlertContent:i18n.js2.esign_req_forced_save_widget_modal_cancel_alert_content()}},onClick:function(){this.hide();this.showParentWidgetModal()},render:function(){this._super();return this},onKeydown:function(b){this._super(b);if(App.Utils.KEY.isEsc(b)){$(".modal-backdrop").css("visibility","hidden")}},showParentWidgetModal:function(){this.parentContext&&this.parentContext.show()},removeNextSignerDialog:function(){if(this.parentContext.hasOwnProperty("detailsObject")){this.parentContext&&this.parentContext.remove();App.EventBus.trigger("esignView:removeNextSignerModal")}}});App.ns("Views.Esign").ForcedSaveCancelConfirmationModal=a})();(function(){var a="has-error is-invalid";var b;var c=App.Views.ModalView.extend({template:App.Templates.Esign.forcedSaveWidgetModalContent,defaults:{title:i18n.js2.esign_req_forced_save_widget_modal_content_title(),closeBtn:i18n.common.cancel(),onClick:false,onPrev:false,classes:"forcedSaveWidgetModal",hasHeaderDivider:false,keyboard:true,close:true,backdrop:"static",hasFooter:false,footer:{cancelButtonText:i18n.common.cancel(),nextButtonText:i18n.common.save()}},events:{"change .widgetSignerEmail":"onWidgetSignerEmailChange","change .widgetSignerConfirmEmail":"onWidgetSignerConfirmEmailChange","change .widgetSignerName":"onWidgetSignerNameChange","change .description":"onDescriptionChange","click .state-cancel":"onCancel","click .state-next":"onNext","click button.close":"onCloseButton"},appEvents:App.Views.inherit("appEvents",{"esignView:saveWidgetAgreement":"saveWidgetAgreementNew","esignView:saveFinished":"saveFinished","esignView:saveFinishedWithError":"saveErrorHandler","esignView:removeNextSignerModal":"removeNextSignerModal"}),initialize:function(){this._super();this.unknownSigners=this.model.get("unknownSigners");this.currentIndex=this.options.unknownSignerIndex;this.isUnknownSignersPresent=this.unknownSigners&&this.unknownSigners.length>0;this.formData={name:this.model.attributes.signerName||this.options.name,email:this.options.email,confirmEmail:"",description:this.options.description};this.options.title=i18n.js2.esign_req_forced_save_widget_modal_content_title()},updateModalData:function(d){this.formData=this.formData||{};this.formData.name=this.model.attributes.signerName||d.name||this.formData.name;this.formData.email=d.email||this.formData.email;this.formData.confirmEmail=d.email?"":this.formData.confirmEmail;this.updateFormWithFormData();this.removeConfirmEmailValFromViewIfRequired()},toTemplate:function(){return{forcedSaveWidgetModalTitle:i18n.js2.esign_req_forced_save_widget_modal_content_title(),forcedSaveWidgetModalContent:i18n.js2.esign_req_forced_save_widget_modal_content(),forcedSaveWidgetNameLabel:i18n.js2.esign_req_forced_save_widget_name_label(),forcedSaveWidgetEmailLabel:i18n.js2.esign_req_forced_save_widget_email_label(),forcedSaveWidgetConfirmEmailLabel:i18n.js2.esign_req_forced_save_widget_confirm_email_label(),forcedSaveWidgetDescriptionLabel:i18n.js2.esign_req_forced_save_widget_short_description_label(),forcedSaveWidgetDescriptionPlaceholder:i18n.js2.esign_req_forced_save_widget_short_description_placeholder(),forcedSaveWidgetEmailPlaceholder:i18n.js2.esign_req_forced_save_widget_email_placeholder(),cancelButtonText:i18n.common.cancel(),nextButtonText:i18n.common.save()}},onWidgetSignerEmailChange:function(){this.formData.email=this.$("#input-field-forcesave-email").val();if(App.Utils.isValidEmail(this.formData.email)){if(this.formData.confirmEmail&&this.formData.email===this.formData.confirmEmail){this.$widgetSignerConfirmEmail.removeClass(a)}this.$widgetSignerEmail.removeClass(a)}else{this.$widgetSignerEmail.addClass(a)}},onWidgetSignerConfirmEmailChange:function(){this.formData.confirmEmail=this.$("#input-field-forcesave-confirmEmail").val();if(App.Utils.isValidEmail(this.formData.confirmEmail)&&this.formData.email===this.formData.confirmEmail){this.$widgetSignerConfirmEmail.removeClass(a);this.$widgetSignerEmail.removeClass(a)}else{this.$widgetSignerConfirmEmail.addClass(a)}},onWidgetSignerNameChange:function(){this.formData.name=this.$("#input-field-forcesave-name").val();this.formData.name.trim()===""?this.$widgetSignerName.addClass(a):this.$widgetSignerName.removeClass(a)},onDescriptionChange:function(){this.formData.description=this.$("#input-field-description").val();this.formData.description.trim()===""?this.$widgetSignerDescription.addClass(a):this.$widgetSignerDescription.removeClass(a)},createFormFieldObject:function(g){var e=[];var j,f,d,i;for(var h in g){f=g[h];if(f.attributes.contentType==="DATA"&&f.attributes.value!=""){i={};if(f.attributes.inputType==="INLINE_IMAGE"){d={};d.inputType="INLINE_IMAGE";d.value=f.attributes.value;i.text=JSON.stringify(d)}else{i.text=f.attributes.value}e.push({name:h,value:i})}}if(e.length>0){j={};j.dataFields=e}return j},saveWidgetAgreementOld:function(){var g={success:(function(){App.Utils.hideInterstitial();this.showPostSuccessfulSaveModal()}).bind(this),error:(function(i){App.Utils.hideInterstitial();App.Service.errorHandler(i.responseJSON.message,{},{close:false,closeBtn:false})})};var d=App.Env.webclient.accessToken;var f=this.model.get("widgetId");var e={widgetSignerEmail:this.$("#input-field-forcesave-email").val(),widgetSignerName:this.$("#input-field-forcesave-name").val(),description:this.$("#input-field-description").val(),formFieldValues:this.createFormFieldObject(App.appView.fieldsViewer.collection.fieldCache),unknownParticipantInfo:this.model.get("unknownParticipantInfo")};this.$forcedSaveWidgetModal.hide();if(this.nextSignerModal){this.nextSignerModal.hide()}var h={dataType:"json",type:"POST",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},url:window.location.origin+"/api/rest/v6/widgets/"+f+"/instance",data:JSON.stringify(e),success:g.success,error:g.error};jQuery.ajax(h);App.Utils.showInterstitial({text:i18n.js2.esign_saving_details()})},saveWidgetAgreementNew:function(){var d=this.$("#input-field-forcesave-email").val();var f=this.$("#input-field-forcesave-name").val();var e=this.$("#input-field-description").val();App.appView.model.set("widgetSignerName",f);App.appView.model.set("widgetSignerEmail",d);App.appView.model.set("widgetSignerDescription",e);App.appView.model.set("isSaveWidget",true);App.EventBus.trigger("esignView:submitAgreement");this.$forcedSaveWidgetModal.hide();if(this.nextSignerModal){this.nextSignerModal.hide()}App.Utils.showInterstitial({text:"Saving your details"})},onHidden:function(){$("body").find(".btn-primary.click-to-esign").trigger("focus")},onNext:function(){if(this.areAllFieldsValid()){if(!this.isUnknownSignersPresent){this.saveWidgetAgreementNew();return true}else{this.$forcedSaveWidgetModal.hide();this.enableDisableAllFields(true);this.showNextSignerModal();return true}}else{b=false;this.$widgetSignerName.val().trim()?this.$widgetSignerName.removeClass(a):this.addFocusAndErrorClass(this.$widgetSignerName);this.formData.email.trim()&&App.Utils.isValidEmail(this.formData.email)&&this.formData.email===this.formData.confirmEmail?this.$widgetSignerEmail.removeClass(a):this.addFocusAndErrorClass(this.$widgetSignerEmail);this.formData.confirmEmail.trim()&&App.Utils.isValidEmail(this.formData.confirmEmail)&&this.formData.email===this.formData.confirmEmail?this.$widgetSignerConfirmEmail.removeClass(a):this.addFocusAndErrorClass(this.$widgetSignerConfirmEmail);this.$widgetSignerDescription.val().trim()?this.$widgetSignerDescription.removeClass(a):this.addFocusAndErrorClass(this.$widgetSignerDescription);this.removeConfirmEmailValFromViewIfRequired();return false}return true},removeConfirmEmailValFromViewIfRequired:function(){if(this.formData.confirmEmail.trim()===""){this.$widgetSignerConfirmEmail.val("")}},enableDisableAllFields:function(d){$(".widgetSignerName").prop("disabled",d);$(".widgetSignerEmail").prop("disabled",d);$(".widgetSignerConfirmEmail").prop("disabled",d);$(".description").prop("disabled",d)},areAllFieldsValid:function(){return this.formData.email&&this.formData.email.trim()&&this.formData.confirmEmail&&this.formData.confirmEmail.trim()&&this.$widgetSignerName.val().trim()&&App.Utils.isValidEmail(this.formData.email)&&App.Utils.isValidEmail(this.formData.confirmEmail)&&this.formData.email===this.formData.confirmEmail&&this.$widgetSignerDescription.val()&&this.$widgetSignerDescription.val().trim()},addFocusAndErrorClass:function(d){d.addClass(a);if(!b){d.focus();b=true}},onKeydown:function(d){this._super(d);if(App.Utils.KEY.isEsc(d)){this.onCancel()}},onClose:function(){this.$forcedSaveWidgetModal.hide();this.showForcedSaveCancelConfirmationModal();App.EventBus.trigger("esignView:addAutoSuggestion")},onCancel:function(){this.showForcedSaveCancelConfirmationModal();App.EventBus.trigger("esignView:addAutoSuggestion");return true},updateFormWithFormData:function(){if(this.formData.email){this.$("#input-field-forcesave-email").val(this.formData.email)}if(this.formData.confirmEmail){this.$("#input-field-forcesave-confirmEmail").val(this.formData.confirmEmail)}if(this.formData.name){this.$("#input-field-forcesave-name").val(this.formData.name)}if(this.formData.description){this.$("#input-field-description").val(this.formData.description)}},render:function(){if(App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:hideSidebar")}this._super();this.$primaryBtn=this.$(".state-next");this.formData=this.formData||{};this.updateFormWithFormData();this.$widgetSignerEmail=this.$("#input-field-forcesave-email");this.$widgetSignerName=this.$("#input-field-forcesave-name");this.$widgetSignerDescription=this.$("#input-field-description");this.$widgetSignerConfirmEmail=this.$("#input-field-forcesave-confirmEmail");this.$widgetSignerConfirmEmail.bind("cut copy paste",function(d){d.preventDefault()});this.$forcedSaveWidgetModal=$(".forcedSaveWidgetModal");this.enableDisableAllFields(false);if(this.model.attributes.signerName&&!this.model.attributes.signerNameIsEditable){this.$("#input-field-forcesave-name").attr("disabled","disabled")}if(this.isUnknownSignersPresent){this.$primaryBtn.html(i18n.common.next())}return this},saveFinished:function(){App.Utils.hideInterstitial();this.showPostSuccessfulSaveModal()},saveErrorHandler:function(d){App.Utils.hideInterstitial();if(d==="Incomplete reply from server"){this.hide()}App.Service.errorHandler(d,{},{close:false,closeBtn:false})},showPostSuccessfulSaveModal:function(){if(this.postSuccessfulSaveModal){this.postSuccessfulSaveModal.show();return}this.postSuccessfulSaveModal=new App.Views.Esign.PostSuccessfulSaveModal({model:this.model});this.postSuccessfulSaveModal.renderInto(this.$mainContent).show()},showNextSignerModal:function(){if(this.nextSignerModal){this.nextSignerModal.show();return}this.nextSignerModal=new App.Views.Esign.SignerDetailsPanelView({model:this.model,isSaveWidgetView:true,forcedSaveWidgetModal:this});this.nextSignerModal.renderInto(this.$mainContent).show()},removeNextSignerModal:function(){this.nextSignerModal=undefined},showExistingDialog:function(){this.show();this.enableDisableAllFields(false);if(this.model.attributes.signerName&&!this.model.attributes.signerNameIsEditable){this.$("#input-field-forcesave-name").attr("disabled","disabled")}this.$el.css("display","block");$(".modal-backdrop").css("visibility","inherit")},showForcedSaveCancelConfirmationModal:function(){if(this.forcedSaveCancelConfirmationModal){this.forcedSaveCancelConfirmationModal.show();return}this.forcedSaveCancelConfirmationModal=new App.Views.Esign.ForcedSaveCancelConfirmationModal({model:this.model,parentContext:this});this.forcedSaveCancelConfirmationModal.renderInto(this.$mainContent).show()}});App.ns("Views.Esign").ForcedSaveWidgetModal=c})();(function(){var b=App.ns("Views.Agreement.Header"),c=App.Utils.KEY,e=App.Models.Field.CONTENT_TYPE;var d={variant:"error",delay:15*60*1000};var a=b.extend({events:App.Views.inherit("events",{"click [data-toggle=offcanvas]":"toggleSideBar","shown.bs.dropdown .es-dropdown":"dropDownShown","hidden.bs.dropdown .es-dropdown":"dropDownHidden","keydown .dropdown-menu a":"dropDownKeyDown","click .es-dropdown":"toggleDropDown","click .es-dropdown .locale-select":function(f){f.stopPropagation()}}),appEvents:App.Views.inherit("appEvents",{"esignHeader:hideContentSubHeader":"hideContentSubHeader","agreementView:resize":"updateLayout","agreementView:contentRendered":"onContentRendered","sidebar:inactive":"onSidebarInactive","writtenSignature:switchToWritten":"writtenRatherSign","writtenSignature:switchToWritten":"writtenRatherSign","agreementView:pageRendered":"pageRendered","agreementView:showReject":"showReject","esignView:disableSaveInOptionMenu":"disableSaveInOptions","esignView:enableSaveInOptionsMenu":"enableSaveInOptions"}),pageRendered:function(f){if(!f||f.pageNo!==1){return}if(App.Env.feature.isMobileBrowser&&App.Models.DFL&&App.Models.DFL.Agreement&&App.appView.model.get("isQuickFillAutoOpen")){this.openLiquidModeView();ScAnalytics.logEvent(["mobilePreviewAutoOpen"])}},openLiquidModeView:function(){var f;if(!this.liquidModeView){f=new App.Models.DFL.Agreement({id:App.appView.model.get("agreementId")});App.appView.model.set("liquidModeModel",f);this.liquidModeView=new App.Views.Agreement.FormsModalViewer({model:f})}App.EventBus.trigger("agreementView:showMobileModalView")},render:function(){this._super();this.isDefaultLogo=App.Env.logoType==="default";this.isNonSignerRole=App.appView.model.isNonSignerRole();this.isPrefill=App.appView.model.isPrefill();if(App.appView.model.attributes.isAgreementPaid==false){this.renderHeaderLHSView()}this.renderHeaderRHSView();if(this.model.get("reportAbuseOpenOnLoad")){this.showReportAbuseModal(null,{hideAgreement:true});ScAnalytics.logEvent(["reportAbuse:email"])}this.$mainContent=jQuery("#mainContent");jQuery(document).on("click","#closeMenu",_.bind(this.hideSideBar,this));jQuery(document).on("click",".readAgreementLink",_.bind(this.showReadAgreement,this));jQuery(document).on("click",".reportAbuseLink",_.bind(this.showReportAbuseModal,this));jQuery(document).on("click",".rejectBtn",_.bind(this.showReject,this));jQuery(document).on("click",".delegateLink",_.bind(this.showDelegate,this));jQuery(document).on("click",".clearDocument",_.bind(this.showClearDialog,this));jQuery(document).on("click",".saveDocument",_.bind(this.showSaveModal,this));jQuery(document).on("click",".fax-in",_.bind(this.faxRatherSign,this));jQuery(document).on("click",".written-in",_.bind(this.showSwitchToWrittenModal,this));jQuery(document).on("click",".switchToEsign",_.bind(this.onClickSwitchToEsign,this));jQuery(document).on("click",".es-download",_.bind(this.downloadPDF,this));jQuery(document).on("click",".message-to-signer",_.bind(this.showMessageToSignerModal,this));jQuery(document).on("click","#legalNoticesLink",_.bind(this.showLegalNoticesModal,this));this.onHideDialog=_.bind(this.onHideDialog,this);return this},hideSideBar:function(){App.EventBus.trigger("esignView:hideSidebar")},getAgreementTitle:function(){var h=this.model.get("widget"),j=this.model.get("agreement"),g=j&&j.get("name"),f,i;f=h?i18n.js.widget_please_esign(App.appView.model.get("role"))+" ":"";i=h?f+g:g;return i},renderHeaderLHSView:function(){var f=App.appView.model.getTemplateData();this.$agreementLHSContainer=this.$(".agreement-container");this.$agreementLHSContainer.append(App.Templates.Esign.headerActionsSmall(f));if(App.appView.model.hasOptions()){this.$agreementLHSContainer.append(App.Templates.Esign.headerActions(f))}if(this.model.isSaveEnabled()&&!this.lastSavedView){this.renderLastSavedInfoView()}},renderLastSavedInfoView:function(){this.lastSavedView=new App.Views.Esign.LastSavedInfo({isIconView:true});this.addView(this.lastSavedView,this.$(".agreement-container"))},renderHeaderRHSView:function(){var f;if(this.model.eSignRequiresDocumentReview()){f=new App.Views.Esign.HeaderRHSViewNoNavigation({model:this.model})}else{f=new App.Views.Esign.HeaderRHSView({model:this.model})}this.addView(f,this.$(".agreement-req-info"))},faxRatherSign:function(){var f=this.model.get("agreement").get("unsignedPrintUrl");this.documentPrint=window.open(f,"document");this.documentPrint.focus()},showSwitchToWrittenModal:function(){App.EventBus.trigger("esignView:hideSidebar");if(!this.downloadToSignModal){this.switchToWrittenModal=new App.Views.Esign.SwitchToWrittenModal({model:this.model,origTarget:$("body").find(".written-in")});this.switchToWrittenModal.render()}this.switchToWrittenModal.show()},showMessageToSignerModal:function(){App.EventBus.trigger("esignView:hideSidebar");if(!this.messageToSignerModal){this.messageToSignerModal=new App.Views.Esign.SignerMessageModal({});this.messageToSignerModal.render()}this.messageToSignerModal.show()},showLegalNoticesModal:function(g){App.EventBus.trigger("esignView:hideSidebar");var f=this;var h=f.$(".dropdown-toggle");if(!f.aboutBoxModal){App.Common.init("signcommon").then(function(i){i.AboutBox.createInstance({show:true,triggerElement:h}).then(function(j){f.aboutBoxModal=j;return f.aboutBoxModal})})}else{this.aboutBoxModal.setState({show:true})}g.preventDefault()},writtenRatherSign:function(){var g=App.appView.model,f=App.appView.fieldsViewer.collection,h;if(App.appView.sidebarView){App.appView.sidebarView.hideSideBar()}g.set("optionalWrittenActive",true);_.each(f.models,function(i){h=i.get("contentType");if(h===App.Models.Field.CONTENT_TYPE.SIGNER_NAME){if(!(g.get("kbaTransactionId")===""?!(g.get("webIdentityId")===""):g.get("webIdentityId")==="")){i.set("required",true);i.todoType="required";if(i.get("value")!==""){i.set("todo",0)}else{i.set("todo",1)}i.set("readOnly",false)}}else{if(f.isInvalidFieldForWrittenSignatures(h)){i.set("hidden",true)}}});App.appView.timelineView=new App.Views.Esign.WrittenTimeline({});App.appView.timelineView.renderInto("#echo-nav-header #esignWritten");App.appView.showWrittenInitialStepsModal();$(".written-in").parent().hide();$(".rejectBtn").html(i18n.js.esign_reject_written_signature());$(".switchToEsign").parent().show();this.clickToEsignButtonText=$("button.click-to-esign").html();this.clickToEsignButtonAnalytics=$("button.click-to-esign").data("analytics-click");$("button.click-to-esign").html(i18n.js.esign_next()).attr("data-analytics-click","esign");this.handleOptionalWrittenCoachmark()},handleOptionalWrittenCoachmark:function(){App.appView.coachmark&&App.appView.coachmark.onFieldsResetValue()},onClickSwitchToEsign:function(h){var g=App.appView.model,f=App.appView.fieldsViewer.collection,i;if(App.appView.sidebarView){App.appView.sidebarView.hideSideBar()}g.set("optionalWrittenActive",false);_.each(f.models,function(j){i=j.get("contentType");if(i===App.Models.Field.CONTENT_TYPE.SIGNER_NAME){if(!(g.get("kbaTransactionId")===""?!(g.get("webIdentityId")===""):g.get("webIdentityId")==="")){j.todoType="";j.set("todo",0);j.set("required",false);j.set("readOnly",true)}}else{if(f.isInvalidFieldForWrittenSignatures(i)){j.set("hidden",false)}}});App.appView.timelineView.remove();$(".switchToEsign").parent().hide();$(".rejectBtn").html(i18n.js.esign_reject_rolebased(g.get("role")));$(".written-in").parent().show();$("button.click-to-esign").html(this.clickToEsignButtonText).attr("data-analytics-click",this.clickToEsignButtonAnalytics);App.appView.coachmark&&App.appView.coachmark.onFieldsResetValue()},downloadPDF:function(g){g.preventDefault();var f=this.model.get("agreement").get("openPDFUrl");window.open(f).focus()},hideContentSubHeader:function(){jQuery("#contentSubHeader").slideUp(200)},showReadAgreement:function(h){var g=App.appView.model,f=g.get("viewAgreementUrl");if(!f){return}h.target.href=f},abuseServiceCallback:function(h){if(h){App.Utils.showToastMessage(h,d);return}var g=App.appView;g.postEsignCommonCleanUp();var f=new App.Views.Agreement.Layout({content:new App.Views.Esign.PostReportAbuseView({model:this.model})});g.render(f)},webAnalyticsCallback:function(f){ScAnalytics.logEvent(["reportAbuse:"+f])},showReportAbuseModal:function(k,g){var j=App.Env.reportAbuseRootUrl;var i={domain:j,accessToken:App.Env.webclient.accessToken,agreementId:App.appView.model.get("agreementId"),originatorEmail:App.appView.model.get("agreement").get("originatingUser").email,locale:App.Env.locale,termsOfUseUrl:this.model.get("termsOfServiceUrl"),hideAgreement:g&&g.hideAgreement};var h={onAbuseService:_.bind(this.abuseServiceCallback,this),onAnalyticsEvent:_.bind(this.webAnalyticsCallback,this)};var f=loadjs.isDefined("reportAbuseUi");if(!f){loadjs(j+"/bundle.js","reportAbuseUi",{success:function(){App.Utils.reportAbuse(i,h)},error:function(l){ScAnalytics.logEvent(["reportAbuse:loadjsError"]);App.Utils.showToastMessage(i18n.js.dwr_globalErrorUserMsg(),d)},async:true,id:"reportAbuseUi"})}else{App.Utils.reportAbuse(i,h)}},showReject:function(f){f.preventDefault();App.EventBus.trigger("esignView:hideSidebar");if(!this.rejectModalView){this.rejectModalView=new App.Views.Esign.RejectPanelView({model:this.model});this.addView(this.rejectModalView,"body")}this.rejectModalView.show();jQuery(document).on("hidden.bs.modal",this.onHideDialog)},disableSaveInOptions:function(){this.$("#headerSaveDocumentBtn").addClass("disabled")},enableSaveInOptions:function(){this.$("#headerSaveDocumentBtn").removeClass("disabled")},showDelegate:function(f){f.preventDefault();App.EventBus.trigger("esignView:hideSidebar");App.appView.showDelegateModal();jQuery(document).on("hidden.bs.modal",this.onHideDialog)},showSaveModal:function(f){App.appView.showForcedSaveWidgetModal()},showClearDialog:function(h){var f,g;h.preventDefault();App.EventBus.trigger("esignView:hideSidebar");jQuery(document).on("hidden.bs.modal",this.onHideDialog);if(this.$clearDialog){this.$clearDialog.modal("show");return}f=this;g={title:i18n.js.esign_clear_document_confirm_title(),content:i18n.js.esign_clear_document_confirm_msg(),classes:"center",show:true,keyboard:true,close:false,closeBtn:i18n.js.esign_clear_document_cancel(),primaryBtn:i18n.js.esign_clear_document_clear(),onClick:function(){f.model.get("agreement").getSaveService().reset();App.EventBus.trigger("fields:resetValue")}};this.$clearDialog=App.Utils.createModal(g)},getSidebarToggle:function(){if(!this.$sidebarToggle){this.$sidebarToggle=jQuery(".es-sidebar-toggle")}return this.$sidebarToggle},toggleSideBar:function(g){var h=jQuery("#es-sidebar-offcanvas"),f=false;h.toggleClass("active");f=h.hasClass("active");f?App.EventBus.trigger("sidebar:active"):App.EventBus.trigger("sidebar:inactive");this.getSidebarToggle().attr({"aria-expanded":f,"aria-pressed":f})},onSidebarInactive:function(f){this.getSidebarToggle().attr({"aria-expanded":false,"aria-pressed":false});if(jQuery(document.activeElement).closest(".es-dropdown, .es-sidebar, #es-sidebar-container").length){this.setFocusToDropdownOrSidebarToggle()}},dropDownShown:function(f){this.$(".dropdown-toggle:focusable").attr("aria-expanded",true);this.$(".dropdown-menu a:focusable").first().focus(0)},dropDownHidden:function(f){this.$(".dropdown-toggle:focusable").attr("aria-expanded",false).trigger("focus")},dropDownKeyDown:function(f){if(f.keyCode===c.TAB){f.preventDefault()}},onHideDialog:function(f){if(jQuery(f.target).find(document.activeElement).length||document.activeElement===document.body||!jQuery(document.activeElement).is(":focusable")){this.setFocusToDropdownOrSidebarToggle()}jQuery(document).off("hidden.bs.modal",this.onHideDialog)},setFocusToDropdownOrSidebarToggle:function(){this.$(".dropdown-toggle").add(this.getSidebarToggle()).filter(":focusable").trigger("focus")},updateLayout:function(){this.$(".dropdown").removeClass("open");this.$(".dropdown-toggle").attr("aria-expanded",false)},onContentRendered:function(){if(App.appView.fieldsViewer.hasFields()===0){jQuery("#headerClearDocumentBtn").hide()}if(App.appView.model.isWrittenRequired()||App.appView.model.get("agreement").get("esign")){$(".switchToEsign").parent().hide()}if(App.appView.model.attributes.isSendLimitExceeded){var f='<div class="alert alert-danger  fade in  alert-popup esign-top-error-bar" role="alert" data-key="esign" data-itemkey="0">'+i18n.js.error_esign_widget_page_txn_limit_exceeded()+"</div>";jQuery("#contentSubHeader").append(f)}this.stopListening(App.EventBus,"agreementView:contentRendered")}});App.ns("Views.Esign").Header=a}());(function(){var a=App.Env.feature.isMobileBrowser?0:700;var b=Backbone.View.extend({className:"has-navigation",template:App.Templates.Esign.headerRHS,events:{"mouseenter .required-info":"showRequiredFieldsPopover","mouseleave .required-info":"hideRequiredFieldsPopover","focusin .required-info":"requiredFieldsPopoverFocusIn","focusout .required-info":"requiredFieldsPopoverFocusOut","click .esMessage-icon":"toggleMessageToSignerPopover","click .required-info":"nextRequiredField","keydown .required-info":"nextRequiredField"},appEvents:{"fields:requiredCount":"toggleRequiredFieldsCounter"},toTemplate:function(){var e=null,d,c="",f;if(this.showMessageToSigner){e=App.appView.getMessageToSignerTemplateData();c=e.agreementMsgRaw;f=(e.showPrivateMsg?e.privateMsgRaw:e.agreementMsgTitle)}d={canClearDocument:App.appView.fieldsViewer.hasFields(),showMessageToSigner:this.showMessageToSigner,agreementMsgLabel:c,isMobile:App.Env.feature.isMobileBrowser,agreementMsgTitle:f,finishBtnLabel:i18n.js.esign_finish(),finishAriaLabel:i18n("esign_click_to_finish_for_screen_reader")};return _.extend({},App.appView.model.getTemplateData(),d)},initialize:function(){this._super();this.showMessageToSigner=!App.Env.feature.isMobileBrowser&&App.appView.model.isMessageToSignerAllowed();this.isNonSignerRole=App.appView.model.isNonSignerRole();this.isPrefill=App.appView.model.isPrefill()},render:function(){this._super();this.renderRequiredFieldsPopover();this.renderMessageToSignerPopover();this.$mainContent=jQuery("#mainContent");if(App.Env.feature.isMobileBrowser){this.$el.off("mouseenter mouseleave")}return this},hideElement:function(c){if(c.length){c[0].style.removeProperty("display");c[0].style.setProperty("display","none","important")}return c},showElement:function(c){if(c.length){c[0].style.removeProperty("display")}return c},renderRequiredFieldsPopover:function(){this.$requiredInfo=this.$(".required-info");this.$completedInfo=this.$(".completed-info");this.$completedLabel=this.$(".completed-label");this.$completedIcon=this.$(".completed-icon");this.$requiredFieldIcon=this.$(".requiredFieldsIcon");this.requiredFieldsPopover=new App.Views.Esign.RequiredFieldsPopover({model:this.model});this.addView(this.requiredFieldsPopover,this.$requiredInfo);this.hideElement(this.$requiredInfo);this.hideElement(this.$completedIcon);this.$completedLabel.detach()},renderMessageToSignerPopover:function(){if(!this.showMessageToSigner){return}this.messageToSignerPopover=new App.Views.Esign.MessageToSignerPopover({model:this.model});this.addView(this.messageToSignerPopover,this.$(".esMessage-container"))},toggleRequiredFieldsCounter:function(g,f,e){var c=g===0,d=g-f;c?_.delay(_.bind(this.enableCompletedLabel,this),a):this.enableRequiredFieldsCounter(g);this.model.set("hasValidationError",!c);if(d>0){f>0?this.$requiredFieldIcon.attr("aria-label",i18n.js2.esign_required_icon_aria_label_required_invalid(d,f)):this.$requiredFieldIcon.attr("aria-label",i18n.js2.esign_required_icon_aria_label_required(d))}else{f>0?this.$requiredFieldIcon.attr("aria-label",i18n.js2.esign_required_icon_aria_label_invalid(f)):this.$requiredFieldIcon.removeAttr("aria-label")}},enableCompletedLabel:function(){if(this.model.get("hasValidationError")){return}this.hideElement(this.$requiredInfo);this.requiredFieldsPopover.hide();if(!this.isNonSignerRole&&!this.isPrefill){var c=this;this.hideElement(this.$completedInfo).fadeIn({start:function(){c.$completedInfo.prepend(c.$completedLabel);c.showElement(c.$completedIcon)}})}},enableRequiredFieldsCounter:function(c){this.hideElement(this.$completedIcon);this.$completedLabel.detach();this.$requiredFieldIcon.text(c);this.showElement(this.$requiredInfo)},showRequiredFieldsPopover:function(c){c.stopPropagation();this.requiredFieldsPopover.show();jQuery(c.currentTarget).find(":tabbable").attr("aria-describedby",this.requiredFieldsPopover.getAriaDescribedbyId())},hideRequiredFieldsPopover:function(c){c.stopPropagation();this.requiredFieldsPopover.hide();jQuery(c.currentTarget).find(":tabbable").removeAttr("aria-describedby")},requiredFieldsPopoverFocusIn:function(c){if(this._requiredFieldsPopoverTimeout){clearTimeout(this._requiredFieldsPopoverTimeout)}this.showRequiredFieldsPopover(c)},requiredFieldsPopoverFocusOut:function(d){var c=this;this._requiredFieldsPopoverTimeout=setTimeout(function(){c.hideRequiredFieldsPopover(d)},10)},toggleMessageToSignerPopover:function(c){c.stopPropagation();this.messageToSignerPopover.toggle()},nextRequiredField:function(c){if((c.type!=="click"&&c.type!=="keydown")||(c.type==="keydown"&&c.which!==32)){return}c.preventDefault();App.EventBus.trigger("fields:focus-next-todo")}});App.ns("Views.Esign").HeaderRHSView=b}());(function(){var a=App.Views.Esign.HeaderRHSView.extend({className:"no-navigation",events:{"click .required-info":"toggleRequiredFieldsPopover","click .esMessage-icon":"toggleMessageToSignerPopover"},appEvents:App.Views.inherit("appEvents",{"agreementView:toggleRequiredFieldPopover":"togglePopover"}),toTemplate:function(){return _.extend(this._super(),{requiredFieldLabel:i18n.js.esign_req_forced_review_doc_required_fields(),nextRequired:i18n.js.esign_req_forced_review_doc_required()})},render:function(){this._super();this.$(".required-info").addClass("show-on-mobile");return this},toggleRequiredFieldsPopover:function(b){b.preventDefault();b.stopPropagation();this.togglePopover()},togglePopover:function(){this.requiredFieldsPopover.toggle()}});App.ns("Views.Esign").HeaderRHSViewNoNavigation=a}());(function(){var b=App.ns("Views.Esign.Header");var a=b.extend({events:App.Views.inherit("events",{"click .es-dropdown":"toggleDropDown","click .finish-btn":"onClickFinish"}),template:App.Templates.Esign.mobileHeader,appEvents:App.Views.inherit("appEvents",{"agreementView:contentRendered":"onContentRendered","fields:requiredCount":"onRequiredCount","fields:resetValue":"onFieldsReset","termsOfUse:forceHide":"showFinish","agreementHeader:unhideApplicationHeader":"showApplicationHeader"}),applicationHeaderHidden:false,toTemplate:function(){return{agreementTitle:this.getAgreementTitle()}},toggleDropDown:function(c){c.stopPropagation();this.toggleSideBar(c)},render:function(){this._super();this.$el.off("mouseenter mouseleave");this.$applicationHeader=jQuery(".es-header");this.applicationHeaderHeight=this.$applicationHeader?this.$applicationHeader.getInnerHeight():0;jQuery(document).on("click","#closeMenu",_.bind(this.onAccessibleCloseMenu,this))},onContentRendered:function(){this._super();this.$logoHeader=jQuery("#header");this.$document=jQuery("#document");this.$navigation_header=jQuery(".agreement-header");this.$sidebarContainer=jQuery("#es-sidebar-container");this.$coachmarkContainer=jQuery(".coachmark-mobile-container");this.$applicationHeader&&this.listenTo(App.EventBus,"agreementHeader:mobileScroll",this.handleHeaderOnScroll);this.$finishBtn=this.$logoHeader.find(".finish-btn");this.$headerTitle=this.$logoHeader.find(".agreement-name");this.listenTo(App.EventBus,"fields:requiredCount",this.setHeaderText);if(App.appView.fieldsViewer.hasRequiredFields()){this.setHeaderText();this.showAgreementName()}this.navigationHeaderHeight=this.$navigation_header?this.$navigation_header.getInnerHeight():0},onRequiredCount:function(g,e,d,f){this.onlyHasOptionalFields=d;this.triggeredFromContentRendered=f;this.todoCount=g;var c=g===0&&!d&&!(this.model.isWrittenRequired()?false:f);if(!c){App.EventBus.trigger("esign:toggleTOU",false)}this.$finishBtn&&this.toggleNeededCompletionButton(c)},onFieldsReset:function(){this.toggleNeededCompletionButton(false)},showFinish:function(){this.toggleNeededCompletionButton(true)},toggleNeededCompletionButton:function(c){if(App.appView.model.get("hasAlwaysVisibleFooter")){App.EventBus.trigger("esign:toggleTOU",{visible:c})}else{this.toggleFinishVisibility(c)}},toggleFinishVisibility:function(c){this.$finishBtn.toggleClass("d-none",!c)},onClickFinish:function(){App.EventBus.trigger("esign:toggleTOU",{visible:true});this.toggleFinishVisibility(false)},setHeaderText:function(){var c=App.appView.fieldsViewer.collection.getTodoCount();if(c===0){this.$headerTitle.text(i18n.js.esign_required_fields_completed());this.$coachmarkContainer.css("display","none")}else{this.$headerTitle.text(c>1?i18n.js2.esign_review_required_fields(c):i18n.js2.esign_review_required_field_single());this.$coachmarkContainer.css("display","block")}},showAgreementName:function(){this.$headerTitle.tooltip({title:App.Utils.unescape(this.getAgreementTitle()),placement:"bottom",trigger:"focus",template:'<div class="tooltip tooltip-agreement-name" role="tooltip"><div class="tooltip-inner"></div></div>'});this.$headerTitle.trigger("focus")},handleHeaderOnScroll:function(d){this.$headerTitle.trigger("blur");var c=this.navigationHeaderHeight+this.applicationHeaderHeight;if(d==="down"){if(this.$document.getOffset().top>=this.navigationHeaderHeight){this.showApplicationHeader()}}else{if(!this.applicationHeaderHidden&&d==="up"){this.$logoHeader.css("top",-this.applicationHeaderHeight+"px");this.$document.css("margin-top",this.navigationHeaderHeight+"px");this.$sidebarContainer.css("margin-top",this.navigationHeaderHeight+"px");this.applicationHeaderHidden=true}}},showApplicationHeader:function(){var c=this.navigationHeaderHeight+this.applicationHeaderHeight;if(this.applicationHeaderHidden){this.$logoHeader.css("top",0);this.$document.css("margin-top",c+"px");this.$sidebarContainer.css("margin-top",c+"px");this.applicationHeaderHidden=false}},onAccessibleCloseMenu:function(){App.EventBus.trigger("esignView:hideSidebar",false);jQuery(".agreement-band-inner .dropdown-toggle.esign-options").trigger("focus")},handleOptionalWrittenCoachmark:function(){App.appView.coachmark&&App.appView.coachmark.onFieldsResetValue({optionalWritten:true})}});App.ns("Views.Esign").HeaderMobile=a}());(function(){var b=App.Api.Users;var a=App.ns("Views.Esign").SignaturePanelView;var c=a.extend({panelDoneEvent:"esignView:initialsDone",getIntent:function(){return"initials"},getModel:function(){return App.appView.getInitialsModel()},getSignerNameLocked:function(){return false},_initName:function(){var d=App.appView.model.get("user").initials;if(d!=null){d=d.replace(/&#39;/g,"'")}this.model.set("name",d,{silent:true})},_getProfileModel:function(){return new b.Initials.Profile({id:b.ME_ID})},_getImageServerError:function(){return i18n.js.esign_signature_panel_image_server_error_initials()}});App.ns("Views.Esign").InitialsPanelView=c}());(function(){var c="xsmallDevice",a=5000;var b=Backbone.View.extend({className:"lastsave",tooltipText:"",events:{"mouseenter .lastsave-info, .icons":"showTooltip","mouseleave .lastsave-info, .icons":"hideTooltip"},appEvents:{"lastSaved:savingMsg":"onSavingHandler","lastSaved:savedMsg":"onSavedHandler","esignView:showTOU":"hide","esignView:TOUState":"show","agreementView:screenType":"showSmallscreenIcon","lastSaved:showTooltip":"showTooltip","fields:resetValue":"onResetValueHandler"},initialize:function(){var d=jQuery(window).getWidth();this.screenType=App.Env.responsiveType(d)},render:function(){this.options.isIconView?this.renderIconView():this.renderDesktopView();this.$lastSaved=this.$(".lastsaved");this.wasAutosaved=App.appView.fieldsViewer.isAutosaved();if(this.wasAutosaved){this.showLoadedMessage()}return this},renderIconView:function(){this.$el.html(App.Templates.Esign.savingMsgSmallScreen());this.$lastsaveXsInfo=this.$(".lastsave-info-icon");this.$icon=this.$(".icons").tooltip(this.getTooltipOptions());if(App.Env.feature.isMobileBrowser){this.$icon.off("mouseenter mouseleave");this.$el.on("click",".icons",_.bind(this.toggleTooltip,this))}else{this.$el.addClass("visible-xs")}},renderDesktopView:function(){this.$el.addClass("d-none d-md-block");this.$el.html(App.Templates.Esign.savingMsg());this.$lastsaveInfo=this.$(".lastsave-info").tooltip(this.getTooltipOptions());this.$lastSaveCnt=this.$(".lastsave-container")},getTooltipOptions:function(){return{sanitize:false,html:true,animation:true,placement:this.options.isIconView?"bottom":"top",trigger:"manual",title:_.bind(this.getTooltipContent,this)}},showTooltip:function(d){if(this.lastSavedDate||(this.options.isIconView&&this.wasAutosaved)){this.options.isIconView?this.$icon.tooltip("show"):this.$lastsaveInfo.tooltip("show")}},hideTooltip:function(d){this.options.isIconView?this.$icon.tooltip("hide"):this.$lastsaveInfo.tooltip("hide")},toggleTooltip:function(){this.$icon.tooltip("toggle")},getTooltipContent:function(){if(!this.lastSavedDate){return this.tooltipText}else{return App.Templates.Esign.savePopupMsg({savedAt:i18n.js.esign_lastSave_at(),date:this.lastSavedDate})}},showLoadedMessage:function(){this.showMessage(i18n.js.esign_lastSave_loaded())},onResetValueHandler:function(){if(this.options.isIconView){this.$lastsaveXsInfo.fadeOut()}else{this.showMessage(i18n.js.esign_lastSave_cleared())}},showMessage:function(e,d){this.tooltipText=e;if(this.options.isIconView){this.$icon.removeClass("saving").addClass("saved");this.$lastsaveXsInfo.css("display","inline-block").fadeIn()}else{this.$lastsaveInfo.text(e);this.$lastsaveInfo.css("display","inline-block").fadeIn();!d&&this.$lastsaveInfo.delay(a).fadeOut()}},onSavingHandler:function(){if(this.options.isIconView){this.$icon.removeClass("saved").addClass("saving");this.$lastsaveXsInfo.css("display")==="none"&&this.$lastsaveXsInfo.fadeIn()}else{this.$lastsaveInfo.text(i18n.js.esign_lastSaving()).css("display")==="none"&&this.$lastsaveInfo.stop(true,true).fadeIn()}},onSavedHandler:function(){this.options.isIconView?this.$icon.removeClass("saving").addClass("saved"):this.$lastsaveInfo&&this.$lastsaveInfo.stop(true,true).text(i18n.js.esign_lastSaved()).show();this.setLastSavedDate()},setLastSavedDate:function(){this.lastSavedDate=App.Utils.formatTime(new Date())},showSmallscreenIcon:function(d){if(d===this.screenType){return}this.screenType=d;if(this.screenType===c&&this.lastSavedDate&&this.$lastsaveXsInfo){this.$lastsaveXsInfo.show()}},show:function(d){if(!this.options.isIconView){if(d.visible){this.$lastSaveCnt.addClass("touOpen").show()}else{this.$lastSaveCnt.removeClass("touOpen")}}},hide:function(){!this.options.isIconView&&this.$lastsaveInfo.hide()}});App.ns("Views.Esign").LastSavedInfo=b}());(function(){var b=App.ns("Views.Agreement").MainView;var a=App.Utils.KEY;var c=b.extend({is_esign:true,appEvents:App.Views.inherit("appEvents",{"esignView:processSuccessfulSingPassSigning":"processSuccessfulSingPassSigning","esignView:saveAgreement":"saveAgreement","esignView:uidFinishV2":"finishUidV2Agreement","esignView:secondOAuthCall":"remoteSignRESTCall","esignView:submitAgreement":"submitAgreement","writtenSignature:download":"submitAgreement","esignView:showDialogs":"showDialogs","esignView:formNameChanged":"onSignerNameChange","esignView:formEmailChanged":"onSignerEmailChange","esignView:addAutoSuggestion":"addAutoSuggestion"}),events:{"click .click-to-accept-tou":"onTermsContinue","keydown #es-underlay":"onTabTOUBanner"},keyEvents:{"?":"toggleShortcuts"},initialize:function(){this.isNonSignerRole=this.model.isNonSignerRole();this.isPrefill=this.model.isPrefill();this.isAgentDelegate=this.model.isAgentDelegate();this.isAgreementModified=this.model.get("isModified");this.isNSDLView=false;this.isDelegationV6Enabled=this.model.get("isDelegationV6Enabled");this.isRequireRecipientNameEnabled=this.model.get("requireRecipientNameEnabled");this.autosaveCount=0;this.forcedSaveWidgetModalData={name:"",email:""};this.attachBeforeUnload();this._super()},render:function(h){this.$mainContent=$("#mainContent");this.$elemToScroll=App.Env.feature.isMobileBrowser?this.$mainContent:jQuery;var d=this.model.get("isWrittenSignPhase"),i=this.model.isAgreeToTermsRequiredDuringESign(),k=this.model.isExplicitConsentFlow(),g=this.model.isForcedReviewRequired(),j=i||k||g?this.model.get("isAgreeToTermsChecked"):true,f;this.preRender();if(d&&!h){var e=_.bind(this._super,this);App.Views.lazyloadify(function(){e(h)})}else{this._super(h)}this.addAltForPdfDownload();if(this.isAgreementModified){return this}if(this.model.showTermsOfUseGate()&&!d&&!(this.model.isExplicitConsentFlow()||this.model.isForcedReviewRequired())&&!this.model.shownTermsOfUseforUnregisteredUser&&!this.model.isWebformEsignViewEnabled()){this.model.shownTermsOfUseforUnregisteredUser=true;jQuery("#es-underlay").addClass("open");jQuery("#es-underlay .tou-content").html(i18n.js2.esign_unregistered_user_accept_terms_of_use(this.model.get("termsOfServiceUrl"),this.model.get("privacyPolicyUrl")));if(this.model.get("noChrome")){jQuery("#es-underlay .embedded-container").html(i18n.js2.esign_powered_by_adobe_sign())}jQuery("#es-underlay .click-to-accept-tou").html(i18n.common.continue_next());new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".tou-content"})}if(!h&&(i||j)){if(!this.isPrefill&&(this.model.isWrittenRequired()||(d&&this.model.get("agreement").get("esign")))){if(!d){f=App.appView.fieldsViewer.hasFields();App.appView.timelineView=new App.Views.Esign.WrittenTimeline({timelineLabel:f?i18n.js.esign_written_steps_review_fill():i18n.js.esign_written_steps_review(),progressLabels:[f?i18n.js.esign_written_steps_review_fill():i18n.js.esign_written_steps_review(),i18n.js.esign_written_steps_download_sign(),i18n.js.esign_written_steps_upload_submit()]})}else{App.appView.timelineView=new App.Views.Esign.WrittenTimeline({initialStep:2})}App.appView.timelineView.renderInto("#echo-nav-header #esignWritten");if(!d){this.showWrittenInitialStepsModal();return this}}if(this.model.isOptionalWrittenFlowAllowed()){this.model.set("optionalWritten",true)}if(!this.model.showTermsOfUseGate()||this.model.isExplicitConsentFlow()||this.model.isForcedReviewRequired()){this.showDialogs()}}return this},showForcedSaveWidgetModal:function(){if(!this.forcedSaveWidgetModal){this.forcedSaveWidgetModal=new App.Views.Esign.ForcedSaveWidgetModal({model:this.model,name:this.forcedSaveWidgetModalData.name,email:this.forcedSaveWidgetModalData.email});this.forcedSaveWidgetModal.render();this.forcedSaveWidgetModal.show()}this.removeAutoSuggestion();this.forcedSaveWidgetModal.updateModalData(this.forcedSaveWidgetModalData);this.forcedSaveWidgetModal.showExistingDialog();$currentPageNo=this.getCurrentPageNo();this.scrollToPage($currentPageNo)},removeAutoSuggestion:function(){elements=document.getElementsByName("echosign_email");elements.forEach(function(d){d.setAttribute("autocomplete","nope")})},addAutoSuggestion:function(){elements=document.getElementsByName("echosign_email");elements.forEach(function(d){d.setAttribute("autocomplete","on")})},onSignerNameChange:function(e){if(!e||!e.nameChanged){return}var d=e.name||"";this.forcedSaveWidgetModalData.name=d},onSignerEmailChange:function(e){if(!e||!e.emailChanged){return}var d=e.email||"";this.forcedSaveWidgetModalData.email=d},showDialogs:function(){if(this.model.isSaveOnOpenOpted()){this.showForcedSaveWidgetModal()}if(this.shouldShowForcedReviewDocModal()){this.showForcedReviewDocModal()}else{if(this.isAgentDelegate&&!this.model.eSignRequiresDocumentReview()){this.showDelegateModal()}else{this.showLastUIComponent()}}},getCurrentPageNo:function(){return this.$(".hud-current-num").val()},onTermsContinue:function(){App.appView.logAnalytics(["adobe-sign-tou:"+App.appView.model.get("agreementId")]);jQuery("#es-underlay").removeClass("open");this.model.set("adobeTermsAccepted",true);App.EventBus.trigger("esignView:showDialogs")},onTabTOUBanner:function(h){var d=jQuery(h.target),f=false,g;if(h.which===a.TAB){g=jQuery("#es-underlay").find(":tabbable");if(h.shiftKey&&g.first().is(d)){g.last().focus();f=true}else{if(!h.shiftKey&&g.last().is(d)){g.first().focus();f=true}}}if(f){h.preventDefault()}},scrollToPage:function(d){var e=getAppViewHelper(this.options).getVisiblePageCount();if(d>0&&d<=e){this.$elemToScroll.scrollTo(jQuery("#document li.pdf-page-"+d),this.PAGE_SCROLL_TIME,{offset:-this.$header.getHeight()})}},showLastUIComponent:function(){this.showMessageToSignerFirstTime()},addAltForPdfDownload:function(){if(this.model.isPdfDownloadAllowed()){var e=this.$(".page-image");var d=e.attr("alt")+" "+i18n.js.pDFForms_download();e.attr({alt:d})}},shouldShowForcedReviewDocModal:function(){return this.model.eSignRequiresDocumentReview()&&App.appView.fieldsViewer.collection.getTodoCount()>0},preRender:function(){if(App.appView.fieldsViewer){return}var d=this.model.get("agreement").get("latestDocumentData");if(d){App.Utils.cleanESBracketProtectionForMultipleFields(d.fields);App.appView.fieldsViewer=new App.Views.Esign.FieldsViewer({documentData:d,viewFactory:App.Views.Field.getFactory("ViewField"),digSigRemoteSigning:this.model.isDigSigRemoteSigning()});App.appView.fieldsViewer.init()}if(this.model.get("isReflowButtonAvailable")){App.appView.reflowViewer=new App.Views.Esign.ReflowViewer();App.appView.reflowViewer.init()}},getMessageToSignerTemplateData:function(){var f=this.model.get("agreement"),d=f.get("agreementMessage"),e=f.get("privateMessage"),g=App.appView.model.get("clickableUrlInAgreementEmailEnabled");return{agreementMsgTitle:i18n.js.esign_message_from_sender_title(f.get("originatingUser").fullNameOrEmail),privateMsgTitle:i18n.js.esign_private_message_title(),agreementMsgRaw:d,privateMsgRaw:e,showPrivateMsg:!!e,showAgreementMsg:!!d,close:i18n.common.close(),showClose:true,agreementMsg:g?App.Utils.linkifyTextUrls(d):d,privateMsg:g?App.Utils.linkifyTextUrls(e):e}},showWrittenInitialStepsModal:function(){var d=this;if(!this.initialWrittenInfoModal){this.initialWrittenInfoModal=new App.Views.Esign.WrittenInformationalModal({onHidden:function(){d.shouldShowForcedReviewDocModal()&&!d.model.get("optionalWrittenActive")?d.showForcedReviewDocModal():d.showLastUIComponent();d.$el.find(".timeline-outer").trigger("focus")}});this.initialWrittenInfoModal.render()}this.initialWrittenInfoModal.show()},showDownloadToSignModal:function(){if(!this.downloadToSignModal){this.downloadToSignModal=new App.Views.Esign.DownloadToSignModal({model:this.model,origTarget:jQuery("body").find(".btn-primary.click-to-esign")});this.downloadToSignModal.render()}this.downloadToSignModal.show()},showMessageToSignerFirstTime:function(){if(!this.model.isMessageToSignerAllowed()){return}App.EventBus.trigger("esignView:showMessageToSignerPopover")},showDelegateModal:function(){var d=this,e;this.delegateModalViewRelatedTarget=document.activeElement;if(this.delegateModalView){this.delegateModalView.show();return}e=App.Env.feature.isMobileBrowser?i18n.js.esign_delegate_review():i18n.js.esign_delegate_review_document();if(this.isDelegationV6Enabled){this.delegateModalView=new App.Views.DelegateModalV6({id:App.appView.model.get("signerAgreementCapabilityId"),role:App.appView.model.get("role"),signerAuthMethod:App.appView.model.get("signerAuthMethod"),success:_.bind(this.delegateSuccess,this),onConflictError:_.bind(this.onDelegateConflictError,this),closeBtn:this.isAgentDelegate?e:i18n.common.cancel(),closeBtnAnalytics:this.isAgentDelegate?"delegReview":"",onHidden:function(){var g=jQuery(d.delegateModalViewRelatedTarget),f;if(!g.length||g.is("body")){g=d.$("#contentSubHeader .agreement-name > .title")}f=g.not(":focusable").attr("tabindex",-1);g.trigger("focus");f.removeAttr("tabindex");d.delegateModalViewRelatedTarget=undefined}})}else{this.delegateModalView=new App.Views.DelegateModal({id:App.appView.model.get("signerAgreementCapabilityId"),role:App.appView.model.get("role"),signerAuthMethod:App.appView.model.get("signerAuthMethod"),success:_.bind(this.delegateSuccess,this),onConflictError:_.bind(this.onDelegateConflictError,this),closeBtn:this.isAgentDelegate?e:i18n.common.cancel(),closeBtnAnalytics:this.isAgentDelegate?"delegReview":"",onHidden:function(){var g=jQuery(d.delegateModalViewRelatedTarget),f;if(!g.length||g.is("body")){g=d.$("#contentSubHeader .agreement-name > .title")}f=g.not(":focusable").attr("tabindex",-1);g.trigger("focus");f.removeAttr("tabindex");d.delegateModalViewRelatedTarget=undefined}})}this.delegateModalView.renderInto(this.$mainContent).show();this.delegateModalView.model.set("participantId",App.appView.model.get("participantId"));this.delegateModalView.model.set("participantSetId",App.appView.model.get("participantSetId"));this.delegateModalView.model.set("agreementId",App.appView.model.get("signerAgreementCapabilityId"));if(this.isAgentDelegate){this.delegateModalView.$el.one("hidden.bs.modal",function(){jQuery(this).find(".modal-footer button[data-dismiss=modal]").text(i18n.common.cancel());d.showLastUIComponent()})}},getLastRequiredField:function(){var e=".pdfFormField",d=".condition-hide,.condition-disable",h=":not(.link)",g=":not(.pdf_signature)",f=".required";el=jQuery(e+h+g+f).last();return el.length?el.first():null},getLastPage:function(){var d=App.appView.getVisiblePageCount();return d>0?jQuery("#document li.pdf-page-"+d):null},isDocumentConsideredReviewed:function(){var d=App.appView.getVisiblePageCount(),e,f,g;if(d==0){return true}e=this.getLastPage();f=this.getLastRequiredField();g=e&&f?f.parent().is(e):false;if(g){return true}return false},showForcedReviewDocModal:function(){var d=this;if(this.forcedReviewDocModalFTE){this.forcedReviewDocModalFTE.show();return}this.forcedReviewDocModalFTE=new App.Views.Esign.ForcedReviewDocModalFTE({onHidden:function(){d.showLastUIComponent();d.$(".header-logo").trigger("focus")}});this.forcedReviewDocModalFTE.renderInto(this.$mainContent).show()},onDelegateConflictError:function(){this.delegateModalView.hide();this.showAgreementReloadDialog()},delegateSuccess:function(d){var e;App.Utils.hideInterstitial();App.appView.postEsignCommonCleanUp();App.Service.postEvent({type:"DELEGATE",data:{}});e=new App.Views.Agreement.Layout({content:new App.Views.Esign.PostDelegateView({model:App.appView.model,delegateeEmail:this.isDelegationV6Enabled?d.get("memberInfos").first().get("email"):d.get("email")})});App.appView.render(e)},toggleShortcuts:function(){App.Views.Esign.Shortcuts.toggle()},getLayout:function(){return new App.Views.Agreement.Layout(this.getLayoutViewsHash())},getLayoutViewsHash:function(){var f=this.model.get("isDigitalSignPhase")&&this.model.get("isReadyForDigitalSignature"),d=this.model.get("isDigitalSignatureSigningRemotely"),i=this.model.get("isAgreeToTermsChecked"),h=this.model.isExplicitConsentFlow()&&!i,g=this.model.isForcedReviewRequired()&&!i,e=!this.isPrefill&&!this.isAgentDelegate;if(this.isAgreementModified){return{content:new App.Views.Esign.ModifiedConsentView({model:this.model})}}if(g&&e){return{content:new App.Views.Esign.ForcedReviewTerms({model:this.model})}}if(h&&e){return{content:new App.Views.Esign.ExplicitConsent({model:this.model})}}if(this.model.get("reportAbuseOpenOnLoad")){return{header:App.Env.feature.isMobileBrowser?new App.Views.Esign.HeaderMobile({model:this.model}):new App.Views.Esign.Header({model:this.model}),content:null,footer:new App.Views.Esign.Footer({model:this.model})}}if(this.model.get("isWrittenSignPhase")){return{content:new App.Views.Esign.UploadSignedDocumentView({model:this.model})}}if(f&&d){return this.getEsignMainLayoutViewsHash()}if(f){return{content:new App.Views.Esign.DigSigDownloadView({model:this.model})}}return this.getEsignMainLayoutViewsHash()},getEsignMainLayoutViewsHash:function(){return{header:App.Env.feature.isMobileBrowser?new App.Views.Esign.HeaderMobile({model:this.model}):new App.Views.Esign.Header({model:this.model}),content:new App.Views.Esign.Content({model:this.model}),footer:new App.Views.Esign.Footer({model:this.model})}},getSignatureModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.signature)},getInitialsModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.initials)},getStampModel:function(){return this.model.getSigModelInstance(App.Models.Signature.MODE.stamp)},saveAgreement:function(d){this.autosaveCount+=1;if(d){d.dirty=true}this.model.get("agreement").getSaveService().save()},getConversionProjectId:function(){var d=App.appView.getSignatureModel();return d&&d.get("conversionProjectSecureId")},shutdownOAuth2Authentication:function(d){if(_.has(d,"pinAndOtpView")&&_.isObject(d.pinAndOtpView)){if(_.has(d.pinAndOtpView,"providerAuthenticator")&&_.isObject(d.pinAndOtpView.providerAuthenticator)){d.pinAndOtpView.providerAuthenticator.clearCookieKeyCheck();d.pinAndOtpView.providerAuthenticator.removeMessageListener();d.pinAndOtpView.providerAuthenticator.clearParentWindowSend();d.pinAndOtpView.providerAuthenticator.clearWindowCheck();d.pinAndOtpView.providerAuthenticator.clearLogInWindow();d.pinAndOtpView.clearProviderAuthenticatorObject()}}},saveOptionsForSingPass:function(d){this.singpassOptions=d},processSuccessfulSingPassSigning:function(){var d=this.singpassOptions;this.postRemoteSignSpinner(d);this.postEsignCommonCleanUp();if(d.pinAndOtpModalView){d.pinAndOtpModalView.hide()}if(!d.didFormSubmit){if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}App.EventBus.trigger("esignHeader:hideContentSubHeader");this.postEsignCommonCleanUp()}if(!this.redirectSelfSign()&&!this.redirect()){this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}this.onSignSuccess(this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN")},remoteSignRESTCall:function(e){var d;if(!_.has(e,"sourceDocumentId")){e.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId}if(!e.didFormSubmit){if(App.appView.model.get("isReadyForUIDSigning")){e.digSigUIDModalView.displayTheSpinner()}else{e.pinAndOtpModalView.displayTheSpinner()}}if(App.appView.model.get("isReadyForUIDSigning")){d=e.digSigUIDView.model;d.set("latestDocumentId",e.sourceDocumentId);d.set("signerName",App.appView.getSignatureModel().get("name"))}else{d={credentialAuthToken:e.credentialAuthToken,digSigOtp:e.otp,digSigPin:e.pin,signingDocumentToken:e.signingDocumentToken,sourceDocumentId:e.sourceDocumentId};if(_.isObject(e)&&_.has(e,"code")){d=_.extend(d,_.pick(e,"code"))}if(_.isObject(e)&&_.has(e,"grant_type")){d=_.extend(d,{grantType:e.grant_type})}if(_.isObject(e)&&_.has(e,"signingReference")){d=_.extend(d,{singpassSigningReference:e.signingReference})}}this.model.get("agreement").signAgreementRemotely(d,{errorHandled:e.errorHandled,overrideServerErrors:true,success:_.bind(function(g,f){if(_.has(f,"isSingPass")&&f.isSingPass){this.saveOptionsForSingPass(e);return}if(_.has(f,"errorURI")&&_.has(f,"credentialAuthInfo")){if(_.has(e,"alreadyRetrievedSAD")&&e.alreadyRetrievedSAD){console.error("Re-entrant SAD processing error.")}else{this.digSigFailureOccurred=true;e.pinAndOtpView.retrieveSADInfo(_.pick(f,"credentialAuthInfo","errorURI","signingDocumentToken"))}return}this.postRemoteSignSpinner(e);if(App.appView.model.get("uidSigningVersion")!=="1.0"&&e.initiate){App.Utils.hideInterstitial();e.digSigUIDView.sendXMLToIFrameV2(f)}else{this.postEsignCommonCleanUp();if(App.appView.model.get("isReadyForUIDSigning")){e.digSigUIDModalView.hide()}else{if(e.pinAndOtpModalView){e.pinAndOtpModalView.hide()}}if(!e.didFormSubmit){if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}App.EventBus.trigger("esignHeader:hideContentSubHeader");this.postEsignCommonCleanUp()}if(!this.redirectSelfSign()&&!this.redirect()){this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}this.onSignSuccess(this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN")}},this),error:_.bind(function(i,g){var j=g.status.toString(),h,l=!_.isUndefined(g.responseJSON.reason)?g.responseJSON.reason:!_.isUndefined(g.responseJSON.code)?g.responseJSON.code:undefined,f=j==="401"&&_.contains(["INVALID_JSON_WEB_TOKEN","INVALID_OR_EXPIRED_OAUTH_TOKEN"],l),k=j==="500"&&l==="DIGITAL_SIGNATURE_SIZE_ERROR";if(j==="401"&&l==="INVALID_ACCESS_TOKEN"){App.appView.sessionTimeout.sessionExpired()}else{if(j==="409"&&l==="AGREEMENT_SIGNED_BY_ANOTHER_SIGNER"){e.pinAndOtpModalView.hide();this.showAgreementReloadDialog(g.agreementModifiedMessage)}else{if(k){h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}e.isSignatureSizeError=true}else{if(App.appView.model.get("isReadyForUIDSigning")){if(j==="409"){if(e.digSigUIDModalView){e.digSigUIDModalView.closeUidSignWindow()}this.showAgreementReloadDialog()}else{e.digSigUIDView.sendErrorToIFrame(j,l)}}else{if(j==="400"&&l==="MISC_ERROR"){h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}if(e.pinAndOtpModalView){e.pinAndOtpModalView.setOKReload();e.pinAndOtpModalView.setCancelReload()}}else{h=DigSigUI.DigSigGetError("remoteSign",g,null,null,e.pinAndOtpModalView?e.pinAndOtpModalView.supportLink:null);if(e.pinAndOtpView){e.pinAndOtpView.setErrorMessage(h)}if(e.pinAndOtpModalView){e.pinAndOtpModalView.setExpiredAuthorization(f);e.pinAndOtpModalView.setFailedRemoteSign(f);e.pinAndOtpModalView.setCancelReload()}if(f&&e.pinAndOtpModalView){e.pinAndOtpModalView.setErrorURI(g.responseJSON.errorURI);e.pinAndOtpModalView.enablePrimaryButton()}}}}}}this.shutdownOAuth2Authentication(e);this.digSigFailureOccurred=true;App.Utils.hideInterstitial(true);if(_.contains(["400","404","500"],j)||(j==="503"&&e.pinAndOtpModalView.isNumberOfAttemptsExceeded())){if(e.pinAndOtpModalView){e.pinAndOtpModalView.disableNextOption(j);e.pinAndOtpModalView.removeTheSpinner()}}else{this.postRemoteSignSpinner(e)}jQuery("#header").addClass("showHeader");jQuery(".agree-terms").addClass("showHeader")},this),initiate:!!e.initiate,finish:!!e.finish})},finishUidV2Agreement:function(d){d.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(_.extend(d,{didFormSubmit:true}))},postRemoteSignSpinner:function(d){var e=!!d.isSignatureSizeError;if(App.appView.model.get("isReadyForUIDSigning")){d.digSigUIDModalView.removeTheSpinner()}else{if(d.pinAndOtpModalView){d.pinAndOtpModalView.removeTheSpinner();if(!e){d.pinAndOtpModalView.enableDefaultButton();d.pinAndOtpModalView.enablePrimaryButton()}}}},populateSignatureModel:function(){var e=App.appView.getSignatureModel(),i=e&&e.get("name"),d=App.appView.model.get("user"),h=d.name,g=d.email;if(this.model.shouldCollectSignerName()&&!i&&this.isRequireRecipientNameEnabled){i=this.model.get("signerName");e.set("name",i,{silent:true})}if(this.model.shouldCollectSignerName()&&!i&&h){var f=App.appView.model.get("hideUserProfileInfo")?"":h;e.set("name",f,{silent:true})}e.set("email",g,{silent:true})},shouldShowSignerDetailsDialog:function(){var d=App.appView.getSignatureModel(),f=d&&d.get("name");if(!f){var e=App.appView.getStampModel();f=e&&e.get("name")}return(this.model.shouldCollectSignerName()&&!f)||this.shouldShowUnknownSignerDetailsDialog()},shouldShowUnknownSignerDetailsDialog:function(){var d=this.model.get("unknownSigners")&&this.model.get("unknownSigners").length>0;var e=this.model.get("widget");var f=this.model.get("unknownSignersPrefilled");return e&&d&&!f},populateSubmitHandler:function(){var d={success:_.bind(this.esignHandler,this)};return d},populateSaveHandler:function(){var d={success:_.bind(this.saveWidgetHandler,this),error:_.bind(this.saveWidgetHandler,this)};return d},submitAgreement:App.Views.singly(function(m){var e=this.model.get("widget"),i=this.model.get("agreement"),g=this.model.get("isSaveWidget"),f=this.getConversionProjectId(),j,l;m=m||{};if(e){m=_.extend({noGlobalReject:true},m)}if(g){if(((this.model.isAgreeToTermsRequiredDuringESign()&&!this.model.get("isAgreeToTermsChecked"))&&!this.isPrefill)&&!this.model.get("isWrittenSignPhase")){return}j=this.populateSaveHandler()}else{this.populateSignatureModel();if(this.model.get("hasValidationError")){App.EventBus.trigger("esignView:errorState");return}if(this.model.eSignRequiresDocumentReview()&&App.appView.isDocumentReviewed===false){return}if(((this.model.isAgreeToTermsRequiredDuringESign()&&!this.model.get("isAgreeToTermsChecked"))&&!this.isPrefill)&&!this.model.get("isWrittenSignPhase")){return}if(this.shouldShowSignerDetailsDialog()){this.showSignerDetailsDialog();return}if(App.appView.model.get("isUIDSigning")){this.isNSDLView=true}j=this.populateSubmitHandler();this.goToPostSendPage=!e&&!i.get("previouslySigned")&&this.model.get("user").seriouslySecureId===i.get("originatingUser").seriouslySecureId;jQuery("#header").removeClass("showHeader");jQuery(".agree-terms").removeClass("showHeader");if(!(App.appView.model.get("isUIDSigning")&&App.appView.model.get("iframeUIDSigningEnabled"))){App.EventBus.trigger("esign:showLoading",{text:i18n.js.esign_signing_interstitial(),skipInterstitial:_.has(m,"pin")||_.has(m,"signingReference")})}}var k=App.appView.fieldsViewer?App.appView.fieldsViewer.getInputData():"";if(g){k=App.appView.fieldsViewer?App.appView.fieldsViewer.getAutoSavedData():""}var d=App.appView.model.get("unknownParticipantFieldValues");if(d){if(k===""){k=[]}Object.keys(d).forEach(function(n){k[n]=d[n]})}if(this.isPrefill){l=i.prefill({data:k},j)}else{if(!f&&(this.model.isWrittenRequired()||this.model.get("optionalWrittenActive"))){l=i.saveFormForWrittenDownload({data:k,agreedToTerms:this.model.get("isAgreeToTermsChecked")&&this.model.isAdobeTermsAccepted()},j)}else{l=i.sign({data:k,agreedToTerms:this.model.get("isAgreeToTermsChecked")&&this.model.isAdobeTermsAccepted(),conversionProjectSecureId:f},_.extend(j,_.extend(m,{didFormSubmit:true})))}}var h=function(){App.EventBus.trigger("esignView:submissionFinished")};return l.then(h,h)}),showSignerDetailsDialog:function(){if(!this.signerDetailsModalView){this.signerDetailsModalView=new App.Views.Esign.SignerDetailsPanelView({model:this.model,isSaveWidgetView:false});this.signerDetailsModalView.render()}this.signerDetailsModalView.show()},getRedirectUrl:function(){return this.model.get("postSignRedirectUrl")},getRedirectDelay:function(){return this.model.get("postSignRedirectDelay")},getRedirectWindow:function(){return window},redirect:function(){var f=this.getRedirectWindow(),e=this.getRedirectUrl(),d=Number(this.getRedirectDelay());if(!e){return false}if(d===0){_.delay(function(){f.location.href=e},1);return true}return false},getSelfSignRedirectUrl:function(){return this.model.get("selfSignCompletionUrl")},redirectSelfSign:function(){var d=this.getSelfSignRedirectUrl();if(!d){return false}App.Utils.loadPage(App.Utils.joinUrl(App.Env.root,d));return true},saveWidgetHandler:function(f,d,e){if(d.isAgreementSignedOrDelegated){App.Utils.hideInterstitial();this.showAgreementSignedOrDelegatedDialog();return}if(d.agreementModified){this.shutdownOAuth2Authentication(e);App.EventBus.trigger("esign:agreementModified");App.Utils.hideInterstitial();if(e.digSigUIDModalView){e.digSigUIDModalView.closeUidSignWindow()}this.showAgreementReloadDialog(d.agreementModifiedMessage);return}else{if(d.paymentTransactionFailed){App.Utils.hideInterstitial();App.EventBus.trigger("paymentView:showPaymentFormWithErrorMessage",d.paymentTransactionFailedMessage);return}else{if(d.setSignerFullNameFailed){App.Utils.hideInterstitial();this.showAgreementSignerFullNameErrorReloadDialog(d.setSignerFullNameFailedMessage);return}else{if(!d.isWidgetSaveSuccessful){App.EventBus.trigger("esignView:saveFinishedWithError",d);return}}}}this.saveWidgetSuccess(f,d,e)},esignHandler:function(f,d,e){if(d.isAgreementSignedOrDelegated){App.Utils.hideInterstitial();this.showAgreementSignedOrDelegatedDialog();return}if(d.agreementModified){if(this.digSigFailureOccurred){if(e.pinAndOtpModalView){e.pinAndOtpModalView.setCancelReload()}if(e.digSigUIDModalView){e.digSigUIDModalView.setCancelReload()}e.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(e)}else{this.shutdownOAuth2Authentication(e);App.EventBus.trigger("esign:agreementModified");App.Utils.hideInterstitial();if(e.digSigUIDModalView){e.digSigUIDModalView.closeUidSignWindow()}this.showAgreementReloadDialog(d.agreementModifiedMessage)}return}else{if(d.paymentTransactionFailed){App.Utils.hideInterstitial();App.EventBus.trigger("paymentView:showPaymentFormWithErrorMessage",d.paymentTransactionFailedMessage);return}else{if(d.setSignerFullNameFailed){App.Utils.hideInterstitial();this.showAgreementSignerFullNameErrorReloadDialog(d.setSignerFullNameFailedMessage);return}}}this.esignSuccess(f,d,e)},showAgreementSignedOrDelegatedDialog:function(){var e=App.appView.model.get("agreementId"),d={title:i18n.js.compose_modify_error_recipient_has_signed_the_document_title(),content:i18n.js.compose_modify_error_recipient_has_signed_the_document(),backdrop:"static",close:false,primaryBtn:i18n.js.compose_see_signed_agreement_btn(),onClick:function(){App.Utils.loadPage(App.Utils.joinUrl(App.appView.model.get("remoteHostUrl")?App.appView.model.get("remoteHostUrl"):App.Env.root,"account/agreements?aid="+e))}};App.Utils.createModal(d)},showAgreementReloadDialog:function(g){var h=this.model.get("isDigitalSignatureSigningRemotely"),d,f,e;if(h){d=i18n.js.cloud_sign_agreement_modified_title();f=i18n.js.cloud_sign_agreement_modified_message()}else{if(this.model.get("widget")){d=i18n.js2.esign_widget_modified_title();f=(g?g:i18n.js2.esign_widget_modified_message())}else{d=i18n.js.esign_agreement_modified_title();f=(g?g:i18n.js.esign_agreement_modified_message())}}e={title:d,content:f,backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(e)},showAgreementSignerFullNameErrorReloadDialog:function(d){options={title:i18n.js.esign_agreement_signer_name_error_title(),content:(d?d:i18n.js.esign_agreement_signer_name_error_message()),backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(options)},saveWidgetSuccess:function(){if(this.model.get("widget")){App.EventBus.trigger("esignView:saveFinished")}},esignSuccess:function(h,f,g){var i,e;if(this.model.get("widget")){App.EventBus.trigger("esignView:submitWidgetSuccess")}this.detachBeforeUnload();this.model.set("experience",f.experience);this.updateAgreementModel(f);jQuery(".agree-terms").remove();App.EventBus.trigger("agreementView:removeHUD");if(!App.Env.feature.isMobileBrowser){App.EventBus.trigger("esignView:showFooter")}if(f.isWrittenSignPhase){this.model.set("isWrittenSignPhase",true);App.Service.postEvent({type:"WRITTEN_DOWNLOAD",data:{}});if(App.Env.feature.isMobileBrowser){window.open(this.model.get("agreement").get("downloadPDFUrl")).trigger("focus")}else{window.location.href=this.model.get("agreement").get("downloadPDFUrl")}}if(!this.model.get("isWrittenSignPhase")){App.EventBus.trigger("agreementView:removeLangSelector")}App.EventBus.trigger("esignHeader:hideContentSubHeader");if(!(this.model.get("isDigitalSignPhase")&&!this.model.get("isWrittenSignPhase")&&this.model.isDigSigRemoteSigning()&&this.model.get("isDigitalSignatureSigningRemotely"))){this.postEsignCommonCleanUp()}e=!this.model.get("isDigitalSignPhase")&&!f.isWrittenSignPhase&&(this.redirectSelfSign()||this.redirect());i=this.isPrefill?"PREFILL":this.getConversionProjectId()?"WRITTEN_SIGNED":"ESIGN";if(this.model.get("isDigitalSignPhase")&&!this.model.get("isWrittenSignPhase")){if(this.model.isDigSigRemoteSigning()&&this.model.get("isDigitalSignatureSigningRemotely")){g.sourceDocumentId=this.model.get("agreement").get("latestDoc").seriouslySecureId;this.remoteSignRESTCall(g);return}else{this.postViewlayout=new App.Views.Agreement.Layout({content:new App.Views.Esign.DigSigDownloadView({model:this.model})})}}else{if(f.isWrittenSignPhase){App.appView.timelineView.setActiveStep(2);this.postViewlayout=new App.Views.Agreement.Layout({content:new App.Views.Esign.UploadSignedDocumentView({model:this.model})})}else{if(!e){if(this.goToPostSendPage&&this.model.get("agreement").get("agrStatus")===App.Models.Agreement.STATUS.WAITING_FOR_SIGNATURES){var d=App.Utils.joinUrl(App.Env.root,"account/postSend?aid="+this.model.get("agreementId"));App.Service.postEvent({type:i,data:{postSendUrl:d}});_.delay(function(){window.location.href=d},50);return}else{this.postViewlayout=new App.Views.Agreement.Layout({header:new App.Views.Agreement.Header({model:this.model}),content:new App.Views.Esign.PostSuccessView({model:this.model})})}}}}this.onSignSuccess(i)},onSignSuccess:function(d){App.Service.postEvent({type:d,data:{}});this.postViewlayout.render();this.$mainContent.addClass("post-esign")},postEsignCommonCleanUp:function(){App.EventBus.trigger("agreementHeader:unhideApplicationHeader");this.detachBeforeUnload();if(this.signerDetailsModalView){this.signerDetailsModalView.remove()}if(this.delegateModalView){this.delegateModalView.remove()}if(this.forcedReviewDocModalFTE){this.forcedReviewDocModalFTE.remove()}if(this.layout){this.layout.remove();this.layout=null}else{if(this.postViewlayout){this.postViewlayout.remove();this.postViewlayout=null}}},updateAgreementModel:function(d){var e=null,f=this.model.get("agreement");f.clear();if(d.updatedAgreement){e=d.updatedAgreement;delete d.updatedAgreement}else{if(d.agreement){e=d.agreement;delete d.agreement}}if(e!==null){d.postSignRedirectToParent=d.postSignRedirectDeframe&&this.model.get("hosted");this.model.set(d);this.model.set("agreement",new App.Models.Esign.Agreement(e,{parse:true}))}else{f.set(d)}},remove:function(){this.postEsignCommonCleanUp();this.detachBeforeUnload();this._super()},attachBeforeUnload:function(){jQuery(window).on(this.getUnloadEventName(),_.bind(this.handleBeforeUnload,this))},detachBeforeUnload:function(){jQuery(window).off(this.getUnloadEventName())},getUnloadEventName:function(){return App.Env.feature.iOS?"pagehide.esignJS":"beforeunload.esignJS"},handleBeforeUnload:function(){var d,e;if(this.isNSDLView){ScAnalytics.logEvent("quit:wUID_NSDLview");return"Are you sure you want to close the window without completing the Aadhaar Signing?"}ScAnalytics.logEvent(["quit",App.Views.Esign.MainView.getQuitStats()]);d=jQuery(".modal.in");if(d.length){e=_(d.toArray()).pluck("className").join(" ").replace(/(modal|fade| in|center|dc-signature-panel)/ig,"").trim().replace(/\s+/g,":");ScAnalytics.logEvent(["quitModal",e])}return void (0)},showUIDDigSigNotReachableModal:function(f,d,g){var e={title:i18n.js.esign_digsig_unresponsive_error_modal_title(),content:i18n.js.esign_digsig_unresponsive_uid_provider(),backdrop:"static",close:false,keyboard:false};if(d.responseText.indexOf("AADHAAR_QUOTA_UNAVAILABLE")!==-1){e.title=i18n.js2.esign_digsig_quota_exhaustion_modal_title();e.content=i18n.js2.esign_digsig_quota_exhaustion_modal_content()}App.Utils.createModal(e)},showMiscellaneousErrorModal:function(){var d={title:i18n.js.esign_digsig_misc_error_modal_title(),content:i18n.js.esign_digsig_misc_error_modal_content(),backdrop:"static",close:false,primaryBtn:i18n.js.esign_agreement_refresh_button(),onClick:App.Utils.reloadPage};App.Utils.createModal(d)}});App.ns("Views.Esign").MainView=c}());(function(){var b=App.Views.Esign.MainView;var a=b.extend({getRedirectWindow:function(){return this.model.get("postSignRedirectToParent")?window.parent:window},throttlingDocProcessingWidgetSigningErrorKey:"throttling_doc_processing_widget_signing_error",throttlingDocProcessingWidgetSigningMsgKey:"messages_error_agreement_throttling_too_many_requests_widget_signing_user_msg_retry_readable",throttlingFirstSignerWidgetSigningErrorKey:"throttling_first_signer_widget_signing_error",throttlingFirstSignerWidgetSigningMsgKey:"messages_error_first_signer_throttling_too_many_requests_widget_signing_msg_retry_readable",populateSignatureModel:function(){var d=App.appView.getSignatureModel(),c=d&&d.get("email");if(App.appView.model.get("personalizedEmail")&&!c){c=App.appView.model.get("personalizedEmail");d.set("email",c,{silent:true})}if(App.appView.model.get("signerNameLocked")&&App.appView.model.get("signerName")){d.set("name",App.appView.model.get("signerName"),{silent:true})}},shouldShowSignerDetailsDialog:function(){var d=App.appView.getSignatureModel(),c=d&&d.get("email");return(this._super()||(this.model.shouldCollectSignerEmail()&&!c))},populateSubmitHandler:function(){var c=this._super();c.error=_.bind(this.widgetErrorEsignHandler,this);return c},widgetErrorEsignHandler:function(g,d,f){var h=i18n.js.error_code_invalid_email(),c=d===h,e;if(c){e=i18n.js.error_widget_invalid_email(App.appView.getSignatureModel().get("email"))}if(this.signerDetailsModalView&&c){App.EventBus.trigger("esignView:WidgetEmailInvalid",e);return this}App.EventBus.trigger("esignView:widgetErrorExceptEmail");var i=(d&&(typeof d==="string"))?this.getThrottlingErrorStringIfExists(d):null;if(i){App.Utils.hideInterstitial();this.handleThrottlingError(i)}else{App.Service.errorHandler(d,{},f)}return this},handleThrottlingError:function(e){var d=App.Templates.Esign.throttlingErrorTemplate({userMsg:e,contactMsg:i18n.js2.messages_error_agreement_throttling_too_many_requests_widget_signing_contact_msg()});var c={title:i18n.js2.error_throttling_widget_modal_title(),content:d,backdrop:"static",closeBtn:i18n.js.dwr_globalErrorCancelBtn(),primaryBtn:i18n.js.dwr_globalErrorReloadBtn(),onClick:App.Utils.reloadPage,onClose:function(){jQuery(".interstitial").hide()}};App.Utils.createModal(c)},getThrottlingErrorStringIfExists:function(h){var g=this.getErrMsgAndRetryTimesFromRespMsg(h);if(!g){return null}var f=g[0];var d=g[1];var e=d[0];var i=d[1];var c=null;if(i18n(this.throttlingDocProcessingWidgetSigningErrorKey)===f){c=this.throttlingDocProcessingWidgetSigningMsgKey+"_"+i}else{if(i18n(this.throttlingFirstSignerWidgetSigningErrorKey)===f){c=this.throttlingFirstSignerWidgetSigningMsgKey+"_"+i}}if(c){return i18n(c,e)}else{return null}},getErrMsgAndRetryTimesFromRespMsg:function(e){var d=e.split("+");if(d.length===2){var c=d[1].split(",");if(c.length===2){return[d[0],c]}}return null}});App.ns("Views.Esign").MainWidgetView=a}());(function(){var c=5000,e=".es.messageToSigner",d=".esMessage-container",a=App.Utils.KEY;var b=Backbone.View.extend({tagName:"div",className:"esMessage-popup align",attributes:{role:"alertdialog",tabindex:-1,id:"esMessage-popup-dialog"},events:{"click .close-popover":"hide",keydown:"onKeyDown"},appEvents:{"esignView:showMessageToSignerPopover":"firstTimeExperience","agreementView:resize":"hide"},template:App.Templates.Esign.messageToSignerContent,toTemplate:function(){return App.appView.getMessageToSignerTemplateData()},initialize:function(){var f=this;this._super();this._mousedownHandler=_.bind(this.onDocumentMouseDown,this);jQuery(document).on("mousedown"+e,f._mousedownHandler);jQuery(document).on("keydown"+e,f._mousedownHandler)},render:function(){var f={html:true,content:this.toHTML(),placement:"bottom",trigger:"manual",container:this.$el,sanitize:false,template:'<div class="popover"><div class="arrow"></div><div class="popover-body"></div></div>',popperConfig:{placement:"bottom-end"}};this.$el.popover(f);this.$el.data("toggle","focus");this.msgLinks=[];return this},firstTimeExperience:function(){this.show();this.hideAfterDelay()},hideAfterDelay:_.debounce(function(){this.hide()},c),show:function(){if(this.$(".popover").hasClass("show")){return}this._lastActiveElement=document.activeElement;jQuery(".esMessage-icon[aria-haspopup]").attr("aria-expanded",true);this.$el.popover("show")},hide:function(){var f=document.activeElement;if(this._lastActiveElement&&(jQuery(f).closest(this.$el).length||f===document.body)){this._lastActiveElement.focus();delete this._lastActiveElement}jQuery(".esMessage-icon[aria-haspopup]").removeAttr("aria-expanded");this.$el.popover("hide")},toggle:function(){if(!this.$(".popover").hasClass("show")){App.EventBus.trigger("esignView:hideSidebar")}this.$el.popover("toggle");if(this.$(".popover").hasClass("show")){this._lastActiveElement=document.activeElement;jQuery(".esMessage-icon[aria-haspopup]").attr("aria-expanded",true);this.$el.focus();this.msgLinks=this.$el.find("a")}else{jQuery(".esMessage-icon[aria-haspopup]").removeAttr("aria-expanded")}},onDocumentMouseDown:function(f){if((f.type==="keydown"&&f.keyCode!==a.ESC)){return}if((this.$(".popover").hasClass("show")&&jQuery(f.target).closest(d).length===0)||f.keyCode===a.ESC){this.hide()}},onKeyDown:function(g){var f=this;if(!a.isTab(g)){return}if(this.msgLinks.length<=1||(!g.shiftKey&&g.target===this.msgLinks[this.msgLinks.length-1])||(g.shiftKey&&g.target===this.msgLinks[0])){_.defer(function(){f.hide()})}},remove:function(){jQuery(document).off(e);this._super()}});App.ns("Views.Esign").MessageToSignerPopover=b}());(function(){var a=Backbone.View.extend({className:"modified-consent-container",template:App.Templates.Esign.ModifiedConsentPage,events:{"click .accept-modification":"onAcceptModification"},appEvents:{"app:hideInterstitial":"hideInterstitial"},initialize:function(){this._super();this.agreement=this.model.get("agreement");this.$containerHeaderHeight=jQuery("#header").getHeight();this.$containerFooterHeight=jQuery("#echo-nav-footer").getHeight();jQuery("body").addClass("modified-consent-page")},render:function(){this._super();this.$el.css({"margin-top":this.$containerHeaderHeight,"margin-bottom":this.$containerFooterHeight})},toTemplate:function(){var c=i18n.common.pre_esign_from(),f=this.model.get("lastModifiedBy"),e=i18n.common.pre_esign_mod_acknowledgement_title(),d=i18n.common.pre_esign_mod_acknowledgement_msg(),b=i18n.common.pre_esign_acknowledge();return{from:c+" "+f,title:e,content:d,btnText:b}},onAcceptModification:function(){App.Utils.showInterstitial();this.agreement.saveModificationAckEvent({success:_.bind(this.handleAcceptSuccess,this)})},hideInterstitial:function(){App.Utils.hideInterstitial()},handleAcceptSuccess:function(d,b,c){App.Utils.reloadPage()},remove:function(){jQuery("body").removeClass("modified-consent-container");return this._super()}});App.ns("Views.Esign").ModifiedConsentView=a}());(function(){var a=Backbone.View.extend({className:"paid-agreement-container",template:App.Templates.Esign.PaidAgreementPage,events:{"click .accept-modification":"onAcceptModification"},appEvents:{"app:hideInterstitial":"hideInterstitial"},initialize:function(){this._super();this.agreement=this.model.get("agreement");this.$containerHeaderHeight=jQuery("#header").getHeight();this.$containerFooterHeight=jQuery("#echo-nav-footer").getHeight();jQuery("body").addClass("modified-consent-page")},render:function(){this._super();this.$el.css({"margin-top":this.$containerHeaderHeight,"margin-bottom":this.$containerFooterHeight})},toTemplate:function(){var c=i18n.common.pre_esign_from(),f=this.model.get("lastModifiedBy"),e=i18n.common.pre_esign_mod_agreement_paid_title(),d=i18n.common.pre_esign_mod_agreement_paid_msg(),b=i18n.common.pre_esign_acknowledge();return{title:e,content:d,btnText:b}},onAcceptModification:function(){App.Utils.showInterstitial();this.agreement.saveModificationAckEvent({success:_.bind(this.handleAcceptSuccess,this)})},hideInterstitial:function(){App.Utils.hideInterstitial()},handleAcceptSuccess:function(d,b,c){jQuery("#mainContent").addClass("darkGrayBackground");this.remove();App.EventBus.trigger("app:hideInterstitial");$(".modal-backdrop").css("visibility","hidden");App.appView.render()},remove:function(){jQuery("body").removeClass("modified-consent-container");return this._super()}});App.ns("Views.Esign").PaidAgreementView=a}());(function(){var b=App.ns("Views.Esign.PostSign");var a=b.extend({messageTemplate:App.Templates.Esign.postDelegate,className:function(){return this._super()+" post-delegate"},toMessageTemplate:function(){var e=this.model.get("role"),d=this.model.get("agreement").get("name"),c=this.options.delegateeEmail;return{heading:i18n.js.esign_post_delegate_title_rolebased(e,d,c),message:i18n.js.esign_post_delegate_message_rolebased(this.model.get("role"),c)}},postRender:function(){this._super();this.$(".post-sign-content").append(this.messageTemplate(this.toMessageTemplate()))}});App.ns("Views.Esign").PostDelegateView=a}());(function(){var b=App.ns("Views.Esign.PostSign");var a=b.extend({messageTemplate:App.Templates.Esign.postReject,className:function(){return this._super()+" post-reject"},toMessageTemplate:function(){return{heading:i18n.js.esign_post_refusal_title_rolebased(this.model.get("role"),this.model.get("agreement").get("name")),message:this.options.rejectMsg}},postRender:function(){this._super();this.$(".post-sign-content").append(this.messageTemplate(this.toMessageTemplate()))}});App.ns("Views.Esign").PostRejectView=a}());(function(){var b=App.ns("Views.Esign.PostSign");var a=b.extend({messageTemplate:App.Templates.Esign.postReportAbuseView,className:function(){return this._super()},getAgreement:function(){return{}},toTemplate:function(){return{height:"100%"}},toMessageTemplate:function(){return{heading:i18n.js2.esign_done_reportAbuse_header(),message1:i18n.js2.esign_reportAbuse_success_text1(),message2:i18n.js2.esign_reportAbuse_success_text2(this.model.get("termsOfServiceUrl")),img:App.Env.root+"images/esignJS/check_icon_esign.svg"}},postRender:function(){this._super();this.$(".post-sign-content").append(this.messageTemplate(this.toMessageTemplate()))}});App.ns("Views.Esign").PostReportAbuseView=a}());(function(){var a=App.ns("Views.Esign.PostSign");var b=a.extend({messageTemplate:App.Templates.Esign.postEsign,events:{"click #post-sign-manage-link":"onManageThisDocumentClick","click #post-sign-send-link":"onSendAnotherDocumentClick"},className:function(){return this._super()+" post-esign"},initialize:function(){this._super();if(this.model.get("socialEnabled")){this.socialView=new App.Views.Esign.SocialView({model:this.model})}},toMessageTemplate:function(){var e={},f=this.getAgreement(),d=this.model.get("postSignMessage"),g=this.model.get("postSignRedirectUrl"),c;e.download=i18n.js.esign_download_a_copy();e.downloadUrl=f.get("openPDFUrl");if(d){e.title=d[0];e.message=d[2]}else{e.title=this.model.get("postSignHeader");e.message=this.model.get("postSignBody")}if(this.model.get("widget")&&this.model.get("needsVerification")){e.postEsignHeading=i18n.js.esign_done_header_widget()}else{if(this.model.isNotarySigner()){e.postEsignHeading=i18n.js2.esign_done_notary_signer_header()}else{e.postEsignHeading=i18n.js.esign_done_header()}}e.postEsignTrialHeader=i18n.js.esign_start_trial_header();e.postEsignTrialBody=i18n.js.esign_start_trial_body();e.showPostSignRedirect=false;e.showManagePageLink=false;e.showSendLink=false;e.showRegisterLink=false;e.showRemindersLink=false;e.isEmbeddedAcrobatSend=this.model.get("isEmbeddedAcrobatSend");e.isWidgetWithVerification=this.model.get("widget")&&this.model.get("needsVerification");e.manageDocsHeaderText=i18n.js.esign_manage_docs_header();if(g){c=document.createElement("a");c.href=g;e.showPostSignRedirect=true;e.postSignRedirectDelay=parseFloat(this.model.get("postSignRedirectDelay"));e.postSignRedirectUrl=this.model.get("postSignRedirectUrl");e.postSignRedirectMessage=i18n.js2.redirect_message(c.hostname);e.postSignRedirectToParent=this.model.get("postSignRedirectToParent")}e.userIsPending=false;if(this.model.get("user").status==="PENDING"){e.userIsPending=true;if(this.model.get("showRegButton")){e.showRegisterLink=true;e.registerLinkUrl="https://www.adobe.com/go/signerconfirmation-trial-nov2019";e.registerLinkText=i18n.js.esign_start_trial();e.postEsignTrialDescHeader=i18n.js.esign_start_trial_descr_header();e.trialSuggestHeader1=i18n.js.esign_trial_suggest_header1();e.trialSuggestText1=i18n.js.esign_trial_suggest_text1();e.trialSuggestHeader2=i18n.js.esign_trial_suggest_header2();e.trialSuggestText2=i18n.js.esign_trial_suggest_text2();e.trialSuggestHeader3=i18n.js.esign_trial_suggest_header3();e.trialSuggestText3=i18n.js.esign_trial_suggest_text3();e.trialTextBottom=i18n.js.esign_trial_text_bottom_with_link(e.registerLinkUrl)}}else{if(this.model.get("showManagePageLink")){e.showManagePageLink=true;e.manageLinkUrl=App.Utils.joinUrl(App.appView.model.get("remoteHostUrl")?App.appView.model.get("remoteHostUrl"):App.Env.root,"account/agreements");if(this.model.get("user").loggedIn){e.manageLinkText=i18n.js.esign_manage_document()}else{e.manageLinkText=i18n.js.esign_sign_in_manage_document()}}if(this.model.get("showSendLink")){e.showSendLink=true;e.sendLinkUrl=App.Utils.joinUrl(App.appView.model.get("remoteHostUrl")?App.appView.model.get("remoteHostUrl"):App.Env.root,"public/compose");e.sendLinkText=i18n.js.esign_send_documents_link()}if(this.model.attributes.user.seriouslySecureId==f.attributes.originatingUser.seriouslySecureId){if(f.attributes.agrStatus==="WAITING_FOR_SIGNATURES"){e.showRemindersLink=true;e.remindersLinkUrl=App.Utils.joinUrl(App.Env.root,"account/postSend?aid="+this.model.get("agreementId"));e.remindersLinkText=i18n.js.esign_set_reminders()}}}return e},feedbackText:function(){var c={};c.feedbackMessage=i18n.js.esign_feedback_message1();c.feedbackLinkText=i18n.js.esign_feedback_message2();c.feedbackUrl="https://adobeformscentral.com/?f=alnDa-BouWSuTqoVyxJlCw";return c},postRender:function(){this._super();this.$(".post-sign-content").append(this.messageTemplate(this.toMessageTemplate()));this.socialView&&this.socialView.renderInto(this.$(".social-container"))},onManageThisDocumentClick:function(){var c=App.Utils.joinUrl(App.appView.model.get("remoteHostUrl")?App.appView.model.get("remoteHostUrl"):App.Env.root,"account/agreements?aid="+this.model.get("agreementId")),d=this.model.get("apiAgreementCapabilityId");App.Service.postEvent({type:"CLICK",data:{pageName:"POST_SIGN",target:"MANAGE_LINK",url:c,apiAgreementId:d}})},onSendAnotherDocumentClick:function(){App.Service.postEvent({type:"CLICK",data:{pageName:"POST_SIGN",target:"SEND_ANOTHER_LINK"}})}});App.ns("Views.Esign").PostSuccessView=b}());(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.postSaveSuccessfulModalTemplate,defaults:{title:i18n.js2.esign_req_forced_save_widget_modal_title(),closeBtn:false,classes:"postSuccessSaveModal",hasHeaderDivider:false,keyboard:false,close:false,backdrop:"static",primaryBtn:false},events:{"click .esMessage-icon":"_onTouchStart"},initialize:function(){this._super();this.options.title=""},toTemplate:function(){return{postSuccessFulSaveWidgetModalContentTitle:i18n.js2.esign_req_post_successful_save_widget_modal_content_title(),postSuccessFulSaveWidgetModalContentAlertMsgTitle:i18n.js2.esign_req_post_successful_save_widget_modal_content_alert_msg()}},onClose:function(){var b=window.open(location.href,"_self");b.close()},render:function(){this._super();return this}});App.ns("Views.Esign").PostSuccessfulSaveModal=a})();(function(){var a={getQuitStats:function(){var f=[0,1,2,5,9],d=App.appView.sessionTimeout.getSessionTime("m",0),h=App.Utils.inBucket(f,d),g=App.appView.model.get("role"),e=App.Models.Agreement.PARTICIPATION_ROLES.ACCEPTOR===g?"a":g[0],c=[e,"t="+h],b=jQuery(".interstitial:visible").text().trim();if(App.appView.fieldsViewer){c=c.concat(this.getFieldStats())}else{c.push("f=na")}if(b){c.push("T="+b)}return c.join(":")},getFieldStats:function(){var b=App.appView.fieldsViewer.collection,d=b.getTodoCount(),e=b.where({required:true}).length,h=b.where({contentType:"DATA"}).length,i=b.filter("dirty").length,f=[0,0.24,0.49,0.74,0.99],g=["0","1","2","3","4"],c=function(j){return App.Utils.inBucket(f,j,g)};return["f="+(h?c(i/h):"x"),"r="+(e?c((e-d)/e):"x"),"w="+this.getFlowMnemonic(),"d="+[d,e].join("/"),"n="+[i,h].join("/")]},getFlowMnemonic:function(){var d=App.appView.model,c=d.isAgreeToTermsRequiredDuringESign(),f=d.isExplicitConsentFlow(),b=d.isForcedReviewRequired(),e=d.isShowNoTermsFlow(),g={P:d.isPrefill(),A:d.isApprove(),a:d.isAgentDelegate(),m:d.get("isModified"),x:f,t:c,f:b,n:e,c:d.get("isAgreeToTermsChecked"),D:d.get("isDigitalSignPhase"),W:d.isWrittenRequired(),d:d.get("isReadyForDigitalSignature"),R:d.isDigSigRemoteSigning()};return _(g).reduce(function(j,i,h){return j+(i?h:"")},"")}};_.extend(App.Views.Esign.MainView,a)})();(function(){var a=App.Utils.KEY;var c="__myownreason__";var b=Backbone.View.extend({className:"rejectPanel",constants:{REFUSAL_REJECT_CODE:"REFUSE",REFUSAL_OTHER_CODE:"OTHER"},events:{"click .cancel":"hide","click .decline":"handleRejection",keydown:"onKeydown","change .decline-reason-dropdown":"onChangeDeclineReason","input  .declineComments":"onInputDeclineReason","click .ec-checkbox":"toggleSubmitButton"},appEvents:{"esignView:hideDeclineModal":"hide","esignView:showDeclineModal":"show"},initialize:function(){this._super();this.isRequired=this.model.get("requireDeclineReason");this.predefinedReasons=this.model.get("declineReasons");this.hasPredefinedReasons=!_.isEmpty(this.predefinedReasons);this.isCustomReasonAllowed=this.model.get("allowCustomDeclineReason");this.model=this.options.model},render:function(){var d=this;this.setTemplateData();this.setElement(jQuery(App.Templates.Esign.rejectPanel(this.data)));this.$el.addClass(this.className);this.$refusalNote=this.$(".declineComments");this.$decline=this.$(".decline");this.$el.on({"shown.bs.modal":_.bind(this.onShown,this),"hidden.bs.modal":_.bind(this.onHidden,this)});this.model.get("requireDeclineReason")&&this.$refusalNote.keyup(function(){d.toggleSubmitButton()});this.renderDeclineComponents();this.$agreeToAdobeTermsCheckbox=this.$(".ec-checkbox.adobe-terms");new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".ec-checkbox-label",isExplicitConsent:App.appView.model.isExplicitConsentFlow()||App.appView.model.isForcedReviewRequired()});return this},setTemplateData:function(){var g=this.model.get("role"),e=this.model.get("termsOfServiceUrl"),d=this.model.get("privacyPolicyUrl");data={};var f=!!this.model.get("declineReasonVal")?this.model.get("declineReasonVal"):"";data.showAdobeTerms=this.model.showTermsOfUseGate()&&!this.model.get("isAgreeToTermsChecked");data.checkboxLabelForAdobeTerms=i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use(e,d);data.checkboxLabelForAdobeTermsAria=i18n.js2.esign_explicit_consent_unregistered_user_accept_terms_of_use_aria_label();data.refusalHeadText=g==="SIGNER"&&(this.model.isWrittenRequired()||this.model.get("isWrittenSignPhase"))?i18n.js.esign_written_signature_wont_sign():i18n.js.esign_wont_sign_rolebased(g);data.refusalBodyText=i18n.js.esign_refusal_comments_title();data.decline=i18n.js.esign_refusal_decline();data.cancel=i18n.js.esign_refusal_cancel();data.declineHeadText=i18n.js2.esign_decline_agreement();data.declineBodyText=this.isCombo()?i18n.js2.esign_decline_please_select():i18n.js2.esign_decline_please_provide();data.canUseCombo=this.isCombo();data.maxLength=1000;data.reasonVal=f;data.reasonLabel=i18n.js2.esign_decline_dropdown_label();data.placeholderText=i18n.js2.esign_decline_textarea_placeholder();data.declineAvailable=this.model.get("declineAvailable");this.data=data},handleRejection:function(){var d;if(this.$decline.hasClass("disabled")){return}if(this.data.declineAvailable===true){d=this.getValue()}else{d=jQuery.trim(this.$refusalNote.val())}if(!d||d.length===0){d=""}App.EventBus.trigger("esign:showLoading",{text:i18n.js.esign_refuse_interstitial()});this.model.get("agreement").reject({refusalCode:(d==="")?this.constants.REFUSAL_OTHER_CODE:this.constants.REFUSAL_REJECT_CODE,comment:d,notify:true,data:{}},{success:_.bind(this.handleRefusalSuccess,this)});this.clear()},show:function(){this.resetContent();this.is_open=true;this.$el.modal({show:true,backdrop:"static",keyboard:true})},onShown:function(){if(!App.Env.feature.iOS){this.$refusalNote.focus()}},onHidden:function(){this.options.$relatedTarget&&this.options.$relatedTarget.focus()},hide:function(d){this.resetValue();$("#declineReasonFormControlDropdown").val("");this.showActiveControl();this.$el.modal("hide")},toggleSubmitButton:_.debounce(function(){var e=this.$agreeToAdobeTermsCheckbox.is(":checked"),d;d=this.model.showTermsOfUseGate()&&!this.model.get("isAgreeToTermsChecked")?e&&this.isValid():this.isValid();this.$decline.toggleClass("disabled",!d).prop("disabled",!d)},150,true),isValid:function(){var d=jQuery.trim(this.$refusalNote.val());if(d===""&&this.model.get("requireDeclineReason")){return false}return true},resetContent:function(){this.$refusalNote.val("");this.$agreeToAdobeTermsCheckbox.prop("checked",false);if(this.model.get("requireDeclineReason")){this.$decline.addClass("disabled").prop("disabled",true);this.$("label[for=declineReasonFormControlDropdown]").addClass("required-reason")}},clear:function(){this.hide();this.resetContent()},handleRefusalSuccess:function(f,d,m){var j=d.name,h=this.model.get("agreement").get("latestDocumentData"),i=App.appView,k=App.Models.Agreement,l="",g;i.updateAgreementModel(d);this.model.get("agreement").set("latestDocumentData",h);if(d.agrStatus===k.STATUS.ABANDONED||d.status===k.USER_STATUS.HIDDEN){if(this.model.get("showRefusalNotificationMessage")){var e=this.model.get("role");l=this.model.get("user").loggedIn?i18n.js.esign_copy_in_manage_decline_rolebased(e):i18n.js.esign_signer_decline_rolebased(e)}i.postEsignCommonCleanUp();App.Service.postEvent({type:"REJECT",data:{}});g=new App.Views.Agreement.Layout({content:new App.Views.Esign.PostRejectView({model:this.model,rejectMsg:l})});i.render(g)}},onKeydown:function(h){var d=jQuery(h.target),f=false,g;if(h.which===a.TAB){g=this.$(":tabbable");if(h.shiftKey&&g.first().is(d)){g.last().focus();f=true}else{if(!h.shiftKey&&g.last().is(d)){g.first().focus();f=true}}}if(f){h.preventDefault()}},renderDeclineComponents:function(){this.$declineReasonDropdownContainer=this.$(".decline-reason-dropdown-container");this.$declineReasonTextContainer=this.$(".decline-reason-text-container");if(this.isCombo()){this.renderReasonDropdown()}this.showActiveControl()},isCombo:function(){return this.hasPredefinedReasons},getValue:function(){var d=this.model.get("declineReasonVal");return !!d?d.trim():d},resetValue:function(){this.$activeControl.val("");this.model.set("declineReasonVal","")},showActiveControl:function(){var g=!!this.model.get("declineReasonVal")?this.model.get("declineReasonVal"):"",f=_.pluck(this.predefinedReasons,"text"),e,d;if(this.isCombo()&&(g===""||_.contains(f,g))){e=this.$declineReasonDropdownContainer;d=this.$declineReasonTextContainer}else{e=this.$declineReasonTextContainer;d=this.$declineReasonDropdownContainer}this.toggleFormTypeVisibility(e,d)},renderReasonDropdown:function(){var e=this.isCustomReasonAllowed?this.addCustomReasonOption(this.predefinedReasons):this.predefinedReasons,d=this.model.get("declineReasonVal");this.reasonDropdown=new App.Views.Dropdown({className:"form-control decline-reason-dropdown",id:"declineReasonFormControlDropdown",disabled:false,labels:_.pluck(e,"text"),values:_.pluck(e,"id"),defaultValue:d,selectLabel:i18n.js2.esign_decline_select_reason(),byLabel:true});this.reasonDropdown.renderInto(this.$declineReasonDropdownContainer)},addCustomReasonOption:function(f){var d=_.deepClone(f),e={id:c,text:i18n.js2.esign_decline_enter_custom_decline_reason_option()};d.unshift(e);return d},toggleFormTypeVisibility:function(e,d){e.show();d.hide();this.setActiveControl(e)},showTextArea:function(d){d.show();this.setActiveControl(d)},hideTextArea:function(d){d.hide()},setActiveControl:function(e){var d=e.find(".form-control");this.$activeControl=d;this.$activeContainer=e},onChangeDeclineReason:function(f){var g=jQuery(f.currentTarget).val(),d=this.$declineReasonTextContainer;if(g===c){this.showTextArea(d);this.resetValue();this.$refusalNote=this.$(".declineComments");this.$decline.toggleClass("disabled",!this.isValid()).prop("disabled",!this.isValid())}else{this.hideTextArea(d);this.model.set("declineReasonVal",g);this.$refusalNote=this.$(".decline-reason-dropdown");this.$decline.toggleClass("disabled",!this.isValid()).prop("disabled",!this.isValid())}},getDeclineReasonFormValue:function(){return this.$activeControl.val().trim()},setDeclineReason:function(d){this.model.set("declineReasonVal",d)},onInputDeclineReason:function(){if(!this.data.declineAvailable){return}var d=this.getDeclineReasonFormValue();this.setDeclineReason(d)}});App.ns("Views.Esign").RejectPanelView=b}());(function(){var d=".es.requireFieldsInfo",c=".required-info",a=App.Utils.KEY;var b=Backbone.View.extend({tagName:"div",className:"required-popup align",events:{"click .invalidText":"firstRequiredInvalidField"},appEvents:{"fields:requiredCount":"updateRequiredInfo"},initialize:function(){var e=this;this.currentCount=null;this.invalidCount=null;this.reqFieldsCount=null;this.completedCount=0;this.ariaDescribedById="requireFieldsInfo-"+this.cid;this.isDirty=false;this._mousedownHandler=_.bind(this.onDocumentMouseDown,this);jQuery(document).on("mousedown"+d,e._mousedownHandler);jQuery(document).on("keydown"+d,e._mousedownHandler)},render:function(){var e;this.setTemplateText();e={html:true,content:_.bind(this.updateContent,this),placement:"bottom",trigger:"manual",container:this.$el,sanitize:false,template:'<div class="popover"><div class="arrow"></div><div class="popover-body"></div></div>',popperConfig:{placement:"bottom-end"}};this.$el.popover(e);return this},updateRequiredInfo:function(g,f,e){this.currentCount=g;this.invalidCount=f;this.reqFieldsCount=g-f;this.isDirty=true},getCompletedCount:function(){if(this.isDirty){this.isDirty=false;this.completedCount=jQuery(".todo-done.done:not(.condition-hide):not(.condition-disable)").length}return this.completedCount},getTotalCount:function(){return this.completedCount+this.currentCount},firstRequiredInvalidField:function(f){if(this.model.eSignRequiresDocumentReview()){return}f.preventDefault();f.stopPropagation();App.EventBus.trigger("fields:focus-invalid");this.hide()},updateContent:function(){var e=jQuery(App.Templates.Esign.requiredFieldsPopoverContent(this.data));this.updateNextReqContent(e);this.updateProgressBar(e);return e},updateNextReqContent:function(g){var i=g.find(".nextReqInvalidMsg"),e=g.find(".nextRequiredMsg"),h=g.find(".nextInvalidMsg"),j=jQuery(),f;if(this.model.eSignRequiresDocumentReview()){this.$(".invalidText").addClass("no-navigation")}if(this.invalidCount>0){j.add(e.hide());if(this.reqFieldsCount>0){j.add(h.hide());f=i.show()}else{j.add(i.hide());f=h.show()}g.find(".invalidCount").text(this.invalidCount)}else{j.add(h.hide());j.add(i.hide());f=e.show()}j.removeAttr("id");f.attr("id",this.ariaDescribedById);g.find(".reqCount").text(this.reqFieldsCount)},updateProgressBar:function(f){var e=f.find(".progress"),h=this.getCompletedCount(),i=this.getTotalCount(),g=Math.round((h/i*100))+"%";if(h===0){e.hide()}else{e.find(".progress-bar").width(g).attr({"aria-valuemin":0,"aria-valuemax":i,"aria-valuenow":h});e.show()}},setTemplateText:function(){var e={};e.nextReqMsg=i18n.js.esign_next_required_msg();e.nextReqInvalidMsg=i18n.js.esign_next_required_invalid_msg();e.nextInvalidMsg=i18n.js.esign_next_invalid_msg();this.data=e},show:function(){this._lastActiveElement=document.activeElement;this.$el.popover("show")},hide:function(){var e=document.activeElement;if(this._lastActiveElement&&(jQuery(e).closest(this.$el).length||e===document.body)){this._lastActiveElement.focus();delete this._lastActiveElement}this.$el.popover("hide")},toggle:function(){if(!this.$(".popover").hasClass("show")){App.EventBus.trigger("esignView:hideSidebar")}this.$el.popover("toggle");if(this.$(".popover").hasClass("show")){this._lastActiveElement=document.activeElement}},onDocumentMouseDown:function(f){if((f.type==="keydown"&&f.keyCode!==a.ESC)){return}if((this.$(".popover").hasClass("show")&&jQuery(f.target).closest(c).length===0)||f.keyCode===a.ESC){this.hide()}},getAriaDescribedbyId:function(){return this.ariaDescribedById},remove:function(){jQuery(document).off(d);this._super()}});App.ns("Views.Esign").RequiredFieldsPopover=b}());App.Views.lazyloadify(function(){var a=App.Views.SelectFiles.extend({appEvents:App.Views.inherit("appEvents",{"selectFiles:closeDialog":"specialHide"}),views:function(){return App.appView.model.get("selectFilesLocalUploadEnabled")?["MYCOMPUTER"]:[]},cloudDrives:function(){var b=App.appView.model.get("uploadableCloudConnectorsEnabled");return b?b:[]},specialHide:function(){this.delayEventCleanups=true;this.hide()}});App.ns("Views.Esign").SelectFiles=a});(function(){var a=App.Views.Components.Shortcuts.extend({title:i18n.js.shortcuts_esign_shortcuts(),templateData:function(){return[{title:i18n.js.shortcuts_navigation(),content:{"[TAB] / [SHIFT] [TAB]":i18n.js.shortcuts_move_next_previous_field(),"[SHIFT] + [↑] / [↓]":i18n.js.shortcuts_move_next_previous_required_field(),"[ENTER]":i18n.js.shortcuts_complete_action_on_field()}},App.Views.Agreement.HUD.Toolbar.ShortcutsData]}});App.ns("Views.Esign").Shortcuts=a}());(function(){var b={};var f=20,d=2,a=550,c="has-error is-invalid";b.nextSignerPanelView=Backbone.View.extend({template:App.Templates.Esign.signerDetailsPanel.nextSignerDetails,previousVal:undefined,initialize:function(){this._super();this.unknownSigners=this.model.get("unknownSigners");this.currentIndex=this.options.unknownSignerIndex;this.isUnknownSignersPresent=this.unknownSigners&&this.unknownSigners.length>0;this.isRequired=this.isUnknownSignersPresent&&this.unknownSigners[this.currentIndex]?this.unknownSigners[this.currentIndex].required:false;this.isValid=!this.isRequired;this.isActive=true;this.isChangeNameOrder=this.model.get("isLastNameFirst")},events:{"click .message-btn":"onPrivateMessageClick","click .read-more-less-button":"onReadMoreLessClick","click .nextSignerPanelHeader":"toggleAccordion","keyup .nextSignerEmail":"updateEmailForUnknownSigner","keyup .nextSignerName":"updateNameForUnknownSigner","keyup .nextSignerLastName":"updateLastNameForUnknownSigner"},toTemplate:function(){var h=this.currentIndex+2;var g=this.isRequired?"&nbsp;"+i18n.js2.unknown_signer_participant()+h:i18n.js2.unknown_signer_participant()+h;return{pdsSignerIndex:this.currentIndex,unknownParticipantName:g,required:this.isRequired,nextSignerDetailsDescription:this.getNextSignerDetailsDescription(),nextSignerNamePlaceHolder:this.isChangeNameOrder?i18n.js2.unknown_signer_lastName_placeHolder():i18n.js2.unknown_signer_firstName_placeHolder(),nextSignerLastNamePlaceHolder:this.isChangeNameOrder?i18n.js2.unknown_signer_firstName_placeHolder():i18n.js2.unknown_signer_lastName_placeHolder(),nextSignerEmailPlaceHolder:i18n.js2.unknown_signer_email_placeHolder(),nextSignerMessageLabel:i18n.js2.unknown_signer_message_label_text(),nextSignerMessagePlaceHolder:i18n.js2.unknown_signer_message_placeholder(),maxLengthForMessage:255,maxLength:255,readMoreLabel:i18n.js2.esign_instruction_read_more(),addMessageLabel:i18n.js2.esign_next_participant_add_message(),firstNameLabel:this.isChangeNameOrder?i18n.js2.unknown_signer_lastName():i18n.js2.unknown_signer_firstName(),lastNameLabel:this.isChangeNameOrder?i18n.js2.unknown_signer_firstName():i18n.js2.unknown_signer_lastName(),emailLabel:i18n.js2.unknown_signer_email(),nextSignerDetailsBodyTextSaveWidget:this.options.isSaveWidgetView?i18n.js2.unknown_signer_paragraph_text():""}},updateEmailForUnknownSigner:function(){this.$email=this.$("#form-control-nextSignerEmail"+this.currentIndex);this.isError=this.isRequired||!this.isRequired&&(this.getValueForLastName()!==""||this.getValueForName()!=="");this.isError&&App.Utils.isValidEmail(this.getValueForEmail())?this.$nextSignerEmail.removeClass(c):this.$nextSignerEmail.addClass(c);this.removeAllAlertsForOptionalParticipants()},updateNameForUnknownSigner:function(){this.$nextSignerName=this.$("#form-control-nextSignerName"+this.currentIndex);this.isError=this.isRequired||!this.isRequired&&(this.getValueForLastName()!==""||this.getValueForEmail()!=="");if(this.isChangeNameOrder){this.isError&&this.getValueForLastName()===""?this.$nextSignerName.addClass(c):this.$nextSignerName.removeClass(c)}else{this.isError&&this.getValueForName()===""?this.$nextSignerName.addClass(c):this.$nextSignerName.removeClass(c)}this.removeAllAlertsForOptionalParticipants()},updateLastNameForUnknownSigner:function(){this.$nextSignerLastName=this.$("#form-control-nextSignerLastName"+this.currentIndex);this.isError=this.isRequired||!this.isRequired&&(this.getValueForName()!==""||this.getValueForEmail()!=="");if(this.isChangeNameOrder){this.isError&&this.getValueForName()===""?this.$nextSignerLastName.addClass(c):this.$nextSignerLastName.removeClass(c)}else{this.isError&&this.getValueForLastName()===""?this.$nextSignerLastName.addClass(c):this.$nextSignerLastName.removeClass(c)}this.removeAllAlertsForOptionalParticipants()},removeAllAlertsForOptionalParticipants:function(){if(!this.isRequired&&this.getValueForName()===""&&this.getValueForLastName()===""&&this.getValueForEmail()===""){this.$nextSignerName.removeClass(c);this.$nextSignerEmail.removeClass(c);this.$nextSignerLastName.removeClass(c)}},getNextSignerDetailsDescription:function(){this.descriptionText=this.isUnknownSignersPresent&&this.unknownSigners[this.currentIndex]&&this.unknownSigners[this.currentIndex].description?this.unknownSigners[this.currentIndex].description:"";return this.descriptionText},resetToOriginal:function(){this.$(".read-more-less-button").text(i18n.js2.esign_instruction_read_more());this.$(".read-more-less-button").removeClass("expanded-message");this.$(".read-more-less-button").addClass("collapsed-message")},showReadMoreLessButton:function(){if(this.$("#next-signer-instruction"+this.currentIndex).hasClass("nextSignerDescription-small")){this.$("#next-signer-instruction"+this.currentIndex).removeClass("nextSignerDescription-small")}if(this.$("#next-signer-instruction"+this.currentIndex).hasClass("nextSignerDescription-full")){this.$("#next-signer-instruction"+this.currentIndex).removeClass("nextSignerDescription-full")}this.senderInstructionsHeight=$("#next-signer-instruction"+this.currentIndex).getInnerHeight();this.numOfLines=this.senderInstructionsHeight/f;if(this.numOfLines<=2){this.$(".read-more-less-button").addClass("d-none")}else{this.$(".read-more-less-button").removeClass("d-none");this.$("#next-signer-instruction"+this.currentIndex).addClass("nextSignerDescription-small");this.resetToOriginal()}},onReadMoreLessClick:function(){this.toggleInstructionType();if(this.$(".read-more-less-button").text()===i18n.js2.esign_instruction_read_less()){this.resetToOriginal()}else{this.expand()}},expand:function(){this.$(".read-more-less-button").text(i18n.js2.esign_instruction_read_less());this.$(".read-more-less-button").removeClass("collapsed-message");this.$(".read-more-less-button").addClass("expanded-message")},toggleInstructionType:function(){this.$("#next-signer-instruction"+this.currentIndex).toggleClass("nextSignerDescription-full","nextSignerDescription-small")},onPrivateMessageClick:function(){this.$messageButton=this.$(".message-btn");this.$message=this.$("#form-control-nextSignerMessage"+this.currentIndex);this.$messageLabel=this.$("#email-label"+this.currentIndex);if(this.$message.hasClass("d-none")){this.$message.removeClass("d-none");this.$messageLabel.removeClass("d-none");this.$messageButton.html(i18n.js2.esign_next_participant_delete_message());this.$message.focus()}else{this.$message.addClass("d-none");this.$message.val("");this.$messageLabel.addClass("d-none");this.$messageButton.html(i18n.js2.esign_next_participant_add_message())}},render:function(){this._super();this.$nextSignerName=this.$("#form-control-nextSignerName"+this.currentIndex);this.$nextSignerLastName=this.$("#form-control-nextSignerLastName"+this.currentIndex);this.$nextSignerEmail=this.$("#form-control-nextSignerEmail"+this.currentIndex);this.$nextSignerMessage=this.$("#form-control-nextSignerMessage"+this.currentIndex);this.isValid=true;if(this.currentIndex>1){this.toggleAccordion()}return this},toggleAccordion:function(){if(this.$(".nextSignerDetails-body-expanded").hasClass("hidden-accessible")){this.$(".nextSignerDetails-body-expanded").removeClass("hidden-accessible")}else{this.$(".nextSignerDetails-body-expanded").addClass("hidden-accessible")}this.$(".participant-name-expanded, .participant-name-collapsed").toggleClass("participant-name-expanded participant-name-collapsed");this.showReadMoreLessButton()},resetContent:function(){},getValueForName:function(){return this.isChangeNameOrder?jQuery.trim(this.$("#form-control-nextSignerLastName"+this.currentIndex).val()):jQuery.trim(this.$("#form-control-nextSignerName"+this.currentIndex).val())},getValueForLastName:function(){return this.isChangeNameOrder?jQuery.trim(this.$("#form-control-nextSignerName"+this.currentIndex).val()):jQuery.trim(this.$("#form-control-nextSignerLastName"+this.currentIndex).val())},getValueForEmail:function(){return jQuery.trim(this.$("#form-control-nextSignerEmail"+this.currentIndex).val())},getValueForMessage:function(){return jQuery.trim(this.$("#form-control-nextSignerMessage"+this.currentIndex).val())},setDataInModel:function(){this.model.set("nextSignerFirstName"+this.currentIndex,this.getValueForName());this.model.set("nextSignerLastName"+this.currentIndex,this.getValueForLastName());this.model.set("nextSignerEmail"+this.currentIndex,this.getValueForEmail());this.model.set("nextSignerMessage"+this.currentIndex,this.getValueForMessage())},cacheValInModel:function(){this.previousFirstNameVal=this.model.get("nextSignerFirstName"+this.currentIndex);this.previousLastNameVal=this.model.get("nextSignerLastName"+this.currentIndex);this.previousEmailVal=this.model.get("nextSignerEmail"+this.currentIndex);this.previousMessageVal=this.model.get("nextSignerMessage"+this.currentIndex)},restoreValInModel:function(){this.model.set("nextSignerFirstName",this.previousFirstNameVal);this.model.set("nextSignerLastName",this.previousLastNameVal);this.model.set("nextSignerEmail",this.previousEmailVal);this.model.set("nextSignerMessage",this.previousMessageVal)},setFocus:function(){this.$nextSignerName.focus()},highlightErrorObject:function(g){this.expandAccordionIfError();if(this.getValueForName()===""){this.isChangeNameOrder?this.$nextSignerLastName.addClass(c):this.$nextSignerName.addClass(c);if(!g){this.isChangeNameOrder?this.$nextSignerLastName.focus():this.$nextSignerName.focus();g=true}}else{this.$nextSignerName.removeClass(c)}if(this.getValueForLastName()===""){this.isChangeNameOrder?this.$nextSignerName.addClass(c):this.$nextSignerLastName.addClass(c);if(!g){this.isChangeNameOrder?this.$nextSignerName.focus():this.$nextSignerLastName.focus();g=true}}else{this.$nextSignerLastName.removeClass(c)}if(!App.Utils.isValidEmail(this.getValueForEmail())){this.$nextSignerEmail.addClass(c);if(!g){this.$nextSignerEmail.focus();g=true}}else{this.$nextSignerEmail.removeClass(c)}if(g){$("div").scrollTop(this.$nextSignerEmail.getOffset().top)}return g},expandAccordionIfError:function(){if($(this)[0].$el&&$(this)[0].$el.find(".nextSignerDetails-body-expanded").hasClass("hidden-accessible")){this.toggleAccordion()}},removeError:function(){this.$nextSignerName.removeClass(c);this.$nextSignerLastName.removeClass(c);this.$nextSignerEmail.removeClass(c)}});b.namePanelView=Backbone.View.extend({template:App.Templates.Esign.signerDetailsPanel.name,isValid:false,previousVal:undefined,isActive:false,events:{"keyup .signerName":"updateStatus"},toTemplate:function(){return{signerNameLabel:(this.model.attributes.signerName?this.model.attributes.signerName:i18n.common.name_()),maxLength:255}},updateStatus:function(h){var g=this.getValue(),i=g!=="";if(this.isValid!==i){this.isValid=i;_.debounce(this.trigger("childPanelViews.namePanelView:validateDetails"),150,false)}},render:function(){this._super();this.$signerName=this.$(".signerName");return this},resetContent:function(){var h=App.appView.getSignatureModel().get("name"),g=this.model.get("user").name;this.$signerName.val(h?h:g);this.updateStatus()},getValue:function(){return jQuery.trim(this.$(".signerName").val())},setDataInModel:function(){App.appView.getSignatureModel().set("name",this.getValue())},cacheValInModel:function(){this.previousVal=App.appView.getSignatureModel().get("name")},restoreValInModel:function(){App.appView.getSignatureModel().set("name",this.previousVal)},setFocus:function(){this.$signerName.focus()}});b.emailPanelView=Backbone.View.extend({template:App.Templates.Esign.signerDetailsPanel.email,isValid:false,previousVal:undefined,isActive:false,events:{"input  .signerEmail":"updateStatus"},toTemplate:function(){return{signerEmailLabel:i18n.common.email()}},updateStatus:function(h){var g=this.getValue(),i=App.Utils.isValidEmail(g);if(i!==this.isValid){this.isValid=i;_.debounce(this.trigger("childPanelViews.emailPanelView:validateDetails"),150,false)}},render:function(){this._super();this.$signerEmail=this.$(".signerEmail");return this},resetContent:function(){var g=App.appView.getSignatureModel().get("email"),h=App.appView.model.get("user").email;this.$signerEmail.val(g?g:h);this.updateStatus()},setDataInModel:function(){App.appView.getSignatureModel().set("email",this.getValue())},cacheValInModel:function(){this.previousVal=App.appView.getSignatureModel().get("email")},restoreValInModel:function(){App.appView.getSignatureModel().set("email",this.previousVal)},getValue:function(){return jQuery.trim(this.$(".signerEmail").val())},setFocus:function(){this.$signerEmail.focus()}});var e=App.Views.ModalView.extend({alertTmpl:'<div class="alert alert-danger"">{{%errorMsg}}</div>',defaults:{title:i18n.js.esign_signername_title(),closeBtn:i18n.common.cancel(),onClick:false,onPrev:false,classes:"signerName-modal",hasHeaderDivider:true,keyboard:true,close:true,backdrop:"static",hasFooter:false,footer:{cancelButtonText:i18n.common.cancel(),prevButtonText:i18n.common.back(),nextButtonText:i18n.common.next()}},events:{"click .state-prev":"onPrev","click .state-next":"onNext","click button.close":"onCloseButton"},initialize:function(){this._super();this.unknownSigners=this.model.get("unknownSigners");this.isUnknownSignersPresent=this.unknownSigners&&this.unknownSigners.length>0;this.currentIndex=this.isUnknownSignersPresent&&this.shouldShowSignerDetailsDialog()?0:1;this.totalUnknownSigners=this.isUnknownSignersPresent?this.model.get("unknownSigners").length:0;this.detailsObject=this.createDetailsObject()},toTemplate:function(){var g=this.model.get("widget");return{nextSignerDetailsBodyText:this.getNextSignerDetailsBodyText(),signerDetailsBodyText:(g?this.getSignerDetailsBodyTextForWidget():(App.appView.model.isWrittenRequired()||App.appView.model.get("optionalWrittenActive")?i18n.js.esign_signername_written_paragraph():i18n.js.esign_signername_paragraph_rolebased(App.appView.model.get("role"))))}},onShown:function(){this.handleDisabledForNextSignerInputFields(false);(this.totalUnknownSigners>0)&&this.handleDisabledForCurrentSignerInputFields(true);for(var g=0;g<this.totalUnknownSigners;g++){this.detailsObject[g].view.showReadMoreLessButton()}},resizeFooter:function(){this.$modalHeight=this.$(".modal-content").getInnerHeight();if(App.Env.feature.ie){if(this.$modalHeight>=a){this.$(".footer").addClass("footer-next-signer-ie11")}else{this.$(".footer").removeClass("footer-next-signer-ie11")}}},getNextSignerDetailsBodyText:function(){if(this.options.isSaveWidgetView){return i18n.js2.esign_save_next_participants_dialog_title()}return i18n.js2.unknown_signer_paragraph_text()},getSignerDetailsBodyTextForWidget:function(){var h=false,g=false;this.detailsObject.forEach(function(i){if(i.isVisible){if(i.attributeName==="name"){h=true}if(i.attributeName==="email"){g=true}}});if(h&&g){return i18n.js.esign_widget_signername_and_email_paragraph_rolebased(App.appView.model.get("role"))}else{if(h){return i18n.js.esign_signername_paragraph_rolebased(App.appView.model.get("role"))}else{if(g){return i18n.js.esign_signeremail_paragraph_rolebased(App.appView.model.get("role"))}}}},updateUnknownSignerFieldValues:function(h){var i={};var g="echosign_unknownParticipant_";Object.keys(h).forEach(function(k){var l=h[k];var j={signingIndex:k.toString(),firstName:l.firstName.toString(),lastName:l.nextSignerLastName.toString(),email:l.nextSignerEmail.toString(),message:l.nextSignerMessage};i[g+k.toString()]=JSON.stringify(j)});App.appView.model.set("unknownParticipantFieldValues",i)},updateUnknownFieldsForAPI:function(g){var h=[];Object.keys(g).forEach(function(j){var k=g[j];var i={signingIndex:j.toString(),firstName:k.firstName.toString(),lastName:k.nextSignerLastName.toString(),email:k.nextSignerEmail.toString(),message:k.nextSignerMessage};h.push(i)});this.model.set("unknownParticipantInfo",h)},render:function(){var g=this;this.template=App.Templates.Esign.signerDetailsPanel.container;this._super();this.$modal=this.$(".signer-detail-container");this.$title=this.$(".modal-title");this.detailsObject.forEach(function(h){if(h.isVisible){h.view=g.createSubView(h);g.listenChildEvent(h.view,h.attributePanelViewName)}});if(!this.isUnknownSignersPresent){this.renderFooter(false);this.toggleStatePrevButton();this.displayNextState()}else{this.renderFooter(true);if(this.options.isSaveWidgetView){this.showPrevButtonForSaveWidgetView();this.setText(this.$title,i18n.js2.esign_save_next_participants_dialog_title()+i18n.js2.unknown_signer_title())}else{this.toggleStatePrevButton();this.setText(this.$title,i18n.js2.unknown_signer_title())}this.$primaryBtn.html(this.options.isSaveWidgetView?i18n.common.save():(this.shouldShowSignerDetailsDialog()?i18n.common.next():(App.appView.model.isWrittenRequired()||App.appView.model.get("optionalWrittenActive")?i18n.common.download():i18n.common.esign_click_to_submit_rolebased(App.appView.model.get("role")))));this.$primaryBtn.removeClass("disabled").prop("disabled",false)}return this},renderFooter:function(g){var h=this.defaults.footer,i=_.template(App.Templates.Esign.signerDetailsPanel.footer(h));this.$modal.append(i);this.$cancelBtn=this.$(".state-cancel");this.$prevBtn=this.$(".state-prev");this.$primaryBtn=this.$(".state-next");this.$primaryBtn.addClass("disabled").prop("disabled",true);g?this.nextSignerDetailsFooter():this.removeNextSignerDetailsFooter()},nextSignerDetailsFooter:function(){if(!App.Env.feature.ie){this.$(".footer").addClass("footer-next-signer")}else{this.$(".footer").addClass("footer-next-signer-ie11")}this.$primaryBtn.addClass("footer-primary-btn");this.$(".footer-btn-signerDetails").css("margin-top","10px")},removeNextSignerDetailsFooter:function(){this.$(".footer").removeClass("footer-next-signer");this.$primaryBtn.removeClass("footer-primary-btn")},onPrev:function(){if(!this.$prevBtn.hasClass("hidden-accessible")){if(this.options.isSaveWidgetView){App.EventBus.trigger("esignView:pdsmodalclosed",{emailchange:"enabled"});this.options.forcedSaveWidgetModal.renderInto(this.$mainContent).show();this.hide();return true}else{this.defaultPrevView();return false}}},onPrevShowNextSigner:function(){if(!this.$prevBtn.hasClass("hidden-accessible")){this.defaultPrevView()}return false},defaultPrevView:function(){this.currentIndex=this.currentIndex-1;this.toggleActiveState();this.updateSectionVisibilityForNextSignerDetails();this.changeNextBtnTextForNextSigner();this.updateModalTitleForNextSigner();this.nextSignerDetailsFooter();this.handleDisabledForNextSignerInputFields(false);this.handleDisabledForCurrentSignerInputFields(true);if(!this.options.isSaveWidgetView){this.toggleStatePrevButton();this.validateDetails()}},showForcedSaveWidgetModal:function(){if(!this.options.forcedSaveWidgetModal){this.options.forcedSaveWidgetModal=new App.Views.Esign.ForcedSaveWidgetModal({model:this.model});this.options.forcedSaveWidgetModal.renderInto(this.$mainContent).show()}else{this.options.forcedSaveWidgetModal.show()}},toggleActiveState:function(){this.detailsObject.forEach(function(g){if(g.isVisible){g.view.isActive=!g.view.isActive}})},toggleStatePrevButton:function(){this.$prevBtn.hasClass("hidden-accessible")?this.$prevBtn.removeClass("hidden-accessible"):this.$prevBtn.addClass("hidden-accessible");this.$prevBtn.prop("disabled")?this.$prevBtn.prop("disabled",false):this.$prevBtn.prop("disabled",true)},showPrevButtonForSaveWidgetView:function(){this.$prevBtn.removeClass("hidden-accessible");this.$prevBtn.prop("disabled",false)},updateSectionVisibilityForNextSignerDetails:function(){$("#nextSignerDetails").removeClass("hidden-accessible");$("#nextSignerPanelHeader").removeClass("hidden-accessible");$("#signerDetails").addClass("hidden-accessible");$("#signerDetailsBodyText").addClass("hidden-accessible")},changeNextBtnTextForNextSigner:function(){if(this.options.isSaveWidgetView){this.$primaryBtn.html(i18n.common.save())}else{this.$primaryBtn.html(i18n.common.next())}},updateModalTitleForNextSigner:function(){this.setText(this.$title,i18n.js2.unknown_signer_title())},navigateToFirstParticipantDefinedSignerDetailsModal:function(){if(this.options.isSaveWidgetView){App.EventBus.trigger("esignView:pdsmodalopened",{emailchange:"disabled"})}var g=this.currentIndex-1;while(g>=0){this.onPrevShowNextSigner();if(this.$prevBtn.hasClass("hidden-accessible")){return}g--}},show:function(){this._super();if(this.isUnknownSignersPresent){this.navigateToFirstParticipantDefinedSignerDetailsModal()}this.resetContent();this.detailsObject.every(function(g){if(g.isVisible){g.view.setFocus();return false}return true})},listenChildEvent:function(g,h){this.listenTo(g,"childPanelViews."+h+":validateDetails",this.validateDetails)},createSubView:function(i){var h=i.attributePanelViewName,g=null;if(h==="nextSignerPanelView"){g=new b[h]({model:this.model,unknownSignerIndex:i.unknownSignerIndex});g.renderInto(this.$("#nextSignerDetails"))}else{g=new b[h]({model:this.model});g.renderInto(this.$("#signerDetails"))}return g},onNext:function(){this.currentIndex=this.currentIndex+1;var g=this.model.get("widget");this.removeAlertDanger();this.cacheValInModel();this.detailsObject.forEach(function(h){if(h.isVisible){h.view.setDataInModel()}});if(this.isUnknownSignersPresent&&!this.validateIfToNavigateToNextDialog()){this.currentIndex--;return false}this.handleDisabledForNextSignerInputFields(true);this.handleDisabledForCurrentSignerInputFields(false);if(g){this.listenTo(App.EventBus,"esignView:WidgetEmailInvalid",this.widgetEmailInvalid);this.listenTo(App.EventBus,"esignView:submitWidgetSuccess",this.widgetEmailSuccess);this.listenTo(App.EventBus,"esignView:widgetErrorExceptEmail",this.widgetErrorExceptEmail)}if(this.currentIndex<=1&&!this.options.isSaveWidgetView){this.displayNextState()}if(this.shouldShowSignerDetailsDialog()){this.handleDisabledForNextSignerInputFields(true);return false}if(this.isUnknownSignersPresent&&!this.model.get("unknownSignersPrefilled")){this.updateUnknownSignerList()}if(this.currentIndex>1){this.model.set("unknownSignersPrefilled",true);this.$primaryBtn.addClass("disabled").prop("disabled",true);if(!g){this.clear()}App.EventBus.trigger("esignView:submitAgreement");this.hide();return true}if(this.options.isSaveWidgetView){App.EventBus.trigger("esignView:saveWidgetAgreement")}return true},onCancel:function(){if(this.options.isSaveWidgetView){this.showForcedSaveCancelConfirmationModal();App.EventBus.trigger("esignView:pdsmodalclosed",{emailchange:"enabled"});this.hide();App.EventBus.trigger("esignView:addAutoSuggestion")}},onKeydown:function(g){this._super(g);if(App.Utils.KEY.isEsc(g)){this.onCancel()}},displayNextState:function(){this.toggleActiveState();this.validateDetails();this.displaySignerDetailsPage()},displaySignerDetailsPage:function(){if(this.isUnknownSignersPresent){this.toggleStatePrevButton()}this.updateSectionVisibility();this.changeNextBtnText();this.updateModalTitle();this.removeNextSignerDetailsFooter()},handleDisabledForNextSignerInputFields:function(g){$(".nextSignerName").prop("disabled",g);$(".nextSignerLastName").prop("disabled",g);$(".nextSignerEmail").prop("disabled",g)},handleDisabledForCurrentSignerInputFields:function(g){$(".signerEmail").prop("disabled",g);$(".signerName").prop("disabled",g)},updateUnknownSignerList:function(){var g=this.createUnknownSignerList();this.updateUnknownSignerFieldValues(g);this.model.set("unknownSignerList",g)},createUnknownSignerList:function(){var h=[];for(var g=0;g<this.totalUnknownSigners;g++){h[g]={firstName:this.model.get("nextSignerFirstName"+g),nextSignerLastName:this.model.get("nextSignerLastName"+g),nextSignerEmail:this.model.get("nextSignerEmail"+g),nextSignerMessage:this.model.get("nextSignerMessage"+g),signerIndex:this.unknownSigners&&this.isUnknownSignersPresent?this.unknownSigners[g].signerIndex:0}}return h},updateSectionVisibility:function(){$("#nextSignerDetails").addClass("hidden-accessible");$("#nextSignerPanelHeader").addClass("hidden-accessible");$("#signerDetails").removeClass("hidden-accessible");$("#signerDetailsBodyText").removeClass("hidden-accessible")},updateModalTitle:function(){this.setText(this.$title,i18n.js.esign_signername_title())},changeNextBtnText:function(){this.$primaryBtn.html(App.appView.model.isWrittenRequired()||App.appView.model.get("optionalWrittenActive")?i18n.common.download():i18n.common.esign_click_to_submit_rolebased(App.appView.model.get("role")))},validateIfToNavigateToNextDialog:function(){var k=false;for(var l=0;l<this.totalUnknownSigners;l++){var j=this.model.get("nextSignerFirstName"+l),i=this.model.get("nextSignerLastName"+l),h=this.model.get("nextSignerEmail"+l);var m=this.unknownSigners[l]?this.unknownSigners[l].required:false;var g=this.isInvalidDetailProvided(j,i,h,m);if(g){k=this.detailsObject[l].view.highlightErrorObject(k)}else{this.detailsObject[l].view.removeError()}}if(k){return false}return true},isInvalidDetailProvided:function(j,i,h,k){if(j===""&&i===""&&h===""&&!k){return false}var g=this.areValidDetailsProvided(j,i,h);if(!k&&g){return false}if(k&&g){return false}return true},areValidDetailsProvided:function(i,h,g){return i!==""&&h!==""&&App.Utils.isValidEmail(g)},shouldShowSignerDetailsDialog:function(){var h=App.appView.getSignatureModel(),j=h&&h.get("name"),g=h&&h.get("email");if(!j){var i=App.appView.getStampModel();j=i&&i.get("name")}return !this.options.isSaveWidgetView&&((this.model.shouldCollectSignerName()&&!j)||(this.model.shouldCollectSignerEmail()&&!g))},setText:function(h,g){if(_.isUndefined(g)){return}h.text(g)},cacheValInModel:function(){this.detailsObject.forEach(function(g){if(g.isVisible){g.view.cacheValInModel()}})},restoreValInModel:function(){this.detailsObject.forEach(function(g){if(g.isVisible){g.view.restoreValInModel()}})},widgetEmailInvalid:function(g){App.Utils.hideInterstitial();if(!this.$el.hasClass(".alert-danger")){this.$el.find("#errorDialog").html(_.template(this.alertTmpl)({errorMsg:g}))}this.detailsObject.forEach(function(h){if(h.attributeName==="email"){h.view.isValid=false}});this.restoreValInModel();this.show()},widgetErrorExceptEmail:function(){this.restoreValInModel();this.clear()},widgetEmailSuccess:function(){this.clear()},stopListeningChildEvent:function(g,h){this.stopListening(g,"childPanelViews."+h+":validateDetails")},createDetailsObject:function(){var j=[],g={},i={},k={};if(this.isUnknownSignersPresent){for(var h=0;h<this.totalUnknownSigners;h++){g={attributeName:"nextSignerAttributeName",attributePanelViewName:"nextSignerPanelView",isVisible:true,unknownSignerIndex:h};j.push(g)}}i={attributeName:"name",attributePanelViewName:"namePanelView",isVisible:this.isNameEmptyInModel()&&this.model.shouldCollectSignerName()};j.push(i);k={attributeName:"email",attributePanelViewName:"emailPanelView",isVisible:this.isEmailEmptyInModel()&&this.model.shouldCollectSignerEmail()};j.push(k);return j},isNameEmptyInModel:function(){return !App.appView.getSignatureModel().get("name")&&!App.appView.getStampModel().get("name")},isEmailEmptyInModel:function(){return !App.appView.getSignatureModel().get("email")},onHidden:function(){$("body").find(".btn-primary.click-to-esign").trigger("focus")},resetContent:function(){this.detailsObject.forEach(function(g){if(g.isVisible){g.view.resetContent()}})},clear:function(){var g=this;this.$el.modal("hide");if(this.model.get("widget")){this.stopListening(App.EventBus,"esignView:WidgetEmailInvalid");this.stopListening(App.EventBus,"esignView:submitWidgetSuccess");this.stopListeningChildEvent(App.EventBus,"esignView:widgetErrorExceptEmail")}this.detailsObject.forEach(function(h){if(h.isVisible){g.stopListeningChildEvent(h.view,h.attributePanelViewName)}})},validateDetails:function(){var g=true;this.detailsObject.forEach(function(h){if(h.isVisible&&h.view.isActive){g=g&&h.view.isValid}});this.toggleSubmitButton(!g)},toggleSubmitButton:function(g){this.$primaryBtn.toggleClass("disabled",g).prop("disabled",g);if(this.options.isSaveWidgetView){this.$primaryBtn.removeClass("disabled").prop("disabled",false)}},removeAlertDanger:function(){if(this.$el.find(".alert-danger")){this.$el.find(".alert-danger").remove()}},showForcedSaveCancelConfirmationModal:function(){if(!this.forcedSaveCancelConfirmationModal){this.forcedSaveCancelConfirmationModal=new App.Views.Esign.ForcedSaveCancelConfirmationModal({model:this.model,parentContext:this});this.forcedSaveCancelConfirmationModal.renderInto(this.$mainContent).show()}else{this.forcedSaveCancelConfirmationModal.show()}},onClose:function(){this.onCancel()}});App.ns("Views.Esign").SignerDetailsPanelView=e}());(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.messageToSignerContent,defaults:{classes:"message-to-signer-modal",hasHeaderDivider:false,keyboard:true,closeBtn:false},toTemplate:function(){var b={showClose:false};return _.extend({},App.appView.getMessageToSignerTemplateData(),b)}});App.ns("Views.Esign").SignerMessageModal=a}());(function(){var a=App.ns("Views.Esign").SignaturePanelView;var b=a.extend({panelDoneEvent:"esignView:stampDone",fileMimeTypes:["image/png","image/jpeg"],MAX_IMAGE_DIMENSION:5000,getIntent:function(){return"stamp"},getModel:function(){return App.appView.getStampModel()},_getSaveList:function(){return[]},_getMobileCaptureTabs:function(){return"i"},_allowImage:function(){return true},_allowScribble:function(){return false},_allowTyped:function(){return false},isBackGroundRemovalSupported:function(){return false},_imageTransform:function(f){var e=jQuery.Deferred(),c=new FileReader(),d,h=App.appView.model.get("maxUploadableImageSize");function g(i){var j=i.match(new RegExp(/data:([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/));return j[j.length-1]}if(this.fileMimeTypes.indexOf(f.type)===-1){e.reject(null,i18n.js.esign_message_invalid_image_type_error("png, jpeg, jpg"))}else{if(f.size&&f.size>h){e.reject(null,i18n.js.esign_message_image_max_size_error((h/(1024*1024)).toFixed(1)))}else{c.onload=_.bind(function(){d=document.createElement("img");d.onload=_.bind(function(){if((d.width>this.MAX_IMAGE_DIMENSION)||(d.height>this.MAX_IMAGE_DIMENSION)){e.reject(null,i18n.js.esign_message_image_max_dimension_error(this.MAX_IMAGE_DIMENSION))}else{e.resolve(g(c.result));d.parentNode.removeChild(d);d=undefined}},this);d.onerror=function(){e.reject()};d.style.display="none";d.src=c.result;document.body.appendChild(d)},this);c.readAsDataURL(f)}}return e.promise()}});App.ns("Views.Esign").StampPanelView=b}());(function(){var a=Backbone.View.extend({tagName:"div",className:"terms-of-use container-fluid",isAgreeToTermsChecked:false,events:{"click .tou-checkbox":"toggleCheckboxTooltip","click .click-to-esign":"onClickEsignBtn","click .cancel-tou-btn":"onClickCancelBtn","click .click-to-decline":"onClickDeclineBtn"},appEvents:{"esignView:showTOU":"onShowTOU","esignView:hideTOU":"onHideTOU","paymentView:successfullyPayed":"onClickToSign","paymentView:closePaymentForm":"closePaymentForm","paymentView:showPaymentFormWithErrorMessage":"showPaymentFormWithErrorMessage","asUiAgreement:changeText":"changeText","signature:authSuccess":"onAuthSuccess","esignView:toggleEsignBtn":"toggleEsignBtn"},initialize:function(){this.fieldsArray=this.model.attributes.agreement.attributes.latestDocumentData.fields;this.requireAgreeToTerms=this.model.isAgreeToTermsRequiredDuringESign();this.requireExplicitConsent=this.model.isExplicitConsentFlow();this.forcedReview=this.model.isForcedReviewRequired();this.termsOfUseViewOpen=false;this.$el.on("focusout",_.bind(this.onFocusOut,this));this.isNonSignerRole=this.model.isNonSignerRole();this.isApprove=this.model.isApprove();this.isAcceptor=this.model.isAcceptor();this.isCertifiedRecipient=this.model.isCertifiedRecipient();this.isFormFiller=this.model.isFormFiller();this.isDigitalSignPhase=this.model.get("isDigitalSignPhase");this.isWrittenRequired=this.model.isWrittenRequired();this.isReadyForDigitalSignature=this.model.get("isReadyForDigitalSignature");this.isRemoteDigSigRemoteSigningAvailable=App.appView.model.isDigSigRemoteSigning();this.isPrefill=this.model.isPrefill();this.isAgentDelegate=this.model.isAgentDelegate();this.showPhishingWarningPayment=this.model.get("showPhishingWarningPayment");this.showPhishingWarningWebForm=this.model.get("showPhishingWarningWebForm");this.hasAlwaysVisibleFooter=this.model.get("hasAlwaysVisibleFooter");this.isNotarySigner=this.model.isNotarySigner();this.touFrame=new App.Views.Esign.TOUFrame({container:this.$el,linkSelector:".tou-content"})},render:function(){var b=this.termsContainerData();if(App.Env.feature.isMobileBrowser){this.$el.html(App.Templates.Esign.termsContainerMobile(b))}else{this.$el.html(App.Templates.Esign.termsContainerDesktop(b))}this.$agreeToTermsCheckbox=this.$(".tou-checkbox");this.$clickToSignBtn=this.$(".click-to-esign");this.createTooltip();if(this.hasAlwaysVisibleFooter){App.EventBus.trigger("esignView:showTOU")}return this},createTooltip:function(){this.$agreeToTermsCheckbox.tooltip({sanitize:false,animation:true,trigger:"manual",placement:"top",title:i18n.js.esign_agree_terms_checkbox_tooltip(),container:this.$(".tou-content")})},termsContainerData:function(){var b={disabled:"",isSendLimitExceeded:App.appView.model.attributes.isSendLimitExceeded,clickToEsign:this.getTermsOfUseButtonText(),esignMarketingBrand:this.model.get("esignMarketingBrand"),labelFinish:i18n.js.esign_finish(),termsText:App.Templates.Esign.termsText(this.termsTextData()),showTerms:!this.isAgentDelegate&&!this.model.isShowNoTermsFlow(),showPhishingWarning:(this.showPhishingWarningWebForm&&this.model.get("widget"))||(this.showPhishingWarningPayment&&this.model.get("isAgreementPayable")),phishingWarningText:App.Templates.Esign.phishingWarningText({messageText:i18n.common.esign_phishing_warning()}),analyticsToken:this.isPrefill?"prefill":this.isDigitalSignPhase?"dsign":this.isAgentDelegate?"delegOpen":this.isApprove?"approve":this.isAcceptor?"accept":this.isCertifiedRecipient?"acknowledge":this.isFormFiller?"formFill":"esign",cancelButtonTxt:i18n.common.cancel(),cancelAnalyticsToken:"tou:cancel",declineButtonTxt:i18n.js.esign_refusal_decline(),isNotarySigner:this.isNotarySigner,hasAlwaysVisibleFooter:this.hasAlwaysVisibleFooter};if(!b.termsText.trim()){b.showTerms=false}return b},termsTextData:function(){var e={requireExplicitConsent:this.requireExplicitConsent,requireAgreeToTerms:this.requireAgreeToTerms,forcedReview:this.forcedReview,termsOfServiceUrl:this.model.get("termsOfServiceUrl"),consumerDisclosureURL:this.model.get("consumerDisclosureURL"),agreeToTermsEntity:this.model.get("agreeToTermsEntity"),isNotarySigner:this.isNotarySigner,messageText:this.isPrefill?i18n.js.esign_thank_you_for_prefilling():""},g=this.model.get("postSignRedirectUrl"),d=this.model.get("customerTermsURL"),f=this.model.get("customerConsumerDisclosureUrl"),b=this.model.get("role"),c;if(d&&f){if(e.isNotarySigner){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_custom_terms_notary_signer(f,e.agreeToTermsEntity,d)}else{e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_custom_terms_with_company_name_rolebased(b,e.agreeToTermsEntity,d,f,e.agreeToTermsEntity)}}else{if(d){if(e.isNotarySigner){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_custom_terms_notary_signer(e.consumerDisclosureURL,e.agreeToTermsEntity,d)}else{e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_custom_terms_with_company_name_rolebased(b,e.agreeToTermsEntity,d,e.consumerDisclosureURL,e.agreeToTermsEntity)}}else{if(f){if(e.isNotarySigner){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_notary_signer(f,e.agreeToTermsEntity)}else{if(e.agreeToTermsEntity){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_with_company_name_rolebased(b,f,e.agreeToTermsEntity)}else{e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_rolebased(b,f)}}}else{if(e.isNotarySigner){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_notary_signer(e.consumerDisclosureURL,e.agreeToTermsEntity)}else{if(e.agreeToTermsEntity){e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_with_company_name_rolebased(b,e.consumerDisclosureURL,e.agreeToTermsEntity)}else{e.agreeToTermsText=i18n.js2.esign_agree_to_terms_no_checkbox_main_rolebased(b,e.consumerDisclosureURL)}}}}}e.agreeToNotarization=i18n.common.esign_agree_to_notarization_label();if(g){c=document.createElement("a");c.href=this.model.get("postSignRedirectUrl");e.redirectDisclaimer=i18n("redirect_disclaimer",c.hostname)}else{e.redirectDisclaimer=null}if(e.requireExplicitConsent||e.forcedReview){if(e.agreeToTermsEntity){e.explicitConsentText=i18n.js2.esign_explicit_consent_before_completion_with_company_name_rolebased(b,e.agreeToTermsEntity)}else{e.explicitConsentText=i18n.js2.esign_explicit_consent_before_completion_rolebased(b)}}return e},updateClickToSignBtn:function(){this.$clickToSignBtn.html(this.getTermsOfUseButtonText())},getTermsOfUseButtonText:function(){var b="";if(this.model.get("isAgreementPayable")){App.Views.lazyloadify(function(){App.Views.Esign.PaymentUtils.changeToPayableButton(this.model)},this)}if(this.isPrefill){b=i18n("esign_click_to_send")}else{if(this.isNonSignerRole||this.isAgentDelegate){b=App.Env.feature.isMobileBrowser?i18n.mobile.esign_click_to_esign_rolebased(this.model.get("role")):i18n.common.esign_click_to_esign_rolebased(this.model.get("role"))}else{if(this.isWrittenRequired||this.model.get("optionalWrittenActive")){b=i18n.js.esign_next()}else{if(this.isDigitalSignPhase){b=this.isRemoteDigSigRemoteSigningAvailable?this.model.get("isDigitalSignatureSigningRemotely")?i18n("esign_click_to_sign"):i18n.js.esign_digsig_continue_to_sign():i18n.common.esign_click_to_digitally_sign()}else{b=i18n("esign_click_to_sign")}}}}return b},onShowTOU:function(){var d=this,c,e,b;if(this.termsOfUseViewOpen){return}this.minHeightOfTOU=this.$el.css("minHeight");this.updateClickToSignBtn();this.$el.css({minHeight:"0",height:"0",display:"block"}).animate({marginBottom:"-="+0,height:"+="+d.minHeightOfTOU},300,"",function(){d.termsOfUseViewOpen=true;App.EventBus.trigger("esignView:TOUState",{visible:true});d.$el.css({height:"auto",minHeight:d.minHeightOfTOU,overflow:"visible"});d.showEsignMarketingSticky();c=jQuery(document.activeElement);if(c.is(".coachmark")||c.is("body")){e=d.$(".tou-checkbox:not(:checked):tabbable"),b=d.$(".click-to-esign:tabbable");if(e.length){e.focus()}else{if(b.length){b.focus()}}}})},shouldShowEsignMarketingSticky:function(){return !this.$clickToSignBtn.hasClass("disabled")&&!App.Env.feature.isMobileBrowser&&((this.isRemoteDigSigRemoteSigningAvailable&&this.isDigitalSignPhase)||!this.isDigitalSignPhase)&&!this.isNonSignerRole&&!this.isAgentDelegate},showEsignMarketingSticky:function(){var c=null,b=0;if(this.shouldShowEsignMarketingSticky()){c=jQuery(".esign-marketing-sticky:visible");if(c.length>0){b=parseFloat(c.css("bottom"));c.css({bottom:(b+50)+"px",opacity:0});c.stop(true,true).animate({bottom:b,opacity:1},1000,"").animate({opacity:1},2000).animate({opacity:0},1000,"")}}},showTooltip:function(){this.$agreeToTermsCheckbox.tooltip("show")},hideTooltip:function(){this.$agreeToTermsCheckbox.tooltip("hide")},onHideTOU:function(){var b=this;if(!this.termsOfUseViewOpen||this.hasAlwaysVisibleFooter){return}this.hideTooltip();this.$el.animate({marginBottom:"-="+b.minHeightOfTOU},300,"",function(){b.$el.hide();b.resetContent();b.termsOfUseViewOpen=false;App.EventBus.trigger("esignView:showFooter");App.EventBus.trigger("esignView:TOUState",{visible:false})})},toggleCheckboxTooltip:function(){if(!this.requireAgreeToTerms||this.requireExplicitConsent){return}this.isAgreeToTermsChecked=this.$agreeToTermsCheckbox.is(":checked");if(this.hasAlwaysVisibleFooter){App.EventBus.trigger("esign:toggleTOU",this.isAgreeToTermsChecked)}else{App.EventBus.trigger("esignView:toggleEsignBtn")}if(this.isAgreeToTermsChecked){this.hideTooltip()}else{this.showTooltip()}this.model.set("isAgreeToTermsChecked",this.isAgreeToTermsChecked)},resetContent:function(){if(this.requireAgreeToTerms&&!this.requireExplicitConsent){this.$agreeToTermsCheckbox.prop("checked",false)}this.$el.css({minHeight:this.minHeightOfTOU,height:"auto",marginBottom:0})},changeText:function(c){var b=this;App.Views.lazyloadify(function(){App.Views.Esign.PaymentUtils.changeText(b,c)},this)},onClickEsignBtn:function(){var b=this;if(this.model.get("isAgreementPayable")){if(App.Views.Esign.PaymentUtils){App.Views.Esign.PaymentUtils.createAndShowPaymentModal(b)}}else{if(this.model.get("isMultipleEsignAuthEnabled")&&this.model.get("isLastEsignReauthenticationEnabled")&&!App.appView.model.isPrefill()){App.Utils.MultipleEsignAuth.showWindowForAuth(this)}else{this.onClickToSign()}}},toggleEsignBtn:function(){this.$clickToSignBtn.prop("disabled",!this.shouldEnableEsignBtn())},shouldEnableEsignBtn:function(){return App.appView.fieldsViewer.collection.getTodoCount()===0&&!this.shouldCheckTOUCheckbox()},shouldCheckTOUCheckbox:function(){return !this.requireExplicitConsent&&this.requireAgreeToTerms&&!(this.isPrefill||this.$agreeToTermsCheckbox.is(":checked"))},onClickCancelBtn:function(){this.onHideTOU();this.touFrame.hideFrame();App.EventBus.trigger("termsOfUse:forceHide")},onClickDeclineBtn:function(b){App.EventBus.trigger("agreementView:showReject",b)},closePaymentForm:function(){if(this.paymentModalView){this.paymentModalView.hide()}},showPaymentFormWithErrorMessage:function(b){if(this.paymentModalView){this.paymentModalView.show();this.paymentModalView.handleErrors(b)}},onAuthSuccess:function(c){var b=c.fieldCid===this.cid;if(b){this.onClickToSign()}},onClickToSign:function(){var c,e,b,d;if(App.appView.model.attributes.isAgreementPayable){this.closePaymentForm()}if(this.isAgentDelegate){App.appView.showDelegateModal()}else{if(this.shouldCheckTOUCheckbox()){this.showTooltip()}else{if((this.isWrittenRequired||this.model.get("optionalWrittenActive"))&&!this.isPrefill){App.appView.showDownloadToSignModal();App.appView.timelineView.setActiveStep(1)}else{if(App.appView.model.isDigSigRemoteSigning()&&App.appView.fieldsViewer.hasDigitalSignatureField()&&this.model.get("isDigitalSignatureSigningRemotely")){App.EventBus.trigger("digSigFieldView:applyCloudSignData");if(App.appView.model.get("isReadyForUIDSigning")){this.digSigPinAndOtpModalView=new DigSigUI.DigSigUIDView()}else{c=App.appView.fieldsViewer.collection.findWhere({inputType:App.Models.Field.INPUT_TYPES.PDF_SIGNATURE});b=c.get("digSigProviderChoice").get("id");if(b==="singpass"){if(this.model.get("isSingPassServiceAvailable")){window.fnNdiPluginStart()}}else{e=c.get("selectedCertificateModel");if(!this.digSigPinAndOtpModalView){this.digSigPinAndOtpModalView=new DigSigUI.PinAndOtp()}this.digSigPinAndOtpModalView.render()}}}else{App.EventBus.trigger("esignView:submitAgreement")}}}}},onFocusOut:function(){this.hideTooltip()}});App.ns("Views.Esign").TermsOfUse=a}());(function(){var a=App.Views.Esign.TermsOfUse.extend({appEvents:App.Views.inherit("appEvents",{"agreementView:documentReviewed":"onDocumentReviewed"}),termsContainerData:function(){return _.extend(this._super(),{disabled:this.model.eSignRequiresDocumentReview()&&!App.appView.isDocumentReviewed?"disabled":""})},render:function(){this._super();this.$hideOnForcedReview=this.$(".hide-on-forced-review");this.$hideOnForcedReview.css("display","none");this.$hideOnForcedReview.addClass("hide-tou-content");this.$("section[forcedReviewDocBeforeTerms]").replaceWith(App.Templates.Esign.forcedReviewDocBeforeTerms({forcedReviewDocBeforeTermsText:i18n.js.esign_req_forced_review_doc_before_terms()}));this.$forcedReviewBeforeTerms=this.$(".fr-doc-before-terms");return this},onDocumentReviewed:function(){this.$forcedReviewBeforeTerms.hide();this.$hideOnForcedReview.css("display","block");this.$hideOnForcedReview&&this.$hideOnForcedReview.removeClass("hide-tou-content");this.$clickToSignBtn.removeClass("disabled");this.showEsignMarketingSticky()}});App.ns("Views.Esign").TermsOfUseNeedsDocReview=a}());(function(){var b={"true":{"true":"#mainContent, #mainContent .explicit-consent-wrapper","false":"#mainContent .explicit-consent-wrapper"},"false":{"true":"#mainContent, #footer .hud-container, #es-underlay, #contentSubHeader","false":"#mainContent, #contentSubHeader, #footer .hud-container, #es-underlay"}};var a=Backbone.View.extend({el:"#tou-frame",events:{"click button.cancel":"hideFrame"},initialize:function(){this.$touFrameContent=this.$el.find("section");this.options.container.on("click",this.options.linkSelector,_.bind(this.onLinkClick,this))},onLinkClick:function(d){this.$lastClickedEl=null;var c=d.target.getAttribute("href");if(c&&d.target.tagName==="A"&&!d.metaKey&&/\.adobe\.com\//i.test(c)){this.showFrame(c);this.$lastClickedEl=jQuery(d.target);return false}},getElementsToHide:function(){return b[String(!!this.options.isExplicitConsent)][String(!!App.Env.feature.isMobileBrowser)]},hideElements:function(){jQuery(this.getElementsToHide()).hide()},showElements:function(){jQuery(this.getElementsToHide()).show()},showFrame:function(d){this.hideElements();this.isDelegateModalOpen=jQuery(".delegateModal").hasClass("show");this.isDeclineModalOpen=jQuery(".reject-modal").hasClass("show");this.isLiquidModeDialogOpen=jQuery("#mobile-modal-dialog").hasClass("show");if(this.isDelegateModalOpen){App.EventBus.trigger("esignView:hideDelegateModal")}if(this.isDeclineModalOpen){App.EventBus.trigger("esignView:hideDeclineModal")}if(this.isLiquidModeDialogOpen){App.EventBus.trigger("agreementView:hideMobileModalView")}App.Utils.showInterstitial({text:"",backdrop:false,hideAfter:3000});var f=document.createElement("iframe"),g=jQuery("#header").height(),c=App.Env.feature.isMobileBrowser?0:jQuery("#footer").height(),e={"margin-top":g,height:"calc(100vh - "+(g+c)+"px)"};f.src=d;this.$el.css(e).show();this.$touFrameContent.empty().append(f);this.$el.find("button.cancel").focus()},hideFrame:function(){this.$el.hide();this.$touFrameContent.empty();App.Utils.hideInterstitial();this.showElements();if(this.isDelegateModalOpen){App.EventBus.trigger("esignView:showDelegateModal")}if(this.isDeclineModalOpen){App.EventBus.trigger("esignView:showDeclineModal")}if(this.isLiquidModeDialogOpen){App.EventBus.trigger("agreementView:showMobileModalView")}this.isDelegateModalOpen=false;this.isDeclineModalOpen=false;this.isLiquidModeDialogOpen=false;if(this.$lastClickedEl){this.$lastClickedEl.focus()}}});App.ns("Views.Esign").TOUFrame=a}());App.Views.lazyloadify(function(){var b=10;var a=App.Views.FileUpload.extend({settings:{send_file_name:false,file_data_name:"image",filters:[{title:i18n.js.composePageController_imageFiles(),extensions:"bmp,jpg,jpeg,gif,png"}],max_file_size:b+"mb",multi_selection:false,responseType:"text",headers:{accept:"image/*;encoding=base64"}},initialize:function(){this.panel=this.options.panel;this.signatureImageAvailable=this.options.signatureImageAvailable;this.settings.url=this.getUrl();this.settings.browse_button=this.panel.clickAreaID;this.settings.container=this.panel.clickAreaContainerID;this._super()},getUrl:function(){var c;if(this.signatureImageAvailable){c=App.Api.getMicroserviceUri("backgroundremoval/signatureImage");if(App.Env.feature.ie9){c+="?return_base64_for_ie9"}return c}return App.Api.getServiceUri("signatureImage")},getMaxUploadSizeAllowed:function(){return b*1024*1024},onFilesAdded:function(d,e,c){this._super.apply(this,arguments);this.panel.onImageAdded(e)},onFileUploaded:function(c,e,d){var f="image/png",g=App.Utils.changeFileExtension(e.name,"png");this.panel.onImageUploaded(d.response,g,f)},onError:function(c,d){this._super.apply(this,arguments);this.panel.onFileError(d)}});App.ns("Views.Esign").UploadSignatureImage=a});(function(){var b=App.ns("Views.Esign.PostSign");var a=b.extend({className:function(){return this._super()+" digsig-download"},initialize:function(){this._super();App.Service.postEvent({type:"PAGE_LOAD",data:{name:"DIGSIG_DOWNLOAD"}})},getDigSigDownloadTemplateData:function(){var d={},e=this.getAgreement(),c=e.get("name")+".pdf";d.download=i18n.js.esign_download_for_digsig();d.downloadUrl=e.get("downloadPDFUrl");d.title=i18n.js.esign_digital_sign_header();d.message=i18n.js.esign_open_in_reader_for_digsig_message_desktop();d.getReaderLinkText=i18n.js.esign_get_adobe_reader_message_with_link();return d},getDigSigSignOnDesktopTemplateData:function(){var d={},e=this.getAgreement(),c=e.get("name")+".pdf";d.title=i18n.js.esign_digital_sign_header();d.message=i18n.js.esign_open_in_reader_for_digsig_message();return d},postRender:function(){this._super();if(!App.Env.feature.isMobileBrowser){this.$(".post-sign-content").append(App.Templates.Esign.digSigDownload(this.getDigSigDownloadTemplateData()))}else{this.$(".post-sign-content").append(App.Templates.Esign.digSigSignOnDesktop(this.getDigSigSignOnDesktopTemplateData()))}}});App.ns("Views.Esign").DigSigDownloadView=a}());(function(){var a=Backbone.View.extend({maxPolls:100,maxErrors:3,decay:1.1,startingInterval:2000,stopped:true,currentInterval:null,currentDecay:null,errorCount:null,pollCount:null,start:function(){if(this.stopped){this.triggerEvent("reflowPoller:reflowUrlRequested");this.stopped=false;this.currentInterval=this.startingInterval;this.currentDecay=this.decay;this.checkReflowUrl()}},stop:function(){this.stopped=true},checkReflowUrl:function(){if(this.stopped){return}this.pollCount++;var b=App.appView.model.get("agreement");b.service.reflowPDFUrl(b.id,{callback:_.bind(this.handleReflowPDFUrlResult,this),errorHandler:_.bind(this.handleReflowPDFUrlError,this)})},handleReflowPDFUrlError:function(b){this.stop()},handleReflowPDFUrlResult:function(b){if(b){App.appView.model.set("reflowPdfUrl",b);App.appView.model.set("isReflowProcessingComplete",true);this.triggerEventAndStop("reflowPoller:reflowUrlComplete")}else{App.appView.model.set("isReflowProcessingComplete",false);this.scheduleNextStatusCheck()}},scheduleNextStatusCheck:function(){if(this.pollCount>=this.maxPolls){this.triggerEventAndStop("reflowPoller:maxPolls");return}if(this.errorCount>=this.maxErrors){this.triggerEventAndStop("reflowPoller:maxErrors");return}_.delay(_.bind(this.checkReflowUrl,this),this.getPollingDecayingInterval())},getPollingDecayingInterval:function(){this.currentInterval=(this.currentInterval*this.currentDecay);this.currentDecay=this.currentDecay*this.decay;App.Debug.log("info",this.currentInterval);return Math.round(this.currentInterval)},triggerEventAndStop:function(b){this.triggerEvent(b);this.stop()},triggerEvent:function(b){App.EventBus.trigger(b)}});App.ns("Views.Esign").ReflowPoller=a}());(function(){var a=Backbone.View.extend({tagName:"div",className:"reflow-view-container",displayTemplate:'<iframe frameBorder="0" src="{{% dvUrl}}{{% locale}}{{% assetUri}}"> </iframe>',render:function(){this._super();var e=this.$el,c=App.appView.model.get("dvUrl"),b=App.appView.model.get("locale"),d=App.appView.model.get("reflowPdfUrl");e.css("top",jQuery(".es-header").getHeight()+"px");e.append(_.template(this.displayTemplate)({dvUrl:c?c:"/public/reflowSign",locale:b?"?locale="+b:"",assetUri:d?(b?"&":"?")+"assetUri="+d:""}));return this},remove:function(){this._super()}});App.ns("Views.Reflow").ReflowView=a}());(function(){var a=Backbone.View.extend({_iframe:null,reflowBodyClass:"reflow-active",appEvents:{"reflowPoller:reflowUrlComplete":"checkButtonState"},render:function(){this._super();return this},toggleIFrame:function(){if(this._iframe!==null){this._iframe.$el.hide().remove();this._iframe.remove();this._iframe=null;jQuery("body").append(b).removeClass(this.reflowBodyClass);this.setHeaderTitle(i18n.js.dynamicview_show())}else{this._iframe=new App.Views.Reflow.ReflowView();var b=this._iframe.render().$el;jQuery("body").append(b).addClass(this.reflowBodyClass);this.setHeaderTitle(i18n.js.dynamicview_hide())}},setHeaderTitle:function(b){jQuery(".dynamic-view a").attr({"aria-label":b,title:b})},init:function(){var h=this,c=jQuery(".dynamic-view"),b=c.find(".icon-dynamic-view"),e=c.find("a"),d=App.appView.model.get("dvUrl"),g="";if(d){g=d.substring(0,d.lastIndexOf("/"))}c.css("display","list-item");b.css("background-image","url("+g+"/icons/AdobeSignDynamicView.png)");e.on("click",function(){if(e.hasClass("ready")){h.toggleIFrame.call(h)}});this.checkButtonState();if(!(App.appView.model.get("isReflowProcessingComplete"))){var f=new App.Views.Esign.ReflowPoller(App.appView.model.get("agreementId"));f.start()}},checkButtonState:function(){var b=jQuery(".dynamic-view").css("display","list-item").find("a");if(!(App.appView.model.get("isReflowProcessingComplete"))){b.addClass("not-ready");this.setHeaderTitle(i18n.js.esign_preparing_doc())}else{b.addClass("ready").removeClass("not-ready");this.setHeaderTitle(i18n.js.dynamicview_show())}return this}});App.ns("Views.Esign").ReflowViewer=a}());App.Views.lazyloadify(function(){if(_.isUndefined(window.DigSigUI)){return}var c=DigSigUI,b=App.Templates.Esign;var a=c.SignatureState.extend({state:{title:i18n.js.esign_signing_reason_appearance_title(),nextTxt:i18n.common.ok()},initialize:function(){this._super();this.signerName=null},toTemplate:function(){var f=i18n.js.esign_signing_reason_appearance_text1(),e=i18n("esign_signing_reason_appearance_text2"),d=!this.isSigningReasonAllowed()?"":this.isSigningReasonRequired()?i18n.js.esign_signing_reason_appearance_required_text():i18n.js.esign_signing_reason_appearance_optional_text(),g=_.template("{{m1}} {{m2}} {{m3}}");return{appearanceMessage:g({m1:f,m2:e,m3:d}),bulkSigningDisclaimer:null,isBulkSignEnabled:false,isReturningUser:false,notAvailableMessage:"",signaturePanelLink:i18n.js.esign_digsig_sigPanel_link()}},postRender:function(){this._super();this.$appliedSignature.find(".trefoil").remove()},onActive:function(){var d=!!this.cloudSignData.get("hasSignature");this.isDone=true;if(d){this.applySignature()}},validate:function(){this.isDone=!this.isSigningReasonAllowed()||this.validateSigningReason();if(this.isDone){App.EventBus.trigger("signature:signaturePreviewPanelClose",{viewId:this.cloudSignData.get("fieldId"),success:this.isDone,changed:true,nameChanged:this.signerName!==this.signatureModel.get("name"),name:this.signatureModel.get("name"),reason:this.getSigningReason()});this.signerName=this.signatureModel.get("name");this.removeError()}return this.isDone},toCertificateInfoData:function(){var f=this.signatureModel.get("name"),e=new Date(),h=this.getSigningReason(),d=h&&h.length>0,g={hasReason:d,reason:i18n.js.esign_signing_reason_label()+" "+(d?h:""),signedBy:i18n.js.esign_signing_reason_signed_by_label(f),signedDate:i18n.common.date()+":&nbsp;"+e.toString("yyyy-mm-dd HH:MM:ss")+App.Utils.getOffset(e)};return g},isSigningReasonAllowed:function(){return this.cloudSignData.get("isSigningReasonAllowed")},drawTypedSignature:function(e){var d=e;this.$signature.empty();this.$signature.html(this.signatureTypedTpl({name:d,cursiveFont:this.cursiveFont}));this.adjustTypedSignature()},adjustTypedSignature:function(){var d=this.signatureModel.get("name"),e=this.$signature.find(".signature-name"),f=App.Utils.getSignatureFontSize({width:this.$signature.getWidth(),height:this.$signature.getOuterHeight(),field:e,signed:true,signatureFontPct:0.7,cursiveFontMag:this.cloudSignData.get("cursiveFontMag"),text:d});e.css({width:this.$signature.getWidth(),"font-size":f+"px"})},sendError:function(e){var d={error:e,originator:this.cloudSignData.get("fieldId")};App.EventBus.trigger("state:error",d)}});App.ns("Views.Esign").SigningReason=a});App.Views.lazyloadify(function(){if(_.isUndefined(window.DigSigUI)){return}var b=DigSigUI;var a=b.StateTransitionModal.extend({onCloseButton:function(){var c=this;_.delay(function(){c.getActive().hide();c.trigger("stateModal:onCancel",{closeButton:true});c.onRemoveError();c.remove()},500)},navigate:function(c){this.remove()}});App.ns("Views.Esign").SigningReasonModal=a});(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.DownloadToSignModal,defaults:{title:i18n.js.esign_written_signature_download_print_sign_title(),closeBtn:i18n.common.cancel(),primaryBtn:i18n.common.download(),classes:"download-modal",hasHeaderDivider:false,keyboard:true,close:true},toTemplate:function(){return{innerText:i18n.js.esign_written_signature_download_print_sign_desc(),downloadPDFUrl:App.appView.model.get("agreement").get("downloadPDFUrl")}},render:function(){this._super();this.timelineView=new App.Views.Esign.WrittenTimeline({initialStep:1,isClickable:false});this.timelineView.renderInto("#download-timeline");this.$modalContent=this.$el.find(".modal-content");this.timelineView.$el.find(".timeline-outer").attr("tabindex",-1);return this},onClick:function(b){this.hide();ScAnalytics.logEvent(["download"]);App.EventBus.trigger("writtenSignature:download")},onClose:function(){App.appView.timelineView.setActiveStep(0)}});App.ns("Views.Esign").DownloadToSignModal=a}());(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.SwitchToWrittenModal,defaults:{title:i18n.js.esign_rather_written(),closeBtn:i18n.common.cancel(),primaryBtn:i18n.common.continue_next(),classes:"switch-to-written-modal",hasHeaderDivider:false,keyboard:true,close:true},toTemplate:function(){return{innerText:i18n.js.esign_rather_written_warning()}},onClick:function(b){App.EventBus.trigger("writtenSignature:switchToWritten")}});App.ns("Views.Esign").SwitchToWrittenModal=a}());App.Views.lazyloadify(function(){var b=50;var c="Account locked for this user, please try again later";var a=App.Views.FileUpload.extend({className:"upload-signed-document-wrapper container content",template:_.template(App.Templates.Esign.uploadSignedDocumentPage),settings:{browse_button:"upload-button",container:"upload-container",file_data_name:"Filedata",unique_names:true,chunk_size:0,multi_selection:false,isREST:false,filters:[{title:i18n.js.composePageController_allFiles(),extensions:"pdf,doc,docx,bmp,jpg,jpeg,gif,png,tif,tiff"},{title:i18n.js.composePageController_pdfFiles(),extensions:"pdf"},{title:i18n.js.composePageController_officeFiles(),extensions:"doc,docx"},{title:i18n.js.composePageController_imageFiles(),extensions:"bmp,jpg,jpeg,gif,png,tif,tiff"}]},events:{"click .download-link":"handleDownload","click .reject-link":"handleReject"},initialize:function(){this.settings.url=this.model.get("writtenSignatureUploadUrl");this.settings.max_file_size=this.model.get("maxWrittenUploadSize");jQuery("body").addClass("upload-signed-document-page");if(this.model.get("sessionId")){this.settings.headers={"x-adobesign-sessionid":this.model.get("sessionId")}}this._super()},render:function(){this.$el.html(this.template(this.getUploadSignedDocumentData()));this.hideFileInputForAccessibility();return this},getUploadSignedDocumentData:function(){var d={uploadDocumentImg:App.Env.root+"images/esignJS/WrittenSignature_Img_UploadDocument.png",uploadDocumentAltText:i18n.js.esign_written_signature_upload_image_alt_text(),uploadTitle:i18n.js.esign_written_signature_upload_title(),uploadDesc:i18n.js.esign_written_signature_upload_description(this.model.get("agreement").get("name"),this.model.get("adobeAcrobatReaderMobileAppUrl")),buttonText:i18n.js.esign_written_signature_upload_submit_button(),downloadAgainText:i18n.js.esign_written_signature_download_again(),wontSignText:i18n.js.esign_written_signature_wont_sign(),allowDecline:this.model.get("allowDecline")};return d},handleDownload:function(){var d=this.model.get("agreement").get("downloadPDFUrl");window.open(d).focus()},handleReject:function(){if(!this.rejectModalView){this.rejectModalView=new App.Views.Esign.RejectPanelView({model:this.model});this.$el.append(this.rejectModalView.render().el)}this.rejectModalView.show()},onFilesAdded:function(d,e){App.Utils.showInterstitial({text:i18n.js.esign_uploading_your_document()});this._super.apply(this,arguments)},onError:function(d,e){if(e.code===plupload.HTTP_ERROR&&e.status===413){this.lastError=i18n.js.esign_uploading_page_mismatch()}else{if(e.code===plupload.HTTP_ERROR&&e.status===415){this.lastError=i18n.js.invalid_file_type_for_written_upload()}else{if(e.code===plupload.HTTP_ERROR&&e.status===500&&e.response===c){this.lastError=i18n.common.error_agreement_migration_locked()}else{this._super.apply(this,arguments)}}}App.appView.getSignatureModel().unset("conversionProjectSecureId");App.Utils.hideInterstitial();App.Service.errorHandler(this.lastError)},onFileUploaded:function(d,g,e){this._super.apply(this,arguments);var f=this.lastFileUploadedResult;App.appView.getSignatureModel().set("conversionProjectSecureId",f);App.EventBus.trigger("esignView:submitAgreement")},remove:function(){jQuery("body").removeClass("upload-signed-document-page");this._super()},hideFileInputForAccessibility:function(){var d=this;if(!this.$label){this.$label=this.$("#upload-and-submit-btn-label");this.$btn=this.$("#upload-button")}_.delay(function(){if(!d.$input||d.$input.closest(d.$el).length===0){d.$input=d.$("input[type=file]");d.$label.attr("for",d.$input.attr("id"));d.$input.attr({tabindex:-1,"aria-hidden":true})}if(d.$input.is(":focus")){d.$btn.focus()}},b)},getUnsupportedFileTypeErrorStr:function(){return i18n.js.invalid_file_type_for_written_upload()}});App.ns("Views.Esign").UploadSignedDocumentView=a});(function(){var a=App.Views.ModalView.extend({template:App.Templates.Esign.WrittenInformationalModal,defaults:{title:i18n.js.esign_written_signature_informative_modal_title(),close:true,hasHeaderDivider:false,hasFooter:false,backdrop:true,keyboard:true,show:false,classes:"written-modal"},toTemplate:function(){var b=App.appView.fieldsViewer.hasFields();return{reviewAndFillClass:b?"review-and-fill-content":"review-content",reviewAndFillText:b?i18n.js.esign_written_steps_review_fill():i18n.js.esign_written_steps_review(),downloadAndSignText:i18n.js.esign_written_steps_download_sign(),uploadAndSubmitText:i18n.js.esign_written_steps_upload_submit()}}});App.ns("Views.Esign").WrittenInformationalModal=a}());(function(){var a=App.Views.Timeline.extend({defaults:{timelineLabel:i18n.js.esign_written_steps_review_fill(),numSteps:3,initialStep:0,isClickable:true,progressLabels:[i18n.js.esign_written_steps_review_fill(),i18n.js.esign_written_steps_download_sign(),i18n.js.esign_written_steps_upload_submit()]},events:{"click .timeline-outer":"onTimelineClick","keydown .timeline-outer":"onTimelineKeydown"},appEvents:{"writtenSignature:download":"onDownloadAgreement"},render:function(){this._super();this.$timeline=this.$el.find(".timeline-outer");return this},onTimelineClick:function(){if(!this.options.isClickable){return}this._showTimelineModal()},onTimelineKeydown:function(c){if(!this.options.isClickable){return}var b=App.Utils.KEY;if(b.isEnter(c)){this._showTimelineModal()}},_showTimelineModal:function(){this.initialWrittenInfoModal=new App.Views.Esign.WrittenInformationalModal({origTarget:this.$timeline});this.initialWrittenInfoModal.render();this.initialWrittenInfoModal.show()},onDownloadAgreement:function(){this.setActiveStep(1)}});App.ns("Views.Esign").WrittenTimeline=a}());(function($){$.fn.canvas=function(where){$(this).each(function(){var $this=$(this);var w=$this.width();var h=$this.height();if(!where){where="under"}$this.find(".cnvsWrapper").remove();$this.find(".cnvsCanvas").remove();var $canvas=$('<canvas class="cnvsCanvas" style="position:absolute;top:0px;left:0px;width:100%;height:100%;" width="'+w+'" height="'+h+'"></canvas>');if(where=="under"||where=="over"){$this.wrapInner('<div class="cnvsWrapper" style="position:absolute;top:0px;left:0px;width:100%;height:100%;border:0px;padding:0px;margin:0px;"></div>')}if(where=="under"||where=="unshift"){$this.prepend($canvas)}if(where=="over"||where=="push"){$this.append($canvas)}if($.browser.msie){var canvas;if(window.G_vmlCanvasManager){canvas=G_vmlCanvasManager.initElement($canvas.get(0))}else{canvas=$canvas.get(0)}$canvas=$(canvas)}this.cnvs=canvasObject($canvas,w,h);return this});return this};$.fn.uncanvas=function(){$(this).each(function(){this.cnvs.getTag().remove();this.cnvs=null});return this};$.fn.hidecanvas=function(){$(this).each(function(){this.cnvs.getTag().hide()});return this};$.fn.showcanvas=function(){$(this).each(function(){this.cnvs.getTag().show()});return this};$.fn.canvasraw=function(callback){$(this).each(function(){if(callback){eval(callback)(this.cnvs)}})};$.fn.canvasinfo=function(info){$(this).each(function(){info[info.length]={};info[info.length-1].width=this.cnvs.w;info[info.length-1].height=this.cnvs.h;info[info.length-1].tag=this.cnvs.$tag;info[info.length-1].context=this.cnvs.c})};$.fn.style=function(style){$(this).each(function(){this.cnvs.style(style);return this});return this};$.fn.beginPath=function(){$(this).each(function(){this.cnvs.beginPath();return this});return this};$.fn.closePath=function(){$(this).each(function(){this.cnvs.closePath();return this});return this};$.fn.stroke=function(){$(this).each(function(){this.cnvs.stroke();return this});return this};$.fn.fill=function(){$(this).each(function(){this.cnvs.fill();return this});return this};$.fn.moveTo=function(coord){$(this).each(function(){this.cnvs.moveTo(coord);return this});return this};$.fn.arc=function(coord,settings,style){$(this).each(function(){this.cnvs.arc(coord,settings,style);return this});return this};$.fn.arcTo=function(coord1,coord2,settings,style){$(this).each(function(){this.cnvs.arcTo(coord1,coord2,settings,style);return this});return this};$.fn.bezierCurveTo=function(ref1,ref2,end,style){$(this).each(function(){this.cnvs.bezierCurveTo(ref1,ref2,end,style);return this});return this};$.fn.quadraticCurveTo=function(ref1,end,style){$(this).each(function(){this.cnvs.quadraticCurveTo(ref1,end,style);return this});return this};$.fn.clearRect=function(coord,settings){$(this).each(function(){this.cnvs.clearRect(coord,settings);return this});return this};$.fn.strokeRect=function(coord,settings,style){$(this).each(function(){this.cnvs.fillRect(coord,settings,style);return this});return this};$.fn.fillRect=function(coord,settings,style){$(this).each(function(){this.cnvs.strokeRect(coord,settings,style);return this});return this};$.fn.rect=function(coord,settings,style){$(this).each(function(){this.cnvs.rect(coord,settings,style);return this});return this};$.fn.lineTo=function(end,style){$(this).each(function(){this.cnvs.lineTo(end,style);return this});return this};$.fn.polygon=function(start,blocks,settings,style){$(this).each(function(){this.cnvs.atomPolygon(start,blocks,settings,style)})};function canvasObject($canvas,width,height){var cnvs={};cnvs.w=width;cnvs.h=height;cnvs.$tag=$canvas;cnvs.c=$canvas.get(0).getContext("2d");cnvs.laststyle={fillStyle:"rgba( 0, 0, 0, 0.2)",strokeStyle:"rgba( 0, 0, 0, 0.5)",lineWidth:5};cnvs.getContext=function(){return this.c};cnvs.getTag=function(){return this.$tag};cnvs.deg2rad=function(deg){return 2*3.14159265*(deg/360)};cnvs.style=function(style){if(style){this.laststyle=style}for(var name in this.laststyle){this.c[name]=this.laststyle[name]}};cnvs.beginPath=function(){this.c.beginPath()};cnvs.closePath=function(){this.c.closePath()};cnvs.stroke=function(){this.c.stroke()};cnvs.fill=function(){this.c.fill()};cnvs.moveTo=function(coord){this.c.moveTo(coord[0],coord[1])};cnvs.arc=function(coord,settings,style){settings=$.extend({radius:50,startAngle:0,endAngle:360,clockwise:true},settings);if(style){this.style(style)}this.c.arc(coord[0],coord[1],settings.radius,this.deg2rad(settings.startAngle),this.deg2rad(settings.endAngle),settings.clockwise?1:0)};cnvs.arcTo=function(coord1,coord2,settings,style){settings=$.extend({radius:50},settings);if(style){this.style(style)}this.c.arcTo(coord1[0],coord1[1],coord2[0],coord2[1],settings.radius)};cnvs.bezierCurveTo=function(ref1,ref2,end,style){if(style){this.style(style)}this.c.bezierCurveTo(ref1[0],ref1[1],ref2[0],ref2[1],end[0],end[1])};cnvs.quadraticCurveTo=function(ref1,end,style){if(style){this.style(style)}this.c.quadraticCurveTo(ref1[0],ref1[1],end[0],end[1])};cnvs.clearRect=function(coord,settings,style){if(!coord){coord=[0,0]}settings=$.extend({width:this.w,height:this.h},settings);this.c.clearRect(coord[0],coord[1],settings.width,settings.height)};cnvs.fillRect=function(coord,settings,style){settings=$.extend({width:100,height:50},settings);if(style){this.style(style)}this.c.fillRect(coord[0],coord[1],settings.width,settings.height)};cnvs.strokeRect=function(coord,settings,style){settings=$.extend({width:100,height:50},settings);if(style){this.style(style)}this.c.strokeRect(coord[0],coord[1],settings.width,settings.height)};cnvs.rect=function(coord,settings,style){settings=$.extend({width:100,height:50},settings);if(style){this.style(style)}this.c.rect(coord[0],coord[1],settings.width,settings.height)};cnvs.lineTo=function(end,style){if(style){this.style(style)}this.c.lineTo(end[0],end[1])};cnvs.path=function(blocks){for(var i=0;i<blocks.length;i++){var arg1=null;var arg2=null;var arg3=null;var arg4=null;if(blocks[i].length>=2){arg1=blocks[i][1]}if(blocks[i].length>=3){arg2=blocks[i][2]}if(blocks[i].length>=4){arg3=blocks[i][3]}if(blocks[i].length>=5){arg4=blocks[i][4]}if(blocks[i][0]=="moveTo"){this.moveTo(arg1)}if(blocks[i][0]=="arc"){this.arc(arg1,arg2,arg3)}if(blocks[i][0]=="arcTo"){this.arcTo(arg1,arg2,arg3,arg4)}if(blocks[i][0]=="bezierCurveTo"){this.bezierCurveTo(arg1,arg2,arg3,arg4)}if(blocks[i][0]=="quadraticCurveTo"){this.quadraticCurveTo(arg1,arg2,arg3)}if(blocks[i][0]=="lineTo"){this.lineTo(arg1,arg2)}}};cnvs.atomPolygon=function(start,blocks,settings,style){settings=$.extend({fill:false,stroke:true,close:false},settings);this.style(style);if(settings.stroke){this.beginPath();this.moveTo(start);this.path(blocks);if(settings.close){this.moveTo(start);this.closePath()}this.c.fillStyle="rgba( 0, 0, 0, 0)";this.stroke()}this.style(style);if(settings.fill){this.beginPath();this.moveTo(start);this.path(blocks);if(settings.close){this.moveTo(start);this.closePath()}this.c.strokeStyle="rgba( 0, 0, 0, 0)";this.fill()}this.style(style)};return cnvs}})(jQuery);(function(c){ScribbleData={Results:[],signature:[],initials:[],NormalizedSignature:null,NormalizedInitials:null};var b=function(e,d){if([].each){[].each.call(e,d)}else{if(window._){_(e).each(d)}else{throw"ForEach not supported"}}};var a=(window.JSON&&JSON.stringify)||jQuery.compactJSON;c.fn.scribblePad=function(k){var f=this;var i=0;var h=false;var l=f.offset();var j=c.scribble;var n=false;var e;var d;var m=window.BrowserCheck?BrowserCheck.IsAndroidSafari():false;if(k){ScribbleData.Results=ScribbleData[k]=[]}else{ScribbleData.Results=[]}if(jQuery.browser.msie){l.left=l.left+10}f.canvas();var g={Start:function(){i=0;n=true;l=f.offset();if(jQuery.browser.msie){l.left=l.left+10}},Move:function(q,r){if(m&&r.type=="mousemove"){return}var p=e;e=q;if(!n){return}var o=ScribbleData.Results;if(o.length==0){d=new Date().getTime()}if(o.length==0||i==0){f.trigger("signature-pad:scribbleStart")}i++;if(i==1){return}f.style({strokeStyle:"rgba( 0, 0, 0, 1)",lineWidth:3}).beginPath().moveTo([p.x,p.y]).lineTo([q.x,q.y]).closePath().stroke();o.push([p.x,p.y,q.x,q.y,new Date().getTime()-d])},Stop:function(){if(n){f.trigger("signature-pad:scribbleStop")}n=false}};c("body").bind("mousedown",function(o){h=true}).bind("mouseup",function(o){h=false});f.bind("mousedown",function(p){if(jQuery.browser.mozilla){var o=window.getSelection();o.rangeCount&&o.collapseToStart()}if(document.selection){document.selection.empty()}g.Start();p.preventDefault()}).bind("mouseup",function(){g.Stop()}).bind("touchstart",function(){g.Start()}).bind("touchend",function(){g.Stop()}).bind("mousemove",function(o){g.Move({x:o.pageX-l.left,y:o.pageY-l.top},o)}).bind("touchmove",function(p){var o=p.originalEvent;o.preventDefault();if(o.targetTouches.length==0){return}g.Move({x:o.targetTouches[0].pageX-l.left,y:o.targetTouches[0].pageY-l.top},p)});f.bind("mouseleave",function(o){g.Stop()}).bind("mouseenter",function(o){if(h){g.Start()}})};c.fn.drawScribble=function(d){var f,e;var h=this;var g=3;if(d){e=d.data[0];if(d.scribbleData&&d.type){f=d.scribbleData.slice();ScribbleData.Results=ScribbleData[d.type]=f}else{if(d.saved){f=c.convertJSONToScribbleData(d.data)}else{f=c.convertJSONToScribbleData(d.data)}}}else{if(jQuery(h.parent()).is(".signature")){if(ScribbleData.NormalizedSignature==null){ScribbleData.NormalizedSignature=c.getNormalizedScribbleData({type:"signature"})}f=ScribbleData.NormalizedSignature}else{if(ScribbleData.NormalizedInitials==null){ScribbleData.NormalizedInitials=c.getNormalizedScribbleData({type:"initials"})}f=ScribbleData.NormalizedInitials}e=PDFForms.scribbleHeight}if(jQuery(h.parent()).is(".pdfFormField")){g=1}if(h.is(".pad")){e=e/h.height()}else{e=1}h.canvas();b(f,function(l,k){var j=[l[0]/e,l[2]/e];var m=[l[1]/e,l[3]/e];h.style({strokeStyle:"rgba( 0, 0, 0, 1)",lineWidth:g}).beginPath().moveTo([j[0],m[0]]).lineTo([j[1],m[1]]).stroke()})};c.fn.resetScribble=function(d){ScribbleData.Results=[];this.unbind();this.scribblePad(d)};c.clearNormalizedScribbleData=function(d){(d==="signature")?ScribbleData.NormalizedSignature=null:ScribbleData.NormalizedInitials=null};c.getScribbleData=function(){return ScribbleData.Results};c.getFormattedScribbleData=function(f){var d=[PDFForms.scribbleHeight];var g;var h=[];var e=[0,0,0,0,0];b(f,function(k,j){g=k;if(g[0]!=e[2]||g[1]!=e[3]){if(h.length>0){d.push(h)}h=[g[0]+"|"+g[1]+"|0"]}h.push(g[2]+"|"+g[3]+"|"+g[4]);e=g});if(h.length>0){d.push(h)}return a(d)};c.convertJSONToScribbleData=function(g){var d=g[1];var e=[];var f=[];b(g,function(j,h){if(h==0){return}b(j,function(m,i){var l=[];var k=m.split("|");l.push(+f[0],+f[1],+k[0],+k[1],+k[2]);f=[k[0],k[1]];if(i>0){e.push(l)}})});return e};c.getScaledScribbleData=function(e){var f=ScribbleData.Results;var h=(e.newWidth/e.origWidth);var g=(e.newHeight/e.origHeight);var d=[];b(f,function(k,j){current=k;d.push([+(h*current[0]).toFixed(2),+(g*current[1]).toFixed(2),+(h*current[2]).toFixed(2),+(g*current[3]).toFixed(2),current[4]])});return d};c.getNormalizedScribbleData=function(r){if(r.type==="signature"&&ScribbleData.NormalizedSignature!=null&&!r.refresh){return ScribbleData.NormalizedSignature}if(r.type==="initials"&&ScribbleData.NormalizedInitials!=null&&!r.refresh){return ScribbleData.NormalizedInitials}var h=ScribbleData.Results;var e=r.type=="signature"?PDFForms.scribbleWidthSignature:PDFForms.scribbleWidthInitials;var k=PDFForms.scribbleHeight*(1-PDFForms.signatureDataPct);var i=e;var q=0;var o=PDFForms.scribbleHeight;var d=0;b(h,function(t,s){current=t;if(current[0]<i){i=current[0]}if(current[0]>q){q=current[0]}if(current[1]<o){o=current[1]}if(current[1]>d){d=current[1]}if(current[2]<i){i=current[2]}if(current[2]>q){q=current[2]}if(current[3]<o){o=current[3]}if(current[3]>d){d=current[3]}});var n=e/(q-i);var m=k/(k-o);var l=(PDFForms.scribbleHeight-k)/(d-k);var f=3;if(n>=1&&n<f){f=n}if(m>=1&&m<f){f=m}if(l>=1&&l<f){f=l}var g=i+f*(q-i);var j=(g>e)?(i-(g-e)):i;var p=[];b(h,function(t,s){current=t;p.push([+(f*(current[0]-i)+j).toFixed(2),+(f*(current[1]-k)+k).toFixed(2),+(f*(current[2]-i)+j).toFixed(2),+(f*(current[3]-k)+k).toFixed(2),current[4]])});if(r.type=="signature"){ScribbleData.NormalizedSignature=p}if(r.type=="initials"){ScribbleData.NormalizedInitials=p}return p}})(jQuery);(function(a){a.fn.drawDCScribbleCapture=function(c,g){var h=this,e,d;if(c!=="initials"&&c!=="signature"){c="signature"}h.canvas("over");var f=(c==="initials")?DCScribble.utils.INTENT_INITIALS:DCScribble.utils.INTENT_SIGNATURE;e=h.find(".cnvsCanvas");d=DCScribble.createCapture(e[0],{intent:f});e.data("dcscribble",d);if(g){d.render(g)}d.height=Math.ceil(h.height());e.on("onScribbleChanged",function(){h.trigger("signature-pad:dcScribbleChanged")});e.on("onScribbleStart",function(){h.trigger("signature-pad:dcScribbleStart")});e.on("onScribbleStop",function(){h.trigger("signature-pad:dcScribbleStop")})};function b(h){var g=0;var f=0;var d=0;var c=0;var i=h?h.sequences:null;if(i){var e=true;_.each(i,function(j){if(j){_.each(j.points,function(k){if(e){e=false;g=k.x;f=k.y;d=k.x;c=k.y}else{g=Math.max(g,k.x);f=Math.max(f,k.y);d=Math.min(d,k.x);c=Math.min(c,k.y)}})}})}return{left:d,right:g,top:c,bottom:f}}a.fn.drawDCScribble=function(f){var h=this,d,c;h.canvas("over");c=h.find(".cnvsCanvas");d=DCScribble.createRender(c[0]);c.data("dcscribble",d);if(f){d.render(f);var e=b(f.render.vector);var i=Math.min(h.height()/f.render.dimension.height,h.width()/e.right);var g=f.render.custom&&f.render.custom.scale||1;d.height=Math.ceil(f.render.dimension.height*i*g)}};a.fn.resetDCScribbleCapture=function(c,d){var e=this;e.drawDCScribbleCapture(c,d);e.trigger("signature-pad:dcScribbleChanged")};a.fn.setDCScribbleWidth=function(c){var f=this,e=f.find(".cnvsCanvas"),d=e?e.data("dcscribble"):null;if(d){d.width=c}};a.fn.getDCScribbleData=function(){var e=this,d=e.find(".cnvsCanvas"),c=d?d.data("dcscribble"):null;return c?c.getVectorDataForSync():null};a.fn.isDCScribbleDataEmpty=function(e){var g=this,d=0,h,f=g.getDCScribbleData();e=e&&e>0?e:1;if(!f||!f.render||!f.render.vector||!f.render.vector.sequences){return true}h=f.render.vector.sequences;for(var c=0;c<h.length;c++){d+=h[c].points.length;if(d>=e){return false}}return true}})(jQuery);
/*!
Waypoints - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
(function(){var b=0;var c={};function a(d){if(!d){throw new Error("No options passed to Waypoint constructor")}if(!d.element){throw new Error("No element option passed to Waypoint constructor")}if(!d.handler){throw new Error("No handler option passed to Waypoint constructor")}this.key="waypoint-"+b;this.options=a.Adapter.extend({},a.defaults,d);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=d.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);if(a.offsetAliases[this.options.offset]){this.options.offset=a.offsetAliases[this.options.offset]}this.group.add(this);this.context.add(this);c[this.key]=this;b+=1}a.prototype.queueTrigger=function(d){this.group.queueTrigger(this,d)};a.prototype.trigger=function(d){if(!this.enabled){return}if(this.callback){this.callback.apply(this,d)}};a.prototype.destroy=function(){this.context.remove(this);this.group.remove(this);delete c[this.key]};a.prototype.disable=function(){this.enabled=false;return this};a.prototype.enable=function(){this.context.refresh();this.enabled=true;return this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=function(){return this.group.previous(this)};a.invokeAll=function(h){var g=[];for(var e in c){g.push(c[e])}for(var f=0,d=g.length;f<d;f++){g[f][h]()}};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=function(){a.invokeAll("disable")};a.enableAll=function(){a.Context.refreshAll();for(var d in c){c[d].enabled=true}return this};a.refreshAll=function(){a.Context.refreshAll()};a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};a.adapters=[];a.defaults={context:window,continuous:true,enabled:true,group:"default",horizontal:false,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a}());(function(){function d(g){window.setTimeout(g,1000/60)}var c=0;var f={};var b=window.Waypoint;var e=window.onload;function a(g){this.element=g;this.Adapter=b.Adapter;this.adapter=new this.Adapter(g);this.key="waypoint-context-"+c;this.didScroll=false;this.didResize=false;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};g.waypointContextKey=this.key;f[g.waypointContextKey]=this;c+=1;if(!b.windowContext){b.windowContext=true;b.windowContext=new a(window)}this.createThrottledScrollHandler();this.createThrottledResizeHandler()}a.prototype.add=function(g){var h=g.options.horizontal?"horizontal":"vertical";this.waypoints[h][g.key]=g;this.refresh()};a.prototype.checkEmpty=function(){var g=this.Adapter.isEmptyObject(this.waypoints.horizontal);var i=this.Adapter.isEmptyObject(this.waypoints.vertical);var h=this.element==this.element.window;if(g&&i&&!h){this.adapter.off(".waypoints");delete f[this.key]}};a.prototype.createThrottledResizeHandler=function(){var g=this;function h(){g.handleResize();g.didResize=false}this.adapter.on("resize.waypoints",function(){if(!g.didResize){g.didResize=true;b.requestAnimationFrame(h)}})};a.prototype.createThrottledScrollHandler=function(){var g=this;function h(){g.handleScroll();g.didScroll=false}this.adapter.on("scroll.waypoints",function(){if(!g.didScroll||b.isTouch){g.didScroll=true;b.requestAnimationFrame(h)}})};a.prototype.handleResize=function(){b.Context.refreshAll()};a.prototype.handleScroll=function(){var n={};var m={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var h in m){var j=m[h];var r=j.newScroll>j.oldScroll;var p=r?j.forward:j.backward;for(var l in this.waypoints[h]){var k=this.waypoints[h][l];if(k.triggerPoint===null){continue}var o=j.oldScroll<k.triggerPoint;var i=j.newScroll>=k.triggerPoint;var g=o&&i;var q=!o&&!i;if(g||q){k.queueTrigger(p);n[k.group.id]=k.group}}}for(var s in n){n[s].flushTriggers()}this.oldScroll={x:m.horizontal.newScroll,y:m.vertical.newScroll}};a.prototype.innerHeight=function(){if(this.element==this.element.window){return b.viewportHeight()}return this.adapter.innerHeight()};a.prototype.remove=function(g){delete this.waypoints[g.axis][g.key];this.checkEmpty()};a.prototype.innerWidth=function(){if(this.element==this.element.window){return b.viewportWidth()}return this.adapter.innerWidth()};a.prototype.destroy=function(){var l=[];for(var k in this.waypoints){for(var h in this.waypoints[k]){l.push(this.waypoints[k][h])}}for(var j=0,g=l.length;j<g;j++){l[j].destroy()}};a.prototype.refresh=function(){var i=this.element==this.element.window;var p=i?undefined:this.adapter.offset();var s={};var r;this.handleScroll();r={horizontal:{contextOffset:i?0:p.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:p.top,contextScroll:i?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var h in r){var j=r[h];for(var m in this.waypoints[h]){var k=this.waypoints[h][m];var v=k.options.offset;var w=k.triggerPoint;var g=0;var u=w==null;var t,q,o;var l,n;if(k.element!==k.element.window){g=k.adapter.offset()[j.offsetProp]}if(typeof v==="function"){v=v.apply(k)}else{if(typeof v==="string"){v=parseFloat(v);if(k.options.offset.indexOf("%")>-1){v=Math.ceil(j.contextDimension*v/100)}}}t=j.contextScroll-j.contextOffset;k.triggerPoint=Math.floor(g+t-v);q=w<j.oldScroll;o=k.triggerPoint>=j.oldScroll;l=q&&o;n=!q&&!o;if(!u&&l){k.queueTrigger(j.backward);s[k.group.id]=k.group}else{if(!u&&n){k.queueTrigger(j.forward);s[k.group.id]=k.group}else{if(u&&j.oldScroll>=k.triggerPoint){k.queueTrigger(j.forward);s[k.group.id]=k.group}}}}}b.requestAnimationFrame(function(){for(var x in s){s[x].flushTriggers()}});return this};a.findOrCreateByElement=function(g){return a.findByElement(g)||new a(g)};a.refreshAll=function(){for(var g in f){f[g].refresh()}};a.findByElement=function(g){return f[g.waypointContextKey]};window.onload=function(){if(e){e()}a.refreshAll()};b.requestAnimationFrame=function(h){var g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||d;g.call(window,h)};b.Context=a}());(function(){function e(g,f){return g.triggerPoint-f.triggerPoint}function d(g,f){return f.triggerPoint-g.triggerPoint}var a={vertical:{},horizontal:{}};var b=window.Waypoint;function c(f){this.name=f.name;this.axis=f.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();a[this.axis][this.name]=this}c.prototype.add=function(f){this.waypoints.push(f)};c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};c.prototype.flushTriggers=function(){for(var k in this.triggerQueues){var l=this.triggerQueues[k];var h=k==="up"||k==="left";l.sort(h?d:e);for(var j=0,g=l.length;j<g;j+=1){var f=l[j];if(f.options.continuous||j===l.length-1){f.trigger([k])}}}this.clearTriggerQueues()};c.prototype.next=function(f){this.waypoints.sort(e);var g=b.Adapter.inArray(f,this.waypoints);var h=g===this.waypoints.length-1;return h?null:this.waypoints[g+1]};c.prototype.previous=function(f){this.waypoints.sort(e);var g=b.Adapter.inArray(f,this.waypoints);return g?this.waypoints[g-1]:null};c.prototype.queueTrigger=function(f,g){this.triggerQueues[g].push(f)};c.prototype.remove=function(f){var g=b.Adapter.inArray(f,this.waypoints);if(g>-1){this.waypoints.splice(g,1)}};c.prototype.first=function(){return this.waypoints[0]};c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};c.findOrCreate=function(f){return a[f.axis][f.name]||new c(f)};b.Group=c}());(function(){var c=window.jQuery;var b=window.Waypoint;function a(d){this.$element=c(d)}c.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(d,e){a.prototype[e]=function(){var f=Array.prototype.slice.call(arguments);return this.$element[e].apply(this.$element,f)}});c.each(["extend","inArray","isEmptyObject"],function(d,e){a[e]=c[e]});b.adapters.push({name:"jquery",Adapter:a});b.Adapter=a}());(function(){var a=window.Waypoint;function b(c){return function(){var e=[];var d=arguments[0];if(typeof arguments[0]==="function"){d=c.extend({},arguments[1]);d.handler=arguments[0]}this.each(function(){var f=c.extend({},d,{element:this});if(typeof f.context==="string"){f.context=c(this).closest(f.context)[0]}e.push(new a(f))});return e}}if(window.jQuery){window.jQuery.fn.waypoint=b(window.jQuery)}if(window.Zepto){window.Zepto.fn.waypoint=b(window.Zepto)}}());
/*!
 * ADOBE CONFIDENTIAL
 * ___________________
 * 
 *  Copyright 2015 Adobe Systems Incorporated
 *  All Rights Reserved.
 * 
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by all applicable intellectual property
 * laws, including trade secret and copyright laws.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 */
;
/*!
 * */
(function webpackUniversalModuleDefinition(a,b){if(typeof exports==="object"&&typeof module==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){exports.DCScribble=b()}else{a.DCScribble=b()}}}})(this,function(){return(function(a){var b={};function c(e){if(b[e]){return b[e].exports}var d=b[e]={exports:{},id:e,loaded:false};a[e].call(d.exports,d,d.exports,c);d.loaded=true;return d.exports}c.m=a;c.c=b;c.p="";return c(0)})([(function(b,a,c){(function(){var e=c(1),d=c(3),f=c(2);b.exports={utils:f,createCapture:function(h,g){return new e(h,g)},createRender:function(g){return new d(g)}}})()}),(function(b,a,c){(function(){function d(f,g){g=g||{bubbles:false,cancelable:false,detail:undefined};var e=document.createEvent("CustomEvent");e.initCustomEvent(f,g.bubbles,g.cancelable,g.detail);return e}if(window.Event&&window.Event.prototype){d.prototype=window.Event.prototype;window.CustomEvent=d}})();(function(){var h=c(2);if(!Object.create){b.exports=undefined}else{b.exports=U}function U(Z,Y){this._canvas=Z;this._context=Z.getContext("2d");this._type=h.TYPE_SMOOTHED;Y=Y||{};if(!Y.hasOwnProperty("intent")||(Y.intent!==h.INTENT_SIGNATURE&&Y.intent!==h.INTENT_INITIALS)){Y.intent=h.INTENT_SIGNATURE}this._ignoreDevicePixelRatio=!!Y.ignoreDevicePixelRatio;E.call(this,Y);j.call(this);this._canvas.addEventListener("mousedown",i(x,this),false);this._canvas.addEventListener("mousemove",i(O,this),false);this._canvas.addEventListener("mouseup",i(z,this),false);this._canvas.addEventListener("mouseenter",i(y,this),false);this._canvas.addEventListener("mouseleave",i(S,this),false);this._canvas.addEventListener("touchstart",i(x,this),{passive:false});this._canvas.addEventListener("touchmove",i(C,this),{passive:false});this._canvas.addEventListener("touchend",i(z,this),false)}var u=0.6;var V=0.4;var K={SIGNATURE:{aspectRatio:4.233},INITIALS:{aspectRatio:1.1667}};var L={POLYLINE:W,SMOOTHED:M};function i(Z,Y){return function(aa){Z.call(Y,aa)}}function E(Y){Y=Y||{};if(Y.hasOwnProperty("intent")){if(Y.intent!==h.INTENT_INITIALS&&Y.intent!==h.INTENT_SIGNATURE){Y.intent=h.INTENT_SIGNATURE}this._intent=Y.intent}if(Y.hasOwnProperty("penWidthRatio")){if(isNaN(Y.penWidthRatio)||Y.penWidthRatio<=0){Y.penWidthRatio=h.DEFAULT_PEN_WIDTH_RATIO}this._penWidthRatio=Y.penWidthRatio}if(Y.hasOwnProperty("baselineRatio")){if(isNaN(Y.baselineRatio)){Y.baselineRatio=h.DEFAULT_BASELINE_RATIO}this._baselineRatio=Y.baselineRatio}if(Y.hasOwnProperty("customAspectRatio")){if(!isNaN(Y.customAspectRatio)&&Y.customAspectRatio>0&&this._intent&&K.hasOwnProperty(this._intent)){var Z=K[this._intent].aspectRatio;if(Y.customAspectRatio<Z){this._customAspectRatio=Y.customAspectRatio}}}if(Y.hasOwnProperty("penColor")){this._context.fillStyle=Y.penColor;this._context.strokeStyle=Y.penColor}l.call(this,Y.width,Y.height)}function j(){this._context.clearRect(0,0,this.width,this.height);if(this._pointData&&this._pointData.length){this._pointData=[];this._canvas.dispatchEvent(new CustomEvent("onScribbleChanged",{detail:this}))}else{if(!this._pointData){this._pointData=[]}}if(this._intervalID){clearInterval(this._intervalID)}this._intervalID=0;this._touchHistory=[];this._startTime=-1;this._trackingActive=false;this._didDrawStroke=false;this._previousPathEnd={x:0,y:0};this._dynaDrawVelocity={x:0,y:0};this._previousPoint={x:0,y:0};this._mouseLeftActive=false;this._pdfStreamData="1 J 1 j"}function I(){var Y={penWidthRatio:undefined,penColor:"#000000",customAspectRatio:undefined};E.call(this,Y);j.call(this)}function Q(){return !this._pointData||!this._pointData.length}function T(Y){Y=Y||{};var Z=w.call(this);if(Y.hasOwnProperty("intent")){Z.intent=Y.intent;this._intent=Y.intent}if(Y.hasOwnProperty("penWidthRatio")){this._penWidthRatio=parseFloat(Y.penWidthRatio.toFixed(3));Z.render.vector.penWidthRatio=this._penWidthRatio}if(Y.hasOwnProperty("baselineRatio")){this._baselineRatio=parseFloat(Y.baselineRatio.toFixed(3));Z.render.dimension.baselineRatio=this._baselineRatio}if(Y.hasOwnProperty("penColor")){Z.penColor=Y.penColor;this._context.fillStyle=Y.penColor;this._context.strokeStyle=Y.penColor}if(Y.hasOwnProperty("customAspectRatio")){this._customAspectRatio=Y.customAspectRatio}if(Y.hasOwnProperty("width")||Y.hasOwnProperty("height")||Y.hasOwnProperty("customAspectRatio")||Y.hasOwnProperty("intent")){l.call(this,Y.width,Y.height);if(!this._intent){s(Z,this.width,this.height)}}R.call(this,Z)}function G(Z,Y){if(Z&&!o(Z)){throw new Error("DCScribble width: must be an integer greater than 0")}if(Y&&!o(Y)){throw new Error("DCScribble height: must be an integer greater than 0")}if(!Z&&Y){this.height=Y}else{if(Z&&!Y){this.width=Z}else{if(Z&&Y){if(this.aspectRatio<=(Z/Y)){this.height=Y}else{this.width=Z}}}}}function l(aa,Y){if(aa&&!o(aa)){throw new Error("DCScribble width: must be an integer greater than 0")}if(Y&&!o(Y)){throw new Error("DCScribble height: must be an integer greater than 0")}this._devicePixelRatio=this._ignoreDevicePixelRatio?1:(window.devicePixelRatio||1);var Z=this._context.fillStyle;var ac=this._context.strokeStyle;var ab=this.aspectRatio;if(ab){if(Y){aa=Math.floor(Y*ab)}else{if(aa){Y=Math.ceil(aa/ab)}else{Y=this.height;aa=Math.floor(Y*ab)}}}else{Y=Y||this.height;aa=aa||this.width}this._canvas.width=aa*this._devicePixelRatio;this._canvas.height=Y*this._devicePixelRatio;this._canvas.style.width=aa+"px";this._canvas.style.height=Y+"px";this._context.scale(this._devicePixelRatio,this._devicePixelRatio);this._context.fillStyle=Z;this._context.strokeStyle=ac}function o(Y){return !(isNaN(Y)||Y<0||(Y%1!==0))}function F(){return Math.max(h.MIN_PEN_WIDTH,(this._penWidthRatio||h.DEFAULT_PEN_WIDTH_RATIO)*this.height)}function B(aa,Y,ad){if(aa&&!o(aa)){throw new Error("DCScribble width: must be an integer greater than 0")}if(Y&&!o(Y)){throw new Error("DCScribble height: must be an integer greater than 0")}var ae=w.call(this);var ac=ae.render.dimension.width/ae.render.dimension.height;var Z=document.createElement("canvas");var ab=new U(Z,{ignoreDevicePixelRatio:true});ab.intent=undefined;ab._generatePDF=ad;ab.render(ae);if(h.MIN_PEN_WIDTH>ab.height*ab.penWidthRatio){ab.penWidthRatio=h.MIN_PEN_WIDTH/ab.height}if(!aa&&Y){ab.height=Y}else{if(aa&&!Y){ab.width=aa}else{if(aa&&Y){if(ac<=(aa/Y)){ab.height=Y}else{ab.width=aa}}}}if(ad){return{width:ab.width,height:ab.height,baselineRatio:ab.baselineRatio,data:ab._pdfStreamData}}return{width:ab.width,height:ab.height,baselineRatio:ab.baselineRatio,data:ab._canvas.toDataURL("image/png").split(",")[1]}}function A(Z,Y){return B.call(this,Z,Y,false)}function v(){return B.call(this,0,0,true)}function d(Y){return Y&&Y.render&&Y.render.vector&&Y.render.vector.sequences&&Y.render.vector.sequences.length}function w(Z,Y){var aa={intent:this._intent,penColor:this.penColor,render:{dimension:{width:this.width,height:this.height,baselineRatio:this._baselineRatio||h.DEFAULT_BASELINE_RATIO},vector:{type:this._type,penWidthRatio:this._penWidthRatio||h.DEFAULT_PEN_WIDTH_RATIO,sequences:[]}}};if(!this._pointData||this._pointData.length===0){return aa}aa.render.vector.sequences=m(this._pointData);if(Z&&Z!==h.TRIM_POLICY_NONE){return h.trimVectorData(aa,Z,Y)}return aa}function m(aa){var af=[];var ae=aa?aa.length:0;for(var ab=0;ab<ae;ab++){af.push({points:[]});var ac=aa[ab].length;for(var ad=0;ad<ac;ad++){var Z=aa[ab][ad];var Y={x:Z.x,y:Z.y,t:Z.t};af[ab].points.push(Y)}}return af}function p(ab){var ag=[];if(d(ab)){var ad=ab.render.vector.sequences;var Z=ad.length;for(var ae=0;ae<Z;ae++){ag.push([]);if(ad[ae].points){var ac=ad[ae].points.length;for(var af=0;af<ac;af++){var aa=ad[ae].points[af];var Y={x:aa.x,y:aa.y,t:aa.t};ag[ae].push(Y)}}}}return ag}function P(ac){if(d(ac)){var ae=ac.render.vector.sequences;var Z=ae.length;for(var aa=0;aa<Z;aa++){if(ae[aa].points){var ad=ae[aa].points.length;for(var ab=0;ab<ad;ab++){var Y=ae[aa].points[ab];Y.x=parseFloat(Y.x.toFixed(3));Y.y=parseFloat(Y.y.toFixed(3))}}}}if(ac&&ac.render){if(ac.render.dimension&&ac.render.dimension.baselineRatio){ac.render.dimension.baselineRatio=parseFloat(ac.render.dimension.baselineRatio.toFixed(3))}if(ac.render.vector&&ac.render.vector.penWidthRatio){ac.render.vector.penWidthRatio=parseFloat(ac.render.vector.penWidthRatio.toFixed(3))}}}function t(){var Y=K[this._intent].aspectRatio;var ag=this._baselineRatio||h.DEFAULT_BASELINE_RATIO;var ad=w.call(this);if(d(ad)&&ad.render.dimension&&ad.render.dimension.width&&ad.render.dimension.height){if(this._customAspectRatio===undefined){}else{if(Y>this._customAspectRatio){ad.render.dimension.width=Math.floor(ad.render.dimension.height*Y)}else{var Z=Math.ceil(ad.render.dimension.width/Y);var al=ad.render.dimension.height;var ak=Z-al;var ac=ak*ag;var ai=ad.render.vector.sequences;var aa=ai.length;for(var ah=0;ah<aa;ah++){if(ai[ah].points){var af=ai[ah].points.length;for(var aj=0;aj<af;aj++){ai[ah].points[aj].y+=ac}}}var ae=ad.render.vector.penWidthRatio;if(ae&&al!==Z){var ab=ae*al;ad.render.vector.penWidthRatio=parseFloat((ab/Z).toFixed(3))}ad.render.dimension.height=Z}}}if(ad.render){P(ad);return{render:ad.render}}throw new Error("DCScribble getVectorDataForSync: error getting vector data")}function R(ab){j.call(this);if(d(ab)&&ab.render.dimension&&ab.render.dimension.width&&ab.render.dimension.height){var ad=ab.render.dimension.width;var ac=ab.render.dimension.height;var aa=ad/ac;if(!this._intent||!this.height){l.call(this,ad,ac)}else{var Y=this.height;var Z=Math.floor(Y*aa);s(ab,Z,Y)}this._pointData=p(ab);this._type=ab.render.vector.type;this._penWidthRatio=ab.render.vector.penWidthRatio;this._baselineRatio=ab.render.dimension.baselineRatio;if(ab.penColor){this._context.fillStyle=ab.penColor;this._context.strokeStyle=ab.penColor}L[ab.render.vector.type].call(this,ab);this._canvas.dispatchEvent(new CustomEvent("onScribbleChanged",{detail:this}))}}function W(ac){if(d(ac)){var af=ac.render.vector.sequences;var Z=af.length;for(var aa=0;aa<Z;aa++){var ae=af[aa];if(ae.points){var ad=ae.points.length;if(ad===1){e.call(this,ae.points[0])}else{if(ad>1){for(var ab=0;ab<ad;ab++){var Y=ae.points[ab];if(ab===0){J.call(this,Y)}else{q.call(this,Y)}}}}}}}}function M(ac){if(d(ac)){var af=ac.render.vector.sequences;var Z=af.length;for(var aa=0;aa<Z;aa++){var ae=af[aa];if(ae.points){var ad=ae.points.length;if(ad===1){e.call(this,ae.points[0])}else{if(ad>1){for(var ab=0;ab<ad;ab++){var Y=ae.points[ab];if(ab===0){J.call(this,Y)}else{H.call(this,Y)}}H.call(this,ae.points[ad-1],true)}}}}}}function s(ab,Y,ai){if(d(ab)&&ab.render.dimension&&ab.render.dimension.width&&ab.render.dimension.height){var af=ab.render.vector.sequences;var ae=Y/ab.render.dimension.width;var ac=ai/ab.render.dimension.height;var Z=af.length;for(var ag=0;ag<Z;ag++){if(af[ag].points){var ad=af[ag].points.length;for(var ah=0;ah<ad;ah++){var aa=af[ag].points[ah];aa.x=aa.x*ae;aa.y=aa.y*ac}}}ab.render.dimension.width=Y;ab.render.dimension.height=ai}}function D(){if(this._isSafari===undefined){if(navigator.userAgent&&navigator.vendor){this._isSafari=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}else{this._isSafari=false}}return this._isSafari}function X(){if(this._isIE9===undefined){if(navigator.userAgent){this._isIE9=/MSIE 9/.test(navigator.userAgent)}else{this._isIE9=false}}return this._isIE9}function y(Y){n.call(this,"me "+Y.type+" "+Y.buttons);if(this._mouseLeftActive){if(Y.buttons===1||(D.call(this)&&Y.which===1)||(X.call(this)&&window.event.button===1)){x.call(this,Y)}delete this._mouseLeftActive}}function S(Y){n.call(this,"ml "+Y.type+" "+Y.buttons);if(this._trackingActive){this._mouseLeftActive=true;z.call(this,Y)}}function O(Y){n.call(this,"mm "+Y.type+" "+Y.buttons);if(Y.buttons===1||(D.call(this)&&Y.which===1)||(X.call(this)&&window.event.button===1)){if(!this._trackingActive){this._mouseLeftActive=true;y.call(this,Y)}else{C.call(this,Y)}}}function x(Z){n.call(this,"tb "+Z.type+" "+Z.buttons);if(Z&&Z.touches&&Z.touches.length>1){return}Z.preventDefault();if(!this._trackingActive){this._trackingActive=true;if(this._pointData.length){this._pointData.push([])}var Y=r.call(this,Z);f.call(this,Y.x,Y.y);J.call(this,Y);this._didDrawStroke=false;this._canvas.dispatchEvent(new CustomEvent("onScribbleStart",{detail:this}))}}function C(Z){n.call(this,"tm "+Z.type+" "+Z.buttons);if(Z&&Z.touches&&Z.touches.length>1){return}Z.preventDefault();if(this._trackingActive){var Y=r.call(this,Z);if(!g.call(this,Y)){f.call(this,Y.x,Y.y);H.call(this,Y);this._didDrawStroke=true;if(this._intervalID){clearInterval(this._intervalID)}this._intervalID=setInterval(i(function(){var aa=N.call(this);if(aa){f.call(this,aa.x,aa.y);H.call(this,aa)}},this),50)}}}function z(Y){n.call(this,"te "+Y.type+" "+Y.buttons);if(Y&&Y.touches&&Y.touches.length>1){return}Y.preventDefault();if(this._intervalID){clearInterval(this._intervalID)}this._intervalID=0;if(this._trackingActive){var Z=N.call(this);if(Z){if(!this._didDrawStroke){e.call(this,Z)}else{H.call(this,Z,true)}}this._trackingActive=false;this._canvas.dispatchEvent(new CustomEvent("onScribbleStop",{detail:this}))}}function g(Z){var Y=this._pointData.length-1;return Y>=0&&this._pointData[Y].length===1&&!Z||(Z.x===this._pointData[Y][0].x&&Z.y===this._pointData[Y][0].y)}function N(){var Z=this._pointData.length;if(Z>0){var Y=this._pointData[Z-1];if(Y.length>0){return Y[Y.length-1]}}return undefined}function r(aa){var Y=aa;if(aa.targetTouches&&aa.targetTouches.length){Y=aa.targetTouches[0]}else{if(aa.changedTouches&&aa.changedTouches.length){Y=aa.changedTouches[0]}}var Z=this._canvas.getBoundingClientRect();return{x:Y.clientX-Z.left,y:Y.clientY-Z.top}}function f(Y,ab){if(!this._pointData.length){this._pointData.push([]);if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.firstTouch){window.webkit.messageHandlers.firstTouch.postMessage("touched")}}var aa=(new Date()).getTime();if(this._startTime<0){this._startTime=aa}var Z={x:Y,y:ab,t:(aa-this._startTime)};this._pointData[this._pointData.length-1].push(Z);this._canvas.dispatchEvent(new CustomEvent("onScribbleChanged",{detail:this}))}function J(Y){this._dynaDrawVelocity={x:0,y:0};this._previousPoint={x:0,y:0};this._touchHistory[0]=this._touchHistory[1]=this._touchHistory[2]=this._previousPathEnd=Y}function q(Z){this._touchHistory[0]=this._touchHistory[1];this._touchHistory[1]=Z;var ab=this._touchHistory[0];var Y=this._touchHistory[1];if(this._generatePDF){var aa=this.height;this._pdfStreamData+=(" "+F.call(this).toFixed(3)+" w "+ab.x.toFixed(3)+" "+(aa-ab.y).toFixed(3)+" m "+Y.x.toFixed(3)+" "+(aa-Y.y).toFixed(3)+" l S")}else{this._context.beginPath();this._context.moveTo(ab.x,ab.y);this._context.lineTo(Y.x,Y.y);this._context.lineWidth=F.call(this);this._context.lineCap="round";this._context.stroke()}}function H(aa,ab){var Z;if(aa.x===this._previousPoint.x&&aa.y===this._previousPoint.y){Z=aa}else{Z=k.call(this,aa,this._touchHistory[2])}this._previousPoint=aa;this._touchHistory[0]=this._touchHistory[1];this._touchHistory[1]=this._touchHistory[2];this._touchHistory[2]=Z;var af=this._previousPathEnd;var ae={x:((this._touchHistory[0].x*2)+this._touchHistory[1].x)*(1/3),y:((this._touchHistory[0].y*2)+this._touchHistory[1].y)*(1/3)};var ac={x:((this._touchHistory[1].x*2)+this._touchHistory[0].x)*(1/3),y:((this._touchHistory[1].y*2)+this._touchHistory[0].y)*(1/3)};var Y=ab?aa:{x:(this._touchHistory[0].x+(this._touchHistory[1].x*4)+this._touchHistory[2].x)*(1/6),y:(this._touchHistory[0].y+(this._touchHistory[1].y*4)+this._touchHistory[2].y)*(1/6)};if(this._generatePDF){var ad=this.height;this._pdfStreamData+=(" "+F.call(this).toFixed(3)+" w "+af.x.toFixed(3)+" "+(ad-af.y).toFixed(3)+" m "+ae.x.toFixed(3)+" "+(ad-ae.y).toFixed(3)+" "+ac.x.toFixed(3)+" "+(ad-ac.y).toFixed(3)+" "+Y.x.toFixed(3)+" "+(ad-Y.y).toFixed(3)+" c S")}else{this._context.beginPath();this._context.moveTo(af.x,af.y);this._context.bezierCurveTo(ae.x,ae.y,ac.x,ac.y,Y.x,Y.y);this._context.lineWidth=F.call(this);this._context.lineCap="round";this._context.stroke()}this._previousPathEnd=Y}function e(Y){var aa=F.call(this)*h.DOT_RADIUS_RATIO;if(this._generatePDF){var Z=this.height;this._pdfStreamData+=(" "+(aa*2).toFixed(3)+" w "+Y.x.toFixed(3)+" "+(Z-Y.y).toFixed(3)+" m "+Y.x.toFixed(3)+" "+(Z-Y.y).toFixed(3)+" l S")}else{this._context.beginPath();this._context.arc(Y.x,Y.y,aa,0,2*Math.PI);this._context.fill()}}function k(Z,ab){var ac={x:(Z.x-ab.x)*u,y:(Z.y-ab.y)*u};var aa=this._dynaDrawVelocity;aa={x:(aa.x+ac.x)*(1-V),y:(aa.y+ac.y)*(1-V)};var Y={x:(ab.x+aa.x),y:(ab.y+aa.y)};this._dynaDrawVelocity={x:aa.x*(1-V),y:aa.y*(1-V)};return Y}function n(){}U.prototype=Object.create(null,{constructor:U,type:{get:function(){return this._type},set:function(Y){throw new Error("DCScribble type: readonly property")}},intent:{get:function(){return this._intent},set:function(Y){if(Y&&(Y!==h.INTENT_SIGNATURE&&Y!==h.INTENT_INITIALS)){Y=h.INTENT_SIGNATURE;console.error("DCScribble intent: must be a 'SIGNATURE' or 'INITIALS'; using default of "+Y+" instead")}T.call(this,{intent:Y})}},height:{get:function(){return Math.round(this._canvas.height/this._devicePixelRatio)},set:function(Y){if(!o(Y)){throw new Error("DCScribble height: must be an integer greater than 0")}T.call(this,{height:Y})}},width:{get:function(){return Math.round(this._canvas.width/this._devicePixelRatio)},set:function(Y){if(!o(Y)){throw new Error("DCScribble width: must be an integer greater than 0")}T.call(this,{width:Y})}},penWidthRatio:{get:function(){return this._penWidthRatio||h.DEFAULT_PEN_WIDTH_RATIO},set:function(Y){if(isNaN(Y)||Y<=0){Y=h.DEFAULT_PEN_WIDTH_RATIO;console.error("DCScribble penWidthRatio: must be a number greater than 0; using default of "+Y+"instead")}T.call(this,{penWidthRatio:Y})}},baselineRatio:{get:function(){return this._baselineRatio||h.DEFAULT_BASELINE_RATIO},set:function(Y){if(isNaN(Y)){Y=h.DEFAULT_BASELINE_RATIO;console.error("DCScribble baselineRatio: must be a number; using default of "+Y+"instead")}T.call(this,{baselineRatio:Y})}},penColor:{get:function(){return this._context.fillStyle},set:function(Y){T.call(this,{penColor:Y})}},aspectRatio:{get:function(){if(this._customAspectRatio===undefined){if(this._intent&&K.hasOwnProperty(this._intent)){return K[this._intent].aspectRatio}else{if(!this._intent&&!this.isEmpty()){var Y=this.getVectorData();if(Y&&Y.render&&Y.render.dimension&&Y.render.dimension.height){return Y.render.dimension.width/Y.render.dimension.height}}}return undefined}return this._customAspectRatio}},customAspectRatio:{get:function(){return this._customAspectRatio},set:function(Z){if(Z===undefined){T.call(this,{customAspectRatio:undefined})}else{if(isNaN(Z)||Z<=0){T.call(this,{customAspectRatio:undefined});console.error("DCScribble customAspectRatio: must be a number greater than 0 and smaller or equals to the default aspect ratio of the intent; using default of SIGNATURE: 4.233 or INITIALS: 1.1667 instead")}else{if(this._intent&&K.hasOwnProperty(this._intent)){var Y=K[this._intent].aspectRatio;if(Z>Y){Z=undefined;console.error("DCScribble customAspectRatio: must be a number greater than 0 and smaller or equals to the default aspect ratio of the intent; using default of SIGNATURE: 4.233 or INITIALS: 1.1667 instead")}T.call(this,{customAspectRatio:Z})}}}}},clear:{value:j},reset:{value:I},isEmpty:{value:Q},render:{value:R},getImageData:{value:A},getPDFStreamData:{value:v},getVectorData:{value:w},getVectorDataForSync:{value:t},resize:{value:G}})})()}),(function(b,a){(function(){var f=0.018;var i=0.06;var m=0.64;var e=1;var d=0.65;var h="TRIM_POLICY_ALL";var j="TRIM_POLICY_NONE";var l="TRIM_POLICY_WIDTH";var k="TRIM_POLICY_HEIGHT";function g(u,q,t){q=q||j;if(q!==j&&u&&u.render&&u.render.vector&&u.render.vector.sequences&&u.render.vector.sequences.length&&u.render.dimension&&u.render.dimension.width&&u.render.dimension.height){var z=u.render.dimension.height;var B=u.render.vector.penWidthRatio||f;var s=B*z;var y=u.render.dimension.baselineRatio||m;var x=z*y;var n=0;var H=0;t=(isNaN(t)||t<0)?i:t;var o=c(u);var w=Math.max(e,s);var G=t*z;if(q===k||q===h){var A=o.y2-o.y1+w*d*2;H=o.y1-w*d;G=t*A;A+=2*G;H-=G;u.render.dimension.height=Math.ceil(A);u.render.dimension.baselineRatio=parseFloat(((x-H)/A).toFixed(3));u.render.vector.penWidthRatio=parseFloat((s/A).toFixed(3))}if(q===l||q===h){var v=o.x2-o.x1+w*d*2;n=o.x1-w*d;v+=2*G;n-=G;u.render.dimension.width=Math.ceil(v)}var r=u.render.vector.sequences;var p=r.length;for(var E=0;E<p;E++){if(r[E].points){var C=r[E].points.length;for(var F=0;F<C;F++){var D=r[E].points[F];D.x-=n;D.y-=H}}}}return u}function c(r){var n=0;var y=0;var x=0;var v=0;if(r&&r.render&&r.render.vector&&r.render.vector.sequences&&r.render.vector.sequences.length){var u=r.render.vector.sequences;var o=true;var p=u.length;for(var t=0;t<p;t++){if(u[t].points){var s=u[t].points.length;for(var w=0;w<s;w++){var q=u[t].points[w];if(o){o=false;n=q.x;y=q.y;x=q.x;v=q.y}else{n=Math.max(n,q.x);y=Math.max(y,q.y);x=Math.min(x,q.x);v=Math.min(v,q.y)}}}}}return{x1:x,y1:v,x2:n,y2:y}}b.exports={DEFAULT_PEN_WIDTH_RATIO:f,DEFAULT_BASELINE_RATIO:m,DEFAULT_TRIM_PADDING_RATIO:i,MIN_PEN_WIDTH:e,DOT_RADIUS_RATIO:d,INTENT_SIGNATURE:"SIGNATURE",INTENT_INITIALS:"INITIALS",TRIM_POLICY_ALL:h,TRIM_POLICY_NONE:j,TRIM_POLICY_WIDTH:l,TRIM_POLICY_HEIGHT:k,TYPE_POLYLINE:"POLYLINE",TYPE_SMOOTHED:"SMOOTHED",trimVectorData:g,getBoundaries:c}})()}),(function(b,a,c){(function(){var e=c(1);if(!Object.create){b.exports=undefined}else{b.exports=d}function d(g,f){f=f||{};if(g===undefined){g=document.createElement("canvas");f.ignoreDevicePixelRatio=true}this._canvas=g;this._context=g.getContext("2d");this._ignoreDevicePixelRatio=!!f.ignoreDevicePixelRatio}d.prototype.constructor=d;d.prototype=Object.create(e.prototype,{intent:{set:function(f){}},aspectRatio:{get:function(){if(this.isEmpty()){return undefined}var f=this.getVectorData();if(f&&f.render&&f.render.dimension&&f.render.dimension.height){return f.render.dimension.width/f.render.dimension.height}return undefined}},customAspectRatio:{get:function(){return this.aspectRatio},set:function(f){}},getVectorDataForSync:{value:function(){return undefined}},trim:{value:function(g,f){var h=this.getVectorData(g,f);this.render(h)}}})})()})])});
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3447],{96207:(e,t,i)=>{i.d(t,{Q:()=>L});var o=i(11040),n=i(74820),r=i(91051),a=i(75131),s=i(35468),l=i(8721),d=i(21041),c=i(66958),p=i(97103),h=i(32913);const u=(0,h.Z)("span",{target:"efbd9f0"})({fontWeight:400},"label:SpanText;");var m;!function(e){e[e.User=0]="User",e[e.Challenge=1]="Challenge"}(m||(m={}));const g=(e,t,i={})=>(0,o.jsx)(u,Object.assign({style:i},{children:e}),e+t),y={fontWeight:700},v={},_=e=>{const{item:t,DuetComp:i,LinkComp:n,QuestionComp:r,renderText:a=g,shouldReport:s,reportParams:l,styleType:h,mode:u}=e,m=(0,d.TH)();if(!(null==t?void 0:t.desc))return null;const{textExtra:_,desc:f,authorId:b,id:x}=t,w="kep"===h?y:v;return(null==_?void 0:_.length)?(0,o.jsx)(o.Fragment,{children:[..._].sort(((e,t)=>e.start-t.start)).reduce(((t,d,g,y)=>{const{start:v,end:_,awemeId:k,userUniqueId:C,hashtagName:S,type:j,subType:I,userId:P,hashtagId:T,questionId:O="",questionContent:L=""}=d,D=0===g?0:y[g-1].end,E=v,M=f.substring(D,E);M&&t.push(a(M,t.length-1,w));const B=7===(R=I)||5===R;var R;const $=f.substring(v,_);if(0===j&&B){const i=(0,p.C)({to:{pathname:(0,c._9)({questionId:O,questionContent:L})},location:m});t.push((0,o.jsx)(r,{href:i,text:null!=C?C:"",index:t.length-1,id:O,type:"question",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:"question",inline:"compact"===u,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},$+g))}else if(0===j&&k){const n=(0,p.C)({to:{pathname:(0,c.fH)({uniqueId:null!=C?C:"",videoId:k})},location:m});t.push((0,o.jsx)(i,{href:n,text:$,index:t.length-1,id:k,type:"video",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:"duet",onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},$+g))}else if(0===j&&P){const i=(0,p.C)({to:{pathname:(0,c.yl)({uniqueId:null!=C?C:""})},location:m});t.push((0,o.jsx)(n,{href:i,text:$,index:t.length-1,id:P,type:"user",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:h,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},$+g))}else if(1===j&&S){const i=(0,p.C)({to:{pathname:(0,c.JD)({tagName:S})},location:m});t.push((0,o.jsx)(n,{href:i,text:$,index:t.length-1,id:null!=T?T:"",type:"tag",authorId:b,groupId:x,shouldReport:s,reportParams:l,styleType:h,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},$+g))}else t.push(a($,t.length-1,w));return g===y.length-1&&t.push(a(f.substring(_),t.length,w)),t}),[])},void 0):a(f,0,w)};var f=i(27918),b=i(77107);const x="inline-block",w=(0,h.Z)("div",{target:"ejg0rhn0"})((({ellipsis:e,ellispsisLine:t,theme:i,theme:{direction:o,colors:n},styleType:r})=>[Object.assign({},i.typography.P2),e?(0,f.f1)({max:479,style:f.wj}):null,t?1===t?[f.wj,(0,f.YJ)({direction:o,display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre-line"})]:(0,f.FC)(t):null,"tag"===r||"question"===r?[(0,f.GI)({theme:i,fontFamily:"Proxima",fontWeight:"semiBold"}),{lineHeight:"22px",color:n.TextPrimary,pointerEvents:"none","a:hover":[{textDecoration:"none"},(0,f.YJ)({direction:o,display:x,verticalAlign:"top",maxWidth:"100%"})],strong:{wordBreak:"break-word",fontWeight:600}}]:null]),"label:DivContainer;"),k=(0,h.Z)("strong",{target:"ejg0rhn1"})((({theme:e,styleType:t=""})=>({fontWeight:"kep"===t?e.fontWeights.bold:e.fontWeights.semiBold})),"label:StrongText;"),C=(0,h.Z)("svg",{target:"ejg0rhn2"})((({theme:{direction:e}})=>[{position:"absolute",top:"50%",marginTop:"-8px"},(0,f.YJ)({direction:e,start:"5px"})]),"label:SvgIcon;"),S=(0,h.Z)(b.v,{shouldForwardProp:e=>"styleType"!==e&&"inline"!==e,target:"ejg0rhn3"})((({styleType:e,inline:t,theme:{direction:i,colors:o}})=>[{background:o.BGPlaceholderDefault,display:t?"inline":x,padding:"1px 5px",position:"relative"},"tag"===e&&[{display:"initial",whiteSpace:"nowrap",fontSize:"14px",lineHeight:"20px"},(0,f.YJ)({direction:i,paddingStart:25})],("duet"===e||"question"===e)&&(0,f.YJ)({direction:i,paddingStart:25}),"kep"===e&&[{fontWeight:700}]]),"label:StyledLink;"),j=(0,h.Z)(b.v,{target:"ejg0rhn4"})({display:x},"label:StyledCommonLink;");function I({type:e,id:t,authorId:i,groupId:o,text:n,isDuet:s,reportParams:l,shouldReport:d,onSearchResultClick:c}){return(0,r.useCallback)((r=>{if(r.stopPropagation(),d)switch(e){case"tag":a.W.handleEnterTagDetail(Object.assign({tag_id:t,author_id:i,group_id:o,enter_method:s?"click_duet":"click_caption"},l)),null==c||c("tag");break;case"user":a.W.handleEnterUser(Object.assign({to_user_id:t,author_id:i,group_id:o,enter_method:s?"click_duet":"click_caption",to_user_name:n.substr(1)},l)),null==c||c("person");break;case"video":a.W.handleEnterVideo(Object.assign({author_id:i,group_id:o,to_group_id:t,enter_method:s?"click_duet":"click_caption"},l));break;case"question":a.W.handleEnterQuestion(Object.assign({author_id:i,group_id:o,question_id:t,enter_method:"click_anchor"},l))}}),[d,e,t,i,o,s,l,c,n])}const P=e=>{const{href:t,text:i,index:a,id:s,type:l,reportParams:d,shouldReport:c=!0,styleType:p,authorId:h,groupId:u,hasSpace:m=!0,onLinkClick:g,onSearchResultClick:y}=e,v=I({type:l,id:s,text:i,isDuet:!0,reportParams:d,shouldReport:c,authorId:h,groupId:u,onSearchResultClick:y}),_=(0,r.useCallback)((e=>{v(e),null==g||g(e,t)}),[v,t,g]),{colors:f}=(0,n.u)();return(0,o.jsxs)(S,Object.assign({to:t,onClick:_,styleType:p},{children:[(0,o.jsx)(C,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",fill:f.Primary2,width:16,height:16,styleType:p},{children:(0,o.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(0,o.jsxs)(k,{children:[i,m?" ":""]},void 0)]}),i+a)},T=e=>{const{href:t,text:i,index:a,id:d,type:c,reportParams:p,shouldReport:h=!0,styleType:u,inline:m,authorId:g,groupId:y,onLinkClick:v,onSearchResultClick:_}=e,f=(0,l.Q)(),b=I({type:c,id:d,text:i,isDuet:!1,reportParams:p,shouldReport:h,authorId:g,groupId:y,onSearchResultClick:_}),x=(0,r.useCallback)((e=>{if(!d)return e.preventDefault(),s.h.destroy(),void s.h.open({content:f("qapage_webapp_error_title"),duration:3,widthType:"padding"});b(e),null==v||v(e,t)}),[b,t,d,v,f]),{colors:w}=(0,n.u)();return(0,o.jsxs)(S,Object.assign({"data-e2e":"question-video-anchor",to:t,onClick:x,styleType:u,inline:m},{children:[(0,o.jsx)(C,Object.assign({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:w.Primary2,width:16,height:16,styleType:u},{children:(0,o.jsx)("use",{xlinkHref:"#svg-question-fill"},void 0)}),void 0),(0,o.jsx)(k,{children:i},void 0)]}),i+a)},O=e=>{const{href:t,text:i,index:n,id:a,type:s,authorId:l,groupId:d,reportParams:c,shouldReport:p=!0,hasSpace:h=!0,styleType:u,onLinkClick:m,onSearchResultClick:g}=e,y=I({type:s,id:a,authorId:l,groupId:d,text:i,isDuet:!1,reportParams:c,shouldReport:p,onSearchResultClick:g}),v=(0,r.useCallback)((e=>{y(e),null==m||m(e,t)}),[y,t,m]);return(0,o.jsx)(j,Object.assign({to:t,onClick:v},{children:(0,o.jsxs)(k,Object.assign({styleType:u},{children:[i,h?" ":""]}),void 0)}),i+n)},L=(0,r.memo)((function(e){const{item:t,ellispsisLine:i=0,ellipsisOnNarrow:n=!1,e2eTag:r,shouldReport:a=!0,reportParams:s,mode:l,styleType:d="default",style:c={}}=e;return(0,o.jsx)(w,Object.assign({style:c,ellipsis:n,ellispsisLine:i,styleType:d,"data-e2e":r},{children:(0,o.jsx)(_,{mode:l,item:t,DuetComp:P,LinkComp:O,QuestionComp:T,reportParams:s,shouldReport:a,styleType:d,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},void 0)}),void 0)}))},99727:(e,t,i)=>{i.d(t,{_:()=>_});var o,n=i(64047),r=i(11040),a=i(74820),s=i(91051),l=i(75131),d=i(66958),c=i(90035),p=i(77107),h=i(32913),u=i(27918);!function(e){e[e.OneColumn=0]="OneColumn",e[e.BrowserMode=1]="BrowserMode",e[e.KEP=2]="KEP"}(o||(o={}));const m={0:e=>[(0,u.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,u.f1)({max:767,style:{maxWidth:"250px"}})],1:e=>[(0,u.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],2:e=>[(0,u.GI)({theme:e,typography:"P3",fontFamily:"Proxima",fontWeight:"normal"}),{display:"inline",color:e.colors.TextSecondary},{a:{color:e.colors.TextSecondary}},(0,u.YJ)({direction:e.direction,marginStart:12})]},g=(0,h.Z)("h4",{target:"epjbyn0"})((({styleType:e,theme:t})=>m[e](t)),"label:H4Link;"),y={0:{marginRight:"5px"},1:{marginRight:"8px"},2:{marginRight:"4px"}},v=(0,h.Z)("svg",{target:"epjbyn1"})((({styleType:e,theme:{direction:t}})=>[{transform:"translateY(4px)"},(0,u.YJ)({direction:t,marginEnd:y[e].marginRight})]),"label:SvgIcon;");v.defaultProps={width:"1em",height:"1em"};const _=(0,s.memo)((function(e){var t,i,o,h,{item:u,styleType:m,e2eTag:y,teaParams:_={},onLinkClick:f}=e,b=(0,n.__rest)(e,["item","styleType","e2eTag","teaParams","onLinkClick"]);const{music:x,id:w,authorId:k}=null!=u?u:{},C=null!==(t=null==x?void 0:x.title)&&void 0!==t?t:"",S=null!==(i=null==x?void 0:x.authorName)&&void 0!==i?i:"",j="Promoted Music"===C?C:C.replace(`- ${S}`,"")+(S?` - ${S}`:""),I=(0,d.MB)({musicId:null!==(o=null==x?void 0:x.id)&&void 0!==o?o:"",musicName:null!==(h=null==x?void 0:x.title)&&void 0!==h?h:""}),P=(0,s.useCallback)((e=>{l.W.handleEnterMusicDetail(Object.assign(Object.assign({},_),{music_id:null==x?void 0:x.id,group_id:w,author_id:k,enter_method:"click_caption"})),null==f||f(e,I)}),[_,null==x?void 0:x.id,w,k,f,I]),{colors:T}=(0,a.u)();return x?(0,r.jsx)(g,Object.assign({styleType:m,"data-e2e":y},{children:(0,r.jsxs)(p.v,Object.assign({to:I,replace:1===m,onClick:P},b,{children:[(0,r.jsx)(v,Object.assign({fill:T.Primary2,styleType:m,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},{children:(0,r.jsx)("use",{xlinkHref:"#svg-music-note"},void 0)}),void 0),j]}),void 0)}),void 0):(0,c.G)(["music"])}))},8456:(e,t,i)=>{i.d(t,{_:()=>d,J:()=>c});var o=i(64047),n=i(9236),r=i(25615),a=i.n(r),s=i(91051),l=i(52053);const d=(0,s.createContext)({isBrowserModeShowing:!1,showBrowserMode:a(),closeBrowserMode:a()});function c(){const[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)({}),{showBrowserMode:a,closeBrowserMode:d}=(0,n.qj)(l.O),c=(0,s.useCallback)((e=>{const{teaParams:i}=e,n=(0,o.__rest)(e,["teaParams"]);a(n),t(!0),r(null!=i?i:{})}),[a]);return{showBrowserMode:c,closeBrowserMode:(0,s.useCallback)((e=>{t(!1),d(e)}),[d]),isBrowserModeShowing:e,teaParams:i}}},52053:(e,t,i)=>{i.d(t,{O:()=>E});var o=i(64047),n=i(73566),r=i(48185),a=i(19630),s=i(35167),l=i(82346),d=i(11348),c=i(68854),p=i(60595),h=i(20948),u=i(56979),m=i(53095),g=i(93859),y=i(49584),v=i(51905),_=i(5100),f=i(35468),b=i(47165),x=i(90035),w=i(21396),k=i(17230),C=i(74472),S=i(76967),j=i(83421),I=i(57244),P=i(30626),T=i(4206);let O=class{constructor(e){this.fetch=e}postModifyVisibility(e){return this.fetch.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:2})}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{baseUrlType:2,query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken}})}postDuetStitchChange(e){return this.fetch.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:2})}postVideoDelete(e){return this.fetch.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:2})}postScheduleDelete(e){return this.fetch.post("/api/schedule/aweme/delete/",{query:e,headers:{[P.eD]:this.fetch.csrfToken},baseUrlType:2})}};O=(0,o.__decorate)([(0,I.G)(),(0,o.__metadata)("design:paramtypes",[T.r])],O);const L={foryou:0,topic:0,following:0,video:0,music:1,music_new:1,challenge:1,challenge_new:1,sticker:1,user:1,"user-post":1,"user-liked":1,search_top:1,search_video:1,question:1,playlist:1,live_event:1,video_playlist:0,messages:0,discover:1},D={3:"friends",2:"private",1:"public"};let E=class extends n.D{constructor(e,t,i,o,n,r){super(),this.service=e,this.itemList=t,this.item=i,this.videoPlayer=o,this.videoExperience=n,this.t=r,this.defaultState={currentIndex:0,itemListKey:null,jumpSamePageTime:0,belowPlayMode:0}}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){e.currentIndex=t}setBelowPlayMode(e,t){e.belowPlayMode=t}setClickSamePage(e){e.jumpSamePageTime=Date.now()}showBrowserMode(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([{index:e,playProgress:t,belowPlayMode:i,forceUseIndexLocation:o},{itemListKey:n},r])=>({listInfo:r[n],itemListKey:n,index:e,playProgress:t,belowPlayMode:i,forceUseIndexLocation:o}))),(0,m.z)((({listInfo:e,index:t=0,playProgress:i=0,belowPlayMode:o,forceUseIndexLocation:n})=>{if(!e)return(0,l.of)(this.noop());const{browserList:r,list:a}=e,s=a[t],d=n?t:Math.max(0,Math.min(r.length-1,r.findIndex((e=>s===e)))),c=this.updateVideoIndex({newIndex:d,newId:s,isIndexInvalid:!1,playProgress:i});return o&&c.push(this.getActions().setBelowPlayMode(o)),(0,l.of)(...c)})))}closeBrowserMode(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,m.z)((([e,{itemListKey:t,currentIndex:i,belowPlayMode:o},n])=>{var r,a,s;const{playProgress:d=0,shouldPause:c=!1}=null!=e?e:{},p=n[null!=t?t:""],h=null!==(r=null==p?void 0:p.browserList)&&void 0!==r?r:[],u=null!==(a=null==p?void 0:p.list)&&void 0!==a?a:[],m=null!==(s=h[i])&&void 0!==s?s:"",g=u.findIndex((e=>m===e));return(0,l.of)(this.videoPlayer.getActions().updateVideo({currentVideo:{index:c?-1:g,id:c?"":m,mode:null!=o?o:L[null!=t?t:""]},playProgress:d}),this.getActions().setBelowPlayMode(null))})))}handleNextVideo(e){return e.pipe((0,g.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_next"})})),(0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,r,a;const s=null!==(r=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[],l=Math.min(i+1,s.length-1);return{newIndex:l,isIndexInvalid:!(null==s?void 0:s.length)||l<0,newId:null!==(a=s[l])&&void 0!==a?a:""}})),(0,g.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,m.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,b.n)({}))}handlePrevVideo(e){return e.pipe((0,g.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_prev"})})),(0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,r,a;const s=null!==(r=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[],l=Math.max(i-1,0);return{newIndex:l,isIndexInvalid:!(null==s?void 0:s.length)||l>s.length-1,newId:null!==(a=s[l])&&void 0!==a?a:""}})),(0,g.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,m.z)((e=>(0,l.of)(...this.updateVideoIndex(e)))),(0,b.n)({}))}postVideoDelete(e){return e.pipe((0,y.z)((e=>this.service.postVideoDelete(e).pipe((0,g.b)((({status_code:e,status_msg:t})=>{f.h.destroy(),2752===e?f.h.open({content:t,duration:3,widthType:"half"}):0===e?(f.h.open({content:this.t("deleted"),duration:3,widthType:"half"}),v.o.handleVideoDelete("delete")):f.h.open({content:this.t(k.kU),duration:3,widthType:"half"})})),(0,u.U)((({status_code:t})=>0===t?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,b.n)({callback:this.commonToastError})))))}postModifyVisibility(e){return e.pipe((0,m.z)((e=>this.service.postModifyVisibility(e).pipe((0,g.b)((({status_code:t,status_msg:i})=>{2752===t?(f.h.destroy(),f.h.open({content:i,duration:3,widthType:"half"})):0!==t?(f.h.destroy(),f.h.open({content:this.t(k.kU),duration:3,widthType:"half"})):(v.o.handleSelectPrivacySettingVideo({to_status:D[e.type]}),(0,x.k)(t,[0]))})),(0,u.U)((t=>0===t.status_code?this.item.getActions().setItemPrivateState({id:e.aweme_id,visibility:e.type}):2054===t.status_code?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,b.n)({callback:this.commonToastError})))))}postUserSetting(e){return e.pipe((0,y.z)((e=>this.service.postUserSetting(e).pipe((0,g.b)((({status_code:t})=>{this.tapPrivateSettingErrorToast({status_code:t,target:"comment",to_status:0===e.private_setting?"on":"off"})})),(0,u.U)((({status_code:t})=>{var i,o;return 0===t?this.item.getActions().updateItem({id:null!==(i=e.aweme_id)&&void 0!==i?i:"",itemCommentStatus:e.private_setting}):2054===t?this.getActions().updateDeleteVideo(null!==(o=e.aweme_id)&&void 0!==o?o:""):this.noop()})),(0,b.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:"comment",to_status:0===e.private_setting?"on":"off"})}})))))}postDuetOrStitchChange(e){return e.pipe((0,y.z)((({type:e,enable:t,aweme_id:i})=>this.service.postDuetStitchChange({aweme_id:i,[e]:t}).pipe((0,g.b)((({status_code:i})=>{this.tapPrivateSettingErrorToast({status_code:i,target:e,to_status:t?"on":"off"})})),(0,u.U)((({status_code:o})=>0===o?"item_duet"===e?this.item.getActions().updateItem({id:i,duetEnabled:0===t}):this.item.getActions().updateItem({id:i,stitchEnabled:0===t}):2054===o?this.getActions().updateDeleteVideo(i):this.noop())),(0,b.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:e,to_status:t?"on":"off"})}})))))}updateDeleteVideo(e){return e.pipe((0,h.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{currentIndex:t,itemListKey:i},o])=>{var n,r,a;const s=null===(n=o[null!=i?i:""])||void 0===n?void 0:n.browserList,l=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,d=!s||l-1<=0,c=l-1===t;return{id:e,isIndexInvalid:d,newIndex:c?t-1:t,newId:d?"":null!==(a=null==s?void 0:s[c?t-1:t+1])&&void 0!==a?a:""}})),(0,m.z)((({id:e,isIndexInvalid:t,newIndex:i,newId:o})=>e?(0,l.of)(this.itemList.getActions().setDeleteVideo(e),this.item.getActions().setDeleteVideo(e),...this.updateVideoIndex({newIndex:i,newId:o,isIndexInvalid:t})):d.E)))}clickSamePage(e){return e.pipe((0,m.z)((()=>(0,l.of)(this.getActions().setClickSamePage()))))}postScheduleDelete(e){return e.pipe((0,y.z)((e=>this.service.postScheduleDelete({aweme_id:e}).pipe((0,g.b)((()=>{f.h.destroy(),f.h.open({content:this.t("deleted"),duration:3,widthType:"half"})})),(0,m.z)((()=>(0,l.of)(this.getActions().updateDeleteVideo(e))))))),(0,c.K)((()=>(f.h.destroy(),f.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"}),(0,l.of)(this.noop())))),(0,g.b)((()=>{v.o.handleScheduleDelete("delete")})))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,playProgress:o}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:2},playProgress:null!=o?o:0}),this.getActions().setCurrentIndex(e)]}commonToastError(){f.h.destroy(),f.h.open({content:this.t(k.kU),duration:3,widthType:"half"})}tapPrivateSettingErrorToast({target:e,to_status:t,status_code:i}){0===i?v.o.handlePrivateSetting({target:e,to_status:t}):2054===i?(f.h.destroy(),f.h.open({content:this.t("video_unavailable_deleted"),duration:3,widthType:"half"})):(f.h.destroy(),f.h.open({content:this.t(k.kU),duration:3,widthType:"half"}))}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setItemListKey",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setCurrentIndex",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setBelowPlayMode",null),(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"setClickSamePage",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"showBrowserMode",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"closeBrowserMode",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"handleNextVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"handlePrevVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postVideoDelete",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postModifyVisibility",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postUserSetting",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postDuetOrStitchChange",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"updateDeleteVideo",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"clickSamePage",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],E.prototype,"postScheduleDelete",null),E=(0,o.__decorate)([(0,a.Y)("BrowserMode"),(0,o.__param)(5,(0,s.t)(w.s)),(0,o.__metadata)("design:paramtypes",[O,C.h,S.A,j.f,_.KF,Function])],E)},10126:(e,t,i)=>{i.d(t,{Lb:()=>x,vq:()=>k,ny:()=>w,Od:()=>j,IG:()=>C});var o=i(25615),n=i.n(o),r=i(90293),a=i(97458),s=i(81565),l=i(9484),d=i(52537),c=i(49879),p=i(85312),h=i(51850),u=i(23846),m=i(60665),g=i(91881),y=i(77277),v=i(45125),_=i(43540),f=i(11040);let b=0;const x={copy:"copy",whatsapp:"whatsapp",facebook:"facebook",twitter:"twitter",reddit:"reddit",pinterest:"pinterest",vk:"vk",sms:"sms",embed:"embed",telegram:"telegram",line:"line",linkedin:"linkedin",email:"email",message:"message"},w={facebook:"{Share to} Facebook",pinterest:"{Share to} Pinterest",twitter:"{Share to} Twitter",copy:"{copy_link}",embed:"{embed}",whatsapp:"{Share to} WhatsApp",reddit:"{Share to} Reddit",vk:"{Share to} VK",sms:"{Share to} Sms",telegram:"{Share to} Telegram",line:"{Share to} Line",linkedin:"{Share to} LinkedIn",email:"{Share to} Email",message:"{support_webapp_sharing_option_button}"},k={facebook:a.Z,pinterest:s.Z,twitter:l.Z,copy:d.Z,embed:c.Z,whatsapp:p.Z,reddit:h.Z,vk:u.Z,telegram:m.Z,line:g.Z,linkedin:y.Z,email:v.Z,message:_.Z,sms:function({width:e="1em",height:t="1em",style:i={}}){return b++,(0,f.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:`url(#sms_icon_paint0_linear_${b})`},void 0),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.6501 23.569C36.6501 29.3645 30.9865 34.0628 24.0001 34.0628C23.1537 34.0628 22.3267 33.9938 21.5269 33.8623C20.826 33.7948 20.4086 33.8602 19.689 34.0827C19.4224 34.1652 19.1109 34.3318 18.7539 34.5226C17.9542 34.9503 16.9262 35.5 15.6626 35.5C15.6388 35.5 15.7188 35.4207 15.8558 35.285C16.3095 34.8358 17.3876 33.7682 17.3876 32.9125V32.5167C13.7656 30.6708 11.3501 27.3539 11.3501 23.569C11.3501 17.7735 17.0137 13.0753 24.0001 13.0753C30.9865 13.0753 36.6501 17.7735 36.6501 23.569Z",fill:"white"},void 0),(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",Object.assign({id:`sms_icon_paint0_linear_${b}`,x1:"73.7964",y1:"64.0399",x2:"58.9088",y2:"-4.65515",gradientUnits:"userSpaceOnUse"},{children:[(0,f.jsx)("stop",{stopColor:"#43E6A2"},void 0),(0,f.jsx)("stop",{offset:"1",stopColor:"#18D037"},void 0)]}),void 0)},void 0)]}),void 0)}};function C({platform:e,url:t}){switch(e){case"facebook":return(0,r.stringifyUrl)({url:"https://www.facebook.com/sharer/sharer.php",query:{app_id:0x67903d22b9a8,u:t,display:"popup",sdk:"joey"}});case"twitter":return(0,r.stringifyUrl)({url:"https://twitter.com/intent/tweet",query:{refer_source:t,text:t}});case"pinterest":return(0,r.stringifyUrl)({url:"https://pinterest.com/pin/create/button/",query:{url:t,media:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png",desc:t}});case"whatsapp":return(0,r.stringifyUrl)({url:"https://wa.me/",query:{text:t}});case"reddit":return(0,r.stringifyUrl)({url:"https://www.reddit.com/submit",query:{url:t}});case"vk":return(0,r.stringifyUrl)({url:"https://vk.com/share.php",query:{url:t}});case"copy":return function(){const e=document.createElement("input");let i=!1;e.style.fontSize="16px",document.body.appendChild(e),e.value=t||"",e.select(),e.setSelectionRange(0,t.length),document.execCommand&&document.execCommand("copy"),e.remove()};case"telegram":return(0,r.stringifyUrl)({url:"https://t.me/share/url",query:{url:t,text:t}});case"line":return(0,r.stringifyUrl)({url:"https://lineit.line.me/share/ui",query:{url:t,text:t}});case"linkedin":return(0,r.stringifyUrl)({url:"https://www.linkedin.com/sharing/share-offsite",query:{url:t}});case"email":return(0,r.stringifyUrl)({url:"mailto:",query:{subject:t,body:t}});case"embed":case"message":return n();default:return"#"}}const S={pc:{US:["copy","sms","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","facebook","twitter","embed"],UA:["copy","whatsapp","vk","facebook","twitter","embed"],JP:["copy","twitter","facebook","whatsapp","embed"],default:["copy","whatsapp","facebook","twitter","embed"]},mobile:{US:["copy","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","sms","facebook","twitter","embed"],UA:["copy","whatsapp","vk","sms","facebook","twitter","embed"],JP:["copy","twitter","facebook","sms","whatsapp","embed"],default:["copy","whatsapp","sms","facebook","twitter","embed"]}};function j({region:e,isMobile:t=!1}){const i=t?"mobile":"pc";return S[i][e]||S[i].default}var I;!function(e){e[e.Video=0]="Video",e[e.Creator=1]="Creator"}(I||(I={}))},12886:(e,t,i)=>{i.d(t,{gR:()=>d,gL:()=>c,UI:()=>p});var o=i(9236),n=i(66958),r=i(24878),a=i(76967);const s="https://www.tiktok.com";function l(e){const t={"<":"&lt",">":"&gt;",'"':"&#34;","'":"&#39;","&":"&#38;","/":"&#47;"};let i=`(${Object.keys(t).toString()})`;i=i.replace(/,/g,")|(");const o=new RegExp(i,"g");return e.replace(o,(e=>t[e]))}function d(e){var t,i,d;const c=(0,o.mp)(a.A,{selector:t=>t[e],dependencies:[e]}),p=(0,o.mp)(r.z,{selector:e=>{var t;return e.users[null!==(t=null==c?void 0:c.author)&&void 0!==t?t:""]},dependencies:[null==c?void 0:c.author]}),{music:h,textExtra:u,desc:m}=null!=c?c:{},{uniqueId:g="",secUid:y}=null!=p?p:{},v=null!==(t=null==h?void 0:h.title)&&void 0!==t?t:"",_=null!==(i=null==h?void 0:h.id)&&void 0!==i?i:"",f=null!==(d=null==h?void 0:h.authorName)&&void 0!==d?d:"",b=(0,n.yl)({uniqueId:g,secUid:y}),x=(0,n.MB)({musicName:v,musicId:_}),w=(0,n.fH)({uniqueId:g,secUid:y,videoId:e}),k=v.replace(`- ${f}`,"")+(f?` - ${f}`:""),C=`${s}${b.split("?")[0]}`,S=`${s}${x.split("?")[0]}`,j=`${s}${w.split("?")[0]}`,I=`${s}/embed.js`,P=`@${g}`,T=`♬ ${l(k)}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${j}"\n      data-video-id="${e}" style="max-width: 605px;min-width: 325px;" >\n      <section>\n          <a target="_blank" title="${P}" href="${C}?refer=embed">${P}</a>\n          ${function(e,t=[]){return t.length?[...t].sort(((e,t)=>e.start-t.start)).reduce(((t,i,o,r)=>{const{start:a,end:d,hashtagName:c,type:p}=i,h=0===o?0:r[o-1].end,u=a,m=e.substring(h,u);m&&(t+=l(m));const g=e.substring(a,d);return t+(1===p&&c?`<a title="${c}" target="_blank" href="${s}${(0,n.JD)({tagName:c})}?refer=embed">${l(g)}</a>`:l(g))}),""):`<p>${l(e)}</p>`}(null!=m?m:"",u)}\n          <a target="_blank" title="${T}" href="${S}?refer=embed">${T}</a>\n      </section>\n    </blockquote>\n    <script async src="${I}"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function c(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${s}/@${e}"\n      data-unique-id="${e}"\n      data-embed-type="creator" style="max-width: 720px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${s}/@${e}?refer=creator_embed">@${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${s}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function p(e){return`?lang=${e}&embedFrom=webapp_preview`}},44401:(e,t,i)=>{i.d(t,{JW:()=>h,c1:()=>u});var o,n=i(9236),r=i(91051),a=i(21041),s=i(50218),l=i(23028),d=i(34708),c=i(8456),p=i(72975);function h(){var e;const{region:t=""}=null!==(e=(0,d.L)((()=>["region"]),[]))&&void 0!==e?e:{},i=(0,n.qj)(p.N);return(0,r.useCallback)((()=>{i.initShareSettings({isMobile:!1,region:t})}),[t,i])}function u(){var e,t;const{abTestVersion:i}=null!==(e=(0,d.L)((()=>["abTestVersion"]),[]))&&void 0!==e?e:{},{isBrowserModeShowing:o}=(0,r.useContext)(c._),n=null!==(t=(0,l.x)(i,"share_button_embed_test"))&&void 0!==t?t:"v1",{pathname:p}=(0,a.TH)();return(0,r.useMemo)((()=>{const e=((0,s.bf)(p)||(0,s.Dj)(p)||(0,s.ws)(p)||(0,s.u7)(p))&&!o,t=(0,s.oC)(p)||(0,s.Io)(p)||(0,s.FZ)(p);let i="none";return o?i="expand":(e||t)&&(i="short"),{additionShareOptions:!0,expanded:i,showEmbedButtonInUserPage:"v2"===n}}),[p,o,n])}!function(e){e.None="none",e.Simple="short",e.Expanded="expand"}(o||(o={}))},72975:(e,t,i)=>{i.d(t,{N:()=>v});var o=i(64047),n=i(73566),r=i(48185),a=i(19630),s=i(82346),l=i(60595),d=i(20948),c=i(49584),p=i(56979),h=i(10026),u=i(68854),m=i(4206),g=i(10126);function y(e){return e in g.Lb}let v=class extends n.D{constructor(e){super(),this.fetch=e,this.defaultState={platforms:null,platformsForAdditionOnly:null}}setPlatforms(e,t){e.platforms=t}initShareSettings(e){return e.pipe((0,d.M)(this.state$),(0,c.z)((([e,{platforms:t}])=>t?(0,s.of)(this.getActions().setPlatforms(t)):this.fetch.get("/api/share/settings/",{query:{device_platform:e.isMobile?"webapp_mobile":"webapp_pc",mode:1}}).pipe((0,p.U)((({status_code:t,share_platforms:i})=>{if(0===t&&(null==i?void 0:i.length)){const e=i.map((({platform_id:e})=>e)).filter(y);return this.getActions().setPlatforms(e)}return this.getActions().setPlatforms((0,g.Od)(e))})),(0,h.O)(this.getActions().setPlatforms([])),(0,u.K)((()=>(0,s.of)(this.getActions().setPlatforms((0,g.Od)(e)))))))))}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setPlatforms",null),(0,o.__decorate)([(0,r.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"initShareSettings",null),v=(0,o.__decorate)([(0,a.Y)("TTShare"),(0,o.__metadata)("design:paramtypes",[m.r])],v)},93645:(e,t,i)=>{i.d(t,{mB:()=>ge});var o=i(64047),n=i(11040),r=i(74820),a=i(9236),s=i(16926),l=i(91051),d=i(76851),c=i(19761),p=i(79489),h=i(35468),u=i(17936),m=i(8721),g=i(23028),y=i(34708),v=i(8456),_=i(61453),f=i(76967),b=i(10126);const x=function({width:e="1em",height:t="1em",style:i={}}){return(0,n.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i},{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"gray"},void 0),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.313 7.96568C12.3665 7.65966 12.658 7.45498 12.964 7.50851C13.27 7.56203 13.4747 7.8535 13.4211 8.15951L12.0506 15.9952C11.997 16.3012 11.7056 16.5059 11.3996 16.4523C11.0936 16.3988 10.8889 16.1073 10.9424 15.8013L12.313 7.96568ZM16.2402 8.77448C15.96 8.48453 15.5058 8.48453 15.2256 8.77448C14.9454 9.06443 14.9454 9.53454 15.2256 9.82449L17.454 12.1307L15.2262 14.4364C14.946 14.7263 14.946 15.1964 15.2262 15.4864C15.5063 15.7763 15.9606 15.7763 16.2407 15.4864L19.4551 12.1598C19.4704 12.1439 19.4704 12.1182 19.4551 12.1023L19.2233 11.8623L19.2201 11.8586L19.2158 11.854L16.2402 8.77448ZM8.88972 15.4867C8.59977 15.7766 8.12966 15.7766 7.83971 15.4867L5.4207 13.0677L4.76017 12.4071L4.51191 12.1589C4.49603 12.143 4.49603 12.1173 4.51191 12.1014L7.83853 8.77477C8.12848 8.48482 8.59859 8.48482 8.88854 8.77477C9.17849 9.06472 9.17849 9.53482 8.88854 9.82478L6.58318 12.1301L8.88972 14.4367C9.17967 14.7266 9.17967 15.1967 8.88972 15.4867Z",fill:"white"},void 0)]}),void 0)};var w=i(93797);function k(e,t){const i=w.W.getVar(e,t);return"val"in i?i.val:{}}var C,S,j,I=i(84785),P=i(56277);function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},T.apply(this,arguments)}const O=function(e){return l.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 316 366",width:"1em",height:"1em"},e),C||(C=l.createElement("g",{clipPath:"url(#creator-preview-skeleton_svg__clip0_1330_19052)"},l.createElement("rect",{width:316,height:366,fill:"white",rx:8}),l.createElement("rect",{width:112,height:20,x:104,y:45,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("rect",{width:196,height:16,x:104,y:73,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("rect",{width:284,height:20,x:16,y:322,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("rect",{width:130,height:170,x:16,y:128,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("path",{fill:"white",fillOpacity:.9,fillRule:"evenodd",d:"M73 202.851c0-1.559 1.705-2.519 3.038-1.709l16.715 10.148c1.283.779 1.283 2.641 0 3.419l-16.715 10.149c-1.333.809-3.038-.15-3.038-1.709v-20.298z",clipRule:"evenodd"}),l.createElement("rect",{width:130,height:170,x:154,y:128,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("path",{fill:"white",fillOpacity:.9,fillRule:"evenodd",d:"M211 202.851c0-1.559 1.705-2.519 3.038-1.709l16.715 10.148c1.283.779 1.283 2.641 0 3.419l-16.715 10.149c-1.333.809-3.038-.15-3.038-1.709v-20.298z",clipRule:"evenodd"}),l.createElement("rect",{width:130,height:170,x:292,y:128,fill:"#161823",fillOpacity:.06,rx:2}),l.createElement("circle",{cx:52,cy:68,r:36,fill:"#161823",fillOpacity:.06}),l.createElement("circle",{cx:52,cy:65,r:13.5,fill:"white"}),l.createElement("path",{fill:"white",fillRule:"evenodd",d:"M28.42 95.247C33.052 87.041 41.854 81.5 51.95 81.5c10.095 0 18.896 5.54 23.528 13.747A35.86 35.86 0 0151.95 104a35.86 35.86 0 01-23.53-8.753z",clipRule:"evenodd"}))),S||(S=l.createElement("rect",{width:315.5,height:365.5,x:.25,y:.25,stroke:"#161823",strokeOpacity:.12,strokeWidth:.5,rx:7.75})),j||(j=l.createElement("defs",null,l.createElement("clipPath",{id:"creator-preview-skeleton_svg__clip0_1330_19052"},l.createElement("rect",{width:316,height:366,fill:"white",rx:8})))))};var L=i(12886),D=i(32913);const E=(0,D.Z)("div",{target:"e1j7lnoh0"})({width:"322px",borderRadius:"9px",height:"389px;",margin:"0px"},"label:DivPreviewContainer;"),M=(0,D.Z)("iframe",{target:"e1j7lnoh1"})({display:"block",visibility:"unset",width:"100%",height:"389px"},"label:IframeCreatorEmbedPreview;"),B=function(e){var t;const{language:i}=null!==(t=(0,y.L)((()=>["language"]),[]))&&void 0!==t?t:{},{uniqueId:o,interactable:r}=e;if(!o)return(0,n.jsx)("div",{},void 0);const a=null!=i?i:"en";return(0,n.jsx)(E,Object.assign({style:{pointerEvents:r?"auto":"none"}},{children:(0,n.jsx)(M,{src:(()=>{const e=(0,L.UI)(a);return`https://www.tiktok.com/embed/@${o}${e}`})(),frameBorder:"0"},void 0)}),void 0)};var R=i(27918);const $=(0,D.Z)("div",{target:"eb786mc0"})((({theme:e})=>[(0,R.YJ)({direction:e.direction})]),{width:"700px",borderRadius:"9px","@media(max-width: 1000px)":{width:"400px"}},"label:DivModalContainer;"),U=(0,D.Z)("div",{target:"eb786mc1"})((({theme:e})=>[{transform:"rtl"===e.direction?"scaleX(-1)":"none"}]),{"@media(max-width: 1000px)":{display:"none"}},"label:DivSkeletonContainer;"),V=(0,D.Z)("div",{target:"eb786mc2"})((({theme:{colors:e}})=>({padding:"24px 24px 12px 24px",borderBottom:`0.5px solid ${e.LineSecondary}`})),"label:DivEmbedTitle;"),A=(0,D.Z)("h3",{target:"eb786mc3"})((({theme:e})=>(0,R.GI)({theme:e,typography:"P1",fontWeight:"bold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"start"},"label:H3EmbedTitle;"),Z=(0,D.Z)("div",{target:"eb786mc4"})((({theme:{direction:e}})=>(0,R.YJ)({direction:e,end:"23px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:23,cursor:"pointer"},"label:DivXMarkWrapper;"),q=(0,D.Z)("div",{target:"eb786mc5"})({display:"flex",justifyContent:"space-between",padding:"24px","@media(max-width: 1000px)":{paddingTop:0}},"label:DivModalInnerContainer;"),W=(0,D.Z)("div",{target:"eb786mc6"})({width:310,paddingTop:10,"@media(max-width: 1000px)":{width:"400px"}},"label:DivTextArea;"),z=(0,D.Z)("div",{target:"eb786mc7"})((({theme:e})=>[(0,R.GI)({theme:e,fontWeight:"semiBold"}),{fontSize:16,lineHeight:"24px"}]),{display:"block",width:"100%",marginBottom:"20px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word"},"label:DivAreaDescription;"),F=(0,D.Z)("textarea",{target:"eb786mc8"})((({theme:e})=>[(0,R.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{display:"block",padding:"12px 36px 12px 12px",width:"100%",height:148,marginBottom:20,border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word",background:e.colors.BGSecondary,borderRadius:2}]),"label:TextareaEmbedCode;"),H=(0,D.Z)("button",{target:"eb786mc9"})(R.Ph,(({theme:e,primary:t})=>[(0,R.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:"TextPrimary"}),{fontSize:16,border:`1px solid ${e.colors.LineSecondary}`,background:e.colors.BGTertiary},{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{borderRadius:2,display:"block",width:"100%",textAlign:"center",cursor:"pointer",height:"36px",marginBottom:"20px"},"label:Button;"),G=(0,D.Z)("p",{target:"eb786mc10"})((({theme:e})=>[(0,R.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"12px",lineHeight:"18px"},"label:PHint;"),Q=function(e){const{code:t,onCopy:i,uniqueId:o}=e,r=(0,m.Q)(),s=(0,a.mp)(I.G,{selector:e=>e.lang,dependencies:[]}),d=(0,l.useRef)(null),c=(0,l.useCallback)((()=>{var e;null===(e=d.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==i||i()}),[i]),p=`"https://www.tiktok.com/legal/terms-of-service?lang=${s}" target="_blank"`;let h;try{h=r("embed_profile_popup_bottom_desc").replace("%1$s",`<a href=${p}>${r("embed_profile_popup_bottom_desc_tos")}</a>`).replace("%2$s",`<a href="https://www.tiktok.com/legal/privacy-policy" target="_blank">${r("embed_profile_card_desc_privacy_policy")}</a>`)}catch(e){h=`By embedding profile, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${s}" target="_blank">Terms of Service</a> and acknowledge that you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy" target="_blank"> Privacy Policy.</a>`}const[u,g]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[_,f]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{const e=window.matchMedia("(max-width: 1000px)");e.addEventListener("change",(e=>f(e.matches))),f(e.matches)}),[]),(0,l.useEffect)((()=>{if(_)g(!1);else{const e=k("embed_share_pop_up",null);g(e.show_embed_preview||!1),v(e.interactive_preview||!1)}console.log(_)}),[_]),(0,n.jsxs)($,{children:[(0,n.jsxs)(V,{children:[(0,n.jsx)(A,{children:r("embed_profile_popup_title")},void 0),(0,n.jsx)(Z,Object.assign({onClick:e.onClose},{children:(0,n.jsx)(P.Z,{width:20,height:20},void 0)}),void 0)]},void 0),(0,n.jsxs)(q,{children:[u?(0,n.jsx)(B,{uniqueId:o,interactable:y},void 0):(0,n.jsx)(U,{children:(0,n.jsx)(O,{width:"316",height:"366"},void 0)},void 0),(0,n.jsxs)(W,{children:[(0,n.jsx)(z,{children:r("embed_profile_popup_desc")},void 0),(0,n.jsx)(F,{defaultValue:t,readOnly:!0,rows:7,ref:d},void 0),(0,n.jsx)(H,Object.assign({primary:!0,onClick:c},{children:r("embed_profile_popup_btn")}),void 0),(0,n.jsx)(G,{dangerouslySetInnerHTML:{__html:h}},void 0)]},void 0)]},void 0)]},void 0)},K=(0,D.Z)("div",{target:"e33cwjj0"})({borderRadius:"9px",margin:"15px",width:"325px",height:"757px"},"label:DivPreviewContainer;"),N=(0,D.Z)("iframe",{target:"e33cwjj1"})({display:"block",visibility:"unset",width:"325px",height:"757px"},"label:IframeVideoEmbedPreview;"),J=function(e){var t;const{videoId:i,isInteractive:o}=e,{language:r}=null!==(t=(0,y.L)((()=>["language"]),[]))&&void 0!==t?t:{};return(0,n.jsx)(K,Object.assign({style:{pointerEvents:o?"auto":"none"}},{children:(0,n.jsx)(N,{src:(()=>{const e=null!=r?r:"en",t=(0,L.UI)(e);return"https://www.tiktok.com/embed/v2/"+i+t})(),frameBorder:"0"},void 0)}),void 0)},Y=(0,D.Z)("div",{target:"e172cezw0"})({width:"310px",borderRadius:"9px"},"label:DivModalContainer;"),X=(0,D.Z)("div",{target:"e172cezw1"})({borderRadius:"9px",flexDirection:"row",display:"flex"},"label:DivModalPreviewContainer;"),ee=(0,D.Z)("h3",{target:"e172cezw2"})((({theme:e})=>(0,R.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"center",marginTop:"32px",marginBottom:"24px"},"label:H3EmbedTitle;"),te=(0,D.Z)("textarea",{target:"e172cezw3"})((({theme:e})=>[(0,R.GI)({theme:e,typography:"P2",color:"TextPrimary"}),{display:"block",padding:"0 24px",width:"100%",marginBottom:"16px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word",background:e.colors.BGSecondary}]),"label:TextareaEmbedCode;"),ie=(0,D.Z)("p",{target:"e172cezw4"})((({theme:e})=>[(0,R.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"11px",lineHeight:"14px",marginBottom:"24px",padding:"0 24px"},"label:PHint;"),oe=(0,D.Z)("button",{target:"e172cezw5"})(R.Ph,(({theme:e,primary:t})=>[(0,R.GI)({theme:e,typography:"P2",fontWeight:t?"semiBold":"normal",color:"TextPrimary"}),{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{display:"block",width:"100%",textAlign:"center",cursor:"pointer",fontSize:"15px",lineHeight:"52px",position:"relative"},"label:Button;"),ne=function(e){const{code:t,type:i,onCopy:o,uniqueId:r,videoId:s}=e,d=(0,m.Q)(),c=(0,a.mp)(I.G,{selector:e=>e.lang,dependencies:[]}),p=(0,l.useRef)(null),h=(0,l.useCallback)((()=>{var e;null===(e=p.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==o||o()}),[o]),u=`"https://www.tiktok.com/legal/terms-of-service?lang=${c}" target="_blank"`;let g;try{g=d("By embedding this video, you confirm that you agree to our <a href={TermsHref}>Terms of Use</a> and acknowledge you have read and understood our <a href={PolicyHref}> Privacy Policy.</a>").replace("{TermsHref}",u).replace("{PolicyHref}",'"https://www.tiktok.com/legal/privacy-policy-row" target="_blank"')}catch(e){g=`By embedding this video, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${c}" target="_blank">Terms of Service</a> and acknowledge you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy-row" target="_blank"> Privacy Policy.</a>`}const y=k("embed_share_pop_up",null),v=Boolean(y.show_embed_preview),_=Boolean(y.interactive_preview);return 1===i?(0,n.jsx)(Q,{code:t,onClose:e.onClose,onCopy:o,uniqueId:r},void 0):(0,n.jsxs)(X,{children:[s&&v&&(0,n.jsx)(J,{videoId:s,isInteractive:_},void 0),(0,n.jsxs)(Y,{children:[(0,n.jsx)(ee,{children:d("Embed video")},void 0),(0,n.jsx)(te,{defaultValue:t,readOnly:!0,rows:7,ref:p},void 0),(0,n.jsx)(ie,{dangerouslySetInnerHTML:{__html:g}},void 0),(0,n.jsx)(oe,Object.assign({primary:!0,onClick:h},{children:d("Copy code")}),void 0),(0,n.jsx)(oe,Object.assign({onClick:e.onClose},{children:d("Close")}),void 0)]},void 0)]},void 0)};var re,ae=i(44401),se=i(72975);!function(e){e[e.Icon=0]="Icon",e[e.Entry=1]="Entry",e[e.Corner=2]="Corner"}(re||(re={}));const le={0:({theme:{direction:e}})=>[{display:"block",fontSize:0},(0,R.YJ)({direction:e,marginEnd:"8px"})],2:()=>[{display:"block",fontSize:0,margin:"4px auto"}],1:({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"}})},de=(0,D.Z)("a",{target:"e15mchsh0"})((({mode:e,theme:t})=>le[e]({theme:t})),"label:AShareLink;"),ce=(0,D.Z)("a",{target:"e15mchsh1"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 16px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"}})),"label:AShareArrow;"),pe=(0,D.Z)("span",{target:"e15mchsh2"})((({theme:{direction:e}})=>(0,R.YJ)({direction:e,marginStart:"12px"})),"label:SpanShareText;"),he=(0,D.Z)("div",{target:"e15mchsh3"})({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",background:"rgba(22, 24, 35, 0.1)",textDecoration:"none",color:"rgba(22, 24, 35, 0.5)"},"label:DivDisabledArea;");var ue;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.HEADER=1]="HEADER",e[e.BOTTOM=2]="BOTTOM",e[e.BrowserModePopup=3]="BrowserModePopup"}(ue||(ue={}));const me={0:24,2:24,1:26},ge=(0,l.memo)((function(e){var t,{videoId:i="",uniqueId:w="",onClickShare:k,mode:C,embedCode:S,embedType:j,isEmbedDisabled:I=!1,onEmbedModalVisibleChange:P,enabled:T=!0,url:O=""}=e,L=e.teaParams,D=void 0===L?{}:L,{group_id:E,author_id:M}=D,B=(0,o.__rest)(D,["group_id","author_id"]),{from:R=0,onOtherModalOpen:$,onSendMessagePanelOpen:U,onPlatformCountChange:V}=e;const A=(0,m.Q)(),[Z,q]=(0,l.useState)(!1),{isBrowserModeShowing:W}=(0,l.useContext)(v._),{expanded:z,showEmbedButtonInUserPage:F}=(0,ae.c1)(),H=(0,s.fz)(p.p),G=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),q(!0),H.handleSharePanelClick(Object.assign({group_id:E,author_id:M},B))}),[E,H,M,B]),{abTestVersion:Q,user:K}=null!==(t=(0,y.L)((()=>["abTestVersion","user"]),[]))&&void 0!==t?t:{},N=(0,g.x)(Q,"dm_video_share_test"),{vl1:J,forFriend:Y}=(0,a.mp)(f.A,{selector:e=>{var t;return null!==(t=e[i])&&void 0!==t?t:{}},dependencies:[i]}),X="v2"===N&&(!K||(null==K?void 0:K.hasIMPermission))&&!(J&&!Y)&&!(1===R||2===R),ee=Boolean(K),te=(0,a.qj)(_.r),ie=(0,l.useCallback)((e=>{const t=e.indexOf(b.Lb.copy);e.length>5&&"short"===z&&t>4&&(e.splice(t,1),e.splice(4,0,b.Lb.copy))}),[z]),{platforms:oe}=(0,a.mp)(se.N,{selector:e=>{var t;let{platforms:i}=e;X||(i=null!==(t=null==i?void 0:i.filter((e=>e!==b.Lb.message)))&&void 0!==t?t:[]);const o=(null!=i?i:[]).filter((e=>e!==b.Lb.sms&&e!==b.Lb.embed));(1===j&&F||1!==j)&&S&&o.unshift("embed");const n=o.filter((e=>e!==b.Lb.copy));switch(C){case 0:return{platforms:n};case 1:return i=[...o].reverse(),ie(o),i=o,W&&(i=n),{platforms:i};default:return{platforms:o}}},dependencies:[C,S,W,F,ie,j,X]}),re=(0,l.useMemo)((()=>oe.length>5&&!Z&&1===C&&"expand"!==z),[oe,Z,C,z]),[le,ue]=(0,l.useState)(!1);(0,l.useEffect)((()=>{null==P||P(le)}),[le,P]);const ge=(0,l.useCallback)((e=>e.replace(/(.*?){(.*?)}(.*?)/g,((e,t,i,o)=>t+A(i)+o))),[A]),ye=me[C],ve=(0,r.u)(),_e=(0,l.useCallback)(((e,t)=>i=>{if(t&&(i.preventDefault(),i.stopPropagation(),t()),T||(i.preventDefault(),h.h.destroy(),h.h.open({content:A("web_sharing_disable_toast"),duration:3,widthType:"half"})),null==k||k(e),H.handleShare(Object.assign({platform:e,group_id:E,author_id:M,share_option_type:z,share_click_from:Z||3===R?"long":"short"},B)),"copy"===e&&T)h.h.open({content:A("Copied"),duration:1.2,widthType:"half"});else if("embed"===e)ue(!0);else if("message"===e){if(!ee)return void te.openModal({query:{enter_method:"share_button"}});null==U||U()}}),[T,k,H,E,M,z,Z,B,A,ee,U,te,R]),fe=(0,l.useCallback)((()=>{ue(!1),null==$||$(!1)}),[$]),be=(0,l.useCallback)((()=>{H.handleClickShare(Object.assign({platform:"embed",group_id:E,author_id:M,share_option_type:z,share_click_from:Z?"long":"short"},B)),h.h.open({content:A("embed_success"),duration:1.2,widthType:"half"}),ue(!1)}),[M,z,E,H,B,Z,A]),xe=(0,l.useMemo)((()=>0===C?[0,5]:W?[5,void 0]:Z||2===C||"expand"===z?[0,void 0]:[0,5]),[W,Z,C,z]);return(0,l.useEffect)((()=>{var e,t;const i=null!==(t=null===(e=null==oe?void 0:oe.slice(...xe))||void 0===e?void 0:e.length)&&void 0!==t?t:0;null==V||V(i)}),[V,oe,xe]),(0,n.jsxs)(n.Fragment,{children:[null==oe?void 0:oe.slice(...xe).map((e=>{const t="ltr"===ve.direction?"left":"right",i=2===C?t:"top",o=b.vq[e],r=(0,b.IG)({platform:e,url:O}),a="string"==typeof r?{href:r,target:"_blank",rel:"noopener noreferrer",onClick:_e(e)}:{href:"#",onClick:_e(e,r)},s=(0,n.jsxs)(de,Object.assign({mode:C},a,{"data-e2e":`video-share-${e}`},{children:[(0,n.jsx)(o,{width:ye,height:ye},void 0),1===C&&(0,n.jsx)(pe,{children:ge(b.ny[e])},void 0)]}),e);return I&&"embed"===e?(0,n.jsx)(u.u,Object.assign({overlay:A("embed_profile_tooltip"),placement:"bottom"},{children:(0,n.jsxs)(he,{children:[(0,n.jsx)(x,{width:ye,height:ye},void 0),(0,n.jsx)(pe,{children:ge(b.ny[e])},void 0)]},void 0)}),e):0===C||2===C?(0,n.jsx)(u.u,Object.assign({overlay:ge(b.ny[e]),placement:i},{children:s}),e):s})),re&&(0,n.jsx)(ce,Object.assign({href:"#",onClick:G},{children:(0,n.jsx)(c.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(d.AR,Object.assign({compact:!0,isOpen:le,onClose:fe,closeOnBackdropClick:!1},{children:(0,n.jsx)(ne,{onCopy:be,onClose:fe,code:S,type:j,videoId:i,uniqueId:w},void 0)}),void 0)]},void 0)}))},79489:(e,t,i)=>{i.d(t,{p:()=>s});var o,n=i(64047),r=i(57244),a=i(93797);!function(e){e.Share="share",e.ShareVideo="share_video",e.SharePanelShow="share_panel_show",e.SharePanelClick="share_panel_click",e.ClickShare="click_share_button"}(o||(o={}));let s=class{handleEvent(e,t={}){a.W.event(e,Object.assign(Object.assign({},t),{type:t.group_id?"video":this.type}))}handleSharePanelShow(e){this.handleEvent("share_panel_show",e)}handleSharePanelClick(e){this.handleEvent("share_panel_click",e)}handleShare(e){const t=e.group_id?"share_video":"share";this.handleEvent(t,e)}handleClickShare(e){this.handleEvent("click_share_button",e)}get type(){const{page_name:e}=a.W.commonParams;switch(e){case"video_detail":return"video";case"single_song":return"music";case"challenge":return"tag";case"others_homepage":case"personal_homepage":return"profile";case"discover_kw":return"kep";default:return}}};s=(0,n.__decorate)([(0,r.G)()],s)},51905:(e,t,i)=>{i.d(t,{o:()=>r});var o,n=i(93797);!function(e){e.ClickPrivacySettingVideo="click_privacy_setting_video",e.SelectPrivacySettingVideo="select_privacy_setting_video",e.PrivacySettingAllowInteraction="privacy_setting_allow_interaction",e.ClickDeleteVideo="click_delete_video",e.ActionOnDeleteVideo="action_on_delete_video",e.ScheduleDeleteClick="click_delete_scheduled_video",e.ScheduleDeleteAction="action_on_delete_scheduled_video"}(o||(o={}));const r={handleClickPrivacySettingVideo:e=>{n.W.event("click_privacy_setting_video",e)},handleSelectPrivacySettingVideo:e=>{n.W.event("select_privacy_setting_video",e)},handlePrivateSetting:e=>{n.W.event("privacy_setting_allow_interaction",e)},handleClickDeleteVideo:e=>{n.W.event("click_delete_video",e)},handleVideoDelete:e=>{n.W.event("action_on_delete_video",{action:e})},handleScheduleConfirm:e=>{n.W.event("click_delete_scheduled_video",{group_id:e})},handleScheduleDelete:e=>{n.W.event("action_on_delete_scheduled_video",{action:e})}}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2322],{90109:(e,o,t)=>{t.d(o,{DF:()=>a,nW:()=>l,Bn:()=>d,q2:()=>s});var i=t(4139),n=t(11838),r=t(27918);const a=(0,i.Z)("h3",{target:"emt6k1z0"})((({theme:e})=>[(0,r.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"P1"}),{display:"inline-block"},(0,r.YJ)({direction:e.direction,marginEnd:"4px"}),(0,r.f1)({max:767,style:Object.assign({display:"block"},r.wj)})]),"label:H3AuthorTitle;");a.defaultProps=Object.assign(Object.assign({},a.defaultProps),{"data-e2e":"video-author-uniqueid"});const l=(0,i.Z)(n.D,{target:"emt6k1z1"})({display:"block",":hover":{textDecoration:"none",[`${a}`]:{textDecoration:"underline"}}},(0,r.f1)({max:479,style:r.wj}),"label:StyledAuthorAnchor;"),d=(0,i.Z)("h4",{target:"emt6k1z2"})((({theme:e})=>[(0,r.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{display:"inline-block",lineHeight:"28px"},(0,r.f1)({max:767,style:Object.assign({display:"block",lineHeight:e.typography.P3.lineHeight},r.wj)})]),"label:H4AuthorName;");d.defaultProps=Object.assign(Object.assign({},d.defaultProps),{"data-e2e":"video-author-nickname"});const s=(0,i.Z)("span",{target:"emt6k1z3"})((({theme:e})=>[(0,r.GI)({theme:e,typography:"P3"}),{display:"inline-flex",alignItems:"center",verticalAlign:"middle",svg:{marginInlineEnd:"4px"}}]),"label:SpanPrivateOrFriend;")},72240:(e,o,t)=>{t.d(o,{H:()=>m});var i=t(11040),n=t(91051),r=t(4139),a=t(27918);const l=(0,r.Z)("div",{target:"e1d2dr950"})({display:"flex",marginRight:"68px",paddingTop:"24px"},"label:DivOneColSkeletonContainer;"),d=(0,r.Z)("div",{target:"e1d2dr951"})({width:"56px",height:"56px",flex:"0 0 56px",background:"rgba(18, 18, 18, 0.03)",borderRadius:"100%"},(({theme:{direction:e}})=>(0,a.YJ)({direction:e,marginEnd:"12px"})),(0,a.f1)({max:479,style:{display:"none"}}),"label:DivOneColSkeletonAvatar;"),s=(0,r.Z)("div",{target:"e1d2dr952"})({display:"flex",flexDirection:"row",alignItems:"center",[`${d}`]:{width:"40px",height:"40px",flex:"0 0 40px",display:"none"}},(0,a.f1)({max:479,style:{[`${d}`]:{display:"block"}}}),"label:DivOneColSkeletonContentContainer;"),c=(0,r.Z)("div",{target:"e1d2dr953"})({paddingTop:"10px",flex:"1 1 auto"},"label:DivOneColSkeletonWrapper;"),u=(0,r.Z)("div",{target:"e1d2dr954"})((({styles:{width:e,marginBottom:o,marginTop:t},theme:i})=>({width:e,marginBottom:o,marginTop:t,maxWidth:"100%",height:"16px",background:i.colors.BGView,borderRadius:"2px"})),"label:DivOneColSkeletonContent;"),v={width:"200px",marginBottom:"6px"},p={width:"160px"},h={width:"478px",marginBottom:"5px",marginTop:"15px"},g={width:"478px",marginBottom:"0px"},m=(0,n.memo)((function(){return(0,i.jsxs)(l,{children:[(0,i.jsx)(d,{},void 0),(0,i.jsxs)(c,{children:[(0,i.jsxs)(s,{children:[(0,i.jsx)(d,{},void 0),(0,i.jsxs)("div",{children:[(0,i.jsx)(u,{styles:v},void 0),(0,i.jsx)(u,{styles:p},void 0)]},void 0)]},void 0),(0,i.jsx)(u,{styles:h},void 0),(0,i.jsx)(u,{styles:g},void 0)]},void 0)]},void 0)}))},65194:(e,o,t)=>{t.d(o,{k7:()=>u,EN:()=>v,zt:()=>h,xg:()=>g,Yx:()=>m});var i=t(11040),n=t(75506),r=t(4139),a=t(63092),l=t(11838),d=t(27918),s=t(90109),c=function(e,o){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&o.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)o.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(t[i[n]]=e[i[n]])}return t};const u=(0,r.Z)("div",{target:"etvrc4k0"})((({theme:e})=>[{display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"20px 0",position:"relative",maxWidth:"692px","::after":{content:'""',position:"absolute",left:0,bottom:0,width:"100%",height:"1px",transform:"scaleY(0.5)",background:e.colors.LinePrimary2}},(0,d.f1)({max:1079,style:{width:"calc(100vw - 388px)"}},{max:1071,style:{width:"592px",maxWidth:"592px"}},{max:767,style:{width:"calc(100vw - 32px - 68px)"}})]),"label:DivItemContainer;");u.defaultProps=Object.assign(Object.assign({},u.defaultProps),{"data-e2e":"recommend-list-item-container"});const v=(0,r.Z)("div",{target:"etvrc4k1"})((({theme:{direction:e}})=>(0,d.YJ)({direction:e,marginStart:"12px"})),{width:"624px",flex:"1 1 624px"},(0,d.f1)({max:479,style:{marginLeft:"0",width:"100%",flex:"0 0 100%"}}),"label:DivContentContainer;"),p=[{flex:"0 0 auto",":hover":{[`& ~ ${v} ${s.DF}, & ~ ${s.nW} ${s.DF}`]:{textDecoration:"underline"}}},(0,d.f1)({max:479,style:{display:"none"}})];function h(e){return e?(0,r.Z)((e=>{var{className:o}=e,t=c(e,["className"]);return(0,i.jsx)(a.G,Object.assign({className:(0,n.cx)("avatar-anchor",o)},t),void 0)}),{target:"etvrc4k3"})(...p):(0,r.Z)((e=>{var{className:o}=e,t=c(e,["className"]);return(0,i.jsx)(l.D,Object.assign({className:(0,n.cx)("avatar-anchor",o)},t),void 0)}),{target:"etvrc4k4"})(...p)}const g=(0,r.Z)("div",{target:"etvrc4k6"})((({theme:{direction:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",".avatar-anchor":[{display:"none"},(0,d.YJ)({direction:e,marginEnd:"12px"})]})),(0,d.f1)({max:479,style:{marginBottom:"12px",".avatar-anchor":{display:"block"}}}),"label:DivAuthorContainer;"),m=(0,r.Z)("div",{target:"etvrc4k7"})((({theme:{direction:e}})=>(0,d.YJ)({direction:e,marginEnd:"114px"})),"label:DivTextInfoContainer;")},51347:(e,o,t)=>{t.d(o,{y:()=>f});var i=t(11040),n=t(91051),r=t(14870),a=t(34708),l=t(23028),d=t(75595),s=t(88671),c=t(16929),u=t(13964),v=t(14563),p=t(4139);const h=(0,p.Z)("div",{target:"el1e52j0"})((({isStyleV2:e=!1})=>({width:e?"28px":"24px",height:e?"96px":"64px",margin:e?"8px 6px":"8px 7px 0px",display:"block",position:"relative",cursor:"initial",background:e?"rgba(255, 255, 255, 0.12)":"rgba(22, 24, 35, 0.34)",borderRadius:"32px"})),"label:DivVolumeControlContainer;"),g=(0,p.Z)("div",{target:"el1e52j1"})((({isStyleV2:e=!1})=>({width:e?"4px":"2px",height:e?"80px":"48px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:e?"12px":"11px",top:"8px",bottom:"8px",cursor:"pointer",borderRadius:"4px"})),"label:DivVolumeControlProgress;"),m=(0,p.Z)("div",{target:"el1e52j2"})((({theme:{colors:e},backgroundTheme:o,isStyleV2:t})=>({width:t?"4px":"2px",height:t?"80px":"48px",backgroundColor:"primary"===o?e.Primary:e.BGPrimary,position:"absolute",left:t?"12px":"11px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom",borderRadius:"4px"})),"label:DivVolumeControlBar;"),x=(0,p.Z)("div",{target:"el1e52j3"})((({isStyleV2:e=!1})=>({width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",left:e?"8px":"6px",bottom:"8px",cursor:"pointer",zIndex:1})),"label:DivVolumeControlCircle;"),f=(0,n.memo)((function(e){var o;const t=(0,n.useRef)(null),p=(0,n.useRef)(null),f=(0,n.useRef)(null),b=(0,n.useRef)(!0),{setVolumeDragging:k,isStyleV2:y=!1}=e,{mute:w,volume:j,setVolume:C}=(0,r.DZ)(),{abTestVersion:_}=null!==(o=(0,a.L)((()=>["abTestVersion"]),[]))&&void 0!==o?o:{},I=(0,l.x)(_,"seekbar_theme_test"),P=(0,n.useCallback)(((e,o)=>{v.$.handleSwitchSound({playMode:0,volume_from:e,volume_to:o}),v.$.handleVolumeChange({volume_from:e,volume_to:o,click_mute:!1})}),[]),S=(0,n.useRef)(w);(0,n.useEffect)((()=>{S.current=w}),[w]);const{percent:O,bindDrag:D,seek:T,update:M}=(0,d.S)({direction:"vertical",progressRef:t,circleRef:p,barRef:f,initialPercent:j,draggingStateCb:k,progressReportCallback:P}),V=(0,s.fB)((e=>{b.current?b.current=!1:C(e,S.current)}),[C],160);(0,n.useEffect)((()=>V(O)),[O]),(0,n.useEffect)((()=>{w||j!==c.G||M(c.G)}),[w,j,M]);const B=w?0:O,Z=B*(y?68:36);return(0,i.jsxs)(h,Object.assign({isStyleV2:y,onClick:u.UW},{children:[(0,i.jsx)(g,{isStyleV2:y,ref:t,onClick:T,onMouseDown:D},void 0),(0,i.jsx)(x,{isStyleV2:y,ref:p,style:{transform:`translateY(-${Z}px)`},onMouseDown:D},void 0),(0,i.jsx)(m,{isStyleV2:y,backgroundTheme:"v2"===I||y?"primary":void 0,ref:f,style:{transform:`scaleY(${B})`},onClick:T,onMouseDown:D},void 0)]}),void 0)}))},86953:(e,o,t)=>{t.d(o,{SL:()=>Po});var i=t(11040),n=t(9236),r=t(91051),a=t(92388),l=t(83421),d=t(52053),s=t(8456),c=t(14870),u=t(2723),v=t(30074),p=t(2734),h=t(76967),g=t(24878),m=t(84785),x=t(1160),f=t(88650),b=t(13964),k=t(75546),y=t(96207),w=t(57462),j=t(99727),C=t(22509),_=t(31223),I=t.n(_),P=t(19334),S=t.n(P),O=t(7915),D=t(65069),T=t(85404),M=t(90035),V=t(43683),B=t(90109);const Z=(0,r.memo)((function(e){const{uniqueId:o,teaParams:t={},secret:a=!1,friend:l=!1,createTime:d=0,hideCreateTime:s=!1}=e,{t:c,timeTranslator:u}=(0,T.e)(),v=(0,n.mp)(g.z,{selector:e=>{const t=e.users[o];if(t)return S()(t,["secUid","nickname","verified","uniqueId","id"])},dependencies:[o],equalFn:(e,o)=>I()(e,o)}),{secUid:h,nickname:m,verified:x,id:f=""}=(0,p.m7)(v),b=(0,r.useMemo)((()=>Object.assign({to_user_id:f},t)),[f,t]);return v?(0,i.jsxs)(B.nW,Object.assign({uniqueId:o,secUid:h,teaParams:b},{children:[(0,i.jsxs)(B.DF,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:[o,x&&(0,i.jsx)(V.Q,{width:14,height:14},void 0)]}),void 0),(0,i.jsx)(B.Bn,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:m}),void 0),!s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" · "},void 0),u(1e3*d)]},void 0),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" · "},void 0),(0,i.jsxs)(B.q2,{children:[(0,i.jsx)(O.Z,{width:16,height:16},void 0),c("video_label_private")]},void 0)]},void 0),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" · "},void 0),(0,i.jsxs)(B.q2,{children:[(0,i.jsx)(D.Z,{width:16,height:16},void 0),c("Friends only")]},void 0)]},void 0)]}),void 0):(0,M.G)(["author"])}));var R=t(53048),L=t(47127),E=t(33104),F=t(4139),N=t(27918),$=t(80537);const z=(0,F.Z)($.W,{target:"e4an5uj0"})((({theme:{direction:e}})=>[(0,N.YJ)({direction:e,end:"0"}),{position:"absolute",top:28,minWidth:"88px",padding:"0 10px","& > svg":{marginRight:"6px"}}]),"label:StyledFollowButton;"),A=(0,r.memo)((function({uniqueId:e,teaParams:o,e2eTag:t}){const n=(0,L.Q)(),{handleFollow:r,text:a,isFollowing:l,relation:d}=(0,E.w)({uniqueId:e,onNeedLogin:n,teaParams:o}),s=l?"default":"line";return(0,i.jsxs)(z,Object.assign({size:"small",onClick:r,buttonTheme:s,"data-e2e":t},{children:[2===d?(0,i.jsx)(R.Z,{},void 0):null,a]}),void 0)}));var W=t(65194),q=t(16926),G=t(87821),Y=t(33527),H=t(60622),U=t(79439),J=t(8721),K=t(15073),Q=t(61453),X=t(34708),ee=t(62321),oe=t(13033),te=t(14452),ie=t(76679),ne=t(36761),re=t(12853),ae=t(81578),le=t(29910),de=t(74820),se=t(23028),ce=t(75595),ue=t(76985),ve=t(17118),pe=t(32913);const he=(0,pe.Z)("div",{target:"e1n49v430"})({width:"100%",height:"12px",position:"absolute",bottom:0,cursor:"initial"},"label:DivVideoControlBottom;"),ge=(0,pe.Z)("div",{target:"e1n49v431"})({width:"100%",height:"16px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),me=(0,pe.Z)("div",{target:"e1n49v432"})({flex:"0 0 64px",maxWidth:"64px",marginInlineStart:"8px",fontSize:"10px",lineHeight:"16px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),xe=(0,pe.Z)("div",{target:"e1n49v433"})({height:"2px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer"},"label:DivSeekBarProgress;"),fe=(0,pe.Z)("div",{target:"e1n49v434"})((({theme:{direction:e,colors:o},backgroundTheme:t})=>({height:"2px",width:"100%",backgroundColor:"primary"===t?o.Primary:o.BGPrimary,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),be=(0,pe.Z)("div",{target:"e1n49v435"})((({theme:{direction:e}})=>(0,N.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),ke=(0,pe.Z)("div",{target:"e1n49v436"})((({show:e})=>({width:"100%",height:"16px",paddingInline:"12px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:"12px",cursor:"initial",display:"flex",[`:hover ${xe}`]:{height:"4px"},[`:hover ${fe}`]:{height:"4px"},[`:hover ${be}`]:{display:"block"}})),"label:DivVideoControlContainer;");var ye=t(70643);const we=(0,r.memo)((function(e){var o,t;const a=(0,r.useRef)(null),l=(0,r.useRef)(null),d=(0,r.useRef)(null),s=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[v,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!0),{direction:m}=(0,de.u)(),[x,f]=(0,r.useState)(!0),{abTestVersion:k,user:y}=null!==(o=(0,X.L)((()=>["abTestVersion","user"]),[]))&&void 0!==o?o:{},w=(0,se.x)(k,"seekbar_persistent_and_tooltip_test"),j="v1"!==w,C=(0,se.x)(k,"seekbar_theme_test"),{videoId:_,isActive:I,seek:P,videoRef:S,hideShortSeekBar:O,progressReportCallback:D,progressPreviewReportCallback:T}=e,[{duration:M,videoPercent:V,currentTime:B},Z]=(0,n.b7)(ee.M,{selector:e=>e[_]?e[_]:{duration:0,videoPercent:0,currentTime:0},dependencies:[]}),{percent:R,bindDrag:L,seek:E}=(0,ce.S)({direction:m,progressRef:l,circleRef:d,barRef:s,initialPercent:0,draggingStateCb:u,draggingPercentCb:P,progressReportCallback:D});(0,r.useEffect)((()=>{I||!B&&!V||Z.setVideoInfo({videoId:_,videoPercent:0})}),[I]),(0,r.useEffect)((()=>{B>=3&&g(!1)}),[B]);const F=null===(t=null==S?void 0:S.current)||void 0===t?void 0:t.currentCanPlay,N=!F&&0===B||O&&M<30;(0,r.useEffect)((()=>{!N&&h&&T()}),[N,h,T]),(0,r.useEffect)((()=>{F&&"v3"===w&&f((0,ye.Z)(`${null==y?void 0:y.uid}`))}),[null==y?void 0:y.uid,F,w]),(0,r.useEffect)((()=>{var e,o;null===(e=S.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{p(!1)}),0)})),null===(o=S.current)||void 0===o||o.onSeeking((()=>{p(!0)}))}),[S.current,p]);const $=(0,r.useCallback)((()=>{(0,ye.j)(`${null==y?void 0:y.uid}`)}),[null==y?void 0:y.uid]),z=(0,r.useCallback)((()=>{(0,ye.Z)(`${null==y?void 0:y.uid}`)||$(),x||f(!0)}),[null==y?void 0:y.uid,$,x]);if(N)return null;const A=c||v?R:V,W="ltr"===m?{left:`calc(${100*A}%)`}:{right:`calc(${100*A}%)`};return(0,i.jsx)(ve.H,Object.assign({visible:!x,text:"webapp_seekbar_tooltip",onShow:$},{children:(0,i.jsxs)(ke,Object.assign({show:c||h||j,onMouseDown:b.UW,onClick:z},{children:[(0,i.jsxs)(ge,Object.assign({ref:a},{children:[(0,i.jsx)(xe,{ref:l,onClick:E,onMouseDown:L},void 0),(0,i.jsx)(be,{ref:d,style:W,onMouseDown:L},void 0),(0,i.jsx)(fe,{backgroundTheme:"v2"===C?"primary":void 0,ref:s,style:{transform:`scaleX(${A}) translateY(-50%)`},onClick:E,onMouseDown:L},void 0)]}),void 0),(0,i.jsx)(me,{children:"ltr"===m?`${(0,ue.xo)(B)}/${(0,ue.xo)(M)}`:`${(0,ue.xo)(M)}/${(0,ue.xo)(B)}`},void 0)]}),void 0)}),void 0)}));var je=t(56344),Ce=t(23683),_e=t(91036),Ie=t(5100),Pe=t(12285),Se=t(58500),Oe=t(89811),De=t(15854),Te=t(44401),Me=t(12886),Ve=t(66958),Be=t(45714),Ze=t(48793),Re=t(84475),Le=t(48382),Ee=t(93645),Fe=t(30109),Ne=t(79489);const $e=(0,t(50482).ZP)({resolved:{},chunkName:()=>"animation",isReady(e){const o=this.resolve(e);return!0===this.resolved[o]&&!t.m[o]},importAsync:()=>Promise.all([t.e(8844),t.e(2539),t.e(3641),t.e(1050)]).then(t.bind(t,29480)),requireAsync(e){const o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((e=>(this.resolved[o]=!0,e)))},requireSync(e){const o=this.resolve(e);return t(o)},resolve:()=>29480}),ze=({likedIcon:e,unlikeIcon:o,isLiked:t})=>{const[n,a]=(0,r.useState)(!1),l=(0,r.useRef)(!1);(0,r.useEffect)((()=>{t&&l.current&&a(t)}),[t]),(0,r.useEffect)((()=>{a(!t),l.current=!0}),[]);const d=(0,r.useCallback)((()=>{a(!1)}),[]);return t?(0,i.jsx)("div",{children:n?(0,i.jsx)($e,{autoplay:!0,onComplete:d},void 0):e},void 0):o};var Ae=t(3624);t(20935);const We=(0,F.Z)("div",{target:"e1whjx9o0"})({display:"flex",flexDirection:"column"},"label:DivActionItemContainer;"),qe=((0,Ae.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.67)"},"100%":{transform:"scale(1)"}}),(0,Ae.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.33)"},"100%":{transform:"scale(1)"}}),24),Ge=(0,i.jsx)(De.Z,{width:qe,height:qe},void 0),Ye=(0,i.jsx)("svg",Object.assign({width:qe,height:qe,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},{children:(0,i.jsx)("use",{xlinkHref:"#svg-ellipsis-right-fill"},void 0)}),void 0),He=(0,i.jsx)("svg",Object.assign({width:qe,height:qe,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},{children:(0,i.jsx)("use",{xlinkHref:"#svg-pc-share"},void 0)}),void 0),Ue=(0,i.jsx)("svg",Object.assign({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:qe,height:qe},{children:(0,i.jsx)("use",{xlinkHref:"#svg-heart-fill"},void 0)}),void 0),Je=(0,r.memo)((function(e){var o;const t=(0,J.Q)(),{itemId:a,onClickLike:l,onClickShare:d}=e,[s,c]=(0,n.b7)(h.A,{selector:e=>e[a],dependencies:[a]}),u=(0,n.mp)(g.z,{selector:e=>{var o;return e.users[null!==(o=null==s?void 0:s.author)&&void 0!==o?o:""]},dependencies:[null==s?void 0:s.author]}),v=(0,L.X)({action:(0,r.useCallback)((()=>{null==l||l(),c.postLikeVideo({id:a,enter_method:"click"})}),[c,a,l]),modalConfig:{query:{enter_method:"click_like"}}}),m=(0,q.fz)(Ne.p),{expanded:x}=(0,Te.c1)(),[f,b]=(0,r.useState)(!1),[k,y]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),C=(0,r.useRef)(0),{colors:_}=(0,de.u)(),I=(0,r.useCallback)((()=>{k||(b(!f),m.handleClickShare({author_id:null==u?void 0:u.id,group_id:a})),null==d||d()}),[d,m,f,a,u,k]),P=(0,r.useCallback)((()=>{m.handleSharePanelShow({group_id:a,author_id:null==u?void 0:u.id,share_option_type:x}),window.clearTimeout(C.current),b(!0)}),[a,m,null==u?void 0:u.id,x]),S=(0,r.useCallback)((()=>{k||(C.current=window.setTimeout((()=>{b(!1)}),300))}),[k]),O=(0,Me.gR)(a),D=(0,Te.JW)();(0,r.useEffect)((()=>{D()}),[D]);const T=(0,r.useMemo)((()=>({group_id:a,author_id:null==u?void 0:u.id})),[a,null==u?void 0:u.id]),V=(0,r.useMemo)((()=>(0,i.jsx)(ze,{isLiked:null==s?void 0:s.digged,likedIcon:Ge,unlikeIcon:Ue},void 0)),[null==s?void 0:s.digged]),B=(0,r.useCallback)((e=>{y(e)}),[]),Z=(0,r.useCallback)((()=>{j(!0)}),[j]),R=(0,r.useCallback)((()=>{j(!1)}),[j]);if(!s)return(0,M.G)(["item"]);const{stats:E,id:F}=s,N=(0,Ve.fH)({uniqueId:null!==(o=null==u?void 0:u.uniqueId)&&void 0!==o?o:"",secUid:null==u?void 0:u.secUid,videoId:F}),$=(0,Be.c)(`https://www.tiktok.com${N}`,{sender_device:"pc"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(We,{children:[(0,i.jsx)(Ze.t,{style:{color:_.Primary2},styleType:0,text:(0,p.BT)(null==E?void 0:E.diggCount),Icon:V,onClick:v,e2eTag:"like"},void 0),(0,i.jsx)(Ze.t,{style:{color:_.Primary2},styleType:0,text:(0,p.BT)(null==E?void 0:E.commentCount),Icon:Ye,onClick:e.onClickComment,e2eTag:"comment"},void 0),(0,i.jsx)(Ze.t,Object.assign({style:{color:_.Primary2},styleType:0,text:(null==E?void 0:E.shareCount)?(0,p.BT)(null==E?void 0:E.shareCount):t("Share"),Icon:He,onMouseEnter:P,onMouseLeave:S,onClick:I,e2eTag:"share"},{children:(0,i.jsx)(Re.G,Object.assign({backgroundColor:_.BGSecondary,placement:"topLeft",active:f,margin:-25,arrowMargin:36,verticalOffset:8,style:{paddingRight:4}},{children:(0,i.jsx)(Le.qf,{children:(0,i.jsx)(Ee.mB,{videoId:F,mode:1,url:$,embedCode:O,enabled:s.shareEnabled,teaParams:T,onOtherModalOpen:B,onSendMessagePanelOpen:Z},void 0)},void 0)}),void 0)}),void 0)]},void 0),w&&(0,i.jsx)(Fe.J,{visible:w,videoId:F,onClose:R},void 0)]},void 0)}));var Ke=t(51347);const Qe="opacity .3s",Xe=(0,F.Z)("canvas",{target:"e1bh0wg70"})((({horizontal:e})=>({display:"block",visibility:"hidden",[e?"width":"height"]:"100%"})),(0,N.f1)({max:479,style:{width:"100%",height:"auto"}}),"label:CanvasVideoCardPlaceholder;"),eo=(0,F.Z)("div",{target:"e1bh0wg71"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute"})),"label:DivMask;"),oo=(0,F.Z)("div",{target:"e1bh0wg72"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),to=(0,F.Z)("div",{target:"e1bh0wg73"})((({theme:e})=>({width:"64px",height:"64px",padding:"18px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),io=(0,F.Z)("div",{target:"e1bh0wg74"})((({theme:e})=>({width:"232px",margin:"16px auto 0",fontSize:"14px",lineHeight:"20px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),no=(0,F.Z)("div",{target:"e1bh0wg75"})((({theme:e})=>({width:"232px",margin:"8px auto 0",fontSize:"12px",lineHeight:"15px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),ro=(0,F.Z)("button",{target:"e1bh0wg76"})((({theme:e})=>({width:"232px",height:"36px",cursor:"pointer",margin:"50px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"8px",fontSize:"14px",lineHeight:"20px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),ao=(0,F.Z)("div",{target:"e1bh0wg77"})({position:"relative",boxSizing:"border-box",background:"#eee center no-repeat",backgroundSize:"cover",cursor:"pointer",borderRadius:"8px",overflow:"hidden"},(({theme:{direction:e}})=>(0,N.YJ)({direction:e,marginEnd:"20px"})),(({horizontal:e})=>{const o=e?"width":"height";return[{[o]:"600px"},(0,N.f1)({max:1919,style:{[o]:"calc(450px + (100vw - 768px) / 1152 * 100)"}},{max:767,style:{[o]:"calc(380px + (100vw - 480px) / 288 * 20)"}},{max:479,style:{width:"calc(100vw - 32px - 60px)",height:"auto"}})]}),"label:DivVideoCardContainer;");ao.defaultProps=Object.assign(Object.assign({},ao.defaultProps),{"data-e2e":"feed-video"});const lo=(0,F.Z)("div",{target:"e1bh0wg78"})((({theme:{direction:e}})=>(0,N.YJ)({direction:e,start:"12px"})),{position:"absolute",bottom:"12px",padding:"10px",width:"40px",height:"40px",transition:Qe,opacity:0},"label:DivPlayIconContainer;");lo.defaultProps=Object.assign(Object.assign({},lo.defaultProps),{"data-e2e":"video-play"});const so=(0,F.Z)(lo,{target:"e1bh0wg79"})({bottom:"26px"},"label:StyledDivPlayIconContainer;"),co=(0,F.Z)(lo,{target:"e1bh0wg710"})((({mute:e,theme:{direction:o}})=>[{padding:"8px",opacity:e?1:0},(0,N.YJ)({direction:o,start:"unset",end:"12px"})]),"label:StyledMuteIconContainer;");co.defaultProps=Object.assign(Object.assign({},co.defaultProps),{"data-e2e":"video-sound"});const uo=(0,F.Z)("div",{target:"e1bh0wg711"})((({mute:e})=>[{padding:"8px",opacity:e?1:0,width:"40px",height:"40px",transition:Qe}]),"label:DivMuteIconContainer;"),vo=(0,F.Z)("div",{target:"e1bh0wg712"})({position:"absolute",bottom:"26px"},(({theme:{direction:e}})=>(0,N.YJ)({direction:e,start:"unset",end:"12px"})),"label:DivVoiceControlContainer;"),po=(0,F.Z)("p",{target:"e1bh0wg713"})((({theme:e,hasWarn:o})=>[(0,N.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,N.YJ)({direction:e.direction,end:"16px"}),{position:"absolute",top:o?"72px":"24px",transition:Qe,opacity:0}]),"label:PReportText;");po.defaultProps=Object.assign(Object.assign({},po.defaultProps),{"data-e2e":"video-report"});const ho=(0,F.Z)("svg",{target:"e1bh0wg714"})((({theme:{direction:e}})=>(0,N.YJ)({direction:e,marginEnd:"4px"})),{verticalAlign:"middle"},"label:SvgIconFlag;");ho.defaultProps={fill:"currentColor",width:"1em",height:"1em"};const go=(0,F.Z)("div",{target:"e1bh0wg715"})({position:"absolute",left:0,top:0,width:"100%",height:"100%",":hover":{[`${lo}, ${so}, ${co}, ${uo}, ${po}, ${ke}`]:{opacity:1}}},"label:DivVideoPlayerContainer;"),mo=(0,F.Z)("div",{target:"e1bh0wg716"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivVideoWrapper;"),xo=(0,F.Z)("div",{target:"e1bh0wg717"})({position:"absolute",top:0,left:0,right:0},"label:DivWarnInfoPosition;"),fo={width:20,height:20,fill:"#fff"},bo={width:24,height:24,fill:"#fff"},ko=(0,r.memo)((function({index:e,item:o,teaParams:t}){var a;const d=(0,J.Q)(),{id:u="",video:v,itemMute:g=!1,warnInfo:m,desc:x="",authorId:f="",downloadSetting:k=0,authorPrivate:y=!1}=(0,p.m7)(o),{width:w=1,height:j=1,playAddr:C="",cover:_="",zoomCover:I,duration:P,bitrateInfo:S,volumeInfo:O}=(0,p.m7)(v),D=(0,r.useMemo)((()=>w/j||1),[w,j]),T=D>1,M=(0,n.mp)(K.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),V=(0,n.qj)(K.bg),B=(0,n.qj)(Q.r),Z=(0,n.qj)(h.A),[R,E]=(0,n.b7)(l.f,{selector:e=>{var o;return Number(null===(o=e.currentVideo)||void 0===o?void 0:o.index)},dependencies:[]}),F=R===e,{user:N}=null!==(a=(0,X.L)((()=>["user"]),[]))&&void 0!==a?a:{},$=Boolean(N),{mute:z,setMute:A}=(0,c.s_)(0),[W,de]=(0,r.useState)(!0),se=(0,r.useRef)(!0),ce=(0,r.useRef)(null),ue=(0,r.useRef)(!1),ve=(0,r.useCallback)((o=>{var t,i,n,r,a,l;o.preventDefault(),o.stopPropagation(),W?(E.updateVideo({currentVideo:{id:u,index:e,mode:0},playProgress:null!==(i=null===(t=ce.current)||void 0===t?void 0:t.currentTime)&&void 0!==i?i:0}),null===(r=null===(n=ce.current)||void 0===n?void 0:n.play)||void 0===r||r.call(n)):null===(l=null===(a=ce.current)||void 0===a?void 0:a.pause)||void 0===l||l.call(a)}),[u,e,W,E]),pe=(0,n.qj)(ee.M),ge=(0,r.useCallback)((e=>{var o,t,i;const n=null===(o=ce.current)||void 0===o?void 0:o.duration;pe.setVideoInfo({videoId:u,videoPercent:e,currentTime:null!==(i=null===(t=ce.current)||void 0===t?void 0:t.currentTime)&&void 0!==i?i:0,duration:n})}),[u,pe]),me=(0,r.useCallback)((e=>{var o,t;null===(t=null===(o=ce.current)||void 0===o?void 0:o.seek)||void 0===t||t.call(o,e)}),[]),[xe,fe]=(0,r.useState)(!1),[be,ke]=(0,r.useState)(!1),ye=(0,r.useCallback)((()=>{fe(!0)}),[]),De=(0,r.useCallback)((()=>{fe(!1)}),[]),Te=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),A(!z)}),[z,A]),Me=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),o&&V.removeBlockVideo(o.id)}),[V,o]),Ve=(0,r.useCallback)((()=>{ue.current=!0,setTimeout((()=>{ue.current=!1}),500)}),[]),Be=(0,r.useCallback)((()=>{de(!0),se.current=!0}),[]),Ze=(0,r.useCallback)((()=>{de(!1),se.current=!1}),[]),{showBrowserMode:Re}=(0,r.useContext)(s._),Le=(0,r.useCallback)(((e,o)=>{var i,n;_e.Z.handleSeekBarClick(Object.assign({fromPercent:e,toPercent:o,video_length:null!==(n=null===(i=ce.current)||void 0===i?void 0:i.duration)&&void 0!==n?n:0,is_pause:se.current,play_mode:"one_column"},t))}),[t]),Ee=(0,r.useCallback)((()=>{var e,o;_e.Z.handleSeekBarAutoShow(Object.assign({video_length:null!==(o=null===(e=ce.current)||void 0===e?void 0:e.duration)&&void 0!==o?o:0,is_pause:se.current,play_mode:"one_column",show_method:"preview"},t))}),[t]),Fe=(0,q.fz)(Ie.KF),Ne=(0,r.useCallback)((()=>{var o,i,n;ue.current&&(Re({index:e,playProgress:null!==(i=null===(o=ce.current)||void 0===o?void 0:o.currentTime)&&void 0!==i?i:0}),Pe.r.handleEnterBrowser(Object.assign(Object.assign({},t),{from_mode:0})),null!==(n=oe.Bv.getItem("muted"))&&void 0!==n||A(!1),Fe.handleUserChangeVideoOrPlayMode(),Fe.reportVideoInteractStart({startTime:Date.now(),situation:"open_browser_mode"}),ue.current=!1)}),[e,A,Re,t,Fe]),$e=(0,r.useCallback)((()=>{ue.current=!0,Se.y.handleCommentClick({group_id:u,author_id:f}),$?Ne():B.openModal({query:{enter_method:"click_comment"}})}),[Ne,$,B,f,u]),ze=(0,L.X)({action:(0,r.useCallback)((e=>{if(!ue.current)return;const{clientX:o,clientY:t}=e;new te.B(o,t).emit(),Z.postLikeVideo({id:u,forceLike:!0}),ue.current=!1}),[u,Z]),modalConfig:{query:{enter_method:"click_like"}}}),Ae=(0,ie.D)((()=>({onClick:Ne,onDoubleClick:ze})),[Ne,ze]),We=(0,r.useMemo)((()=>W?(0,i.jsx)("svg",Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},fo,{children:(0,i.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0):(0,i.jsx)(G.Z,Object.assign({},fo),void 0)),[W]),qe=(0,r.useMemo)((()=>z?(0,i.jsx)(Y.Z,Object.assign({},bo),void 0):(0,i.jsx)(H.Z,Object.assign({},bo),void 0)),[z]),Ge=(0,ne.Q)({onShow:b.NS,item:o});(0,r.useEffect)((()=>{var e,t;o&&M.includes(o.id)&&(null===(t=null===(e=ce.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e))}),[M,o]);const Ye=(0,r.useRef)(-1),He=(0,r.useRef)(0),{showVideoMask:Ue,videoMaskTitle:Qe,videoMaskDesc:lo,icon:co,videoMaskFirstButtonText:ko,videoMaskSecondButtonText:yo,maskType:wo}=(0,re.g)({playMode:0,item:null!=o?o:{},isLogin:$}),[{hideMaskTempVideoId:jo},Co]=(0,n.b7)(ae.P),_o=Ue&&jo!==u,Io=(0,r.useCallback)((()=>{clearTimeout(Ye.current),He.current=0}),[]);(0,r.useEffect)((()=>{F?(jo&&jo!==u&&Co.setHideMaskTempVideoId(""),_o&&("photo_sensitive_denied"===wo?Oe.W.handleShowPhotosensitiveRemoved({group_id:u}):Oe.W.handleShowMaskLayer({scenario:"general_sensitive"===wo?"general":"photosensitive",group_id:u}),Ye.current=window.setInterval((()=>{var e,o,t;He.current++>100&&Io(),(null===(e=ce.current)||void 0===e?void 0:e.currentCanPlay)&&(null===(t=null===(o=ce.current)||void 0===o?void 0:o.pause)||void 0===t||t.call(o),Io())}),50))):Io()}),[Ue,o,F,Io,jo,u,Co,_o,E,e,wo]);const Po=(0,r.useCallback)(((o,t)=>{var i,n,r,a;(0,b.NS)(o),Io(),Co.setHideMaskTempVideoId(u),E.updateVideo({currentVideo:{id:u,index:e,mode:0},playProgress:null!==(n=null===(i=ce.current)||void 0===i?void 0:i.currentTime)&&void 0!==n?n:0}),null===(a=null===(r=ce.current)||void 0===r?void 0:r.play)||void 0===a||a.call(r),Oe.W.handleMaskLayerClickWatch({scenario:t,group_id:u})}),[Io,Co,u,E,e]),So=(0,r.useCallback)((e=>{Po(e,"photosensitive"),Co.setSkipPhotoSensitive(!1)}),[Po,Co]),Oo=(0,r.useCallback)((e=>{Po(e,"general")}),[Po]);return(0,i.jsxs)(mo,{children:[(0,i.jsxs)(ao,Object.assign({horizontal:T,onClick:Ae,onMouseDown:Ve},{children:[(0,i.jsx)(Xe,{width:100*D,height:100,horizontal:T},void 0),(0,i.jsxs)(go,{children:[(0,i.jsx)(le.S,{desc:x,poster:(null==I?void 0:I[720])||_,horizontal:T,mode:0,ref:ce,id:u,playUrl:C,index:e,itemMute:g,duration:P,bitrateInfo:S,teaParams:t,onVideoPause:Be,onVideoPlay:Ze,onTimeUpdate:ge,disableDownload:y||0!==k,volumeInfo:O},void 0),(0,i.jsx)(so,Object.assign({onClick:ve,onMouseDown:b.UW},{children:We}),void 0),(0,i.jsxs)(vo,Object.assign({onMouseEnter:ye,onMouseLeave:De,onMouseDown:b.UW},{children:[xe||be?(0,i.jsx)(Ke.y,{setVolumeDragging:ke},void 0):null,(0,i.jsx)(uo,Object.assign({"data-e2e":"video-sound",mute:z,onClick:Te},{children:qe}),void 0)]}),void 0),(0,i.jsx)(we,{videoId:u,isActive:F,seek:me,videoRef:ce,hideShortSeekBar:!0,progressReportCallback:Le,progressPreviewReportCallback:Ee},void 0),(0,i.jsx)(he,{onMouseDown:b.UW},void 0),(0,i.jsxs)(po,Object.assign({hasWarn:Boolean(null==m?void 0:m[0]),onClick:Ge},{children:[(0,i.jsx)(ho,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:14},{children:(0,i.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),d("Report")]}),void 0),(null==m?void 0:m[0])&&(0,i.jsx)(xo,{children:(0,i.jsx)(je.p,{info:null==m?void 0:m[0]},void 0)},void 0),M.includes((null==o?void 0:o.id)||"")?(0,i.jsx)(eo,{children:(0,i.jsxs)(oo,{children:[(0,i.jsx)(to,{children:(0,i.jsx)(U.Z,{width:28,height:28},void 0)},void 0),(0,i.jsx)(io,{children:d("Web_report_thanks_for_report")},void 0),(0,i.jsx)(no,{children:d("Web_report_hide_video")},void 0),(0,i.jsx)(ro,Object.assign({onClick:Me},{children:d("Web_report_show_video")}),void 0)]},void 0)},void 0):null,_o&&(0,i.jsx)(Ce.a,{canClickPropagation:!0,playMode:0,horizontal:T,icon:co,title:Qe,desc:lo,firstButtonText:ko,secondButtonText:yo,onClickFirstButton:So,onClickSecondButton:Oo},void 0)]},void 0)]}),void 0),(0,i.jsx)(Je,{itemId:u,onClickComment:$e},void 0)]},void 0)})),yo=(0,r.memo)((0,r.forwardRef)((function({id:e,index:o,hideFollowButton:t=!1,hideCreateTime:a=!1,renderInner:d},s){const c=(0,p.m7)((0,n.mp)(h.A,{selector:o=>o[e],dependencies:[e]})),{forFriend:u,secret:v,createTime:_,author:I,id:P}=(0,p.m7)(c),S=(0,n.mp)(g.z,{selector:e=>{if(I)return e.users[I]},dependencies:[c]}),O=(0,n.mp)(m.G,{dependencies:[],selector:e=>{var o;return null===(o=e.appContext)||void 0===o?void 0:o.user}}),D=(0,n.mp)(l.f,{selector:t=>{var i;return 0===(null===(i=t.currentVideo)||void 0===i?void 0:i.mode)&&t.currentVideo.id===e&&t.currentVideo.index===o},dependencies:[e,o]}),T=(null==O?void 0:O.uniqueId)===I,{showing:M,handleCardEnter:V,handleCardLeave:B,handleItemEnter:R,handleItemLeave:L}=(0,x.V)(),E=(0,f.zW)(S),{isShowLive:F}=E;(0,f.TB)({isShowLive:F,reportTrigger:F&&D,user:S,enterMethod:"video_head",autoReport:!0,reportValidator:()=>Boolean(O&&(null==S?void 0:S.roomId)&&O.uid!==S.id)});const N=(0,f.CN)({user:S,enterMethod:F?"video_head":"click_main_btn"}),$=(0,r.useRef)(null);(0,r.useImperativeHandle)(s,(()=>({get ratio(){return $.current?(0,b.Di)($.current,70):0},get offsetTop(){var e,o;return null!==(o=null===(e=$.current)||void 0===e?void 0:e.offsetTop)&&void 0!==o?o:0}})),[]);const z=(0,r.useMemo)((()=>(0,W.zt)(F)),[F]),q=(0,r.useMemo)((()=>({anchor:{onMouseEnter:R,onMouseLeave:L,uniqueId:null!=I?I:"",secUid:null==S?void 0:S.secUid},avatar:Object.assign({needAnimation:!0,liveTheme:1},E)})),[null==S?void 0:S.secUid,I,E,R,L]),G=(0,r.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:o="",format:t="",videoQuality:i="",encodeUserTag:n="",codecType:r="",definition:a=""}={},authorId:l="",scheduleTime:d,secret:s=!1,forFriend:u=!1}=null!=c?c:{};return{group_id:P,author_id:l,is_scheduled:Boolean(d),bitrate:Number(e),encodedType:o,format:t,videoQuality:i,encodeUserTag:n,codecType:r,definition:a,secret:s,forFriend:u}}),[c,P]),Y=(0,r.useMemo)((()=>({group_id:P})),[P]),H=(0,r.useMemo)((()=>{var e;return Object.assign({group_id:P,author_id:null!==(e=null==c?void 0:c.authorId)&&void 0!==e?e:""},N)}),[P,N,null==c?void 0:c.authorId]);return(0,i.jsxs)(W.k7,Object.assign({ref:$},{children:[(0,i.jsx)(z,Object.assign({},q.anchor,{teaParams:H,"data-e2e":"video-author-avatar"},{children:(0,i.jsx)(k.k,Object.assign({size:56},q.avatar),void 0)}),void 0),(0,i.jsxs)(W.EN,{children:[(0,i.jsxs)(W.Yx,{children:[(0,i.jsxs)(W.xg,{children:[(0,i.jsx)(z,Object.assign({},q.anchor,{teaParams:H},{children:(0,i.jsx)(k.k,Object.assign({size:40},q.avatar),void 0)}),void 0),I&&S&&(0,i.jsx)(Z,{onMouseEnter:R,onMouseLeave:L,uniqueId:I,teaParams:H,friend:u,secret:v,createTime:Number(null!=_?_:0),hideCreateTime:a},void 0)]},void 0),!t&&!T&&I&&S&&(0,i.jsx)(A,{uniqueId:I,teaParams:Y,e2eTag:"feed-follow"},void 0),(0,i.jsx)(y.Q,{item:c,ellipsisOnNarrow:!0,e2eTag:"video-desc"},void 0),(0,i.jsx)(w.C,{item:c},void 0),(0,i.jsx)(j._,{item:c,styleType:0,e2eTag:"video-music"},void 0)]},void 0),(0,i.jsx)(ko,{item:c,index:o,teaParams:G},void 0),"function"==typeof d&&d()]},void 0),M&&(0,i.jsx)(C.C,{fixedLeft:-8,top:40,uniqueId:null!=I?I:"",onMouseEnter:V,onMouseLeave:B,groupId:P},void 0)]}),void 0)})));var wo=t(93328),jo=t(27512),Co=t(84047),_o=t(88671);const Io=(e,o=0,t=0)=>{const i=isNaN(o)?0:o,n=isNaN(t)?0:t,r=Math.min(i,n),a=Math.max(i,n),l=Math.max(a-r-1,0),d=[];for(let o=r+1;o<a;o++)d.push(e[o]);return{skippedGroupIds:d.join(","),skippedGroupNum:l}},Po=(0,r.memo)((0,a.J)()((function({itemList:e,loading:o,frozen:t,hideFollowButton:a=!1,hideCreateTime:p=!1,renderInnerIndex:g=0,renderInner:m,onHitBottom:x,onPageBottom:f}){const[{currPlayingIndex:k,prevPlayingIndex:y},w]=(0,n.b7)(l.f,{selector:e=>{var o,t;return{currPlayingIndex:Number(null===(o=e.currentVideo)||void 0===o?void 0:o.index),prevPlayingIndex:Number(null===(t=e.prevVideo)||void 0===t?void 0:t.index)}},dependencies:[]}),j=(0,r.useCallback)((()=>{t||null==x||x()}),[t,x]),C=(0,r.useCallback)((()=>{t||null==f||f()}),[t,f]),_=(0,u.s)({onHitBottom:j,onPageBottom:C}),I=(0,r.useCallback)((o=>{w.updateVideo({currentVideo:{id:e[o],index:o,mode:0},playProgress:0})}),[e,w]),P=(0,r.useRef)([]),S=(0,r.useCallback)((e=>o=>{P.current||(P.current=[]),P.current[e]=o}),[]),{itemListKey:O,currentIndex:D}=(0,n.mp)(d.O),{isBrowserModeShowing:T}=(0,r.useContext)(s._),{handleKeydown:M,handleScroll:V}=(({itemList:e,isBrowserModeShowing:o,oneColItemRef:t,prevPlayingIndex:i,currPlayingIndex:a,playVideoOfIndex:l})=>{const{enhanceVideoConsumptionVersion:d}=(0,wo.m)(),s="v3"===d,{mute:u,setMute:v}=(0,c.s_)(0),p=(0,n.qj)(h.A),{isModalShow:g}=(0,n.mp)(jo.D),m=(0,q.fz)(Ie.KF),{skippedGroupIds:x,skippedGroupNum:f}=Io(e,i,a),{isOpen:k}=(0,n.mp)(Q.r),{inputFocus:y}=(0,n.mp)(Co.B,{dependencies:[],selector:e=>({inputFocus:e.inputFocus})}),w=(0,L.X)({action:(0,r.useCallback)((e=>{p.postLikeVideo({id:e,enter_method:"keydown"})}),[p]),modalConfig:{query:{enter_method:"click_like"}}}),j=(0,r.useCallback)(((e,o)=>{let t;isNaN(e)||(t=e<o?"one_column_scroll_next":"one_column_scroll_prev",m.reportVideoInteractStart({startTime:Date.now(),situation:t,prevVideoIndex:e,currVideoIndex:o}))}),[m]),C=(0,n.mp)(h.A),_=(0,r.useCallback)((i=>{var n,r,l,d,c,p;if(y||o||k||g)return;if(!t.current[a+1]&&(32===i.keyCode||40===i.keyCode))return;const h=["input","textarea"].includes(i.target.tagName.toLocaleLowerCase());if(32===i.keyCode&&!h||s&&40===i.keyCode){const o=e[a+1];i.preventDefault(),(0,b.YZ)((null!==(r=null===(n=t.current[a+1])||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:60)-60),Pe.r.handleVideoChange({enter_method:"keydown",play_mode:"one_column",group_id:o,author_id:null===(l=C[o])||void 0===l?void 0:l.authorId,skipped_group_num:f,skipped_group_ids:x},"next"),m.handleUserChangeVideoOrPlayMode()}else if(38===i.keyCode&&s&&a>0){const o=e[a-1];i.preventDefault(),(0,b.YZ)((null!==(c=null===(d=t.current[a-1])||void 0===d?void 0:d.offsetTop)&&void 0!==c?c:60)-60),Pe.r.handleVideoChange({enter_method:"keydown",play_mode:"one_column",group_id:o,author_id:null===(p=C[o])||void 0===p?void 0:p.authorId,skipped_group_num:f,skipped_group_ids:x},"prev"),m.handleUserChangeVideoOrPlayMode()}else 77===i.keyCode&&!h&&s?(i.preventDefault(),v(!u,"keydown")):76===i.keyCode&&!h&&s&&w(e[a])}),[y,o,k,g,t,a,s,e,C,f,x,v,u,w,m]),I=(0,_o.Nr)((i=>{var n;for(let r=0;r<t.current.length;r++){const d=t.current[r];if(Number(null==d?void 0:d.ratio)>.5){if(!o&&(a!==r||i)){l(r);const o=a<r;if("start"===(0,b.uf)())return;o||"done"!==(0,b.uf)()||(0,b.KZ)();const{skippedGroupIds:t,skippedGroupNum:d}=Io(e,a,r),s=e[r],c=a<r?"next":"prev";Pe.r.handleVideoChange({enter_method:"scroll",play_mode:"one_column",group_id:s,author_id:null===(n=C[s])||void 0===n?void 0:n.authorId,skipped_group_num:d,skipped_group_ids:t},c),i||m.handleUserChangeVideoOrPlayMode(),j(a,r)}return}}}),[t,o,a,l,e,C,j,m],200);return{handleKeydown:_,handleScroll:I}})({oneColItemRef:P,itemList:e,isBrowserModeShowing:T,prevPlayingIndex:y,currPlayingIndex:k,playVideoOfIndex:I});return(0,c.$v)(0),(0,r.useEffect)((()=>{V(!0)}),[]),(0,r.useEffect)((()=>(window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)})),[M]),(0,r.useEffect)((()=>{const e=()=>{V(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[V]),(0,r.useEffect)((()=>{if(T&&0!==D){const e=setTimeout((()=>{var e,o,t;window.scrollTo(0,(null!==(t=null===(o=null===(e=P.current)||void 0===e?void 0:e[D])||void 0===o?void 0:o.offsetTop)&&void 0!==t?t:60)-60)}),0);return()=>clearTimeout(e)}}),[D,T,O]),(0,i.jsxs)("div",Object.assign({ref:_},{children:[e.map(((e,o)=>(0,i.jsx)(yo,{id:e,index:o,hideCreateTime:p,hideFollowButton:a,renderInner:o===g?m:void 0,ref:S(o)},`${e}_${o}`))),o&&(0,i.jsx)(v.g,{center:!0},void 0)]}),void 0)})))}}]);
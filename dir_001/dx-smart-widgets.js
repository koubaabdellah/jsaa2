!function(){var e=[];e.large=[],e.large.cardsperrow=8,e.large.maxcards=8,e[1]=[],e[1].width=1400,e[1].cardsperrow=7,e[1].maxcards=7,e[2]=[],e[2].width=1200,e[2].cardsperrow=6,e[2].maxcards=6,e[3]=[],e[3].width=1e3,e[3].cardsperrow=5,e[3].maxcards=5,e[4]=[],e[4].width=800,e[4].cardsperrow=4,e[4].maxcards=4,e[5]=[],e[5].width=600,e[5].cardsperrow=3,e[5].maxcards=3,e[6]=[],e[6].width=500,e[6].cardsperrow=2,e[6].maxcards=2;var t=document.currentScript||function(){var e=[],t=document.getElementsByTagName("script");for(var r in t){var n=t[r].src;n&&n.indexOf(scriptName)>0&&e.push(t[r])}return e[e.length-1]}();function r(e,t){e.className+=" "+t}function n(){document.querySelectorAll("[class^=dx-widget-card-deck_]").forEach((function(t){for(var r=t.getBoundingClientRect().width,n="large",a=1;a<e.length;++a)r<e[a].width&&(n=a);r<"499"?(t.setAttribute("cardsperrow","1"),t.setAttribute("maxcards","100")):(t.setAttribute("cardsperrow",e[n].cardsperrow),t.setAttribute("maxcards",e[n].maxcards))}))}function a(){document.querySelectorAll("[class^=dx-smart-widget-container_]").forEach((function(e){const t=e.getBoundingClientRect().width;var n,a;if(n=e,a=new RegExp("\\b"+"width-style-"+"(.*)?\\b","g"),n.className=n.className.replace(a,""),t<=500)r(e,"width-style-mobile");else{const n=document.querySelectorAll("[class^=dx-smart-widget-grid-item]");if(n.length){var d=t/(n[0].getBoundingClientRect().width+34);r(e,"width-style-"+(d=Math.min(8,Math.floor(d))))}}}))}function d(e,t,r,n,a,o,s){if(e.childNodes.length&&"A"!=e.tagName&&"a"!=e.tagName)return Array.prototype.forEach.call(e.childNodes,(e=>d(e,t,r,n,a,o,s)));e.nodeType==Node.TEXT_NODE&&e.nodeValue&&t.call(document,e,e.parentNode,r,n,a,o,s)}var o=[];function s(e,t,r,n,a,d,s){var c=new RegExp(r,"i");if(c.exec(e.nodeValue)){var i=this.createElement("span"),l=!1,u=e.nodeValue;if(!o.includes(r))u.match(c).length>0&&(l=!0,d=d.replace("[[keyword]]",r),i.innerHTML=u.replace(c,'<a class="dx-widget-keyword" href="'+s+'" style="'+a+'" title="Discover more about '+r+'" data-kwid="'+n+'" target="_blank">$&<span class="dx-widget-keyword-tooltip-content">'+d+"</span></a>"),o.push(r));l||(i.innerHTML=u),t.replaceChild(i,e)}}var c=function(e,t,r){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r)},i=t.dataset.id,l=t.dataset.mode,u=t.dataset.country;switch(l){case"dev":strURL="http://dx-network.local/api/getwidgets";break;case"test":strURL="https://uat.demand.network/api/getwidgets";break;default:strURL="https://widgets.demandexchange.com/api/getwidgets"}var m=window.location.href,g=strURL+"?id="+i+"&url="+m;null!=u&&""!=u&&(g+="&country="+u),fetch(g).then((e=>e.json())).then((e=>{var r,o=1,i=0;if((r=e.reduce(((e,t)=>"3"===t.type?++e:e),0))>1&&(o=Math.floor(Math.random()*r)+1),e.forEach((function(e){var t=null;switch(e.type){case"1":if(1==e.target_is_class){t=document.getElementsByClassName(e.target)[0]}else t=document.getElementById(e.target);null!=t&&(void 0!==e.css&&null!==e.css&&""!=e.css&&document.head.insertAdjacentHTML("beforeend","<style>"+e.css+"</style>"),1==e.target_div_parent?t.parentElement.innerHTML+=e.html:t.innerHTML+=e.html);break;case"2":var r="";"true"==e.bold?r+=" font-weight: bold; ":r+=" font-weight: normal; ",e.color&&(r+=" color: "+e.color+"; "),"true"==e.italic?r+=" font-style: italic; ":r+=" font-style: normal; ","true"==e.underline?r+=" text-decoration: underline; ":r+=" text-decoration: none; ";var n=e.tooltip;if(void 0!==e.keywords){void 0!==e.css&&null!==e.css&&""!=e.css&&document.head.insertAdjacentHTML("beforeend","<style>"+e.css+"</style>");var a=Object.keys(e.keywords).map((function(t){return[Number(t),e.keywords[t]]}));a.sort(((e,t)=>t[1].keyword.length>e[1].keyword.length?1:-1));for(var l=0;l<a.length;l++){for(var u=document.getElementsByTagName("p"),m=0;m<u.length;m++)-1!=u[m].innerHTML.indexOf(a[l][1].keyword)&&d(u[m],s,a[l][1].keyword,a[l][1].id,r,n,a[l][1].link);for(u=document.getElementsByTagName("li"),m=0;m<u.length;m++)-1!=u[m].innerHTML.indexOf(a[l][1].keyword)&&d(u[m],s,a[l][1].keyword,a[l][1].id,r,n,a[l][1].link)}}break;case"3":if(++i==o&&""!=e.html){if(void 0!==e.css&&null!==e.css&&""!=e.css&&document.head.insertAdjacentHTML("beforeend","<style>"+e.css+"</style>"),document.body.contains(document.getElementById("dx-widget-top-bar-wrapper")))g=document.getElementById("dx-widget-top-bar-wrapper");else{var g=document.createElement("div");g.setAttribute("id","dx-widget-top-bar-wrapper"),document.body.insertBefore(g,document.body.firstChild)}e.bg_colour&&g.setAttribute("style","background-color:"+e.bg_colour+";"),g.innerHTML+=e.html}break;case"4":if(""!=e.html){if(void 0!==e.css&&null!==e.css&&""!=e.css&&document.head.insertAdjacentHTML("beforeend","<style>"+e.css+"</style>"),!document.body.contains(document.getElementById("dx-widget-bottom-bar-wrapper"))){var h=document.createElement("div");h.setAttribute("id","dx-widget-bottom-bar-wrapper"),e.bg_colour&&h.setAttribute("style","background-color:"+e.bg_colour+";"),document.body.insertBefore(h,document.body.firstChild),h.innerHTML+=e.html}var w=document.getElementsByClassName("dx-widget-close");Array.from(w).forEach((function(e){c(e,"click",(function(e){document.getElementById("dx-widget-bottom-bar-wrapper").style.display="none"}))}))}break;case"5":if(1==e.target_is_class){t=document.getElementsByClassName(e.target)[0]}else t=document.getElementById(e.target);null!=t&&(void 0!==e.css&&null!==e.css&&""!=e.css&&document.head.insertAdjacentHTML("beforeend","<style>"+e.css+"</style>"),1==e.target_div_parent?t.parentElement.innerHTML+=e.html:t.innerHTML+=e.html)}})),a(),n(),"true"==t.dataset.debug){const t=document.createElement("div");t.innerText=JSON.stringify(e,void 0,4),t.style.top="800px",t.style.position="relative",document.body.appendChild(t)}c(window,"resize",(function(e){a(),n()}))}))}();
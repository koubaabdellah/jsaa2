(()=>{var e={21575:function(e){e.exports=function(e,t){"use strict";function n(e){return n.$.channel(e),n.$}return n.$={version:"0.2",channelName:"",channels:[],broadcast:function(){var e,n,r,o,i=this.channels[this.channelName],c=i.length;for(e=0;e<c;e++)"object"==typeof(n=i[e])&&n.length&&(r=n[0],o=n[1]||t),r.apply(o,arguments);return this},channel:function(e){var t=this.channels;return t[e]||(t[e]=[]),this.channelName=e,this},subscribe:function(){var e,t,n=arguments,r=this.channels[this.channelName],o=n.length,i=[];for(e=0;e<o;e++)"object"==typeof(t="function"==typeof(i=n[e])?[i]:i)&&t.length&&r.push(t);return this},unsubscribe:function(){var e,t,n,r=arguments,o=this.channels[this.channelName],i=r.length,c=o.length,a=0;for(e=0;e<i;e++)for(a=0,c=o.length,t=0;t<c;t++)o[n=t-a][0]===r[e]&&(o.splice(n,1),a++);return this}},n}(0,this)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){var t=document.cookie.split(";").find((function(t){return t.trim().startsWith("".concat(e,"="))}));return!!t&&t.split("=")[1]}function r(e){document.cookie="".concat(e,"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;")}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c="walletConnected",a="wallet_sub",l="wallet_connect_progress",u=function(){var e=JSON.parse(localStorage.getItem(c)),t={currentProvider:"",isConnected:!1};if(e){var n=e.currentProvider,r=void 0===n?"":n,o=e.isConnected,a=void 0!==o&&o;t=i(i({},t),{},{currentProvider:r,isConnected:a})}return t},s="hidden",d="visible",f=function(e,t){var n="connected";t?(e.classList.add(n),e.classList.add(d)):e.classList.remove(n)};const p=function(e,t){var n,r,o=document.querySelector(".component.connect-crypto-wallet");o&&(e?(function(e,t){var n=e.querySelector(".dropdown-content__crypto-wallet-disconnect");"metamask"!==t&&n.classList.remove(s)}(o,t),f(o,e)):(f(o),n=o,r=window.location.pathname,["/connect-crypto-wallet/","/collection/timepieces-nft/"].includes(r)?n.classList.add(d):n.classList.add(s)))};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const v=["localhost","local-dev.time.com","dev.time.com","qa.time.com"].includes(window.location.hostname);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?w(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}n(21575),Object.freeze({PUBLISH:"publish",FUTURE:"future",DRAFT:"draft",PENDING:"pending",PRIVATE:"private",TRASH:"trash",AUTO_DRAFT:"auto-draft",INHERIT:"inherit"}),document.querySelector("body");const h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.dataLayer&&e&&0!==Object.keys(t).length&&window.dataLayer.push(g({event:e},t))};var O,S=3154e5,j={registrationMeterLimit:3,paywallMeterLimit:4,expiryTime:2419200,meteredRegions:["usCanadaPr","africa","eu","latam","me","asia","sopac"]},P="time_meter_v2",T="roadblock-logged-in",L="roadblock-logged-out",D=document.body,_=D.querySelector("#meter-wall-data"),E=D.querySelector("#page-gtm-values .keyvals"),k=E?E.getAttribute("data-user_region"):null,x=E?parseInt(E.getAttribute("data-content_cms_id"),10):null,I=window.location.pathname.includes("/preview/"),A=function(){return window.timeUser},C=function(){var e=A();return e&&e.loggedIn},U=function(e){O=e,_&&_.setAttribute("data-wall_type",e)},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date((new Date).getTime()+1e3*j.expiryTime).toUTCString();document.cookie="".concat(P,"=1|").concat(e,"|").concat(encodeURIComponent(n),";path=/;max-age=").concat(S,";"),_&&_.setAttribute("data-view_count",1);var r=t?"Meter Reset Post Expiry Date":"Meter Reset Initial";h(r,{time_meter_count:1}),C()?U(T):U(L)},R=function(e){var t=function(e){var t,n,r=(t=e.split("|"),n=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||b(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],c=r[2];return{viewCount:parseInt(o,10),articleList:i.split(",").map((function(e){return parseInt(e,10)})),expiryDateStr:c}}(e),n=t.viewCount,r=t.articleList,o=t.expiryDateStr,i=r.includes(x)?n:n+1,c=r.includes(x)?m(r):[].concat(m(r),[x]),a=new Date,l=new Date(decodeURIComponent(o));_.setAttribute("data-view_count",i),a>l&&q(x,!0),function(e){var t=e.wallType,n=e.viewCount,r=e.trackingSuffix,o=e.articleList,i=e.expiryDateStr;U(t),h("".concat(t," hit"),{time_meter_count:r?"".concat(n).concat(r):n}),document.cookie="".concat(P,"=").concat(n,"|").concat(o,"|").concat(i,";path=/;max-age=").concat(S,";")}(C()&&i>=j.paywallMeterLimit?{wallType:"paywall",viewCount:n,trackingSuffix:"P",articleList:r,expiryDateStr:o}:C()?{wallType:T,viewCount:i,trackingSuffix:"",articleList:c,expiryDateStr:o}:i>=j.registrationMeterLimit?{wallType:"registration-wall",viewCount:n,trackingSuffix:"R",articleList:r,expiryDateStr:o}:{wallType:L,viewCount:i,trackingSuffix:"",articleList:c,expiryDateStr:o})};const M=function(){var e;document.dispatchEvent(new Event("authCompleted")),window.dispatchEvent(new CustomEvent("taas-datalayer-ready")),window.authCompleted=!0,_&&(function(){var e=new URLSearchParams(window.location.search);if(v&&e.has("disable_meter")||I)return!0;if(!k||!j.meteredRegions.includes(k))return!0;var t=A(),n=C()&&t.role&&"free"!==t.role&&"TID"!==t.role,r=C()&&t.walletSubs&&t.walletSubs.role&&"TIMEPieceUser"===t.walletSubs.role;return!!(n||r||_&&"true"===_.getAttribute("data-excluded"))}()?U("none"):"true"!==_.getAttribute("data-hard-registration-wall")||C()?(e=t(P))?R(e):q(x):U("hard-registration-wall")),document.dispatchEvent(new CustomEvent("meterCompleted",{detail:{meterWallType:O}})),window.meterCompleted=!0};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?N(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const F=function(){var e={},n=t("t_b_sub"),r=t("new_user"),o=t("rft"),i=t("TASLogin"),c=t("wallet_sub");return(i||o||n||c)&&(e=J(J(J({token:i,refreshToken:o},r&&{newUser:r}),n&&{bulkSubToken:n}),c&&{walletSubToken:c})),e};const G=function(e){var t;"metamask"===e&&(t=window.ethereum),function(e){e&&e.on("accountsChanged",(function(e){var t=function(e){return 0===e.length?"":e[0]}(e);t?(r("wallet_sub"),r("wallet_connect_progress"),window.location.reload()):function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];localStorage.removeItem(c),r(a),r(l),e&&window.location.reload()}()}))}(t)},H=function(){"undefined"!=typeof localStorage&&null!==localStorage.getItem("lytics_segments")&&function(e,t,n,r){var o,i=" path=".concat("/"),c=new Date;c.setTime(c.getTime()+2592e6);var a=(o=c.toGMTString())?" expires=".concat(o,";"):"";document.cookie="".concat("is_lytics_mnou","=").concat(t,";").concat(a).concat(i)}(0,JSON.parse(localStorage.getItem("lytics_segments")).some((function(e){return"mnou"===e})))};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const W=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((function(r,o){var i=new window.AbortController,c=i.signal,a=setTimeout((function(){var e=new Error("Request aborted or timed out.");e.name="TimeoutError",i.abort(),o(e)}),n);fetch(e,B(B({},t),{},{signal:c})).then((function(e){return clearTimeout(a),e.text().then((function(t){return{success:e.ok,text:t}}))})).then((function(e){var t=e.success,n=e.text;try{var i=JSON.parse(n);return t?r(i):o(i)}catch(e){return r(n)}})).catch((function(e){o(e)}))}))}("/authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};var z=function(e){e.addEventListener("click",(function(){r("TASLogin"),r("rft"),r("new_user"),void 0!==window.dataLayer&&window.dataLayer.push({event:"TIME Login Event",eventCategory:"Registration",eventAction:"logout",eventLabel:""})}))},V=function(e,t){e.forEach((function(e){e&&(e.classList.remove("hidden","visible"),e.classList.add(t))}))},K=document.body.querySelector("header.navigation"),Q=K.querySelectorAll(".signin-button"),X=K.querySelector(".account-dropdown"),Y=K.querySelector(".account-mobile"),Z=K.querySelector(".account-menu"),ee=K.querySelectorAll(".print-sub-digital-link"),te=K.querySelector(".subscribe-link-container"),ne=K.querySelector(".subscribe-flyout"),re=K.querySelectorAll(".signout-button"),oe=K.querySelector(".component.connect-crypto-wallet");const ie=function(e){if(!e)return V([Y].concat(m(Q),[te,ne]),"visible"),e;var t=e.loggedIn,n=e.activeSubscription,r=e.role,o=e.partner,i=e.walletConnected,c=e.walletSubs,a=void 0===c?{role:"",partner:""}:c,l=a.role,u=a.partner,s=r&&(["TIM","DGT","BTH","BTF"].includes(r)||r.includes("time_dig")),d="TIMEPieceUser"===l&&"cryptoWallet"===u,f=void 0!==n,p=d&&!f||i&&!f,y=d&&f&&!1===n||i&&f&&!1===n;return"bulk"===r&&"nicklpass"===o||d?(V([].concat(m(Q),[te,ne,X,Y,Z]),"hidden"),d&&oe&&oe.classList.add("connected","visible"),e):(t&&f&&V([X,Y,Z],"visible"),(t&&f&&!1===n||p||y)&&V([te,ne],"visible"),t||V(m(Q),"visible"),t&&re.forEach(z),t&&s&&V(ee,"visible"),e)},ce=function(e){var t,n=e.loggedIn,r=void 0!==n&&n,o=e.role,i=void 0===o?"anonymous":o,c=e.userId,a=void 0!==c&&c,l=e.walletSubs,u="TIMEPieceUser"===(null==l?void 0:l.role);return window.timeUser=e,t={timeTasUserid:a.toString(),timeUsertype:i,timeUserloginstatus:r.toString(),isTimePiecesUser:u.toString()},window.dataLayer=window.dataLayer||[],window.dataLayer.push(t),e};!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=u(),n=t.currentProvider,r=document.querySelector(".component.connect-crypto-wallet");H();var o=function(){r.classList.toggle("opened")};r&&e&&(r.addEventListener("click",o),r.addEventListener("touch",o));var i=function(e){return W(e).then(ce).then(ie).then(G(n))},c=F();"{}"!==JSON.stringify(c)?i(c).catch((function(){return ie(window.timeUser)})).finally(M):(p(),ie(window.timeUser),M())}()})()})();
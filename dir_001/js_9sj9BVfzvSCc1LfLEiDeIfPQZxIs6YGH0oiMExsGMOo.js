if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;};if(typeof Object.assign!=='function'){Object.defineProperty(Object,'assign',{value:function assign(target,varArgs){'use strict';if(target===null||target===undefined){throw new TypeError('Cannot convert undefined or null to object');}
var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!==null&&nextSource!==undefined){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}
return to;},writable:true,configurable:true});};!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(n="undefined"!=typeof globalThis?globalThis:n||self,function(){var t=n._,e=n._=r();e.noConflict=function(){return n._=t,e}}())}(this,(function(){var n="1.13.3",r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},t=Array.prototype,e=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,o=t.push,i=t.slice,a=e.toString,f=e.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,l="undefined"!=typeof DataView,s=Array.isArray,p=Object.keys,v=Object.create,h=c&&ArrayBuffer.isView,y=isNaN,d=isFinite,g=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],m=Math.pow(2,53)-1;function j(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var o=Array(r+1);for(u=0;u<r;u++)o[u]=arguments[u];return o[r]=e,n.apply(this,o)}}function _(n){var r=typeof n;return"function"===r||"object"===r&&!!n}function w(n){return void 0===n}function A(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)}function x(n){var r="[object "+n+"]";return function(n){return a.call(n)===r}}var S=x("String"),O=x("Number"),M=x("Date"),E=x("RegExp"),B=x("Error"),N=x("Symbol"),I=x("ArrayBuffer"),T=x("Function"),k=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof k&&(T=function(n){return"function"==typeof n||!1});var D=T,R=x("Object"),F=l&&R(new DataView(new ArrayBuffer(8))),V="undefined"!=typeof Map&&R(new Map),P=x("DataView");var q=F?function(n){return null!=n&&D(n.getInt8)&&I(n.buffer)}:P,U=s||x("Array");function W(n,r){return null!=n&&f.call(n,r)}var z=x("Arguments");!function(){z(arguments)||(z=function(n){return W(n,"callee")})}();var L=z;function $(n){return O(n)&&y(n)}function C(n){return function(){return n}}function K(n){return function(r){var t=n(r);return"number"==typeof t&&t>=0&&t<=m}}function J(n){return function(r){return null==r?void 0:r[n]}}var G=J("byteLength"),H=K(G),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var X=c?function(n){return h?h(n)&&!q(n):H(n)&&Q.test(a.call(n))}:C(!1),Y=J("length");function Z(n,r){r=function(n){for(var r={},t=n.length,e=0;e<t;++e)r[n[e]]=!0;return{contains:function(n){return!0===r[n]},push:function(t){return r[t]=!0,n.push(t)}}}(r);var t=b.length,u=n.constructor,o=D(u)&&u.prototype||e,i="constructor";for(W(n,i)&&!r.contains(i)&&r.push(i);t--;)(i=b[t])in n&&n[i]!==o[i]&&!r.contains(i)&&r.push(i)}function nn(n){if(!_(n))return[];if(p)return p(n);var r=[];for(var t in n)W(n,t)&&r.push(t);return g&&Z(n,r),r}function rn(n,r){var t=nn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function tn(n){return n instanceof tn?n:this instanceof tn?void(this._wrapped=n):new tn(n)}function en(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,G(n))}tn.VERSION=n,tn.prototype.value=function(){return this._wrapped},tn.prototype.valueOf=tn.prototype.toJSON=tn.prototype.value,tn.prototype.toString=function(){return String(this._wrapped)};var un="[object DataView]";function on(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var o=typeof n;return("function"===o||"object"===o||"object"==typeof r)&&function n(r,t,e,o){r instanceof tn&&(r=r._wrapped);t instanceof tn&&(t=t._wrapped);var i=a.call(r);if(i!==a.call(t))return!1;if(F&&"[object Object]"==i&&q(r)){if(!q(t))return!1;i=un}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:0==+r?1/+r==1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return u.valueOf.call(r)===u.valueOf.call(t);case"[object ArrayBuffer]":case un:return n(en(r),en(t),e,o)}var f="[object Array]"===i;if(!f&&X(r)){if(G(r)!==G(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;f=!0}if(!f){if("object"!=typeof r||"object"!=typeof t)return!1;var c=r.constructor,l=t.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&"constructor"in r&&"constructor"in t)return!1}o=o||[];var s=(e=e||[]).length;for(;s--;)if(e[s]===r)return o[s]===t;if(e.push(r),o.push(t),f){if((s=r.length)!==t.length)return!1;for(;s--;)if(!on(r[s],t[s],e,o))return!1}else{var p,v=nn(r);if(s=v.length,nn(t).length!==s)return!1;for(;s--;)if(p=v[s],!W(t,p)||!on(r[p],t[p],e,o))return!1}return e.pop(),o.pop(),!0}(n,r,t,e)}function an(n){if(!_(n))return[];var r=[];for(var t in n)r.push(t);return g&&Z(n,r),r}function fn(n){var r=Y(n);return function(t){if(null==t)return!1;var e=an(t);if(Y(e))return!1;for(var u=0;u<r;u++)if(!D(t[n[u]]))return!1;return n!==hn||!D(t[cn])}}var cn="forEach",ln="has",sn=["clear","delete"],pn=["get",ln,"set"],vn=sn.concat(cn,pn),hn=sn.concat(pn),yn=["add"].concat(sn,cn,ln),dn=V?fn(vn):x("Map"),gn=V?fn(hn):x("WeakMap"),bn=V?fn(yn):x("Set"),mn=x("WeakSet");function jn(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function _n(n){for(var r={},t=nn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function wn(n){var r=[];for(var t in n)D(n[t])&&r.push(t);return r.sort()}function An(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var o=arguments[u],i=n(o),a=i.length,f=0;f<a;f++){var c=i[f];r&&void 0!==t[c]||(t[c]=o[c])}return t}}var xn=An(an),Sn=An(nn),On=An(an,!0);function Mn(n){if(!_(n))return{};if(v)return v(n);var r=function(){};r.prototype=n;var t=new r;return r.prototype=null,t}function En(n){return U(n)?n:[n]}function Bn(n){return tn.toPath(n)}function Nn(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}function In(n,r,t){var e=Nn(n,Bn(r));return w(e)?t:e}function Tn(n){return n}function kn(n){return n=Sn({},n),function(r){return rn(r,n)}}function Dn(n){return n=Bn(n),function(r){return Nn(r,n)}}function Rn(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return function(){return n.apply(r,arguments)}}function Fn(n,r,t){return null==n?Tn:D(n)?Rn(n,r,t):_(n)&&!U(n)?kn(n):Dn(n)}function Vn(n,r){return Fn(n,r,1/0)}function Pn(n,r,t){return tn.iteratee!==Vn?tn.iteratee(n,r):Fn(n,r,t)}function qn(){}function Un(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}tn.toPath=En,tn.iteratee=Vn;var Wn=Date.now||function(){return(new Date).getTime()};function zn(n){var r=function(r){return n[r]},t="(?:"+nn(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}}var Ln={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$n=zn(Ln),Cn=zn(_n(Ln)),Kn=tn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Jn=/(.)^/,Gn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Hn=/\\|'|\r|\n|\u2028|\u2029/g;function Qn(n){return"\\"+Gn[n]}var Xn=/^\s*(\w|\$)+\s*$/;var Yn=0;function Zn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=Mn(n.prototype),i=n.apply(o,u);return _(i)?i:o}var nr=j((function(n,r){var t=nr.placeholder,e=function(){for(var u=0,o=r.length,i=Array(o),a=0;a<o;a++)i[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)i.push(arguments[u++]);return Zn(n,e,this,this,i)};return e}));nr.placeholder=tn;var rr=j((function(n,r,t){if(!D(n))throw new TypeError("Bind must be called on a function");var e=j((function(u){return Zn(n,e,r,this,t.concat(u))}));return e})),tr=K(Y);function er(n,r,t,e){if(e=e||[],r||0===r){if(r<=0)return e.concat(n)}else r=1/0;for(var u=e.length,o=0,i=Y(n);o<i;o++){var a=n[o];if(tr(a)&&(U(a)||L(a)))if(r>1)er(a,r-1,t,e),u=e.length;else for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else t||(e[u++]=a)}return e}var ur=j((function(n,r){var t=(r=er(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=rr(n[e],n)}return n}));var or=j((function(n,r,t){return setTimeout((function(){return n.apply(null,t)}),r)})),ir=nr(or,tn,1);function ar(n){return function(){return!n.apply(this,arguments)}}function fr(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var cr=nr(fr,2);function lr(n,r,t){r=Pn(r,t);for(var e,u=nn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function sr(n){return function(r,t,e){t=Pn(t,e);for(var u=Y(r),o=n>0?0:u-1;o>=0&&o<u;o+=n)if(t(r[o],o,r))return o;return-1}}var pr=sr(1),vr=sr(-1);function hr(n,r,t,e){for(var u=(t=Pn(t,e,1))(r),o=0,i=Y(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function yr(n,r,t){return function(e,u,o){var a=0,f=Y(e);if("number"==typeof o)n>0?a=o>=0?o:Math.max(o+f,a):f=o>=0?Math.min(o+1,f):o+f+1;else if(t&&o&&f)return e[o=t(e,u)]===u?o:-1;if(u!=u)return(o=r(i.call(e,a,f),$))>=0?o+a:-1;for(o=n>0?a:f-1;o>=0&&o<f;o+=n)if(e[o]===u)return o;return-1}}var dr=yr(1,pr,hr),gr=yr(-1,vr);function br(n,r,t){var e=(tr(n)?pr:lr)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function mr(n,r,t){var e,u;if(r=Rn(r,t),tr(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var o=nn(n);for(e=0,u=o.length;e<u;e++)r(n[o[e]],o[e],n)}return n}function jr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function _r(n){var r=function(r,t,e,u){var o=!tr(r)&&nn(r),i=(o||r).length,a=n>0?0:i-1;for(u||(e=r[o?o[a]:a],a+=n);a>=0&&a<i;a+=n){var f=o?o[a]:a;e=t(e,r[f],f,r)}return e};return function(n,t,e,u){var o=arguments.length>=3;return r(n,Rn(t,u,4),e,o)}}var wr=_r(1),Ar=_r(-1);function xr(n,r,t){var e=[];return r=Pn(r,t),mr(n,(function(n,t,u){r(n,t,u)&&e.push(n)})),e}function Sr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function Or(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function Mr(n,r,t,e){return tr(n)||(n=jn(n)),("number"!=typeof t||e)&&(t=0),dr(n,r,t)>=0}var Er=j((function(n,r,t){var e,u;return D(r)?u=r:(r=Bn(r),e=r.slice(0,-1),r=r[r.length-1]),jr(n,(function(n){var o=u;if(!o){if(e&&e.length&&(n=Nn(n,e)),null==n)return;o=n[r]}return null==o?o:o.apply(n,t)}))}));function Br(n,r){return jr(n,Dn(r))}function Nr(n,r,t){var e,u,o=-1/0,i=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e>o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))>i||u===-1/0&&o===-1/0)&&(o=n,i=u)}));return o}var Ir=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Tr(n){return n?U(n)?i.call(n):S(n)?n.match(Ir):tr(n)?jr(n,Tn):jn(n):[]}function kr(n,r,t){if(null==r||t)return tr(n)||(n=jn(n)),n[Un(n.length-1)];var e=Tr(n),u=Y(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=Un(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function Dr(n,r){return function(t,e,u){var o=r?[[],[]]:{};return e=Pn(e,u),mr(t,(function(r,u){var i=e(r,u,t);n(o,r,i)})),o}}var Rr=Dr((function(n,r,t){W(n,t)?n[t].push(r):n[t]=[r]})),Fr=Dr((function(n,r,t){n[t]=r})),Vr=Dr((function(n,r,t){W(n,t)?n[t]++:n[t]=1})),Pr=Dr((function(n,r,t){n[t?0:1].push(r)}),!0);function qr(n,r,t){return r in t}var Ur=j((function(n,r){var t={},e=r[0];if(null==n)return t;D(e)?(r.length>1&&(e=Rn(e,r[1])),r=an(n)):(e=qr,r=er(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t})),Wr=j((function(n,r){var t,e=r[0];return D(e)?(e=ar(e),r.length>1&&(t=r[1])):(r=jr(er(r,!1,!1),String),e=function(n,t){return!Mr(r,t)}),Ur(n,e,t)}));function zr(n,r,t){return i.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function Lr(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[0]:zr(n,n.length-r)}function $r(n,r,t){return i.call(n,null==r||t?1:r)}var Cr=j((function(n,r){return r=er(r,!0,!0),xr(n,(function(n){return!Mr(r,n)}))})),Kr=j((function(n,r){return Cr(n,r)}));function Jr(n,r,t,e){A(r)||(e=t,t=r,r=!1),null!=t&&(t=Pn(t,e));for(var u=[],o=[],i=0,a=Y(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?Mr(o,c)||(o.push(c),u.push(f)):Mr(u,f)||u.push(f)}return u}var Gr=j((function(n){return Jr(er(n,!0,!0))}));function Hr(n){for(var r=n&&Nr(n,Y).length||0,t=Array(r),e=0;e<r;e++)t[e]=Br(n,e);return t}var Qr=j(Hr);function Xr(n,r){return n._chain?tn(r).chain():r}function Yr(n){return mr(wn(n),(function(r){var t=tn[r]=n[r];tn.prototype[r]=function(){var n=[this._wrapped];return o.apply(n,arguments),Xr(this,t.apply(tn,n))}})),tn}mr(["pop","push","reverse","shift","sort","splice","unshift"],(function(n){var r=t[n];tn.prototype[n]=function(){var t=this._wrapped;return null!=t&&(r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0]),Xr(this,t)}})),mr(["concat","join","slice"],(function(n){var r=t[n];tn.prototype[n]=function(){var n=this._wrapped;return null!=n&&(n=r.apply(n,arguments)),Xr(this,n)}}));var Zr=Yr({__proto__:null,VERSION:n,restArguments:j,isObject:_,isNull:function(n){return null===n},isUndefined:w,isBoolean:A,isElement:function(n){return!(!n||1!==n.nodeType)},isString:S,isNumber:O,isDate:M,isRegExp:E,isError:B,isSymbol:N,isArrayBuffer:I,isDataView:q,isArray:U,isFunction:D,isArguments:L,isFinite:function(n){return!N(n)&&d(n)&&!isNaN(parseFloat(n))},isNaN:$,isTypedArray:X,isEmpty:function(n){if(null==n)return!0;var r=Y(n);return"number"==typeof r&&(U(n)||S(n)||L(n))?0===r:0===Y(nn(n))},isMatch:rn,isEqual:function(n,r){return on(n,r)},isMap:dn,isWeakMap:gn,isSet:bn,isWeakSet:mn,keys:nn,allKeys:an,values:jn,pairs:function(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:_n,functions:wn,methods:wn,extend:xn,extendOwn:Sn,assign:Sn,defaults:On,create:function(n,r){var t=Mn(n);return r&&Sn(t,r),t},clone:function(n){return _(n)?U(n)?n.slice():xn({},n):n},tap:function(n,r){return r(n),n},get:In,has:function(n,r){for(var t=(r=Bn(r)).length,e=0;e<t;e++){var u=r[e];if(!W(n,u))return!1;n=n[u]}return!!t},mapObject:function(n,r,t){r=Pn(r,t);for(var e=nn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},identity:Tn,constant:C,noop:qn,toPath:En,property:Dn,propertyOf:function(n){return null==n?qn:function(r){return In(n,r)}},matcher:kn,matches:kn,times:function(n,r,t){var e=Array(Math.max(0,n));r=Rn(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:Un,now:Wn,escape:$n,unescape:Cn,templateSettings:Kn,template:function(n,r,t){!r&&t&&(r=t),r=On({},r,tn.templateSettings);var e=RegExp([(r.escape||Jn).source,(r.interpolate||Jn).source,(r.evaluate||Jn).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(e,(function(r,t,e,i,a){return o+=n.slice(u,a).replace(Hn,Qn),u=a+r.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?o+="'+\n((__t=("+e+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),r})),o+="';\n";var i,a=r.variable;if(a){if(!Xn.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(a,"_",o)}catch(n){throw n.source=o,n}var f=function(n){return i.call(this,n,tn)};return f.source="function("+a+"){\n"+o+"}",f},result:function(n,r,t){var e=(r=Bn(r)).length;if(!e)return D(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=D(o)?o.call(n):o}return n},uniqueId:function(n){var r=++Yn+"";return n?n+r:r},chain:function(n){var r=tn(n);return r._chain=!0,r},iteratee:Vn,partial:nr,bind:rr,bindAll:ur,memoize:function(n,r){var t=function(e){var u=t.cache,o=""+(r?r.apply(this,arguments):e);return W(u,o)||(u[o]=n.apply(this,arguments)),u[o]};return t.cache={},t},delay:or,defer:ir,throttle:function(n,r,t){var e,u,o,i,a=0;t||(t={});var f=function(){a=!1===t.leading?0:Wn(),e=null,i=n.apply(u,o),e||(u=o=null)},c=function(){var c=Wn();a||!1!==t.leading||(a=c);var l=r-(c-a);return u=this,o=arguments,l<=0||l>r?(e&&(clearTimeout(e),e=null),a=c,i=n.apply(u,o),e||(u=o=null)):e||!1===t.trailing||(e=setTimeout(f,l)),i};return c.cancel=function(){clearTimeout(e),a=0,e=u=o=null},c},debounce:function(n,r,t){var e,u,o,i,a,f=function(){var c=Wn()-u;r>c?e=setTimeout(f,r-c):(e=null,t||(i=n.apply(a,o)),e||(o=a=null))},c=j((function(c){return a=this,o=c,u=Wn(),e||(e=setTimeout(f,r),t&&(i=n.apply(a,o))),i}));return c.cancel=function(){clearTimeout(e),e=o=a=null},c},wrap:function(n,r){return nr(r,n)},negate:ar,compose:function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:fr,once:cr,findKey:lr,findIndex:pr,findLastIndex:vr,sortedIndex:hr,indexOf:dr,lastIndexOf:gr,find:br,detect:br,findWhere:function(n,r){return br(n,kn(r))},each:mr,forEach:mr,map:jr,collect:jr,reduce:wr,foldl:wr,inject:wr,reduceRight:Ar,foldr:Ar,filter:xr,select:xr,reject:function(n,r,t){return xr(n,ar(Pn(r)),t)},every:Sr,all:Sr,some:Or,any:Or,contains:Mr,includes:Mr,include:Mr,invoke:Er,pluck:Br,where:function(n,r){return xr(n,kn(r))},max:Nr,min:function(n,r,t){var e,u,o=1/0,i=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e<o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))<i||u===1/0&&o===1/0)&&(o=n,i=u)}));return o},shuffle:function(n){return kr(n,1/0)},sample:kr,sortBy:function(n,r,t){var e=0;return r=Pn(r,t),Br(jr(n,(function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}})).sort((function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index})),"value")},groupBy:Rr,indexBy:Fr,countBy:Vr,partition:Pr,toArray:Tr,size:function(n){return null==n?0:tr(n)?n.length:nn(n).length},pick:Ur,omit:Wr,first:Lr,head:Lr,take:Lr,initial:zr,last:function(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[n.length-1]:$r(n,Math.max(0,n.length-r))},rest:$r,tail:$r,drop:$r,compact:function(n){return xr(n,Boolean)},flatten:function(n,r){return er(n,r,!1)},without:Kr,uniq:Jr,unique:Jr,union:Gr,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=Y(n);e<u;e++){var o=n[e];if(!Mr(r,o)){var i;for(i=1;i<t&&Mr(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:Cr,unzip:Hr,transpose:Hr,zip:Qr,object:function(n,r){for(var t={},e=0,u=Y(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},range:function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(i.call(n,e,e+=r));return t},mixin:Yr,default:tn});return Zr._=Zr,Zr}));;if(window.NodeList&&!NodeList.prototype.forEach){NodeList.prototype.forEach=Array.prototype.forEach;};/*!https://mths.be/cssescape v1.5.1 by @mathias | MIT license*/;(function(root,factory){if(typeof exports=='object'){module.exports=factory(root);}else if(typeof define=='function'&&define.amd){define([],factory.bind(root,root));}else{factory(root);}}(typeof global!='undefined'?global:this,function(root){if(root.CSS&&root.CSS.escape){return root.CSS.escape;}
var cssEscape=function(value){if(arguments.length==0){throw new TypeError('`CSS.escape` requires an argument.');}
var string=String(value);var length=string.length;var index=-1;var codeUnit;var result='';var firstCodeUnit=string.charCodeAt(0);while(++index<length){codeUnit=string.charCodeAt(index);if(codeUnit==0x0000){result+='\uFFFD';continue;}
if((codeUnit>=0x0001&&codeUnit<=0x001F)||codeUnit==0x007F||(index==0&&codeUnit>=0x0030&&codeUnit<=0x0039)||(index==1&&codeUnit>=0x0030&&codeUnit<=0x0039&&firstCodeUnit==0x002D)){result+='\\'+codeUnit.toString(16)+' ';continue;}
if(index==0&&length==1&&codeUnit==0x002D){result+='\\'+string.charAt(index);continue;}
if(codeUnit>=0x0080||codeUnit==0x002D||codeUnit==0x005F||codeUnit>=0x0030&&codeUnit<=0x0039||codeUnit>=0x0041&&codeUnit<=0x005A||codeUnit>=0x0061&&codeUnit<=0x007A){result+=string.charAt(index);continue;}
result+='\\'+string.charAt(index);}
return result;};if(!root.CSS){root.CSS={};}
root.CSS.escape=cssEscape;return cssEscape;}));;!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){W=t}function r(t){z=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof U?function(){U(a)}:c()}function s(){var t=0,e=new H(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<N;t+=2){var e=Q[t],n=Q[t+1];e(n),Q[t]=void 0,Q[t+1]=void 0}N=0}function f(){try{var t=Function("return this")().require("vertx");return U=t.runOnLoop||t.runOnContext,i()}catch(e){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[V]&&x(r);var o=n._state;if(o){var i=arguments[o-1];z(function(){return T(o,r,i,n._result)})}else j(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return w(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function y(t,e,n){z(function(t){var r=!1,o=_(n,e,function(n){r||(r=!0,e!==n?w(t,n):A(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,S(t,o))},t)}function m(t,e){e._state===Z?A(t,e._result):e._state===$?S(t,e._result):j(e,void 0,function(e){return w(t,e)},function(e){return S(t,e)})}function b(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?m(t,n):void 0===r?A(t,n):e(r)?y(t,n,r):A(t,n)}function w(e,n){if(e===n)S(e,v());else if(t(n)){var r=void 0;try{r=n.then}catch(o){return void S(e,o)}b(e,n,r)}else A(e,n)}function g(t){t._onerror&&t._onerror(t._result),E(t)}function A(t,e){t._state===X&&(t._result=e,t._state=Z,0!==t._subscribers.length&&z(E,t))}function S(t,e){t._state===X&&(t._state=$,t._result=e,z(g,t))}function j(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+Z]=n,o[i+$]=r,0===i&&t._state&&z(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?T(n,r,o,i):o(i);t._subscribers.length=0}}function T(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=!0;if(i){try{s=r(o)}catch(a){c=!1,u=a}if(n===s)return void S(n,d())}else s=o;n._state!==X||(i&&c?w(n,s):c===!1?S(n,u):t===Z?A(n,s):t===$&&S(n,s))}function M(t,e){try{e(function(e){w(t,e)},function(e){S(t,e)})}catch(n){S(t,n)}}function P(){return tt++}function x(t){t[V]=tt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function C(){return new Error("Array Methods must be provided an Array")}function O(t){return new et(this,t).promise}function k(t){var e=this;return new e(L(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function F(t){var e=this,n=new e(p);return S(n,t),n}function Y(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=nt}var K=void 0;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var L=K,N=0,U=void 0,W=void 0,z=function(t,e){Q[N]=t,Q[N+1]=e,N+=2,2===N&&(W?W(a):R())},B="undefined"!=typeof window?window:void 0,G=B||{},H=G.MutationObserver||G.WebKitMutationObserver,I="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3),R=void 0;R=I?o():H?s():J?u():void 0===B&&"function"==typeof require?f():c();var V=Math.random().toString(36).substring(2),X=void 0,Z=1,$=2,tt=0,et=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[V]||x(this.promise),L(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&A(this.promise,this._result))):S(this.promise,C())}return t.prototype._enumerate=function(t){for(var e=0;this._state===X&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(u){s=!0,i=u}if(o===l&&t._state!==X)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===nt){var c=new n(p);s?S(c,i):b(c,t,o),this._willSettleAt(c,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===X&&(this._remaining--,t===$?S(r,n):this._result[e]=n),0===this._remaining&&A(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;j(t,void 0,function(t){return n._settledAt(Z,e,t)},function(t){return n._settledAt($,e,t)})},t}(),nt=function(){function t(e){this[V]=P(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&Y(),this instanceof t?M(this,e):q())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var n=this,r=n.constructor;return e(t)?n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):n.then(t,t)},t}();return nt.prototype.then=l,nt.all=O,nt.race=k,nt.resolve=h,nt.reject=F,nt._setScheduler=n,nt._setAsap=r,nt._asap=z,nt.polyfill=D,nt.Promise=nt,nt.polyfill(),nt});;/*!@drupal/once - v1.0.1 - 2021-06-12*/var once=function(){"use strict";var n=/[\11\12\14\15\40]+/,e="data-once",t=document;function r(n,t,r){return n[t+"Attribute"](e,r)}function o(e){if("string"!=typeof e)throw new TypeError("once ID must be a string");if(""===e||n.test(e))throw new RangeError("once ID must not be empty or contain spaces");return'[data-once~="'+e+'"]'}function u(n){if(!(n instanceof Element))throw new TypeError("The element must be an instance of Element");return!0}function i(n,e){void 0===e&&(e=t);var r=n;if(null===n)r=[];else{if(!n)throw new TypeError("Selector must not be empty");"string"!=typeof n||e!==t&&!u(e)?n instanceof Element&&(r=[n]):r=e.querySelectorAll(n)}return Array.prototype.slice.call(r)}function c(n,e,t){return e.filter((function(e){var r=u(e)&&e.matches(n);return r&&t&&t(e),r}))}function f(e,t){var o=t.add,u=t.remove,i=[];r(e,"has")&&r(e,"get").trim().split(n).forEach((function(n){i.indexOf(n)<0&&n!==u&&i.push(n)})),o&&i.push(o);var c=i.join(" ");r(e,""===c?"remove":"set",c)}function a(n,e,t){return c(":not("+o(n)+")",i(e,t),(function(e){return f(e,{add:n})}))}return a.remove=function(n,e,t){return c(o(n),i(e,t),(function(e){return f(e,{remove:n})}))},a.filter=function(n,e,t){return c(o(n),i(e,t))},a.find=function(n,e){return i(n?o(n):"[data-once]",e)},a}();;/*!
* jQuery Once v2.2.3 - http://github.com/robloach/jquery-once
* @license MIT, GPL-2.0
* http://opensource.org/licenses/MIT
* http://opensource.org/licenses/GPL-2.0
*/(function(e){"use strict";if(typeof exports==="object"&&typeof exports.nodeName!=="string"){e(require("jquery"))}else if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(t){"use strict";var r=function(e){e=e||"once";if(typeof e!=="string"){throw new TypeError("The jQuery Once id parameter must be a string")}return e};t.fn.once=function(e){var n="jquery-once-"+r(e);return this.filter(function(){return t(this).data(n)!==true}).data(n,true)};t.fn.removeOnce=function(e){return this.findOnce(e).removeData("jquery-once-"+r(e))};t.fn.findOnce=function(e){var n="jquery-once-"+r(e);return this.filter(function(){return t(this).data(n)===true})}});(function(r){var n=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(t,e,i){n.Backbone=r(n,i,t,e)})}else if(typeof exports!=="undefined"){var t=require("underscore"),e;try{e=require("jquery")}catch(t){}r(n,exports,t,e)}else{n.Backbone=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}})(function(t,h,x,e){var i=t.Backbone;var a=Array.prototype.slice;h.VERSION="1.4.1";h.$=e;h.noConflict=function(){t.Backbone=i;return this};h.emulateHTTP=false;h.emulateJSON=false;var r=h.Events={};var o=/\s+/;var l;var u=function(t,e,i,r,n){var s=0,a;if(i&&typeof i==="object"){if(r!==void 0&&"context"in n&&n.context===void 0)n.context=r;for(a=x.keys(i);s<a.length;s++){e=u(t,e,a[s],i[a[s]],n)}}else if(i&&o.test(i)){for(a=i.split(o);s<a.length;s++){e=t(e,a[s],r,n)}}else{e=t(e,i,r,n)}return e};r.on=function(t,e,i){this._events=u(n,this._events||{},t,e,{context:i,ctx:this,listening:l});if(l){var r=this._listeners||(this._listeners={});r[l.id]=l;l.interop=false}return this};r.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=x.uniqueId("l"));var n=this._listeningTo||(this._listeningTo={});var s=l=n[r];if(!s){this._listenId||(this._listenId=x.uniqueId("l"));s=l=n[r]=new p(this,t)}var a=c(t,e,i,this);l=void 0;if(a)throw a;if(s.interop)s.on(e,i);return this};var n=function(t,e,i,r){if(i){var n=t[e]||(t[e]=[]);var s=r.context,a=r.ctx,o=r.listening;if(o)o.count++;n.push({callback:i,context:s,ctx:s||a,listening:o})}return t};var c=function(t,e,i,r){try{t.on(e,i,r)}catch(t){return t}};r.off=function(t,e,i){if(!this._events)return this;this._events=u(s,this._events,t,e,{context:i,listeners:this._listeners});return this};r.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;var n=t?[t._listenId]:x.keys(r);for(var s=0;s<n.length;s++){var a=r[n[s]];if(!a)break;a.obj.off(e,i,this);if(a.interop)a.off(e,i)}if(x.isEmpty(r))this._listeningTo=void 0;return this};var s=function(t,e,i,r){if(!t)return;var n=r.context,s=r.listeners;var a=0,o;if(!e&&!n&&!i){for(o=x.keys(s);a<o.length;a++){s[o[a]].cleanup()}return}o=e?[e]:x.keys(t);for(;a<o.length;a++){e=o[a];var h=t[e];if(!h)break;var l=[];for(var u=0;u<h.length;u++){var c=h[u];if(i&&i!==c.callback&&i!==c.callback._callback||n&&n!==c.context){l.push(c)}else{var f=c.listening;if(f)f.off(e,i)}}if(l.length){t[e]=l}else{delete t[e]}}return t};r.once=function(t,e,i){var r=u(f,{},t,e,this.off.bind(this));if(typeof t==="string"&&i==null)e=void 0;return this.on(r,e,i)};r.listenToOnce=function(t,e,i){var r=u(f,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,r)};var f=function(t,e,i,r){if(i){var n=t[e]=x.once(function(){r(e,n);i.apply(this,arguments)});n._callback=i}return t};r.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var r=0;r<e;r++)i[r]=arguments[r+1];u(d,this._events,t,void 0,i);return this};var d=function(t,e,i,r){if(t){var n=t[e];var s=t.all;if(n&&s)s=s.slice();if(n)v(n,r);if(s)v(s,[e].concat(r))}return t};var v=function(t,e){var i,r=-1,n=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<n)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<n)(i=t[r]).callback.call(i.ctx,s);return;case 2:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a);return;case 3:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a,o);return;default:while(++r<n)(i=t[r]).callback.apply(i.ctx,e);return}};var p=function(t,e){this.id=t._listenId;this.listener=t;this.obj=e;this.interop=true;this.count=0;this._events=void 0};p.prototype.on=r.on;p.prototype.off=function(t,e){var i;if(this.interop){this._events=u(s,this._events,t,e,{context:void 0,listeners:void 0});i=!this._events}else{this.count--;i=this.count===0}if(i)this.cleanup()};p.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId];if(!this.interop)delete this.obj._listeners[this.id]};r.bind=r.on;r.unbind=r.off;x.extend(h,r);var g=h.Model=function(t,e){var i=t||{};e||(e={});this.preinitialize.apply(this,arguments);this.cid=x.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)i=this.parse(i,e)||{};var r=x.result(this,"defaults");i=x.defaults(x.extend({},r,i),r);this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};x.extend(g.prototype,r,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return h.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!x.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(t==null)return this;var r;if(typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i||(i={});if(!this._validate(r,i))return false;var n=i.unset;var s=i.silent;var a=[];var o=this._changing;this._changing=true;if(!o){this._previousAttributes=x.clone(this.attributes);this.changed={}}var h=this.attributes;var l=this.changed;var u=this._previousAttributes;for(var c in r){e=r[c];if(!x.isEqual(h[c],e))a.push(c);if(!x.isEqual(u[c],e)){l[c]=e}else{delete l[c]}n?delete h[c]:h[c]=e}if(this.idAttribute in r){var f=this.id;this.id=this.get(this.idAttribute);this.trigger("changeId",this,f,i)}if(!s){if(a.length)this._pending=i;for(var d=0;d<a.length;d++){this.trigger("change:"+a[d],this,h[a[d]],i)}}if(o)return this;if(!s){while(this._pending){i=this._pending;this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,x.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!x.isEmpty(this.changed);return x.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?x.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var i={};var r;for(var n in t){var s=t[n];if(x.isEqual(e[n],s))continue;i[n]=s;r=true}return r?i:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(i){i=x.extend({parse:true},i);var r=this;var n=i.success;i.success=function(t){var e=i.parse?r.parse(t,i):t;if(!r.set(e,i))return false;if(n)n.call(i.context,r,t,i);r.trigger("sync",r,t,i)};G(this,i);return this.sync("read",this,i)},save:function(t,e,i){var r;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i=x.extend({validate:true,parse:true},i);var n=i.wait;if(r&&!n){if(!this.set(r,i))return false}else if(!this._validate(r,i)){return false}var s=this;var a=i.success;var o=this.attributes;i.success=function(t){s.attributes=o;var e=i.parse?s.parse(t,i):t;if(n)e=x.extend({},r,e);if(e&&!s.set(e,i))return false;if(a)a.call(i.context,s,t,i);s.trigger("sync",s,t,i)};G(this,i);if(r&&n)this.attributes=x.extend({},o,r);var h=this.isNew()?"create":i.patch?"patch":"update";if(h==="patch"&&!i.attrs)i.attrs=r;var l=this.sync(h,this,i);this.attributes=o;return l},destroy:function(e){e=e?x.clone(e):{};var i=this;var r=e.success;var n=e.wait;var s=function(){i.stopListening();i.trigger("destroy",i,i.collection,e)};e.success=function(t){if(n)s();if(r)r.call(e.context,i,t,e);if(!i.isNew())i.trigger("sync",i,t,e)};var t=false;if(this.isNew()){x.defer(e.success)}else{G(this,e);t=this.sync("delete",this,e)}if(!n)s();return t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||V();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend({},t,{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=x.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,x.extend(e,{validationError:i}));return false}});var m=h.Collection=function(t,e){e||(e={});this.preinitialize.apply(this,arguments);if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,x.extend({silent:true},e))};var w={add:true,remove:true,merge:true};var _={add:true,remove:false};var E=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var r=Array(t.length-i);var n=e.length;var s;for(s=0;s<r.length;s++)r[s]=t[s+i];for(s=0;s<n;s++)t[s+i]=e[s];for(s=0;s<r.length;s++)t[s+n+i]=r[s]};x.extend(m.prototype,r,{model:g,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return h.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:false},e,_))},remove:function(t,e){e=x.extend({},e);var i=!x.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);if(!e.silent&&r.length){e.changes={added:[],merged:[],removed:r};this.trigger("update",this,e)}return i?r[0]:r},set:function(t,e){if(t==null)return;e=x.extend({},w,e);if(e.parse&&!this._isModel(t)){t=this.parse(t,e)||[]}var i=!x.isArray(t);t=i?[t]:t.slice();var r=e.at;if(r!=null)r=+r;if(r>this.length)r=this.length;if(r<0)r+=this.length+1;var n=[];var s=[];var a=[];var o=[];var h={};var l=e.add;var u=e.merge;var c=e.remove;var f=false;var d=this.comparator&&r==null&&e.sort!==false;var v=x.isString(this.comparator)?this.comparator:null;var p,g;for(g=0;g<t.length;g++){p=t[g];var m=this.get(p);if(m){if(u&&p!==m){var _=this._isModel(p)?p.attributes:p;if(e.parse)_=m.parse(_,e);m.set(_,e);a.push(m);if(d&&!f)f=m.hasChanged(v)}if(!h[m.cid]){h[m.cid]=true;n.push(m)}t[g]=m}else if(l){p=t[g]=this._prepareModel(p,e);if(p){s.push(p);this._addReference(p,e);h[p.cid]=true;n.push(p)}}}if(c){for(g=0;g<this.length;g++){p=this.models[g];if(!h[p.cid])o.push(p)}if(o.length)this._removeModels(o,e)}var y=false;var b=!d&&l&&c;if(n.length&&b){y=this.length!==n.length||x.some(this.models,function(t,e){return t!==n[e]});this.models.length=0;E(this.models,n,0);this.length=this.models.length}else if(s.length){if(d)f=true;E(this.models,s,r==null?this.length:r);this.length=this.models.length}if(f)this.sort({silent:true});if(!e.silent){for(g=0;g<s.length;g++){if(r!=null)e.index=r+g;p=s[g];p.trigger("add",p,this,e)}if(f||y)this.trigger("sort",this,e);if(s.length||o.length||a.length){e.changes={added:s,removed:o,merged:a};this.trigger("update",this,e)}}return i?t[0]:t},reset:function(t,e){e=e?x.clone(e):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],e)}e.previousModels=this.models;this._reset();t=this.add(t,x.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return this.get(t)!=null},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,true)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;if(x.isFunction(e))e=e.bind(this);if(i===1||x.isString(e)){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return this.map(t+"")},fetch:function(i){i=x.extend({parse:true},i);var r=i.success;var n=this;i.success=function(t){var e=i.reset?"reset":"set";n[e](t,i);if(r)r.call(i.context,n,t,i);n.trigger("sync",n,t,i)};G(this,i);return this.sync("read",this,i)},create:function(t,e){e=e?x.clone(e):{};var r=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!r)this.add(t,e);var n=this;var s=e.success;e.success=function(t,e,i){if(r)n.add(t,i);if(s)s.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new b(this,I)},keys:function(){return new b(this,k)},entries:function(){return new b(this,S)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?x.clone(e):{};e.collection=this;var i;if(this.model.prototype){i=new this.model(t,e)}else{i=this.model(t,e)}if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var r=0;r<t.length;r++){var n=this.get(t[r]);if(!n)continue;var s=this.indexOf(n);this.models.splice(s,1);this.length--;delete this._byId[n.cid];var a=this.modelId(n.attributes,n.idAttribute);if(a!=null)delete this._byId[a];if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}i.push(n);this._removeReference(n,e)}return i},_isModel:function(t){return t instanceof g},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes,t.idAttribute);if(i!=null)this._byId[i]=t;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes,t.idAttribute);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if(e){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(t==="changeId"){var n=this.modelId(e.previousAttributes(),e.idAttribute);var s=this.modelId(e.attributes,e.idAttribute);if(n!=null)delete this._byId[n];if(s!=null)this._byId[s]=e}}this.trigger.apply(this,arguments)}});var y=typeof Symbol==="function"&&Symbol.iterator;if(y){m.prototype[y]=m.prototype.values}var b=function(t,e){this._collection=t;this._kind=e;this._index=0};var I=1;var k=2;var S=3;if(y){b.prototype[y]=function(){return this}}b.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t=this._collection.at(this._index);this._index++;var e;if(this._kind===I){e=t}else{var i=this._collection.modelId(t.attributes,t.idAttribute);if(this._kind===k){e=i}else{e=[i,t]}}return{value:e,done:false}}this._collection=void 0}return{value:void 0,done:true}};var A=h.View=function(t){this.cid=x.uniqueId("view");this.preinitialize.apply(this,arguments);x.extend(this,x.pick(t,P));this._ensureElement();this.initialize.apply(this,arguments)};var T=/^(\S+)\s*(.*)$/;var P=["model","collection","el","id","attributes","className","tagName","events"];x.extend(A.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof h.$?t:h.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=x.result(this,"events"));if(!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!x.isFunction(i))i=this[i];if(!i)continue;var r=e.match(T);this.delegate(r[1],r[2],i.bind(this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=x.extend({},x.result(this,"attributes"));if(this.id)t.id=x.result(this,"id");if(this.className)t["class"]=x.result(this,"className");this.setElement(this._createElement(x.result(this,"tagName")));this._setAttributes(t)}else{this.setElement(x.result(this,"el"))}},_setAttributes:function(t){this.$el.attr(t)}});var H=function(r,t,n,s){switch(t){case 1:return function(){return r[n](this[s])};case 2:return function(t){return r[n](this[s],t)};case 3:return function(t,e){return r[n](this[s],C(t,this),e)};case 4:return function(t,e,i){return r[n](this[s],C(t,this),e,i)};default:return function(){var t=a.call(arguments);t.unshift(this[s]);return r[n].apply(r,t)}}};var $=function(i,r,t,n){x.each(t,function(t,e){if(r[e])i.prototype[e]=H(r,t,e,n)})};var C=function(e,t){if(x.isFunction(e))return e;if(x.isObject(e)&&!t._isModel(e))return R(e);if(x.isString(e))return function(t){return t.get(e)};return e};var R=function(t){var e=x.matches(t);return function(t){return e(t.attributes)}};var M={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};var N={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};x.each([[m,M,"models"],[g,N,"attributes"]],function(t){var i=t[0],e=t[1],r=t[2];i.mixin=function(t){var e=x.reduce(x.functions(t),function(t,e){t[e]=0;return t},{});$(i,t,e,r)};$(i,x,e,r)});h.sync=function(t,e,r){var i=j[t];x.defaults(r||(r={}),{emulateHTTP:h.emulateHTTP,emulateJSON:h.emulateJSON});var n={type:i,dataType:"json"};if(!r.url){n.url=x.result(e,"url")||V()}if(r.data==null&&e&&(t==="create"||t==="update"||t==="patch")){n.contentType="application/json";n.data=JSON.stringify(r.attrs||e.toJSON(r))}if(r.emulateJSON){n.contentType="application/x-www-form-urlencoded";n.data=n.data?{model:n.data}:{}}if(r.emulateHTTP&&(i==="PUT"||i==="DELETE"||i==="PATCH")){n.type="POST";if(r.emulateJSON)n.data._method=i;var s=r.beforeSend;r.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",i);if(s)return s.apply(this,arguments)}}if(n.type!=="GET"&&!r.emulateJSON){n.processData=false}var a=r.error;r.error=function(t,e,i){r.textStatus=e;r.errorThrown=i;if(a)a.call(r.context,t,e,i)};var o=r.xhr=h.ajax(x.extend(n,r));e.trigger("request",e,o,r);return o};var j={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};h.ajax=function(){return h.$.ajax.apply(h.$,arguments)};var O=h.Router=function(t){t||(t={});this.preinitialize.apply(this,arguments);if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var U=/\((.*?)\)/g;var z=/(\(\?)?:\w+/g;var q=/\*\w+/g;var F=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(O.prototype,r,{preinitialize:function(){},initialize:function(){},route:function(i,r,n){if(!x.isRegExp(i))i=this._routeToRegExp(i);if(x.isFunction(r)){n=r;r=""}if(!n)n=this[r];var s=this;h.history.route(i,function(t){var e=s._extractParameters(i,t);if(s.execute(n,e,r)!==false){s.trigger.apply(s,["route:"+r].concat(e));s.trigger("route",r,e);h.history.trigger("route",s,r,e)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,e){h.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=x.result(this,"routes");var t,e=x.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(F,"\\$&").replace(U,"(?:$1)?").replace(z,function(t,e){return e?t:"([^/?]+)"}).replace(q,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return x.map(i,function(t,e){if(e===i.length-1)return t||null;return t?decodeURIComponent(t):null})}});var B=h.History=function(){this.handlers=[];this.checkUrl=this.checkUrl.bind(this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var J=/^[#\/]|\s+$/g;var L=/^\/+|\/+$/g;var W=/#.*$/;B.started=false;x.extend(B.prototype,r,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)==="/"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(J,"")},start:function(t){if(B.started)throw new Error("Backbone.history has already been started");B.started=true;this.options=x.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(L,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";this.location.replace(e+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var i=document.body;var r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open();r.document.close();r.location.hash="#"+this.fragment}var n=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState){n("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){n("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};if(this._usePushState){t("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);B.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(e){if(!this.matchRoot())return false;e=this.fragment=this.getFragment(e);return x.some(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}})},navigate:function(t,e){if(!B.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||"");var i=this.root;if(t===""||t.charAt(0)==="?"){i=i.slice(0,-1)||"/"}var r=i+t;t=t.replace(W,"");var n=this.decodeFragment(t);if(this.fragment===n)return;this.fragment=n;if(this._usePushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,r)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;if(!e.replace){s.document.open();s.document.close()}this._updateHash(s.location,t,e.replace)}}else{return this.location.assign(r)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});h.history=new B;var D=function(t,e){var i=this;var r;if(t&&x.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}x.extend(r,i,e);r.prototype=x.create(i.prototype,t);r.prototype.constructor=r;r.__super__=i.prototype;return r};g.extend=m.extend=O.extend=A.extend=B.extend=D;var V=function(){throw new Error('A "url" property or function must be specified')};var G=function(e,i){var r=i.error;i.error=function(t){if(r)r.call(i.context,e,t,i);e.trigger("error",e,t,i)}};return h});!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){"use strict";return e.ui=e.ui||{},e.ui.version="1.13.1"}));/*!
* jQuery UI :data 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(n){return function(t){return!!e.data(t,n)}})):function(n,t,r){return!!e.data(n,r[3])}})}));/*!
* jQuery UI Disable Selection 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.fn.extend({disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(n+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var n}));/*!
* jQuery UI Focusable 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.focusable=function(i,t){var n,s,r,u,a,o=i.nodeName.toLowerCase();return"area"===o?(s=(n=i.parentNode).name,!(!i.href||!s||"map"!==n.nodeName.toLowerCase())&&((r=e("img[usemap='#"+s+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(o)?(u=!i.disabled)&&(a=e(i).closest("fieldset")[0])&&(u=!a.disabled):u="a"===o&&i.href||t,u&&e(i).is(":visible")&&function(e){var i=e.css("visibility");for(;"inherit"===i;)i=(e=e.parent()).css("visibility");return"visible"===i}(e(i)))},e.extend(e.expr.pseudos,{focusable:function(i){return e.ui.focusable(i,null!=e.attr(i,"tabindex"))}}),e.ui.focusable}));!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}}));!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}));/*!
* jQuery UI Support for jQuery core 1.8.x and newer 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";if(e.expr.pseudos||(e.expr.pseudos=e.expr[":"]),e.uniqueSort||(e.uniqueSort=e.unique),!e.escapeSelector){var n=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,t=function(e,n){return n?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(n,t)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(e){return e%2==0}))},odd:function(){return this.filter((function(e){return e%2==1}))}})}));/*!
* jQuery UI Keycode 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}));!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.plugin={add:function(n,i,t){var u,o=e.ui[n].prototype;for(u in t)o.plugins[u]=o.plugins[u]||[],o.plugins[u].push([i,t[u]])},call:function(e,n,i,t){var u,o=e.plugins[n];if(o&&(t||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(u=0;u<o.length;u++)e.options[o[u][0]]&&o[u][1].apply(e.element,i)}}}));!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n}}));!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.safeBlur=function(n){n&&"body"!==n.nodeName.toLowerCase()&&e(n).trigger("blur")}}));/*!
* jQuery UI Scroll Parent 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn.scrollParent=function(e){var s=this.css("position"),n="absolute"===s,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==s&&i.length?i:t(this[0].ownerDocument||document)}}));/*!
* jQuery UI Unique ID 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)}((function(i){"use strict";return i.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")}))}});var e}));/*!
* jQuery UI Widget 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";var e,i=0,s=Array.prototype.hasOwnProperty,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)(s=t._data(n,"events"))&&s.remove&&t(n).triggerHandler("remove");e(i)}),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0],u=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),Array.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr.pseudos[u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){if(!this||!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(a=new i).options=t.widget.extend({},a.options),t.each(s,(function(t,e){r[t]="function"==typeof e?function(){function s(){return i.prototype[t].apply(this,arguments)}function n(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,o=this._superApply;return this._super=s,this._superApply=n,t=e.apply(this,arguments),this._super=i,this._superApply=o,t}}():e})),o.prototype=t.widget.extend(a,{widgetEventPrefix:n&&a.widgetEventPrefix||e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),n?(t.each(n._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)})),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,o,a=n.call(arguments,1),r=0,l=a.length;r<l;r++)for(i in a[r])o=a[r][i],s.call(a[r],i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=n.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each((function(){var i,n=t.data(this,s);return"instance"===o?(l=n,!1):n?"function"!=typeof n[o]||"_"===o.charAt(0)?t.error("no such method '"+o+"' for "+e+" widget instance"):(i=n[o].apply(n,r))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each((function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new i(o,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function n(){var i=[];e.element.each((function(e,n){t.map(s.classesElementLookup,(function(t){return t})).some((function(t){return t.is(n)}))||i.push(n)})),s._on(t(i),{remove:"_untrackClassesElement"})}function o(o,a){var r,l;for(l=0;l<o.length;l++)r=s.classesElementLookup[o[l]]||t(),e.add?(n(),r=t(t.uniqueSort(r.get().concat(e.element.get())))):r=t(r.not(e.element).get()),s.classesElementLookup[o[l]]=r,i.push(o[l]),a&&e.classes[o[l]]&&i.push(e.classes[o[l]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&o(e.keys.match(/\S+/g)||[],!0),e.extra&&o(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,(function(s,a){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):i.on(u,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!("function"==typeof a&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){var a;"string"==typeof n&&(n={effect:n});var r=n?!0===n||"number"==typeof n?i:n.effect||i:e;"number"==typeof(n=n||{})?n={duration:n}:!0===n&&(n={}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue((function(i){t(this)[e](),o&&o.call(s[0]),i()}))}})),t.widget}));/*!
* jQuery UI Autocomplete 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./menu","../keycode","../position","../safe-active-element","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,u="input"===n;this.isMultiLine=o||!u&&this._isContentEditable(this.element),this.valueMethod=this.element[o||u?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case o.UP:t=!0,this._keyEvent("previous",n);break;case o.DOWN:t=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){if(s)return s=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var s,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(s=i.item.attr("aria-label")||n.value)&&String.prototype.trim.call(s).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(s))}),100))},menuselect:function(t,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=s}))),!1!==this._trigger("select",t,{item:s})&&this._value(s.value),this.term=this._value(),this.close(t),this.selectedItem=s}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||s)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,(function(e,i){s._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return s.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(i))}),100))}}),e.ui.autocomplete}));/*!
* jQuery UI Labels 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn.labels=function(){var e,s,i,n,a;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(a=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),s="label[for='"+t.escapeSelector(i)+"']",n=n.add(a.find(s).addBack(s))),this.pushStack(n)):this.pushStack([])}}));/*!
* jQuery UI Menu 1.13.1
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target),s=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),s=e(t.currentTarget);i[0]===s[0]&&(s.is(".ui-state-active")||(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,s)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var i,s,n,a,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,s=this.previousFilter||"",a=!1,n=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,s,n,a=this,u=this.options.icons.submenu,o=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),s=e("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+u),i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(t=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);a._isDivider(t)&&a._addClass(t,"ui-menu-divider","ui-widget-content")})),n=(s=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,s,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,u,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),u=this.activeMenu.height(),o=t.outerHeight(),n<0?this.activeMenu.scrollTop(a+n):n+o>u&&this.activeMenu.scrollTop(a+n-u+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),i?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),s&&s.length&&this.active||(s=this._menuItems(this.activeMenu)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s-n<0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,s,n;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s+n>0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return s.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}})}));_.mixin({guid:function(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});}});;/*! picturefill - v3.0.2 - 2016-02-12
* https://scottjehl.github.io/picturefill/
* Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
*/!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"	"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,K="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};o=a.console&&console.warn?function(a){console.warn(a)}:u,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?_(a):!0},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?A[a]:!0},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=K,z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b?b:Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=F&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&H.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",g(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);;/*!
* tabbable 5.3.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.tabbable,o=e.tabbable={};t(o),o.noConflict=function(){return e.tabbable=n,o}}())}(this,(function(e){"use strict";var t=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],n=t.join(","),o="undefined"==typeof Element,r=o?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=!o&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},a=function(e,t,o){var i=Array.prototype.slice.apply(e.querySelectorAll(n));return t&&r.call(e,n)&&i.unshift(e),i=i.filter(o)},l=function e(t,o,i){for(var a=[],l=Array.from(t);l.length;){var u=l.shift();if("SLOT"===u.tagName){var c=u.assignedElements(),d=e(c.length?c:u.children,!0,i);i.flatten?a.push.apply(a,d):a.push({scope:u,candidates:d})}else{r.call(u,n)&&i.filter(u)&&(o||!t.includes(u))&&a.push(u);var f=u.shadowRoot||"function"==typeof i.getShadowRoot&&i.getShadowRoot(u);if(f){var s=e(!0===f?u.children:f.children,!0,i);i.flatten?a.push.apply(a,s):a.push({scope:u,candidates:s})}else l.unshift.apply(l,u.children)}}return a},u=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},c=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},d=function(e){return"INPUT"===e.tagName},f=function(e){return function(e){return d(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||i(e),o=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=o(window.CSS.escape(e.name));else try{t=o(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)},s=function(e){var t=e.getBoundingClientRect(),n=t.width,o=t.height;return 0===n&&0===o},p=function(e,t){return!(t.disabled||function(e){return d(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,o=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var a=r.call(e,"details>summary:first-of-type")?e.parentElement:e;if(r.call(a,"details:not([open]) *"))return!0;var l=i(e).host,u=(null==l?void 0:l.ownerDocument.contains(l))||e.ownerDocument.contains(e);if(n&&"full"!==n){if("non-zero-area"===n)return s(e)}else{if("function"==typeof o){for(var c=e;e;){var d=e.parentElement,f=i(e);if(d&&!d.shadowRoot&&!0===o(d))return s(e);e=e.assignedSlot?e.assignedSlot:d||f===e.ownerDocument?d:f.host}e=c}if(u)return!e.getClientRects().length}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var o=t.children.item(n);if("LEGEND"===o.tagName)return!!r.call(t,"fieldset[disabled] *")||!o.contains(e)}return!0}t=t.parentElement}return!1}(t))},h=function(e,t){return!(f(t)||u(t)<0||!p(e,t))},m=t.concat("iframe").join(",");e.focusable=function(e,t){return(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:p.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):a(e,t.includeContainer,p.bind(null,t))},e.isFocusable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,m)&&p(t,e)},e.isTabbable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,n)&&h(t,e)},e.tabbable=function(e,t){return function e(t){var n=[],o=[];return t.forEach((function(t,r){var i=!!t.scope,a=i?t.scope:t,l=u(a,i),c=i?e(t.candidates):a;0===l?i?n.push.apply(n,c):n.push(a):o.push({documentOrder:r,tabIndex:l,item:t,isScope:i,content:c})})),o.sort(c).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)}((t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:h.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot}):a(e,t.includeContainer,h.bind(null,t)))},Object.defineProperty(e,"__esModule",{value:!0})}));;(function($,Drupal){var autocomplete;function autocompleteSplitValues(value){var result=[];var quote=false;var current='';var valueLength=value.length;var character;for(var i=0;i<valueLength;i++){character=value.charAt(i);if(character==='"'){current+=character;quote=!quote;}else if(character===','&&!quote){result.push(current.trim());current='';}else{current+=character;}}
if(value.length>0){result.push(current.trim());}
return result;}
function extractLastTerm(terms){return autocomplete.splitValues(terms).pop();}
function searchHandler(event){var options=autocomplete.options;if(options.isComposing){return false;}
var term=autocomplete.extractLastTerm(event.target.value);if(term.length>0&&options.firstCharacterBlacklist.indexOf(term[0])!==-1){return false;}
return term.length>=options.minLength;}
function sourceData(request,response){var elementId=this.element.attr('id');if(!(elementId in autocomplete.cache)){autocomplete.cache[elementId]={};}
function showSuggestions(suggestions){var tagged=autocomplete.splitValues(request.term);var il=tagged.length;for(var i=0;i<il;i++){var index=suggestions.indexOf(tagged[i]);if(index>=0){suggestions.splice(index,1);}}
response(suggestions);}
var term=autocomplete.extractLastTerm(request.term);function sourceCallbackHandler(data){autocomplete.cache[elementId][term]=data;showSuggestions(data);}
if(autocomplete.cache[elementId].hasOwnProperty(term)){showSuggestions(autocomplete.cache[elementId][term]);}else{var options=$.extend({success:sourceCallbackHandler,data:{q:term}},autocomplete.ajax);$.ajax(this.element.attr('data-autocomplete-path'),options);}}
function focusHandler(){return false;}
function selectHandler(event,ui){var terms=autocomplete.splitValues(event.target.value);terms.pop();terms.push(ui.item.value);event.target.value=terms.join(', ');return false;}
function renderItem(ul,item){return $('<li>').append($('<a>').html(item.label)).appendTo(ul);}
Drupal.behaviors.autocomplete={attach:function attach(context){var $autocomplete=$(once('autocomplete','input.form-autocomplete',context));if($autocomplete.length){var blacklist=$autocomplete.attr('data-autocomplete-first-character-blacklist');$.extend(autocomplete.options,{firstCharacterBlacklist:blacklist||''});$autocomplete.autocomplete(autocomplete.options).each(function(){$(this).data('ui-autocomplete')._renderItem=autocomplete.options.renderItem;});$autocomplete.on('compositionstart.autocomplete',function(){autocomplete.options.isComposing=true;});$autocomplete.on('compositionend.autocomplete',function(){autocomplete.options.isComposing=false;});}},detach:function detach(context,settings,trigger){if(trigger==='unload'){$(once.remove('autocomplete','input.form-autocomplete',context)).autocomplete('destroy');}}};autocomplete={cache:{},splitValues:autocompleteSplitValues,extractLastTerm:extractLastTerm,options:{source:sourceData,focus:focusHandler,search:searchHandler,select:selectHandler,renderItem:renderItem,minLength:1,firstCharacterBlacklist:'',isComposing:false},ajax:{dataType:'json',jsonp:false}};Drupal.autocomplete=autocomplete;})(jQuery,Drupal);;var Crain=function(){this.set=function(type,data){switch(type){case 'context':this.context=data;break;case 'content':this.content=data;break;case 'visitor':this.visitor=data;break;case 'page':this.page=data;break;case 'video':this.video=data;break;}};this.append=function(type,data){switch(type){case 'context':this.context+=data;break;case 'content':this.content+=data;break;case 'visitor':this.visitor+=data;break;case 'page':this.page+=data;break;case 'video':this.video+=data;break;}}
this.get=function(type){switch(type){case 'context':return this.context;break;case 'content':return this.content;break;case 'visitor':return this.visitor;break;case 'page':return this.page;break;case 'video':return this.video;break;}};};var Crain=new Crain();(function($,Drupal){Drupal.behaviors.crain_object={attach:function(){if(drupalSettings.crain_object){Crain.context=drupalSettings.crain_object.context;Crain.content=drupalSettings.crain_object.content;Crain.visitor=drupalSettings.crain_object.visitor;Crain.page=drupalSettings.crain_object.page;Crain.video=drupalSettings.crain_object.video;}}};})(jQuery,Drupal);;/*!js-cookie v3.0.1 | MIT*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o}}())}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}return function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}));;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
(function($,Drupal,cookies){var deprecatedMessageSuffix="is deprecated in Drupal 9.0.0 and will be removed in Drupal 10.0.0. Use the core/js-cookie library instead. See https://www.drupal.org/node/3104677";var isFunction=function isFunction(obj){return Object.prototype.toString.call(obj)==='[object Function]';};var parseCookieValue=function parseCookieValue(value,parseJson){if(value.indexOf('"')===0){value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{value=decodeURIComponent(value.replace(/\+/g,' '));return parseJson?JSON.parse(value):value;}catch(e){}};var reader=function reader(cookieValue,cookieName,converter,readUnsanitized,parseJson){var value=readUnsanitized?cookieValue:parseCookieValue(cookieValue,parseJson);if(converter!==undefined&&isFunction(converter)){return converter(value,cookieName);}
return value;};$.cookie=function(key){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;Drupal.deprecationError({message:"jQuery.cookie() ".concat(deprecatedMessageSuffix)});if(value!==undefined&&!isFunction(value)){var attributes=_objectSpread(_objectSpread({},$.cookie.defaults),options);if(typeof attributes.expires==='string'&&attributes.expires!==''){attributes.expires=new Date(attributes.expires);}
var cookieSetter=cookies.withConverter({write:function write(cookieValue){return encodeURIComponent(cookieValue);}});value=$.cookie.json&&!$.cookie.raw?JSON.stringify(value):String(value);return cookieSetter.set(key,value,attributes);}
var userProvidedConverter=value;var cookiesShim=cookies.withConverter({read:function read(cookieValue,cookieName){return reader(cookieValue,cookieName,userProvidedConverter,$.cookie.raw,$.cookie.json);}});if(key!==undefined){return cookiesShim.get(key);}
var results=cookiesShim.get();Object.keys(results).forEach(function(resultKey){if(results[resultKey]===undefined){delete results[resultKey];}});return results;};$.cookie.defaults=_objectSpread({path:''},cookies.defaults);$.cookie.json=false;$.cookie.raw=false;$.removeCookie=function(key,options){Drupal.deprecationError({message:"jQuery.removeCookie() ".concat(deprecatedMessageSuffix)});cookies.remove(key,_objectSpread(_objectSpread({},$.cookie.defaults),options));return!cookies.get(key);};})(jQuery,Drupal,window.Cookies);;(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:null};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}
window.CustomEvent=CustomEvent;})();;(function($,Drupal){'use strict';window.User=function(){this.settings={cookieDomain:location.host,cookieName:'ccu',cookieExpName:'ccux',csuCookieName:'CSUMOD',ipAddress:null,isCMSUser:false,siteCode:'',userAgent:navigator.userAgent,userExpire:5,};};User.prototype={apiPath:'https://api.crain.com',environment:'production',meter:{},user:null,userCookie:null,userExpCookie:null,csuCookie:null,userID:null,authResp:null,isLoggedIn:false,permCookie:Date.now()+(1000*60*60*24*365*20),hasExpiredSub:null,hasExpiredTrial:null,hasExpiredLicense:null,hasExpiredLicenseTrial:null,hasVerifiedEmail:null,init:function(settings){this.userID=this.getUserID();this.settings=this.updateSettings(settings)||this.settings;this.csuCookie=parseInt($.cookie(this.settings.csuCookieName),10);var storedUser=null;var removeStoredUser=false;if(this.settings.siteCode=='camw'){this.apiPath='';if(this.userID){var expiredTime=this.getCamwCSAuthRespExpireTime();if(expiredTime){this.settings.userExpire=expiredTime;}}}
if(this.settings.userExpire==-1){if(window.sessionStorage){storedUser=sessionStorage.getItem(this.settings.cookieName);}
else{storedUser=$.cookie(this.settings.cookieName);}}
else{if(window.localStorage){storedUser=localStorage.getItem(this.settings.cookieName);}
else{storedUser=$.cookie(this.settings.cookieName);}}
if(storedUser){var jsonStoredUser=JSON.parse(storedUser);jsonStoredUser.csumod=jsonStoredUser.csumod||Date.now();if(jsonStoredUser&&!isNaN(this.csuCookie)&&jsonStoredUser.csumod<this.csuCookie){removeStoredUser=true;$.removeCookie(this.settings.cookieExpName,{path:'/',domain:this.settings.cookieDomain});}}
else{$.removeCookie(this.settings.cookieExpName,{path:'/',domain:this.settings.cookieDomain});}
if((!this.userID&&storedUser)||removeStoredUser){if(window.sessionStorage){sessionStorage.removeItem(this.settings.cookieName);}
if(window.localStorage){localStorage.removeItem(this.settings.cookieName);}
$.removeCookie(this.settings.cookieName,{path:'/',domain:this.settings.cookieDomain});$.removeCookie(this.settings.cookieExpName,{path:'/',domain:this.settings.cookieDomain});storedUser=null;}
this.userExpCookie=$.cookie(this.settings.cookieExpName);if(storedUser){this.userCookie=storedUser;}
this.environment=this.getEnvironment();if(this.matchesDummyAccounts()){$.removeCookie('CSAuthResp',{path:'/',domain:'.'+this.settings.baseURL});$.removeCookie('CSAuthResp',{path:'/',domain:'.stage.'+this.settings.baseURL});this.clearUserDetails();this.setUserObject(this.user);}
else if(typeof this.userID!=='undefined'&&this.userID!==null&&this.userID!==undefined){if(typeof Crain=='object'&&typeof Crain.visitor!='undefined'){Crain.visitor.userID=this.userID;}
if(this.userCookie!==undefined&&this.userCookie!==null&&!this.isUserExpired()){this.user=JSON.parse(this.userCookie);this.setUserObject(this.user);}
else{$.removeCookie(this.settings.cookieExpName,{path:'/',domain:this.settings.cookieDomain});this.userExpCookie=$.cookie(this.settings.cookieExpName);this.callApiUserProfile('authenticate_user',{CSUserId:this.userID});}}
else{$.removeCookie(this.settings.cookieExpName,{path:'/',domain:this.settings.cookieDomain});this.userExpCookie=$.cookie(this.settings.cookieExpName);this.setUserObject(this.user);}},clearUserDetails:function(){this.authResp=null;this.userID=null;Crain.visitor.isLoggedIn=this.isLoggedIn=false;},matchesDummyAccounts:function(){if(this.environment!==undefined){if(this.settings.clickshareDummyAccounts!==undefined){var accounts=this.settings.clickshareDummyAccounts[this.environment];return accounts&&accounts.indexOf(this.userID)>-1;}}},getEnvironment:function(){return /stage\./.test(location.href)?'stage':'production';},getUser:function(){return this.user;},getCamwCSAuthRespExpireTime:function(){var authResp=$.cookie('CSAuthResp');if(authResp!==null&&authResp!==undefined){this.authResp=authResp.replace(/['"]+/g,'');var result=authResp.split(':');return result[0];}
return authResp;},getUserID:function(){var authResp=$.cookie('CSAuthResp');if(authResp!==null&&authResp!==undefined){if(Crain&&Crain.visitor&&undefined!==Crain.visitor&&null!==Crain.visitor&&(typeof Crain.visitor==='object')){Crain.visitor.isLoggedIn=true;}
this.isLoggedIn=true;this.authResp=authResp.replace(/['"]+/g,'');var result=authResp.split(':');return result[2];}
return authResp;},isUserExpired:function(){var _is_null=this.userExpCookie==undefined||this.userExpCookie==null;var _is_exp=this.userExpCookie-Date.now()<=0;var _is_session=isNaN(this.userExpCookie)&&this.userExpCookie!=='session';return _is_null||_is_exp||_is_session;},callApiUserProfile:function(method,settings,_callback){var _this=this;var method=typeof method!=='undefined'?method:'find_user';var settings=typeof settings!=='undefined'?settings:{};var _callback=typeof _callback==='function'?_callback:_this._setUserObjectCallback;$.ajax({cache:false,url:_this.apiPath+'/user/'+_this.settings.siteCode+'/'+method,type:'GET',data:settings,dataType:'json',timeout:7500,}).done(function(json){_callback(json);}).fail(function(jqXHR,textStatus,errorThrown){$(window).trigger('crain-api-user-fetch-fail',{textStatus:textStatus,errorThrown:errorThrown});_callback(errorThrown);});},_setUserObjectCallback:function(json){if(typeof json!='undefined'&&json!=false){if(json.Remote&&User.settings&&User.settings.cookieName){var cookieName=User.settings.cookieName+'_remote';var remoteIp=$.cookie(cookieName);if(remoteIp!=json.Remote){$.cookie(cookieName,json.Remote,{path:'/',domain:User.settings.cookieDomain});}}
if(typeof json.errorCode=='undefined'){User.setUserObject(json);return;}}
if(typeof User.userCookie!='undefined'&&User.userCookie!==undefined){User.user=JSON.parse(User.userCookie);}
User.setUserObject(User.user);},_setMeterCallback:function(json){if(typeof json=='object'&&typeof json.errorCode!='undefined'&&json!=false){if(typeof json.response!='undefined'&&json.response.hasOwnProperty('Cookies')){for(var cookie in json.response.Cookies){var cookie_obj=json.response.Cookies[cookie];var _key=Object.keys(cookie_obj)[0];var _value=_key!==undefined?cookie_obj[_key]:undefined;var _settings={path:'/',domain:User.settings.cookieDomain};if(/CSBrowser/.test(_key)){_key='CSBrowser';var fiveYearsAhead=Date.now()+(5*365*24*60*60*1000);_settings.expires=new Date(fiveYearsAhead);}
if(_key!==undefined&&_value!==undefined){User.meter[_key]=_value;$.cookie(_key,_value,_settings);}}}
if(typeof json.response!='undefined'&&json.response.hasOwnProperty('MeterSpecs')){User.meter.errorCode=json.errorCode;if(json.response.MeterSpecs.hasOwnProperty('MeterSpecPreReg')){User.meter.preReg=json.response.MeterSpecs.MeterSpecPreReg;}
if(json.response.MeterSpecs.hasOwnProperty('MeterSpecPostReg')){User.meter.postReg=json.response.MeterSpecs.MeterSpecPostReg;}}}
$(window).trigger('user-meter-obtained');},callApiUserPurchaseProduct:function(){var data={CSUserId:this.userID,};if(arguments[0]){data.CSItemId=arguments[0];}
if(arguments[1]){data.AID=arguments[1];}
var callbackFunc=arguments[2]||'purchaseCallback';this.callApiUserProfile('check_purchase',data,callbackFunc);},ClickshareUserValidation:function(type){switch(type){case 'FutureProduct':if(Crain.visitor.user){if((Crain.visitor.user.Membership.effectivegid&this.settings.clickshareFutureProduct)==this.settings.clickshareFutureProduct){return 'fullAccess';}else{return 'registered';}}else{return 'anonymous';}
break;case 'DataCenter':if(Crain.visitor.user){if((Crain.visitor.user.Membership.effectivegid&this.settings.clickshareDatacenterFull)==this.settings.clickshareDatacenterFull){return 'fullAccess';}else if(Crain.visitor.user&&(Crain.visitor.user.Membership.effectivegid&this.settings.clickshareDatacenterLimited)==this.settings.clickshareDatacenterLimited){return 'limitedAccess';}else{return 'registered';}}else{return 'anonymous';}
break;case 'whitePaper':if(Crain.visitor.user){if((Crain.visitor.user.Membership.effectivegid&this.settings.clickshareWhitePaper)==this.settings.clickshareWhitePaper){return 'whitePaperSubscriber';}else{return 'registered';}}else{return 'anonymous';}
break;default:return false;}},hasExpiredSubscription:function(subscriptionType){var defaultSubTypes,subscriptionTypes,userSubscriptions;defaultSubTypes=['standard','advantage','comp','library','child','link','siteLicense'];subscriptionTypes=(typeof subscriptionType!='undefined')?subscriptionType:defaultSubTypes;userSubscriptions=[];if(this.user!==null&&typeof this.user==='object'&&this.user.Raw){userSubscriptions=this.user.Raw.subscriptions||[];}
return(userSubscriptions).some(function(subs){if(subs.hasOwnProperty('CSSubscription')){var sub=subs.CSSubscription;var isExpired=false;var type=sub.hasOwnProperty('type')?sub.type:false;var name=sub.hasOwnProperty('name')?sub.name:false;var status=sub.hasOwnProperty('statusId')?sub.statusId:false;var paidUntilDate=sub.hasOwnProperty('paidUntilDate')?sub.paidUntilDate:false;if((subscriptionTypes==type||subscriptionTypes.indexOf(type)>=0||subscriptionTypes==name||name.indexOf(subscriptionTypes)>=0)&&status=='current'){return Date.parse(paidUntilDate)<=Date.now();}}});},hasExpiredSiteLicense:function(){var trialSiteLicenseExpired=false,siteLicenseExpired=false,siteLicenses=[];if(this.user!==null&&typeof this.user==='object'&&this.user.Raw){siteLicenses=this.user.Raw.siteLicenses||[];}
siteLicenses.forEach(function(siteLicense){if(siteLicense.hasOwnProperty('CSSiteLicense')){var license=siteLicense.CSSiteLicense,paidUntilDate=license.hasOwnProperty('paidUntilDate')?license.paidUntilDate:false;if(Date.parse(paidUntilDate)<=Date.now()){var licenseName=license.name||'';if(licenseName&&licenseName.match('trial')){trialSiteLicenseExpired=true;}
else{siteLicenseExpired=true;}}}});return[trialSiteLicenseExpired,siteLicenseExpired];},hasVerifiedEmailAddress:function(){var hasUserVerifiedEmail=false;var hasAccountFlags=this.user!==null&&typeof this.user==='object'&&typeof this.user.Raw!='undefined'&&typeof this.user.Raw.accountFlags!='undefined';var accountFlags=hasAccountFlags?this.user.Raw.accountFlags:undefined;var hasEmailValidationFlags=hasAccountFlags?accountFlags.some(function(flag){if(typeof flag.CSAccountFlag!='undefined'&&typeof flag.CSAccountFlag.flagName!='undefined'){return['activationRequiredFlag','emailFlag'].includes(flag.CSAccountFlag.flagName);}}):false;if(!hasAccountFlags||!hasEmailValidationFlags){hasUserVerifiedEmail=true;}
else{hasUserVerifiedEmail=accountFlags.some(function(flag){return(flag.CSAccountFlag.flagName==='activationRequiredFlag'&&flag.CSAccountFlag.status==='cleared')||(flag.CSAccountFlag.flagName==='emailFlag'&&flag.CSAccountFlag.status==='cleared');});}
return hasUserVerifiedEmail;},setUserObject:function(data){if(Crain.visitor!==undefined){Crain.visitor.user=this.user=data;}
if(typeof this.userID!=='undefined'&&this.userID!==null&&this.userID!==undefined){if(Crain.visitor!==undefined){Crain.visitor.userID=this.userID;}
var siteLicenseExpirations=this.hasExpiredSiteLicense();this.hasExpiredLicenseTrial=siteLicenseExpirations[0];this.hasExpiredLicense=siteLicenseExpirations[1];this.hasVerifiedEmail=this.hasVerifiedEmailAddress();this.hasExpiredSub=this.hasExpiredSubscription()?true:this.hasExpiredLicense;this.hasExpiredTrial=this.hasExpiredSubscription('trial')?true:this.hasExpiredLicenseTrial;if(this.userExpCookie==undefined||this.userExpCookie==null){var expiry=Date.now()+(+this.settings.userExpire*60*1000);var exp_value=this.settings.userExpire==-1?'session':expiry;var user_value=(data==undefined||!(typeof data==='object'&&data!=null))?data:JSON.stringify($.extend({},data,{csumod:this.csuCookie}));if(typeof data==='object'&&data!=null){this.userCookie=user_value;if(this.settings.userExpire==-1){if(window.sessionStorage){sessionStorage.setItem(this.settings.cookieName,user_value);}
else{$.cookie(this.settings.cookieName,user_value,{path:'/',domain:this.settings.cookieDomain});}}
else{if(window.localStorage){localStorage.setItem(this.settings.cookieName,user_value);}
else{$.cookie(this.settings.cookieName,user_value,{expires:new Date(this.permCookie),path:'/',domain:this.settings.cookieDomain});}}
if(this.userID!==null&&this.userID!==undefined){if(this.settings.userExpire==-1){$.cookie(this.settings.cookieExpName,exp_value,{path:'/',domain:this.settings.cookieDomain});}
else{$.cookie(this.settings.cookieExpName,exp_value,{expires:new Date(expiry),path:'/',domain:this.settings.cookieDomain});}}}}}
$(document).ready(function(){$(window).trigger('user-object-created');window.dispatchEvent(new CustomEvent('user-object-created-profile'));if(typeof drupalSettings.crain_object!=='undefined'&&drupalSettings.crain_object.visitor.isLoggedIn){$('.menu--subscribe ul.menu li a').each(function(){if($(this).text().toLowerCase()=='login'){$(this).text('Logout');$(this).addClass('logged-in');var href=$(this).attr('href');href=href.replace('forceLogin','logout');$(this).attr('href',href);}
if($(this).text()=='INGRESE'){$(this).text('CERRAR SESIN');$(this).addClass('logged-in');var href=$(this).attr('href');href=href.replace('forceLogin','logout');$(this).attr('href',href);}
if($(this).hasClass('replace-name')&&drupalSettings.crain_object.visitor.user){$(this).text(drupalSettings.crain_object.visitor.user.Profile.nameFirst);var href=$(this).attr('href');href=href.replace('reg','myhome');href=href.replace('addAccountMetered','myhome');href=href.replace('addAccountShort','myhome');href=href.replace('addAccountFreePromote','myhome');$(this).attr('href',href);}});}});},updateSettings:function(settings){if(typeof settings==='object'){for(var prop in this.settings){if(typeof settings[prop]!=='undefined'){this.settings[prop]=settings[prop];}}
for(var prop in settings){if(typeof this.settings[prop]==='undefined'){this.settings[prop]=settings[prop];}}}},};$(window).on('user-object-created.redirect_anonymous_user',function(){if(User.userID==undefined){var loginLink='';var currentURL=window.location.href;var oldURL=document.createElement('a');oldURL.href=currentURL;var pathName=oldURL.pathname.replace(/^\//,'').replace(/\/$/,'');if(pathName==='my-stuff'||pathName==='my-newsletters'){loginLink=$('.subscribe-navbar ul.menu a[data-omnilink="login-link"]').attr('href');if(loginLink!==undefined&&loginLink){window.location.replace(loginLink);}}
else if(pathName==='node/add/job'){var clickshareBase='';var testHosts=["stage.","local.","dev."];var currentHost=window.location.hostname;var isNotProd=testHosts.some(function(needle){return currentHost.indexOf(needle)!==-1;});if(isNotProd){clickshareBase=drupalSettings.user.clickshareBaseStage;}
else{clickshareBase=drupalSettings.user.clickshareBaseProd;}
var redirectLink=clickshareBase+'/forceLogin.do?CSAuthReq=1&CSTargetURL='+currentURL;window.location.replace(redirectLink);}}});})(jQuery,Drupal);(function($){User=new User();Drupal.behaviors.user={attach:function(context,settings){User.init(settings.user);}};})(jQuery);;var runtime=(function(exports){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});return obj[key];}
try{define({},"");}catch(err){define=function(obj,key,value){return obj[key]=value;};}
function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator;}
exports.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}
var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}
function GeneratorFunction(){}
function GeneratorFunctionPrototype(){}
var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this;};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype;}
var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction");function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}
exports.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false;};exports.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype);}else{genFun.__proto__=GeneratorFunctionPrototype;define(genFun,toStringTagSymbol,"GeneratorFunction");}
genFun.prototype=Object.create(Gp);return genFun;};exports.awrap=function(arg){return{__await:arg};};function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg);}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);});}
return PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}}
var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}
return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}
this._invoke=enqueue;}
defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this;};exports.AsyncIterator=AsyncIterator;exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){if(PromiseImpl===void 0)PromiseImpl=Promise;var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running");}
if(state===GenStateCompleted){if(method==="throw"){throw arg;}
return doneResult();}
context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}
if(context.method==="next"){context.sent=context._sent=context.arg;}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg;}
context.dispatchException(context.arg);}else if(context.method==="return"){context.abrupt("return",context.arg);}
state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue;}
return{value:record.arg,done:context.done};}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg;}}};}
function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator["return"]){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel;}}
context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method");}
return ContinueSentinel;}
var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel;}
var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel;}
if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined;}}else{return info;}
context.delegate=null;return ContinueSentinel;}
defineIteratorMethods(Gp);define(Gp,toStringTagSymbol,"Generator");Gp[iteratorSymbol]=function(){return this;};Gp.toString=function(){return "[object Generator]";};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1];}
if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3];}
this.tryEntries.push(entry);}
function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record;}
function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true);}
exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}
keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next;}}
next.done=true;return next;};};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable);}
if(typeof iterable.next==="function"){return iterable;}
if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next;}}
next.value=undefined;next.done=true;return next;};return next.next=next;}}
return{next:doneResult};}
exports.values=values;function doneResult(){return{value:undefined,done:true};}
Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined;}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg;}
return this.rval;},dispatchException:function(exception){if(this.done){throw exception;}
var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined;}
return!!caught;}
for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end");}
if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else{throw new Error("try statement without catch or finally");}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}
if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null;}
var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel;}
return this.complete(record);},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg;}
if(record.type==="break"||record.type==="continue"){this.next=record.arg;}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end";}else if(record.type==="normal"&&afterLoc){this.next=afterLoc;}
return ContinueSentinel;},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel;}}},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry);}
return thrown;}}
throw new Error("illegal catch attempt");},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined;}
return ContinueSentinel;}};return exports;}(typeof module==="object"?module.exports:{}));try{regeneratorRuntime=runtime;}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime);};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
(function($,Drupal,drupalSettings,themeBreakpoints){'use strict';var Porte=function(){function Porte(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$settings=_ref.settings,settings=_ref$settings===void 0?{cookieDomain:location.hostname,cookieName:'porte',isPorteOpen:false,paywalls:[],miniPaywalls:[],hostIps:[],customTemplates:{},showRemainingAll:true,showRemainingLast:true}:_ref$settings,_ref$accessControl=_ref.accessControl,accessControl=_ref$accessControl===void 0?null:_ref$accessControl,_ref$allowedLimit=_ref.allowedLimit,allowedLimit=_ref$allowedLimit===void 0?0:_ref$allowedLimit,_ref$articleObj=_ref.articleObj,articleObj=_ref$articleObj===void 0?{}:_ref$articleObj,_ref$articleId=_ref.articleId,articleId=_ref$articleId===void 0?0:_ref$articleId,_ref$clickshareGID=_ref.clickshareGID,clickshareGID=_ref$clickshareGID===void 0?null:_ref$clickshareGID,_ref$clickshareProduc=_ref.clickshareProduct,clickshareProduct=_ref$clickshareProduc===void 0?null:_ref$clickshareProduc,_ref$hasIPAccess=_ref.hasIPAccess,hasIPAccess=_ref$hasIPAccess===void 0?false:_ref$hasIPAccess,_ref$isFirstView=_ref.isFirstView,isFirstView=_ref$isFirstView===void 0?false:_ref$isFirstView,_ref$isPaywallDisplay=_ref.isPaywallDisplayed,isPaywallDisplayed=_ref$isPaywallDisplay===void 0?{anonymous:false,registered:false}:_ref$isPaywallDisplay,_ref$isPorteOpen=_ref.isPorteOpen,isPorteOpen=_ref$isPorteOpen===void 0?false:_ref$isPorteOpen,_ref$limitReached=_ref.limitReached,limitReached=_ref$limitReached===void 0?false:_ref$limitReached,_ref$meterName=_ref.meterName,meterName=_ref$meterName===void 0?null:_ref$meterName,_ref$readCount=_ref.readCount,readCount=_ref$readCount===void 0?null:_ref$readCount,_ref$settingsImported=_ref.settingsImported,settingsImported=_ref$settingsImported===void 0?false:_ref$settingsImported,_ref$user=_ref.user,user=_ref$user===void 0?null:_ref$user,_ref$userGID=_ref.userGID,userGID=_ref$userGID===void 0?null:_ref$userGID,_ref$userLoggedIn=_ref.userLoggedIn,userLoggedIn=_ref$userLoggedIn===void 0?false:_ref$userLoggedIn,_ref$userTier=_ref.userTier,userTier=_ref$userTier===void 0?'anonymous':_ref$userTier,_ref$viewedList=_ref.viewedList,viewedList=_ref$viewedList===void 0?null:_ref$viewedList,_ref$isCheckSingleIte=_ref.isCheckSingleItemPurchase,isCheckSingleItemPurchase=_ref$isCheckSingleIte===void 0?false:_ref$isCheckSingleIte,_ref$isEmailExchange=_ref.isEmailExchange,isEmailExchange=_ref$isEmailExchange===void 0?false:_ref$isEmailExchange,_ref$isCAMW=_ref.isCAMW,isCAMW=_ref$isCAMW===void 0?false:_ref$isCAMW;_classCallCheck(this,Porte);this.settings=settings;this.accessControl=accessControl;this.allowedLimit=allowedLimit;this.articleId=articleId;this.articleObj=articleObj;this.clickshareGID=clickshareGID;this.clickshareProduct=clickshareProduct;this.hasIPAccess=hasIPAccess;this.isFirstView=isFirstView;this.isPaywallDisplayed=isPaywallDisplayed;this.isPorteOpen=isPorteOpen;this.limitReached=limitReached;this.meterName=meterName;this.readCount=readCount;this.settingsImported=settingsImported;this.user=user;this.userGID=userGID;this.userLoggedIn=userLoggedIn;this.userTier=userTier;this.viewedList=viewedList;this.isCheckSingleItemPurchase=isCheckSingleItemPurchase;this.isEmailExchange=isEmailExchange;this.isCAMW=drupalSettings.site_code==='camw'?true:isCAMW;}
_createClass(Porte,[{key:"init",value:function init(article,user,context,settings){var _this2=this;var _this=this;$(window).on('crain-paywall-not-show.analytics',function(){if(_this.settings.miniPaywalls.length){$(window).on('crain-minize-paywall-finished.analytics',function(){_this.fireAnalyticsEvents(2);$(window).off('crain-minize-paywall-finished.analytics');});}else{_this.fireAnalyticsEvents();}
$(window).off('crain-paywall-not-show.analytics');});$(window).on('crain-paywall-not-show.miniable_paywall',function(){_this.showMiniablePaywall();$(window).trigger('crain-minize-paywall-finished');$(window).off('crain-paywall-not-show.miniable_paywall');});if(typeof article.AccessControl=='undefined'||article.AccessControl===null){$(window).trigger('crain-paywall-not-show');return;}
if(article.AccessControl.aid&&+article.AccessControl.single_item_purchase===1){this.isCheckSingleItemPurchase=true;}
if(article.AccessControl.clickshare_gid&&+article.AccessControl.emailExchange===1){this.isEmailExchange=true;}
this.setUser(user);this.articleObj=article;this.articleId=_typeof(article)==='object'?article.NodeID:this.articleId;this.importSettings();this.viewedList=this.getViewedList();this.isFirstView=!this.hasBeenViewed();this.accessControl=this.articleObj.AccessControl.name||'';this.clickshareGID=this.articleObj.AccessControl.clickshare_gid||null;this.clickshareProduct=this.articleObj.AccessControl.product_name||'';if(this.isPorteOpen){$(window).trigger('crain-paywall-not-show');return;}
if(this.hasPorteExclusion()){$(window).trigger('crain-paywall-not-show');return;}
$(window).on('ip-check-done.ip_access',function(){$(window).off('ip-check-done.ip_access');if($.inArray(_this2.userTier,['anonymous','registered'])===-1||_this2.hasIPAccess){$.removeCookie(_this2.settings.cookieName,{path:'/',domain:_this2.settings.cookieDomain});$(window).trigger('crain-paywall-not-show');return;}
_this2.getMeterFromClickshare();});if(!this.isCAMW&&$.inArray(this.userTier,['anonymous','registered'])>-1){this.userHasIPAccess();}else{$(window).trigger('ip-check-done');}}},{key:"importSettings",value:function importSettings(){if(!this.settingsImported){this.settings=Object.assign({},this.settings,drupalSettings.porte);this.settingsImported=true;}}},{key:"getMeterFromClickshare",value:function getMeterFromClickshare(){var _this3=this;var user_object_exists=(typeof User==="undefined"?"undefined":_typeof(User))=='object';var api_settings={CSCheckUserIP:true,AID:window.location.pathname.replace(/\/article\/(\d+?)\/(.*?)\/(\d+?)\/.*/ig,'$1/$2/$3'),CSProduct:this.clickshareProduct};if($.cookie('CSBrowser')!==undefined){api_settings.CSBrowserId=$.cookie('CSBrowser');}
if(this.checkUserValidations()&&this.hasOwnPropertyOrIn('Profile',this.user)&&this.user.Profile&&typeof this.user.Profile.userId!='undefined'){api_settings.CSUserId=this.user.Profile.userId;}
$(window).on('user-meter-obtained.porte-meter',function(){_this3.allowedLimit=_this3.getAllowedViewLimit();_this3.readCount=_this3.getViewedCount();if(User.meter.errorCode!=='0'||User.hasVerifiedEmail===false){if(typeof User.meter.postReg!='undefined'){_this3.meterName=User.meter.postReg.meterName;}else if(typeof User.meter.preReg!='undefined'){_this3.meterName=User.meter.preReg.meterName;}
_this3.isPorteOpen=_this3.getPorteState();_this3.setPorte();}else{_this3.addToViewedList();$(window).trigger('crain-paywall-not-show');}});if(!this.isCAMW&&this.isFirstView){if(user_object_exists&&typeof User.callApiUserProfile=='function'){User.callApiUserProfile('get_user_meter',api_settings,User._setMeterCallback);}}else{$(window).trigger('user-meter-obtained');}}},{key:"getPorteState",value:function getPorteState(){if(this.settings.isPorteOpen){return true;}
if(typeof User!=='undefined'&&typeof User.settings!=='undefined'&&User.settings.isCMSUser){return true;}
if(this.settings.pageStatus!==null){return true;}
this.settings.paywalls=this.settings.paywalls.filter(this.filterBasedCustomerVariables.bind(this));if(this.settings.paywalls.length===0){return true;}
if(this.isMeteredContent()&&$.inArray(this.userTier,['anonymous','registered'])>=0){return false;}else{return this.hasAccessToContent();}}},{key:"setPorte",value:function setPorte(){if(this.isPorteOpen){$(window).trigger('crain-paywall-not-show');return;}
if(this.isMeteredContent()){if(this.readCount>=this.allowedLimit&&this.isFirstView){this.limitReached=true;}}
this.displayPorte();}},{key:"removePara",value:function removePara(hasInlineSelector){var pElements='';if(Crain.content.NodeType&&Crain.content.NodeType=='work'){pElements=$('.block-crain-aac-social-media-share + *').find('p');}else{pElements=$('.article-paragraph *').find('p');}
pElements=pElements.filter(function(v,k){return $(k).parents('#paywall-wrapper').length==0;});if(pElements.length>0){if(hasInlineSelector){var spliceCounter=0;$.each(pElements,function(key,value){if($(value).next('.inline-paywall-transitions').length==1){spliceCounter=key+1;return spliceCounter;}});pElements.parents('.field__item').addClass('content-post-paywall');pElements.splice(0,spliceCounter);}else{pElements.splice(0,1);}
pElements.remove();}}},{key:"showPaywallEventAdjustTop",value:function showPaywallEventAdjustTop(templateData){if(this.settings.paywalls.length){var inlineTemplateCssSelector=templateData.inlineTemplateCssSelector?templateData.inlineTemplateCssSelector:null;if(inlineTemplateCssSelector!=null&&$(inlineTemplateCssSelector).length!=0){this.removePara(true);if(Crain.content.NodeType&&Crain.content.NodeType=='work'){$('.block-region-content-left .inline-paywall-transitions').nextAll().remove();}else{$(".article-paragraph .field__item:not('.content-post-paywall')").remove();}
$('.has-paywall-wrapper').nextAll("div:not('.inline-paywall-transitions')").remove();}else{this.removePara(false);var paragraphItems='';if(Crain.content.NodeType&&Crain.content.NodeType=='work'){paragraphItems=$('.aac_work_field_body .editor-description__wrapper > .field__item');}else{paragraphItems=$('.article-paragraph > .field__item');}
if(paragraphItems&&paragraphItems.length>0){paragraphItems=paragraphItems.filter(function(v,k){return $(k).find('p').length===0&&$(k).nextAll().find('p').length===0;});paragraphItems.remove();if(Crain.content.NodeType&&Crain.content.NodeType=='work'){$('.aac_work_field_body .editor-description__wrapper > .field__item #paywall-wrapper').nextAll().remove();}else{$('.article-paragraph > .field__item #paywall-wrapper').nextAll().remove();}}}
var displayFormat=this.settings.paywalls[0].displayFormat;switch(displayFormat){case 'interstitial':$(window).trigger('crain-paywall-show');break;case 'inline':case 'emailExchange':$(window).trigger('crain-paywall-in-place-show');break;default:$(window).trigger('paywall-show-as-inline');if(drupalSettings.site_code=='can'){$('.porte-modal-porte .subscriber-register-wrapper .subscriber').insertBefore($('.porte-modal-porte .subscriber-register-wrapper .register')).css('margin-right','1em');}
break;}
this.fireAnalyticsEvents(1);var resetTopSize=function resetTopSize(){var topRegion=$('[data-block-plugin-id="system_breadcrumb_block"]');if(topRegion.length){var top=parseFloat(topRegion.css('height'))+topRegion.offset().top;$('.porte-modal-obstruct').css({'top':top+'px'});}};resetTopSize();$(window).resize(resetTopSize);if(window.googletag){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener('slotRenderEnded',resetTopSize,false);});}}}},{key:"decideWhetherShow2ndTemplate",value:function decideWhetherShow2ndTemplate(){if(this.settings.paywalls.length){var _this$settings$paywal=this.settings.paywalls[0],id=_this$settings$paywal.id,secondTemplate=_this$settings$paywal.secondTemplate,secondShowArticleCount=_this$settings$paywal.secondShowArticleCount,secondShowTime=_this$settings$paywal.secondShowTime;if(secondTemplate&&+secondShowArticleCount&&+secondShowTime&&this.articleId){var key="".concat(this.settings.cookieName,"_crain_paywalls_secondTemplate");var value={};var cookie=null;if(window.localStorage){cookie=localStorage.getItem(key)||cookie;}else{cookie=$.cookie(key)||cookie;}
try{value=JSON.parse(cookie)||value;}catch(e){}
var paywall2ndTemplate={};var paywall2ndTemplateArticles=[];var dateNow=new Date();var paywall2ndTemplateExpired=dateNow.getTime();if(value&&Object.keys(value).length!==0&&Object.getPrototypeOf(value)===Object.prototype){paywall2ndTemplate=value[id]||paywall2ndTemplate;if(Array.isArray(paywall2ndTemplate.articles)&&typeof paywall2ndTemplate.expired==='number'){paywall2ndTemplateArticles=paywall2ndTemplate.articles||[];paywall2ndTemplateExpired=+paywall2ndTemplate.expired;}else{dateNow.setDate(dateNow.getDate()+ +secondShowTime);paywall2ndTemplateExpired=dateNow.getTime();}
if(dateNow.getTime()>paywall2ndTemplateExpired){paywall2ndTemplateArticles=[];dateNow.setDate(dateNow.getDate()+ +secondShowTime);paywall2ndTemplateExpired=dateNow.getTime();}}else{dateNow.setDate(dateNow.getDate()+ +secondShowTime);paywall2ndTemplateExpired=dateNow.getTime();}
if(paywall2ndTemplateArticles.indexOf(this.articleId)===-1){var paywall2ndTemplateArticleCount=paywall2ndTemplateArticles.length;if(paywall2ndTemplateArticleCount>=secondShowArticleCount){this.settings.paywalls[0].template=secondTemplate;}else{paywall2ndTemplateArticles.push(this.articleId);}}
paywall2ndTemplate={articles:paywall2ndTemplateArticles,expired:paywall2ndTemplateExpired};value[id]=paywall2ndTemplate;value=JSON.stringify(value);if(window.localStorage){localStorage.setItem(key,value);}else{$.cookie(key,value,{expires:365*20,path:'/',domain:this.settings.cookieDomain});}}}}},{key:"displayPorte",value:function displayPorte(){if(this.isMeteredContent()){var dontShow=this.readCount<this.allowedLimit&&!this.settings.showRemainingAll;if(dontShow){$(window).trigger('crain-paywall-not-show');return;}
this.afterSinglePurchaseCheckCallback(this.meterContentMessageCallback);return;}
this.afterSinglePurchaseCheckCallback(this.accessDeniedMessageCallback);}},{key:"afterSinglePurchaseCheckCallback",value:function afterSinglePurchaseCheckCallback(callback){var _this=this;$(window).on('crain-paywall-purchase-checked.display',function(){$(window).off('crain-paywall-purchase-checked.display');if(_this.hasSinglePurchaseAccessToContent){$(window).trigger('crain-paywall-not-show');return;}
callback.bind(_this)();});if(!this.isCheckSingleItemPurchase){$(window).trigger('crain-paywall-purchase-checked');}else{this.hasSinglePurchased();}}},{key:"accessDeniedMessageCallback",value:function accessDeniedMessageCallback(){this.decideWhetherShow2ndTemplate();this.showAccessDeniedMessage();}},{key:"meterContentMessageCallback",value:function meterContentMessageCallback(){var showRemaining=this.settings.showRemainingLast||this.settings.showRemainingAll;var showOnAll=this.readCount<=this.allowedLimit&&this.settings.showRemainingAll;var showOnLast=this.readCount>=this.allowedLimit&&showRemaining&&!this.limitReached;if(this.limitReached){this.decideWhetherShow2ndTemplate();this.showExpiredMessage();return;}
if((showOnLast||showOnAll)&&this.isFirstView){this.decideWhetherShow2ndTemplate();this.showReadsLeftMessage();this.attachPorteEvents();return;}
$(window).trigger('crain-paywall-not-show');}},{key:"hasSinglePurchased",value:function(){var _hasSinglePurchased=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.isCheckSingleItemPurchase&&this.articleObj.AccessControl.aid)){_context.next=11;break;}
this.hasSinglePurchaseAccessToContent=false;_context.prev=2;_this=this;_context.next=6;return User.callApiUserPurchaseProduct(null,this.articleObj.AccessControl.aid,function(json){_this.hasSinglePurchaseAccessToContent=json.has_purchased||false;$(window).trigger('crain-paywall-purchase-checked');});case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);$(window).trigger('crain-paywall-purchase-checked');case 11:case "end":return _context.stop();}}},_callee,this,[[2,8]]);}));function hasSinglePurchased(){return _hasSinglePurchased.apply(this,arguments);}
return hasSinglePurchased;}()},{key:"setUser",value:function setUser(user){this.user=user||this.user;this.userTier=this.checkUserValidations()&&typeof this.user.Membership!=='undefined'?this.user.Membership.tier:this.userTier;this.userGID=this.checkUserValidations()&&typeof this.user.Membership!=='undefined'?this.user.Membership.effectivegid:this.userGID;this.userLoggedIn=this.user!==undefined&&this.user!==null;}},{key:"addToViewedList",value:function addToViewedList(){var _value=this.viewedList!==null&&this.viewedList!==undefined?this.viewedList+','+this.articleId:this.articleId;if(!this.isFirstView){return;}
this.writeCookie(this.settings.cookieName,_value);}},{key:"checkUserPermissions",value:function checkUserPermissions(callback){var _this4=this;if(!this.isCAMW&&(typeof User==="undefined"?"undefined":_typeof(User))=='object'&&typeof User.callApiUserProfile=='function'){User.callApiUserProfile('authenticate_user',{CSUserId:User.userID});}
$(window).on('user-object-created.permissions',function(){_this4.setUser(Crain.visitor.user);if(typeof _this4[callback]=='function'){_this4[callback]();}
$(window).off('user-object-created.permissions');});}},{key:"hasOwnPropertyOrIn",value:function hasOwnPropertyOrIn(key,obj){return _typeof(obj)==='object'&&obj!==null&&(obj.hasOwnProperty(key)||"".concat(key)in obj);}},{key:"userHasIPAccess",value:function userHasIPAccess(){var _this5=this;var cookieName="".concat(this.settings.cookieName,"_ipa");var _cookie=$.cookie(cookieName);var _value=_cookie!==null&&_cookie!==undefined?JSON.parse(_cookie):{};var _modifiedValue={};var userID=null;this.hasIPAccess=false;if($.cookie('CSNoFreeAccess')!==undefined){$(window).trigger('ip-check-done');return;}
if((typeof User==="undefined"?"undefined":_typeof(User))=='object'){if(this.hasOwnPropertyOrIn('userID',User)&&User.userID){userID=User.userID;}
var tempID=this.getUserIpAsIDFromCookie(userID);if(tempID){userID=tempID;}
if(userID&&this.hasOwnPropertyOrIn(userID,_value)){_modifiedValue=_value[userID];}}
if(Object.keys(_modifiedValue).length>0){if(this.hasOwnPropertyOrIn(this.clickshareProduct,_modifiedValue)){if(_modifiedValue[this.clickshareProduct]===true){this.hasIPAccess=true;}
$(window).trigger('ip-check-done');return;}}else{$.removeCookie(cookieName,{path:'/',domain:this.settings.cookieDomain});_value={};}
if(!this.isCAMW&&(typeof User==="undefined"?"undefined":_typeof(User))=='object'&&typeof User.callApiUserProfile=='function'&&!this.hasOwnPropertyOrIn(this.clickshareProduct,_value)){User.callApiUserProfile('authenticate_user',{CheckUserIP:true,CSProduct:this.clickshareProduct});}
$(window).on('user-object-created.ip_access',function(){_this5.setUser(Crain.visitor.user);_this5.hasIPAccess=_this5.hasAccessToContent();if(Crain.visitor.userID){userID=Crain.visitor.userID;}
var tempID=_this5.getUserIpAsIDFromCookie(userID);if(tempID){userID=tempID;}
if(userID){_value[userID]=_value[userID]||{};_value[userID][_this5.clickshareProduct]=_this5.hasIPAccess;}
if(Object.keys(_value).length){var today=new Date();var expire_date=new Date(today.getFullYear(),today.getMonth(),today.getDate()+1);$.cookie(cookieName,JSON.stringify(_value),{expires:expire_date,path:'/',domain:_this5.settings.cookieDomain});}
$(window).off('user-object-created.ip_access');$(window).trigger('ip-check-done');});}},{key:"getUserIpAsIDFromCookie",value:function getUserIpAsIDFromCookie(userID){if(!userID&&this.hasOwnPropertyOrIn('settings',User)&&User.settings&&this.hasOwnPropertyOrIn('cookieName',User.settings)&&User.settings.cookieName){var remoteIp=$.cookie("".concat(User.settings.cookieName,"_remote"));if(remoteIp){return remoteIp;}}}},{key:"callbackAccessDenied",value:function callbackAccessDenied(){if(!this.hasAccessToContent()){this.showAccessDeniedMessage();}}},{key:"callbackExpiredMeter",value:function callbackExpiredMeter(){if(this.limitReached&&!this.hasAccessToContent()){this.showExpiredMessage();}}},{key:"getAllowedViewLimit",value:function getAllowedViewLimit(){var _allowedLimit;if((typeof User==="undefined"?"undefined":_typeof(User))=='object'&&this.hasOwnPropertyOrIn('meter',User)&&this.hasOwnPropertyOrIn('preReg',User.meter)){_allowedLimit=User.meter.preReg.initialAllowedAccessCount;}
if((typeof User==="undefined"?"undefined":_typeof(User))=='object'&&this.hasOwnPropertyOrIn('meter',User)&&this.hasOwnPropertyOrIn('postReg',User.meter)){_allowedLimit=User.meter.postReg.initialAllowedAccessCount;}
return+_allowedLimit;}},{key:"getViewedCount",value:function getViewedCount(){var _this6=this;var _viewedCount=0;var _meter;var _filtered;if((typeof User==="undefined"?"undefined":_typeof(User))=='object'&&this.hasOwnPropertyOrIn('meter',User)&&this.hasOwnPropertyOrIn('CSPerm',User.meter)){_meter=User.meter.CSPerm.split('$');}
if((typeof User==="undefined"?"undefined":_typeof(User))=='object'&&this.hasOwnPropertyOrIn('meter',User)&&this.hasOwnPropertyOrIn('CSPermReg',User.meter)){_meter=User.meter.CSPermReg.split('$');}
if(_meter){_filtered=_meter.filter(function(v){return v.match(_this6.articleObj.AccessControl.product_name)&&v.match('_used');});}
if(_filtered!==undefined&&_filtered.length!==0&&_typeof(_filtered)==='object'){_filtered=_filtered.join();_viewedCount=_filtered.split('|').pop();}
return+_viewedCount;}},{key:"getViewedList",value:function getViewedList(){return $.cookie(this.settings.cookieName);}},{key:"isMeteredContent",value:function isMeteredContent(){return /meter/.test(this.accessControl.toLowerCase());}},{key:"hasAccessToContent",value:function hasAccessToContent(){if(this.isCAMW){if(!this.clickshareGID){return true;}
if(this.clickshareGID!=null){if(this.checkPropertiesExisted(['User','user','roles'])){return User.user.roles.indexOf(this.clickshareGID)>-1;}}
return false;}else{if(this.userGID==null&&this.clickshareGID!=null||User.hasVerifiedEmail===false){return false;}
return(+this.userGID&+this.clickshareGID)==+this.clickshareGID;}}},{key:"hasBeenViewed",value:function hasBeenViewed(){return this.viewedList!==undefined&&this.viewedList!==null?this.viewedList.split(',').indexOf(this.articleId.toString())>=0:false;}},{key:"checkUserValidations",value:function checkUserValidations(){return this.user!==undefined&&this.user!==null&&_typeof(this.user)==='object';}},{key:"hasPorteExclusion",value:function hasPorteExclusion(){var _this7=this;if(this.excludeAdminPage()){return true;}
this.settings.paywalls=this.excludeNodeType(this.settings.paywalls);if(this.settings.paywalls===0){return true;}
if(this.excludeSponsoredContent()){return true;}
if(this.settings.globalExIncludes&&_typeof(this.settings.globalExIncludes)==='object'&&Object.keys(this.settings.globalExIncludes).length>0){this.settings.globalExIncludes.id='global';var paywalls=[this.settings.globalExIncludes];paywalls=paywalls.filter(function(paywall){var includesExcludesOp=paywall.includesExcludesOp;if(includesExcludesOp){return _this7.filterBaseOnReferrer(paywall)&&_this7.filterBasedOnURLPattern(paywall)&&_this7.filterBasedOnUserAgent(paywall)&&_this7.filterBasedOnDevices(paywall)&&_this7.filterBasedHostDomainIp(paywall)&&_this7.filterBasedOnNodeTerms(paywall);}else{return _this7.filterBaseOnReferrer(paywall)||_this7.filterBasedOnURLPattern(paywall)||_this7.filterBasedOnUserAgent(paywall)||_this7.filterBasedOnDevices(paywall)||_this7.filterBasedHostDomainIp(paywall)||_this7.filterBasedOnNodeTerms(paywall);}});if(paywalls.length===0){return true;}}
this.settings.paywalls=this.settings.paywalls.filter(function(paywall){var includesExcludesOp=paywall.includesExcludesOp;if(includesExcludesOp){return _this7.filterBaseOnReferrer(paywall)&&_this7.filterBasedOnURLPattern(paywall)&&_this7.filterBasedOnUserAgent(paywall)&&_this7.filterBasedOnDevices(paywall)&&_this7.filterBasedHostDomainIp(paywall)&&_this7.filterBasedOnNodeTerms(paywall);}else{return _this7.filterBaseOnReferrer(paywall)||_this7.filterBasedOnURLPattern(paywall)||_this7.filterBasedOnUserAgent(paywall)||_this7.filterBasedOnDevices(paywall)||_this7.filterBasedHostDomainIp(paywall)||_this7.filterBasedOnNodeTerms(paywall);}});if(this.settings.paywalls.length===0){return true;}
this.settings.paywalls=this.settings.paywalls.filter(this.filterBasedClientStorages.bind(this));var hasExclusionOverride=$(document).triggerHandler('crain_paywall_has_porte_exclusion_override',{porte:this});if(typeof hasExclusionOverride!=='undefined'){return hasExclusionOverride;}
return false;}},{key:"showMiniablePaywall",value:function showMiniablePaywall(){var _this8=this;this.settings.miniPaywalls=this.excludeNodeType(this.settings.miniPaywalls);this.settings.miniPaywalls=this.settings.miniPaywalls.filter(function(paywall){var includesExcludesOp=paywall.includesExcludesOp;if(includesExcludesOp){return _this8.filterBaseOnReferrer(paywall)&&_this8.filterBasedOnURLPattern(paywall)&&_this8.filterBasedOnUserAgent(paywall)&&_this8.filterBasedOnDevices(paywall)&&_this8.filterBasedHostDomainIp(paywall)&&_this8.filterBasedOnNodeTerms(paywall);}else{return _this8.filterBaseOnReferrer(paywall)||_this8.filterBasedOnURLPattern(paywall)||_this8.filterBasedOnUserAgent(paywall)||_this8.filterBasedOnDevices(paywall)||_this8.filterBasedHostDomainIp(paywall)||_this8.filterBasedOnNodeTerms(paywall);}});this.settings.paywalls=this.settings.paywalls.filter(this.filterBasedClientStorages.bind(this));this.settings.miniPaywalls=this.settings.miniPaywalls.filter(this.filterBasedCustomerVariables.bind(this));if(this.settings.miniPaywalls.length){if(this.isEmailExchange&&this.settings.miniPaywalls.length>1){for(var index in this.settings.miniPaywalls){var paywall=this.settings.miniPaywalls[index];var _displayFormat=paywall.displayFormat;if(_displayFormat==='emailExchange'){this.settings.miniPaywalls[0]=paywall;break;}}}
var _this$settings$miniPa=this.settings.miniPaywalls[0],displayFormat=_this$settings$miniPa.displayFormat,templateSettings=_this$settings$miniPa.templateSettings,template=_this$settings$miniPa.template;var $markup=$("[data-template=\"".concat(displayFormat,"-pw-acd\"]")).html();if($markup){var _template=_.template($markup);$('body').append(_template({content:templateSettings[template],clickshareURL:/stage\./.test(location.href)?User.settings.clickshareBaseStage:User.settings.clickshareBaseProd,is_logged_in:this.userLoggedIn,event_name:this.getEventName(),isCheckSingleItemPurchase:this.isCheckSingleItemPurchase}));$('.minize-action').on('click',function(e){e.preventDefault();e.stopImmediatePropagation();$(this).closest('.porte-modal-porte').toggleClass('minize');if(this.getAttribute('data-omnilink')=='maximize'){this.setAttribute('data-omnilink','minimize');}else{this.setAttribute('data-omnilink','maximize');}});}}else{$(window).trigger('crain-minize-paywall-not-show');}}},{key:"excludeAccessControlNone",value:function excludeAccessControlNone(){return this.accessControl.toLowerCase()==='none';}},{key:"excludeSponsoredContent",value:function excludeSponsoredContent(){return /sponsored/.test(this.accessControl.toLowerCase());}},{key:"excludeAdminPage",value:function excludeAdminPage(){return this.articleObj.isAdminPage;}},{key:"excludeNodeType",value:function excludeNodeType(paywalls){var content=this.articleObj;var node_type=content.node_type;if(node_type&&paywalls.length){paywalls=paywalls.filter(function(paywall){var contentTypes=paywall.contentTypes;return contentTypes.length==0||contentTypes.indexOf(node_type)>-1;});}
return paywalls;}},{key:"filterBaseOnReferrer",value:function filterBaseOnReferrer(paywall){var _document=document,referrer=_document.referrer;var referrers=paywall.referrers,id=paywall.id;return this.includePaywall(referrers,referrer,id,'referrers',this.includeMatch);}},{key:"filterBasedOnURLPattern",value:function filterBasedOnURLPattern(paywall){var href=window.location.href;var Urlpatterns=paywall.Urlpatterns,id=paywall.id;return this.includePaywall(Urlpatterns,href,id,'Urlpatterns',this.includeMatch);}},{key:"filterBasedOnUserAgent",value:function filterBasedOnUserAgent(paywall){var userAgent=User.settings.userAgent;if(!userAgent){userAgent=navigator.userAgent;}
var userAgents=paywall.userAgents,id=paywall.id;return this.includePaywall(userAgents,userAgent,id,'userAgents',this.includeMatch);}},{key:"filterBasedOnNodeTerms",value:function filterBasedOnNodeTerms(paywall){var TaxonomyTerms=Crain.content.TaxonomyTerms;var taxonomies=paywall.taxonomies,id=paywall.id;if(taxonomies.length){return TaxonomyTerms.length?this.includeJoins(taxonomies,TaxonomyTerms.map(function(value){return value.tid;}),id,'taxonomies'):false;}else{return true;}}},{key:"filterBasedOnDevices",value:function filterBasedOnDevices(paywall){var _themeBreakpoints$get=themeBreakpoints.getCurrentBreakpoint(),name=_themeBreakpoints$get.name;var devices=paywall.devices,id=paywall.id;if(devices.length){return this.includeJoins(devices,[name],id,'devices');}else{return true;}}},{key:"filterBasedHostDomainIp",value:function filterBasedHostDomainIp(paywall){var hostIps=this.settings.hostIps;var hostDomainIp=paywall.hostDomainIp,id=paywall.id;return this.includeJoins(hostDomainIp,hostIps,id,'hostDomainIp');}},{key:"filterBasedClientStorages",value:function filterBasedClientStorages(paywall){var _this9=this;var _paywall$clientStorag=paywall.clientStorages,clientStorages=_paywall$clientStorag===void 0?[]:_paywall$clientStorag;return clientStorages.every(function(clientStorage){var _clientStorage$label=clientStorage.label,label=_clientStorage$label===void 0?'':_clientStorage$label,equal=clientStorage.equal,values=clientStorage.values;var storage=_this9.checkClientStorage(label);var contains=values.indexOf("".concat(storage))>-1;return equal?contains:!contains;});}},{key:"filterBasedCustomerVariables",value:function filterBasedCustomerVariables(paywall){var _this10=this;var customVariables=paywall.customVariables;return customVariables.every(function(customVariable){var _customVariable$label=customVariable.label,label=_customVariable$label===void 0?'':_customVariable$label,equal=customVariable.equal,values=customVariable.values;var props=label.split('.');var propValue=_this10.checkPropertiesExisted(props);var contains=values.indexOf("".concat(propValue))>-1;return equal?contains:!contains;});}},{key:"checkPropertiesExisted",value:function checkPropertiesExisted(props){var _this11=this;return props.reduce(function(obj,prop){if(obj&&_this11.hasOwnPropertyOrIn(prop,obj)){return obj[prop];}else{return null;}},window);}},{key:"checkClientStorage",value:function checkClientStorage(key){var value='';if(window.sessionStorage){value=sessionStorage.getItem(key);}
if(!value&&window.localStorage){value=localStorage.getItem(key);}
if(!value){value=$.cookie(key);}
return value;}},{key:"includePaywall",value:function includePaywall(settings,target,id,label,callback){if(!settings.length){return true;}
var includeSettings=settings.filter(function(v){return v.included;});var excludeSettings=settings.filter(function(v){return!v.included;});if(includeSettings.length&&excludeSettings.length){return includeSettings.some(callback,{target:target,id:id,label:label,that:this})&&!excludeSettings.some(callback,{target:target,id:id,label:label,that:this});}else if(includeSettings.length){return includeSettings.some(callback,{target:target,id:id,label:label,that:this});}else{return!excludeSettings.some(callback,{target:target,id:id,label:label,that:this});}}},{key:"updateExcludesCookieValue",value:function updateExcludesCookieValue(id,label,text,times,match){var key="".concat(this.settings.cookieName,"_crain_paywalls_excludes");var value={};var cookie=null;if(window.localStorage){cookie=localStorage.getItem(key)||cookie;}else{cookie=$.cookie(key)||cookie;}
try{value=JSON.parse(cookie)||value;}catch(e){}
var paywallExcludesAll={};var paywallExcludes={};var paywallExcludeNumber=0;var dateNow=new Date();var paywallExcludeExipred=dateNow.getTime();var paywallExclude={};if(value&&Object.keys(value).length!==0&&Object.getPrototypeOf(value)===Object.prototype){paywallExcludesAll=value[id]||paywallExcludes;paywallExcludes=paywallExcludesAll[label]||{};paywallExclude=paywallExcludes[text]||paywallExclude;if(typeof paywallExclude.times==='number'&&typeof paywallExclude.expired==='number'){paywallExcludeNumber=+paywallExclude.times;paywallExcludeExipred=+paywallExclude.expired;}else{dateNow.setDate(dateNow.getDate()+1);paywallExcludeExipred=dateNow.getTime();}
if(dateNow.getTime()>paywallExcludeExipred){paywallExcludeNumber=0;dateNow.setDate(dateNow.getDate()+1);paywallExcludeExipred=dateNow.getTime();}
if(paywallExcludeNumber>=times){match=!match;}}else{dateNow.setDate(dateNow.getDate()+1);paywallExcludeExipred=dateNow.getTime();}
paywallExcludeNumber++;paywallExcludes[text]={times:paywallExcludeNumber,expired:paywallExcludeExipred};paywallExcludesAll[label]=paywallExcludes;value[id]=paywallExcludesAll;value=JSON.stringify(value);if(window.localStorage){localStorage.setItem(key,value);}else{$.cookie(key,value,{expires:365*20,path:'/',domain:this.settings.cookieDomain});}
return match;}},{key:"includeMatch",value:function includeMatch(setting){var text=setting.text,times=setting.times,included=setting.included;var trimedText=text.trim();if(trimedText!==''){try{var regExp=new RegExp(trimedText,'ig');var match=regExp.test(this.target);if(match&&!included&&times&&times!==-1){match=this.that.updateExcludesCookieValue(this.id,this.label,text,times,match);}
return match;}catch(e){console.log(e);return true;}}else{return true;}}},{key:"includeEqual",value:function includeEqual(setting){var text=setting.text,included=setting.included;var trimedText=text.trim();if(trimedText!==''){var equal=text===this.target;return included?equal:!equal;}else{return true;}}},{key:"includeJoins",value:function includeJoins(array1,array2,id,label){var _this12=this;if(!array1.length){return true;}
var includes=array1.filter(function(value){return value.included;});var excludes=array1.filter(function(value){return!value.included;});var includedJoins=includes.filter(function(value){return array2.indexOf(value.text)>-1;});var excludedJoins=excludes.filter(function(value){var text=value.text,times=value.times;var match=array2.indexOf(text)>-1;if(match&&times&&times!==-1){match=_this12.updateExcludesCookieValue(id,label,text,times,match);}
return match;});return includedJoins.length&&!excludedJoins.length;}},{key:"attachPorteEvents",value:function attachPorteEvents(){$(document).on('click','.porte-modal-close, .porte-modal-obstruct.partial',function(e){$('body').removeClass('porte-modal-active');$('.porte-modal-porte').remove();});}},{key:"removePrintButton",value:function removePrintButton(){var printButton=$('.block-social-sharing-block .article-print-block .social-print');var printIcon=$('.work-item__social .icon-printer');try{if(printButton.length>0){$(printButton).remove();}
if(printIcon.length>0){$(printIcon).remove();}}catch(err){console.error(err);}}},{key:"buildTemplate",value:function buildTemplate(template){var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.settings.paywalls.length){settings.isCheckSingleItemPurchase=this.isCheckSingleItemPurchase;if(this.isCheckSingleItemPurchase){settings.singlePurchaseUrl=this.articleObj.AccessControl.url;}
var displayFormat=this.settings.paywalls[0].displayFormat;var $markup=$("[data-template=\"".concat(displayFormat,"-").concat(template,"\"]")).html();if($markup){var _template=_.template($markup);var vpH=window.innerHeight.toString()+"px";if(displayFormat==='interstitial'){$('body').addClass('paywall-interisal-active');$('.layout-container, .mm-page ').css({'overflow':'hidden','overflow-y':'hidden','height':vpH});}else if(['inline','emailExchange'].indexOf(displayFormat)>-1){this.removePrintButton();var paywallContainer="<div class='inline-paywall-transitions' id='paywall-wrapper'></div>";if(settings.content.inlineTemplateCssSelector!=null&&$(settings.content.inlineTemplateCssSelector).length!=0){var getParent=$(settings.content.inlineTemplateCssSelector).parent();$(getParent).addClass('has-paywall-wrapper');$(paywallContainer).insertAfter($(settings.content.inlineTemplateCssSelector).first());}else{if(Crain.content.NodeType&&Crain.content.NodeType=='work'){$(".region-content-left .block-crain-aac-social-media-share").next().prepend(paywallContainer);$('.block-region-content-left  .inline-paywall-transitions').nextAll().remove();$('.region-content-left .crain-advertisement').remove();$('.inline-paywall-transitions').parent().addClass('has-inline-paywall');$('.region-content-left .has-inline-paywall').nextAll().remove();}else{$(paywallContainer).insertAfter('.article-paragraph p:first');$('.article-paragraph .crain-advertisement').remove();}}
$('#paywall-wrapper').html(_template(settings));$('body').addClass('paywall-inline-active');}else{document.documentElement.style.height=vpH;$('body').css({'overflow':'hidden','overflow-y':'hidden','height':vpH});$('*').css({'overflow':'hidden'});this.removePrintButton();}
$('html, body').animate({"scrollTop":0},100);if(['inline','emailExchange'].indexOf(displayFormat)===-1){$('body').addClass('porte-modal-active').append(_template(settings));}}}}},{key:"buildCustomTemplate",value:function buildCustomTemplate(){$(window).trigger('crain-paywall-in-place-show');if(this.settings.paywalls.length){var _this$settings$paywal2=this.settings.paywalls[0],templateSettings=_this$settings$paywal2.templateSettings,template=_this$settings$paywal2.template;var customTemplate=templateSettings[template].customTemplate;var _contentContainer=customTemplate.template_container;var templateHtml=customTemplate.template_html;if(typeof templateHtml==='string'){$(_contentContainer).append(templateHtml).find('p:first').siblings().hide();$('body').addClass('paywall--is-showing');$(window).trigger('crain-paywall-custom-template-injected',[$(_contentContainer)]);}else{console.error('Crain Paywall: Template is missing so cannot be displayed.');}}
this.fireAnalyticsEvents();}},{key:"showAccessDeniedMessage",value:function showAccessDeniedMessage(){var _this13=this;if($.inArray(this.userTier,['anonymous','registered'])>=0){this.isPaywallDisplayed[this.userTier]=true;}
if(this.settings.paywalls.length){var _this$settings$paywal3=this.settings.paywalls[0],templateSettings=_this$settings$paywal3.templateSettings,template=_this$settings$paywal3.template;if(templateSettings[template].useCustomTemplate){this.buildCustomTemplate();return;}}
this.getMeterMessaging(function(data){_this13.buildTemplate('pw-acd',{content:data,clickshareURL:/stage\./.test(location.href)?User.settings.clickshareBaseStage:User.settings.clickshareBaseProd,is_logged_in:_this13.userLoggedIn,event_name:_this13.getEventName()});_this13.showPaywallEventAdjustTop(data);});}},{key:"showReadsLeftMessage",value:function showReadsLeftMessage(){var _this14=this;this.getMeterMessaging(function(data){_this14.buildTemplate('pw-srr',{articles_left:_this14.allowedLimit-_this14.readCount,articles_read:_this14.readCount,clickshareURL:/stage\./.test(location.href)?User.settings.clickshareBaseStage:User.settings.clickshareBaseProd,content:data,is_logged_in:_this14.userLoggedIn,event_name:_this14.getEventName()});_this14.showPaywallEventAdjustTop(data);});}},{key:"showExpiredMessage",value:function showExpiredMessage(){var _this15=this;if($.inArray(this.userTier,['anonymous','registered'])>=0){this.isPaywallDisplayed[this.userTier]=true;}
if(this.settings.paywalls.length){var _this$settings$paywal4=this.settings.paywalls[0],templateSettings=_this$settings$paywal4.templateSettings,template=_this$settings$paywal4.template;if(templateSettings[template].useCustomTemplate){this.buildCustomTemplate();return;}}
this.getMeterMessaging(function(data){_this15.buildTemplate('pw-exl',{articles_left:0,articles_read:_this15.readCount,clickshareURL:/stage\./.test(location.href)?User.settings.clickshareBaseStage:User.settings.clickshareBaseProd,content:data,is_logged_in:_this15.userLoggedIn,event_name:_this15.getEventName()});_this15.showPaywallEventAdjustTop(data);});}},{key:"writeCookie",value:function writeCookie(cookieName,value){var today=new Date();var expire_date=new Date(today.getFullYear(),today.getMonth()+1,1);$.cookie(cookieName,value,{expires:expire_date,path:'/',domain:this.settings.cookieDomain});}},{key:"getMeterMessaging",value:function getMeterMessaging(callback){if(this.settings.paywalls.length===0){$(window).trigger('crain-paywall-not-show');return;}
if(this.isEmailExchange){for(var index in this.settings.paywalls){var paywall=this.settings.paywalls[index];var displayFormat=paywall.displayFormat;if(displayFormat==='emailExchange'){this.settings.paywalls[0]=paywall;break;}}}
var _this$settings$paywal5=this.settings.paywalls[0],templateSettings=_this$settings$paywal5.templateSettings,template=_this$settings$paywal5.template;callback(templateSettings[template]);}},{key:"getEventName",value:function getEventName(){var event='';if(Crain.content.AccessControl&&Crain.content.AccessControl.name==this.settings.hardwallTermName){event='event4';}else if(Crain.content.AccessControl&&Crain.content.AccessControl.name==this.settings.registrationTermName){event='event5';}
return event;}},{key:"fireAnalyticsEvents",value:function fireAnalyticsEvents(){var showPaywallEvent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this.hasOwnPropertyOrIn('appmeasurement',drupalSettings)&&(typeof s==="undefined"?"undefined":_typeof(s))=='object'){s.events=s.events||'';if(showPaywallEvent===1&&this.settings.paywalls.length){var _this$settings$paywal6=this.settings.paywalls[0].pageViewEvents,pageViewEvents=_this$settings$paywal6===void 0?[]:_this$settings$paywal6;if(pageViewEvents.length){s.events+=",".concat(pageViewEvents.join(','));}}
if(showPaywallEvent===2&&this.settings.miniPaywalls.length){var _pageViewEvents=this.settings.miniPaywalls[0].pageViewEvents;if(_pageViewEvents.length){s.events+=",".concat(_pageViewEvents.join(','));}}
if(Crain.content.NodeType&&Crain.content.NodeType=='article'){s.prop43=s.econst37='full';if(this.isPaywallDisplayed.anonymous==true||this.isPaywallDisplayed.registered==true){s.prop43=s.eVar37='short';s.linkTrackVars='eVar75,prop75,prop43,eVar37,events';s.econst75=s.prop75=this.meterName;}else{s.linkTrackVars='prop43,eVar37,events';}}else{if(this.isPaywallDisplayed.anonymous==true||this.isPaywallDisplayed.registered==true){s.linkTrackVars='events';}}
if(Crain.content.NodeType&&Crain.content.NodeType=='work'){s.prop43=s.eVar37='full';if(this.isPaywallDisplayed.anonymous==true||this.isPaywallDisplayed.registered==true){s.prop43=s.eVar37='short';}
s.linkTrackVars='prop43,eVar37';}
s.events=s.events.replace(/(^,)|(,$)/g,'');}
$(window).trigger('paywall-analytics-fired',[this.isPaywallDisplayed,this.user]);}}]);return Porte;}();var porte=new Porte();Drupal.behaviors.porte={attach:function attach(context,settings){if(context!==document){return;}
var object_exists=(typeof Crain==="undefined"?"undefined":_typeof(Crain))==='object';if(object_exists===true){var content_exists=_typeof(Crain.content)==='object';var context_exists=_typeof(Crain.context)==='object';var visitor_exists=_typeof(Crain.visitor)==='object';if(object_exists&&content_exists&&context_exists&&visitor_exists){if(!$.isArray(Crain.content)){$(window).on('user-object-created.initiate',function(){porte.init(Crain.content,Crain.visitor.user,Crain.context,settings.porte);$(window).off('user-object-created.initiate');});}}}}};})(jQuery,Drupal,drupalSettings,themeBreakpoints);;(function($,Drupal,drupalSettings){'use strict';Drupal.behaviors.emailExchange={attach:function attach(context,settings){$("body").on('click','.porte-modal-porte.email-exchange a.register.email-exchange',function(event){event.preventDefault();var emailErrMsg=$('.porte-modal-porte.email-exchange .error-msg.email');var configErrMsg=$('.porte-modal-porte.email-exchange .error-msg.config');emailErrMsg.html('').removeClass('active');configErrMsg.removeClass('active');var emailAddress=$('.porte-modal-porte.email-exchange input[name="email"]').val();if(!emailAddress){emailErrMsg.html('Email address is required').addClass('active');return false;}
var validateEmail=function validateEmail(email){return String(email).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);};if(validateEmail(emailAddress)){var findUserCallBack=function findUserCallBack(json){if(typeof json!='undefined'&&json!=false){if(typeof json.errorCode=='undefined'){configErrMsg.addClass('active');return false;}}
var clientStorageName='crain-email-exchange';if(window.localStorage){localStorage.setItem(clientStorageName,true);}else{$.cookie(clientStorageName,true,{path:'/',domain:User.settings.cookieDomain});}
window.location.href="".concat(event.target.href,"&addAcct.userName=").concat(emailAddress);};User.callApiUserProfile('find_user',{'CSUsername':emailAddress},findUserCallBack);return false;}else{emailErrMsg.html('Please input a valid email address.').addClass('active');return false;}});}};})(jQuery,Drupal,drupalSettings);;!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i={hooks:{},extensions:[],wrappers:[],navbar:{add:!0,sticky:!0,title:"Menu",titleLink:"parent"},onClick:{close:null,preventDefault:null,setSelected:!0},slidingSubmenus:!0},s={classNames:{inset:"Inset",nolistview:"NoListview",nopanel:"NoPanel",panel:"Panel",selected:"Selected",vertical:"Vertical"},language:null,openingInterval:25,panelNodetype:["ul","ol","div"],transitionDuration:400};function a(e,t){for(var n in"object"!=o(e)&&(e={}),"object"!=o(t)&&(t={}),t)t.hasOwnProperty(n)&&(void 0===e[n]?e[n]=t[n]:"object"==o(e[n])&&a(e[n],t[n]));return e}function o(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function r(e,t,n){if("function"==typeof t){var i=t.call(e);if(void 0!==i)return i}return null!==t&&"function"!=typeof t&&void 0!==t||void 0===n?t:n}function c(e,t,n){var i=!1,s=function(n){void 0!==n&&n.target!==e||(i||(e.removeEventListener("transitionend",s),e.removeEventListener("webkitTransitionEnd",s),t.call(e)),i=!0)};e.addEventListener("transitionend",s),e.addEventListener("webkitTransitionEnd",s),setTimeout(s,1.1*n)}function m(){return"mm-"+l++}var l=0;function d(e){return"mm-"==e.slice(0,3)?e.slice(3):e}var p={};function u(e,t){void 0===p[t]&&(p[t]={}),a(p[t],e)}var f={Menu:""},h={Menu:"Men"},v={Menu:""};function b(e){var t=e.split("."),n=document.createElement(t.shift());return t.forEach((function(e){n.classList.add(e)})),n}function g(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))}function _(e,t){var n=Array.prototype.slice.call(e.children);return t?n.filter((function(e){return e.matches(t)})):n}function y(e,t){for(var n=[],i=e.parentElement;i;)n.push(i),i=i.parentElement;return t?n.filter((function(e){return e.matches(t)})):n}function L(e){return e.filter((function(e){return!e.matches(".mm-hidden")}))}function w(e){var t=[];return L(e).forEach((function(e){t.push.apply(t,_(e,"a.mm-listitem__text"))})),t.filter((function(e){return!e.matches(".mm-btn_next")}))}function E(e,t,n){e.matches("."+t)&&(e.classList.remove(t),e.classList.add(n))}var x={};function P(e,t,n){"number"==typeof e&&(e="(min-width: "+e+"px)"),x[e]=x[e]||[],x[e].push({yes:t,no:n})}function k(e,t){for(var n=t.matches?"yes":"no",i=0;i<x[e].length;i++)x[e][i][n]()}u({Menu:"Menu"},"nl"),u(f,"fa"),u(h,"de"),u(v,"ru");var S=function(){function e(t,n,i){return this.opts=a(n,e.options),this.conf=a(i,e.configs),this._api=["bind","initPanel","initListview","openPanel","closePanel","closeAllPanels","setSelected"],this.node={},this.vars={},this.hook={},this.clck=[],this.node.menu="string"==typeof t?document.querySelector(t):t,"function"==typeof this._deprecatedWarnings&&this._deprecatedWarnings(),this._initWrappers(),this._initAddons(),this._initExtensions(),this._initHooks(),this._initAPI(),this._initMenu(),this._initPanels(),this._initOpened(),this._initAnchors(),function(){var e=function(e){var t=window.matchMedia(e);k(e,t),t.onchange=function(n){k(e,t)}};for(var t in x)e(t)}(),this}return e.prototype.openPanel=function(e,t){var n=this;if(this.trigger("openPanel:before",[e]),e&&(e.matches(".mm-panel")||(e=e.closest(".mm-panel")),e)){if("boolean"!=typeof t&&(t=!0),e.parentElement.matches(".mm-listitem_vertical")){y(e,".mm-listitem_vertical").forEach((function(e){e.classList.add("mm-listitem_opened"),_(e,".mm-panel").forEach((function(e){e.classList.remove("mm-hidden")}))}));var i=y(e,".mm-panel").filter((function(e){return!e.parentElement.matches(".mm-listitem_vertical")}));this.trigger("openPanel:start",[e]),i.length&&this.openPanel(i[0]),this.trigger("openPanel:finish",[e])}else{if(e.matches(".mm-panel_opened"))return;var s=_(this.node.pnls,".mm-panel"),a=_(this.node.pnls,".mm-panel_opened")[0];s.filter((function(t){return t!==e})).forEach((function(e){e.classList.remove("mm-panel_opened-parent")}));for(var o=e.mmParent;o;)(o=o.closest(".mm-panel"))&&(o.parentElement.matches(".mm-listitem_vertical")||o.classList.add("mm-panel_opened-parent"),o=o.mmParent);s.forEach((function(e){e.classList.remove("mm-panel_highest")})),s.filter((function(e){return e!==a})).filter((function(t){return t!==e})).forEach((function(e){e.classList.add("mm-hidden")})),e.classList.remove("mm-hidden");var r=function(){a&&a.classList.remove("mm-panel_opened"),e.classList.add("mm-panel_opened"),e.matches(".mm-panel_opened-parent")?(a&&a.classList.add("mm-panel_highest"),e.classList.remove("mm-panel_opened-parent")):(a&&a.classList.add("mm-panel_opened-parent"),e.classList.add("mm-panel_highest")),n.trigger("openPanel:start",[e])},m=function(){a&&(a.classList.remove("mm-panel_highest"),a.classList.add("mm-hidden")),e.classList.remove("mm-panel_highest"),n.trigger("openPanel:finish",[e])};t&&!e.matches(".mm-panel_noanimation")?setTimeout((function(){c(e,(function(){m()}),n.conf.transitionDuration),r()}),this.conf.openingInterval):(r(),m())}this.trigger("openPanel:after",[e])}},e.prototype.closePanel=function(e){this.trigger("closePanel:before",[e]);var t=e.parentElement;t.matches(".mm-listitem_vertical")&&(t.classList.remove("mm-listitem_opened"),e.classList.add("mm-hidden"),this.trigger("closePanel",[e])),this.trigger("closePanel:after",[e])},e.prototype.closeAllPanels=function(e){this.trigger("closeAllPanels:before"),this.node.pnls.querySelectorAll(".mm-listitem").forEach((function(e){e.classList.remove("mm-listitem_selected"),e.classList.remove("mm-listitem_opened")}));var t=_(this.node.pnls,".mm-panel"),n=e||t[0];_(this.node.pnls,".mm-panel").forEach((function(e){e!==n&&(e.classList.remove("mm-panel_opened"),e.classList.remove("mm-panel_opened-parent"),e.classList.remove("mm-panel_highest"),e.classList.add("mm-hidden"))})),this.openPanel(n,!1),this.trigger("closeAllPanels:after")},e.prototype.togglePanel=function(e){var t=e.parentElement;t.matches(".mm-listitem_vertical")&&this[t.matches(".mm-listitem_opened")?"closePanel":"openPanel"](e)},e.prototype.setSelected=function(e){this.trigger("setSelected:before",[e]),g(this.node.menu,".mm-listitem_selected").forEach((function(e){e.classList.remove("mm-listitem_selected")})),e.classList.add("mm-listitem_selected"),this.trigger("setSelected:after",[e])},e.prototype.bind=function(e,t){this.hook[e]=this.hook[e]||[],this.hook[e].push(t)},e.prototype.trigger=function(e,t){if(this.hook[e])for(var n=0,i=this.hook[e].length;n<i;n++)this.hook[e][n].apply(this,t)},e.prototype._initAPI=function(){var e=this,t=this;this.API={},this._api.forEach((function(n){e.API[n]=function(){var e=t[n].apply(t,arguments);return void 0===e?t.API:e}})),this.node.menu.mmApi=this.API},e.prototype._initHooks=function(){for(var e in this.opts.hooks)this.bind(e,this.opts.hooks[e])},e.prototype._initWrappers=function(){this.trigger("initWrappers:before");for(var t=0;t<this.opts.wrappers.length;t++){var n=e.wrappers[this.opts.wrappers[t]];"function"==typeof n&&n.call(this)}this.trigger("initWrappers:after")},e.prototype._initAddons=function(){for(var t in this.trigger("initAddons:before"),e.addons)e.addons[t].call(this);this.trigger("initAddons:after")},e.prototype._initExtensions=function(){var e=this;this.trigger("initExtensions:before"),"array"==o(this.opts.extensions)&&(this.opts.extensions={all:this.opts.extensions}),Object.keys(this.opts.extensions).forEach((function(t){var n=e.opts.extensions[t].map((function(e){return"mm-menu_"+e}));n.length&&P(t,(function(){n.forEach((function(t){e.node.menu.classList.add(t)}))}),(function(){n.forEach((function(t){e.node.menu.classList.remove(t)}))}))})),this.trigger("initExtensions:after")},e.prototype._initMenu=function(){var e=this;this.trigger("initMenu:before"),this.node.wrpr=this.node.wrpr||this.node.menu.parentElement,this.node.wrpr.classList.add("mm-wrapper"),this.node.menu.id=this.node.menu.id||m();var t=b("div.mm-panels");_(this.node.menu).forEach((function(n){e.conf.panelNodetype.indexOf(n.nodeName.toLowerCase())>-1&&t.append(n)})),this.node.menu.append(t),this.node.pnls=t,this.node.menu.classList.add("mm-menu"),this.trigger("initMenu:after")},e.prototype._initPanels=function(){var e=this;this.trigger("initPanels:before"),this.clck.push((function(t,n){if(n.inMenu){var i=t.getAttribute("href");if(i&&i.length>1&&"#"==i.slice(0,1))try{var s=g(e.node.menu,i)[0];if(s&&s.matches(".mm-panel"))return t.parentElement.matches(".mm-listitem_vertical")?e.togglePanel(s):e.openPanel(s),!0}catch(e){}}})),_(this.node.pnls).forEach((function(t){e.initPanel(t)})),this.trigger("initPanels:after")},e.prototype.initPanel=function(e){var t=this,n=this.conf.panelNodetype.join(", ");if(e.matches(n)&&(e.matches(".mm-panel")||(e=this._initPanel(e)),e)){var i=[];i.push.apply(i,_(e,"."+this.conf.classNames.panel)),_(e,".mm-listview").forEach((function(e){_(e,".mm-listitem").forEach((function(e){i.push.apply(i,_(e,n))}))})),i.forEach((function(e){t.initPanel(e)}))}},e.prototype._initPanel=function(e){var t=this;if(this.trigger("initPanel:before",[e]),E(e,this.conf.classNames.panel,"mm-panel"),E(e,this.conf.classNames.nopanel,"mm-nopanel"),E(e,this.conf.classNames.inset,"mm-listview_inset"),e.matches(".mm-listview_inset")&&e.classList.add("mm-nopanel"),e.matches(".mm-nopanel"))return null;var n=e.id||m(),i=e.matches("."+this.conf.classNames.vertical)||!this.opts.slidingSubmenus;if(e.classList.remove(this.conf.classNames.vertical),e.matches("ul, ol")){e.removeAttribute("id");var s=b("div");e.before(s),s.append(e),e=s}e.id=n,e.classList.add("mm-panel"),e.classList.add("mm-hidden");var a=[e.parentElement].filter((function(e){return e.matches("li")}))[0];if(i?a&&a.classList.add("mm-listitem_vertical"):this.node.pnls.append(e),a&&(a.mmChild=e,e.mmParent=a,a&&a.matches(".mm-listitem")&&!_(a,".mm-btn").length)){var o=_(a,".mm-listitem__text")[0];if(o){var r=b("a.mm-btn.mm-btn_next.mm-listitem__btn");r.setAttribute("href","#"+e.id),o.matches("span")?(r.classList.add("mm-listitem__text"),r.innerHTML=o.innerHTML,a.insertBefore(r,o.nextElementSibling),o.remove()):a.insertBefore(r,_(a,".mm-panel")[0])}}return this._initNavbar(e),_(e,"ul, ol").forEach((function(e){t.initListview(e)})),this.trigger("initPanel:after",[e]),e},e.prototype._initNavbar=function(e){if(this.trigger("initNavbar:before",[e]),!_(e,".mm-navbar").length){var t=null,n=null;if(e.getAttribute("data-mm-parent")?n=g(this.node.pnls,e.getAttribute("data-mm-parent"))[0]:(t=e.mmParent)&&(n=t.closest(".mm-panel")),!t||!t.matches(".mm-listitem_vertical")){var i=b("div.mm-navbar");if(this.opts.navbar.add?this.opts.navbar.sticky&&i.classList.add("mm-navbar_sticky"):i.classList.add("mm-hidden"),n){var s=b("a.mm-btn.mm-btn_prev.mm-navbar__btn");s.setAttribute("href","#"+n.id),i.append(s)}var a=null;t?a=_(t,".mm-listitem__text")[0]:n&&(a=g(n,'a[href="#'+e.id+'"]')[0]);var o=b("a.mm-navbar__title"),r=b("span");switch(o.append(r),r.innerHTML=e.getAttribute("data-mm-title")||(a?a.textContent:"")||this.i18n(this.opts.navbar.title)||this.i18n("Menu"),this.opts.navbar.titleLink){case"anchor":a&&o.setAttribute("href",a.getAttribute("href"));break;case"parent":n&&o.setAttribute("href","#"+n.id)}i.append(o),e.prepend(i),this.trigger("initNavbar:after",[e])}}},e.prototype.initListview=function(e){var t=this;this.trigger("initListview:before",[e]),E(e,this.conf.classNames.nolistview,"mm-nolistview"),e.matches(".mm-nolistview")||(e.classList.add("mm-listview"),_(e).forEach((function(e){e.classList.add("mm-listitem"),E(e,t.conf.classNames.selected,"mm-listitem_selected"),_(e,"a, span").forEach((function(e){e.matches(".mm-btn")||e.classList.add("mm-listitem__text")}))}))),this.trigger("initListview:after",[e])},e.prototype._initOpened=function(){this.trigger("initOpened:before");var e=this.node.pnls.querySelectorAll(".mm-listitem_selected"),t=null;e.forEach((function(e){t=e,e.classList.remove("mm-listitem_selected")})),t&&t.classList.add("mm-listitem_selected");var n=t?t.closest(".mm-panel"):_(this.node.pnls,".mm-panel")[0];this.openPanel(n,!1),this.trigger("initOpened:after")},e.prototype._initAnchors=function(){var e=this;this.trigger("initAnchors:before"),document.addEventListener("click",(function(t){var n=t.target.closest("a[href]");if(n){for(var i={inMenu:n.closest(".mm-menu")===e.node.menu,inListview:n.matches(".mm-listitem > a"),toExternal:n.matches('[rel="external"]')||n.matches('[target="_blank"]')},s={close:null,setSelected:null,preventDefault:"#"==n.getAttribute("href").slice(0,1)},c=0;c<e.clck.length;c++){var m=e.clck[c].call(e,n,i);if(m){if("boolean"==typeof m)return void t.preventDefault();"object"==o(m)&&(s=a(m,s))}}i.inMenu&&i.inListview&&!i.toExternal&&(r(n,e.opts.onClick.setSelected,s.setSelected)&&e.setSelected(n.parentElement),r(n,e.opts.onClick.preventDefault,s.preventDefault)&&t.preventDefault(),r(n,e.opts.onClick.close,s.close)&&e.opts.offCanvas&&"function"==typeof e.close&&e.close())}}),!0),this.trigger("initAnchors:after")},e.prototype.i18n=function(e){return function(e,t){return"string"==typeof t&&void 0!==p[t]&&p[t][e]||e}(e,this.conf.language)},e.options=i,e.configs=s,e.addons={},e.wrappers={},e.node={},e.vars={},e}(),M={blockUI:!0,moveBackground:!0};var A={clone:!1,menu:{insertMethod:"prepend",insertSelector:"body"},page:{nodetype:"div",selector:null,noSelector:[]}};function T(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function C(e,t,n){var i=t.split(".");e[t="mmEvent"+T(i[0])+T(i[1])]=e[t]||[],e[t].push(n),e.addEventListener(i[0],n)}function N(e,t){var n=t.split(".");t="mmEvent"+T(n[0])+T(n[1]),(e[t]||[]).forEach((function(t){e.removeEventListener(n[0],t)}))}S.options.offCanvas=M,S.configs.offCanvas=A;S.prototype.open=function(){var e=this;this.trigger("open:before"),this.vars.opened||(this._openSetup(),setTimeout((function(){e._openStart()}),this.conf.openingInterval),this.trigger("open:after"))},S.prototype._openSetup=function(){var e=this,t=this.opts.offCanvas;this.closeAllOthers(),function(e,t,n){var i=t.split(".");(e[t="mmEvent"+T(i[0])+T(i[1])]||[]).forEach((function(e){e(n||{})}))}(window,"resize.page",{force:!0});var n=["mm-wrapper_opened"];t.blockUI&&n.push("mm-wrapper_blocking"),"modal"==t.blockUI&&n.push("mm-wrapper_modal"),t.moveBackground&&n.push("mm-wrapper_background"),n.forEach((function(t){e.node.wrpr.classList.add(t)})),setTimeout((function(){e.vars.opened=!0}),this.conf.openingInterval),this.node.menu.classList.add("mm-menu_opened")},S.prototype._openStart=function(){var e=this;c(S.node.page,(function(){e.trigger("open:finish")}),this.conf.transitionDuration),this.trigger("open:start"),this.node.wrpr.classList.add("mm-wrapper_opening")},S.prototype.close=function(){var e=this;this.trigger("close:before"),this.vars.opened&&(c(S.node.page,(function(){e.node.menu.classList.remove("mm-menu_opened");["mm-wrapper_opened","mm-wrapper_blocking","mm-wrapper_modal","mm-wrapper_background"].forEach((function(t){e.node.wrpr.classList.remove(t)})),e.vars.opened=!1,e.trigger("close:finish")}),this.conf.transitionDuration),this.trigger("close:start"),this.node.wrpr.classList.remove("mm-wrapper_opening"),this.trigger("close:after"))},S.prototype.closeAllOthers=function(){var e=this;g(document.body,".mm-menu_offcanvas").forEach((function(t){if(t!==e.node.menu){var n=t.mmApi;n&&n.close&&n.close()}}))},S.prototype.setPage=function(e){this.trigger("setPage:before",[e]);var t=this.conf.offCanvas;if(!e){var n="string"==typeof t.page.selector?g(document.body,t.page.selector):_(document.body,t.page.nodetype);if(n=n.filter((function(e){return!e.matches(".mm-menu, .mm-wrapper__blocker")})),t.page.noSelector.length&&(n=n.filter((function(e){return!e.matches(t.page.noSelector.join(", "))}))),n.length>1){var i=b("div");n[0].before(i),n.forEach((function(e){i.append(e)})),n=[i]}e=n[0]}e.classList.add("mm-page"),e.classList.add("mm-slideout"),e.id=e.id||m(),S.node.page=e,this.trigger("setPage:after",[e])};var H=function(){var e=this;N(document.body,"keydown.tabguard"),C(document.body,"keydown.tabguard",(function(t){9==t.keyCode&&e.node.wrpr.matches(".mm-wrapper_opened")&&t.preventDefault()}))},j=function(){var e=this;this.trigger("initBlocker:before");var t=this.opts.offCanvas,n=this.conf.offCanvas;if(t.blockUI){if(!S.node.blck){var i=b("div.mm-wrapper__blocker.mm-slideout");i.innerHTML="<a></a>",document.querySelector(n.menu.insertSelector).append(i),S.node.blck=i}var s=function(t){t.preventDefault(),t.stopPropagation(),e.node.wrpr.matches(".mm-wrapper_modal")||e.close()};S.node.blck.addEventListener("mousedown",s),S.node.blck.addEventListener("touchstart",s),S.node.blck.addEventListener("touchmove",s),this.trigger("initBlocker:after")}},D={aria:!0,text:!0};var I={text:{closeMenu:"Close menu",closeSubmenu:"Close submenu",openSubmenu:"Open submenu",toggleSubmenu:"Toggle submenu"}},O={"Close menu":" ","Close submenu":" ","Open submenu":" ","Toggle submenu":" "},q={"Close menu":"Men schlieen","Close submenu":"Untermen schlieen","Open submenu":"Untermen ffnen","Toggle submenu":"Untermen wechseln"},B={"Close menu":" ","Close submenu":" ","Open submenu":" ","Toggle submenu":" "};u({"Close menu":"Menu sluiten","Close submenu":"Submenu sluiten","Open submenu":"Submenu openen","Toggle submenu":"Submenu wisselen"},"nl"),u(O,"fa"),u(q,"de"),u(B,"ru"),S.options.screenReader=D,S.configs.screenReader=I;var z;z=function(e,t,n){e[t]=n,n?e.setAttribute(t,n.toString()):e.removeAttribute(t)},S.sr_aria=function(e,t,n){z(e,"aria-"+t,n)},S.sr_role=function(e,t){z(e,"role",t)},S.sr_text=function(e){return'<span class="mm-sronly">'+e+"</span>"};var R={fix:!0};var U="ontouchstart"in window||!!navigator.msMaxTouchPoints||!1;S.options.scrollBugFix=R;var W={height:"default"};S.options.autoHeight=W;var Y={close:!1,open:!1};S.options.backButton=Y;var F={add:!1,visible:{min:1,max:3}};S.options.columns=F;var X={add:!1,addTo:"panels",count:!1};S.options.counters=X,S.configs.classNames.counters={counter:"Counter"};var V={add:!1,addTo:"panels"};S.options.dividers=V,S.configs.classNames.divider="Divider";var Z={open:!1,node:null};var G="ontouchstart"in window||!!navigator.msMaxTouchPoints||!1,K={top:0,right:0,bottom:0,left:0},Q={start:15,swipe:15},J={x:["Right","Left"],y:["Down","Up"]},$=0,ee=1,te=2,ne=function(e,t){return"string"==typeof e&&"%"==e.slice(-1)&&(e=t*((e=parseInt(e.slice(0,-1),10))/100)),e},ie=function(){function e(e,t,n){this.surface=e,this.area=a(t,K),this.treshold=a(n,Q),this.surface.mmHasDragEvents||(this.surface.addEventListener(G?"touchstart":"mousedown",this.start.bind(this)),this.surface.addEventListener(G?"touchend":"mouseup",this.stop.bind(this)),this.surface.addEventListener(G?"touchleave":"mouseleave",this.stop.bind(this)),this.surface.addEventListener(G?"touchmove":"mousemove",this.move.bind(this))),this.surface.mmHasDragEvents=!0}return e.prototype.start=function(e){this.currentPosition={x:e.touches?e.touches[0].pageX:e.pageX||0,y:e.touches?e.touches[0].pageY:e.pageY||0};var t=this.surface.clientWidth,n=this.surface.clientHeight,i=ne(this.area.top,n);if(!("number"==typeof i&&this.currentPosition.y<i)){var s=ne(this.area.right,t);if(!("number"==typeof s&&(s=t-s,this.currentPosition.x>s))){var a=ne(this.area.bottom,n);if(!("number"==typeof a&&(a=n-a,this.currentPosition.y>a))){var o=ne(this.area.left,t);"number"==typeof o&&this.currentPosition.x<o||(this.startPosition={x:this.currentPosition.x,y:this.currentPosition.y},this.state=ee)}}}},e.prototype.stop=function(e){if(this.state==te){var t=this._dragDirection(),n=this._eventDetail(t);if(this._dispatchEvents("drag*End",n),Math.abs(this.movement[this.axis])>this.treshold.swipe){var i=this._swipeDirection();n.direction=i,this._dispatchEvents("swipe*",n)}}this.state=$},e.prototype.move=function(e){switch(this.state){case ee:case te:var t={x:e.changedTouches?e.touches[0].pageX:e.pageX||0,y:e.changedTouches?e.touches[0].pageY:e.pageY||0};this.movement={x:t.x-this.currentPosition.x,y:t.y-this.currentPosition.y},this.distance={x:t.x-this.startPosition.x,y:t.y-this.startPosition.y},this.currentPosition={x:t.x,y:t.y},this.axis=Math.abs(this.distance.x)>Math.abs(this.distance.y)?"x":"y";var n=this._dragDirection(),i=this._eventDetail(n);this.state==ee&&Math.abs(this.distance[this.axis])>this.treshold.start&&(this._dispatchEvents("drag*Start",i),this.state=te),this.state==te&&this._dispatchEvents("drag*Move",i)}},e.prototype._eventDetail=function(e){var t=this.distance.x,n=this.distance.y;return"x"==this.axis&&(t-=t>0?this.treshold.start:0-this.treshold.start),"y"==this.axis&&(n-=n>0?this.treshold.start:0-this.treshold.start),{axis:this.axis,direction:e,movementX:this.movement.x,movementY:this.movement.y,distanceX:t,distanceY:n}},e.prototype._dispatchEvents=function(e,t){var n=new CustomEvent(e.replace("*",""),{detail:t});this.surface.dispatchEvent(n);var i=new CustomEvent(e.replace("*",this.axis.toUpperCase()),{detail:t});this.surface.dispatchEvent(i);var s=new CustomEvent(e.replace("*",t.direction),{detail:t});this.surface.dispatchEvent(s)},e.prototype._dragDirection=function(){return J[this.axis][this.distance[this.axis]>0?0:1]},e.prototype._swipeDirection=function(){return J[this.axis][this.movement[this.axis]>0?0:1]},e}(),se=null,ae=null,oe=0,re=function(e){var t=this,n={},i=!1,s=function(){var e=Object.keys(t.opts.extensions);e.length?(P(e.join(", "),(function(){}),(function(){n=ce(n,[],t.node.menu)})),e.forEach((function(e){P(e,(function(){n=ce(n,t.opts.extensions[e],t.node.menu)}),(function(){}))}))):n=ce(n,[],t.node.menu)};ae&&(N(ae,"dragStart"),N(ae,"dragMove"),N(ae,"dragEnd")),se=new ie(ae=e),s(),s=function(){},ae&&(C(ae,"dragStart",(function(e){e.detail.direction==n.direction&&(i=!0,t.node.wrpr.classList.add("mm-wrapper_dragging"),t._openSetup(),t.trigger("open:start"),oe=t.node.menu["x"==n.axis?"clientWidth":"clientHeight"])})),C(ae,"dragMove",(function(e){if(e.detail.axis==n.axis&&i){var t=e.detail["distance"+n.axis.toUpperCase()];switch(n.position){case"right":case"bottom":t=Math.min(Math.max(t,-oe),0);break;default:t=Math.max(Math.min(t,oe),0)}if("front"==n.zposition)switch(n.position){case"right":case"bottom":t+=oe;break;default:t-=oe}n.slideOutNodes.forEach((function(e){e.style.transform="translate"+n.axis.toUpperCase()+"("+t+"px)"}))}})),C(ae,"dragEnd",(function(e){if(e.detail.axis==n.axis&&i){i=!1,t.node.wrpr.classList.remove("mm-wrapper_dragging"),n.slideOutNodes.forEach((function(e){e.style.transform=""}));var s=Math.abs(e.detail["distance"+n.axis.toUpperCase()])>=.75*oe;if(!s){var a=e.detail["movement"+n.axis.toUpperCase()];switch(n.position){case"right":case"bottom":s=a<=0;break;default:s=a>=0}}s?t._openStart():t.close()}})))},ce=function(e,t,n){switch(e.position="left",e.zposition="back",["right","top","bottom"].forEach((function(n){t.indexOf("position-"+n)>-1&&(e.position=n)})),["front","top","bottom"].forEach((function(n){t.indexOf("position-"+n)>-1&&(e.zposition="front")})),se.area={top:"bottom"==e.position?"75%":0,right:"left"==e.position?"75%":0,bottom:"top"==e.position?"75%":0,left:"right"==e.position?"75%":0},e.position){case"top":case"bottom":e.axis="y";break;default:e.axis="x"}switch(e.position){case"top":e.direction="Down";break;case"right":e.direction="Left";break;case"bottom":e.direction="Up";break;default:e.direction="Right"}switch(e.zposition){case"front":e.slideOutNodes=[n];break;default:e.slideOutNodes=g(document.body,".mm-slideout")}return e};S.options.drag=Z;var me={drop:!1,fitViewport:!0,event:"click",position:{},tip:!0};var le={offset:{button:{x:-5,y:5},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};S.options.dropdown=me,S.configs.dropdown=le;var de={insertMethod:"append",insertSelector:"body"};S.configs.fixedElements=de,S.configs.classNames.fixedElements={fixed:"Fixed"};var pe={use:!1,top:[],bottom:[],position:"left",type:"default"};S.options.iconbar=pe;var ue={add:!1,blockPanel:!0,hideDivider:!1,hideNavbar:!0,visible:3};S.options.iconPanels=ue;var fe={enable:!1,enhance:!1};S.options.keyboardNavigation=fe;var he=function(e){var t=this;N(document.body,"keydown.tabguard"),N(document.body,"focusin.tabguard"),C(document.body,"focusin.tabguard",(function(e){if(t.node.wrpr.matches(".mm-wrapper_opened")){var n=e.target;if(n.matches(".mm-tabend")){var i=void 0;n.parentElement.matches(".mm-menu")&&S.node.blck&&(i=S.node.blck),n.parentElement.matches(".mm-wrapper__blocker")&&(i=g(document.body,".mm-menu_offcanvas.mm-menu_opened")[0]),i||(i=n.parentElement),i&&_(i,".mm-tabstart")[0].focus()}}})),N(document.body,"keydown.navigate"),C(document.body,"keydown.navigate",(function(t){var n=t.target,i=n.closest(".mm-menu");if(i){i.mmApi;if(!n.matches("input, textarea"))switch(t.keyCode){case 13:(n.matches(".mm-toggle")||n.matches(".mm-check"))&&n.dispatchEvent(new Event("click"));break;case 32:case 37:case 38:case 39:case 40:t.preventDefault()}if(e)if(n.matches("input"))switch(t.keyCode){case 27:n.value=""}else{var s=i.mmApi;switch(t.keyCode){case 8:var a=g(i,".mm-panel_opened")[0].mmParent;a&&s.openPanel(a.closest(".mm-panel"));break;case 27:i.matches(".mm-menu_offcanvas")&&s.close()}}}}))},ve={load:!1};S.options.lazySubmenus=ve;var be=[];var ge={breadcrumbs:{separator:"/",removeFirst:!1}};function _e(){var e=this,t=this.opts.navbars;if(void 0!==t){t instanceof Array||(t=[t]);var n={};t.length&&(t.forEach((function(t){if(!(t=function(e){return"boolean"==typeof e&&e&&(e={}),"object"!=typeof e&&(e={}),void 0===e.content&&(e.content=["prev","title"]),e.content instanceof Array||(e.content=[e.content]),void 0===e.use&&(e.use=!0),"boolean"==typeof e.use&&e.use&&(e.use=!0),e}(t)).use)return!1;var i=b("div.mm-navbar"),s=t.position;"bottom"!==s&&(s="top"),n[s]||(n[s]=b("div.mm-navbars_"+s)),n[s].append(i);for(var a=0,o=t.content.length;a<o;a++){var r,c=t.content[a];if("string"==typeof c)if("function"==typeof(r=_e.navbarContents[c]))r.call(e,i);else{var m=b("span");m.innerHTML=c;var l=_(m);1==l.length&&(m=l[0]),i.append(m)}else i.append(c)}"string"==typeof t.type&&("function"==typeof(r=_e.navbarTypes[t.type])&&r.call(e,i));"boolean"!=typeof t.use&&P(t.use,(function(){i.classList.remove("mm-hidden"),S.sr_aria(i,"hidden",!1)}),(function(){i.classList.add("mm-hidden"),S.sr_aria(i,"hidden",!0)}))})),this.bind("initMenu:after",(function(){for(var t in n)e.node.menu["bottom"==t?"append":"prepend"](n[t])})))}}S.options.navbars=be,S.configs.navbars=ge,S.configs.classNames.navbars={panelPrev:"Prev",panelTitle:"Title"},_e.navbarContents={breadcrumbs:function(e){var t=this,n=b("div.mm-navbar__breadcrumbs");e.append(n),this.bind("initNavbar:after",(function(e){if(!e.querySelector(".mm-navbar__breadcrumbs")){_(e,".mm-navbar")[0].classList.add("mm-hidden");for(var n=[],i=b("span.mm-navbar__breadcrumbs"),s=e,a=!0;s;){if(!(s=s.closest(".mm-panel")).parentElement.matches(".mm-listitem_vertical")){var o=g(s,".mm-navbar__title span")[0];if(o){var r=o.textContent;r.length&&n.unshift(a?"<span>"+r+"</span>":'<a href="#'+s.id+'">'+r+"</a>")}a=!1}s=s.mmParent}t.conf.navbars.breadcrumbs.removeFirst&&n.shift(),i.innerHTML=n.join('<span class="mm-separator">'+t.conf.navbars.breadcrumbs.separator+"</span>"),_(e,".mm-navbar")[0].append(i)}})),this.bind("openPanel:start",(function(e){var t=e.querySelector(".mm-navbar__breadcrumbs");n.innerHTML=t?t.innerHTML:""})),this.bind("initNavbar:after:sr-aria",(function(e){g(e,".mm-breadcrumbs a").forEach((function(e){S.sr_aria(e,"owns",e.getAttribute("href").slice(1))}))}))},close:function(e){var t=this,n=b("a.mm-btn.mm-btn_close.mm-navbar__btn");e.append(n),this.bind("setPage:after",(function(e){n.setAttribute("href","#"+e.id)})),this.bind("setPage:after:sr-text",(function(){n.innerHTML=S.sr_text(t.i18n(t.conf.screenReader.text.closeMenu))}))},prev:function(e){var t,n,i,s=this,a=b("a.mm-btn.mm-btn_prev.mm-navbar__btn");e.append(a),this.bind("initNavbar:after",(function(e){_(e,".mm-navbar")[0].classList.add("mm-hidden")})),this.bind("openPanel:start",(function(e){e.parentElement.matches(".mm-listitem_vertical")||((t=e.querySelector("."+s.conf.classNames.navbars.panelPrev))||(t=e.querySelector(".mm-navbar__btn.mm-btn_prev")),n=t?t.getAttribute("href"):"",i=t?t.innerHTML:"",n?a.setAttribute("href",n):a.removeAttribute("href"),a.classList[n||i?"remove":"add"]("mm-hidden"),a.innerHTML=i)})),this.bind("initNavbar:after:sr-aria",(function(e){S.sr_aria(e.querySelector(".mm-navbar"),"hidden",!0)})),this.bind("openPanel:start:sr-aria",(function(e){S.sr_aria(a,"hidden",a.matches(".mm-hidden")),S.sr_aria(a,"owns",(a.getAttribute("href")||"").slice(1))}))},searchfield:function(e){"object"!=o(this.opts.searchfield)&&(this.opts.searchfield={});var t=b("div.mm-navbar__searchfield");e.append(t),this.opts.searchfield.add=!0,this.opts.searchfield.addTo=[t]},title:function(e){var t,n,i,s,a=this,o=b("a.mm-navbar__title"),r=b("span");o.append(r),e.append(o),this.bind("openPanel:start",(function(e){e.parentElement.matches(".mm-listitem_vertical")||((i=e.querySelector("."+a.conf.classNames.navbars.panelTitle))||(i=e.querySelector(".mm-navbar__title span")),(t=i&&i.closest("a")?i.closest("a").getAttribute("href"):"")?o.setAttribute("href",t):o.removeAttribute("href"),n=i?i.innerHTML:"",r.innerHTML=n)})),this.bind("openPanel:start:sr-aria",(function(e){if(a.opts.screenReader.text){if(!s)_(a.node.menu,".mm-navbars_top, .mm-navbars_bottom").forEach((function(e){var t=e.querySelector(".mm-btn_prev");t&&(s=t)}));if(s){var t=!0;"parent"==a.opts.navbar.titleLink&&(t=!s.matches(".mm-hidden")),S.sr_aria(o,"hidden",t)}}}))}},_e.navbarTypes={tabs:function(e){var t=this;e.classList.add("mm-navbar_tabs"),e.parentElement.classList.add("mm-navbars_has-tabs");var n=_(e,"a");e.addEventListener("click",(function(e){var n=e.target;if(n.matches("a"))if(n.matches(".mm-navbar__tab_selected"))e.stopImmediatePropagation();else try{t.openPanel(t.node.menu.querySelector(n.getAttribute("href")),!1),e.stopImmediatePropagation()}catch(e){}})),this.bind("openPanel:start",(function e(t){n.forEach((function(e){e.classList.remove("mm-navbar__tab_selected")}));var i=n.filter((function(e){return e.matches('[href="#'+t.id+'"]')}))[0];if(i)i.classList.add("mm-navbar__tab_selected");else{var s=t.mmParent;s&&e.call(this,s.closest(".mm-panel"))}}))}};var ye={scroll:!1,update:!1};var Le={scrollOffset:0,updateOffset:50};S.options.pageScroll=ye,S.configs.pageScroll=Le;var we={add:!1,addTo:"panels",cancel:!1,noResults:"No results found.",placeholder:"Search",panel:{add:!1,dividers:!0,fx:"none",id:null,splash:null,title:"Search"},search:!0,showTextItems:!1,showSubPanels:!0};var Ee={clear:!1,form:!1,input:!1,submit:!1},xe={Search:"","No results found.":"  .",cancel:""},Pe={Search:"Suche","No results found.":"Keine Ergebnisse gefunden.",cancel:"beenden"},ke={Search:"","No results found.":"  .",cancel:""},Se=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,r=a.length;o<r;o++,s++)i[s]=a[o];return i};u({Search:"Zoeken","No results found.":"Geen resultaten gevonden.",cancel:"annuleren"},"nl"),u(xe,"fa"),u(Pe,"de"),u(ke,"ru"),S.options.searchfield=we,S.configs.searchfield=Ee;var Me=function(){var e=this.opts.searchfield,t=(this.conf.searchfield,_(this.node.pnls,".mm-panel_search")[0]);if(t)return t;t=b("div.mm-panel.mm-panel_search.mm-hidden"),e.panel.id&&(t.id=e.panel.id),e.panel.title&&t.setAttribute("data-mm-title",e.panel.title);var n=b("ul");switch(t.append(n),this.node.pnls.append(t),this.initListview(n),this._initNavbar(t),e.panel.fx){case!1:break;case"none":t.classList.add("mm-panel_noanimation");break;default:t.classList.add("mm-panel_fx-"+e.panel.fx)}if(e.panel.splash){var i=b("div.mm-panel__content");i.innerHTML=e.panel.splash,t.append(i)}return t.classList.add("mm-panel"),t.classList.add("mm-hidden"),this.node.pnls.append(t),t},Ae=function(e){var t=this.opts.searchfield,n=this.conf.searchfield;if(e.parentElement.matches(".mm-listitem_vertical"))return null;if(a=g(e,".mm-searchfield")[0])return a;function i(e,t){if(t)for(var n in t)e.setAttribute(n,t[n])}var s,a=b((n.form?"form":"div")+".mm-searchfield"),o=b("div.mm-searchfield__input"),r=b("input");(r.type="text",r.autocomplete="off",r.placeholder=this.i18n(t.placeholder),o.append(r),a.append(o),e.prepend(a),i(r,n.input),n.clear)&&((s=b("a.mm-btn.mm-btn_close.mm-searchfield__btn")).setAttribute("href","#"),o.append(s));(i(a,n.form),n.form&&n.submit&&!n.clear)&&((s=b("a.mm-btn.mm-btn_next.mm-searchfield__btn")).setAttribute("href","#"),o.append(s));t.cancel&&((s=b("a.mm-searchfield__cancel")).setAttribute("href","#"),s.textContent=this.i18n("cancel"),a.append(s));return a},Te=function(e){var t=this,n=this.opts.searchfield,i=(this.conf.searchfield,{});e.closest(".mm-panel_search")?(i.panels=g(this.node.pnls,".mm-panel"),i.noresults=[e.closest(".mm-panel")]):e.closest(".mm-panel")?(i.panels=[e.closest(".mm-panel")],i.noresults=i.panels):(i.panels=g(this.node.pnls,".mm-panel"),i.noresults=[this.node.menu]),i.panels=i.panels.filter((function(e){return!e.matches(".mm-panel_search")})),i.panels=i.panels.filter((function(e){return!e.parentElement.matches(".mm-listitem_vertical")})),i.listitems=[],i.dividers=[],i.panels.forEach((function(e){var t,n;(t=i.listitems).push.apply(t,g(e,".mm-listitem")),(n=i.dividers).push.apply(n,g(e,".mm-divider"))}));var s=_(this.node.pnls,".mm-panel_search")[0],a=g(e,"input")[0],o=g(e,".mm-searchfield__cancel")[0];a.mmSearchfield=i,n.panel.add&&n.panel.splash&&(N(a,"focus.splash"),C(a,"focus.splash",(function(e){t.openPanel(s)}))),n.cancel&&(N(a,"focus.cancel"),C(a,"focus.cancel",(function(e){o.classList.add("mm-searchfield__cancel-active")})),N(o,"click.splash"),C(o,"click.splash",(function(e){if(e.preventDefault(),o.classList.remove("mm-searchfield__cancel-active"),s.matches(".mm-panel_opened")){var n=_(t.node.pnls,".mm-panel_opened-parent");n.length&&t.openPanel(n[n.length-1])}}))),n.panel.add&&"panel"==n.addTo&&this.bind("openPanel:finish",(function(e){e===s&&a.focus()})),N(a,"input.search"),C(a,"input.search",(function(e){switch(e.keyCode){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:break;default:t.search(a)}})),this.search(a)},Ce=function(e){if(e){var t=this.opts.searchfield;this.conf.searchfield;if(e.closest(".mm-panel")||(e=_(this.node.pnls,".mm-panel")[0]),!_(e,".mm-panel__noresultsmsg").length){var n=b("div.mm-panel__noresultsmsg.mm-hidden");n.innerHTML=this.i18n(t.noResults),e.append(n)}}};S.prototype.search=function(e,t){var n,i=this,s=this.opts.searchfield;this.conf.searchfield;t=(t=t||""+e.value).toLowerCase().trim();var a=e.mmSearchfield,o=g(e.closest(".mm-searchfield"),".mm-btn"),r=_(this.node.pnls,".mm-panel_search")[0],c=a.panels,m=a.noresults,l=a.listitems,d=a.dividers;if(l.forEach((function(e){e.classList.remove("mm-listitem_nosubitems"),e.classList.remove("mm-listitem_onlysubitems"),e.classList.remove("mm-hidden")})),r&&(_(r,".mm-listview")[0].innerHTML=""),c.forEach((function(e){e.scrollTop=0})),t.length){d.forEach((function(e){e.classList.add("mm-hidden")})),l.forEach((function(e){var n,i=_(e,".mm-listitem__text")[0],a=!1;i&&(n=i,Array.prototype.slice.call(n.childNodes).filter((function(e){return 3==e.nodeType})).map((function(e){return e.textContent})).join(" ")).toLowerCase().indexOf(t)>-1&&(i.matches(".mm-listitem__btn")?s.showSubPanels&&(a=!0):(i.matches("a")||s.showTextItems)&&(a=!0)),a||e.classList.add("mm-hidden")}));var p=l.filter((function(e){return!e.matches(".mm-hidden")})).length;if(s.panel.add){var u=[];c.forEach((function(e){var t=L(g(e,".mm-listitem"));if((t=t.filter((function(e){return!e.matches(".mm-hidden")}))).length){if(s.panel.dividers){var n=b("li.mm-divider"),i=g(e,".mm-navbar__title")[0];i&&(n.innerHTML=i.innerHTML,u.push(n))}t.forEach((function(e){u.push(e.cloneNode(!0))}))}})),u.forEach((function(e){e.querySelectorAll(".mm-toggle, .mm-check").forEach((function(e){e.remove()}))})),(n=_(r,".mm-listview")[0]).append.apply(n,u),this.openPanel(r)}else s.showSubPanels&&c.forEach((function(e){L(g(e,".mm-listitem")).forEach((function(e){var t=e.mmChild;t&&g(t,".mm-listitem").forEach((function(e){e.classList.remove("mm-hidden")}))}))})),Se(c).reverse().forEach((function(t,n){var s=t.mmParent;s&&(L(g(t,".mm-listitem")).length?(s.matches(".mm-hidden")&&s.classList.remove("mm-hidden"),s.classList.add("mm-listitem_onlysubitems")):e.closest(".mm-panel")||((t.matches(".mm-panel_opened")||t.matches(".mm-panel_opened-parent"))&&setTimeout((function(){i.openPanel(s.closest(".mm-panel"))}),(n+1)*(1.5*i.conf.openingInterval)),s.classList.add("mm-listitem_nosubitems")))})),c.forEach((function(e){L(g(e,".mm-listitem")).forEach((function(e){y(e,".mm-listitem_vertical").forEach((function(e){e.matches(".mm-hidden")&&(e.classList.remove("mm-hidden"),e.classList.add("mm-listitem_onlysubitems"))}))}))})),c.forEach((function(e){L(g(e,".mm-listitem")).forEach((function(e){var t=function(e,t){for(var n=[],i=e.previousElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.previousElementSibling;return n}(e,".mm-divider")[0];t&&t.classList.remove("mm-hidden")}))}));o.forEach((function(e){return e.classList.remove("mm-hidden")})),m.forEach((function(e){g(e,".mm-panel__noresultsmsg").forEach((function(e){return e.classList[p?"add":"remove"]("mm-hidden")}))})),s.panel.add&&(s.panel.splash&&g(r,".mm-panel__content").forEach((function(e){return e.classList.add("mm-hidden")})),l.forEach((function(e){return e.classList.remove("mm-hidden")})),d.forEach((function(e){return e.classList.remove("mm-hidden")})))}else if(l.forEach((function(e){return e.classList.remove("mm-hidden")})),d.forEach((function(e){return e.classList.remove("mm-hidden")})),o.forEach((function(e){return e.classList.add("mm-hidden")})),m.forEach((function(e){g(e,".mm-panel__noresultsmsg").forEach((function(e){return e.classList.add("mm-hidden")}))})),s.panel.add)if(s.panel.splash)g(r,".mm-panel__content").forEach((function(e){return e.classList.remove("mm-hidden")}));else if(!e.closest(".mm-panel_search")){var f=_(this.node.pnls,".mm-panel_opened-parent");this.openPanel(f.slice(-1)[0])}this.trigger("updateListview")};var Ne={add:!1,addTo:"panels"};S.options.sectionIndexer=Ne;var He={current:!0,hover:!1,parent:!1};S.options.setSelected=He;var je={collapsed:{use:!1,blockMenu:!0,hideDivider:!1,hideNavbar:!0},expanded:{use:!1,initial:"open"}};S.options.sidebar=je;S.configs.classNames.toggles={toggle:"Toggle",check:"Check"};/*!
* mmenu.js
* mmenujs.com
*
* Copyright (c) Fred Heusschen
* frebsite.nl
*/S.addons={offcanvas:function(){var e=this;if(this.opts.offCanvas){var t=function(e){return"object"!=typeof e&&(e={}),e}(this.opts.offCanvas);this.opts.offCanvas=a(t,S.options.offCanvas);var n=this.conf.offCanvas;this._api.push("open","close","setPage"),this.vars.opened=!1,this.bind("initMenu:before",(function(){n.clone&&(e.node.menu=e.node.menu.cloneNode(!0),e.node.menu.id&&(e.node.menu.id="mm-"+e.node.menu.id),g(e.node.menu,"[id]").forEach((function(e){e.id="mm-"+e.id}))),e.node.wrpr=document.body,document.querySelector(n.menu.insertSelector)[n.menu.insertMethod](e.node.menu)})),this.bind("initMenu:after",(function(){j.call(e),e.setPage(S.node.page),H.call(e),e.node.menu.classList.add("mm-menu_offcanvas");var t=window.location.hash;if(t){var n=d(e.node.menu.id);n&&n==t.slice(1)&&setTimeout((function(){e.open()}),1e3)}})),this.bind("setPage:after",(function(e){S.node.blck&&_(S.node.blck,"a").forEach((function(t){t.setAttribute("href","#"+e.id)}))})),this.bind("open:start:sr-aria",(function(){S.sr_aria(e.node.menu,"hidden",!1)})),this.bind("close:finish:sr-aria",(function(){S.sr_aria(e.node.menu,"hidden",!0)})),this.bind("initMenu:after:sr-aria",(function(){S.sr_aria(e.node.menu,"hidden",!0)})),this.bind("initBlocker:after:sr-text",(function(){_(S.node.blck,"a").forEach((function(t){t.innerHTML=S.sr_text(e.i18n(e.conf.screenReader.text.closeMenu))}))})),this.clck.push((function(t,n){var i=d(e.node.menu.id);if(i&&t.matches('[href="#'+i+'"]')){if(n.inMenu)return e.open(),!0;var s=t.closest(".mm-menu");if(s){var a=s.mmApi;if(a&&a.close)return a.close(),c(s,(function(){e.open()}),e.conf.transitionDuration),!0}return e.open(),!0}if((i=S.node.page.id)&&t.matches('[href="#'+i+'"]'))return e.close(),!0}))}},screenReader:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={aria:e,text:e}),"object"!=typeof e&&(e={}),e}(this.opts.screenReader);this.opts.screenReader=a(t,S.options.screenReader);var n=this.conf.screenReader;t.aria&&(this.bind("initAddons:after",(function(){e.bind("initMenu:after",(function(){this.trigger("initMenu:after:sr-aria",[].slice.call(arguments))})),e.bind("initNavbar:after",(function(){this.trigger("initNavbar:after:sr-aria",[].slice.call(arguments))})),e.bind("openPanel:start",(function(){this.trigger("openPanel:start:sr-aria",[].slice.call(arguments))})),e.bind("close:start",(function(){this.trigger("close:start:sr-aria",[].slice.call(arguments))})),e.bind("close:finish",(function(){this.trigger("close:finish:sr-aria",[].slice.call(arguments))})),e.bind("open:start",(function(){this.trigger("open:start:sr-aria",[].slice.call(arguments))})),e.bind("initOpened:after",(function(){this.trigger("initOpened:after:sr-aria",[].slice.call(arguments))}))})),this.bind("updateListview",(function(){e.node.pnls.querySelectorAll(".mm-listitem").forEach((function(e){S.sr_aria(e,"hidden",e.matches(".mm-hidden"))}))})),this.bind("openPanel:start",(function(t){var n=g(e.node.pnls,".mm-panel").filter((function(e){return e!==t})).filter((function(e){return!e.parentElement.matches(".mm-panel")})),i=[t];g(t,".mm-listitem_vertical .mm-listitem_opened").forEach((function(e){i.push.apply(i,_(e,".mm-panel"))})),n.forEach((function(e){S.sr_aria(e,"hidden",!0)})),i.forEach((function(e){S.sr_aria(e,"hidden",!1)}))})),this.bind("closePanel",(function(e){S.sr_aria(e,"hidden",!0)})),this.bind("initNavbar:after",(function(e){var t=_(e,".mm-navbar")[0],n=t.matches(".mm-hidden");S.sr_aria(t,"hidden",n)})),t.text&&"parent"==this.opts.navbar.titleLink&&this.bind("initNavbar:after",(function(e){var t=_(e,".mm-navbar")[0],n=!!t.querySelector(".mm-btn_prev");S.sr_aria(g(t,".mm-navbar__title")[0],"hidden",n)}))),t.text&&(this.bind("initAddons:after",(function(){e.bind("setPage:after",(function(){this.trigger("setPage:after:sr-text",[].slice.call(arguments))})),e.bind("initBlocker:after",(function(){this.trigger("initBlocker:after:sr-text",[].slice.call(arguments))}))})),this.bind("initNavbar:after",(function(t){var i=_(t,".mm-navbar")[0];if(i){var s=_(i,".mm-btn_prev")[0];s&&(s.innerHTML=S.sr_text(e.i18n(n.text.closeSubmenu)))}})),this.bind("initListview:after",(function(t){var i=t.closest(".mm-panel").mmParent;if(i){var s=_(i,".mm-btn_next")[0];if(s){var a=e.i18n(n.text[s.parentElement.matches(".mm-listitem_vertical")?"toggleSubmenu":"openSubmenu"]);s.innerHTML+=S.sr_text(a)}}})))},scrollBugFix:function(){var e=this;if(U&&this.opts.offCanvas&&this.opts.offCanvas.blockUI){var t=function(e){return"boolean"==typeof e&&(e={fix:e}),"object"!=typeof e&&(e={}),e}(this.opts.scrollBugFix);if(this.opts.scrollBugFix=a(t,S.options.scrollBugFix),t.fix){var n,i,s=(n=this.node.menu,i="",n.addEventListener("touchmove",(function(e){i="",e.movementY>0?i="down":e.movementY<0&&(i="up")})),{get:function(){return i}});this.node.menu.addEventListener("scroll",o,{passive:!1}),this.node.menu.addEventListener("touchmove",(function(e){var t=e.target.closest(".mm-panel, .mm-iconbar__top, .mm-iconbar__bottom");t&&t.closest(".mm-listitem_vertical")&&(t=y(t,".mm-panel").pop()),t?(t.scrollHeight===t.offsetHeight||0==t.scrollTop&&"down"==s.get()||t.scrollHeight==t.scrollTop+t.offsetHeight&&"up"==s.get())&&o(e):o(e)}),{passive:!1}),this.bind("open:start",(function(){var t=_(e.node.pnls,".mm-panel_opened")[0];t&&(t.scrollTop=0)})),window.addEventListener("orientationchange",(function(t){var n=_(e.node.pnls,".mm-panel_opened")[0];n&&(n.scrollTop=0,n.style["-webkit-overflow-scrolling"]="auto",n.style["-webkit-overflow-scrolling"]="touch")}))}}function o(e){e.preventDefault(),e.stopPropagation()}},autoHeight:function(){var e=this,t=function(e){return"boolean"==typeof e&&e&&(e={height:"auto"}),"string"==typeof e&&(e={height:e}),"object"!=typeof e&&(e={}),e}(this.opts.autoHeight);if(this.opts.autoHeight=a(t,S.options.autoHeight),"auto"==t.height||"highest"==t.height){var n,i=(n=function(e){return e.parentElement.matches(".mm-listitem_vertical")&&(e=y(e,".mm-panel").filter((function(e){return!e.parentElement.matches(".mm-listitem_vertical")}))[0]),e},function(){if(!e.opts.offCanvas||e.vars.opened){var i,s,a=0,o=e.node.menu.offsetHeight-e.node.pnls.offsetHeight;e.node.menu.classList.add("mm-menu_autoheight-measuring"),"auto"==t.height?((s=_(e.node.pnls,".mm-panel_opened")[0])&&(s=n(s)),s||(s=_(e.node.pnls,".mm-panel")[0]),a=s.scrollHeight):"highest"==t.height&&(i=0,_(e.node.pnls,".mm-panel").forEach((function(e){e=n(e),i=Math.max(i,e.scrollHeight)})),a=i),e.node.menu.style.height=a+o+"px",e.node.menu.classList.remove("mm-menu_autoheight-measuring")}});this.bind("initMenu:after",(function(){e.node.menu.classList.add("mm-menu_autoheight")})),this.opts.offCanvas&&this.bind("open:start",i),"highest"==t.height&&this.bind("initPanels:after",i),"auto"==t.height&&(this.bind("updateListview",i),this.bind("openPanel:start",i))}},backButton:function(){var e=this;if(this.opts.offCanvas){var t=function(e){return"boolean"==typeof e&&(e={close:e}),"object"!=typeof e&&(e={}),e}(this.opts.backButton);this.opts.backButton=a(t,S.options.backButton);var n="#"+this.node.menu.id;if(t.close){var i=[],s=function(){i=[n],_(e.node.pnls,".mm-panel_opened, .mm-panel_opened-parent").forEach((function(e){i.push("#"+e.id)}))};this.bind("open:finish",(function(){history.pushState(null,document.title,n)})),this.bind("open:finish",s),this.bind("openPanel:finish",s),this.bind("close:finish",(function(){i=[],history.back(),history.pushState(null,document.title,location.pathname+location.search)})),window.addEventListener("popstate",(function(t){if(e.vars.opened&&i.length){var s=(i=i.slice(0,-1))[i.length-1];s==n?e.close():(e.openPanel(e.node.menu.querySelector(s)),history.pushState(null,document.title,n))}}))}t.open&&window.addEventListener("popstate",(function(t){e.vars.opened||location.hash!=n||e.open()}))}},columns:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e}),"number"==typeof e&&(e={add:!0,visible:e}),"object"!=typeof e&&(e={}),"number"==typeof e.visible&&(e.visible={min:e.visible,max:e.visible}),e}(this.opts.columns);if(this.opts.columns=a(t,S.options.columns),t.add){t.visible.min=Math.max(1,Math.min(6,t.visible.min)),t.visible.max=Math.max(t.visible.min,Math.min(6,t.visible.max));for(var n=[],i=[],s=["mm-panel_opened","mm-panel_opened-parent","mm-panel_highest"],o=0;o<=t.visible.max;o++)n.push("mm-menu_columns-"+o),i.push("mm-panel_columns-"+o);s.push.apply(s,i),this.bind("openPanel:before",(function(t){var n;if(t&&(n=t.mmParent),n&&!n.classList.contains("mm-listitem_vertical")&&(n=n.closest(".mm-panel"))){var i=n.className;if(i.length&&(i=i.split("mm-panel_columns-")[1]))for(var a=parseInt(i.split(" ")[0],10)+1;a>0;){if(!(t=_(e.node.pnls,".mm-panel_columns-"+a)[0])){a=-1;break}a++,t.classList.add("mm-hidden"),s.forEach((function(e){t.classList.remove(e)}))}}})),this.bind("openPanel:start",(function(s){if(s){var a=s.mmParent;if(a&&a.classList.contains("mm-listitem_vertical"))return}var o=_(e.node.pnls,".mm-panel_opened-parent").length;s.matches(".mm-panel_opened-parent")||o++,o=Math.min(t.visible.max,Math.max(t.visible.min,o)),n.forEach((function(t){e.node.menu.classList.remove(t)})),e.node.menu.classList.add("mm-menu_columns-"+o);var r=[];_(e.node.pnls,".mm-panel").forEach((function(e){i.forEach((function(t){e.classList.remove(t)})),e.matches(".mm-panel_opened-parent")&&r.push(e)})),r.push(s),r.slice(-t.visible.max).forEach((function(e,t){e.classList.add("mm-panel_columns-"+t)}))}))}},counters:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e,addTo:"panels",count:e}),"object"!=typeof e&&(e={}),"panels"==e.addTo&&(e.addTo=".mm-listview"),e}(this.opts.counters);if(this.opts.counters=a(t,S.options.counters),this.bind("initListview:after",(function(t){var n=e.conf.classNames.counters.counter;g(t,"."+n).forEach((function(e){E(e,n,"mm-counter")}))})),t.add&&this.bind("initListview:after",(function(e){if(e.matches(t.addTo)){var n=e.closest(".mm-panel").mmParent;if(n&&!g(n,".mm-counter").length){var i=_(n,".mm-btn")[0];i&&i.prepend(b("span.mm-counter"))}}})),t.count){var n=function(t){(t?[t.closest(".mm-panel")]:_(e.node.pnls,".mm-panel")).forEach((function(e){var t=e.mmParent;if(t){var n=g(t,".mm-counter")[0];if(n){var i=[];_(e,".mm-listview").forEach((function(e){i.push.apply(i,_(e))})),n.innerHTML=L(i).length.toString()}}}))};this.bind("initListview:after",n),this.bind("updateListview",n)}},dividers:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e}),"object"!=typeof e&&(e={}),"panels"==e.addTo&&(e.addTo=".mm-listview"),e}(this.opts.dividers);this.opts.dividers=a(t,S.options.dividers),this.bind("initListview:after",(function(t){_(t).forEach((function(t){E(t,e.conf.classNames.divider,"mm-divider"),t.matches(".mm-divider")&&t.classList.remove("mm-listitem")}))})),t.add&&this.bind("initListview:after",(function(e){if(e.matches(t.addTo)){g(e,".mm-divider").forEach((function(e){e.remove()}));var n="";L(_(e)).forEach((function(t){var i=_(t,".mm-listitem__text")[0].textContent.trim().toLowerCase()[0];if(i.length&&i!=n){n=i;var s=b("li.mm-divider");s.textContent=i,e.insertBefore(s,t)}}))}}))},drag:function(){var e=this;if(this.opts.offCanvas){var t=function(e){return"boolean"==typeof e&&(e={open:e}),"object"!=typeof e&&(e={}),e}(this.opts.drag);this.opts.drag=a(t,S.options.drag),t.open&&this.bind("setPage:after",(function(n){re.call(e,t.node||n)}))}},dropdown:function(){var e=this;if(this.opts.offCanvas){var t=function(e){return"boolean"==typeof e&&e&&(e={drop:e}),"object"!=typeof e&&(e={}),"string"==typeof e.position&&(e.position={of:e.position}),e}(this.opts.dropdown);this.opts.dropdown=a(t,S.options.dropdown);var n=this.conf.dropdown;if(t.drop){var i;this.bind("initMenu:after",(function(){if(e.node.menu.classList.add("mm-menu_dropdown"),"string"!=typeof t.position.of){var n=d(e.node.menu.id);n&&(t.position.of='[href="#'+n+'"]')}if("string"==typeof t.position.of){i=g(document.body,t.position.of)[0];var s=t.event.split(" ");1==s.length&&(s[1]=s[0]),"hover"==s[0]&&i.addEventListener("mouseenter",(function(){e.open()}),{passive:!0}),"hover"==s[1]&&e.node.menu.addEventListener("mouseleave",(function(){e.close()}),{passive:!0})}})),this.bind("open:start",(function(){e.node.menu.mmStyle=e.node.menu.getAttribute("style"),e.node.wrpr.classList.add("mm-wrapper_dropdown")})),this.bind("close:finish",(function(){e.node.menu.setAttribute("style",e.node.menu.mmStyle),e.node.wrpr.classList.remove("mm-wrapper_dropdown")}));var s=function(e,s){var a,o,r,c=s[0],m=s[1],l="x"==e?"offsetWidth":"offsetHeight",d="x"==e?"left":"top",p="x"==e?"right":"bottom",u="x"==e?"width":"height",f="x"==e?"innerWidth":"innerHeight",h="x"==e?"maxWidth":"maxHeight",v=null,b=(a=d,i.getBoundingClientRect()[a]+document.body["left"===a?"scrollLeft":"scrollTop"]),g=b+i[l],_=window[f],y=n.offset.button[e]+n.offset.viewport[e];if(t.position[e])switch(t.position[e]){case"left":case"bottom":v="after";break;case"right":case"top":v="before"}return null===v&&(v=b+(g-b)/2<_/2?"after":"before"),"after"==v?(r=_-((o="x"==e?b:g)+y),c[d]=o+n.offset.button[e]+"px",c[p]="auto",t.tip&&m.push("mm-menu_tip-"+("x"==e?"left":"top"))):(r=(o="x"==e?g:b)-y,c[p]="calc( 100% - "+(o-n.offset.button[e])+"px )",c[d]="auto",t.tip&&m.push("mm-menu_tip-"+("x"==e?"right":"bottom"))),t.fitViewport&&(c[h]=Math.min(n[u].max,r)+"px"),[c,m]};this.bind("open:start",o),window.addEventListener("resize",(function(t){o.call(e)}),{passive:!0}),this.opts.offCanvas.blockUI||window.addEventListener("scroll",(function(t){o.call(e)}),{passive:!0})}}function o(){var e=this;if(this.vars.opened){this.node.menu.setAttribute("style",this.node.menu.mmStyle);var n=[{},[]];for(var i in n=s.call(this,"y",n),(n=s.call(this,"x",n))[0])this.node.menu.style[i]=n[0][i];if(t.tip){["mm-menu_tip-left","mm-menu_tip-right","mm-menu_tip-top","mm-menu_tip-bottom"].forEach((function(t){e.node.menu.classList.remove(t)})),n[1].forEach((function(t){e.node.menu.classList.add(t)}))}}}},fixedElements:function(){var e=this;if(this.opts.offCanvas){var t,n,i=this.conf.fixedElements;this.bind("setPage:after",(function(s){t=e.conf.classNames.fixedElements.fixed,n=g(document,i.insertSelector)[0],g(s,"."+t).forEach((function(e){E(e,t,"mm-slideout"),n[i.insertMethod](e)}))}))}},iconbar:function(){var e,t=this,n=function(e){return"array"==o(e)&&(e={use:!0,top:e}),"object"!=o(e)&&(e={}),void 0===e.use&&(e.use=!0),"boolean"==typeof e.use&&e.use&&(e.use=!0),e}(this.opts.iconbar);if((this.opts.iconbar=a(n,S.options.iconbar),n.use)&&(["top","bottom"].forEach((function(t,i){var s=n[t];"array"!=o(s)&&(s=[s]);for(var a=b("div.mm-iconbar__"+t),r=0,c=s.length;r<c;r++)"string"==typeof s[r]?a.innerHTML+=s[r]:a.append(s[r]);a.children.length&&(e||(e=b("div.mm-iconbar")),e.append(a))})),e)){this.bind("initMenu:after",(function(){t.node.menu.prepend(e)}));var i="mm-menu_iconbar-"+n.position,s=function(){t.node.menu.classList.add(i),S.sr_aria(e,"hidden",!1)};if("boolean"==typeof n.use?this.bind("initMenu:after",s):P(n.use,s,(function(){t.node.menu.classList.remove(i),S.sr_aria(e,"hidden",!0)})),"tabs"==n.type){e.classList.add("mm-iconbar_tabs"),e.addEventListener("click",(function(e){var n=e.target;if(n.matches("a"))if(n.matches(".mm-iconbar__tab_selected"))e.stopImmediatePropagation();else try{var i=t.node.menu.querySelector(n.getAttribute("href"))[0];i&&i.matches(".mm-panel")&&(e.preventDefault(),e.stopImmediatePropagation(),t.openPanel(i,!1))}catch(e){}}));var r=function(t){g(e,"a").forEach((function(e){e.classList.remove("mm-iconbar__tab_selected")}));var n=g(e,'[href="#'+t.id+'"]')[0];if(n)n.classList.add("mm-iconbar__tab_selected");else{var i=t.mmParent;i&&r(i.closest(".mm-panel"))}};this.bind("openPanel:start",r)}}},iconPanels:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e}),"number"!=typeof e&&"string"!=typeof e||(e={add:!0,visible:e}),"object"!=typeof e&&(e={}),e}(this.opts.iconPanels);this.opts.iconPanels=a(t,S.options.iconPanels);var n=!1;if("first"==t.visible&&(n=!0,t.visible=1),t.visible=Math.min(3,Math.max(1,t.visible)),t.visible++,t.add){this.bind("initMenu:after",(function(){var n=["mm-menu_iconpanel"];t.hideNavbar&&n.push("mm-menu_hidenavbar"),t.hideDivider&&n.push("mm-menu_hidedivider"),n.forEach((function(t){e.node.menu.classList.add(t)}))}));var i=[];if(!n)for(var s=0;s<=t.visible;s++)i.push("mm-panel_iconpanel-"+s);this.bind("openPanel:start",(function(s){var a=_(e.node.pnls,".mm-panel");if(!(s=s||a[0]).parentElement.matches(".mm-listitem_vertical"))if(n)a.forEach((function(e,t){e.classList[0==t?"add":"remove"]("mm-panel_iconpanel-first")}));else{a.forEach((function(e){i.forEach((function(t){e.classList.remove(t)}))})),a=a.filter((function(e){return e.matches(".mm-panel_opened-parent")}));var o=!1;a.forEach((function(e){s===e&&(o=!0)})),o||a.push(s),a.forEach((function(e){e.classList.remove("mm-hidden")})),(a=a.slice(-t.visible)).forEach((function(e,t){e.classList.add("mm-panel_iconpanel-"+t)}))}})),this.bind("initPanel:after",(function(e){if(t.blockPanel&&!e.parentElement.matches(".mm-listitem_vertical")&&!_(e,".mm-panel__blocker")[0]){var n=b("a.mm-panel__blocker");n.setAttribute("href","#"+e.closest(".mm-panel").id),e.prepend(n)}}))}},keyboardNavigation:function(){var e=this;if(!U){var t=function(e){return"boolean"!=typeof e&&"string"!=typeof e||(e={enable:e}),"object"!=typeof e&&(e={}),e}(this.opts.keyboardNavigation);if(this.opts.keyboardNavigation=a(t,S.options.keyboardNavigation),t.enable){var n=b("button.mm-tabstart.mm-sronly"),i=b("button.mm-tabend.mm-sronly"),s=b("button.mm-tabend.mm-sronly");this.bind("initMenu:after",(function(){t.enhance&&e.node.menu.classList.add("mm-menu_keyboardfocus"),he.call(e,t.enhance)})),this.bind("initOpened:before",(function(){e.node.menu.prepend(n),e.node.menu.append(i),_(e.node.menu,".mm-navbars-top, .mm-navbars-bottom").forEach((function(e){e.querySelectorAll(".mm-navbar__title").forEach((function(e){e.setAttribute("tabindex","-1")}))}))})),this.bind("initBlocker:after",(function(){S.node.blck.append(s),_(S.node.blck,"a")[0].classList.add("mm-tabstart")}));var o="input, select, textarea, button, label, a[href]",r=function(n){n=n||_(e.node.pnls,".mm-panel_opened")[0];var i=null,s=document.activeElement.closest(".mm-navbar");if(!s||s.closest(".mm-menu")!=e.node.menu){if("default"==t.enable&&((i=g(n,".mm-listview a[href]:not(.mm-hidden)")[0])||(i=g(n,o+":not(.mm-hidden)")[0]),!i)){var a=[];_(e.node.menu,".mm-navbars_top, .mm-navbars_bottom").forEach((function(e){a.push.apply(a,g(e,o+":not(.mm-hidden)"))})),i=a[0]}i||(i=_(e.node.menu,".mm-tabstart")[0]),i&&i.focus()}};this.bind("open:finish",r),this.bind("openPanel:finish",r),this.bind("initOpened:after:sr-aria",(function(){[e.node.menu,S.node.blck].forEach((function(e){_(e,".mm-tabstart, .mm-tabend").forEach((function(e){S.sr_aria(e,"hidden",!0),S.sr_role(e,"presentation")}))}))}))}}},lazySubmenus:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={load:e}),"object"!=typeof e&&(e={}),e}(this.opts.lazySubmenus);this.opts.lazySubmenus=a(t,S.options.lazySubmenus),t.load&&(this.bind("initPanels:before",(function(){var t=[];g(e.node.pnls,"li").forEach((function(n){t.push.apply(t,_(n,e.conf.panelNodetype.join(", ")))})),t.filter((function(e){return!e.matches(".mm-listview_inset")})).filter((function(e){return!e.matches(".mm-nolistview")})).filter((function(e){return!e.matches(".mm-nopanel")})).forEach((function(e){["mm-panel_lazysubmenu","mm-nolistview","mm-nopanel"].forEach((function(t){e.classList.add(t)}))}))})),this.bind("initPanels:before",(function(){var t=[];g(e.node.pnls,"."+e.conf.classNames.selected).forEach((function(e){t.push.apply(t,y(e,".mm-panel_lazysubmenu"))})),t.length&&t.forEach((function(e){console.log(e);["mm-panel_lazysubmenu","mm-nolistview","mm-nopanel"].forEach((function(t){e.classList.remove(t)}))}))})),this.bind("openPanel:before",(function(t){var n=g(t,".mm-panel_lazysubmenu").filter((function(e){return!e.matches(".mm-panel_lazysubmenu .mm-panel_lazysubmenu")}));t.matches(".mm-panel_lazysubmenu")&&n.unshift(t),n.forEach((function(t){["mm-panel_lazysubmenu","mm-nolistview","mm-nopanel"].forEach((function(e){t.classList.remove(e)})),e.initPanel(t)}))})))},navbars:_e,pageScroll:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={scroll:e}),"object"!=typeof e&&(e={}),e}(this.opts.pageScroll);this.opts.pageScroll=a(t,S.options.pageScroll);var n,i=this.conf.pageScroll;function s(){n&&window.scrollTo({top:n.getBoundingClientRect().top+document.scrollingElement.scrollTop-i.scrollOffset,behavior:"smooth"}),n=null}function o(e){try{return"#"!=e&&"#"==e.slice(0,1)?S.node.page.querySelector(e):null}catch(e){return null}}if(t.scroll&&this.bind("close:finish",(function(){s()})),this.opts.offCanvas&&t.scroll&&this.clck.push((function(t,i){if(n=null,i.inMenu){var a=t.getAttribute("href");if(n=o(a))return e.node.menu.matches(".mm-menu_sidebar-expanded")&&e.node.wrpr.matches(".mm-wrapper_sidebar-expanded")?void s():{close:!0}}})),t.update){var r=[];this.bind("initListview:after",(function(e){w(_(e,".mm-listitem")).forEach((function(e){var t=o(e.getAttribute("href"));t&&r.unshift(t)}))}));var c=-1;window.addEventListener("scroll",(function(t){for(var n=window.scrollY,s=0;s<r.length;s++)if(r[s].offsetTop<n+i.updateOffset){if(c!==s){c=s;var a=w(g(_(e.node.pnls,".mm-panel_opened")[0],".mm-listitem"));(a=a.filter((function(e){return e.matches('[href="#'+r[s].id+'"]')}))).length&&e.setSelected(a[0].parentElement)}break}}))}},searchfield:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e}),"object"!=typeof e&&(e={}),"boolean"==typeof e.panel&&(e.panel={add:e.panel}),"object"!=typeof e.panel&&(e.panel={}),"panel"==e.addTo&&(e.panel.add=!0),e.panel.add&&(e.showSubPanels=!1,e.panel.splash&&(e.cancel=!0)),e}(this.opts.searchfield);this.opts.searchfield=a(t,S.options.searchfield);this.conf.searchfield;t.add&&(this.bind("close:start",(function(){g(e.node.menu,".mm-searchfield").forEach((function(e){e.blur()}))})),this.bind("initPanel:after",(function(n){var i=null;t.panel.add&&(i=Me.call(e));var s=null;switch(t.addTo){case"panels":s=[n];break;case"panel":s=[i];break;default:"string"==typeof t.addTo?s=g(e.node.menu,t.addTo):"array"==o(t.addTo)&&(s=t.addTo)}s.forEach((function(n){n=Ae.call(e,n),t.search&&n&&Te.call(e,n)})),t.noResults&&Ce.call(e,t.panel.add?i:n)})),this.clck.push((function(t,n){if(n.inMenu&&t.matches(".mm-searchfield__btn")){if(t.matches(".mm-btn_close")){var i=g(s=t.closest(".mm-searchfield"),"input")[0];return i.value="",e.search(i),!0}var s;if(t.matches(".mm-btn_next"))return(s=t.closest("form"))&&s.submit(),!0}})))},sectionIndexer:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={add:e}),"object"!=typeof e&&(e={}),e}(this.opts.sectionIndexer);this.opts.sectionIndexer=a(t,S.options.sectionIndexer),t.add&&this.bind("initPanels:after",(function(){if(!e.node.indx){var t="";"abcdefghijklmnopqrstuvwxyz".split("").forEach((function(e){t+='<a href="#">'+e+"</a>"}));var n=b("div.mm-sectionindexer");n.innerHTML=t,e.node.pnls.prepend(n),e.node.indx=n,e.node.indx.addEventListener("click",(function(e){e.target.matches("a")&&e.preventDefault()}));var i=function(t){if(t.target.matches("a")){var n=t.target.textContent,i=_(e.node.pnls,".mm-panel_opened")[0],s=-1,a=i.scrollTop;i.scrollTop=0,g(i,".mm-divider").filter((function(e){return!e.matches(".mm-hidden")})).forEach((function(e){s<0&&n==e.textContent.trim().slice(0,1).toLowerCase()&&(s=e.offsetTop)})),i.scrollTop=s>-1?s:a}};U?(e.node.indx.addEventListener("touchstart",i),e.node.indx.addEventListener("touchmove",i)):e.node.indx.addEventListener("mouseover",i)}e.bind("openPanel:start",(function(t){var n=g(t,".mm-divider").filter((function(e){return!e.matches(".mm-hidden")})).length;e.node.indx.classList[n?"add":"remove"]("mm-sectionindexer_active")}))}))},setSelected:function(){var e=this,t=function(e){return"boolean"==typeof e&&(e={hover:e,parent:e}),"object"!=typeof e&&(e={}),e}(this.opts.setSelected);if(this.opts.setSelected=a(t,S.options.setSelected),"detect"==t.current){var n=function(t){t=t.split("?")[0].split("#")[0];var i=e.node.menu.querySelector('a[href="'+t+'"], a[href="'+t+'/"]');if(i)e.setSelected(i.parentElement);else{var s=t.split("/").slice(0,-1);s.length&&n(s.join("/"))}};this.bind("initMenu:after",(function(){n.call(e,window.location.href)}))}else t.current||this.bind("initListview:after",(function(e){_(e,".mm-listitem_selected").forEach((function(e){e.classList.remove("mm-listitem_selected")}))}));t.hover&&this.bind("initMenu:after",(function(){e.node.menu.classList.add("mm-menu_selected-hover")})),t.parent&&(this.bind("openPanel:finish",(function(t){g(e.node.pnls,".mm-listitem_selected-parent").forEach((function(e){e.classList.remove("mm-listitem_selected-parent")}));for(var n=t.mmParent;n;)n.matches(".mm-listitem_vertical")||n.classList.add("mm-listitem_selected-parent"),n=(n=n.closest(".mm-panel")).mmParent})),this.bind("initMenu:after",(function(){e.node.menu.classList.add("mm-menu_selected-parent")})))},sidebar:function(){var e=this;if(this.opts.offCanvas){var t=function(e){return("string"==typeof e||"boolean"==typeof e&&e||"number"==typeof e)&&(e={expanded:e}),"object"!=typeof e&&(e={}),"boolean"==typeof e.collapsed&&e.collapsed&&(e.collapsed={use:!0}),"string"!=typeof e.collapsed&&"number"!=typeof e.collapsed||(e.collapsed={use:e.collapsed}),"object"!=typeof e.collapsed&&(e.collapsed={}),"boolean"==typeof e.expanded&&e.expanded&&(e.expanded={use:!0}),"string"!=typeof e.expanded&&"number"!=typeof e.expanded||(e.expanded={use:e.expanded}),"object"!=typeof e.expanded&&(e.expanded={}),e}(this.opts.sidebar);if(this.opts.sidebar=a(t,S.options.sidebar),t.collapsed.use){this.bind("initMenu:after",(function(){if(e.node.menu.classList.add("mm-menu_sidebar-collapsed"),t.collapsed.blockMenu&&e.opts.offCanvas&&!_(e.node.menu,".mm-menu__blocker")[0]){var n=b("a.mm-menu__blocker");n.setAttribute("href","#"+e.node.menu.id),e.node.menu.prepend(n)}t.collapsed.hideNavbar&&e.node.menu.classList.add("mm-menu_hidenavbar"),t.collapsed.hideDivider&&e.node.menu.classList.add("mm-menu_hidedivider")}));var n=function(){e.node.wrpr.classList.add("mm-wrapper_sidebar-collapsed")},i=function(){e.node.wrpr.classList.remove("mm-wrapper_sidebar-collapsed")};"boolean"==typeof t.collapsed.use?this.bind("initMenu:after",n):P(t.collapsed.use,n,i)}if(t.expanded.use){this.bind("initMenu:after",(function(){e.node.menu.classList.add("mm-menu_sidebar-expanded")}));n=function(){e.node.wrpr.classList.add("mm-wrapper_sidebar-expanded"),e.node.wrpr.matches(".mm-wrapper_sidebar-closed")||e.open()},i=function(){e.node.wrpr.classList.remove("mm-wrapper_sidebar-expanded"),e.close()};"boolean"==typeof t.expanded.use?this.bind("initMenu:after",n):P(t.expanded.use,n,i),this.bind("close:start",(function(){e.node.wrpr.matches(".mm-wrapper_sidebar-expanded")&&(e.node.wrpr.classList.add("mm-wrapper_sidebar-closed"),"remember"==t.expanded.initial&&window.localStorage.setItem("mmenuExpandedState","closed"))})),this.bind("open:start",(function(){e.node.wrpr.matches(".mm-wrapper_sidebar-expanded")&&(e.node.wrpr.classList.remove("mm-wrapper_sidebar-closed"),"remember"==t.expanded.initial&&window.localStorage.setItem("mmenuExpandedState","open"))}));var s=t.expanded.initial;if("remember"==t.expanded.initial){var o=window.localStorage.getItem("mmenuExpandedState");switch(o){case"open":case"closed":s=o}}"closed"==s&&this.bind("initMenu:after",(function(){e.node.wrpr.classList.add("mm-wrapper_sidebar-closed")})),this.clck.push((function(n,i){if(i.inMenu&&i.inListview&&e.node.wrpr.matches(".mm-wrapper_sidebar-expanded"))return{close:"closed"==t.expanded.initial}}))}}},toggles:function(){var e=this;this.bind("initPanel:after",(function(t){g(t,"input").forEach((function(t){E(t,e.conf.classNames.toggles.toggle,"mm-toggle"),E(t,e.conf.classNames.toggles.check,"mm-check")}))}))}},S.wrappers={angular:function(){this.opts.onClick={close:!0,preventDefault:!1,setSelected:!0}},bootstrap:function(){var e=this;if(this.node.menu.matches(".navbar-collapse")){this.conf.offCanvas&&(this.conf.offCanvas.clone=!1);var t=b("nav"),n=b("div");t.append(n),_(this.node.menu).forEach((function(t){switch(!0){case t.matches(".navbar-nav"):n.append(function(e){var t=b("ul");return g(e,".nav-item").forEach((function(e){var n=b("li");if(e.matches(".active")&&n.classList.add("Selected"),!e.matches(".nav-link")){var i=_(e,".dropdown-menu")[0];i&&n.append(o(i)),e=_(e,".nav-link")[0]}n.prepend(a(e)),t.append(n)})),t}(t));break;case t.matches(".dropdown-menu"):n.append(o(t));break;case t.matches(".form-inline"):e.conf.searchfield.form={action:t.getAttribute("action")||null,method:t.getAttribute("method")||null},e.conf.searchfield.input={name:t.querySelector("input").getAttribute("name")||null},e.conf.searchfield.clear=!1,e.conf.searchfield.submit=!0;break;default:n.append(t.cloneNode(!0))}})),this.bind("initMenu:before",(function(){document.body.prepend(t),e.node.menu=t}));var i=this.node.menu.parentElement;if(i){var s=i.querySelector(".navbar-toggler");s&&(s.removeAttribute("data-target"),s.removeAttribute("aria-controls"),s.outerHTML=s.outerHTML,(s=i.querySelector(".navbar-toggler")).addEventListener("click",(function(t){t.preventDefault(),t.stopImmediatePropagation(),e[e.vars.opened?"close":"open"]()})))}}function a(e){for(var t=b(e.matches("a")?"a":"span"),n=["href","title","target"],i=0;i<n.length;i++)e.getAttribute(n[i])&&t.setAttribute(n[i],e.getAttribute(n[i]));return t.innerHTML=e.innerHTML,g(t,".sr-only").forEach((function(e){e.remove()})),t}function o(e){var t=b("ul");return _(e).forEach((function(e){var n=b("li");e.matches(".dropdown-divider")?n.classList.add("Divider"):e.matches(".dropdown-item")&&n.append(a(e)),t.append(n)})),t}},olark:function(){this.conf.offCanvas.page.noSelector.push("#olark")},turbolinks:function(){var e;document.addEventListener("turbolinks:before-visit",(function(t){e=document.querySelector(".mm-wrapper").className.split(" ").filter((function(e){return/mm-/.test(e)}))})),document.addEventListener("turbolinks:load",(function(t){void 0!==e&&(document.querySelector(".mm-wrapper").className=e)}))},wordpress:function(){this.conf.classNames.selected="current-menu-item";var e=document.getElementById("wpadminbar");e&&(e.style.position="fixed",e.classList.add("mm-slideout"))}};var De;t.default=S;window&&(window.Mmenu=S),(De=window.jQuery||window.Zepto||null)&&(De.fn.mmenu=function(e,t){var n=De();return this.each((function(i,s){if(!s.mmApi){var a=new S(s,e,t),o=De(a.node.menu);o.data("mmenu",a.API),n=n.add(o)}})),n})}]);;(function(){'use strict';Drupal.behaviors.responsive_menu_mmenu={attach:function(context){const mmenuId='#off-canvas';const offCanvas=document.querySelector(mmenuId)
if(offCanvas&&!offCanvas.hasOwnProperty('mmApi')&&typeof(Mmenu)!=='undefined'){const settings=drupalSettings.responsive_menu;const position=settings.position,theme=settings.theme,pagedim=settings.pagedim;const options={extensions:[theme,'fx-menu-slide',position==='left'?'position-left':'position-right'],keyboardNavigation:{enable:true,enhance:true,},drag:{open:settings.drag}};if(pagedim!=='none'){options.extensions.push(pagedim);}
const config={classNames:{selected:'menu-item--active-trail'}};if(typeof settings.custom!=='undefined'){if(typeof settings.custom.options!=='undefined'){extend(options,drupalSettings.responsive_menu.custom.options);}
if(typeof drupalSettings.responsive_menu.custom.config!=='undefined'){extend(config,drupalSettings.responsive_menu.custom.config);}}
const mmenu=new Mmenu(mmenuId,options,config);const mmenuApi=mmenu.API;const viewports=document.getElementsByName('viewport');if(viewports.length!==0&&settings.modifyViewport){const viewportMeta=viewports[0]
const defaultViewport=viewports[0].content
const staticViewport="width=device-width, initial-scale=1.0, minimum-scale=1.0";mmenuApi.bind('open:start',function(){viewportMeta.setAttribute('content',staticViewport);});mmenuApi.bind('close:start',function(){viewportMeta.setAttribute('content',defaultViewport);});}}}};})();const extend=function(out){out=out||{};for(let i=1;i<arguments.length;i++){if(!arguments[i])
continue;for(let key in arguments[i]){if(arguments[i].hasOwnProperty(key))
out[key]=arguments[i][key];}}
return out;};;(function($,once){var deprecatedMessageSuffix="is deprecated in Drupal 9.3.0 and will be removed in Drupal 10.0.0. Use the core/once library instead. See https://www.drupal.org/node/3158256";var originalJQOnce=$.fn.once;var originalJQRemoveOnce=$.fn.removeOnce;$.fn.once=function jQueryOnce(id){Drupal.deprecationError({message:"jQuery.once() ".concat(deprecatedMessageSuffix)});return originalJQOnce.apply(this,[id]);};$.fn.removeOnce=function jQueryRemoveOnce(id){Drupal.deprecationError({message:"jQuery.removeOnce() ".concat(deprecatedMessageSuffix)});return originalJQRemoveOnce.apply(this,[id]);};var drupalOnce=once;function augmentedOnce(id,selector,context){originalJQOnce.apply($(selector,context),[id]);return drupalOnce(id,selector,context);}
function remove(id,selector,context){originalJQRemoveOnce.apply($(selector,context),[id]);return drupalOnce.remove(id,selector,context);}
window.once=Object.assign(augmentedOnce,drupalOnce,{remove:remove});})(jQuery,once);;(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_custom_js={attach:function(context,settings){var showHiddenTabletMobileAds=function(){if(themeBreakpoints.currentBreakpoint.name=='tablet'){$('.block-region-content-right .block-ad-displayrec-01-general-tablet-desktop, .block-region-content-right .block-ad-displayrec-02-general-tablet-desktop').show();}}
if(settings.noAds!=1){$(window).resize(showHiddenTabletMobileAds());if(settings.dfp_custom&&(settings.dfp_custom.adsArr||settings.autonews_homepage_ads)){var skipDesktopElesWrapper='.desktop-show, .view-this-week-issue-archive',uninitializedAdClass='initialization-disabled';var skipArticles=function(articles,total){for(var i=0;i<total;i++){if($(articles[i]).parents(skipDesktopElesWrapper).length>0){articles.splice(i,1);i--;total--;}}
return total;};if(!settings.autonews_homepage_ads){showHiddenTabletMobileAds();var articleContentType=((settings.dfp_custom.potmListingParagrahpLading===2)?'.view-grouping.potm-content .views-row':(settings.dfp_custom.potmListingParagrahpLading===1)?'.view-grouping.potm-content':'[data-content-type]:not([data-content-type=""])'),articles=$(articleContentType),variants=[],total=articles.length;total=skipArticles(articles,total);var setGeneralAds=function(){var notSetGUID=arguments[0]||false;$.each(settings.dfp_custom.adsArr,function(idx,vals){idx=+idx;if(articles[idx]||settings.dfp_custom.isAN==1){var parentEle=articles[idx]?articles[idx]:'',containers='';if(articles.prop("tagName")==='TR'){parentEle=articles[idx].closest('table');}
if(notSetGUID===true){$.each(vals,function(cidx,cval){containers+=cval;});}
else{$.each(vals,function(sidx,val){var adsClassName='crain-advertisement '+sidx;adsClassName=adsClassName.split(' ').filter(function(val){if(val){return val;}}).join('.');if((drupalSettings.dfp_custom.isAN==1||parentEle)&&$(parentEle).next('.'+adsClassName).length==0){var adDisplay=$(val);$.each(adDisplay,function(idx,item){var $item=$(item),adDisplayDFP=$item.find('[id^=google-dfp]');var guid=_.guid();$item.attr('id','ad-entity-'+guid);adDisplayDFP.attr('id','google-dfp'+guid);});adsClassName='crain-advertisement '+sidx;containers+='<div class="crain-advertisement '+sidx+'" data-sub-idx="'+sidx+'" data-parent-idx="'+idx+'">'+$('<div>').append(adDisplay).html()+'</div>';variants.push(adDisplay);}});}
if(containers!=''&&$(containers).hasClass('block-photo-flipper')&&$('.block-photo-flipper').length>0){if(!$('.block-photo-flipper').next('div').hasClass('crain-advertisement')){$(containers).insertAfter('.block-photo-flipper');containers='';}
else{containers='';}}
if(containers!=''&&$(containers).hasClass('view-crain-middle-v1')&&$('.view-crain-middle-v1').length>0){var middleV1ArticleClass='.view-crain-middle-v1 .views-row',middleV1Articles=$(middleV1ArticleClass),middleV1ArticlesCount=middleV1Articles.length||0;if(middleV1ArticlesCount>idx){$(containers).insertAfter($(middleV1Articles[idx]));containers='';}}
containers!=''?(parentEle?$(containers).insertAfter(parentEle):($('article .region-featured-left').length>0?$(containers).appendTo($('article .region-featured-left')[0]):$(containers).appendTo($('article .region-featured-right')[0]))):'';if(containers!=''){containers=$(containers);if(containers.hasClass('native_sponsor')){containers.find('[data-dfp-sizes]').css({'width':containers.parent().css('width')});}}}});};}
if(settings.dfp_custom.section_pages){$($(document),context).once('addTabletAds').each(setGeneralAds);if(settings.dfp_custom.isAN!=1){var recNumber=0,container='',startKey=0;$.each(settings.dfp_custom.adsArr,function(key,vals){$.each(vals,function(idx,val){var html='<div class="crain-advertisement '+idx+'">'+val+'</div>';if(idx=='mobile'){container+=html;startKey=+key;return;}});});var prefixStart=startKey;if(settings.dfp_custom.home_page==1){prefixStart+=2;}
var total_page_item='',pager_number='',pager='',totalAdsCount=settings.dfp_custom.total?settings.dfp_custom.total:20;if($('ul.pager__items li').hasClass('is-active')){pager=$('ul.pager__items li.is-active a');if(pager.length>0){var pager_link=pager.attr('href');pager_number=parseInt(pager_link[pager_link.length-1]);total_page_item=15;if(settings.site_code=='aac'){if((typeof settings.dfp_custom.adsSlots=='object')&&settings.dfp_custom.adsSlots.length>0){setGeneralAds(true);window.googletag.pubads().refresh(settings.dfp_custom.adsSlots);}
else{settings.dfp_custom.adsSlots=[];window.addEventListener('adEntity:initialized',function(evt){var slot=evt.detail.container.ad_tag.data('slot'),crainWrapper=$(evt.detail.container.el).parents('.crain-advertisement');if(slot&&(crainWrapper.length>0)){crainWrapper=$(crainWrapper[0]);settings.dfp_custom.adsSlots.push(evt.detail.container.ad_tag.data('slot'));settings.dfp_custom.adsArr[crainWrapper.attr('data-parent-idex')]={};settings.dfp_custom.adsArr[crainWrapper.attr('data-parent-idx')][crainWrapper.attr('data-sub-idx')]=crainWrapper[0].outerHTML;}});}}}}
if(settings.site_code!='aac'){$.each(articles,function(idx,article){if(pager_number!=0&&total_page_item!='undefined'&&total_page_item!=''){if(((idx+(total_page_item*pager_number)+pager_number)%6)===0&&$(article).next('.crain-advertisement.mobile').length==0){var recNumber=((idx+(total_page_item*pager_number)+pager_number)/6+prefixStart);if(recNumber<=totalAdsCount){getAdUnit(recNumber,article);}}}
else{if(((idx===startKey)||((idx+1)%6)===0)&&$(article).next('.crain-advertisement.mobile').length==0){var recNumber=(idx===startKey)?prefixStart:((idx+1)/6+prefixStart);if(recNumber<=totalAdsCount){getAdUnit(recNumber,article);}}}});}}}
else if(settings.autonews_homepage_ads){var ads=settings.autonews_homepage_ads;if(ads&&typeof ads=='object'){var articleContentType='.autonews .top [data-content-type]:not([data-content-type=""])',middleV1ArticleClass='.autonews .left .view-crain-middle-v1 .views-row',topArticles=$(articleContentType),middleV1Articles=$(middleV1ArticleClass),topArticleCount=topArticles.length||0,middleV1ArticlesCount=middleV1Articles.length||0,totalArticles=topArticleCount+middleV1ArticlesCount,desktopTabletAds=ads.desktop_tablet,mobileAds=ads.mobile,variants=[];var insertAutoNewsHomeAds=function(ads){$.each(ads,function(key,ad){var middle=ad.middle||0,pos=ad.pos||0,render=ad.render;$render=$(render);if(middle==1&&middleV1ArticlesCount>pos){$render.insertAfter($(middleV1Articles[pos]));}
else{if(pos<topArticleCount){$render.insertAfter($(topArticles[pos]));}
else{$render.insertAfter($(middleV1Articles[pos-topArticleCount]));}}});};if(totalArticles>0){insertAutoNewsHomeAds(desktopTabletAds);topArticleCount=skipArticles(topArticles,topArticleCount);middleV1ArticlesCount=skipArticles(middleV1Articles,middleV1ArticlesCount);totalArticles=topArticleCount+middleV1ArticlesCount;insertAutoNewsHomeAds(mobileAds);}}}
else{setGeneralAds();}
function getAdUnit(recNumber,article){var customTargeting={},adDisplay=$(container).find('[data-ad-entity]'),adDisplayDFP=adDisplay.find('[id^=google-dfp]'),guid=_.guid();if(adDisplay.length>0&&adDisplayDFP.length>0){adDisplay.attr('id','ad-entity-'+guid);adDisplayDFP.attr('id','google-dfp'+guid);adDisplay.html(adDisplayDFP[0].outerHTML);var targetings=JSON.parse($(adDisplay).attr('data-ad-entity-targeting'))||{};if(targetings.pos){var pos=targetings.pos.split('_');if(recNumber<=9){pos[1]='0'+recNumber;}
else{pos[1]=recNumber;}
customTargeting.pos=pos.join('_');}
_.extend(targetings,customTargeting);adDisplay.attr('data-ad-entity-targeting',JSON.stringify(targetings));variants.push(adDisplay);$($(container).html(adDisplay[0].outerHTML)[0].outerHTML).insertAfter(article);}}
var resetAdsPositionTopBottomRight=function(){var prefixAn=settings.autonews_homepage_ads?'.an-right':'',rightBlockAds=$('.block-region-content-right'+prefixAn+' [data-block-plugin-id^="ad_display"]'),rightBlockAdsLength=rightBlockAds.length||0,rightComponentBlock=$('.block-region-content-right'+prefixAn+' [data-block-plugin-id]:not([data-block-plugin-id^="ad_display"])'),rightComponentBlockLength=rightComponentBlock.length||0,autonewSectionFrontPages=$('.block-region-content-right[class*="crain-autonews-"]'),leftAdsCount=0,insertAfter=arguments[0]||false;var sponsorBlockWrapper=false;var isAwardProgramPage=false;var citybookArticle=false;if(drupalSettings.site_code=='can'||drupalSettings.site_code=='cane'){isAwardProgramPage=$("body").hasClass("page-node-type-award-program");if(isAwardProgramPage==true){sponsorBlockWrapper=$("div").hasClass("sponsored-block-wrapper");}}
if(($.inArray(drupalSettings.site_code,['ccl','cdb','cny'])>-1)&&($('.node--type-article.node--view-mode-full').length>=1)){citybookArticle=true;}
if(rightBlockAdsLength>0){if(rightComponentBlockLength>0&&sponsorBlockWrapper!=true){var separate=Math.round(rightComponentBlockLength/rightBlockAdsLength);if(settings.autonews_homepage_ads){rightBlockAds.each(function(idx){if(rightBlockAdsLength==1){$(this).insertAfter($(rightComponentBlock[Math.ceil(rightComponentBlockLength/2)-1]));}
else{var pos=separate*(idx+1)-1;if(pos<rightComponentBlockLength){insertAfter===true?$(this).insertAfter($(rightComponentBlock[pos])):$(this).insertBefore($(rightComponentBlock[pos]));}
else{$(this).insertAfter($(rightComponentBlock[rightComponentBlockLength-1]));}}});}
else if(autonewSectionFrontPages.length>0){leftAdsCount=rightBlockAdsLength-rightComponentBlockLength;switch(rightComponentBlockLength){case 1:$.each(rightComponentBlock,function(key,ads){if(key<rightBlockAdsLength-1){$(rightBlockAds[key]).insertBefore(rightComponentBlock);}});break;case 2:case 3:$.each(rightComponentBlock,function(key,ele){if(rightBlockAdsLength>key){$(rightBlockAds[key]).insertBefore($(ele));}});break;case 4:leftAdsCount=rightBlockAdsLength;$.each(rightComponentBlock,function(key,ele){if(rightBlockAdsLength>key&&key%2==0){$(rightBlockAds[key]).insertBefore($(ele));leftAdsCount--;}});break;case 5:leftAdsCount=rightBlockAdsLength;$.each(rightComponentBlock,function(key,ele){if(rightBlockAdsLength>key&&key<2){$(rightBlockAds[key]).insertAfter($(ele));leftAdsCount--;}});break;}
while(leftAdsCount>0){$(rightBlockAds[rightBlockAdsLength-leftAdsCount]).insertAfter($(rightComponentBlock[rightComponentBlockLength-1]));leftAdsCount--;}}
else{if(($('.node--view-mode-cmh_full, .node--view-mode-cmh_full_thub, .node--type-article.node--view-mode-ccb_full, .node--type-article.node--view-mode-crain_polymer').length<1)&&citybookArticle==false){rightBlockAds.each(function(idx){if((rightComponentBlockLength==1)&&(idx<=1)){(idx===0)?$(this).insertBefore($(rightComponentBlock[0])):$(this).appendTo($(rightComponentBlock[0]));}
else if((rightComponentBlockLength>=2)&&(rightBlockAdsLength>=2)&&(idx<=1)){(idx===0)?$(this).insertBefore($(rightComponentBlock[0])):$(this).appendTo($(rightComponentBlock[1]));}
else{if(settings.isAacArticle!=1){$(this).appendTo($(rightComponentBlock[rightComponentBlockLength-1]));}}});}}}
else{if(settings.isAacArticle!=1&&settings.isCpeArticle!=1&&settings.isTermPage!=1&&settings.isSearchPage!=1){$.each(rightBlockAds,function(idx,ad){$($('.block-region-content-right')[0]).append($(ad));});}}}
var topBlockAds=$('.block-region-content-top > [data-block-plugin-id^="ad_display"][data-block-plugin-id*="lb_"]');if(topBlockAds.length>0){$('.block-region-content-top').prepend(topBlockAds);}
if(settings.isSearchPage==1&&($(window).width()<768)){$('.block-region-content-bottom').append($('.sponsored-content-block'));}
var bottomBlockAds=$('.block-region-content-bottom > [data-block-plugin-id^="ad_display"][data-block-plugin-id*="lb_"]');var nodeDetail=$('.node--type-article.node--view-mode-full');if(bottomBlockAds.length>0&&$('.node--type-work.node--view-mode-full').length<1&&(settings.site_code=='ccl'&&nodeDetail.length<1)){$('.block-region-content-bottom').prepend(bottomBlockAds);}};if(settings.site_code!='cpi'){$($(document),context).once('resetAdsPositionTopBottomRight').each(function(){resetAdsPositionTopBottomRight(false);});}
if(settings.dfp_custom.dataDfpUnitSuffix){var adElements=$('[data-dfp-unit]'),uninitializedAd=$('.'+uninitializedAdClass),hashValues=window.location.hash||'',adUnit=settings.dfp_ad_unit_override||'',testSection='',testTargeting='',spcTargeting='',unitTargeting='',adunitOveridePath='';hashValues=hashValues.split('&'),filterEmptyFunc=function(val){if(val){return true;}
else{return false;}};$.each(hashValues,function(idx,value){var values=value.split('=');if(['cci_test','#cci_test'].indexOf(values[0])>=0){testSection=testSection||'test';testTargeting=values[1]||testTargeting;unitTargeting='test';}
if(['aao_spc','#aao_spc'].indexOf(values[0])>=0){testTargeting=values[1]||testTargeting;unitTargeting='aao_spc';}
if(['adunit_path','#adunit_path'].indexOf(values[0])>=0){adunitOveridePath=values[1]||adunitOveridePath;}});if(adunitOveridePath){var adPaths=settings.dfp_custom.dataDfpUnitSuffix.split('/');settings.dfp_custom.dataDfpUnitSuffixModified=adPaths[adPaths.length-1];}
else{settings.dfp_custom.dataDfpUnitSuffixModified=settings.dfp_custom.dataDfpUnitSuffix;}
$.each(adElements,function(idx,adElement){adUnit=adUnit!=''?adUnit:$(adElement).attr('data-dfp-unit').split('/')[0];if(testSection){var adUnitPath=_.filter([adUnit,testSection],filterEmptyFunc);}
else{var adUnitPath=_.filter([adUnit,adunitOveridePath,settings.dfp_custom.dataDfpUnitSuffixModified],filterEmptyFunc);}
$(adElement).attr('data-dfp-unit',adUnitPath.join('/'));});if(settings.dfp_custom.targeting||testTargeting){var adElementsTargeting=$('[data-ad-entity-targeting]'),customTargeting=settings.dfp_custom.targeting?JSON.parse(settings.dfp_custom.targeting):{},targeting={};$.each(customTargeting,function(idx,target){delete customTargeting[idx];idx=idx.replace('adunit',adUnit);customTargeting[idx]=target;});$.each(adElementsTargeting,function(idx,adElement){targeting=JSON.parse($(adElement).attr('data-ad-entity-targeting'))||{};_.extend(targeting,customTargeting);if(testTargeting){targeting[unitTargeting]=testTargeting;}
$(adElement).attr('data-ad-entity-targeting',JSON.stringify(targeting));});}}
var iterativeGetWidth=function(ele){var width=ele.css('width');if(parseInt(width)>0){return width;}
return iterativeGetWidth(ele.parent());}
var resizeNativeAds=function(){var nativeAds=$('[data-ad-entity-targeting*=NTV_] [data-dfp-sizes], [data-ad-entity-targeting*=ntv_] [data-dfp-sizes]');var filterNativeAds=nativeAds.filter(function(){return JSON.parse(this.parentElement.getAttribute('data-ad-entity-targeting')).pos.match(/ntv_(\d)+/i);});filterNativeAds.each(function(idx,element){if($(element).parents('.native_sponsor').length>0){var width=iterativeGetWidth($(element).parents('.native_sponsor').parent());$(element).css({'width':width});}
else{var width=iterativeGetWidth($(element).parent());$(element).css({'width':width});}});};$(window).resize(resizeNativeAds);$(window).on('load',resizeNativeAds);}}}};})(window.adEntity,jQuery,Drupal,drupalSettings);;var jamData=[],globalTargeting={};(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_desktop_custom={attach:function(context,settings){$(window).on("load",function(){if($(".view-content.view-display-id-page_1 .view-filters select#edit-type").length>0){$(".view-content.view-display-id-page_1 .view-filters select#edit-type").chosen({width:"210px"});}
$(".view-content.view-display-id-page_1 .view-filters select#edit-type").trigger("chosen:updated");$('#edit_type_chosen ul li input.chosen-search-input').val('Choose some options');$('#edit-moderation-state').children('optgroup').children().unwrap();});$($(document),context).once('addMobileAds').each(function(){if(settings.noAds!=1&&(settings.dfp_custom_desktop&&settings.dfp_custom_desktop.adsArr)&&(settings.path.isFront)){var articleContentType='[data-region-name]:not([data-region-name=""])',skipDesktopElesWrapper='.desktop-show',uninitializedAdClass='initialization-disabled',articles=$(articleContentType),variants=[],total=articles.length;var count=0;for(var i=0;i<total;i++){if($(articles[i]).parents(skipDesktopElesWrapper).length>0){articles.splice(i,1);i--;total--;}}
$.each(settings.dfp_custom_desktop.adsArr,function(idx,vals){idx=+idx;if(articles[idx]){var parentEle=$('.block-block-content'),containers='';var numItems=$('.block-region-content-right .block-block-content').length;$.each(vals,function(idx,val){if(val.length>0){containers+='<div class="crain-advertisement '+idx+'">'+val+'</div>';variants.push($(val));}});if(numItems>0){if(count==0){$(".block-region-content-right > div:nth-child(1)").before(containers);}
else{$(".block-region-content-right > div:nth-child(3)").after(containers);}
if(numItems==1){$(".block-region-content-right > div:nth-child(2)").after(containers);}}
else{var parentEle=$('.block-region-content-right');parentEle?$(containers).insertAfter(parentEle):'';}}
count=count+1;});if(settings.dfp_custom_desktop.dataDfpUnitSuffix){var adElements=$('[data-dfp-unit]'),uninitializedAd=$('.'+uninitializedAdClass),hashValues=window.location.hash||'',adUnit=settings.dfp_ad_unit_override||'',testSection='',testTargeting='',spcTargeting='',unitTargeting='',adunitOveridePath='';hashValues=hashValues.split('&'),filterEmptyFunc=function(val){if(val){return true;}
else{return false;}};$.each(hashValues,function(idx,value){var values=value.split('=');if(['cci_test','#cci_test'].indexOf(values[0])>=0){testSection=testSection||'test';testTargeting=values[1]||testTargeting;unitTargeting='test';}
if(['aao_spc','#aao_spc'].indexOf(values[0])>=0){testTargeting=values[1]||testTargeting;unitTargeting='aao_spc';}
if(['adunit_path','#adunit_path'].indexOf(values[0])>=0){adunitOveridePath=values[1]||adunitOveridePath;}});if(adunitOveridePath){var adPaths=settings.dfp_custom_desktop.dataDfpUnitSuffix.split('/');settings.dfp_custom_desktop.dataDfpUnitSuffix=adPaths[adPaths.length-1];}
$.each(adElements,function(idx,adElement){adUnit=adUnit!=''?adUnit:$(adElement).attr('data-dfp-unit').split('/')[0];if(testSection){var adUnitPath=_.filter([adUnit,testSection],filterEmptyFunc);}
else{var adUnitPath=_.filter([adUnit,adunitOveridePath,settings.dfp_custom_desktop.dataDfpUnitSuffix],filterEmptyFunc);}
$(adElement).attr('data-dfp-unit',adUnitPath.join('/'));if(testTargeting){var adElementsTargeting=$(adElement).parent('[data-ad-entity-targeting]'),targeting=JSON.parse($(adElementsTargeting).attr('data-ad-entity-targeting'))||{};targeting[unitTargeting]=testTargeting;$(adElementsTargeting).attr('data-ad-entity-targeting',JSON.stringify(targeting));}});}}});}};})(window.adEntity,jQuery,Drupal,drupalSettings);;(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_sponsored_custom={attach:function(context,settings){$($(document),context).once('addSponsoredDFPAds').each(function(){if(settings.noAds!=1){var resetSponsoredAds=$('.sponsored-dfp-ads-reset');$.each(resetSponsoredAds,function(idx,elem){var dfpTargetPos=$(elem).data('reset-target-pos'),adDisplay=$(elem).find('[data-ad-entity-targeting]');if(adDisplay.length>0){var targetings=JSON.parse($(adDisplay).attr('data-ad-entity-targeting'))||{};_.extend(targetings,{"pos":dfpTargetPos});adDisplay.attr('data-ad-entity-targeting',JSON.stringify(targetings));}});}});}};})(window.adEntity,jQuery,Drupal,drupalSettings);;(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_sponsored_taxonomy_custom={attach:function(context,settings){if(settings.noAds!=1&&settings.sponsored_taxonomy_dfp_ads&&(settings.sponsored_taxonomy_dfp_ads.block||settings.sponsored_taxonomy_dfp_ads.nativeBlock)){var sponsoredTaxonomyDFPBlock=settings.sponsored_taxonomy_dfp_ads.block,nativeSponsoredTaxonomyDFPBlock=settings.sponsored_taxonomy_dfp_ads.nativeBlock,dfpUnitId=(settings.dfp_custom&&settings.dfp_custom.dataDfpUnitSuffix)?settings.dfp_custom.dataDfpUnitSuffix:(settings.dfp_article_custom&&settings.dfp_article_custom.dataDfpUnitSuffix?settings.dfp_article_custom.dataDfpUnitSuffix:''),fixedSponsoredPos='data-ad-entity-fixed-pos',fixedSponsorAds=$('['+fixedSponsoredPos+']:not(['+fixedSponsoredPos+'=""])'),fixedPos=[];if(fixedSponsorAds.length>0){fixedSponsorAds.each(function(idx,value){fixedPos.push($(value).attr(fixedSponsoredPos));});}
_.mixin({guid:function(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});}});var resetSponsoredAdTag='[data-dfp-sponsored-category]:not([data-dfp-sponsored-category=""]):not([data-dfp-native-sponsored])',resetSponsoredAds=$(resetSponsoredAdTag),resetNativeSponsoredAdTag='[data-dfp-sponsored-category][data-dfp-native-sponsored]:not([data-dfp-sponsored-category=""])',resetNativeSponsoredAds=$(resetNativeSponsoredAdTag),variants=[],hashValues=window.location.hash||'',adUnit=settings.dfp_ad_unit_override||'',testSection='',testTargeting='',spcTargeting='',unitTargeting='',adunitOveridePath='',hashValues=hashValues.split('&'),filterEmptyFunc=function(val){if(val){return true;}
else{return false;}};$.each(hashValues,function(idx,value){var values=value.split('=');if(['cci_test','#cci_test'].indexOf(values[0])>=0){testSection=testSection||'test';testTargeting=values[1]||testTargeting;unitTargeting='test';}
if(['aao_spc','#aao_spc'].indexOf(values[0])>=0){testTargeting=values[1]||testTargeting;unitTargeting='aao_spc';}
if(['adunit_path','#adunit_path'].indexOf(values[0])>=0){adunitOveridePath=values[1]||adunitOveridePath;}});if(adunitOveridePath){var adPaths=dfpUnitId.split('/');dfpUnitId=adPaths[adPaths.length-1];}
var max=20,existedLogoAds=$('[data-dfp-sponsored-category]:not([data-dfp-native-sponsored]) [data-ad-entity-targeting]').length,existedNativeLogoAds=$('[data-dfp-sponsored-category][data-dfp-native-sponsored] [data-ad-entity-targeting]').length,leftLogoAds=max-existedLogoAds,leftNativeLogoAds=max-existedNativeLogoAds;var changeSponsorAdsPos=function(existedLogoAds,pos,max){if(existedLogoAds<=8){pos[1]='0'+(existedLogoAds+1);}
else{pos[1]=(existedLogoAds+1);}
++existedLogoAds;leftLogoAds=max-existedLogoAds;return[existedLogoAds,leftLogoAds];};var replaceSponsoredLogoAds=function(leftLogoAds,resetSponsoredAds,sponsoredTaxonomyDFPBlock,adUnit,existedLogoAds,max,variants,testSection,fixedPos,native){if(leftLogoAds>0){$.each(resetSponsoredAds,function(idx,elem){if(leftLogoAds<1){return;}
var sponsoredCategory=$(elem).data('dfp-sponsored-category'),sponsoredArticleGUID=$(elem).data('dfp-sponsored-uuid'),sponsoredTaxonomyDFPBlockClone=_.clone(sponsoredTaxonomyDFPBlock);if(!$(elem).find('[data-ad-entity-targeting]').length){$(elem).append(sponsoredTaxonomyDFPBlockClone);if(typeof native!=='undefined'&&native){$(elem).find('[data-dfp-sizes]').css({'width':$(elem).parent().css('width')});}
var adDisplay=$(elem).find('[data-ad-entity-targeting]'),adUnitTag=$($(elem).find('[data-dfp-unit]')[0]),targetings=adDisplay.length>0?JSON.parse($(adDisplay).attr('data-ad-entity-targeting')):{},adDisplayDFP=adDisplay.find('[id^=google-dfp]'),guid=_.guid(),customTargeting={};if(!adUnit&&adUnitTag.length){var adUnitTagAttr=adUnitTag.attr('data-dfp-unit');if(adUnitTagAttr){adUnit=adUnitTagAttr.split('/')[0];}}
adDisplay.attr('id','ad-entity-'+guid);adDisplayDFP.attr('id','google-dfp'+guid);targetings.pos=targetings.pos?targetings.pos:'NIV_01';targetings.category=targetings.category?targetings.category:'Sponsored 1';var pos=targetings.pos.split('_');var remain=changeSponsorAdsPos(existedLogoAds,pos,max);existedLogoAds=remain[0];leftLogoAds=remain[1];posJoin=pos.join('_');while(fixedPos.indexOf(posJoin)>-1&&leftLogoAds>0){remain=changeSponsorAdsPos(existedLogoAds,pos,max);posJoin=pos.join('_');existedLogoAds=remain[0];leftLogoAds=remain[1];}
customTargeting.pos=pos.join('_');var category=targetings.category.split(' ');category[1]=sponsoredCategory;customTargeting[adUnit+'_cat']=category.join(' ');customTargeting.guid=sponsoredArticleGUID;delete(targetings.category);if(testTargeting){targetings[unitTargeting]=testTargeting;}
_.extend(targetings,customTargeting);adDisplay.attr('data-ad-entity-targeting',JSON.stringify(targetings));variants.push($(elem).find('[data-ad-entity]')[0]);if(testSection){var adUnitPath=_.filter([adUnit,testSection],filterEmptyFunc);}
else{var adUnitPath=_.filter([adUnit,adunitOveridePath,dfpUnitId],filterEmptyFunc);}
adUnitTag.attr('data-dfp-unit',adUnitPath.join('/'));}});}};if(sponsoredTaxonomyDFPBlock){replaceSponsoredLogoAds(leftLogoAds,resetSponsoredAds,sponsoredTaxonomyDFPBlock,adUnit,existedLogoAds,max,variants,testSection,fixedPos,false);}
if(nativeSponsoredTaxonomyDFPBlock){replaceSponsoredLogoAds(leftNativeLogoAds,resetNativeSponsoredAds,nativeSponsoredTaxonomyDFPBlock,adUnit,existedNativeLogoAds,max,variants,testSection,fixedPos,true);}
var resizeNativeAdsSize=function(){$('[data-ad-entity="ad_entity_sponsored_taxonomy_logo_native"] [data-dfp-sizes]').each(function(idx,element){$(element).css({'width':$(element).parents(resetNativeSponsoredAdTag).parent().css('width')});});};$(window).resize(resizeNativeAdsSize);$(window).on('load',resizeNativeAdsSize);}}};})(window.adEntity,jQuery,Drupal,drupalSettings);;(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_custom_article_js={attach:function(context,settings){$($(document),context).once('addArticleParagraphAds').each(function(){if(settings.noAds!=1&&$('body.page-node-type-article .layout-container.aa-full-article-page').length<1&&settings.dfp_article_custom){var articleParagrahTag='.article-paragraph p, .node--type-whitepaper .field--name-body p, .node--type-work .field--name-body p',articleParagrahs=$(articleParagrahTag);articleParagrahs.each(function(){if($(this).html().replace(/\s|&nbsp;/g,'').length==0){$(this).addClass("empty-para");}});articleParagrahs=articleParagrahs.not(".empty-para, .article-main-image-caption p");_.mixin({guid:function(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});}});var skipElesWrapper='.video-js,.item--paragraph--type--factbox,.article-main-image-wrapper,.paragraph--type--photo-gallery',uninitializedAdClass='initialization-disabled',variants=[],uninitializedAd=[],total=articleParagrahs.length,inlineIdio=$('.article-recommended-inline');for(var i=0;i<total;i++){var numbers;if(inlineIdio.length>0){inlineIdio.each(function(){var n=$(this).attr('class');numbers=parseInt(n.match(/\d+/),10);if(numbers==i){articleParagrahs[i-1].className="crain-idio-inline-"+numbers;$(this).insertAfter(".crain-idio-inline-"+numbers);$(this).show();}});}
if($(articleParagrahs[i]).parents(skipElesWrapper).length>0){articleParagrahs.splice(i,1);i--;total--;}}
if(settings.dfp_article_custom.adsArr){$.each(settings.dfp_article_custom.adsArr,function(idx,vals){if(idx=='last'){idx=total-1;}
else{idx=+idx;}
if('cpi'===settings.site_code&&articleParagrahs.length===(idx+1)){return false;}
if(articleParagrahs[idx]||settings.dfp_article_custom.isAN==1){var parentEle=articleParagrahs[idx],containers='';var allowAfterone=settings.dfp_article_custom.allowAfterone||0;$.each(vals,function(k,val){if(val){if(($.inArray(settings.site_code,['ccb','ccl','cdb','cny'])>-1)&&idx==3&&k=="tablet desktop"){k="tablet";val=val.replace(',"desktop","narrow"','');}
var count=variants.length;containers+='<div class="crain-advertisement '+k+' adscount'+count+'">'+val+'</div>';variants.push($(val));}});parentEle?parentEle.classList.add('inline-ad-para'):'';containers=$(containers);parentEle?((idx==0&&allowAfterone==0)?containers.insertBefore(parentEle):(parentEle.className.indexOf('crain-idio-inline-')>-1?containers.insertAfter(parentEle.nextSibling):containers.insertAfter(parentEle))):($('article .region-featured-left').length>0?containers.appendTo($('article .region-featured-left')[0]):containers.appendTo($('article .region-featured-right')[0]));if(containers.hasClass('native_sponsor')){if(containers.hasClass('half')){var articleFieldItem='.article-paragraph > .field__item, .article-paragraph.field__item',articleFieldItems=$(articleFieldItem);articleFieldItems.each(function(index,value){if((index==0)&&$(this).find('.image-mugshot-left').length>0){containers.find('[data-dfp-sizes]').closest('.native_sponsor').addClass('image-mugshot-left_exist');containers.find('[data-dfp-sizes]').addClass('image-mugshot-left_exist');}});if($('.article-main-image-wrapper').hasClass('image-mugshot-left')){containers.find('[data-dfp-sizes]').closest('.native_sponsor').addClass('image-mugshot-left_exist');containers.find('[data-dfp-sizes]').addClass('image-mugshot-left_exist');}
containers.find('[data-dfp-sizes]').css({'width':parseInt(containers.parents('[data-block-plugin-id="entity_field:node:field_paragraphs"]').css('width'))/2+'px'});}
else{containers.find('[data-dfp-sizes]').css({'width':containers.parents('[data-block-plugin-id="entity_field:node:field_paragraphs"]').css('width')});}}}});if(settings.dfp_article_custom.adsArr[3]&&settings.dfp_article_custom.noIncrement!=1){var paragraphs=$('.item--paragraph--type--body .field--name-field-paragraph-body p');var startKey=2;var containers='';var tab_desktop_val=settings.dfp_article_custom.adsArr[3]["tablet desktop"]||'';var mobile_val=settings.dfp_article_custom.adsArr[3].mobile||'';var tab_val=settings.dfp_article_custom.adsArr[3]['tablet']||'';var isAN=location.host.indexOf('.autonews.com')==-1?0:1;$.each(paragraphs,function(idx,paragraph){var count=variants.length;if(idx>10){if(((idx+1)%6)==0){var recNumber=((idx+1)/6)+startKey;if(isAN===1){var recMobile=recNumber;}
else{var recMobile=((idx+1)/6);}
if(recNumber<21){if(tab_desktop_val){containers='<div class="crain-advertisement tablet desktop adscount'+count+'">'+tab_desktop_val+'</div>';getAdUnit(recNumber,paragraph,containers);}}
if(recMobile<21){if(tab_val){containers='<div class="crain-advertisement tablet adscount'+count+'">'+tab_val+'</div>';getAdUnit(recMobile,paragraph,containers);}
if(mobile_val){containers='<div class="crain-advertisement mobile adscount'+count+'">'+mobile_val+'</div>';getAdUnit(recMobile,paragraph,containers);}}}}});function getAdUnit(recNumber,paragraph,containers){var customTargeting={},adDisplay=$(containers).find('[data-ad-entity]'),adDisplayDFP=adDisplay.find('[id^=google-dfp]'),guid=_.guid();if(adDisplay.length>0&&adDisplayDFP.length>0){adDisplay.attr('id','ad-entity-'+guid);adDisplayDFP.attr('id','google-dfp'+guid);adDisplay.html(adDisplayDFP[0].outerHTML);var targetings=JSON.parse($(adDisplay).attr('data-ad-entity-targeting'))||{};if(targetings.pos){var pos=targetings.pos.split('_');if(recNumber<=9){pos[1]='0'+recNumber;}
else{pos[1]=recNumber;}
customTargeting.pos=pos.join('_');}
_.extend(targetings,customTargeting);adDisplay.attr('data-ad-entity-targeting',JSON.stringify(targetings));variants.push(adDisplay);$($(containers).html(adDisplay[0].outerHTML)[0].outerHTML).insertAfter(paragraph);}}}}
if(settings.dfp_article_custom.dataDfpUnitSuffix){var adElements=$('[data-dfp-unit]'),uninitializedAd=$('.'+uninitializedAdClass),hashValues=window.location.hash||'',adUnit=settings.dfp_ad_unit_override||'',testSection='',testTargeting='',spcTargeting='',unitTargeting='',adunitOveridePath='';hashValues=hashValues.split('&'),filterEmptyFunc=function(val){if(val){return true;}
else{return false;}};$.each(hashValues,function(idx,value){var values=value.split('=');if(['cci_test','#cci_test'].indexOf(values[0])>=0){testSection=testSection||'test';testTargeting=values[1]||testTargeting;unitTargeting='test';}
if(['aao_spc','#aao_spc'].indexOf(values[0])>=0){testTargeting=values[1]||testTargeting;unitTargeting='aao_spc';}
if(['adunit_path','#adunit_path'].indexOf(values[0])>=0){adunitOveridePath=values[1]||adunitOveridePath;}});if(adunitOveridePath){var adPaths=settings.dfp_article_custom.dataDfpUnitSuffix.split('/');settings.dfp_article_custom.dataDfpUnitSuffix=adPaths[adPaths.length-1];}
$.each(adElements,function(idx,adElement){adUnit=adUnit!=''?adUnit:$(adElement).attr('data-dfp-unit').split('/')[0];if(testSection){var adUnitPath=_.filter([adUnit,testSection],filterEmptyFunc);}
else{var adUnitPath=_.filter([adUnit,adunitOveridePath,settings.dfp_article_custom.dataDfpUnitSuffix],filterEmptyFunc);}
$(adElement).attr('data-dfp-unit',adUnitPath.join('/'));});}
if(settings.dfp_article_custom.targeting||testTargeting){var adElementsTargeting=$('[data-ad-entity-targeting]'),customTargeting=settings.dfp_article_custom.targeting?JSON.parse(settings.dfp_article_custom.targeting):{},targeting={};$.each(customTargeting,function(idx,target){delete customTargeting[idx];if(idx.indexOf('_cat')!=-1){target=target.length==1?target[0]:target;}
idx=idx.replace('adunit',adUnit);customTargeting[idx]=target;});$.each(adElementsTargeting,function(idx,adElement){targeting=JSON.parse($(adElement).attr('data-ad-entity-targeting'))||{};_.extend(targeting,customTargeting);if(testTargeting){targeting[unitTargeting]=testTargeting;}
$(adElement).attr('data-ad-entity-targeting',JSON.stringify(targeting));});}
var resetRightAdsForAn=function(){if($('.layout-2col-8x4.article').length>0){if(window.location.host.indexOf('canada.autonews.com')>-1||window.location.host.indexOf('europe.autonews.com')>-1||(drupalSettings.isCpeArticle===1&&settings.site_code!='cpn')){var rightBlockAds=$('.article-block-right [data-block-plugin-id^="ad_display"]'),rightBlockAdsLength=rightBlockAds.length||0,rightComponentBlock=$('.article-block-right  [data-block-plugin-id]:not([data-block-plugin-id^="ad_display"])'),rightComponentBlockLength=rightComponentBlock.length||0;if(rightComponentBlockLength>0&&rightBlockAdsLength>0){var separate=Math.floor(rightComponentBlockLength/rightBlockAdsLength);rightBlockAds.each(function(idx){var pos=separate+idx;if(rightComponentBlockLength>pos){$(this).insertBefore($(rightComponentBlock[pos]));}
else{$(this).appendTo($(rightComponentBlock[rightComponentBlockLength-1]).parent());}});}}}};resetRightAdsForAn();var resizeNativeAdsArticle=function(){$('.crain-advertisement.native_sponsor:not(.half) [data-dfp-sizes]').each(function(idx,element){$(element).css({'width':$(element).parents('[data-block-plugin-id="entity_field:node:field_paragraphs"], [data-block-plugin-id="entity_field:node:body"]').css('width')});});$('[data-ad-entity="an_entity_dfp_ntv_03_article"] [data-dfp-sizes]').each(function(idx,element){$(element).css({'width':$(element).parents('.block-region-content-left').css('width')});});$('.crain-advertisement.native_sponsor.half [data-dfp-sizes]').each(function(idx,element){$(element).css({'width':parseInt($(element).parents('[data-block-plugin-id="entity_field:node:field_paragraphs"], [data-block-plugin-id="entity_field:node:body"]').css('width'))/2+'px'});});};$(window).resize(resizeNativeAdsArticle);$(window).on('load',resizeNativeAdsArticle);}});function advertisementReposition(){var mugshot=$('.article-main-image-wrapper.image-mugshot-left'),advertisement=$('.adscount1');if(!mugshot.length||!advertisement.length){return false;}
var mugshot_bottom=mugshot.offset().top+mugshot.outerHeight();var advertisement_top=advertisement.offset().top;if(advertisement_top<mugshot_bottom){advertisement.addClass('overrideads');return;}
advertisement.removeClass('overrideads');}
function advertisementRepositionInlineParagraph(){$('.article-paragraph .item--paragraph--type--body').each(function(){var adsInline=$(this).find('.block').children('.field--name-field-paragraph-body').children('.desktop');if(adsInline.length){var adsOffsetLeft=adsInline.offset().left;}
var ImagesInline=$(this).prev('.mugshot-wrapper').find('.article-images-wrapper');if(ImagesInline.length){var ImageOffsetLeft=ImagesInline.offset().left;}
if(adsOffsetLeft>ImageOffsetLeft){adsInline.addClass('override-inline-ads');}});}
function adjustRightRailForAd(ad,blocks){if(ad.length>0&&ad.hasClass('not-empty')){var adOffsetTop=ad.offset().top,adOffsetHeight=ad[0].offsetHeight||0;$.each(blocks,function(k,v){var vOffsetTop=$(v).offset().top,vOffsetHeight=v.offsetHeight||0,bottom=vOffsetTop+vOffsetHeight;if(bottom>adOffsetTop){if(vOffsetTop<adOffsetTop){$('<div class="desktop-show db35dd80-7a3f-4734-a9ce-ead26fe51ea2" style="height:'+(adOffsetHeight+(adOffsetTop-vOffsetTop)+20)+'px; width:100%;"></div>').insertBefore($(v));}
else if(vOffsetTop<=(adOffsetHeight+adOffsetTop)){$('<div class="desktop-show db35dd80-7a3f-4734-a9ce-ead26fe51ea2" style="height:'+(adOffsetHeight-(vOffsetTop-adOffsetTop)+20)+'px;" width:100%;"></div>').insertBefore($(v));}}});}}
function aacShiftRightRailForLB_03(event){if($('[data-ad-entity="aa_lb_03_general_desktop"]').length>0){var ad=$('[data-ad-entity="aa_lb_03_general_desktop"]'),blocks=$('.region-featured-right.column-lg-4 .block');$('.region-featured-right.column-lg-4 .desktop-show.db35dd80-7a3f-4734-a9ce-ead26fe51ea2').remove();adjustRightRailForAd(ad,blocks);}}
function shiftRightRailForREC_03(event){var ad=$('[data-ad-entity="ad_entity_dfp_rec_03_article_desktop"]');if(ad.length>0){var blocks=$('.region-featured-right .block');$('.region-featured-right .desktop-show.db35dd80-7a3f-4734-a9ce-ead26fe51ea2').remove();adjustRightRailForAd(ad,blocks);}}
if(settings.noAds!=1&&$('body.page-node-type-article .layout-container.aa-full-article-page').length<1){advertisementReposition();advertisementRepositionInlineParagraph();$(window).on('load',advertisementReposition);$(window).on('load',advertisementRepositionInlineParagraph);if(settings.site_code=='aac'){if(window.googletag&&['narrow','desktop'].indexOf(window.themeBreakpoints.currentBreakpoint.name)>-1){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener('slotVisibilityChanged',aacShiftRightRailForLB_03,false);});}}
if(($.inArray(settings.site_code,['ccb','ccl','cdb','cny'])>-1)){if(window.googletag&&['narrow','desktop'].indexOf(window.themeBreakpoints.currentBreakpoint.name)>-1){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener('slotVisibilityChanged',shiftRightRailForREC_03,false);});}}}}};})(window.adEntity,jQuery,Drupal,drupalSettings);;/*!
* jQuery throttle / debounce - v1.1 - 3/7/2010
* http://benalman.com/projects/jquery-throttle-debounce-plugin/
*
* Copyright (c) 2010 "Cowboy" Ben Alman
* Dual licensed under the MIT and GPL licenses.
* http://benalman.com/about/license/
*/(function(window,undefined){'$:nomunge';var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=='boolean'){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}
function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);};function clear(){timeout_id=undefined;};if(debounce_mode&&!timeout_id){exec();}
timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}
return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false);};})(this);;(function(ad_entity,$,Drupal,drupalSettings){Drupal.behaviors.dfp_initialize={attach:function(context,settings){$(window).on('paywall-show-as-inline.show_paywall paywall-show.show_paywall',function(e){$('.article-paragraph p').not(':first').remove();$(window).off(e.type+'.show_paywall');});if(settings.noAds!=1){function callInitialize(){var callInitialized=true;if(typeof settings.crain_object=='object'&&typeof settings.crain_object.content=='object'&&typeof settings.crain_object.content.AccessControl=='object'&&!$.isEmptyObject(settings.crain_object.content.AccessControl)){callInitialized=false;}
if(typeof settings.disable_ip_access!='undefined'){callInitialized=true;}
return callInitialized;};function moatResetTargeting(uninitializedAd,allVariants,$constraint){var variants={};$.each(uninitializedAd,function(idx,adElement){var $adElement=$(adElement),$targeting='';if($constraint){if($adElement.attr('data-ad-entity-targeting').indexOf($constraint)>-1){$adElement.removeClass(uninitializedAdClass);}
else{$adElement.addClass('paywall-show');}}
else{$adElement.removeClass(uninitializedAdClass);}
if(allVariants.hasOwnProperty(adElement.id)&&!$(adElement).hasClass(uninitializedAdClass)){variants[adElement.id]=allVariants[adElement.id];$targeting=$adElement.attr('data-ad-entity-targeting');if($targeting){try{$targeting=JSON.parse($targeting);$targeting.referrer=document.referrer.split("?")[0].slice(-40);if($.inArray(settings.site_code,['cgweb','c360dx','cpon'])>-1){$targeting.newsletter_campaign=getFirstUrlParameter("utm_nl_name","utm_campaign");}
var utmArray=["utm_campaign","utm_medium","utm_source"];utmArray.forEach(function(utm){$targeting[utm]=getFirstUrlParameter(utm);});$adElement.attr('data-ad-entity-targeting',JSON.stringify($targeting));if(drupalSettings.hasOwnProperty('global_ad_key_value_pairs')&&Object.getOwnPropertyNames(drupalSettings.global_ad_key_value_pairs).length>0){$(window).on('dfp:BeforeDisplay',function(event){var key;var tagettingArray=['tag','subchannel','channel'];for(key in event.detail.targeting){if((jQuery.inArray(key,tagettingArray)!==-1)&&(event.detail.targeting[key].indexOf('[')>=0)){try{event.detail.targeting[key]=JSON.parse(event.detail.targeting[key]);}
catch($e){}}}});_.extend($targeting,drupalSettings.global_ad_key_value_pairs);}
variants[adElement.id].data('data-ad-entity-targeting',$targeting);}
catch($e){}}}});if(!$.isEmptyObject(variants)){var notInitializedVariants={};$.each(variants,function(idx,adVariant){if(!$(adVariant.el).hasClass('initialized')){notInitializedVariants[idx]=adVariant;}});if(!$.isEmptyObject(notInitializedVariants)){if(settings.dfp_idio_script==1){$(window).on('ido-dfp-finished',function(){ad_entity.restrictAndInitialize(notInitializedVariants,context,settings);});}
else{ad_entity.restrictAndInitialize(notInitializedVariants,context,settings);}}}}
function resetTargeting(uninitializedAd,allVariants,$constraint){if(window.mostYieldReadyFired||settings.crain_no_moat_ads==1){if(window.moatPrebidApi){$(window).on('dfp:BeforeDisplay',function(event){if(event&&event.detail&&event.detail.slot&&event.detail.targeting){window.moatPrebidApi.setMoatTargetingForSlot(event.detail.slot,event.detail.targeting.pos);}});}
moatResetTargeting(uninitializedAd,allVariants,$constraint);}
else{window.moatYieldReady=function(){$(window).on('dfp:BeforeDisplay',function(event){if(event&&event.detail&&event.detail.slot&&event.detail.targeting){window.moatPrebidApi.setMoatTargetingForSlot(event.detail.slot,event.detail.targeting.pos);}})
moatResetTargeting(uninitializedAd,allVariants,$constraint);};}}
var getFirstUrlParameter=function(){var names=Array.prototype.slice.call(arguments);for(var i=0;i<names.length;i++){var re=new RegExp(names[i]+'=([^&#=]*)');var result=re.exec(window.location.search);if(result&&typeof result[1]==='string'){return result[1];}}
return '';};var uninitializedAdClass='initialization-disabled',uninitializedAd=$('.'+uninitializedAdClass),allVariants=$.extend({},ad_entity.collectAdContainers(context,settings),ad_entity.adContainers);if(uninitializedAd.length>0){var targetingSet=false;if(callInitialize()){$(window).on('crain-clickshare-targeting-set.show_ads',function(e){switch(e.type){case 'crain-clickshare-targeting-set':targetingSet=true;break;}
$(window).off(e.type+'.show_ads');if(targetingSet){resetTargeting(uninitializedAd,allVariants);}});}
else{var showNotShowPaywall=false,showShowPaywall=false;$(window).on('crain-paywall-not-show.show_ads crain-paywall-in-place-show.show_ads paywall-not-show.show_ads crain-clickshare-targeting-set.show_ads paywall-show-as-inline.show_ads',function(e){switch(e.type){case 'crain-paywall-not-show':case 'paywall-not-show':case 'crain-paywall-in-place-show':showNotShowPaywall=true;break;case 'crain-clickshare-targeting-set':targetingSet=true;break;case 'paywall-show-as-inline':showShowPaywall=true;break;}
if(e.type=='crain-paywall-in-place-show'){uninitializedAd=$('.'+uninitializedAdClass);}
$(window).off(e.type+'.show_ads');if(targetingSet){if(showNotShowPaywall){allVariants=$.extend({},ad_entity.collectAdContainers(context,settings),ad_entity.adContainers);resetTargeting(uninitializedAd,allVariants);}
else if(showShowPaywall){resetTargeting(uninitializedAd,allVariants,'LB_01');var resetTopSize=function(){var topRegion=$('[data-block-plugin-id="system_breadcrumb_block"]');if(topRegion.length!=0){var top=parseFloat(topRegion.css('height'))+topRegion.offset().top;$('.porte-modal-obstruct').css({'top':top+'px'});}};resetTopSize();$(window).resize($.debounce(100,resetTopSize));if(window.googletag){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener('slotRenderEnded',$.debounce(100,resetTopSize),false);});}}}});}}
if(['cmhdh','cmh'].indexOf(settings.site_code)>-1){var sponsoreContent='.region-featured-right .sponsored-content-block';if($(sponsoreContent).length>0){window.addEventListener('adEntity:initialized',function(evt){if(evt.detail.container.ad_tag.data('data-dfp-sizes').indexOf('fluid')&&$(evt.detail.container.el).hasClass('empty')){setTimeout(function(){if($(sponsoreContent).find('.ad-entity-container').length==$(sponsoreContent).find('.ad-entity-container.empty').length){$(sponsoreContent).addClass('hidden');}},1000);}});}}}}}})(window.adEntity,jQuery,Drupal,drupalSettings);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
(function(drupalSettings,Drupal){Drupal.behaviors.crainPaywallsSetReturnPathCookie={attach:function attach(context,settings){var returnWebsite=settings.crain_return_cookie_settings_website;var currentPage=location.origin;try{if(_typeof(settings.crain_object)=='object'&&_typeof(settings.crain_object.content.AccessControl)=='object'&&settings.crain_object.content.AccessControl!=null){currentPage=location.href;}}catch(e){currentPage=location.origin;}
var cookieName='cceAdvantageReturn';var expires="expires="+0;var cookieDomain=returnWebsite?returnWebsite:location.hostname;document.cookie=cookieName+"="+currentPage+"; domain="+cookieDomain+";"+expires+"; path=/";}};})(drupalSettings,Drupal);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
(function($,Drupal,drupalSettings){'use strict';Drupal.behaviors.genomeweb_sailthru_personalization_engine={attach:function attach(context){if(context!==document){return;}
$(window).on('user-object-created.get_sailthru_cookie',function(){$(window).off('user-object-created.get_sailthru_cookie');var clickshareUserId=User.userID;if(clickshareUserId!==undefined){if(!$.cookie('sailthru_hid')){$.ajax({url:drupalSettings.path.baseUrl+'api/sailthru',method:'post',headers:{"CSAuthResp":$.cookie("CSAuthResp")},error:function error(data){console.log(data);}}).done(function(data){if(data.hasOwnProperty('cookie')&&data.cookie){var cookie_life=parseInt(data.cookie_life);var date=new Date();date.setSeconds(date.getSeconds()+cookie_life);$.cookie('sailthru_hid',data.cookie,{expires:date,path:'/'});}else{$.removeCookie('sailthru_hid',{path:'/'});console.log(data);}});}}else{var date=new Date();date.setSeconds(date.getSeconds()+3600);$.cookie('sailthru_hid','',{expires:date,path:'/'});}});var script=document.createElement('script');script.src='https://ak.sail-horizon.com/spm/spm.v1.min.js';script.async=true;script.defer=true;script.type='text/javascript';var script_first=document.getElementsByTagName('script')[0];script_first.parentNode.insertBefore(script,script_first);var tries=0;var maxTries=100;var intervalTime=100;var initialized=false;var showSailthruLayer=false;var id;var onBeforeOverlayRenderFunc=function onBeforeOverlayRenderFunc(overlay){return showSailthruLayer;};var sailthruCallInitializedFunc=function sailthruCallInitializedFunc(){if(window.Sailthru){window.Sailthru.init({customerId:drupalSettings.crain_sailthru.customer_id,useStoredTags:false,onBeforeOverlayRender:onBeforeOverlayRenderFunc}).then(function(){var sailthruCampaignEle=document.querySelector('.sailthru-overlay a.omnitrack');if(sailthruCampaignEle&&typeof sailthruCampaignEle.getAttribute==='function'&&s&&(typeof s==="undefined"?"undefined":_typeof(s))==='object'&&typeof s.tl==='function'){var sailthruCampaignName=sailthruCampaignEle.getAttribute('data-omnilink');var overrideObj={prop68:sailthruCampaignName,eVar68:sailthruCampaignName,linkTrackVars:"prop68,eVar68"};s.tl(true,"o","Sailthru Campagin Displayed",overrideObj);}});window.clearInterval(id);}
tries++;if(tries>maxTries){window.clearInterval(id);return;}};if(drupalSettings&&drupalSettings.crain_sailthru.customer_id){if(drupalSettings.crain_sailthru.sailthru_only_show_no_mini_paywall){$(window).on('crain-minize-paywall-not-show.show_sailthru_overlay',function(e){showSailthruLayer=true;if(!initialized){id=window.setInterval(sailthruCallInitializedFunc,intervalTime);initialized=true;}
$(window).off("".concat(e.type,".show_sailthru_overlay"));});}else if(drupalSettings.crain_sailthru.sailthru_only_show_no_paywall){$(window).on('crain-paywall-not-show.show_sailthru_overlay paywall-not-show.show_sailthru_overlay crain-paywall-in-place-show.show_sailthru_overlay paywall-show-as-inline.show_sailthru_overlay crain-paywall-show.show_sailthru_overlay',function(e){switch(e.type){case 'crain-paywall-not-show':case 'paywall-not-show':showSailthruLayer=true;break;}
if(!initialized){id=window.setInterval(sailthruCallInitializedFunc,intervalTime);initialized=true;}
$(window).off("".concat(e.type,".show_sailthru_overlay"));});}else{showSailthruLayer=true;id=window.setInterval(sailthruCallInitializedFunc,intervalTime);}}}};})(jQuery,Drupal,drupalSettings);;(function($){document.cookie='crain_twi_components_twi_node=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';})(jQuery);;
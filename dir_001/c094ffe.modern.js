(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1013:function(e,t,r){"use strict";var n=r(4),o=(r(5),r(6),r(27),r(0)),l=r(2),c=r(9),d=r(215),v=new c.a("ScrollPercent"),h=class extends l.Vue{mounted(){this.createObserver()}getStyles(e){return{top:"".concat(e,"%")}}createObserver(){this.observer=new d.a({el:this.$refs.markers,data:this.percentages},this.handleScroll)}handleScroll(e){v.log("handleScroll",e),this.$emit("scroll-percent",e)}cleanup(){var e;v.log("cleanup"),null===(e=this.observer)||void 0===e||e.destroy()}beforeDestroy(){this.cleanup()}};Object(o.b)([Object(l.Prop)({default:()=>[25,50,75,100]}),Object(o.d)("design:type",Array)],h.prototype,"percentages",void 0);var f=h=Object(o.b)([l.Component],h),O=(r(988),r(10)),m=Object(O.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"c-scrollPercent"},[e._t("default"),e._v(" "),e._l(e.percentages,(function(t,i){return r("div",{key:i,ref:"markers",refInFor:!0,staticClass:"c-scrollPercent_marker",style:e.getStyles(t)})}))],2)}),[],!1,null,null,null).exports,y=r(367);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var j=new c.a("TrackScroll"),x=class extends l.Vue{constructor(){super(...arguments),this.firedPercents=[]}routeChange(){this.firedPercents=[]}handleScroll(e){var t,r;if("down"===(null==e?void 0:e.direction)){var n=null==e?void 0:e.data;this.firedPercents.includes(n)||(j.log(e),j.log("scrolled",n),this.firedPercents.push(n),this.trackScroll(n,e)),this.percentages.length===this.firedPercents.length&&(j.log("all scroll percentages fired, cleaning up"),null===(r=null===(t=this.$refs)||void 0===t?void 0:t.scrollPercent)||void 0===r||r.cleanup())}}trackScroll(e,t){t.data=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({percentage:t.data},this.trackingData),this.$track(y.a).with({clickGenericText:"scroll"+e,eventName:"percentageScrollTracking"}).fire(),this.$emit("scroll-change",e,t)}};Object(o.b)([Object(l.Prop)({default:()=>[25,50,75,100]}),Object(o.d)("design:type",Array)],x.prototype,"percentages",void 0),Object(o.b)([Object(l.Prop)({default:()=>{}}),Object(o.d)("design:type",Object)],x.prototype,"trackingData",void 0),Object(o.b)([Object(l.Watch)("$route"),Object(o.d)("design:type",Function),Object(o.d)("design:paramtypes",[]),Object(o.d)("design:returntype",void 0)],x.prototype,"routeChange",null);var w=x=Object(o.b)([Object(l.Component)({components:{ScrollPercent:m}})],x),$=Object(O.a)(w,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ScrollPercent",{ref:"scrollPercent",on:{"scroll-percent":e.handleScroll}},[e._t("default")],2)}),[],!1,null,null,null);t.a=$.exports},1297:function(e,t,r){"use strict";r.r(t);var n,o=r(7),l=(r(5),r(6),r(21),r(0)),c=r(2),d=r(77),v=r(48),h=r(49),f=r(35),O=r(108),m=class extends O.a{constructor(e){super(e),this.services=["tagular"]}get defaults(){return{"@type":"core.InfinitePageScrolled.v1",isInfiniteScroll:!0}}};m=Object(l.b)([Object(v.a)(f.a.Transient),Object(l.e)(0,h.a),Object(l.d)("design:paramtypes",["function"==typeof(n=void 0!==d.Context&&d.Context)?n:Object])],m);var y=r(4),P=r(950),j=r(990);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(y.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $=new(r(9).b)("SeamlessTriggers"),S=class extends c.Vue{constructor(){super(...arguments),this.requested=!1}get config(){return this.$seamless.config}get requestObserverOptions(){var e,t;return w({handler:this.requestPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.request)||{})}get enterObserverOptions(){var e,t;return w({handler:this.enterPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.enter)||{})}requestPage(e){var{data:data,direction:t}=e;if("down"===t&&!this.requested){$.log("requestPage",t,data);try{this.$emit("seamless-insert-page",data.index,this.$seamless.requestPage({data:data,direction:t})),this.requested=!0}catch(e){$.error(e)}}}enterPage(e){var{data:data,direction:t}=e;$.log("enterPage",t,data),this.$emit("seamless-enter-page",{data:data,direction:t})}};Object(l.b)([Object(c.Prop)({default:!1,required:!0}),Object(l.d)("design:type",Number)],S.prototype,"index",void 0);var k=S=Object(l.b)([c.Component,Object(P.a)("intersection-observer",j.a)],S),_=r(10),D=Object(_.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"c-seamlessTriggers"},[r("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.requestObserverOptions,expression:"requestObserverOptions"}]}),e._v(" "),r("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.enterObserverOptions,expression:"enterObserverOptions"}]})])}),[],!1,null,null,null).exports,C=r(69),T=r(1013),I=class extends c.Vue{constructor(){super(...arguments),this.pages=[],this.currentParentPage=null,this.listing=null,this.pageRequestPromises=[],this.loading=!1}getPages(){var e,t=(null===(e=this.$refs)||void 0===e?void 0:e.pages)?this.$refs.pages:[];return[this.currentParentPage,...t]}getPageByIndex(e){var t;return(null===(t=this.getPages())||void 0===t?void 0:t[e])||null}routeChange(){this.cleanup()}beforeDestroy(){this.cleanup(),this.$nuxt.$off("pageMounted")}beforeMount(){this.$nuxt.$on("pageMounted",(e=>{this.currentParentPage=e,this.initializeSeamless()}))}initializeSeamless(){var e=this;return Object(o.a)((function*(){var t,r;e.$services.isFeatureEnabled("seamless")?(e.$seamless.createSeamlessMeta(e.$meta()),e.listing=null===(r=yield e.$seamless.requestSeamlessListing(null===(t=e.currentParentPage)||void 0===t?void 0:t.content))||void 0===r?void 0:r.items):C.a.warn("Seamless is disabled")}))()}enterPage(e){var t=this;return Object(o.a)((function*(){var{data:data,direction:r}=e;C.a.log("waiting for page to be requested and inserted");try{yield t.pageRequestPromises[data.index]}catch(e){return void C.a.error(e)}C.a.log("enterPage",data,r);var n="down"===r?data.index+1:data.index,o=t.getPageByIndex(n),l="down"===r?data.index-1:data.index+1,c=t.getPageByIndex(l);C.a.log("previousPage",c),c&&c.removeAds(),t.$seamless.enterPage(o,c,{data:data,direction:r})}))()}preInsertPage(e,t){this.loading=!0,this.pageRequestPromises[e]=new Promise(((r,n)=>{try{t.then((t=>{var o;(null===(o=null==t?void 0:t.content)||void 0===o?void 0:o.content)?(this.insertPage(t.content,e,t.pageTypeConfig).then(r),this.loading=!1):n(new Error("no content found on page"))}))}catch(e){C.a.error(e),this.loading=!1,n(e)}}))}insertPage(content,e,t){var r=this;return Object(o.a)((function*(){var component=yield t.component();component=component.extend({data:()=>({content:content}),beforeCreate(){try{this.$options.asyncData(this.$nuxt.context,content)}catch(e){C.a.error("error calling 'asyncData' for page with slug: '".concat(content.id,"'"),e)}}}),r.$config.ads.adDisplay.delayLoad=!0,r.$nuxt.$meta().pause(),r.pages.push(component),yield r.$nextTick();try{r.$refs.pages[e]?C.a.log("inserted page: '".concat(content.pageType,"' with slug: '").concat(content.id,"'")):(r.pages.pop(),C.a.warn("could not find a reference to a page at index ".concat(e)))}catch(e){C.a.error("error getting page reference for slug: '".concat(content.id,"'"),e)}}))()}trackScroll(e,t){var r,n;this.$services.isFeatureEnabled("seamless")?(C.a.log("Firing Cohesion scroll event",e,null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.index),this.$track(m).with({scrollDistance:e,pageIndex:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.index}).fire()):C.a.log("Not firing scroll events, seamless is disabled")}cleanup(){this.$config.ads.adDisplay.delayLoad=!1,this.pages=[],this.pageRequestPromises=[],this.listing=null,this.$store.commit("page/clearSeamless"),this.$nuxt.$meta().resume()}};Object(l.b)([Object(c.Watch)("$route"),Object(l.d)("design:type",Function),Object(l.d)("design:paramtypes",[]),Object(l.d)("design:returntype",void 0)],I.prototype,"routeChange",null);var E=I=Object(l.b)([Object(c.Component)({components:{SeamlessTriggers:D,TrackScroll:T.a}})],I),U=Object(_.a)(E,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"c-seamlessListing"},[r("TrackScroll",{attrs:{"tracking-data":{index:0}},on:{"scroll-change":e.trackScroll}},[e._t("default")],2),e._v(" "),e.listing?[r("SeamlessTriggers",{attrs:{index:0},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}),e._v(" "),e._l(e.pages,(function(t,n){return[r("TrackScroll",{key:t.slug,attrs:{"tracking-data":{index:n+1}},on:{"scroll-change":e.trackScroll}},[r(t,{ref:"pages",refInFor:!0,tag:"component",attrs:{"is-seamless":!0}})],1),e._v(" "),n<e.listing.length-1?r("SeamlessTriggers",{key:t.slug,attrs:{index:n+1},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}):e._e()]}))]:e._e(),e._v(" "),e.loading?e._t("loader"):e._e()],2)}),[],!1,null,null,null);t.default=U.exports},949:function(e,t,r){var content=r(989);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(34).default)("a0917180",content,!0,{sourceMap:!1})},950:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(5),r(6),r(12);var n=r(40);function o(e){return{bind:e.bind?function(){return e.bind(...arguments)}:()=>{},componentUpdated:e.componentUpdated?function(){return e.componentUpdated(...arguments)}:()=>{},inserted:e.inserted?function(){return e.inserted(...arguments)}:()=>{},unbind:e.unbind?function(){return e.unbind(...arguments)}:()=>{},update:e.update?function(){return e.update(...arguments)}:()=>{}}}function l(e,t){var r=new t;return Object(n.createDecorator)((t=>{t.directives=(null==t?void 0:t.directives)||{},t.directives[e]=o(r)}))}},988:function(e,t,r){"use strict";r(949)},989:function(e,t,r){var n=r(33)(!1);n.push([e.i,".c-scrollPercent{position:relative}.c-scrollPercent_marker{height:0;position:absolute;width:100%}",""]),e.exports=n},990:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(7),o=r(12),l=r(9),c=r(215),d=new l.b("observerDirective");class v{constructor(){this.refreshOnUpdate=!1}bind(e,t){var r=this;return Object(n.a)((function*(){var n,l,v,h,f,O;yield o.default.nextTick(),r.refreshOnUpdate="undefined"!==(null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.refreshOnUpdate)&&(null===(l=null==t?void 0:t.value)||void 0===l?void 0:l.refreshOnUpdate),r.observer=new c.a({data:null===(v=null==t?void 0:t.value)||void 0===v?void 0:v.data,rootMargin:(null===(h=null==t?void 0:t.value)||void 0===h?void 0:h.rootMargin)||"0px 0px -100% 0px",el:e,threshold:(null===(f=null==t?void 0:t.value)||void 0===f?void 0:f.threshold)||0,singleIntersection:(null===(O=null==t?void 0:t.value)||void 0===O?void 0:O.singleIntersection)||!1},(data=>{var e;d.log(data);var r=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.handler;r?r(data):d.warn("No handler specified on Intersection Observer directive")}))}))()}update(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}componentUpdated(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}unbind(){this.observer&&this.observer.destroy()}}}}]);
//# sourceMappingURL=c094ffe.modern.js.map
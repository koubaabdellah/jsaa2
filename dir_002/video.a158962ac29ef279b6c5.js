"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6791],{48919:(e,t,i)=>{i.r(t),i.d(t,{default:()=>bn});var o,n=i(11040),r=i(9236),a=i(91051),l=i(21041),s=i(9722),d=i(39669),c=i(72306),u=i(8721),v=i(97801),m=i(74472),p=i(2734),h=i(34708),g=i(43039),x=i(90757),f=i(92118),b=i(21137),w=i(12085),y=i(48036),_=i(17769),j=i(47063),k=i(34321),C=i(72240),S=i(86953),I=i(14870),T=i(76967),L=i(52053),M=i(8456),D=i(53304),O=i(59050),E=i(57155),P=i(29046),B=i(93797);!function(e){e.VideoCoverShow="video_cover_show",e.VideoCoverClick="video_cover_click",e.BackFypClick="back_fyp_click",e.BrowseModeEntryClick="browse_mode_entry_click",e.KebabMenuHover="kebab_menu_hover",e.RelatedVideoImprCnt="related_video_impr_cnt"}(o||(o={}));var R=i(75131),Z=i(16926),z=i(59245),V=i.n(z),F=i(90293),$=i(33104),q=i(66958),W=i(61453),A=i(50218),H=i(83421),U=i(76985),N=i(16119),G=i(13033),Y=i(88228),J=i(41624),Q=i(5100),K=i(64047),X=i(73566),ee=i(48185),te=i(19630),ie=i(62245),oe=i(82346),ne=i(60595),re=i(20948),ae=i(56979),le=i(53095),se=i(93859),de=i(68854),ce=i(47165);const ue=e=>{var t;const i={"cmn-Hans-CN":"zh-CN","eng-US":"en-US","jpn-JP":"jp-JP","kor-KR":"ko-KR","cmn-Hans-CN|eng-US":"en-US","rus-RU":"ru-RU","fra-FR":"fr-FR","por-PT":"pt-PT","spa-ES":"es-ES","afr-ZA":"en-ZA","ben-BD":"bn-BD","ces-CZ":"cs-CZ","dan-DK":"da-DK","nld-NL":"nl-NL","fin-FI":"fi-FI","deu-DE":"de-DE","ell-GR":"el-GR","hun-HU":"hu-HU","ind-ID":"id-ID","gle-IE":"en-IE","ita-IT":"it-IT","nor-NO":"no-NO","pol-PL":"pl-PL","swe-SE":"sv-SE","tha-TH":"th-TH","tur-TR":"tr-TR","ara-SA":"ar-SA","fra-CA":"fr-CA","cmn-Hant-CN":"zh-TW","heb-IL":"he-IL","jva-ID":"id-ID","ron-RO":"ro-RO","hin-IN":"hi-IN","ben-IN":"bn-BD","slk-SK":"sk-SK"};return null!==(t=null==i?void 0:i[e])&&void 0!==t?t:"en-US"};var ve=i(84785);const me=/([0-9]{1,2})?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function pe(e){return me.test(e)}function he(e){const t=e.match(me);let i=60*parseFloat(t[1]||"0")*60;return i+=60*parseFloat(t[2]),i+=parseFloat(t[3]),Number(i.toFixed(6))}var ge=i(57244),xe=i(4206);let fe=class{constructor(e){this.fetch=e}downloadTranscript(e){return this.fetch.get(e)}};fe=(0,K.__decorate)([(0,ge.G)(),(0,K.__metadata)("design:paramtypes",[xe.r])],fe);let be=class extends X.D{constructor(e,t,i,o,n,r){super(),this.transcriptService=e,this.itemList=t,this.videoPlayer=i,this.videoExperience=o,this.itemModule=n,this.appContext=r,this.defaultState={currentIndex:0,itemListKey:"video",subtitleContent:[],ifShowSubtitle:!1,subtitleStruct:null}}setCurrentIndex(e,t){e.currentIndex=t}setSubtitleContent(e,t){e.subtitleContent=t}setIfShowSubtitle(e,t){e.ifShowSubtitle=t}setSubtitleStruct(e,t){const i=this.getOriginalSubtitleStruct(t);i&&(e.subtitleStruct=i)}handleSelectVideo(e){return e.pipe((0,re.M)(this.state$,this.itemList.state$,this.itemModule.state$),(0,ae.U)((([{newIndex:e},{itemListKey:t},i,o])=>{var n,r,a;const l=null!==(a=(null!==(r=null===(n=i[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[])[e])&&void 0!==a?a:"";return{itemListKey:t,item:o[l],newId:l}})),(0,le.z)((({itemListKey:e,item:t,newId:i})=>{const o=Object.assign(Object.assign({},t),{author:{nickname:null==t?void 0:t.nickname,uniqueId:null==t?void 0:t.author,id:null==t?void 0:t.authorId,secUid:null==t?void 0:t.authorSecId,avatarThumb:null==t?void 0:t.avatarThumb}});return(0,ie.z)((0,oe.of)(this.itemList.getActions().resetItemList({key:e})),(0,oe.of)(this.itemList.getActions().setList({key:e,response:{loading:!0,statusCode:0,itemList:[o],hasMore:!0}})),(0,oe.of)(...this.updateVideoIndex({newIndex:0,isIndexInvalid:!1,newId:i,enterMethod:"video_cover_click"})),this.itemList.getRelatedList$({key:"video",itemId:i}))})))}handleSwitchVideo(e){return e.pipe((0,se.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"video_detail_select"})})),(0,re.M)(this.state$,this.itemList.state$,this.itemModule.state$,this.appContext.state$),(0,ae.U)((([{newIndex:e},{itemListKey:t,currentIndex:i},o,n,r])=>{var a,l,s;const d=null!==(l=null===(a=o[null!=t?t:""])||void 0===a?void 0:a.browserList)&&void 0!==l?l:[];return{newIndex:e,isIndexInvalid:!(null==d?void 0:d.length)||e<0||e===i,newId:null!==(s=d[e])&&void 0!==s?s:"",enterMethod:"video_detail",itemModuleState:n,appContextState:r}})),(0,se.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,le.z)((e=>{var{itemModuleState:t,appContextState:i}=e,o=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(e,["itemModuleState","appContextState"]);const n=[...this.updateVideoIndex(o)];return o.isIndexInvalid||n.push(this.getActions().setSubtitleContent([])),(0,oe.of)(...n)})),(0,ce.n)({}))}handleFirstVideo(e){return e.pipe((0,re.M)(this.state$,this.itemList.state$),(0,ae.U)((([e,{itemListKey:t},i])=>{var o,n,r;const a=null!==(n=null===(o=i[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==n?n:[];return{newIndex:0,isIndexInvalid:!(null==a?void 0:a.length)||0>a.length-1,newId:null!==(r=a[0])&&void 0!==r?r:"",enterMethod:"video_detail"}})),(0,se.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to first video for some reasons")})),(0,le.z)((e=>(0,oe.of)(...this.updateVideoIndex(e)))),(0,ce.n)({}))}downloadTranscript(e){return e.pipe((0,le.z)((e=>this.fetchTranscript(e).pipe((0,ae.U)((e=>this.getActions().setSubtitleContent(e)))))))}fetchTranscript(e){var t;const i=this.getOriginalSubtitleStruct(e.subtitleInfos),o=Math.floor((new Date).getTime()/1e3);return!i||!i.url||(null!==(t=null==i?void 0:i.expire)&&void 0!==t?t:0)<=o?(0,oe.of)([]):this.transcriptService.downloadTranscript(i.url).pipe((0,de.K)((()=>(0,oe.of)(void 0))),(0,ae.U)((e=>e?((e,t)=>{if(!e||"string"!=typeof e)return{cues:[]};t||(t={});const{meta:i=!1,strict:o=!0}=t,n=(e=(e=(e=e.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n\n"),r=n.shift();if(!(null==r?void 0:r.startsWith("WEBVTT")))throw new Error('Must start with "WEBVTT"');const a=r.split("\n"),l=a[0].replace("WEBVTT","");if(l.length>0&&" "!==l[0]&&"\t"!==l[0])throw new Error("Header comment must start with space or tab");if(0===n.length&&1===a.length)return{valid:!0,strict:o,cues:[],errors:[]};if(!i&&a.length>1&&""!==a[1])throw new Error("Missing blank line after signature");const{cues:s,errors:d}=function(e,t){const i=[];return{cues:e.map(((e,o)=>{try{return function(e,t,i){let o=0,n=.01,r="";const a=e.split("\n").filter(Boolean);if(a.length>0&&a[0].trim().startsWith("NOTE"))return null;if(1===a.length&&!a[0].includes("--\x3e"))throw new Error(`Cue identifier cannot be standalone (cue #${t})`);if(a.length>1&&!a[0].includes("--\x3e")&&!a[1].includes("--\x3e"))throw new Error(`Cue identifier needs to be followed by timestamp (cue #${t})`);const l=a[0].split(" --\x3e ");if(2!==l.length||!pe(l[0])||!pe(l[1]))throw new Error(`Invalid cue timestamp (cue #${t})`);const s=function(e){const t=e.split(".")[0],i=t.split(":");return"00"!==i[0]?t:`${i[1]}:${i[2]}`}(l[0]);if(o=he(l[0]),n=he(l[1]),i){if(o>n)throw new Error(`Start timestamp greater than end (cue #${t})`);if(n<=o)throw new Error(`End must be greater than start (cue #${t})`)}if(!i&&n<o)throw new Error(`End must be greater or equal to start when not strict (cue #${t})`);return a.shift(),r=a.join("\n"),!!r&&{start:o,end:n,text:r,startStr:s}}(e,o,t)}catch(e){return i.push(e),null}})).filter(Boolean),errors:i}}(n,o);if(o&&d.length>0)throw d[0];const c=i?function(e){const t={};return e.slice(1).forEach((e=>{const i=e.indexOf(":"),o=e.slice(0,i).trim(),n=e.slice(i+1).trim();t[o]=n})),Object.keys(t).length>0?t:null}(a):null,u={valid:0===d.length,strict:o,cues:s,errors:d,meta:{}};return i&&c&&(u.meta=c),u})(e).cues:[])))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,enterMethod:o}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:4},playProgress:0,teaParams:{isVideoDetail:!0,enterMethod:o}}),this.getActions().setCurrentIndex(e)]}getOriginalSubtitleStruct(e){const t=null==e?void 0:e.find((e=>"1"===e.Version||"3"===e.Version));if((null==t?void 0:t.Url)&&(null==t?void 0:t.LanguageCodeName))return{url:t.Url,language:ue(t.LanguageCodeName),expire:t.UrlExpire}}};(0,K.__decorate)([(0,ee.lF)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[Object,Number]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"setCurrentIndex",null),(0,K.__decorate)([(0,ee.lF)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[Object,Array]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"setSubtitleContent",null),(0,K.__decorate)([(0,ee.lF)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[Object,Boolean]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"setIfShowSubtitle",null),(0,K.__decorate)([(0,ee.lF)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[Object,Object]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"setSubtitleStruct",null),(0,K.__decorate)([(0,ee.Qm)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[ne.y]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"handleSelectVideo",null),(0,K.__decorate)([(0,ee.Qm)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[ne.y]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"handleSwitchVideo",null),(0,K.__decorate)([(0,ee.Qm)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[ne.y]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"handleFirstVideo",null),(0,K.__decorate)([(0,ee.Qm)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[ne.y]),(0,K.__metadata)("design:returntype",void 0)],be.prototype,"downloadTranscript",null),be=(0,K.__decorate)([(0,te.Y)("VideoDetailModule"),(0,K.__metadata)("design:paramtypes",[fe,m.h,H.f,Q.KF,T.A,ve.G])],be);var we=i(25956),ye=i.n(we),_e=i(49584),je=i(58569),ke=i(5549),Ce=i(23028),Se=i(17230),Ie=i(40022),Te=i(19330),Le=i(92311);let Me=class{constructor(e){this.fetch=e}getVideoDetail(e){return this.fetch.get("/api/item/detail/",{query:e,baseUrlType:2})}};Me=(0,K.__decorate)([(0,ge.G)(),(0,K.__metadata)("design:paramtypes",[xe.r])],Me);let De=class{redirect(e){}};De=(0,K.__decorate)([(0,ge.G)()],De);let Oe=class extends X.D{constructor(e,t,i,o,n,r,a){super(),this.service=e,this.redirectService=t,this.appContext=i,this.itemList=o,this.commentList=n,this.seoModule=r,this.videoDetail=a,this.defaultState={statusCode:0}}setStatusCode(e,t){e.statusCode=t}getVideoDetail(e){return e.pipe((0,re.M)(this.appContext.state$,this.seoModule.state$),(0,ae.U)((([{itemId:e,query:t},i,o])=>{var n,r,a,l,s,d;const{appContext:c}=i,u=null!==(n=(0,Ce.x)(null==c?void 0:c.abTestVersion,"add_transcript"))&&void 0!==n?n:"v1",v=null!==(s=null===(l=null===(a=null===(r=null==o?void 0:o.abtest)||void 0===r?void 0:r.parameters)||void 0===a?void 0:a.transcript)||void 0===l?void 0:l.version)&&void 0!==s?s:"v1",m=ye()(["v2","v3","v4"],[u,v]).length>0;return{itemId:e,lang:i.lang,query:t,isGoogleBot:null===(d=i.appContext)||void 0===d?void 0:d.isGoogleBot,transcriptEnabled:m}})),(0,_e.z)((({itemId:e="",lang:t,query:i="",isGoogleBot:o,transcriptEnabled:n})=>this.service.getVideoDetail({aid:Se.CO,itemId:e}).pipe((0,se.b)((e=>{this.redirectService.redirect(e)})),(0,le.z)((r=>{var a,l;const{statusCode:s,itemInfo:d}=r,c=null==d?void 0:d.itemStruct,u=[(0,oe.of)(this.getActions().setStatusCode(s),this.itemList.getActions().setList({key:"video",response:{statusCode:s,itemList:c?[c]:[],hasMore:!0}}))];let v=!1;if(0===s){if(n){const{subtitleInfos:e}=null!==(l=null===(a=null==d?void 0:d.itemStruct)||void 0===a?void 0:a.video)&&void 0!==l?l:{};u.push((0,oe.of)(this.videoDetail.getActions().setSubtitleStruct(e))),e&&o&&(0,Ie.y)()&&(u.push(this.videoDetail.fetchTranscript({subtitleInfos:e}).pipe((0,le.z)((e=>(0,je.T)((0,oe.of)(this.videoDetail.getActions().setSubtitleContent(e)),this.seoModule.setVideoSEOProps(r,{language:t},i,{autoCaption:(null!=e?e:[]).map((e=>null==e?void 0:e.text)).filter(Boolean).join(".")})))))),v=!0)}o&&(u.push(this.itemList.getRecommendList$({key:"video"})),u.push(this.commentList.fetchComment$({aweme_id:e})))}return v||u.push(this.seoModule.setVideoSEOProps(r,{language:t},i)),(0,je.T)(...u)})),(0,ke.l)(this.itemList.getActions().setListKeyword({key:"video",keyword:e}),this.terminate())))))}};function Ee(){const{currentIndex:e}=(0,r.mp)(be),[{loading:t,hasMore:i,currentItemId:o},n]=(0,r.b7)(m.h,{selector:t=>{var i,o,n,r,a,l;return{loading:null!==(o=null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.loading)&&void 0!==o&&o,hasMore:null===(r=null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.hasMore)||void 0===r||r,currentItemId:null!==(l=null===(a=null==t?void 0:t.video)||void 0===a?void 0:a.browserList[e])&&void 0!==l?l:0}},dependencies:[e]}),{shouldUseRelatedVideo:l}=(0,y.e6)();return(0,a.useCallback)((()=>{!t&&i&&(l?n.getRelatedList({key:"video",itemId:o}):n.getRecommendList({key:"video"}))}),[n,i,t,l,o])}(0,K.__decorate)([(0,ee.lF)(),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[Object,Number]),(0,K.__metadata)("design:returntype",void 0)],Oe.prototype,"setStatusCode",null),(0,K.__decorate)([(0,ee.Qm)({payloadGetter:1}),(0,K.__metadata)("design:type",Function),(0,K.__metadata)("design:paramtypes",[ne.y]),(0,K.__metadata)("design:returntype",void 0)],Oe.prototype,"getVideoDetail",null),Oe=(0,K.__decorate)([(0,te.Y)("VideoPage"),(0,K.__metadata)("design:paramtypes",[Me,De,ve.G,m.h,Te.x,Le.q,be])],Oe);const Pe=()=>{var e;const{list:t,loading:i}=(0,r.mp)(m.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!0,statusCode:0}},dependencies:[]}),o=(0,r.mp)(Oe,{selector:({statusCode:e})=>e,dependencies:[]}),{user:n}=null!==(e=(0,h.L)((()=>["user"]),[]))&&void 0!==e?e:{},a=(0,r.mp)(H.f,{selector:e=>{var t;return Number(null===(t=e.currentVideo)||void 0===t?void 0:t.index)},dependencies:[]}),l=t[a],s=(0,r.mp)(T.A,{selector:e=>e[null!=l?l:""],dependencies:[l]}),{showNotPass:d,takeDown:c,shareEnabled:u}=null!=s?s:{},{ftcUser:v}=null!=n?n:{},p=v&&!u,g=10101===o,x=!g&&(0!==o&&10404!==o&&10231!==o&&!(0,U.mB)(o)||10231===o&&!s||d||6===c||p);return{isServerError:g,isCommonError:x,isInitLoading:i&&!(null==t?void 0:t.length)&&!x,isEmpty:!(g||x||i||t.length)}},Be=()=>{const{id:e}=(0,l.UO)(),t=(0,r.qj)(m.h),i=(0,r.qj)(Oe);return(0,a.useCallback)((()=>{t.resetItemList({key:"video"}),i.getVideoDetail({itemId:e})}),[t,e,i])};var Re=i(4139),Ze=i(27918);const ze=(0,Re.Z)("div",{target:"elnrzms0"})((({theme:{direction:e},showVideoCommentDetail:t=!1})=>[(0,Ze.YJ)({direction:e,marginEnd:24,marginStart:t?24:0}),{width:t?"unset":"692px",maxWidth:t?"unset":"692px",padding:"24px 0",flex:t?"1 1 auto":""},(0,Ze.f1)({max:767,style:(0,Ze.YJ)({direction:e,marginStart:16})})]),"label:DivMainContainer;"),Ve=(0,Re.Z)("div",{target:"elnrzms1"})({padding:"210px 0"},"label:DivErrorWrapper;"),Fe=(0,Re.Z)("h2",{target:"elnrzms2"})((({theme:e})=>[(0,Ze.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H3"}),(0,Ze.YJ)({direction:e.direction,marginStart:"-68px"}),{marginTop:"30px",color:e.colors.TextPrimary}]),"label:H2RecommendTitle;");var $e=i(7915),qe=i(99452),We=i(53048),Ae=i(24878),He=i(85404),Ue=i(1160),Ne=i(88650),Ge=i(90035),Ye=i(75546),Je=i(22509),Qe=i(47127),Ke=i(38993),Xe=i(87616),et=i(43683),tt=i(11838),it=i(63092),ot=i(80537);const nt=(0,Re.Z)("div",{target:"e17fzhrb0"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative",flex:"0 0 82px",width:"320px"},"label:DivInfoContainer;"),rt=(0,Re.Z)("span",{target:"e17fzhrb1"})((({theme:e})=>(0,Ze.GI)({theme:e,typography:"P1",fontWeight:"bold",fontFamily:"Sofia"})),"label:SpanUniqueId;");rt.defaultProps=Object.assign(Object.assign({},rt.defaultProps),{"data-e2e":"browse-username"});const at=(0,Re.Z)("span",{target:"e17fzhrb2"})((({theme:e})=>(0,Ze.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{display:"flex",alignItems:"center","> span":Ze.wj},"label:SpanOtherInfos;");at.defaultProps=Object.assign(Object.assign({},at.defaultProps),{"data-e2e":"browser-nickname"});const lt=(0,Re.Z)(tt.D,{target:"e17fzhrb3"})(Ze.wj,Ze.gi,{flex:"1 1 auto",":hover":{[`${rt}`]:{textDecoration:"underline"}}},(({theme:{direction:e}})=>(0,Ze.YJ)({direction:e,marginEnd:"12px"})),"label:StyledLink;"),st=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${lt} ${rt}`]:{textDecoration:"underline"}}},(0,Ze.YJ)({direction:e,marginEnd:"12px"})],dt=(0,Re.Z)(ot.W,{target:"e17fzhrb6"})({justifySelf:"flex-end","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;");dt.defaultProps=Object.assign(Object.assign({},dt.defaultProps),{"data-e2e":"browse-follow"});const ct=(0,a.memo)((function(e){const{uniqueId:t,videoId:i,teaParams:o}=e,l=(0,r.mp)(Ae.z,{selector:e=>e.users[t],dependencies:[t]}),{t:s,timeTranslator:d}=(0,He.e)(),c=(0,r.mp)(T.A,{selector:e=>null==e?void 0:e[i],dependencies:[i]}),{secret:u,forFriend:v,createTime:m}=null!=c?c:{},{showing:p,handleCardEnter:h,handleCardLeave:g,handleItemEnter:x,handleItemLeave:f}=(0,Ue.V)(),b=(0,Ne.zW)(l),{isShowLive:w}=b;(0,Ne.TB)({isShowLive:w,reportTrigger:w,user:l,enterMethod:w?"video_head_browser":"creator",autoReport:!0,reportValidator:()=>void 0!==(null==l?void 0:l.relation),once:!0});const y=(0,Ne.CN)(Object.assign({user:l,enterMethod:w?"video_head_browser":"creator"},o)),_=(0,a.useMemo)((()=>Object.assign(Object.assign({},y),{author_id:y.to_user_id,group_id:i})),[y,i]),j=(0,a.useMemo)((()=>{if(l)return Object.assign(Object.assign({},y),{author_id:l.id,to_user_id:l.id,group_id:i,enterMethod:"creator"})}),[l,i,y]);if(!l)return(0,Ge.G)(["authorInfo"]);const{nickname:k,secUid:C,verified:S}=l,I=function(e){return e?(0,Re.Z)(it.G,{target:"e17fzhrb4"})(st):(0,Re.Z)(tt.D,{target:"e17fzhrb5"})(st)}(w);return(0,n.jsxs)(nt,{children:[(0,n.jsx)(I,Object.assign({uniqueId:t,secUid:C,onMouseEnter:x,onMouseLeave:f,isInBrowserMode:!0,teaParams:_,"data-e2e":"browse-user-avatar",onClick:e.onClick,onLinkClick:e.onLinkClick},{children:(0,n.jsx)(Ye.k,Object.assign({needAnimation:!0,liveTheme:2,size:40},b),void 0)}),void 0),(0,n.jsxs)(lt,Object.assign({uniqueId:t,secUid:C,onMouseEnter:x,onMouseLeave:f,isInBrowserMode:!0,teaParams:j,onClick:e.onClick,onLinkClick:e.onLinkClick},{children:[(0,n.jsxs)(rt,{children:[t,S&&(0,n.jsx)(et.Q,{width:14,height:14,"data-e2e":"browse-bluev"},void 0)]},void 0),(0,n.jsx)("br",{},void 0),(0,n.jsxs)(at,{children:[k,(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,n.jsx)("span",{children:d(1e3*Number(m))},void 0)]},void 0),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,n.jsx)($e.Z,{width:16,height:16,style:{fill:"#121212",opacity:.5,margin:"0 4px"}},void 0),(0,n.jsx)("span",{children:s("video_label_private")},void 0)]},void 0),v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:" · "},void 0),(0,n.jsx)(qe.Z,{style:{margin:"0 4px"},width:20,height:20},void 0),(0,n.jsx)("span",Object.assign({className:"friend"},{children:s("Friends only")}),void 0)]},void 0)]},void 0)]}),void 0),(0,n.jsx)(ut,{author:l,video:c,videoReportParams:o},void 0),p&&(0,n.jsx)(Je.C,{top:30,fixedLeft:32,onMouseEnter:h,onMouseLeave:g,uniqueId:t},void 0)]},void 0)})),ut=function({author:e,video:t,videoReportParams:i}){var o;const a=(0,r.mp)(ve.G,{selector:t=>{var i,o;return(null===(o=null===(i=t.appContext)||void 0===i?void 0:i.user)||void 0===o?void 0:o.uniqueId)===e.uniqueId},dependencies:[e.uniqueId]}),l=(0,Qe.Q)({query:{enter_method:"click_follow"}}),{text:s,handleFollow:d,isFollowing:c,relation:u}=(0,$.w)({uniqueId:e.uniqueId,onNeedLogin:l,teaParams:Object.assign({group_id:null==t?void 0:t.id},i)});return(null==t?void 0:t.scheduleTime)?(0,n.jsx)(Ke.Q,{video:t},void 0):a?(0,n.jsx)(Xe.C,{videoId:null!==(o=null==t?void 0:t.id)&&void 0!==o?o:""},void 0):(0,n.jsxs)(dt,Object.assign({size:"small",buttonTheme:c?"default":"primary",onClick:d},{children:[2===u?(0,n.jsx)(We.Z,{},void 0):null,s]}),void 0)};var vt,mt,pt=i(97446),ht=i(93583),gt=i(77015),xt=i(13761);function ft(){return ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ft.apply(this,arguments)}const bt=function(e){return a.createElement("svg",ft({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),vt||(vt=a.createElement("g",{clipPath:"url(#default-avatar_svg__clip0_9489_175606)"},a.createElement("rect",{width:48,height:48,fill:"#D0D1D3",rx:24}),a.createElement("path",{fill:"#F3F3F3",fillRule:"evenodd",d:"M23.998 9.5a8.5 8.5 0 100 17 8.5 8.5 0 000-17zm0 19c-6.176 0-10.984 3.874-12.991 9.377-.49 1.343.543 2.66 1.871 2.66h22.239c1.328 0 2.361-1.317 1.87-2.661-2.008-5.499-6.812-9.376-12.989-9.376z",clipRule:"evenodd"}))),mt||(mt=a.createElement("defs",null,a.createElement("clipPath",{id:"default-avatar_svg__clip0_9489_175606"},a.createElement("rect",{width:48,height:48,fill:"white",rx:24})))))},wt=(0,Re.Z)("div",{target:"e1a7v7ak0"})({marginTop:"24px"},"label:DivCommentContainer;"),yt=(0,Re.Z)("p",{target:"e1a7v7ak1"})((({theme:e})=>(0,Ze.GI)({theme:e,fontWeight:"bold",color:"TextPrimary"})),{lineHeight:"26px",fontSize:"18px"},"label:PCommentTitle;"),_t=(0,Re.Z)("div",{target:"e1a7v7ak2"})({display:"flex",marginTop:"16px"},"label:DivCommentBarContainer;"),jt=(0,Re.Z)("div",{target:"e1a7v7ak3"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginStart:"16px"}),{height:"48px",paddingBottom:"24px",borderBottom:`1px solid ${e.colors.ShadowPrimary}`,cursor:"pointer",flex:1,boxSizing:"content-box"}]),"label:DivBarWrapper;"),kt=(0,Re.Z)("div",{target:"e1a7v7ak4"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginStart:"16px"}),{paddingBottom:"24px",borderBottom:`1px solid ${e.colors.ShadowPrimary}`,cursor:"pointer",flex:1,boxSizing:"content-box"}]),"label:DivCommentInputWrapper;"),Ct=(0,Re.Z)("div",{target:"e1a7v7ak5"})((({theme:e})=>[(0,Ze.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),St=(0,Re.Z)(bt,{target:"e1a7v7ak6"})({width:"48px",height:"48px"},"label:StyledDefaultAvatar;"),It=(0,Re.Z)("div",{target:"e1a7v7ak7"})((({theme:e})=>(0,Ze.YJ)({direction:e.direction,marginStart:"16px"})),{lineHeight:"24px",display:"flex",alignItems:"center"},"label:DivDisabledTip;"),Tt=(0,a.memo)((({isCommentDisabled:e,authorId:t,itemId:i,teaParams:o})=>{var r,l;const{user:s}=null!==(r=(0,h.L)((()=>["user"]),[]))&&void 0!==r?r:{},d=Boolean(s),c=(0,u.Q)(),{nickname:v=""}=null!==(l=(0,$.p)(t))&&void 0!==l?l:{},{isBrowserModeShowing:m}=(0,a.useContext)(M._),p=(0,Qe.Q)(),g=(0,a.useMemo)((()=>m?null:(0,n.jsx)(ht._,{itemId:i,teaParams:o},void 0)),[m,i,o]);return(0,n.jsxs)(_t,{children:[d?(0,n.jsx)(xt.q,{size:40,src:null==s?void 0:s.avatarUri[0]},void 0):(0,n.jsx)(St,{},void 0),d?e?(0,n.jsx)(It,{children:c("comment_disable_notfollow").replace("%@",v)},void 0):(0,n.jsx)(kt,{children:g},void 0):(0,n.jsx)(jt,Object.assign({onClick:p},{children:(0,n.jsx)(gt.Vk,{children:c("video_details_page_comment_field_cta")},void 0)}),void 0)]},void 0)})),Lt=(0,a.memo)((0,a.forwardRef)((function(e,t){var i,o;const{itemId:l="",teaParams:s,scheduleTime:d=""}=e,c=(0,u.Q)(),{user:v}=null!==(i=(0,h.L)((()=>["user"]),[]))&&void 0!==i?i:{},[m]=(0,r.b7)(T.A,{selector:e=>e[null!=l?l:""],dependencies:[l]}),{loading:g,comments:x,hasMore:f}=(0,r.mp)(Te.x),b=(0,$.p)(null==m?void 0:m.author),w=(0,a.useMemo)((()=>3===(null==m?void 0:m.itemCommentStatus)||3===(null==b?void 0:b.commentSetting)),[null==b?void 0:b.commentSetting,null==m?void 0:m.itemCommentStatus]),y=(0,a.useMemo)((()=>(0,p.sA)(b,null==v?void 0:v.uid)),[b,null==v?void 0:v.uid]),{stats:_}=null!=m?m:{},j=g&&!x.length&&f,k=null!==(o=null==_?void 0:_.commentCount)&&void 0!==o?o:0,C=c("video_details_page_comment_header",{num:k<=1?1:k,Count:(0,p.BT)(k)});return d?(0,n.jsx)(wt,{children:(0,n.jsx)(Ct,{children:c("scheduled_video_comment_unavailable")},void 0)},void 0):(0,n.jsx)(wt,Object.assign({ref:t},{children:w?(0,n.jsx)(Ct,Object.assign({"data-e2e":"comment-turned-off"},{children:c("comment_off")}),void 0):(0,n.jsxs)(n.Fragment,{children:[j?null:(0,n.jsx)(yt,{children:C},void 0),j?null:(0,n.jsx)(Tt,{teaParams:s,itemId:l,authorId:null==m?void 0:m.author,isCommentDisabled:y},void 0),(0,n.jsx)(pt.$,{hasMore:f,inDetailPage:!0,itemId:l,disableReply:y,teaParams:s},void 0)]},void 0)}),void 0)})));var Mt,Dt=i(93328),Ot=i(67862),Et=i(13964),Pt=i(88671);!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Redirect=2]="Redirect"}(Mt||(Mt={}));var Bt=i(58942);const Rt=(0,Re.Z)("div",{target:"ege8lhx0"})({},"label:DivVideoDetailContainer;"),Zt=(0,Re.Z)("div",{target:"ege8lhx1"})({height:0,width:"1px",position:"absolute",marginTop:"-84px"},"label:DivEmptyWrapper;"),zt=(0,Re.Z)("div",{target:"ege8lhx2"})({height:"48px",fontSize:"24px",display:"flex",marginBottom:"16px"},"label:DivBackHead;"),Vt=(0,Re.Z)("div",{target:"ege8lhx3"})((({theme:{colors:e}})=>({fontSize:"24px",display:"flex",cursor:"pointer",alignItems:"center",color:e.TextPrimary})),"label:DivHeadContent;"),Ft=(0,Re.Z)(Bt.Z,{target:"ege8lhx4"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginStart:"14px"}),{transform:"rtl"===e.direction?"rotate(180deg)":""}]),"label:StyledChevronLeftOffset;"),$t=(0,Re.Z)("span",{target:"ege8lhx5"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginStart:"4px"}),{lineHeight:"48px",fontSize:"16px",color:e.colors.TextPrimary}]),"label:SpanBackTitle;"),qt=(0,Re.Z)("div",{target:"ege8lhx6"})({display:"flex"},"label:DivContentContainer;"),Wt=(0,Re.Z)("div",{target:"ege8lhx7"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginEnd:"24px"}),{flex:"1 1 808px"}]),"label:DivLeftContainer;"),At=(0,Re.Z)("div",{target:"ege8lhx8"})((({theme:e})=>({padding:"16px 0",borderBottom:`1px solid ${e.colors.ShadowPrimary}`})),"label:DivAuthorContainer;"),Ht=(0,Re.Z)("div",{target:"ege8lhx9"})({width:"322px",flex:"0 0 322px"},"label:DivVideoList;"),Ut=(0,Re.Z)("p",{target:"ege8lhx10"})((({theme:e})=>(0,Ze.GI)({theme:e,fontWeight:"semiBold",color:"TextPrimary"})),Ze.wj,{fontSize:"18px",marginBottom:"15px",lineHeight:"24px"},"label:PVideoListTitle;"),Nt=(0,Re.Z)("div",{target:"ege8lhx11"})((({theme:{colors:e}})=>({width:"100%",height:"606px",background:e.BGPlaceholderDefault,position:"relative",overflow:"hidden",borderRadius:"4px",marginBottom:"24px"})),"label:DivVideoContentSkeleton;");var Gt,Yt,Jt=i(32222),Qt=i.n(Jt),Kt=i(10282),Xt=i(62321),ei=i(91497);function ti(){return ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ti.apply(this,arguments)}const ii=function(e){return a.createElement("svg",ti({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Gt||(Gt=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M3 4a2 2 0 012-2h14a2 2 0 012 2v16a2 2 0 01-2 2H5a2 2 0 01-2-2V4zm16 0H5v16h14V4z",clipRule:"evenodd"})),Yt||(Yt=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M8 7.5a.5.5 0 01.5-.5h7a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-1zm0 4a.5.5 0 01.5-.5h7a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-1zm.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h4a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-4z",clipRule:"evenodd"})))};var oi;!function(e){e.CloseTranscriptPanel="close_transcript_panel",e.ClickTranscriptLine="click_transcript_line",e.ShowTranscriptPanel="show_transcript_panel"}(oi||(oi={}));const ni=(e,t)=>{B.W.event("close_transcript_panel",{enter_method:e,is_pinned:t})},ri=(e,t)=>{B.W.event("show_transcript_panel",{enter_method:e,is_pinned:t})};var ai=i(8609);const li=(0,Re.Z)("div",{target:"ejx52ff0"})((({theme:{direction:e,colors:t}})=>[(0,Ze.YJ)({direction:e,paddingStart:16,paddingEnd:8}),{height:40,background:t.BGCreation3,opacity:.88,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"}]),"label:DivTranscriptHeader;"),si=(0,Re.Z)("span",{target:"ejx52ff1"})((({theme:{direction:e}})=>[(0,Ze.YJ)({direction:e,marginStart:8}),{fontWeight:600,fontSize:"16px",flex:1}]),"label:SpanHeadertext;"),di=(0,Re.Z)(ai.Z,{target:"ejx52ff2"})((({reversed:e})=>[{width:"16px",height:"16px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),ci=(0,Re.Z)("ul",{target:"ejx52ff3"})((({theme:{colors:e},isShow:t})=>[{fontWeight:400,fontSize:"14px",listStyleType:"none",padding:"0 0 16px 0",marginBottom:24,marginTop:0,background:e.BGPlaceholderOpaque,display:t?"block":"none",maxHeight:432,overflow:"auto",position:"relative"}]),"label:UlTranscriptList;"),ui=(0,Re.Z)("li",{target:"ejx52ff4"})((({theme:{direction:e,colors:t},isCurrent:i,isRTL:o})=>[{minHeight:38,padding:"8px 16px",display:"flex",cursor:"pointer",":hover":{backgroundColor:t.BGCreation3}},i?Object.assign({backgroundColor:t.BGCreation3,borderRight:o?`4px solid ${t.Primary}`:"",borderLeft:o?"":`4px solid ${t.Primary}`},(0,Ze.YJ)({direction:e,paddingStart:"12px"})):{}]),"label:LiTranscriptItem;"),vi=(0,Re.Z)("div",{target:"ejx52ff5"})((({theme:{direction:e,colors:t}})=>[(0,Ze.YJ)({direction:e,marginEnd:16}),{color:t.ConstBGInverse}]),"label:DivTranscriptTime;"),mi=(0,Re.Z)("div",{target:"ejx52ff6"})((({theme:{colors:e}})=>[{color:e.Primary2,wordWrap:"break-word",wordBreak:"break-word"}]),"label:DivTranscriptText;"),pi=(0,Re.Z)("div",{target:"ejx52ff7"})((({theme:{colors:e}})=>[{height:1,backgroundColor:e.BGPlaceholderOpaque,marginBottom:24}]),"label:DivSplitLine;"),hi=(0,Re.Z)("div",{target:"ejx52ff8"})({cursor:"pointer"},"label:DivCloseIconContainer;"),gi=(0,a.memo)((function({item:e,onSeek:t,isNarrow:i,isListShow:o,setIsListShow:l}){const{id:s}=e,[{subtitleContent:d},c]=(0,r.b7)(be),v=(0,a.useRef)(0),m=(0,a.useRef)(!1),p=(0,a.useMemo)((()=>{const e=Qt()(d);return e[0].start>=1&&e.unshift({end:0,start:0,startStr:"00:00",text:""}),e}),[d]),[{currentTime:h}]=(0,r.b7)(Xt.M,{selector:e=>e[s]?e[s]:{duration:0,videoPercent:0,currentTime:0},dependencies:[s]}),{isDefaultExpanded:g,isShowCloseIcon:x}=(0,y.II)(),{isRTL:f}=(0,ei.Y)(),b=(0,a.useRef)(null),w=(0,a.useCallback)((()=>{x||(o?(ni("expand_panel",g?1:0),l(!1)):(ri("expand_panel",g?1:0),l(!0)))}),[o,x,g,l]),_=(0,a.useCallback)((e=>{var i;t(e),i=e,B.W.event("click_transcript_line",{time_clicked:i})}),[t]),j=(0,a.useCallback)((()=>{ni("click_transcript",0),c.setIfShowSubtitle(!1)}),[c]),k=(0,a.useCallback)((e=>{var t,i,o,n,r,a,l,s;if(m.current)return;const d=null===(i=null===(t=null==b?void 0:b.current)||void 0===t?void 0:t.children)||void 0===i?void 0:i[e],c=null==d?void 0:d.offsetTop,u=null===(o=null==b?void 0:b.current)||void 0===o?void 0:o.scrollTop,v=null==d?void 0:d.clientHeight,p=c-u,h=p<432&&p>-v;if(e>2){const t=null===(a=null===(r=null===(n=null==b?void 0:b.current)||void 0===n?void 0:n.children)||void 0===r?void 0:r[e-2])||void 0===a?void 0:a.offsetTop;null===(l=null==b?void 0:b.current)||void 0===l||l.scrollTo({top:t,behavior:"smooth"})}else h||null===(s=null==b?void 0:b.current)||void 0===s||s.scrollTo({top:0,behavior:"smooth"})}),[b,m]),C=(0,a.useCallback)((()=>{m.current=!0}),[m]),S=(0,a.useCallback)((()=>{m.current=!1}),[m]),I=(0,a.useCallback)((()=>{var e;let t=0;for(let i=p.length-1;i>=0;i--)if(p[i].start<=h||h>(null===(e=null==p?void 0:p[i-1])||void 0===e?void 0:e.end)&&Math.abs(p[i].start-h)<.001){t=i,v.current!==i&&(v.current=i,k(i));break}return p.map(((e,i)=>(0,n.jsxs)(ui,Object.assign({isCurrent:t===i,onClick:()=>_(e.start),isRTL:f},{children:[(0,n.jsx)(vi,{children:e.startStr},void 0),(0,n.jsx)(mi,{children:e.text},void 0)]}),i)))}),[p,h,_,f,k]),T=(0,u.Q)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({style:{marginTop:i?"32px":0}},{children:[(0,n.jsxs)(li,Object.assign({onClick:w,style:{cursor:x?"auto":"point"}},{children:[(0,n.jsx)(ii,{},void 0),(0,n.jsx)(si,{children:T("asr_transcript_onpc_kebab_menu_ab_transcript_button")},void 0),x?(0,n.jsx)(hi,Object.assign({onClick:j},{children:(0,n.jsx)(Kt.Z,{height:12,width:12},void 0)}),void 0):(0,n.jsx)(di,{reversed:o},void 0)]}),void 0),(0,n.jsx)(ci,Object.assign({isShow:o,ref:b,onMouseEnter:C,onMouseLeave:S},{children:I()}),void 0)]}),void 0),(0,n.jsx)(pi,{},void 0)]},void 0)})),xi=(0,Re.Z)("div",{target:"e1y973ys0"})({display:"flex",width:"100%",flexWrap:"wrap"},"label:DivVideoCardSkeletonContainer;"),fi=(0,Re.Z)("div",{target:"e1y973ys1"})((({theme:{colors:e}})=>({width:"100%",height:"120px",marginBottom:"16px",background:e.BGPlaceholderDefault,borderRadius:"2px"})),"label:DivCardH;"),bi=(0,Re.Z)("div",{target:"e1y973ys2"})((({theme:{colors:e}})=>({width:"147px",height:"202px",marginBottom:"16px",background:e.BGPlaceholderDefault,borderRadius:"2px",marginRight:"14px"})),"label:DivCard;"),wi=(0,a.memo)((function(){return(0,n.jsxs)(xi,{children:[(0,n.jsx)(bi,{},void 0),(0,n.jsx)(bi,{},void 0),(0,n.jsx)(bi,{},void 0),(0,n.jsx)(bi,{},void 0),(0,n.jsx)(bi,{},void 0),(0,n.jsx)(bi,{},void 0)]},void 0)}));(0,a.memo)((function(){return(0,n.jsxs)(xi,{children:[(0,n.jsx)(fi,{},void 0),(0,n.jsx)(fi,{},void 0),(0,n.jsx)(fi,{},void 0),(0,n.jsx)(fi,{},void 0),(0,n.jsx)(fi,{},void 0),(0,n.jsx)(fi,{},void 0)]},void 0)}));var yi=i(79439),_i=i(14452),ji=i(15073),ki=i(29910),Ci=i(46562),Si=i(56344),Ii=i(57354),Ti=i(96207),Li=i(57462),Mi=i(99727),Di=i(12285),Oi=i(3451),Ei=i(74820),Pi=i(15854),Bi=i(67186),Ri=i(85311),Zi=i(12765),zi=i(31444),Vi=i(44401),Fi=i(12886),$i=i(36761),qi=i(93645),Wi=i(30109),Ai=i(79489),Hi=i(58500),Ui=i(17936),Ni=i(12305),Gi=i(80201),Yi=i(3624);i(20935),i(34249),(0,Yi.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),(0,Yi.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(1 * .2em), 0) rotate(calc(1 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(1 * 0), 0) rotate(calc(1 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(1 * -.2em), 0) rotate(calc(1 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(1 * -.4em), 0) rotate(calc(1 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, 1 * -.6em, 0) rotate(1 * 100deg)"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(1 * -.8em), 0) rotate(calc(1 * 120deg))"}}),(0,Yi.F4)({"0%":{opacity:0,transform:"translate3d(.5em,calc(2 * .2em), 0) rotate(calc(2 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(2 * 0), 0) rotate(calc(2 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(2 * -.2em), 0) rotate(calc(2 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(2 * -.4em), 0) rotate(calc(2 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(2 * -.6em), 0) rotate(calc(2 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(2 * -.8em), 0) rotate(calc(2 * 120deg))"}}),(0,Yi.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(3 * .2em), 0) rotate(calc(3 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(3 * 0), 0) rotate(calc(3 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(3 * -.2em), 0) rotate(calc(3 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(3 * -.4em), 0) rotate(calc(3 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(3 * -.6em), 0) rotate(calc(3 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(3 * -.8em), 0) rotate(calc(3 * 120deg))"}});const Ji=(0,Re.Z)("div",{target:"ean6quk0"})((({theme:e})=>(0,Ze.YJ)({direction:e.direction,end:"20px"})),(({needExtraBottom:e=!1})=>({display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",top:e?"315px":"375px"})),"label:DivActionItemContainer;"),Qi=((0,Yi.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.67)"},"100%":{transform:"scale(1)"}}),(0,Re.Z)("div",{target:"ean6quk5"})((({theme:e})=>[(0,Ze.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:"490px",overflowY:"auto","::-webkit-scrollbar-thumb":{background:e.colors.SDTertiary}}]),"label:DivShareWrapper;"));Qi.defaultProps=Object.assign(Object.assign({},Qi.defaultProps),{"data-e2e":"feed-share-group"});const Ki=(0,Re.Z)("svg",{target:"ean6quk12"})((({theme:{direction:e}})=>(0,Ze.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:SvgIconFlag;"),Xi=(0,Re.Z)("div",{target:"ean6quk13"})((({theme:e})=>[(0,Ze.GI)({theme:e,fontWeight:"semiBold",typography:"P2",color:"TextPrimary"}),{width:"280px",height:"58px",display:"flex",alignItems:"center",padding:"16px",boxSizing:"border-box",cursor:"pointer"}]),"label:DivEleWrapper;"),eo=(0,Re.Z)(ii,{target:"ean6quk14"})((({theme:{direction:e}})=>[(0,Ze.YJ)({direction:e,marginEnd:"4px"})]),"label:StyledTranscriptIcon;"),to="#fff",io="#161823",oo={flexDirection:"row",position:"relative",top:0,right:0,width:"100%",height:"40px",paddingBottom:"24px",boxSizing:"content-box",borderBottom:"1px solid #F1F1F1"},no=(0,a.memo)((function(e){const{itemId:t,style:i,onClickLike:o,onClickShare:l,onClickComment:s,isHorizontal:d=!1,needExtraBottom:c=!1}=e,v=(0,u.Q)(),{isRTL:m}=(0,ei.Y)(),[h,g]=(0,a.useState)(0),x=m?"rightBottom":"leftBottom",f=(0,a.useMemo)((()=>({offset:[m?20:-20,10*Math.min(h,10)]})),[m,h]),b=(0,a.useMemo)((()=>({maxWidth:"unset",filter:"drop-shadow(0px 2px 12px rgba(0, 0, 0, 0.12))"})),[]),{colors:w}=(0,Ei.u)(),_=(0,a.useMemo)((()=>({padding:"0 4px",backgroundColor:w.BGSecondary})),[w]),j=m?"right":"left",k=(0,a.useMemo)((()=>({offset:[m?20:-20]})),[m]),[C={},S]=(0,r.b7)(T.A,{selector:e=>e[t],dependencies:[t]}),[{subtitleContent:I},L]=(0,r.b7)(be),{author:M="",id:D="",digged:O=!1,commentSetting:E=!1}=(0,p.m7)(C),P=(0,a.useMemo)((()=>3===(null==C?void 0:C.itemCommentStatus)||3===E),[E,null==C?void 0:C.itemCommentStatus]),R=(0,r.mp)(Ae.z,{selector:e=>{if(M)return e.users[M]},dependencies:[C]}),{secUid:z="",uniqueId:V="",id:F=""}=(0,p.m7)(R),$=(0,Qe.X)({action:(0,a.useCallback)((()=>{null==o||o(),S.postLikeVideo({id:t,enter_method:"click",play_mode:"video_detail"})}),[S,t,o]),modalConfig:{query:{enter_method:"click_like"}}}),W=(0,Z.fz)(Ai.p),[A,H]=(0,a.useState)(!1),[U,N]=(0,a.useState)(!1),[G,Y]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(!1),K=(0,a.useRef)(0),X=(0,a.useRef)(0),ee=(0,a.useRef)(0),te=(0,a.useRef)(0),{expanded:ie}=(0,Vi.c1)(),oe=(0,a.useCallback)((()=>{var e,i;G||(H(!A),W.handleClickShare({author_id:null!==(e=null==R?void 0:R.id)&&void 0!==e?e:"",to_user_id:null!==(i=null==R?void 0:R.id)&&void 0!==i?i:"",group_id:t,play_mode:"video_detail"})),null==l||l()}),[G,l,A,W,null==R?void 0:R.id,t]),ne=(0,a.useCallback)((()=>{var e;W.handleSharePanelShow({group_id:t,to_user_id:null!==(e=null==R?void 0:R.id)&&void 0!==e?e:"",play_mode:"video_detail",share_option_type:ie}),window.clearTimeout(K.current),window.setTimeout((()=>{H(!0)}),100)}),[ie,t,W,null==R?void 0:R.id]),re=(0,a.useCallback)((()=>{G||(window.clearTimeout(ee.current),K.current=window.setTimeout((()=>{H(!1)}),300))}),[G]),ae=(0,a.useCallback)((()=>{var e;e={group_id:t},B.W.event("kebab_menu_hover",e),window.clearTimeout(X.current),te.current=window.setTimeout((()=>{N(!0)}),100)}),[t]),le=(0,a.useCallback)((()=>{window.clearTimeout(te.current),X.current=window.setTimeout((()=>{N(!1)}),300)}),[]),se=(0,a.useCallback)((e=>{Y(e)}),[]),de=(0,a.useCallback)((()=>{Q(!0)}),[Q]),ce=(0,Fi.gR)(t),ue=(0,Vi.JW)();(0,a.useEffect)((()=>{ue()}),[ue]);const ve=(0,$i.Q)({item:C,play_mode:"video_detail",onShow:Et.NS}),me=(0,a.useMemo)((()=>(0,n.jsxs)(Xi,Object.assign({onMouseEnter:ae,onMouseLeave:le,onClick:ve},{children:[(0,n.jsx)(Ki,Object.assign({fill:"currentColor",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:15},{children:(0,n.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),v("Report")]}),void 0)),[ae,le,ve,v]),pe=(0,a.useCallback)((()=>{L.setIfShowSubtitle(!0),ri("click_transcript",0)}),[L]),{isInActionBar:he}=(0,y.II)(),ge=(0,a.useMemo)((()=>(0,n.jsxs)(Xi,Object.assign({onMouseEnter:ae,onMouseLeave:le,onClick:pe},{children:[(0,n.jsx)(eo,{},void 0),v("asr_transcript_onpc_kebab_menu_ab_transcript_button")]}),void 0)),[ae,le,pe,v]),xe=(0,a.useCallback)((()=>(0,n.jsxs)(n.Fragment,{children:[he&&(null==I?void 0:I.length)>0?ge:null,me]},void 0)),[I,he,ge,me]),fe=(0,a.useMemo)((()=>({group_id:t,to_user_id:F,author_id:F,play_mode:"video_detail"})),[t,F]),we=(0,a.useMemo)((()=>d?24:32),[d]),ye=(0,a.useMemo)((()=>(0,n.jsx)(Pi.Z,{width:we,height:we,fill:d?io:to},void 0)),[d,we]),_e=(0,a.useMemo)((()=>(0,n.jsx)(Bi.Z,{width:we,height:we,fill:d?io:to},void 0)),[d,we]),je=(0,a.useMemo)((()=>(0,n.jsx)(Ri.Z,{width:we,height:we,fill:d?io:to},void 0)),[d,we]),ke=(0,a.useMemo)((()=>(0,n.jsx)(Zi.Z,{width:we,height:we,fill:d?io:to},void 0)),[d,we]),Ce=(0,a.useMemo)((()=>(0,n.jsx)(zi.Z,{width:we,height:we,fill:d?io:to},void 0)),[d,we]),Se=(0,a.useMemo)((()=>(0,n.jsx)(Gi.Z,{isLiked:O,likedIcon:ye,unlikeIcon:Ce},void 0)),[O,Ce,ye]),{stats:Ie,id:Te}=(0,p.m7)(C),Le=`https://www.tiktok.com${(0,q.fH)({uniqueId:V,secUid:z,videoId:Te})}`,Me=(0,a.useMemo)((()=>(0,n.jsx)(Qi,Object.assign({onMouseEnter:ne,onMouseLeave:re},{children:(0,n.jsx)(qi.mB,{mode:1,videoId:D,url:Le,embedCode:ce,enabled:C.shareEnabled,teaParams:fe,onPlatformCountChange:g,onOtherModalOpen:se,onSendMessagePanelOpen:de},void 0)}),void 0)),[ce,se,de,ne,re,C.shareEnabled,fe,Le,D]),De=(0,a.useCallback)((()=>{Q(!1)}),[Q]),Oe=(0,Qe.X)({action:(0,a.useCallback)((()=>{Hi.y.handleCommentClick(Object.assign(Object.assign({},fe),{action:"open"})),null==s||s()}),[s,fe]),modalConfig:{query:{enter_method:"click_comment"}}}),Ee=(0,a.useMemo)((()=>{const e={position:"absolute",top:"4px",transform:"rotate(-90deg)",opacity:"0.9"};return m?e.left=0:e.right=0,e}),[m]),{isDark:Pe}=(0,Ei.u)(),Be=Pe?"black":"white";if(!C)return(0,Ge.G)(["item"]);const Re=d?Object.assign(Object.assign({},i),oo):i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Ji,Object.assign({needExtraBottom:c,style:Re},{children:[(0,n.jsx)(Ni.i,{text:(0,p.BT)(null==Ie?void 0:Ie.diggCount),Icon:Se,onClick:$,e2eTag:"like",normalText:!0,isHorizontal:d},void 0),(0,n.jsx)(Ni.i,{text:P?"0":(0,p.BT)(null==Ie?void 0:Ie.commentCount),Icon:_e,onClick:Oe,e2eTag:"comment",normalText:!0,isHorizontal:d},void 0),(0,n.jsx)(Ui.u,Object.assign({destroyTooltipOnHide:!0,visible:A,placement:x,overlay:Me,align:f,overlayStyle:b,overlayInnerStyle:_,tooltipTheme:Be,zIndex:999},{children:(0,n.jsx)(Ni.i,{text:(null==Ie?void 0:Ie.shareCount)?(0,p.BT)(null==Ie?void 0:Ie.shareCount):v("Share"),Icon:ke,onMouseEnter:ne,onMouseLeave:re,onClick:oe,e2eTag:"share",normalText:!0,isHorizontal:d},void 0)}),void 0),(0,n.jsx)(Ui.u,Object.assign({visible:U,placement:j,align:k,overlay:xe(),overlayStyle:b,overlayInnerStyle:_,tooltipTheme:Be,zIndex:999},{children:(0,n.jsx)(Ni.i,{onMouseEnter:ae,onMouseLeave:le,Icon:je,e2eTag:"more-entrance",style:d?Ee:void 0},void 0)}),void 0)]}),void 0),J&&(0,n.jsx)(Wi.J,{visible:J,videoId:Te,onClose:De},void 0)]},void 0)}));var ro,ao,lo=i(94582),so=i(87821),co=i(33527),uo=i(60622),vo=i(75595),mo=i(76679),po=i(51347);function ho(){return ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ho.apply(this,arguments)}const go=function(e){return a.createElement("svg",ho({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),ro||(ro=a.createElement("g",{fill:"white",fillRule:"evenodd",clipPath:"url(#expand_svg__clip0_9489_175555)",clipRule:"evenodd"},a.createElement("path",{d:"M10.88 3.88a.5.5 0 01.5-.5h8.37a1 1 0 011 1v8.37a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5V5.38h-7.37a.5.5 0 01-.5-.5v-1zM13.37 20a.5.5 0 01-.5.5H4.5a1 1 0 01-1-1v-8.37a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v7.37h7.37a.5.5 0 01.5.5v1z"}))),ao||(ao=a.createElement("defs",null,a.createElement("clipPath",{id:"expand_svg__clip0_9489_175555"},a.createElement("path",{fill:"white",d:"M0 0h24v24H0z"})))))},xo=(0,Re.Z)("div",{target:"e123m2eu0"})({width:"100%",position:"absolute",bottom:"0"},"label:DivSeekBarContainer;"),fo=(0,Re.Z)("div",{target:"e123m2eu1"})({maxWidth:"64px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"20px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),bo=(0,Re.Z)("div",{target:"e123m2eu2"})({height:"4px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",bottom:"0",cursor:"pointer"},"label:DivSeekBarProgress;"),wo=(0,Re.Z)("div",{target:"e123m2eu3"})((({theme:{colors:e,direction:t}})=>({height:"4px",width:"100%",backgroundColor:e.Primary,position:"absolute",bottom:"0",cursor:"pointer",borderBottomLeftRadius:"rtl"===t?"0":"4px",borderBottomRightRadius:"rtl"===t?"4px":"0",transformOrigin:"rtl"===t?"right":"left"})),"label:DivSeekBar;"),yo=(0,Re.Z)("div",{target:"e123m2eu4"})((({theme:{direction:e}})=>(0,Ze.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"18px",height:"18px",position:"absolute",zIndex:10,bottom:0,transform:`translate(${"rtl"===e?"50%":"-50%"}, 6px)`,cursor:"pointer"})),"label:DivSeekBarCircleWrapper;"),_o=(0,Re.Z)("div",{target:"e123m2eu5"})((({theme:{direction:e,colors:t}})=>[(0,Ze.YJ)({direction:e,start:"3px"}),{width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",zIndex:10,bottom:"3px",boxShadow:`0px 0px 3px ${t.TextPrimary}`}]),"label:DivSeekBarCircle;"),jo=(0,Re.Z)("div",{target:"e123m2eu6"})((({needExtraBottom:e=!1})=>({width:"100%",position:"absolute",userSelect:"none",height:e?"calc(100% - 60px)":"100%",opacity:1,bottom:e?"60px":"0",cursor:"initial",display:"flex",flexDirection:"column",[`:hover ${yo}`]:{display:"block"},[`:hover ${wo}, :hover ${bo}`]:{height:"6px"}})),"label:DivVideoControlContainer;"),ko=(0,Re.Z)("div",{target:"e123m2eu7"})((({active:e})=>[{position:"absolute",width:"100%",display:"flex",alignItems:"center",paddingInlineStart:"16px",bottom:"22px",opacity:e?"1":"0",transition:"all .3s ease"}]),"label:DivControlButtonWrapper;"),Co=(0,Re.Z)("div",{target:"e123m2eu8"})((({theme:{direction:e},active:t,showActionBar:i})=>[{position:"absolute",cursor:"pointer",bottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,Ze.YJ)({direction:e,start:"unset",end:i?"72px":"16px"})]),"label:DivVoiceControlContainer;"),So=(0,Re.Z)("div",{target:"e123m2eu9"})({opacity:1,width:"40px",height:"24px",display:"flex",justifyContent:"center",transition:"opacity .3s"},"label:DivMuteIconContainer;"),Io=(0,Re.Z)("div",{target:"e123m2eu10"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",cursor:"pointer"},"label:DivPlayIconContainer;"),To=(0,Re.Z)(go,{target:"e123m2eu11"})((({theme:{direction:e},active:t,showActionBar:i})=>[{position:"absolute",cursor:"pointer",bottom:"20px",width:"24px",height:"24px",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,Ze.YJ)({direction:e,start:"unset",end:i?"116px":"60px"})]),"label:StyledExpand;"),Lo={width:24,height:24,fill:"#fff"},Mo=(0,a.memo)((function(e){const t=(0,a.useRef)(null),i=(0,a.useRef)(null),o=(0,a.useRef)(null),l=(0,a.useRef)(null),[s,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[v,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),{direction:g}=(0,Ei.u)(),x=(0,a.useRef)(0),f=(0,a.useRef)(null),{videoId:b,pause:w=!1,seek:y,videoRef:_,progressReportCallback:j,progressPreviewReportCallback:k,onGoBrowserMode:C,onDoubleClick:S,onTogglePlay:T,noneActionBar:L=!1,hasBrowserMode:M=!1,needExtraBottom:D}=e,{duration:O,videoPercent:E,currentTime:P}=(0,r.mp)(Xt.M,{selector:e=>e[b]?e[b]:{duration:0,videoPercent:0,currentTime:0},dependencies:[b]}),{percent:R,bindDrag:Z,seek:z}=(0,vo.S)({direction:g,progressRef:i,circleRef:o,barRef:l,initialPercent:0,draggingStateCb:d,draggingPercentCb:y,progressReportCallback:j}),{mute:V,setMute:F}=(0,I.s_)(4),[$,q]=(0,a.useState)(!1),W=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),F(!V)}),[V,F]),A=(0,a.useMemo)((()=>w?(0,n.jsx)("svg",Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Lo,{children:(0,n.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0):(0,n.jsx)(so.Z,Object.assign({},Lo),void 0)),[w]),H=(0,a.useMemo)((()=>V?(0,n.jsx)(co.Z,Object.assign({},Lo),void 0):(0,n.jsx)(uo.Z,Object.assign({},Lo),void 0)),[V]),N=(0,a.useCallback)((()=>{clearTimeout(x.current),m(!0)}),[]),G=(0,a.useCallback)((()=>{x.current=window.setTimeout((()=>{m(!1)}),500)}),[]),Y=(0,a.useCallback)((()=>{h(!0)}),[]),J=(0,a.useCallback)((()=>{h(!1)}),[]);(0,a.useEffect)((()=>{k()}),[k]),(0,a.useEffect)((()=>{var e,t;null===(e=_.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{u(!1)}),0)})),null===(t=_.current)||void 0===t||t.onSeeking((()=>{u(!0)}))}),[_.current,u]);const Q=(0,a.useCallback)((e=>{var t;(0,Et.UW)(e),t={group_id:b},B.W.event("browse_mode_entry_click",Object.assign(Object.assign({},t),{enter_method:"video_detail_expand_click"})),C()}),[C,b]),K=(0,mo.D)((()=>({onClick:T,onDoubleClick:S})),[T,S]),X=s||c?R:E,ee="ltr"===g?{left:`calc(${100*X}%)`}:{right:`calc(${100*X}%)`},te=v||s,ie=v||s||V||$;return(0,n.jsxs)(jo,Object.assign({needExtraBottom:D,onClick:K,ref:f,onMouseEnter:N,onMouseLeave:G,onMouseDown:Et.UW},{children:[(0,n.jsx)(lo.ZP,Object.assign({in:te,timeout:500,nodeRef:f},{children:(0,n.jsxs)(ko,Object.assign({active:te},{children:[(0,n.jsx)(Io,Object.assign({onClick:e.onTogglePlay},{children:A}),void 0),(0,n.jsx)(fo,{children:"ltr"===g?`${(0,U.xo)(P)}/${(0,U.xo)(O)}`:`${(0,U.xo)(O)}/${(0,U.xo)(P)}`},void 0)]}),void 0)}),void 0),M?(0,n.jsx)(lo.ZP,Object.assign({in:te,timeout:500,nodeRef:f},{children:(0,n.jsx)(To,{active:te,showActionBar:!L,onClick:Q},void 0)}),void 0):null,(0,n.jsx)(lo.ZP,Object.assign({in:ie,timeout:500,nodeRef:f},{children:(0,n.jsxs)(Co,Object.assign({showActionBar:!L,active:ie,onMouseEnter:Y,onMouseLeave:J,onMouseDown:Et.UW},{children:[$||p&&!s?(0,n.jsx)(po.y,{isStyleV2:!0,setVolumeDragging:q},void 0):null,(0,n.jsx)(So,Object.assign({mute:V,onClick:W},{children:H}),void 0)]}),void 0)}),void 0),(0,n.jsxs)(xo,Object.assign({ref:t},{children:[(0,n.jsx)(bo,{ref:i,onClick:z,onMouseDown:Z},void 0),(0,n.jsx)(yo,Object.assign({ref:o,style:ee,onMouseDown:Z},{children:(0,n.jsx)(_o,{},void 0)}),void 0),(0,n.jsx)(wo,{ref:l,style:{width:100*X+"%"},onClick:z,onMouseDown:Z},void 0)]}),void 0)]}),void 0)})),Do=(0,Re.Z)("div",{target:"eqrezik0"})({position:"absolute",width:"100%",height:"100%",left:0,top:0,overflow:"hidden",borderRadius:"4px"},"label:DivBlurBackgroundWrapper;"),Oo=(0,Re.Z)("div",{target:"eqrezik1"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover",left:"50%",top:"50%"},"label:DivBlurBackground;"),Eo=(0,Re.Z)("div",{target:"eqrezik2"})((({hasBottomLine:e=!0,theme:{colors:t}})=>({borderBottom:e?`1px solid ${t.ShadowPrimary}`:"none"})),"label:DivVideoInfoContainer;"),Po=(0,Re.Z)("div",{target:"eqrezik3"})({width:"100%",position:"relative"},"label:DivPlayerContainer;"),Bo=(0,Re.Z)("svg",{target:"eqrezik4"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;"),Ro=(0,Re.Z)("div",{target:"eqrezik5"})({position:"relative",width:"100%",height:"100%",cursor:"pointer"},"label:DivVideoWrapper;"),Zo=(0,Re.Z)("div",{target:"eqrezik6"})((({theme:{colors:e}})=>({width:"100%",height:"606px",background:e.ConstBGInverse,position:"relative",borderRadius:"4px",marginBottom:"24px"})),"label:DivVideoContainer;"),zo=(0,Re.Z)("div",{target:"eqrezik7"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:2})),"label:DivMask;"),Vo=(0,Re.Z)("div",{target:"eqrezik8"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),Fo=(0,Re.Z)("div",{target:"eqrezik9"})((({theme:e})=>({width:"106px",height:"106px",padding:"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),$o=(0,Re.Z)("div",{target:"eqrezik10"})((({theme:e})=>({maxWidth:"419px",margin:"24px auto 0",fontSize:"24px",lineHeight:"32px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),qo=(0,Re.Z)("div",{target:"eqrezik11"})((({theme:e})=>({maxWidth:"419px",margin:"16px auto 0",fontSize:"18px",lineHeight:"24px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),Wo=(0,Re.Z)("button",{target:"eqrezik12"})((({theme:e})=>({maxWidth:"419px",height:"56px",cursor:"pointer",margin:"224px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),Ao=(0,a.forwardRef)(((e,t)=>{var i,o,l;const{item:s,currentIndex:d,teaParams:c,onScrollToComment:v}=e,m=(0,u.Q)(),p=(0,r.qj)(T.A),[h,g]=(0,a.useState)(!1),x=(0,a.useRef)(null),f=null!==(i=null==s?void 0:s.id)&&void 0!==i?i:"",b=(0,a.useCallback)(((e="click")=>{p.postLikeVideo(Object.assign({id:f,enter_method:e},c))}),[p,f,c]),w=(0,Qe.X)({action:b,modalConfig:{query:{enter_method:"click_like"}}}),{videoPlayerRef:y,togglePlay:_,handleLinkClick:j}=function({pause:e,setPause:t,handleLikeClick:i}){const o=(0,a.useRef)(null),{enhanceVideoConsumptionVersion:n="v1"}=(0,Dt.m)(),{mute:l,setMute:s}=(0,I.s_)(2),[,d]=(0,a.useState)(!1),c=(0,r.mp)(W.r,{selector:e=>e.isOpen,dependencies:[]}),u=(0,a.useCallback)((()=>{var i,n,r,a;e?null===(n=null===(i=o.current)||void 0===i?void 0:i.play)||void 0===n||n.call(i):null===(a=null===(r=o.current)||void 0===r?void 0:r.pause)||void 0===a||a.call(r),t(!e)}),[e,t]),v=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s(!l,"keydown")}),[l,s]),m=(0,a.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||c)return;const t=new Map([[76,()=>{"v3"===n&&i("keydown")}],[77,()=>{"v3"===n&&v(e)}]]),{keyCode:o}=e;t.has(o)&&(e.preventDefault(),t.get(o)())}),[n,i,v,c]),p=(0,a.useRef)(""),[,h]=(0,a.useState)(0),[{isInputEmpty:g,noReplyUser:x}]=(0,r.b7)(Ot.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),f=(0,a.useCallback)(((e,t)=>{g&&x||((0,Et.PF)(e),h(2),d(!0),p.current=t)}),[g,x]);return(0,a.useEffect)((()=>(document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)})),[m]),{handleLinkClick:f,preventDefault:Et.PF,togglePlay:u,videoPlayerRef:o}}({pause:h,setPause:e=>{g(e)},handleLikeClick:w}),k=(0,r.qj)(Xt.M),C=(0,a.useCallback)((e=>{var t,i,o;const n=null===(t=y.current)||void 0===t?void 0:t.duration;k.setVideoInfo({videoId:f,videoPercent:e,duration:n,currentTime:null!==(o=null===(i=y.current)||void 0===i?void 0:i.currentTime)&&void 0!==o?o:0})}),[f,k,y]),S=(0,a.useCallback)((e=>{var t,i;null===(i=null===(t=y.current)||void 0===t?void 0:t.seek)||void 0===i||i.call(t,e)}),[y]),L=(0,a.useCallback)((e=>{var t,i;null===(i=null===(t=y.current)||void 0===t?void 0:t.seekTime)||void 0===i||i.call(t,e)}),[y]);(0,a.useImperativeHandle)(t,(()=>({seekTime:L})));const{progressReportCallback:D,progressPreviewReportCallback:O}=(0,Oi.CE)({pause:h,videoPlayerRef:y,videoReportParams:c});(0,a.useEffect)((()=>{var e,t;g(!1),C(0),null===(t=null===(e=y.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[s,C,y]);const E=(0,Qe.X)({action:(0,a.useCallback)((e=>{const{clientX:t,clientY:i}=e;new _i.B(t,i).emit(),p.postLikeVideo({id:f,forceLike:!0})}),[f,p])}),P=(0,a.useCallback)((()=>{g(!0)}),[]),B=(0,a.useCallback)((()=>{g(!0)}),[]),R=(0,a.useCallback)((()=>{g(!1)}),[]),{showBrowserMode:z,isBrowserModeShowing:V}=(0,a.useContext)(M._),F=(0,Z.fz)(Q.KF),$=(0,a.useCallback)((()=>{var e,t;z({index:d,playProgress:null!==(t=null===(e=y.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0,belowPlayMode:4,teaParams:c}),Di.r.handleEnterBrowser(c),F.handleUserChangeVideoOrPlayMode()}),[z,d,c,F]);(0,a.useEffect)((()=>{V||g(!1)}),[V]);const q=(0,r.mp)(ji.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),A=(0,r.mp)(be,{selector:e=>{var t;return null!==(t=e.subtitleStruct)&&void 0!==t?t:null},dependencies:[s]}),H=(0,r.qj)(ji.bg),U=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s&&H.removeBlockVideo(s.id)}),[H,s]),N=(0,a.useCallback)((()=>{v()}),[v]);if(!s||!(null==s?void 0:s.video))return(0,Ge.G)(["item.video"]);const{video:{cover:G,zoomCover:Y,playAddr:J="",width:K=1,height:X=1,duration:ee,bitrateInfo:te,volumeInfo:ie},id:oe,itemMute:ne,warnInfo:re,scheduleTime:ae,downloadSetting:le=0,authorPrivate:se=!1}=s,de=(null==Y?void 0:Y[720])||G,ce=(K/X||1)>=1,ue=Boolean(null==re?void 0:re[0])||Boolean(ae);return(0,n.jsxs)(Po,{children:[(0,n.jsxs)(Zo,Object.assign({ref:x},{children:[(0,n.jsx)(Do,{children:(0,n.jsx)(Oo,{style:{backgroundImage:`url(${de})`}},void 0)},void 0),(0,n.jsxs)(Ro,{children:[(0,n.jsx)(ki.S,{poster:de,horizontal:ce,mode:4,ref:y,desc:s.desc,id:oe,playUrl:J,index:d,itemMute:Boolean(ne),duration:ee,bitrateInfo:te,teaParams:c,onVideoError:P,onTimeUpdate:C,onVideoPause:B,onVideoPlay:R,subtitleStruct:A,disableDownload:se||0!==le,volumeInfo:ie},oe),q.includes(s.id||"")?(0,n.jsx)(zo,{children:(0,n.jsxs)(Vo,{children:[(0,n.jsx)(Fo,{children:(0,n.jsx)(yi.Z,{width:40,height:40},void 0)},void 0),(0,n.jsx)($o,{children:m("Web_report_thanks_for_report")},void 0),(0,n.jsx)(qo,{children:m("Web_report_hide_video")},void 0),(0,n.jsx)(Wo,Object.assign({onClick:U},{children:m("Web_report_show_video")}),void 0)]},void 0)},void 0):null]},void 0),(0,n.jsx)(Mo,{needExtraBottom:ue,onGoBrowserMode:$,currentCanPlay:null!==(l=null===(o=y.current)||void 0===o?void 0:o.currentCanPlay)&&void 0!==l&&l,seek:S,videoId:f,pause:h,onDoubleClick:E,onTogglePlay:_,videoRef:y,progressReportCallback:D,progressPreviewReportCallback:O},void 0),h&&(0,n.jsx)(Bo,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:70,height:70,fill:"#fff"},{children:(0,n.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(null==re?void 0:re[0])&&(0,n.jsx)(Ci.zo,{children:(0,n.jsx)(Si.p,{info:null==re?void 0:re[0]},void 0)},void 0),Boolean(ae)&&(0,n.jsx)(Ci.zo,{children:(0,n.jsx)(Ii.W,{isTextAlignStart:!0,scheduledTime:Number(ae),height:56,fontSize:14,iconSize:18.33,iconMargin:4.83},void 0)},void 0)]}),void 0),(0,n.jsxs)(Eo,{children:[(0,n.jsx)(Ti.Q,{onLinkClick:j,item:s,e2eTag:"browse-video-desc",reportParams:c},void 0),(0,n.jsx)(Li.C,{item:s},void 0),(0,n.jsx)(Mi._,{onLinkClick:j,styleType:1,item:s,e2eTag:"browse-music",teaParams:c},void 0)]},void 0),(0,n.jsx)(no,{needExtraBottom:ue,onClickComment:N,itemId:f,isPaused:h},void 0)]},void 0)}));var Ho=i(30074),Uo=i(52765);const No=(0,Re.Z)("div",{target:"e1ymawm00"})((({isNarrowState:e=!1})=>({display:"flex",justifyContent:e?"":"space-between",flexWrap:"wrap"})),"label:DivListContainer;"),Go=(0,Re.Z)("div",{target:"e1ymawm01"})((({theme:e,isNarrowState:t})=>(0,Ze.YJ)({marginEnd:t?"14px":"0px",direction:e.direction})),{width:"147px",marginBottom:"16px",cursor:"pointer"},"label:DivItemContainer;"),Yo=(0,Re.Z)("div",{target:"e1ymawm02"})({width:"100%",height:"202px",position:"relative",borderRadius:"2px",marginBottom:"8px",overflow:"hidden"},"label:DivCoverContainer;"),Jo=(0,Re.Z)("div",{target:"e1ymawm03"})({width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},"label:DivPlayerWrapper;"),Qo=(0,Re.Z)("img",{target:"e1ymawm04"})((({theme:{colors:e}})=>({width:"100%",height:"100%",objectFit:"cover",background:e.BGPlaceholderDefault})),"label:ImgCover;"),Ko=(0,Re.Z)("div",{target:"e1ymawm05"})({position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",borderRadius:"2px",padding:"2px",fontSize:"12px",color:"#fff"},"label:DivDuration;"),Xo=(0,Re.Z)("div",{target:"e1ymawm06"})((({theme:e})=>(0,Ze.GI)({theme:e,fontWeight:"bold",color:"TextPrimary"})),(0,Ze.FC)(3),{marginBottom:"4px",wordBreak:"break-word"},"label:DivTitle;"),en=(0,Re.Z)("div",{target:"e1ymawm07"})((({theme:{colors:e}})=>({color:e.TextSecondary,fontSize:"12px",lineHeight:"16px",marginBottom:"4px",display:"flex",alignItems:"center"})),"label:DivAuthor;"),tn=(0,Re.Z)("div",{target:"e1ymawm08"})((({theme:{colors:e}})=>({display:"flex",height:"16px",color:e.TextSecondary,alignItems:"center",fontSize:"12px"})),"label:DivOtherInfo;"),on=(0,Re.Z)("div",{target:"e1ymawm09"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginEnd:"8px"})]),"label:DivDate;"),nn=(0,Re.Z)(Uo.Z,{target:"e1ymawm010"})((({theme:e})=>[(0,Ze.YJ)({direction:e.direction,marginEnd:"4px"})]),"label:StyledHeart;"),rn=(0,Re.Z)("div",{target:"e1ymawm011"})((({theme:{colors:e}})=>({borderBottom:`1px solid ${e.ShadowPrimary}`,marginTop:"23px"})),"label:DivListWrapper;"),an=(0,Re.Z)(ot.W,{target:"e1ymawm012"})({marginBottom:"24px",minWidth:"unset",fontSize:"16px",paddingLeft:"16px",paddingRight:"16px"},"label:StyledMoreBtn;"),ln=(0,Re.Z)("div",{target:"e1ymawm013"})({width:"100%",display:"flex",justifyContent:"center"},"label:DivLoadingWrapper;");var sn=i(75924),dn=i(16929);const cn=(0,a.memo)((e=>{const{item:t,index:i,isNarrowState:o}=e,{video:{cover:l,duration:s,playAddr:d="",zoomCover:c},desc:u,author:v="",createTime:m,stats:h}=t,g=(0,a.useRef)(null),[x,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e,t,i,o;x&&g.current?null===(t=(e=g.current).play)||void 0===t||t.call(e):g.current&&(null===(o=(i=g.current).pause)||void 0===o||o.call(i))}),[x]),(0,a.useEffect)((()=>{var e;e={author_id:v,group_id:t.id,rank:i},B.W.event("video_cover_show",Object.assign(Object.assign({},e),{enter_method:"video_detail",type:"video_detail"}))}),[]);const b=(0,r.mp)(Ae.z,{selector:e=>e.users[v],dependencies:[v]}),{timeTranslator:w}=(0,He.e)(),{uniqueId:_,verified:j}=null!=b?b:{},k=(0,r.qj)(be),{shouldUseRelatedVideo:C}=(0,y.e6)(),S=(0,a.useCallback)((()=>{var e;e={author_id:v,group_id:t.id,rank:i},B.W.event("video_cover_click",Object.assign(Object.assign({},e),{enter_method:"video_detail",type:"video_detail"})),C?k.handleSelectVideo({newIndex:i}):k.handleSwitchVideo({newIndex:i})}),[v,t.id,i,k,C]),I=(0,a.useCallback)((()=>{f(!0)}),[]),T=(0,a.useCallback)((()=>{f(!1)}),[]);return(0,n.jsxs)(Go,Object.assign({isNarrowState:o,onClick:S},{children:[(0,n.jsxs)(Yo,Object.assign({onMouseEnter:I,onMouseLeave:T},{children:[(0,n.jsx)(Qo,{src:(null==c?void 0:c[480])||l},void 0),x?(0,n.jsx)(Jo,{children:(0,n.jsx)(sn.N,{ref:g,horizontal:!1,itemMute:!0,muteSetting:dn.P[4].forceMute,defaultMute:dn.P[4].defaultMute,playProgress:0,src:d},void 0)},void 0):null,(0,n.jsx)(Ko,{children:(0,U.xo)(s)},void 0)]}),void 0),(0,n.jsx)(Xo,{children:u},void 0),(0,n.jsxs)(en,{children:[_,j&&(0,n.jsx)(et.Q,{width:10,height:10},void 0)]},void 0),(0,n.jsxs)(tn,{children:[(0,n.jsx)(on,{children:w(1e3*Number(m))},void 0),(0,n.jsx)(nn,{width:16,height:16,fill:"currentcolor"},void 0),(0,p.BT)(null==h?void 0:h.diggCount)]},void 0)]}),void 0)})),un=(0,a.memo)((0,a.forwardRef)((({itemList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r},l)=>{const s=e.slice(1),d=(0,u.Q)(),{narrowStateHasMore:c,handleLoadMore:v,narrowStateList:m}=function({relatedList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:n}){const[r,l]=(0,a.useState)(1),[s,d]=(0,a.useState)(!0),{shouldUseRelatedVideo:c}=(0,y.e6)();return(0,a.useEffect)((()=>{t&&(l(1),d(!0))}),[t]),(0,a.useEffect)((()=>{t&&d(!!c||(null!=n?n:e.length>16*r))}),[e.length,t,r,n,c]),{narrowStateHasMore:s,handleLoadMore:(0,a.useCallback)((()=>{e.length-16*(r+1)<0&&o&&i(),l(r+1)}),[i,e,r,o]),narrowStateList:(0,a.useMemo)((()=>e.slice(0,16*r)),[e,r])}}({relatedList:s,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r});return t?(0,n.jsxs)(rn,{children:[(0,n.jsx)(No,Object.assign({isNarrowState:t},{children:m.map(((e,i)=>e&&(0,n.jsx)(cn,{isNarrowState:t,index:i+1,item:e},e.id)))}),void 0),c?(0,n.jsx)(an,Object.assign({size:"medium",disabled:r,buttonTheme:"line",onClick:v},{children:d("video_details_page_morevideos_btn")}),void 0):null]},void 0):(0,n.jsxs)(No,Object.assign({ref:l},{children:[s.map(((e,t)=>e&&(0,n.jsx)(cn,{index:t+1,item:e},e.id))),r&&s.length>1&&o?(0,n.jsx)(ln,{children:(0,n.jsx)(Ho.g,{},void 0)},void 0):null]}),void 0)}))),vn=(0,n.jsx)(s.Z,Object.assign({},k.vj),void 0),mn=(0,n.jsx)(d.Z,Object.assign({},k.vj),void 0),pn=(0,c.l)((function(){var e;const t=(0,u.Q)(),[i,o]=(0,a.useState)(!1),[{currentIndex:s,itemListKey:d,subtitleContent:c,ifShowSubtitle:v},p]=(0,r.b7)(be),h=(0,a.useRef)(!1),f=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,a.useCallback)((e=>{var t;null===(t=null==b?void 0:b.current)||void 0===t||t.seekTime(e)}),[b]);(0,I.$v)(4),(0,a.useEffect)((()=>{o(window.innerWidth<903)}),[]);const{browserList:_,listHasMore:j,listLoading:C}=(0,r.mp)(m.h,{selector:e=>{const t=e[null!=d?d:""];return t?{browserList:t.browserList,listHasMore:!0,listLoading:t.loading}:{browserList:[],listHasMore:!0,listLoading:!1}},dependencies:[]});(0,a.useEffect)((()=>{!h.current&&_.length>=1&&(p.handleFirstVideo(),h.current=!0)}),[_]);const[{itemList:S,currentItem:Z,subtitleInfos:z}]=(0,r.b7)(T.A,{selector:e=>{var t,i;return{itemList:_.map((t=>e[t])),currentItem:e[_[s]],subtitleInfos:null===(i=null===(t=e[_[s]])||void 0===t?void 0:t.video)||void 0===i?void 0:i.subtitleInfos}},dependencies:[_,s]}),V=null!==(e=null==Z?void 0:Z.id)&&void 0!==e?e:"",F=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e;V&&(null===(e=F.current)||void 0===e||e.scrollIntoView())}),[V]);const $=(0,a.useMemo)((()=>({author:"",scheduleTime:""})),[]),{author:q="",scheduleTime:W}=null!=Z?Z:$,A=function({id:e}){const[{loading:t},i]=(0,r.b7)(Te.x),o=(0,a.useRef)(null),n=(0,a.useCallback)((()=>{!t&&i.fetchComment({aweme_id:e})}),[i,e,t]);return(0,a.useEffect)((()=>()=>{i.dispose$(),i.setCommentItem({awemeId:""})}),[i]),(0,D.q)({elemRef:o,onHitBottom:n,bottomThreshold:20,throttle:500}),o}({id:V}),{currentIndex:H}=(0,r.mp)(L.O),{isBrowserModeShowing:U}=(0,a.useContext)(M._);(0,a.useEffect)((()=>{U&&p.handleSwitchVideo({newIndex:H})}),[H,U,p]);const{isDefaultHidden:N,isDownloadTranscript:G,isDefaultExpanded:Y}=(0,y.II)(),[J,Q]=(0,a.useState)(Y);(0,a.useEffect)((()=>{G&&!(null==c?void 0:c.length)&&z&&(null==z?void 0:z.length)>0&&p.downloadTranscript({subtitleInfos:z})}),[z,c,p,G]);const K=Ee();(0,D.q)({onHitBottom:K,elemRef:f});const X=(0,r.mp)(Oe,{selector:({statusCode:e})=>e,dependencies:[]}),ee=(0,a.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:t="",format:i="",videoQuality:o="",encodeUserTag:n="",codecType:r="",definition:a=""}={},authorId:l="",id:s="",scheduleTime:d,secret:c=!1,forFriend:u=!1}=null!=Z?Z:{video:{}};return{author_id:l,group_id:s,is_scheduled:Boolean(d),bitrate:Number(e),encodedType:t,format:i,videoQuality:o,encodeUserTag:n,codecType:r,definition:a,secret:c,forFriend:u}}),[Z]),te=(0,l.k6)(),ie=(0,a.useCallback)((()=>{const{id:e=""}=null!=Z?Z:{};var t;t={group_id:e},B.W.event("back_fyp_click",Object.assign(Object.assign({},t),{enter_method:"back_fyp_click"})),R.W.handleEnterTrending({enter_method:"back_fyp_click",group_id:e}),te.push(`${P.Ad.foryou}?enter_from=video_detail`)}),[te,Z]),{isServerError:oe,isCommonError:ne,isInitLoading:re,isEmpty:ae}=Pe(),le=Be();if(oe)return(0,n.jsx)(Ve,{children:(0,n.jsx)(g.T,{iconElem:k.hE,title:t("server_error_title"),desc:t("server_error_sub"),buttonText:t("refresh"),onButtonClick:le},void 0)},void 0);if(ne){const{title:e,desc:i}=(0,x.S9)(X),o=10239===X?mn:vn;return(0,n.jsx)(Ve,{children:(0,n.jsx)(g.T,{iconElem:o,title:t((0,x.V5)(X)),desc:t((0,x.ox)(X)),e2eTitle:e,e2eDesc:i},void 0)},void 0)}if(ae)return null;const se=(0,a.useCallback)((e=>{e!==i&&o(e)}),[i]),{shouldUseRelatedVideo:de}=(0,y.e6)();!function({onPageWidthBreakPoint:e}){const t=(0,Pt.fB)((()=>{null==e||e(window.innerWidth<903)}),[e],500);(0,a.useEffect)((()=>(window.addEventListener("resize",t),()=>window.removeEventListener("resize",t))),[t])}({onPageWidthBreakPoint:se});const ce=(0,a.useCallback)((()=>{const e={onLoadMore:K,isLoading:C,hasMore:j,isNarrowState:i,itemList:S};return(null==S?void 0:S.length)<=1&&j||re?(0,n.jsx)(wi,{},void 0):(0,n.jsx)(un,Object.assign({ref:f},e),void 0)}),[S,j,re,i,C,K]),ue=(0,a.useCallback)((()=>{var e;null===(e=null==A?void 0:A.current)||void 0===e||e.scrollIntoView()}),[A]),{shouldRenderDirectory:ve,directoryLinksList:me}=(0,O.VK)();return(0,n.jsxs)(Rt,{children:[(0,n.jsx)(Zt,{ref:F},void 0),(0,n.jsx)(zt,{children:(0,n.jsxs)(Vt,Object.assign({onClick:ie},{children:[(0,n.jsx)(Ft,{width:32,height:32},void 0),(0,n.jsx)($t,{children:t("display_comments_videodetailspage_back_arrow_foryoufeed")},void 0)]}),void 0)},void 0),(0,n.jsxs)(qt,{children:[(0,n.jsxs)(Wt,{children:[re?(0,n.jsx)(Nt,{},void 0):(0,n.jsx)(Ao,{onScrollToComment:ue,teaParams:ee,item:Z,currentIndex:s,ref:b},void 0),q?(0,n.jsx)(At,{children:(0,n.jsx)(ct,{teaParams:ee,uniqueId:q,videoId:V},void 0)},void 0):null,i&&(v||!N)&&(null==c?void 0:c.length)>0?(0,n.jsx)(gi,{item:Z,onSeek:w,isNarrow:!0,isListShow:J,setIsListShow:Q},void 0):null,i?ce():null,(0,n.jsx)(Lt,{scheduleTime:Number(W),ref:A,teaParams:ee,itemId:V,disableReply:!1},void 0)]},void 0),i?null:(0,n.jsxs)(Ht,{children:[(v||!N)&&(null==c?void 0:c.length)>0?(0,n.jsx)(gi,{item:Z,onSeek:w,isNarrow:!1,isListShow:J,setIsListShow:Q},void 0):null,(0,n.jsx)(Ut,{children:t(de?"video_details_page_relatedvideos_panel_header":"display_comments_videodetailspage_recommendedvideos_panel_header")},void 0),ce()]},void 0)]},void 0),ve&&(0,n.jsx)(E.t,{directoryLinksList:me},void 0)]},void 0)})),hn=(0,n.jsx)(s.Z,Object.assign({},k.vj),void 0),gn=(0,n.jsx)(d.Z,Object.assign({},k.vj),void 0),xn=(0,c.l)((function(){const e=(0,u.Q)(),t=Ee(),i=function(){const[e]=(0,r.b7)(m.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,hasMore:!0,statusCode:0}},dependencies:[]}),t=(0,r.qj)(W.r),{statusCode:i,hasMore:o}=e;return(0,a.useCallback)((()=>{o||10404!==i||t.openModal({isSignup:!1,query:{redirect_url:window.location.href,enter_method:"vv_limit"}})}),[t,i,o])}(),{isServerError:o,isCommonError:l,isInitLoading:s,isEmpty:d}=Pe();(0,v.AS)("video",t);const c=Be(),f=(0,a.useCallback)((()=>(0,n.jsx)(Fe,Object.assign({"data-e2e":"recommend-video-text"},{children:e("video_detail_explore_title")}),void 0)),[e]),{list:b,loading:w}=(0,r.mp)(m.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,statusCode:0}},dependencies:[]}),y=(0,r.mp)(Oe,{selector:({statusCode:e})=>e,dependencies:[]}),{isGoogleBot:_}=(0,p.m7)((0,h.L)((()=>["isGoogleBot"]),[]));if(s)return(0,n.jsx)(C.H,{},void 0);if(o)return(0,n.jsx)(Ve,{children:(0,n.jsx)(g.T,{iconElem:k.hE,title:e("server_error_title"),desc:e("server_error_sub"),buttonText:e("refresh"),onButtonClick:c},void 0)},void 0);if(l){const{title:t,desc:i}=(0,x.S9)(y),o=10239===y?gn:hn;return(0,n.jsx)(Ve,{children:(0,n.jsx)(g.T,{iconElem:o,title:e((0,x.V5)(y)),desc:e((0,x.ox)(y)),e2eTitle:t,e2eDesc:i},void 0)},void 0)}return d?null:b.length?(0,n.jsx)(S.SL,{itemList:b,loading:w,renderInnerIndex:0,renderInner:f,onHitBottom:t,onPageBottom:i,ssrLimitDisable:_},void 0):null})),fn=(0,f.r)("video",!1)((function(){const[{statusCode:e},t]=(0,r.b7)(Oe),{enterForyou:i}=(0,r.mp)(b.e);(0,j.a)(i?"homepage_hot":"video_detail");const[{list:o,preloadList:s},d]=(0,r.b7)(m.h,{selector:e=>{var t,i,o,n,r,a;return{list:null!==(i=null===(t=e.video)||void 0===t?void 0:t.list)&&void 0!==i?i:[],statusCode:null!==(n=null===(o=e.video)||void 0===o?void 0:o.statusCode)&&void 0!==n?n:0,preloadList:null!==(a=null===(r=e.video)||void 0===r?void 0:r.preloadList)&&void 0!==a?a:[]}},dependencies:[]}),{id:c}=(0,l.UO)();!function(){var e;const t=(0,l.k6)(),{user:i,region:o=""}=null!==(e=(0,h.L)((()=>["user","region"]),[]))&&void 0!==e?e:{},{id:n}=(0,l.UO)();(0,N.L)((()=>{const{search:e,pathname:r,hash:a}=window.location,l=(0,F.parse)(e),s=Object.assign({},l);l.cid&&"string"==typeof l.cid&&(delete s.cid,window.history.replaceState(window.history.state,window.document.title,`${r}?${(0,F.stringify)(s)}${a}`));const d=J.SV.includes(o),c=G.$I.getItem("cid"),u=null!=c?c:l.cid;if(!d||!u||"string"!=typeof u)return;if(!Boolean(i))return G.$I.setItem("cid",u),void G.$I.setItem("vid",n);const v=G.$I.getItem("vid");if(G.$I.removeAll(),void 0!==v&&v!==n)return;const m=(0,Y._)(u);m&&(s.browserMode="1",t.push(`${r}?${(0,F.stringify)(s)}${a}`,{cid:m,vid:n,browserMode:!0}))}),[t,i,o,n])}(),function({list:e}){const{id:t}=(0,l.UO)(),i=(0,l.TH)(),{state:o}=i,{showBrowserMode:n}=(0,a.useContext)(M._),r=(0,a.useRef)(!1),s=(0,a.useRef)(t),d=(0,l.k6)(),c=(0,Z.fz)(Q.KF);(0,a.useEffect)((()=>{const{browserMode:a,vid:l}=(0,p.m7)(o);s.current!==t&&(r.current=!1),a&&t===l&&(null==e?void 0:e.length)&&e[0]===l&&!r.current&&(d.replace(Object.assign(Object.assign({},i),{state:Object.assign(Object.assign({},o),{browserMode:!1})})),r.current=!0,s.current=t,c.handleUserChangeVideoOrPlayMode(),n({index:0}))}),[t,e,o,n,d,i,c])}({list:o}),(()=>{const{list:e}=(0,r.mp)(m.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,statusCode:0}},dependencies:[]}),{hasNewVideoDetailPage:t}=(0,y.xy)(),{search:i,pathname:o}=(0,l.TH)(),n=t&&(0,A.cQ)(o),{setEnterForyou:s}=(0,r.qj)(b.e),d=(0,r.mp)(H.f,{selector:e=>{var t,i;return Number(null!==(i=null===(t=e.currentVideo)||void 0===t?void 0:t.index)&&void 0!==i?i:0)},dependencies:[]}),c=e[d],u=(0,r.mp)(T.A,{selector:e=>e[null!=c?c:""],dependencies:[c]}),v=(0,$.p)(null==u?void 0:u.author),{uniqueId:p="",secUid:h=""}=null!=v?v:{},g=function(e,t,i,o,n){const r=(0,q.fH)({uniqueId:t,videoId:i,secUid:o});return n?(0,F.stringifyUrl)({url:r,query:Object.assign(Object.assign({},V()((0,F.parse)(e),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",item_id:i})},{skipNull:!0}):`${(0,F.stringifyUrl)({url:"/foryou",query:Object.assign(Object.assign({},V()((0,F.parse)(e),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",item_id:i})},{skipNull:!0})}#${r}`}(i,p,c,h,n);(0,a.useEffect)((()=>{location.pathname!==P.Ad.foryou&&d>0&&e.length>0&&R.W.handleEnterTrending({enter_method:"see_more"});const t=n?d>=0:d>0;(location.pathname===P.Ad.foryou||t)&&e.length>0&&(s(!n),window.history.replaceState(window.history.state,"video-detail",g))}),[d,e,g,s,n])})(),(()=>{const{id:e}=(0,l.UO)(),{pathname:t,search:i}=(0,l.TH)(),o=(0,a.useMemo)((()=>{var e;return null===(e=/^\/@(.*)\/video\/\d+/.exec(t))||void 0===e?void 0:e[1]}),[t]),n=(0,a.useMemo)((()=>{var e;return null===(e=/^\/@.*\/video\/(\d+)/.exec(t))||void 0===e?void 0:e[1]}),[t]),s=(0,r.mp)(T.A,{selector:e=>e[null!=n?n:""],dependencies:[n]}),d=(0,$.p)(null==s?void 0:s.author),{uniqueId:c,secUid:u}=null!=d?d:{},v=(0,q.Pz)({uniqueId:c,secUid:u});(0,a.useEffect)((()=>{if(v&&n===e&&o!==v){const e=`/@${v}/video/${n}${i}`,t=Object.assign(Object.assign({},history.state),{as:e});window.history.replaceState(t,"open_video_page",e)}}),[e,v,o,i,n])})(),(0,w.s)(s),(0,a.useEffect)((()=>{t.getVideoDetail({itemId:c})}),[t,c]);const{shouldUseRelatedVideo:u}=(0,y.e6)(),v=(0,a.useRef)(!1);(0,a.useEffect)((()=>{0!==e||v.current||(v.current=!0,u?d.getRelatedList({key:"video",itemId:c}):d.getRecommendList({key:"video",itemId:c}))}),[d,e,c,u]),(0,a.useEffect)((()=>()=>{d.resetItemList({key:"video",loading:!0})}),[c,d]);const{hasNewVideoDetailPage:g}=(0,y.xy)();return(0,n.jsxs)(ze,Object.assign({showVideoCommentDetail:g},{children:[g?(0,n.jsx)(pn,{},void 0):(0,n.jsx)(xn,{},void 0),(0,n.jsx)(_.vr,{},"static-fixed")]}),void 0)})),bn=fn}}]);
window.privacy=new class{init(){if(document.location.search.indexOf("_gdpr=deny")>-1&&(this.denyAll=!0),navigator.userAgent&&navigator.userAgent.indexOf("Siteimprove")>-1)return;let t={"data-domain-script":"673cfafc-be0e-4e2a-b756-c1f0673697b3"};document.location.search.indexOf("_gdpr=test")>-1&&(t={"data-domain-script":"673cfafc-be0e-4e2a-b756-c1f0673697b3-test"}),this.load("https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",(()=>{this._initOneTrust()}),t)}load(t,e,i){if(e&&this._pushQueue(t,e),!this.loaded[t]){this.loaded[t]=!0;const e=document.createElement("script");if(e.type="text/javascript",e.src=t,i)for(const t in i)e.setAttribute(t,i[t]);document.getElementsByTagName("head")[0].appendChild(e),e.onload=()=>{this._runQueue(t)}}}_initOneTrust(){window.OptanonWrapper=()=>{for(const t of window.OneTrust.GetDomainData().Groups){const e=t.CustomGroupId,i=t.GroupName;this.privacyGroups[i]=e}let t=[];this._userAllows("analytics")&&(this._runQueue("analytics"),t.push("analytics")),this._userAllows("functional")&&(this._runQueue("functional"),t.push("functional")),this._userAllows("targeting")&&(this._runQueue("targeting"),t.push("targeting")),this._userAllows("socialmedia")&&(this._runQueue("socialmedia"),t.push("socialmedia")),console.info("OnetrustActiveGroups",t)},this.disabled&&window.OptanonWrapper()}_userAllows(t){if(this.denyAll)return!1;if(this.disabled)return!0;if("analytics"==t){const t=this.privacyGroups["Performance Cookies"];return window.OnetrustActiveGroups.indexOf(t)>-1}if("functional"==t){const t=this.privacyGroups["Functional Cookies"];return window.OnetrustActiveGroups.indexOf(t)>-1}if("targeting"==t){const t=this.privacyGroups["Targeting Cookies"];return window.OnetrustActiveGroups.indexOf(t)>-1}if("socialmedia"==t){const t=this.privacyGroups["Social Media Cookies"];return window.OnetrustActiveGroups.indexOf(t)>-1}return!1}_runQueue(t){if(this.runningQueues[t]=!0,this.queues[t]&&this.queues[t].length){for(let e=0;e<this.queues[t].length;e++)this.queues[t][e]();this.queues[t]=[]}}_pushQueue(t,e){this.runningQueues[t]?e():(this.queues[t]=this.queues[t]||[],this.queues[t].push(e))}allows(t,e){this._pushQueue(t,e)}getAnalytics(t){this._pushQueue("analytics",(()=>{this.load("https://webassets.hbs.edu/libs/analytics/1.0/analytics.min.js",(()=>{t(window.analytics)}))}))}settings(t){window._analytics=window._analytics||[],window._analytics.push((function(){window.analytics.settings(t)})),t.gtm&&(this.gtm=t.gtm),window.addEventListener&&window.addEventListener("load",(()=>{this.windowLoaded=!0}),!1),this.getAnalytics((t=>{this.windowLoaded&&t.save()})),!1!==t.gtm&&this.allows("targeting",(()=>{console.info("loading googletagmanager",this.gtm),function(t,e,i,s,n){t[s]=t[s]||[],t[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});const a=e.getElementsByTagName(i)[0],o=e.createElement(i);o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id="+n,a.parentNode.insertBefore(o,a)}(window,document,"script","dataLayer",this.gtm)}))}constructor(){this.queues={},this.runningQueues={},this.loaded={},this.disabled=!1,this.gtm="GTM-N2NWNWX",this.denyAll=!1,this.windowLoaded=!1,this.privacyGroups={},this.metadata=function(t){window._analytics=window._analytics||[],window._analytics.push((function(){window.analytics.metadata(t)}))}}},window.tagManager=window.privacy,document.addEventListener("DOMContentLoaded",(()=>window.privacy.init()),!1);
//# sourceMappingURL=privacy.js.map

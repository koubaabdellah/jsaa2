(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[946],{4363:function(e,t,n){"use strict";n.d(t,{k:function(){return Q}});var r=n(95235),i=n(72828),a=n(93781),s=n(76405),o=n(64182),c=n(83103),l=n(12287),u=n(37669),d=n(6277),p=n(2784),f=n(83112),v=n(48080),m=n(853),L=n(79296),g=n(84192),_=n(17982),h=n(35361),P=n(95047),y=n(42670),b=n(18331),I=n(82174),T=n.n(I),N=n(52322);function C(e){var t=e.onClick,n=e.lensName,r=e.isMobile,i=e.isRetry,a=void 0!==i&&i,s=(0,p.useCallback)((function(){var e=(0,m.Me)();(0,m.O8)(a?"LiveLensTryCTA.Retry.Clicks.".concat(e):"LiveLensTryCTA.Clicks.".concat(e)),t()}),[a,t]);return(0,N.jsxs)("button",{type:"button","aria-label":"Try ".concat(n," Lens"),"data-testid":"try_live_lens_cta",onClick:s,className:r?T().tryLensCTAMobile:T().tryLensCTA,children:[!r&&(0,N.jsx)(o.CameraFillIcon,{size:"LARGE"}),(0,N.jsx)("span",{className:r?T().ctaTextMobile:T().ctaText,children:a?(0,N.jsx)(y.Z,{id:"ECv5jo",defaultMessage:[{type:0,value:"Retry Lens"}]}):(0,N.jsx)(y.Z,{id:"diXqOu",defaultMessage:[{type:0,value:"Try Lens"}]})})]})}var E=n(14446),S=n(2937),O=n(41524),x=n(20406),j=n(28526),A=n.n(j),w=n(84759),M=n.n(w),D=n(48257),B=n(56680),k=n.n(B);function F(e){var t=e.openInSnapchatLink,n=e.pageType,r=(0,p.useCallback)((0,x.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.reportWebAction)({pageType:n,actionName:s.WebActionName.OpenInSnapchatCta,deepLinkUrl:t}),(0,m.O8)("OpenInApp.byDeviceName.".concat((0,m.Me)(),".Click")),e.next=4,M().flush();case 4:case"end":return e.stop()}}),e)}))),[t,n]);return(0,N.jsx)("div",{"data-testid":"open_in_app_cta",className:k().openInSnapchatCTA,children:(0,N.jsx)(o.SuppressedDefaultActionLink,{link:t,logMetric:r,children:(0,N.jsx)(D.ColoredButton,{color:D.ButtonColor.BLUE,children:(0,N.jsx)("span",{className:k().ctaText,children:(0,N.jsx)(y.Z,{id:"QOU8vo",defaultMessage:[{type:0,value:"Open in App"}]})})})})})}var U=n(92694),R=n.n(U);function G(e){var t=e.lensName,n=e.snapcodeImageUrl,r=e.spotlightsUsingThisLens,i=e.spotlightOption,a=e.lensCreatorDisplayName,s=e.userProfileUrl,c=e.iconUrl,l=e.onTryLensClick,d=e.canTryLens,p=e.liveLensState,f=e.openInSnapchatLink,v=e.pageType,m=e.moreLenses,L="Scan this Snapcode using the Snapchat app to use the ".concat(t," Lens by ").concat(a),g=n&&(0,N.jsx)(o.Snapcode,{snapcodeImageUrl:n,size:"xsmall",alt:L}),h=function(){if(d){if((0,u.isLensInactive)(p))return(0,N.jsx)(C,{onClick:l,lensName:t,isMobile:!0});if((0,u.isLensActive)(p))return(0,N.jsx)(F,{pageType:v,openInSnapchatLink:f});if((0,u.isErrorState)(p))return(0,N.jsx)(C,{onClick:l,lensName:t,isMobile:!0,isRetry:!0});if((0,u.isLensLoading)(p)||(0,P.isBipaPending)(p))return null}return g}(),I=r.length>0&&m.length>0&&i!==_.QR.disabled,T=(0,N.jsx)(o.Tabs,{idPrefix:"mobile-lens-profile",tabs:[{label:(0,N.jsx)(y.Z,{id:"LdHzqX",defaultMessage:[{type:0,value:"Spotlight Snaps"}]}),content:function(){return(0,N.jsx)("div",{className:R().spotlightForLensTabContainer,children:(0,N.jsx)(S.Cq,{spotlights:r,lensName:t,size:"small"})})}},{label:(0,N.jsx)(y.Z,{id:"A2IwSJ",defaultMessage:[{type:0,value:"More Lenses"}]}),content:function(){return(0,N.jsx)("div",{className:R().spotlightForLensTabContainer,children:(0,N.jsx)(O.X,{lenses:m,size:"small"})})}}]});return(0,N.jsx)("div",{className:R().footerContainer,children:(0,N.jsxs)("div",{className:R().footer,children:[(0,N.jsx)(o.FooterCard,{iconUrl:c,title:(0,N.jsx)(b.J,{lensName:t}),subtitle:s?(0,N.jsx)(W,{lensCreatorDisplayName:a,userProfileUrl:s}):a,headerContent:h}),i===_.QR.spotlightsFirst&&I&&T,(0,N.jsx)("div",{className:R().findMoreLensesContainer,children:(0,N.jsx)(E._,{thumbnailCount:2})}),i===_.QR.lensesFirst&&I&&T]})})}function W(e){var t=e.userProfileUrl,n=e.lensCreatorDisplayName;return(0,N.jsx)("a",{href:t,className:R().link,children:n})}var z=n(37259),V=n.n(z);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=e.lensGroupId,n=e.lensId,r=e.lensName,i=e.pageType,d=e.previewImageUrl,f=e.previewVideoUrl,L=e.iconUrl,P=e.locale,y=e.viewerCountry,b=e.isMobile,I=e.snapcodeImageUrl,T=e.spotlightsUsingThisLens,E=e.spotlightOption,S=e.lensCreatorDisplayName,O=e.userProfileUrl,x=e.openInSnapchatLink,j=e.moreLenses,A=(0,p.useState)(u.LiveLensState.INACTIVE),w=A[0],M=A[1],D=(0,p.useRef)(0),B=b?h.Tu.includes(n):h.kY.includes(n),k="US"===y||y===a.p1.country,F=(0,m.Me)(b),U=(0,p.useContext)(g.ZP).webClientId,R=(0,p.useState)(!1),W=R[0],z=R[1];(0,p.useEffect)((function(){z((0,o.supportsWasmUnsafeEval)())}),[]);var Y=(0,p.useCallback)((function(){(w===u.LiveLensState.INACTIVE||(0,u.isErrorState)(w))&&(M(u.LiveLensState.REQUESTED),D.current=D.current+1,(0,m.O8)("LiveLens.TryOnCountPerSession.".concat(F),D.current),(0,s.reportWebAction)({pageType:i,actionName:s.WebActionName.TryOnLiveLenses}))}),[F,w,i]),Q=(0,p.useCallback)((function(){w!==u.LiveLensState.INACTIVE&&M(u.LiveLensState.INACTIVE)}),[w]),q={spotlightsUsingThisLens:T||[],openInSnapchatLink:x||"",spotlightOption:E||_.QR.disabled,lensCreatorDisplayName:S||"",userProfileUrl:O||"",lensName:r,snapcodeImageUrl:I,iconUrl:L,onTryLensClick:Y,liveLensState:w,pageType:i,moreLenses:j};var X=B&&W;return(0,N.jsxs)("div",{className:b?V().previewCardMobile:V().previewCard,children:[w!==u.LiveLensState.APPLIED&&(f?(0,N.jsx)("video",{className:V().previewVideo,src:f,poster:d,playsInline:!0,autoPlay:!0,loop:!0,muted:!0}):(0,N.jsx)(K,{previewImageUrl:d,lensName:r,iconUrl:L,isMobile:b})),X&&(0,N.jsx)(_.aV.Experiment,{configId:b?v.I.SHARED_WEB_LIVE_LENSES_MOBILE:v.I.SHARED_WEB_LIVE_LENSES_DESKTOP,webClientId:U||"",pageTypeName:s.PageType[s.PageType.LENS_PROFILE],children:function(e){return function(a){var s=a.treatmentValue===l.TreatmentValue.Treatment0||(0,c.isSecproxyDomain)()||(0,c.isRunningOnBSLocal)();return(0,N.jsxs)(N.Fragment,{children:[s&&(0,N.jsxs)(N.Fragment,{children:[w!==u.LiveLensState.INACTIVE&&(0,N.jsx)(u.LiveLensPreview,{liveLensState:w,setLiveLensState:M,lensId:n,lensGroupId:t,pageType:i,locale:P,lensName:r,isBIPAProtectedCountry:k,isMobile:e}),B&&(0,u.isLensInactive)(w)&&!e&&(0,N.jsx)(C,{onClick:Y,lensName:r,isMobile:!1}),B&&w===u.LiveLensState.APPLIED&&(0,N.jsx)(H,{onCloseClick:Q})]}),e&&(0,N.jsx)(G,Z(Z({},q),{},{canTryLens:s}))]})}}(b)}),!X&&b&&(0,N.jsx)(G,Z(Z({},q),{},{canTryLens:!1}))]})}function H(e){var t=e.onCloseClick;return(0,N.jsx)("span",{className:(0,d.default)(V().closeButtonWrapper,(0,r.Z)({},V().closeButtonWrapperMobile,i.t)),"data-testid":"livelens-close",children:(0,N.jsx)(o.IconButton,{onClick:t,size:"XSMALL",label:"Close",children:(0,N.jsx)(o.CrossIcon,{size:"LARGE"})})})}function K(e){var t=e.previewImageUrl,n=e.iconUrl,r=e.lensName,i=e.isMobile,a=(0,f.Z)(),s=a.formatMessage({id:"9YGHsf",defaultMessage:[{type:0,value:"Snapchat Lens Tile Image for "},{type:1,value:"lensName"}]},{lensName:r}),o=a.formatMessage({id:"G0CCzJ",defaultMessage:[{type:0,value:"Snapchat Lens Icon for "},{type:1,value:"lensName"}]},{lensName:r});return(0,N.jsx)("div",{"data-testid":"default-lens-preview-image-tile",className:V().inactiveLensPreview,children:t?(0,N.jsx)("img",{src:t,className:V().previewImage,alt:s}):(0,N.jsx)("div",{className:i?V().defaultTileMobile:V().defaultTile,children:(0,N.jsx)(L.X,{iconUrl:n,alt:o,size:"large"})})})}},14446:function(e,t,n){"use strict";n.d(t,{_:function(){return p}});var r=n(76405),i=n(48257),a=n(2784),s=n(42670),o=(n(853),n(49290)),c=n.n(o),l=n(52322),u="https://lens.snapchat.com/images/find-more-lenses",d=["".concat(u,"/lens-2.png"),"".concat(u,"/lens-3.png"),"".concat(u,"/lens-1.png"),"".concat(u,"/lens-4.png")];function p(e){var t=(0,a.useCallback)((function(){(0,r.reportWebAction)({pageType:r.PageType.LENS_PROFILE,actionName:r.WebActionName.FindMoreLensesClick})}),[]);return(0,l.jsxs)("div",{className:c().container,children:[(0,l.jsx)("div",{className:c().thumbnails,children:d.slice(0,e.thumbnailCount).map((function(e){return(0,l.jsx)("div",{className:c().filterThumbnail,children:(0,l.jsx)("img",{src:e,alt:"Filter Lens by Snapchat"})},e)}))}),(0,l.jsxs)("div",{className:c().cta,children:[(0,l.jsx)("p",{className:c().ctaTitle,children:(0,l.jsx)(s.Z,{id:"mEeuih",defaultMessage:[{type:0,value:"Find more Lenses and Filters"}]})}),(0,l.jsx)(i.ColoredButton,{color:i.ButtonColor.BLUE,onClick:t,link:"/",children:(0,l.jsx)(s.Z,{id:"OHEP7F",defaultMessage:[{type:0,value:"Lens Explorer"}]})})]})]})}},41524:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});var r=n(95235),i=n(1298),a=n(90304),s=n.n(a),o=n(6277),c=n(52322);function l(e){var t="large"===e.size?8:6;return(0,c.jsx)("div",{className:(0,o.default)(s().grid,(0,r.Z)({},s().gridLarge,"large"===e.size)),children:e.lenses.slice(0,t).map((function(t){return(0,c.jsx)(i.O,{lensDisplayInfo:t,useBoldTitle:!0,enableVideoPreview:!1,size:"large"===e.size?i.P.medium:i.P.small},t.lensId)}))})}},2937:function(e,t,n){"use strict";n.d(t,{Cq:function(){return c}});var r=n(95235),i=n(6277),a=n(81300),s=n.n(a),o=n(52322);function c(e){var t="large"===e.size?8:6;return(0,o.jsx)("div",{className:(0,i.default)(s().grid,(0,r.Z)({},s().gridLarge,"large"===e.size)),children:e.spotlights.slice(0,t).map((function(t){return(0,o.jsx)(l,{spotlight:t,lensName:e.lensName,size:e.size},t.storyPageUrl)}))})}function l(e){return(0,o.jsx)("a",{href:e.spotlight.storyPageUrl,className:(0,i.default)(s().spotlightLink,(0,r.Z)({},s().spotlightLinkLarge,"large"===e.size)),children:(0,o.jsx)("img",{src:e.spotlight.thumbnailUrl,className:s().spotlightImage,alt:"Preview for a Spotlight video that uses the ".concat(e.lensName," Lens")})})}},35361:function(e,t,n){"use strict";n.d(t,{Tu:function(){return a},kY:function(){return i},po:function(){return s},sN:function(){return o}});var r=["49414230875","44949520876","60402770881","57224890880","35737890980","57281480877","45672280910","5189866427682816","59625371061","58517751140","57228280934","58918780925","60297360931","58700230889","58271330876","49254620875","57138250905","47931700975","58944190875","58270661040","43675310939","56211010875","56426980885","56709140882","56567650879","43203181154","57931600888","59000820884","59237300885","60066840875","38808740951","41872400912","60535481056","60535610905","60394490913","60265820887","58614400879","59224430903","58221890882","59165810876","57980640876","58256780895","43731041040","35674231032","52290080885","50193280875","55122790876","53570880904","58206260889","57841340882","57963440988","58260150892","42875130947","57727110889","4824945048641536","59417990913","57321481074","59403640883","42417581158","59752180963","42007490964","42469070876","59388910875","57240830876","57359440901","45342050907","58833120926","56337600876","43598601322","26077897265","56380840888","57716950937","56520540877","58064100895","58300720902","58829440885","60038170885","40928430930","57685370875","56202360889","59520270889","56594640877","58360980887","57064880880","58961710883","37530330970","57341850877","58559750888","58953580901"],i=[].concat(r,["50507980875","43276930875","43281170875","43293650876"]),a=[].concat(r),s="5823ca90-5e1a-44b4-a007-644cab5c6e64",o="9dd58917-be52-4075-8487-0af3978494da"},29583:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(20406),i=n(95235),a=n(28526),s=n.n(a),o=n(41931),c=n(46568),l=n(2784),u=n(93781),d=n(76405),p=n(98592),f=n(70336),v=n(25895),m=n(42110),L=n(40650),g=n(198),_=n(6277),h=n(22079),P=n(48080),y=n(853),b=n(90149),I=n(65050),T=n(37589),N=n(17982),C=n(61173),E=n.n(C),S=n(64182),O=n(4363),x=n(35361),j=n(42836),A=n.n(j),w=n(52322);function M(e){var t=e.lensDisplayInfo;return(0,w.jsx)("div",{className:A().container,children:(0,w.jsx)(S.CenteredContainer,{children:(0,w.jsx)(O.k,{lensGroupId:x.sN,lensId:t.lensId,lensName:t.lensName,previewImageUrl:t.lensPreviewImageUrl,previewVideoUrl:t.lensPreviewVideoUrl,pageType:e.pageMetadata.pageType,locale:e.locale,iconUrl:t.iconUrl,viewerCountry:e.viewerInfo.country,isMobile:!0,userProfileUrl:t.userProfileUrl,lensCreatorDisplayName:t.lensCreatorDisplayName,snapcodeImageUrl:e.pageLinks.snapcodeImageUrl,spotlightOption:e.spotlightOption,spotlightsUsingThisLens:e.spotlightsUsingThisLens,moreLenses:e.moreLenses,openInSnapchatLink:e.openInSnapchatLink})})})}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k="Unlock";var F=l.lazy((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(627).then(n.bind(n,76627)).then((function(e){return{default:e.DesktopLensProfile}})));case 1:case"end":return e.stop()}}),e)}))));function U(e){var t,n=(0,m.useGenerateWebPageViewTraceId)().traceId,r=(0,v.useLocale)(),a=r.locale,s=r.changeLocale,o=(0,l.useRef)((0,v.getCountryFromLocale)(a)),c=(0,h.t)();(0,l.useEffect)((function(){(0,y.PW)(k,1,o.current)}),[]);var P=d.PageType.LENS_PROFILE,N=B(B({},e),{},{viewerInfo:(0,u.JW)(e.viewerInfo),localization:(0,u.PP)(e.localization),lensDisplayInfo:(0,u.t7)(e.lensDisplayInfo),pageLinks:(0,u.t6)(e.pageLinks),pageMetadata:(0,u.o3)(e.pageMetadata),pageName:k,locale:a});(0,g.useEssentialSession)();var C,S,O=(0,g.useWebClientId)({isGdpr:N.viewerInfo.isGdprCountry}),x=N.pageMetadata,j=N.lensDisplayInfo,A=N.pageLinks,M=N.linkPreview,D=(C=j.scannableUuid,S=A.oneLinkUrl,"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes("snapchat")?"https://link.snapchat.com/unlock/?type=SNAPCODE&uuid=".concat(C,"&metadata=01"):S),F=(0,b.py)(D,O),U=B(B({},N),{},{openInSnapchatLink:F}),W=(0,f.useIsMobile)(),z=(0,L.usePageLoadMetrics)(P.toString(),y.mF);(0,p.useWebSession)(P,z);var V=[{href:j.lensPreviewImageUrl,as:"image"},{href:j.lensPreviewVideoUrl,as:"video"}],Y={locale:a,isMobile:W,pageType:x.pageType,downloadUrl:A.downloadUrl};return(0,w.jsxs)(T.N,{locale:a,canonicalUrl:A.canonicalUrl,description:null===(t=x.pageDescription)||void 0===t?void 0:t.value,snapchatDeepLinkUrl:A.snapchatDeepLinkUrl,linkPreview:M,title:x.pageTitle,pageType:P,webClientId:O,isGdprCountry:U.viewerInfo.isGdprCountry,preconnectOrigins:I.Z,preloads:V,webPageViewTraceId:n,children:[(0,w.jsx)("div",{className:E().pageWrapper,children:(0,w.jsx)(f.PageFrame,B(B({},Y),{},{children:(0,w.jsx)("div",{className:E().container,children:W?(0,w.jsx)(R,B(B({},U),{},{isMounted:c,webClientId:O||""})):(0,w.jsx)(l.Suspense,{fallback:"",children:(0,w.jsx)(G,B(B({},U),{},{isMounted:c,pageName:k,locale:a,webClientId:O||""}))})})}))}),(0,w.jsx)("div",{className:(0,_.default)((0,i.Z)({},E().mobileFooter,W)),children:(0,w.jsx)(f.CTAFooter,{locale:a,openInSnapchatLink:F,downloadUrl:A.downloadUrl,oneLinkParams:A.oneLinkParams,localeChange:s,webClientId:O,webPageViewTraceId:n,pageType:x.pageType})})]})}function R(e){var t=e.webClientId,n=e.isMounted;return(0,w.jsx)(N.aV.Experiment,{configId:P.I.WEB_SPOTLIGHT_FOR_LENSES,webClientId:t||"",pageTypeName:d.PageType[d.PageType.LENS_PROFILE],children:function(t){var r=t.treatmentValue;return(0,w.jsx)(M,B(B({},e),{},{spotlightOption:n?N.So[r]:N.QR.disabled}))}})}function G(e){var t=e.webClientId,n=e.locale,r=e.isMounted;return(0,w.jsx)(N.aV.Experiment,{configId:P.I.WEB_SPOTLIGHT_FOR_LENSES,webClientId:t||"",pageTypeName:d.PageType[d.PageType.LENS_PROFILE],children:function(t){var i=t.treatmentValue;return(0,w.jsx)(F,B(B({},e),{},{pageName:k,locale:n,spotlightOption:r?N.So[i]:N.QR.disabled}))}})}var W=n(1092),z=n(51421);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Y=function(e){return(0,l.useEffect)((function(){(0,y.O8)("LensProfile.PageView",1)}),[]),(0,w.jsx)(U,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))};Y.getInitialProps=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.fetchProps)(t.req,o.Y7,z.m,W.C));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Z=Y},37669:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLensState=t.LiveLensPreview=void 0;var a=n(78763);Object.defineProperty(t,"LiveLensPreview",{enumerable:!0,get:function(){return a.LiveLensPreview}}),i(n(36418),t);var s=n(77727);Object.defineProperty(t,"LiveLensState",{enumerable:!0,get:function(){return s.LiveLensState}})},97655:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BIPAPopUp=void 0;var i=n(52322),a=n(64182),s=n(43620),o=r(n(58002)),c=n(14312);t.BIPAPopUp=function(e){var t=e.closeDialog,n=e.onAccept,r=e.onDecline;return(0,i.jsx)(a.Dialog,{closeDialog:t,primaryAction:n,primaryLabel:(0,i.jsx)(s.FormattedMessage,{id:"Vm5Tpi",description:"Accept BIPA consent",defaultMessage:"Accept"}),secondaryLabel:(0,i.jsx)(s.FormattedMessage,{id:"Hw+t5O",description:"Decline BIPA consent",defaultMessage:"Decline"}),secondaryAction:r,children:(0,i.jsx)("div",{className:o.default.body,"data-testid":"BIPAPopUp",children:(0,i.jsx)(c.Copy,{})})})}},14312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Copy=void 0;var r=n(52322),i=n(43620);t.Copy=function(){return(0,r.jsx)("p",{children:(0,r.jsx)(i.FormattedMessage,{id:"aHctIO",description:"BIPA consent copy",defaultMessage:"By using Lenses, you acknowledge reading Snap's <privacy>Privacy Policy</privacy> and agree to Snap's <terms>Terms of Service</terms>. Some Lenses use information about your face, hands and voice to work. <learnMore>Learn More</learnMore>, and if you want to agree and continue, tap Accept below.",values:{privacy:function(e){return(0,r.jsx)("a",{target:"_blank",rel:"noopener",href:"https://www.snap.com/privacy/privacy-policy/",children:e})},terms:function(e){return(0,r.jsx)("a",{target:"_blank",rel:"noopener",href:"https://www.snap.com/terms/",children:e})},learnMore:function(e){return(0,r.jsx)("a",{target:"_blank",rel:"noopener",href:"https://support.snapchat.com/a/camera-information-use",children:e})}}})})}},16410:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIPA_CONSENT_COOKIE_KEY=void 0,t.BIPA_CONSENT_COOKIE_KEY="sc-bipa-consent"},34025:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(97655),t)},33386:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLensCanvas=void 0;var i=n(52322),a=r(n(2784)),s=r(n(90095)),o=a.default.forwardRef((function(e,t){return(0,i.jsx)("div",{ref:t,className:s.default.canvasContainer})}));t.LiveLensCanvas=o,o.displayName="LiveLensCanvas"},53531:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(33386),t)},2808:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLensFailed=void 0;var i=n(52322),a=n(64182),s=n(43620),o=n(36418),c=r(n(47469));t.LiveLensFailed=function(e){var t=e.liveLensState,n=e.lensName,r=(0,s.useIntl)();return(0,o.isCameraPermissionDenied)(t)?(0,i.jsxs)("div",{className:c.default.failedContainer,children:[(0,i.jsx)("img",{src:"https://lens.snapchat.com/images/Hint+Permission+Settings+Edge.png",alt:r.formatMessage({id:"TNoDgF",defaultMessage:[{type:0,value:"Allow camera access to try the "},{type:1,value:"lensName"},{type:0,value:" Lens"}]},{lensName:n})}),(0,i.jsx)("span",{className:c.default.failedContainerImgErrorText,children:(0,i.jsx)(s.FormattedMessage,{id:"+DEicC",description:"Allow camera access",defaultMessage:"Allow camera access to try the {lensName} Lens",values:{lensName:n}})})]}):(0,o.isCameraNotPresent)(t)?(0,i.jsxs)("div",{className:c.default.failedContainer,children:[(0,i.jsx)(a.ErrorIcon,{size:"LARGE"}),(0,i.jsx)("span",{className:c.default.failedContainerSvgErrorText,children:(0,i.jsx)(s.FormattedMessage,{id:"q8Yq/t",description:"We couldn't find a camera",defaultMessage:"We couldn't find a camera. Please connect a camera and try again"})})]}):(0,i.jsxs)("div",{className:c.default.failedContainer,children:[(0,i.jsx)(a.ErrorIcon,{size:"LARGE"}),(0,i.jsx)("span",{className:c.default.failedContainerSvgErrorText,children:(0,i.jsx)(s.FormattedMessage,{id:"caz4zS",description:"Oops. Something went wrong!",defaultMessage:"Oops, Something went wrong!"})})]})}},85811:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2808),t)},24499:function(e,t,n){"use strict";var r=n(28526),i=n(75424),a=n(44429),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLensPreview=void 0;var o=n(52322),c=s(n(84759)),l=n(76405),u=n(64182),d=n(5080),p=n(71106),f=n(25895),v=n(48257),m=n(2784),L=n(43620),g=n(52134),_=n(88397),h=n(72271),P=n(36418),y=n(77727),b=n(34025),I=n(53531),T=n(85811),N=n(74620),C=s(n(94530));t.LiveLensPreview=function(e){var t=e.liveLensState,n=e.setLiveLensState,s=e.lensId,E=e.lensGroupId,S=e.locale,O=e.pageType,x=e.lensName,j=e.isBIPAProtectedCountry,A=e.isMobile,w=(0,m.useState)((0,f.getLocale)(S)),M=a(w,1)[0],D=(0,m.useState)({}),B=a(D,2),k=B[0],F=B[1];(0,m.useEffect)((function(){var e=!0;return(0,d.loadMessages)(M).then((function(t){e&&F(t)})),function(){e=!1}}),[M]);var U=(0,g.useBIPAConsent)({isBIPAProtectedCountry:j,setLiveLensState:n}),R=U.onCloseBIPA,G=U.onAcceptBIPA,W=(0,_.useBootstrapLiveLens)({liveLensState:t,setLiveLensState:n,lensId:s,lensGroupId:E,pageType:O});(0,m.useEffect)((function(){if(t===y.LiveLensState.APPLIED){var e=(new Date).getTime(),n=setInterval((function(){(0,h.addTimer)({metricsPrefix:h.grafanaBasePrefix,pageName:l.PageType[O],millis:(new Date).getTime()-e,name:"TimeSpentOnLens.".concat((0,h.getDeviceName)())})}),5e3);return function(){return clearInterval(n)}}}),[t,O]);var z=(0,m.useCallback)(i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.reportWebAction)({pageType:O,actionName:l.WebActionName.OpenWebChatCtaLiveLens}),(0,h.incrementCounter)("SendToApp.byDeviceName.".concat((0,h.getDeviceName)(),".Click")),e.next=4,c.default.flush();case 4:case"end":return e.stop()}}),e)}))),[O]);return(0,o.jsx)(L.IntlProvider,{locale:M,defaultLocale:f.DEFAULT_LOCALE,messages:k,children:(0,o.jsxs)("div",{className:C.default.previewCard,"data-testid":"liveLensPreview",children:[(0,P.isLensInactive)(t)&&null,(0,P.isLensLoading)(t)&&(0,o.jsx)(N.LoadingLiveLens,{liveLensState:t,lensName:x}),(0,P.isRequestingBIPA)(t)&&(0,o.jsx)(b.BIPAPopUp,{closeDialog:R,onAccept:G,onDecline:R}),(0,P.isErrorState)(t)&&(0,o.jsx)(T.LiveLensFailed,{liveLensState:t,lensName:x}),(0,P.isLensActive)(t)&&!A&&(0,o.jsx)("div",{className:C.default.sendToAppBtn,"data-testid":"send_to_app_btn",children:(0,o.jsx)(u.SuppressedDefaultActionLink,{link:"https://web.snapchat.com",logMetric:z,openInNewTab:!0,children:(0,o.jsx)(v.ColoredButton,{color:v.ButtonColor.WHITE,icon:(0,o.jsx)(p.DesktopIcon,{size:"MEDIUM"}),children:(0,o.jsx)(L.FormattedMessage,{id:"iagm17",description:"CTA on active live lens that redirects to Web chat",defaultMessage:"Send to App"})})})}),(0,o.jsx)(I.LiveLensCanvas,{ref:W})]})})}},78763:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(24499),t)},49802:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingLiveLens=void 0;var i=n(52322),a=n(43620),s=n(77727),o=r(n(81659)),c=n(96034);t.LoadingLiveLens=function(e){var t=e.liveLensState,n=e.lensName,r=t===s.LiveLensState.GETTING_PERMISSION,l=t===s.LiveLensState.LOADING_LENS||t===s.LiveLensState.APPLYING_LENS;return(0,i.jsxs)("div",{className:o.default.loadingContainer,children:[(0,i.jsx)(c.LoadingSpinner,{}),r&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:o.default.afterCameraPermissionText,children:(0,i.jsx)(a.FormattedMessage,{id:"i4CVCO",description:"Allow camera access to try the lens",defaultMessage:"Allow camera access to try the {lensName} Lens",values:{lensName:n}})})}),l&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:o.default.afterCameraPermissionText,children:(0,i.jsx)(a.FormattedMessage,{id:"jHzhd3",description:"Enabling camera and applying lens...",defaultMessage:"Enabling Camera and Applying Lens..."})})})]})}},96034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingSpinner=void 0;var r=n(52322);t.LoadingSpinner=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("circle",{cx:"6",cy:"6",r:"5",strokeLinecap:"round",strokeDasharray:"31.416",children:[(0,r.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"360 6 6",to:"0 6 6",dur:"1s",additive:"sum",repeatCount:"indefinite"}),(0,r.jsx)("animate",{attributeName:"stroke-dashoffset",attributeType:"xml",from:"31.416",to:"12.566",dur:"0.9s",fill:"freeze"}),(0,r.jsx)("animate",{attributeName:"stroke-width",attributeType:"xml",from:"0",to:"1",dur:"0.5s",fill:"freeze"})]}),(0,r.jsxs)("circle",{cx:"6",cy:"6",r:"3",strokeLinecap:"round",strokeDasharray:"11.31",children:[(0,r.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 6 6",to:"360 6 6",dur:"1s",additive:"sum",repeatCount:"indefinite"}),(0,r.jsx)("animate",{attributeName:"stroke-dashoffset",attributeType:"xml",from:"31.416",to:"12.566",dur:"0.9s",fill:"freeze"}),(0,r.jsx)("animate",{attributeName:"stroke-width",attributeType:"xml",from:"0",to:"1",dur:"0.5s",fill:"freeze"})]})]})}},74620:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(49802),t)},52134:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useBIPAConsent=t.IDLE_BIPA_TIMEOUT=t.LAST_INTERACTION_THROTTLE_WAIT_TIME=void 0;var i=r(n(6040)),a=n(2784),s=n(95047),o=n(77727);t.LAST_INTERACTION_THROTTLE_WAIT_TIME=3e5,t.IDLE_BIPA_TIMEOUT=36e5;var c=function(e){return setTimeout((function(){e(o.LiveLensState.REQUESTING_BIPA_CONSENT)}),t.IDLE_BIPA_TIMEOUT)};t.useBIPAConsent=function(e){var n=e.isBIPAProtectedCountry,r=e.setLiveLensState;(0,s.initBIPA)(n);(0,a.useEffect)((function(){if((0,s.needsBIPAConsent)()){var e=c(r),n=(0,i.default)((function(){clearTimeout(e),e=c(r)}),t.LAST_INTERACTION_THROTTLE_WAIT_TIME);return document.addEventListener("mousemove",n),document.addEventListener("scroll",n),document.addEventListener("keydown",n),document.addEventListener("visibilitychange",n),function(){clearTimeout(e),document.removeEventListener("mousemove",n),document.removeEventListener("scroll",n),document.removeEventListener("keydown",n),document.removeEventListener("visibilitychange",n)}}}),[r]);return{onCloseBIPA:function(){r(o.LiveLensState.INACTIVE)},onAcceptBIPA:function(){r(o.LiveLensState.BIPA_CONSENTED)}}}},88397:function(e,t,n){"use strict";var r=n(28526),i=n(44429),a=n(75424);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&c(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useBootstrapLiveLens=t.handleUserMedia=void 0;var d=n(76405),p=n(2784),f=n(95047),v=n(16484),m=n(72271),L=n(77727),g=n(67694);function _(){return(_=a(r.mark((function e(){var t,i,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return u(n(71255))}));case 2:return t=e.sent,i=t.bootstrapCameraKit,a=t.Transform2D,e.abrupt("return",{bootstrapCameraKit:i,Transform2D:a});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){return e instanceof Error?e.message:String(e)};function P(e,t){return y.apply(this,arguments)}function y(){return(y=a(r.mark((function e(t,n){var i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:return i=e.sent,(0,d.reportWebAction)({pageType:t,actionName:d.WebActionName.CamAccessGranted}),e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(0),(0,g.logSentryError)("Live Lens: handleUserMedia Error",e.t0),(0,v.isCameraAccessDeniedError)(e.t0)?((0,m.incrementCounter)("Errors.CamAccessDenied.".concat((0,m.getDeviceName)())),(0,d.reportWebAction)({pageType:t,actionName:d.WebActionName.CamAccessDenied}),n(L.LiveLensState.CAMERA_PERMISSION_DENIED)):((0,m.incrementCounter)("Errors.RequestCamAccessFailed.".concat((0,m.getDeviceName)())),(0,d.reportWebAction)({pageType:t,actionName:d.WebActionName.RequestCamAccessFailed}),n(L.LiveLensState.CAMERA_NOT_FOUND)),(0,m.incrementCounter)("Errors.".concat(h(e.t0),".").concat((0,m.getDeviceName)())),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}t.handleUserMedia=P,t.useBootstrapLiveLens=function(e){var t=e.setLiveLensState,n=e.lensId,o=e.lensGroupId,c=e.liveLensState,l=e.pageType,u=(0,m.getDeviceName)(),v=(0,p.useRef)(null),y=(0,p.useRef)(null),b=(0,p.useRef)(null),I=(0,p.useState)("visible"===document.visibilityState),T=i(I,2),N=T[0],C=T[1],E=(0,f.isBipaPending)(c),S=function(){var e,t=null===(e=b.current)||void 0===e?void 0:e.getTracks();if(t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.enabled=!1,i.stop()}}catch(a){r.e(a)}finally{r.f()}}};return(0,p.useEffect)((function(){var e=function(){"visible"===document.visibilityState?(C(!0),t((function(e){return(0,f.isBipaPending)(e)?e:L.LiveLensState.BIPA_CONSENTED}))):(C(!1),S())};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[t]),(0,p.useEffect)((function(){if(E)t(L.LiveLensState.REQUESTING_BIPA_CONSENT);else if(N){var e=function(e,t){return function(n){var r=Math.round(n.detail.avgFps),i=10*Math.round(r/10),a=i+10-1;(0,m.incrementCounter)("avgFPS.".concat(r,".").concat(d.PageType[e],".").concat(t)),(0,m.incrementCounter)("avgFPS.".concat(i,".to.").concat(a,".").concat(d.PageType[e],".").concat(t)),(0,m.addTimer)({metricsPrefix:m.grafanaBasePrefix,pageName:d.PageType[e],millis:Math.round(n.detail.lensFrameProcessingTimeMsAvg),name:"lensFrameProcessingTimeMsAvg.".concat(t)}),(0,m.addTimer)({metricsPrefix:m.grafanaBasePrefix,pageName:d.PageType[e],millis:Math.round(n.detail.lensFrameProcessingTimeMsStd),name:"lensFrameProcessingTimeMsStd.".concat(t)}),(0,m.addTimer)({metricsPrefix:m.grafanaBasePrefix,pageName:d.PageType[e],millis:Math.round(n.detail.viewTimeSec),name:"viewTimeSec.".concat(t)}),(0,m.addTimer)({metricsPrefix:m.grafanaBasePrefix,pageName:d.PageType[e],millis:Math.round(n.detail.applyDelaySec),name:"applyDelaySec.".concat(t)})}}(l,u),i=(new Date).getTime();return t(L.LiveLensState.DOWNLOADING),function(){return _.apply(this,arguments)}().then((function(s){var c=s.bootstrapCameraKit,p=s.Transform2D,f=(new Date).getTime()-i;(0,m.addTimer)({metricsPrefix:m.grafanaBasePrefix,millis:f,pageName:d.PageType[l],name:"cameraKitSdkBundleDownloadTime.".concat(u)});var _=function(){var i=a(r.mark((function i(){var a,s,u,d,f,g;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a="eyJhbGciOiJIUzI1NiIsImtpZCI6IkNhbnZhc1MyU0hNQUNQcm9kIiwidHlwIjoiSldUIn0.eyJhdWQiOiJjYW52YXMtY2FudmFzYXBpIiwiaXNzIjoiY2FudmFzLXMyc3Rva2VuIiwibmJmIjoxNjYwOTQ4OTE0LCJzdWIiOiJlYzUzMGE4My01YmE1LTQ2YWItODM4NS00MTcyOTg2NTJlNDB-UFJPRFVDVElPTn5hOTA5MGFjNS0wMGFmLTQyMWQtOGZhNi1iNGUzYzVhZmY5NTcifQ.9arB0SYZIv-ghrqcPifZ9sT375RuEsawqfLWn6ooVdw"){r.next=3;break}throw new Error("Missing value for environment variable CAMKIT_API_TOKEN");case 3:return t(L.LiveLensState.BOOTSTRAPPING),r.next=6,c({apiToken:a||""});case 6:return s=r.sent,u=v.current,r.next=10,s.createSession();case 10:return y.current=r.sent,d=y.current,y.current.events.addEventListener("lensView",e),null!==u&&void 0!==u&&u.innerHTML&&(u.innerHTML=""),null===u||void 0===u||u.appendChild(d.output.live),t(L.LiveLensState.GETTING_PERMISSION),r.prev=16,r.next=19,P(l,t);case 19:f=r.sent,b.current=f,r.next=26;break;case 23:return r.prev=23,r.t0=r.catch(16),r.abrupt("return");case 26:return r.next=28,d.setSource(f);case 28:return r.next=30,d.setSourceTransfrom(p.MirrorX);case 30:return t(L.LiveLensState.LOADING_LENS),r.next=33,s.lenses.repository.loadLens(n,o);case 33:return g=r.sent,t(L.LiveLensState.APPLYING_LENS),r.next=37,d.applyLens(g);case 37:return r.next=39,d.play();case 39:t(L.LiveLensState.APPLIED),(0,m.incrementCounter)("Applied.".concat((0,m.getDeviceName)()));case 41:case"end":return r.stop()}}),i,null,[[16,23]])})));return function(){return i.apply(this,arguments)}}();_().catch((function(e){(0,g.logSentryError)("Live Lens: loadCamKit Error",e),(0,m.incrementCounter)("Errors.CamKit.".concat(h(e),".").concat((0,m.getDeviceName)())),t(L.LiveLensState.FAILED)}))})).catch((function(e){(0,g.logSentryError)("Live Lens: importCamKitSdk Error",e),(0,m.incrementCounter)("Errors.CamKit.".concat(h(e),".").concat((0,m.getDeviceName)())),t(L.LiveLensState.FAILED)})),function(){var t;S(),null===(t=y.current)||void 0===t||t.removeLens().then((function(){var t,n;null===(t=y.current)||void 0===t||t.events.removeEventListener("lensView",e),null===(n=y.current)||void 0===n||n.destroy()}))}}}),[n,o,t,l,E,N,u]),v}},95047:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.storeBIPAConsent=t.getBIPAConsent=t.isBipaPending=t.needsBIPAConsent=t.initBIPA=void 0;var i=n(83103),a=n(198),s=r(n(50602)),o=n(16410),c=n(77727),l=n(36418),u=void 0;t.initBIPA=function(e){u=e};t.needsBIPAConsent=function(){if(void 0===u)throw new Error("BIPA not initialized");return u};t.isBipaPending=function(e){return((0,l.isLensInactive)(e)||(0,l.isRequestingBIPA)(e))&&(0,t.needsBIPAConsent)()};t.getBIPAConsent=function(e){var t=(0,a.tryGetCookie)(document.cookie,o.BIPA_CONSENT_COOKIE_KEY);return!(!t||"true"!==t)||(e(c.LiveLensState.REQUESTING_BIPA_CONSENT),!1)};t.storeBIPAConsent=function(e){var t=new Date;t.setFullYear(t.getFullYear()+1);var n={expires:new Date(t),path:"/",secure:!(0,i.isRunningOnDevEnv)(),httpOnly:!1,credentials:"same-origin"};s.default.set(o.BIPA_CONSENT_COOKIE_KEY,String(e),n)}},16484:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraAccessDeniedError=void 0,t.isCameraAccessDeniedError=function(e){return e instanceof DOMException&&("NotAllowedError"===e.name||"SecurityError"===e.name)}},72271:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.incrementCounter=t.addTimer=t.getDeviceName=t.grafanaBasePrefix=void 0;var i=r(n(84759)),a=n(70336),s=n(67694);t.grafanaBasePrefix="LiveLens",t.getDeviceName=function(e){return"undefined"!==typeof e?e?"Mobile":"Desktop":window.screen.width<a.DESKTOP_MIN_WIDTH?"Mobile":"Desktop"},t.addTimer=function(e){var t=e.metricsPrefix,n=e.pageName,r=e.millis,a=e.name;if(i.default.isReady()){var o="".concat(t,".byPage.").concat(n,".byTimer.").concat(a);i.default.addTimer({metricsName:o,milliSec:r})}else(0,s.logSentryError)("Live Lens - Graphene not initialized")},t.incrementCounter=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,a="".concat(t.grafanaBasePrefix,".").concat(e);i.default.increment({metricsName:a,dimensions:r,value:n})}},36418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraNotPresent=t.isCameraPermissionDenied=t.isErrorState=t.isRequestingBIPA=t.isLensLoading=t.isLensInactive=t.isLensActive=void 0;var r=n(77727);t.isLensActive=function(e){return e===r.LiveLensState.APPLIED},t.isLensInactive=function(e){return e===r.LiveLensState.INACTIVE||e===r.LiveLensState.REQUESTED},t.isLensLoading=function(e){return e===r.LiveLensState.DOWNLOADING||e===r.LiveLensState.BOOTSTRAPPING||e===r.LiveLensState.GETTING_PERMISSION||e===r.LiveLensState.LOADING_LENS||e===r.LiveLensState.APPLYING_LENS},t.isRequestingBIPA=function(e){return e===r.LiveLensState.REQUESTING_BIPA_CONSENT},t.isErrorState=function(e){return e===r.LiveLensState.FAILED||e===r.LiveLensState.CAMERA_NOT_FOUND||e===r.LiveLensState.CAMERA_PERMISSION_DENIED},t.isCameraPermissionDenied=function(e){return e===r.LiveLensState.CAMERA_PERMISSION_DENIED},t.isCameraNotPresent=function(e){return e===r.LiveLensState.CAMERA_NOT_FOUND}},77727:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLensState=void 0,function(e){e.INACTIVE="INACTIVE",e.REQUESTED="REQUESTED",e.REQUESTING_BIPA_CONSENT="REQUESTING_BIPA_CONSENT",e.BIPA_CONSENTED="BIPA_CONSENTED",e.DOWNLOADING="DOWNLOADING",e.BOOTSTRAPPING="BOOTSTRAPPING",e.GETTING_PERMISSION="GETTING_PERMISSION",e.LOADING_LENS="LOADING_LENS",e.APPLYING_LENS="APPLYING_LENS",e.APPLIED="APPLIED",e.CAMERA_PERMISSION_DENIED="CAMERA_PERMISSION_DENIED",e.CAMERA_NOT_FOUND="CAMERA_NOT_FOUND",e.FAILED="FAILED"}(t.LiveLensState||(t.LiveLensState={}))},34514:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[uuid]",function(){return n(29583)}])},37259:function(e){e.exports={previewCard:"LensPreviewCard_previewCard__Ebiam",previewCardMobile:"LensPreviewCard_previewCardMobile__PLpX_",previewVideo:"LensPreviewCard_previewVideo__tiNEH",previewImage:"LensPreviewCard_previewImage__Dtqtj",closeButtonWrapper:"LensPreviewCard_closeButtonWrapper__3_nHg",closeButtonWrapperMobile:"LensPreviewCard_closeButtonWrapperMobile__QGqKl",inactiveLensPreview:"LensPreviewCard_inactiveLensPreview__lNRP8",defaultTileMobile:"LensPreviewCard_defaultTileMobile__p3loZ",defaultTile:"LensPreviewCard_defaultTile__96UFo"}},49290:function(e){e.exports={container:"FindMoreLenses_container__Cl1eI",cta:"FindMoreLenses_cta__OG0O7",ctaTitle:"FindMoreLenses_ctaTitle__RQK6T",thumbnails:"FindMoreLenses_thumbnails__B91GD",filterThumbnail:"FindMoreLenses_filterThumbnail__q0kqv"}},61173:function(e){e.exports={container:"LensProfile_container___Fzjb",pageWrapper:"LensProfile_pageWrapper__V2KWB",mobileFooter:"LensProfile_mobileFooter__uEzbF"}},92694:function(e){e.exports={footerContainer:"MobileLensFooter_footerContainer__r1Rp7",footer:"MobileLensFooter_footer__UPV3A",findMoreLensesContainer:"MobileLensFooter_findMoreLensesContainer__rB_0L",link:"MobileLensFooter_link__EbsAu",spotlightForLensTabContainer:"MobileLensFooter_spotlightForLensTabContainer__jTzLj"}},42836:function(e){e.exports={container:"MobileLensProfile_container__dVbq9"}},56680:function(e){e.exports={openInSnapchatCTA:"OpenInAppCTA_openInSnapchatCTA__xOUdP",ctaText:"OpenInAppCTA_ctaText__GPcCH"}},90304:function(e){e.exports={grid:"MoreLenses_grid__42zjJ",gridLarge:"MoreLenses_gridLarge__20HJt",title:"MoreLenses_title__a7PeS"}},81300:function(e){e.exports={grid:"SpotlightForLens_grid__Rcohh",gridLarge:"SpotlightForLens_gridLarge__tyE7T",title:"SpotlightForLens_title__5vfiq",spotlightLink:"SpotlightForLens_spotlightLink__DoE0R",spotlightLinkLarge:"SpotlightForLens_spotlightLinkLarge__XkXDV",spotlightImage:"SpotlightForLens_spotlightImage__TatX9"}},82174:function(e){e.exports={tryLensCTA:"TryLensCTA_tryLensCTA__0y9Dg",tryLensCTAMobile:"TryLensCTA_tryLensCTAMobile__iBtPJ",ctaText:"TryLensCTA_ctaText__Yh4XR",ctaTextMobile:"TryLensCTA_ctaTextMobile__Hwj6a"}},58002:function(e){e.exports={body:"BIPAPopUp_body__rlx28"}},90095:function(e){e.exports={canvasContainer:"LiveLensCanvas_canvasContainer__Co_k5"}},47469:function(e){e.exports={failedContainer:"LiveLensFailed_failedContainer__hChOx",failedContainerText:"LiveLensFailed_failedContainerText__59s_f",failedContainerImgErrorText:"LiveLensFailed_failedContainerImgErrorText__mkbJp LiveLensFailed_failedContainerText__59s_f",failedContainerSvgErrorText:"LiveLensFailed_failedContainerSvgErrorText__je5ct LiveLensFailed_failedContainerText__59s_f"}},94530:function(e){e.exports={previewCard:"LiveLensPreview_previewCard__f4TpZ",sendToAppBtn:"LiveLensPreview_sendToAppBtn__rYevG"}},81659:function(e){e.exports={loadingContainer:"LoadingLiveLens_loadingContainer__nXPC3",afterCameraPermissionText:"LoadingLiveLens_afterCameraPermissionText__HRwz7"}}},function(e){e.O(0,[789,679,878,201,777,251,774,888,179],(function(){return t=34514,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[uuid]-b74c23cdf718cb2a.js.map
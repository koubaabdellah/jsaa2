(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9389],{58637:(e,t,i)=>{"use strict";i(77173);var o=i(11040),n=i(41697),a=i(74820),r=i(3198),s=i(96042),l=i(68927),d=i.n(l),c=i(32667),p=i(22296);const u={isPhoenix:"object"==typeof window&&"www.tiktok.in"===window.location.host,textReplace:"undefined"==typeof window?null:new(i(86284).Z)({condition:{APPID:"8660"}}),loadTcc(){return this.isPhoenix?this.textReplace.getWithCache("webapp-phoenix-tcc"):Promise.resolve()},getPlugin:e=>({type:"postProcessor",name:"text-replace-plugin",process:(t,i)=>u.textReplace.processSync(t,e,i)}),getProcessName(){return this.isPhoenix?["text-replace-plugin"]:void 0}};var g=i(40798),m=i(64047);const h=["fetch"],_=["includes"],v=["values","entries","getOwnPropertyDescriptors"];var y=i(84584);function b(e){var t,i,o,n,a,r,s;const l=null!==(n=null!==(o=null===(i=null===(t=window.SIGI_STATE)||void 0===t?void 0:t.I18n)||void 0===i?void 0:i.lang)&&void 0!==o?o:document.documentElement.getAttribute("lang"))&&void 0!==n?n:"en",d=null!==(s=null===(r=null===(a=window.SIGI_STATE)||void 0===a?void 0:a.I18n)||void 0===r?void 0:r.translations)&&void 0!==s?s:{};return new Promise(((t,i)=>{u.loadTcc().then((o=>{(u.isPhoenix?p.ZP.use(u.getPlugin(o)):p.ZP).use(g.CJ).init({debug:!1,fallbackLng:["en"],initImmediate:!0,defaultNS:null!=e?e:"Webapp",postProcess:u.getProcessName()},(e=>{e?i(e):t()})),p.ZP.setLang(l)}))})).then((()=>{Object.entries(d).forEach((([e,t])=>{Object.entries(t).forEach((([t,i])=>{p.ZP.addResourceBundle(e,t,i,!0)}))}))}))}var f=i(11362);i(48148),Boolean(window[f.ho]);var x=i(22612),k=i.n(x),w=i(22763),S=i(66967),j=i(91051),C=i(98154),P=i(21041),T=i(48036),O=i(17230),L=i(13597),I=i.n(L);const A={Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(255, 59, 92, 1)",Link:"rgba(255, 59, 92, 1)",Primary2:"rgba(255, 255, 255, .9)",TextPrimary:"rgba(255, 255, 255, .9)",TextSecondary:"rgba(255, 255, 255, .75)",TextTertiary:"rgba(255, 255, 255, .5)",TextQuaternary:"rgba(255, 255, 255, .34)",BGPrimary:"rgba(18, 18, 18, 1)",BGSecondary:"rgba(37, 37, 37, 1)",BGTertiary:"rgba(46, 46, 46, 1)",BGQuaternary:"rgba(56, 56, 56, 1)",BGQuinary:"rgba(75, 75, 75, 1)",BGSecondary2:"rgba(255, 255, 255, .08)",BGTertiary2:"rgba(255, 255, 255, .12)",BGPlaceholderDefault:"rgba(255, 255, 255, .08)",BGPlaceholderOpaque:"rgba(37, 37, 37, 1)",BGInput:"rgba(255, 255, 255, .12)",BGInput2:"rgba(255, 255, 255, .08)",BGView:"rgba(255, 255, 255, .04)",BGCreation3:"rgba(18, 18, 18, 1)",BGCreation4:"rgba(27, 27, 27, 1)",BGHover:"rgba(255, 255, 255, .9)",BGBrand:"rgba(254, 44, 85, .34)",LinePrimary:"rgba(255, 255, 255, 0)",LineSecondary:"rgba(255, 255, 255, .12)",LineInput:"rgba(255, 255, 255, .5)",LinePrimary2:"rgba(255, 255, 255, .2)",LineSecondary2:"rgba(255, 255, 255, 0)",TUXLineSecondary3:"rgba(255, 255, 255, .5)",LineDarker:"rgba(0, 0, 0, .6)",SDSecondary:"rgba(0, 0, 0, .68)",SDTertiary:"rgba(0, 0, 0, .5)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(255, 59, 92, 1.0)",Link3:"rgba(255, 59, 92, 1.0)",TextTertiary2:"rgba(255, 255, 255, 0.75)",TextReverse:"rgba(255, 255, 255, 0.9)",TextReverse2:"rgba(255, 255, 255, 0.75)",TextReverse3:"rgba(255, 255, 255, 0.5)",TextReverse4:"rgba(255, 255, 255, 0.34)",BGPrimary2:"rgba(255, 255, 255, 0.04)",BGView2:"rgba(255, 255, 255, 0.0)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(18, 18, 18, 1.0)",BGReverse2:"rgba(18, 18, 18, 0.9)",ShadowPrimary:"rgba(255,255, 255, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(255, 255, 255, 0.0)",LineReverse2:"rgba(255, 255, 255, 0.12)",LineReverse3:"rgba(255, 255, 255, 0.0)",LineInverse:"rgba(255, 255, 255, 0.0)",TagGreenText:"rgba(178, 255, 217, 1.0)",TagGreenBG:"rgba(89, 128, 102, 1.0)",TagPurpleText:"rgba(255, 178, 217, 1.0)",TagPurpleBG:"rgba(128, 89, 108, 1.0)",TagBrownText:"rgba(255, 179, 179, 1.0)",TagBrownBG:"rgba(128, 89, 89, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1)",ConstSecondary2:"rgba(16, 162, 197, 1)",BGMessageIcon:"rgba(255, 255, 255, 0.08)",BGMessageOperateHover:"rgba(255, 255, 255, 0.12)"},E={Proxima:'"IBM Plex Sans", ProximaNova, Arial, Tahoma, PingFangSC, sans-serif',Sofia:'"IBM Plex Sans", SofiaPro, Arial, Tahoma, PingFangSC, sans-serif'},M={P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}};var R;!function(e){e[e.Dark=0]="Dark",e[e.Bright=1]="Bright",e[e.System=2]="System"}(R||(R={}));const F={isMobile:!1,direction:"ltr",isDark:!1,colors:{Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(254, 44, 85, 1)",Link:"rgba(254, 44, 85, 1)",Primary2:"rgba(22, 24, 35, 1)",TextPrimary:"rgba(22, 24, 35, 1)",TextSecondary:"rgba(22, 24, 35, .75)",TextTertiary:"rgba(22, 24, 35, .5)",TextQuaternary:"rgba(22, 24, 35, .34)",BGPrimary:"rgba(255, 255, 255, 1)",BGSecondary:"rgba(255, 255, 255, 1)",BGTertiary:"rgba(255, 255, 255, 1)",BGQuaternary:"rgba(255, 255, 255, 1)",BGQuinary:"rgba(255, 255, 255, 1)",BGSecondary2:"rgba(255, 255, 255, 1)",BGTertiary2:"rgba(255, 255, 255, 1)",BGPlaceholderDefault:"rgba(22, 24, 35, .06)",BGPlaceholderOpaque:"rgba(241, 241, 241, 1)",BGInput:"rgba(22, 24, 35, .06)",BGInput2:"rgba(22, 24, 35, .06)",BGView:"rgba(22, 24, 35, .03)",BGCreation3:"rgba(248, 248, 248, 1)",BGCreation4:"rgba(255, 255, 255, 1)",BGHover:"rgba(22, 24, 35, .06)",BGBrand:"rgba(254, 44, 85, .06)",LinePrimary:"rgba(22, 24, 35, .2)",LineSecondary:"rgba(22, 24, 35, .12)",LineInput:"rgba(22, 24, 35, .5)",LinePrimary2:"rgba(22, 24, 35, .2)",LineSecondary2:"rgba(22, 24, 35, .12)",TUXLineSecondary3:"rgba(22, 24, 35, .12)",LineDarker:"rgba(22, 24, 35, .12)",SDSecondary:"rgba(0, 0, 0, .5)",SDTertiary:"rgba(0, 0, 0, .2)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(254, 44, 85, 1.0)",Link3:"rgba(254, 44, 85, 1.0)",TextTertiary2:"rgba(22, 24, 35, 0.5)",TextReverse:"rgba(22, 24, 35, 1.0)",TextReverse2:"rgba(22, 24, 35, 0.75)",TextReverse3:"rgba(22, 24, 35, 0.5)",TextReverse4:"rgba(22, 24, 35, 0.34)",BGPrimary2:"rgba(255, 255, 255, 1.0)",BGView2:"rgba(22, 24, 35, 0.03)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(255, 255, 255, 1.0)",BGReverse2:"rgba(255, 255, 255, 0.9)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(22, 24, 35, 0.03)",LineReverse2:"rgba(22, 24, 35, 0.12)",LineReverse3:"rgba(22, 24, 35, 0.12)",LineInverse:"rgba(22, 24, 35, 0.2)",TagGreenText:"rgba(89, 128, 108, 1.0)",TagGreenBG:"rgba(239, 245, 242, 1.0)",TagPurpleText:"rgba(128, 89, 121, 1.0)",TagPurpleBG:"rgba(246, 240, 245, 1.0)",TagBrownText:"rgba(128, 89, 89, 1.0)",TagBrownBG:"rgba(245, 240, 240, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1.0)",ConstSecondary2:"rgba(16, 162, 197, 1.0)",BGMessageIcon:"rgb(241, 241, 242)",BGMessageOperateHover:"rgba(196, 196, 196, .425)"},link:{color:"#0078d4",hoverColor:"#004578",activeColor:"#004578",focusColor:"#0078d4",visitedColor:"#0078d4"},selection:{background:"rgba(141, 214, 249, 0.35)"},text:{fontFamily:'"SofiaPro", PingFangSC, sans-serif',fontSize:"14px",color:"#000"},border:{radius:"3px"},boxShadowBase:"0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108)",markdown:{blockquote:{color:"#4e7182",backgroundColor:"#eaf8ff"},inlineCode:{color:"hotpink",background:"rgba(70, 94, 105, 0.05)"}},typography:{P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},fontFamilies:{Proxima:"ProximaNova, Arial, Tahoma, PingFangSC, sans-serif",Sofia:"SofiaPro, Arial, Tahoma, PingFangSC, sans-serif"},fontWeights:{normal:400,medium:500,semiBold:600,bold:700}};function D(e,t){var i;const o=Object.create(null);for(const[n,a]of Object.entries(e)){const e=t[n];o[n]="object"==typeof e?D(a,e):null!==(i=t[n])&&void 0!==i?i:a}return o}function B(e){const{isDark:t,isMobile:i,lang:o}=e,n={};return t&&(n.colors=A,n.isDark=!0),i&&(n.typography=M),"vi-VN"===o?n.fontFamilies=E:"ar"!==o&&"he-IL"!==o&&"ur"!==o||(n.direction="rtl"),n.isMobile=i,D(F,n)}const z=(0,j.createContext)({value:!1,toggle:I()});var N=i(4589),U=i(34685),W=i.n(U);function q({children:e,supportRoutes:t}){const i=function(e,t){const i=(0,N.lX)(t);function o(t){return(o,n)=>{const{pathname:a,href:r}=function(e){var t;if("string"==typeof e){const t=new URL(e,window.location.origin);return{pathname:t.pathname,href:t.href}}return{pathname:null!==(t=e.pathname)&&void 0!==t?t:"",href:`${e.pathname}${e.search}${e.hash}`}}(o);!function(e,t){return t.some((t=>W()(t).test(e)))}(a,e)?t?window.location.replace(r):window.location.href=r:t?i.replace(o,n):i.push(o,n)}}return Object.create(i,{push:{enumerable:!0,value:o(!1)},replace:{enumerable:!0,value:o(!0)}})}(t);return(0,o.jsx)(P.F0,Object.assign({history:i},{children:e}),void 0)}function G({children:e}){const t=(0,P.k6)();return(0,o.jsx)(w.o,Object.assign({history:t},{children:e}),void 0)}function H({children:e}){const[t,i]=(0,j.useState)(!1),{defaultDarkMode:n,hasDarkModeSwitch:a}=(0,T.ui)();(0,j.useEffect)((()=>{let e=n;"light"===S.Z.get(O.u7)?e=!1:"dark"===S.Z.get(O.u7)&&a&&(e=!0),n&&S.Z.set(O.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"}),i(Boolean(e))}),[n,a]);const r=(0,j.useMemo)((()=>({value:t,toggle:i})),[t]);return(0,o.jsx)(z.Provider,Object.assign({value:r},{children:e}),void 0)}const Z=({children:e,supportRoutes:t})=>{var i,n,a,r;const s=null!==(r=null!==(a=null===(n=null===(i=window.SIGI_STATE)||void 0===i?void 0:i.I18n)||void 0===n?void 0:n.lang)&&void 0!==a?a:document.documentElement.getAttribute("lang"))&&void 0!==r?r:"en";return(0,j.useEffect)((()=>{(null===history||void 0===history?void 0:history.scrollRestoration)&&(history.scrollRestoration="manual")})),(0,o.jsx)(C.B6,{children:(0,o.jsx)(g.bd,Object.assign({lang:s},{children:(0,o.jsx)(j.StrictMode,{children:(0,o.jsx)(q,Object.assign({supportRoutes:t},{children:(0,o.jsx)(G,{children:(0,o.jsx)(H,{children:e},void 0)},void 0)}),void 0)},void 0)}),void 0)},void 0)};var $=i(29046),V=i(9236),Q=i(94582),Y=i(69056),K=i(84785),J=i(2734),X=i(59384),ee=i(83421),te=i(16926),ie=i(89974),oe=i.n(ie),ne=i(34708),ae=i(57244),re=i(93797);let se=class{constructor(){this.handlePolicyConfirmOnFYP=e=>{re.W.event("tns_web_trending_setting",e)},this.handleAgeGateResponse=(e,t)=>{re.W.event("age_gate_response",{enter_type:"click_sign_up",is_success:e?1:0,error_code:t})}}handleUniversalPopShow(e){re.W.event("tns_general_dialog_show",e)}handleUniversalPopClick(e){re.W.event("qa_tns_general_dialog_click",e)}};se=(0,m.__decorate)([(0,ae.G)()],se);var le=i(32913),de=i(27918);const ce=(0,le.Z)("a",{target:"e1k110iq0"})((({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary"})),"label:ALink;");var pe=i(73566),ue=i(48185),ge=i(19630),me=i(60595),he=i(20948),_e=i(56979),ve=i(49584),ye=i(47165),be=i(90293),fe=i(4206);let xe=class{constructor(e){this.fetch=e}getUniversalPopConfig(e){return this.fetch.get("/api/policy/notice/",{query:e})}setUniversalPopOperation(e){return this.fetch.post("https://www.tiktok.com/api/policy/notice/approve/",{body:(0,be.stringify)(e)})}getPolicyContent(e){return this.fetch.get("https://www.tiktok.com/web/api/v2/project/articleContent/",{query:e})}};xe=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],xe);let ke=class extends pe.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={popupConfig:null}}setPopupConfig(e,t){e.popupConfig=t}getPopupConfig(e){return e.pipe((0,he.M)(this.appContext.state$),(0,_e.U)((([e,t])=>{var i;return{locale:null!==(i=t.lang)&&void 0!==i?i:"en"}})),(0,ve.z)((({locale:e})=>this.service.getUniversalPopConfig({locale:e}).pipe((0,_e.U)((({policy_notices:e})=>{var t;return this.getActions().setPopupConfig(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)}))))),(0,ye.n)({}))}};function we({link:e,lang:t}){return e.replace("${locale}",t)}function Se({onHide:e,report:t,popupService:i,common:{business:o,policy_version:n,style:a},action:{text:r,approve:s,operation:l,dismiss:d,link:c,extra:p,new_web_tab:u,link_type:g}}){return m=>{if(null==m||m.preventDefault(),t.handleUniversalPopClick({style:a,business:o,button_info:r}),"callback"===g||s)return i.setUniversalPopOperation({business:o,extra:p,policy_version:n,style:a,operation:null==l?void 0:l.toString()}).subscribe(),void(null==e||e());d?null==e||e():g&&"h5"!==g||!c||(u?window.open(c):window.location.href=c)}}(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],ke.prototype,"setPopupConfig",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],ke.prototype,"getPopupConfig",null),ke=(0,m.__decorate)([(0,ge.Y)("UniversalPop"),(0,m.__metadata)("design:paramtypes",[xe,K.G])],ke);const je=function({iconSrc:e="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/logo_144c91a.png"}){return(0,o.jsxs)(C.ql,{children:[(0,o.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,o.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,o.jsx)("link",{rel:"shortcut icon",href:e,type:"image/x-icon"},"shortcut")]},void 0)},Ce=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],Pe=function(){return(0,o.jsx)(C.ql,{children:Ce.map(((e,t)=>(0,o.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))},void 0)};var Te=i(40022);(0,j.createContext)({isSupportWebp:!0});var Oe=i(91218),Le=i(23753);const Ie=function({appContext:e,slardarBid:t}){const{abTestVersion:i,env:n,botType:a,appType:r,user:s,wid:l,region:d,isMobile:c,domains:p}=null!=e?e:{},u=(0,te.fz)(Oe.n),g=(0,j.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=d?d:"",botType:null!=a?a:"",isMobile:Boolean(c).toString(),isDowngrade:(0,Te.W)().toString(),isLogin:Boolean(s).toString()},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{t[e]=i.vid}))}catch(e){console.error("Abtest config parse error",e)}return t})(i)),{uid:null!==(e=null==s?void 0:s.uid)&&void 0!==e?e:""})}),[i,a,c,s,d]),m=(0,Le.A4)(null!=r?r:"m",{bid:t,env:"boe"===(null==n?void 0:n.type)?"test":"production",domain:null==p?void 0:p.slardar});return(0,j.useEffect)((()=>{u.config({userId:l,context:g}),"tiktok_webapp"!==t&&"tiktok_webapp_mobile"!==t||function(e){try{const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},i=new Image;i.onload=function(){const t=i.width>0&&i.height>0;e(t)},i.onerror=function(){e(!1)},i.src=`data:image/webp;base64,${t.animation}`}catch(e){}}((e=>{u.emitEvent("check_webp_support",{count:1},{support:`${e}`})}))}),[]),(0,o.jsx)(C.ql,{children:(0,o.jsx)("script",{children:m},void 0)},void 0)},Ae=function({appContext:e,slardarBid:t,iconSrc:i}){const{language:n}=(0,J.m7)(e),{hasDarkModeSwitch:r}=(0,T.ui)(),{isDark:s}=(0,a.u)(),l=r&&s;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.ql,{htmlAttributes:{lang:n,"data-theme":l?"dark":"light"}},void 0),(0,o.jsx)(je,{iconSrc:i},void 0),(0,o.jsx)(Ie,{appContext:e,slardarBid:t},void 0),(0,o.jsx)(Pe,{},void 0)]},void 0)};var Ee=i(493),Me=i(29121),Re=i(50218),Fe=i(47741);function De(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>De(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=De(e[i]),t)),{}):De(String(e))}class Be extends j.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(De).reduce(((e,t,i)=>{const[n="",a={}]=t;return""!==n&&0!==Object.keys(a).length&&e.push((0,o.jsx)(Fe.wd,Object.assign({dangerouslyExposeHtml:!0,id:n},{children:(0,o.jsx)(Fe.TV,{genericType:n,genericKey:n,schema:a},void 0)}),`${n}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:n}=this.props,{title:a="",keywords:r="",description:s="",robotsContent:l="",canonicalHref:d="",alternateHref:c="",amphtmlHref:p="",applicableDevice:u="",hreflangList:g=[]}=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e,{children:[(0,o.jsx)("title",{children:a},void 0),r&&(0,o.jsx)("meta",{name:"keywords",content:r},"keywords"),s&&(0,o.jsx)("meta",{name:"description",content:s},"description"),l&&(0,o.jsx)("meta",{name:"robots",content:l},"robots"),u&&(0,o.jsx)("meta",{name:"applicable-device",content:u},"applicable-device"),d&&(0,o.jsx)("link",{rel:"canonical",href:d},"canonical"),p&&(0,o.jsx)("link",{rel:"amphtml",href:p},"amphtml"),c&&(0,o.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:c},"alternate-media"),g.length?g.map((({hreflang:e,href:t})=>(0,o.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,n]},void 0),this.dynamicAddCompKey(i)]},void 0)}}const ze=Be;var Ne=i(92311);const Ue=function({appContext:e}){const{pathname:t}=(0,P.TH)(),{metaParams:i,jsonldList:n,shouldUnifyCanonical:a}=(0,V.mp)(Ne.q,{selector:({metaParams:i,jsonldList:o,abtest:n})=>{var a,r;return{metaParams:i,jsonldList:o,shouldUnifyCanonical:(null==e?void 0:e.isGoogleBot)&&t.startsWith("/discover/")&&Boolean(null===(r=null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.canonical_unify)||void 0===r?void 0:r.should_unify)}},dependencies:[t]});let r=t;try{r=encodeURI(decodeURI(t))}catch(e){}const s=(0,j.useMemo)((()=>{let t=[];const{robotsContent:o}=null!=i?i:{};if(o&&!o.includes("noindex")&&!a){const{host:i}=null!=e?e:{},o=(0,Re.Hg)(r);t=[{hreflang:"x-default",href:o?`https://${i}`:`https://${i}${r}`}],Me.tF.forEach((({value:e})=>{const n=e.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),a=o?`https://${i}/${n}/`:`https://${i}${r}?lang=${n}`;t.push({hreflang:n,href:a})}))}return Object.assign(Object.assign({},i),{hreflangList:t})}),[e,i,r]);return(0,o.jsx)(ze,{wrappedHead:C.ql,metaParams:s,jsonldList:n},void 0)};var We=i(42690);const qe=function(e){const{appContext:t}=e,{location:i}=(0,P.k6)(),n=`https://${null==t?void 0:t.host}${i.pathname}${i.search}`,a=Object.assign(Object.assign({},(0,V.mp)(We.I).value),{"og:url":n});return(0,o.jsx)(C.ql,{children:Object.keys(a).map((e=>(0,o.jsx)("meta",{property:e,content:a[e]},e)))},void 0)};var Ge=i(56277);const He=(0,le.Z)("div",{target:"eyt76ed0"})({width:"100vw",top:de.Mz-1+"px",left:"0",marginTop:"1px",position:"fixed",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",zIndex:999,background:"#fff",display:"flex",justifyContent:"center",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,de.Cx)("bottom"))},"label:DivBannerContainer;"),Ze=(0,le.Z)("div",{target:"eyt76ed1"})([{width:de.XP,maxWidth:de.XP,paddingTop:"16px",paddingBottom:"16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,de.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),$e=(0,le.Z)("div",{target:"eyt76ed2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginEnd:"24px"})],"label:DivLeftContainer;"),Ve=(0,le.Z)("div",{target:"eyt76ed3"})([{display:"flex",alignItems:"center"}],"label:DivRightContainer;"),Qe="48px",Ye=(0,le.Z)("div",{target:"eyt76ed4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:"inline-block",width:Qe,height:Qe,flex:"0 0 48px",padding:"0"},(0,de.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),Ke=(0,le.Z)("img",{target:"eyt76ed5"})({width:Qe,height:Qe},"label:ImgIcon;"),Je=(0,le.Z)("div",{target:"eyt76ed6"})([({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{alignSelf:"center"}],"label:DivContentWrapper;"),Xe=(0,le.Z)("h4",{target:"eyt76ed8"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:H4Title;"),et=(0,le.Z)(Ge.Z,{target:"eyt76ed9"})({width:"24px",height:"24px",cursor:"pointer"},"label:StyledCloseIcon;"),tt=(0,le.Z)("div",{target:"eyt76ed10"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-of-type)":(0,de.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),it=(0,le.Z)("a",{target:"eyt76ed11"})((({theme:e})=>[(0,de.GI)({theme:e,color:"Primary",typography:"P2"}),{":link, :active, :hover, :visited":{color:e.colors.Primary}}]),{textDecoration:"none",whiteSpace:"nowrap",":hover":{textDecoration:"none"}},"label:AButtonLink;"),ot=(0,j.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,j.useRef)(null);return(0,j.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(He,Object.assign({ref:r},{children:(0,o.jsxs)(Ze,{children:[(0,o.jsxs)($e,{children:[(0,o.jsx)(Ye,{children:i&&(0,o.jsx)(Ke,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)(Je,{children:[e&&(0,o.jsx)(Xe,{},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(j.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(Ve,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(et,{},void 0)}),e):(0,o.jsx)(tt,{children:t?(0,o.jsx)(it,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(it,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)})),nt="inline-block",at=(0,le.Z)("div",{target:"e1qek5np0"})((({theme:{colors:e}})=>({width:"100vw",top:0,left:0,position:"fixed",zIndex:999,background:e.ConstBGInverse2,display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,de.Cx)("bottom"))})),"label:DivBannerContainer;"),rt=(0,le.Z)("div",{target:"e1qek5np1"})([{width:de.XP,maxWidth:de.XP,padding:"12px 12px 12px 16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,de.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),st=(0,le.Z)("div",{target:"e1qek5np2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginEnd:"8px"})],"label:DivLeftContainer;"),lt=(0,le.Z)("div",{target:"e1qek5np3"})([{display:"flex",alignItems:"flex-start"}],"label:DivRightContainer;"),dt="48px",ct=(0,le.Z)("div",{target:"e1qek5np4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:nt,width:dt,height:dt,flex:"0 0 48px",padding:"0"},(0,de.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),pt=(0,le.Z)("img",{target:"e1qek5np5"})({width:dt,height:dt},"label:ImgIcon;"),ut=(0,le.Z)("div",{target:"e1qek5np6"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"ConstTextInverse"}),{display:nt,fontSize:"15px",lineHeight:"18px",alignSelf:"center",a:{display:nt,alignSelf:"center",fontSize:"15px",lineHeight:"18px",fontWeight:700,color:`${e.colors.ConstTextInverse} !important`}}]),"label:DivContentWrapper;"),gt=(0,le.Z)("h4",{target:"e1qek5np7"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})]),"label:H4Title;"),mt=(0,le.Z)(Ge.Z,{target:"e1qek5np8"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},"label:StyledCloseIcon;"),ht=(0,le.Z)("div",{target:"e1qek5np9"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-child)":(0,de.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),_t=(0,le.Z)("a",{target:"e1qek5np10"})((({theme:e})=>[(0,de.GI)({theme:e,color:"Primary",typography:"P2"})]),{textDecoration:"none",whiteSpace:"nowrap",textAlign:"center"},"label:AButtonLink;"),vt=(0,j.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,j.useRef)(null);return(0,j.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(at,Object.assign({ref:r},{children:(0,o.jsxs)(rt,{children:[(0,o.jsxs)(st,{children:[(0,o.jsx)(ct,{children:i&&(0,o.jsx)(pt,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)(ut,{children:[e&&(0,o.jsx)(gt,{children:e},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(j.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(lt,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(mt,{fill:"#fff"},void 0)}),e):(0,o.jsx)(ht,{children:t?(0,o.jsx)(_t,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(_t,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)}));var yt=i(76851),bt=i(80537);const ft=(0,le.Z)("div",{target:"es36pgp0"})({pointerEvents:"auto",position:"absolute",boxSizing:"border-box",left:"0",bottom:"0",width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",padding:"16px 20px 20px"},"label:DivContainer;"),xt=(0,le.Z)("div",{target:"es36pgp1"})({textAlign:"center",position:"relative",":not(:empty)":{paddingBottom:"16px",marginBottom:"12px","::after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,de.Cx)("bottom"))}},"label:DivTitleContainer;"),kt=(0,le.Z)("img",{target:"es36pgp2"})({display:"inline-block"},"label:ImgIcon;"),wt=(0,le.Z)("h4",{target:"es36pgp3"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"})),"label:H4Title;"),St=(0,le.Z)("p",{target:"es36pgp4"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{marginBottom:"32px"},"label:PContent;"),jt=(0,le.Z)("div",{target:"es36pgp5"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},"label:DivButtonWrapper;"),Ct=(0,le.Z)(bt.W,{target:"es36pgp6"})((({theme:{direction:e}})=>({"& + &":(0,de.YJ)({direction:e,marginStart:"24px"})})),"label:StyledButton;"),Pt=(0,j.memo)((function({icon:e,title:t,content:i,buttons:n}){return(0,o.jsx)(yt.AR,Object.assign({compact:!0,isOpen:!0},{children:(0,o.jsxs)(ft,{children:[(0,o.jsxs)(xt,{children:[e&&(0,o.jsx)(kt,{src:e},void 0),t&&(0,o.jsx)(wt,{children:t},void 0)]},void 0),(0,o.jsx)(St,{children:i},void 0),(0,o.jsx)(jt,{children:n.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(Ct,Object.assign({size:"medium",buttonTheme:t?"primary":i?"line":"default",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)}));var Tt=i(81773);const Ot=(0,le.Z)("div",{target:"e1uf1l9s0"})((({theme:e,theme:{colors:t}})=>[{position:"relative",width:"400px",background:t.BGTertiary,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",borderRadius:"8px",whiteSpace:"pre-line"},(0,de.GI)({theme:e,fontFamily:"Proxima"})]),"label:DivContainer;"),Lt=(0,le.Z)(Ot,{target:"e1uf1l9s1"})({width:"84vw",maxWidth:"360px",maxHeight:"480px",overflow:"auto",paddingTop:"20px"},"label:DivContainerMobile;"),It=(0,le.Z)("img",{target:"e1uf1l9s2"})({height:"48px"},"label:ImgIcon;"),At=(0,le.Z)("h4",{target:"e1uf1l9s3"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P0",fontWeight:"bold"}),{textAlign:"center",padding:"0 32px",flex:"0 0 auto",order:0,wordBreak:"break-word"}]),"label:H4Title;"),Et=(0,le.Z)("h2",{target:"e1uf1l9s4"})((({theme:e})=>[(0,de.GI)({theme:e,fontWeight:"bold"}),{textAlign:"center",padding:"0 20px",flex:"0 0 auto",order:0,wordBreak:"break-word",fontSize:"20px",lineHeight:"24px"}]),"label:H2Title;"),Mt=(0,le.Z)("p",{target:"e1uf1l9s5"})((({theme:e})=>({color:e.colors.TextSecondary,fontSize:"15px",lineHeight:"18px",padding:"0 32px",textAlign:"center",marginTop:"7px"})),"label:PContent;"),Rt=(0,le.Z)(Mt,{target:"e1uf1l9s6"})({maxHeight:"300px",overflow:"auto",padding:"0 20px"},"label:PContentMobile;"),Ft=(0,le.Z)("div",{target:"e1uf1l9s7"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 32px 32px"},"label:DivButtonWrapper;"),Dt=(0,le.Z)(Ft,{target:"e1uf1l9s8"})((({theme:{colors:e}})=>({borderTop:`.5px solid ${e.LineSecondary}`,padding:0,marginTop:"20px",boxSizing:"border-box"})),"label:DivButtonWrapperMobile;"),Bt=(0,le.Z)("div",{target:"e1uf1l9s9"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box",padding:"22px 20px 6px"},"label:DivButtonWrapperVertical;"),zt=(0,le.Z)(bt.W,{target:"e1uf1l9s10"})((({theme:e,theme:{direction:t}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",":not(:first-of-type)":(0,de.YJ)({direction:t,marginStart:"16px"})},(0,de.GI)({theme:e,typography:"P2"})]),"label:StyledButton;"),Nt=(0,le.Z)(bt.W,{target:"e1uf1l9s11"})((({theme:{colors:e}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",fontSize:"15px",lineHeight:"18px",":not(:first-child)":{marginTop:"2px",border:"none",color:e.TextTertiary}}]),"label:StyledButtonMobile;"),Ut=(0,le.Z)(zt,{target:"e1uf1l9s12"})((({isBold:e=!1,theme:{colors:t}})=>({width:"50%",border:"none",borderRadius:0,borderRight:`.5px solid ${t.LineSecondary}`,margin:"0 !important",color:e?t.TextPrimary:t.TextTertiary})),"label:StyledButtonLine;"),Wt=(0,j.memo)((function({title:e,content:t,isMobile:i=!1,icon:n,buttons:a}){const r=i&&a.some((e=>e.highlight)),s=i?r?Bt:Dt:Ft,l=i?r?Nt:Ut:zt;return i?(0,o.jsx)(Tt.u_,Object.assign({maskCloseable:!1,visible:!0},{children:(0,o.jsxs)(Lt,{children:[n&&(0,o.jsx)(It,{src:n},void 0),e&&(0,o.jsx)(Et,{children:e},void 0),t&&(0,o.jsx)(Rt,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,isBold:t,highlight:i,line:n,onClick:a})=>(0,o.jsx)(l,Object.assign({isBold:t,buttonTheme:i?"primary":n?"default":"line",onClick:a},{children:e}),e)))},void 0)]},void 0)}),void 0):(0,o.jsx)(yt.AR,Object.assign({compact:!0,closeOnBackdropClick:!1,isOpen:!0},{children:(0,o.jsxs)(Ot,{children:[n&&(0,o.jsx)(It,{src:n},void 0),e&&(0,o.jsx)(At,{children:e},void 0),t&&(0,o.jsx)(Mt,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(l,Object.assign({buttonTheme:t?"primary":i?"default":"line",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)})),qt=function(e){var t;const{onHide:i}=e,[n,a]=(0,j.useState)(!0),r=(0,j.useCallback)((()=>{null==i||i(),a(!1)}),[i]),{isMobile:s}=null!==(t=(0,ne.L)((()=>["isMobile"]),[]))&&void 0!==t?t:{},l=function({onHide:e}){var t;const{popupConfig:i}=(0,V.mp)(ke),{language:n="en",isMobile:a=!1}=null!==(t=(0,ne.L)((()=>["language","isMobile"]),[]))&&void 0!==t?t:{},r=function({onHide:e,lang:t,isMobile:i}){const{popupConfig:o}=(0,V.mp)(ke),n=(0,te.fz)(xe),a=(0,te.fz)(se);return(0,j.useMemo)((()=>{if(!o)return[];const r=i?0:1,s=i?-1:0,{actions:l=[],first_button_highlight:d,business:c,policy_version:p,style:u}=o;return(d&&i?l:[...l].reverse()).map((({text:i,is_bold:o=!1,link:l,link_type:g,approve:m,extra:h,operation:_,dismiss:v,is_close_style:y,new_web_tab:b},f)=>{const x="string"==typeof l?we({link:l,lang:t}):void 0;return{text:i,isBold:o,highlight:Boolean(d)&&r===f,line:!d||s===f,link:x,isCloseStyle:y,onClick:Se({onHide:e,report:a,popupService:n,common:{business:c,policy_version:p,style:u},action:{text:i,approve:m,dismiss:v,extra:h,link:l,link_type:g,new_web_tab:b,operation:_}})}}))}),[i,t,e,o,n,a])}({onHide:e,lang:n,isMobile:a}),s=function({lang:e,onHide:t}){const{popupConfig:i}=(0,V.mp)(ke),n=(0,te.fz)(xe),a=(0,te.fz)(se);return(0,j.useMemo)((()=>{if(!i)return null;const{body_link_list:r,body:s}=i;if(!(null==r?void 0:r.length)||!/%s/.test(s))return s;const l=[],d=s;let c=0;const p=/%s/g;return r.forEach((({link:r="",name:s,dismiss:u,approve:g,operation:m,new_web_tab:h})=>{const _=p.exec(d);if(!_)return;const v=we({link:r,lang:e}),y=Se({onHide:t,popupService:n,report:a,common:oe()(i,["business","policy_version","style"]),action:{text:s,approve:g,dismiss:u,operation:m,new_web_tab:h,link:v}}),b=(0,o.jsx)(ce,Object.assign({target:"_blank",rel:"noopener noreferer",href:v,onClick:y},{children:s}),void 0);l.push(d.slice(c,_.index)),l.push(b),c=Number(_.index)+_[0].length})),l.push(d.slice(c)),l}),[e,t,i,n,a])}({lang:n,onHide:e});if(!i)return null;const{title:l,icon_url:d,body:c,style:p}=i;return{title:l,icon:d,body:c,style:p,content:s,buttons:r}}({onHide:r}),d=(0,V.qj)(ke);if((0,j.useEffect)((()=>{d.getPopupConfig()}),[d]),!l||"none"===l.style||!n)return null;const{title:c,icon:p,content:u,style:g,buttons:m}=l;switch(g){case"pc_banner":return(0,o.jsx)(ot,{title:c,content:u,icon:p,buttons:m,onShow:e.onShow},void 0);case"mobile_banner":return(0,o.jsx)(vt,{title:c,content:u,icon:p,buttons:m,onShow:e.onShow},void 0);case"pop":return(0,o.jsx)(Wt,{isMobile:s,title:c,content:u,icon:p,buttons:m},void 0);case"float":case"bottom":return(0,o.jsx)(Pt,{title:c,content:u,icon:p,buttons:m},void 0);default:return null}};var Gt=i(30121);const Ht=function({path:e}){const t=(0,j.useCallback)((()=>(window.location.href=`/404?fromUrl=${encodeURIComponent(window.location.pathname)}`,null)),[]);return(0,o.jsx)(P.AW,{path:e,render:t},void 0)};var Zt=i(35468),$t=i(61453),Vt=i(30074);const Qt=(0,le.Z)("div",{target:"eaxh4gs0"})((({theme:{direction:e}})=>[{position:"relative",borderRadius:"8px",overflow:"hidden"},(0,de.YJ)({direction:e,start:"unset"})]),"label:DivFrameContainer;");Qt.defaultProps=Object.assign(Object.assign({},Qt.defaultProps),{"data-e2e":"login-frame"});const Yt=(0,le.Z)("button",{target:"eaxh4gs1"})((({theme:{direction:e}})=>[de.Ph,{position:"absolute",top:"24px",width:"40px",height:"40px",cursor:"pointer",background:"rgba(22, 24, 35, .06)",borderRadius:"100%",transition:"all ease-in-out 200ms",":hover":{background:"rgba(22, 24, 35, .1)"},":active":{background:"rgba(22, 24, 35, .14)"}},(0,de.YJ)({direction:e,end:"24px"})]),"label:ButtonCloseWrapper;"),Kt=(0,le.Z)(Ge.Z,{target:"eaxh4gs2"})({position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px"},"label:StyledXMark;"),Jt=(0,le.Z)("iframe",{target:"eaxh4gs3"})({overflow:"hidden",display:"block",width:"472px",height:"calc(100vh - 64px)",maxHeight:"660px",background:"transparent",border:"none"},"label:IframeLoginSite;"),Xt=function(){const[e,t]=(0,V.b7)($t.r),i=(0,j.useCallback)(((e="click_x")=>{t.closeModal({enter_method:e})}),[t]),n=(0,j.useCallback)((()=>{i("click_x")}),[i]),a=(0,j.useCallback)((e=>{let i="click_x";i=0===e||2===e?"click_x":"click_blank",t.closeModal({enter_method:i})}),[t]);return(0,j.useEffect)((()=>{function e(e){var o;if("object"==typeof e.data&&e.origin===location.origin)switch(e.data.event){case"deleteSuccess":i(),window.location.href=null!==(o=e.data.redirectUrl)&&void 0!==o?o:"/";break;case"loginCancel":i();break;case"hasLogin":i(),window.location.reload();break;case"loginSuccess":if(i("login_success"),e.data.message)return Zt.h.open({content:e.data.message,duration:3,widthType:"half",style:{zIndex:10011}}),void setTimeout((()=>{e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload()}),3e3);e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload();break;case"hideOuterClose":t.setCloseable(!1)}}return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}}),[t,i]),(0,o.jsx)(Tt.u_,Object.assign({visible:e.isOpen,zIndex:10010,maskCloseable:!1,keyboardCloseable:e.closeable,onClose:a},{children:(0,o.jsxs)(Qt,{children:[e.closeable&&(0,o.jsx)(Yt,Object.assign({onClick:n},{children:(0,o.jsx)(Kt,{},void 0)}),void 0),(0,o.jsx)(Jt,{src:e.url,style:e.iframeStyle},e.url)]},void 0)}),void 0)};var ei,ti=i(52372),ii=i.n(ti),oi=i(32863),ni=i(8721);!function(e){e.OrderDetails="ecom_email_redesign_order_details_page",e.LogisticsDetails="ecom_email_redesign_logistics_page",e.OrderRating="ecom_email_redesign_write_review_page",e.RefundDetails="ecom_email_redesign_refund_detail_page",e.RequestRefund="ecom_email_redesign_request_refund",e.Orders="ecom_email_redesign_orders",e.Vouchers="ecom_email_redesign_vouchers",e.ShoppingCart="ecom_email_redesign_shopping_cart"}(ei||(ei={}));const ai={title:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_title",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_title",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_title",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_title",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_title",ecom_email_redesign_orders:"email_redesign_webapp_orders_title",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_title",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_title"},desc:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_context",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_context",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_context",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_context",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_context",ecom_email_redesign_orders:"email_redesign_webapp_orders_context",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_context",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_context"}},ri=(0,le.Z)("div",{target:"eiv77n20"})({display:"flex",flexDirection:"column",alignItems:"center",width:"311px",padding:"40px 28px 12px",textAlign:"center",wordBreak:"break-word"},"label:DivContainer;"),si=(0,le.Z)("p",{target:"eiv77n21"})((({theme:e})=>[{marginBottom:"16px",fontSize:"17px",lineHeight:"18px"},(0,de.GI)({theme:e,fontWeight:"semiBold"})]),"label:PTitle;"),li=(0,le.Z)("p",{target:"eiv77n22"})((({theme:e})=>[{margin:"16px 0 4px",fontSize:"12px",lineHeight:"13px"},(0,de.GI)({theme:e,color:"TextSecondary"})]),"label:POtherDesc;"),di=ai.title.ecom_email_redesign_order_details_page,ci=ai.desc.ecom_email_redesign_order_details_page,pi=function({url:e}){var t,i;const n=(0,ni.Q)(),{search:a}=(0,P.TH)(),[r,s]=(0,j.useState)(!0),[l,d]=(0,j.useState)(""),c=new URLSearchParams(a);(0,j.useEffect)((()=>{var e;d(null!==(e=c.get("scene"))&&void 0!==e?e:""),history.replaceState(null,"","/")}),[]);const p=(0,j.useCallback)((()=>{s(!1)}),[]);return(0,o.jsx)(Tt.u_,Object.assign({visible:r,onClose:p},{children:(0,o.jsxs)(ri,{children:[(0,o.jsx)(si,{children:n(null!==(t=ai.title[l])&&void 0!==t?t:di)},void 0),(0,o.jsx)(ii(),{size:170,value:e,style:{padding:"12px",borderRadius:"12px",border:"1px solid #f2f2f2"}},void 0),(0,o.jsx)(li,{children:n(null!==(i=ai.desc[l])&&void 0!==i?i:ci)},void 0),(0,o.jsx)("img",{src:oi,width:131,height:40},void 0)]},void 0)}),void 0)};var ui,gi;function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},mi.apply(this,arguments)}var hi=i(26890),_i=i(26591),vi=i(27512),yi=i(13964),bi=i(86319),fi=i(21025),xi=i(81578),ki=i(89811);const wi=()=>{const e=(0,j.useRef)(""),t=[$.Ad.searchHome,$.Ad.searchUser,$.Ad.searchVideo],{pathname:i}=(0,P.TH)(),o=t.includes(i)&&!t.includes(e.current)||!t.includes(i),n=(0,j.useCallback)((t=>e.current=t),[]);return{needRefresh:o,setPathname:n,pathname:i}};var Si=i(89749),ji=i.n(Si),Ci=i(23028),Pi=i(22509),Ti=i(1e3);function Oi(){const{pathname:e}=(0,P.TH)();return(0,j.useMemo)((()=>(0,P.LX)(e,{path:Ti.$J.liveGoLive,exact:!0})),[e])}var Li=i(53095),Ii=i(82346),Ai=i(68854),Ei=i(11348);let Mi=class{constructor(e){this.service=e,this.reportErrorLog=e=>{var t;this.service.sendLog(null!==(t=null==e?void 0:e.stack)&&void 0!==t?t:null==e?void 0:e.message,"error")}}};Mi=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],Mi);var Ri=i(9663),Fi=i.n(Ri);const Di="REPORT_FIRST_FRAME_SUCCESS_FOR_OPEN_LIVE_FLAG";function Bi(){(0,yi.D$)(Di,"1")}function zi(){(0,yi.e8)(Di)}var Ni;!function(e){e.TraceSuccess="live_sdk_go_live_trace_success",e.TraceError="live_sdk_go_live_trace_fail",e.CreateRoomInfoSuccess="live_sdk_create_room_info_success",e.CreateRoomInfoFail="live_sdk_craete_room_info_fail",e.GoLiveSuccess="live_sdk_openLive_success",e.GoLivePreviewFirstFrameSuccess="live_sdk_openLive_preview_first_frame_success",e.GoLivePlayerError="live_sdk_go_live_player_error",e.GoLiveError="live_sdk_openLive_error",e.GoLiveWarning="live_sdk_openLive_warning",e.GoLiveStreamkeyError="live_sdk_openLive_streamkey_error",e.GoLiveStreamurlError="live_sdk_openLive_serverUrl_error",e.EndLiveSuccess="live_sdk_end_live_success",e.EndLiveFail="live_sdk_end_live_fail",e.LoadingTooLong="live_sdk_go_live_page_loading_too_long",e.EndLiveDataSuccess="live_sdk_end_live_data_success",e.EndLiveDataFailed="live_sdk_end_live_data_fail"}(Ni||(Ni={}));let Ui=class{constructor(e){this.service=e,this.defaultTag={where:"GoLive"},this.defaultMetrics={count:1},this.handlePlayerError=(e,t)=>{this.service.emitEvent("live_sdk_go_live_player_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{roomId:String(t),code:String(e.status),message:e.message}))},this.handleTraceSuccess=()=>{this.service.emitEvent("live_sdk_go_live_trace_success",this.defaultMetrics,this.defaultTag)},this.handleTraceError=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_trace_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomSuccess=()=>{this.service.emitEvent("live_sdk_openLive_success",this.defaultMetrics,this.defaultTag)},this.handleCreateRoomFirstFrameSuccess=()=>{"1"===(0,yi.le)(Di)&&(this.service.emitEvent("live_sdk_openLive_preview_first_frame_success",this.defaultMetrics,this.defaultTag),zi())},this.reportGoLiveError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleCreateRoomFail=({errorCode:e,errorMessage:t})=>{this.service.sendLog(null!=t?t:"","error"),this.service.emitEvent("live_sdk_openLive_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomWarning=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_openLive_warning",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleGoLiveStreamkeyError=()=>{this.service.emitEvent("live_sdk_openLive_streamkey_error",this.defaultMetrics,this.defaultTag)},this.handleGoLiveStreamurlError=()=>{this.service.emitEvent("live_sdk_openLive_serverUrl_error",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoSuccess=()=>{this.service.emitEvent("live_sdk_create_room_info_success",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_craete_room_info_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveSuccess=()=>{this.service.emitEvent("live_sdk_end_live_success",this.defaultMetrics,this.defaultTag)},this.handleEndLiveFail=()=>{this.service.emitEvent("live_sdk_end_live_fail",this.defaultMetrics,this.defaultTag)},this.handleLoadingTooLong=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_page_loading_too_long",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_end_live_data_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataSuccess=()=>{this.service.emitEvent("live_sdk_end_live_data_success",this.defaultMetrics,this.defaultTag)}}};function Wi(e){return(0,Li.z)((t=>{var i,o;return 0!==t.status_code&&(null===(i=t.data)||void 0===i?void 0:i.prompts)?((!e||e&&t.status_code&&(null==e?void 0:e(t.status_code)))&&Zt.h.open({content:null===(o=t.data)||void 0===o?void 0:o.prompts,duration:3}),(0,Ii.of)(Object.assign(Object.assign({},t),{error:t}))):(0,Ii.of)(t)}))}Ui=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],Ui);let qi=class{constructor(e){this.fetch=e,this.getLivePermission=()=>this.fetch.get("/webcast/room/live_podcast/",{baseUrlType:4}).pipe(Wi()),this.applyPermission=e=>this.fetch.post("/webcast/room/live_permission/apply/",{query:e,baseUrlType:4}).pipe(Wi()),this.getApplyInfo=e=>this.fetch.get("/webcast/room/live_permission/apply_info/",{query:e,baseUrlType:4}).pipe(Wi())}};qi=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],qi);let Gi=class extends pe.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.goLiveSlardar=i,this.defaultState={}}setPermissionData(e,t){e.permissionInfo={showComputerLiveEntrance:t.showComputerLiveEntrance,hasOBSLivePermission:t.hasOBSLivePermission,hasLiveApplyPermission:t.hasLiveApplyPermission}}getLivePermission(e){return e.pipe((0,Li.z)((()=>this.service.getLivePermission().pipe((0,Li.z)((({data:e,error:t})=>{var i,o,n,a;if(t)return(0,Ii.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}));if(null==e?void 0:e.can_be_live_podcast){const t=null!==(o=null===(i=null==e?void 0:e.live_scenario)||void 0===i?void 0:i.enable_live_third_party)&&void 0!==o&&o,r=!t&&null!==(a=null===(n=null==e?void 0:e.live_permission_apply)||void 0===n?void 0:n.enable_third_party)&&void 0!==a&&a;return(0,Ii.of)(this.getActions().setPermissionData({showComputerLiveEntrance:t||r,hasOBSLivePermission:t,hasLiveApplyPermission:r}))}return(0,Ii.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}))})),(0,Ai.K)((e=>(this.goLiveSlardar.handleTraceError({errorCode:"1001",errorMessage:e.message}),this.errorSlardar.reportErrorLog(e),Ei.E)))))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Gi.prototype,"setPermissionData",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Gi.prototype,"getLivePermission",null),Gi=(0,m.__decorate)([(0,ge.Y)("LivePermission"),(0,m.__metadata)("design:paramtypes",[qi,Mi,Ui])],Gi);var Hi,Zi,$i,Vi,Qi,Yi=i(35435),Ki=i(93859),Ji=i(10026),Xi=i(5549),eo=i(90035);!function(e){e.GoLivePlayerError="livesdk_go_live_player_error",e.TakePageShow="livesdk_pm_live_takepage_show",e.ScreenshotClick="livesdk_cover_modify_screenshot_click",e.ScreenshotButtonShow="livesdk_cover_modify_screenshot_show",e.Take="livesdk_live_take",e.CoverChange="livesdk_cover_modify_click",e.WebTopicClick="livesdk_web_topic_click",e.AutoStopChange="livesdk_thirdparty_auto_stop",e.ServerUrlCopy="livesdk_server_url_copy",e.StreamKeyCopy="livesdk_stream_key_copy",e.StreamKeyChangePop="livesdk_stream_key_change_pop",e.ThirdPartyStatus="livesdk_thirdparty_status",e.ShareLinkCopy="livesdk_anchor_link_copy",e.EndLiveClick="livesdk_end_live_click",e.LiveOver="livesdk_live_over",e.AppealClick="livesdk_anchor_appeal_click",e.OBSRevokeAnchorPop="livesdk_obs_revoke_anchor_pop",e.OBSRevokeRemind="livesdk_obs_revoke_remind",e.LiveCenterEntranceShow="livesdk_anchor_live_center_entrance_show",e.LiveTakepageShow="livesdk_pm_live_takepage_show",e.LiveContentClick="livesdk_live_content_click",e.LiveContentResultShow="livesdk_live_content_result_show",e.LiveTopicClick="livesdk_live_topic_click",e.LiveMatureThemeIconClick="livesdk_mature_theme_icon_click",e.LiveMatureThemePopup="livesdk_mature_theme_popup",e.LiveMatureThemePopupClick="livesdk_mature_theme_popup_click"}(Hi||(Hi={})),function(e){e.FromObs="third_party",e.FromDirect="video_live"}(Zi||(Zi={})),function(e){e.On="on",e.Off="off"}($i||($i={})),function(e){e.On="on",e.Off="off"}(Vi||(Vi={})),function(e){e[e.Temp=0]="Temp",e[e.Permanent=1]="Permanent"}(Qi||(Qi={}));var to;!function(e){e.GoLiveStreamKeyInfo="__tiktok_stream_key",e.GoLiveTopicId="goLive_topic_id",e.GoLiveGameTagId="goLive_game_tag_id",e.GoLiveTopicShow="__tiktok_topic_info",e.GoLiveEndStreamSetting="go_live_stream_setting",e.GoLivePermissionApply="go_live_permission_apply",e.HideMatureThemesRedDot="hide_go_live_mature_themes_red_dot",e.StudioDownloadVisited="studio_download_visited",e.CompleteSubscritionGuide="live_anchor_complete_subscription_guide",e.SubscriptionSubOnlyChat="live_subscription_sub_only_chat",e.SharePlatform="webapp-share-platform",e.LiveCreatorHubPopup="webapp-live-creator-hub-popup"}(to||(to={}));const io=6048e5;let oo=class{constructor(){this.getGoLiveStreamKeyInfo=(e,t)=>{const i=(0,yi.le)("__tiktok_stream_key");if(i){const{streamKey:e,expiration:o,roomId:n}=JSON.parse(i);if(o-Date.now()>1e3&&t===n)return{streamKey:e,expiration:o-Date.now(),roomId:n}}return{streamKey:e,roomId:t,expiration:io}},this.setGoLiveStreamKeyInfo=(e,t)=>{const i={streamKey:e,roomId:t,expiration:Date.now()+io};return(0,yi.D$)("__tiktok_stream_key",JSON.stringify(i))},this.getGoLiveTopicId=e=>(0,yi.le)("goLive_topic_id"+e),this.setGoLiveTopicId=(e,t)=>(0,yi.D$)("goLive_topic_id"+t,e),this.getGoLiveGameTagId=e=>(0,yi.le)("goLive_game_tag_id"+e),this.setGoLiveGameTagId=(e,t)=>(0,yi.D$)("goLive_game_tag_id"+t,e),this.getGoLiveTopicShow=e=>!!e&&"0"===(0,yi.le)(`__tiktok_topic_info${e}`,"0"),this.setGoLiveTopicShow=e=>(0,yi.D$)(`__tiktok_topic_info${e}`,"1"),this.setGoLiveEndStreamSetting=e=>(0,yi.D$)("go_live_stream_setting",e?"1":"0"),this.getGoLiveEndStreamSetting=()=>"1"===(0,yi.le)("go_live_stream_setting","0"),this.setHideGoLiveMatureThemesRedDot=()=>(0,yi.D$)("hide_go_live_mature_themes_red_dot","1"),this.getHideGoLiveMatureThemesRedDot=()=>"1"===(0,yi.le)("hide_go_live_mature_themes_red_dot","0"),this.getLiveRoomPreviousPage=()=>{try{const{twoPrev:e}=JSON.parse((0,yi.St)(O.m8));return!(0,yi.St)(O.vN)&&e}catch(e){return!1}}}setHasAppliedPermission(e){return(0,yi.D$)(`go_live_permission_apply${e}`,"1")}getHasApplyPermissionBefore(e){return"1"===(0,yi.le)(`go_live_permission_apply${e}`,"0")}getHasCompleteSubscriptionGuide(){return"1"===(0,yi.le)("live_anchor_complete_subscription_guide","0")}setHasCompleteSubscriptionGuide(){return(0,yi.D$)("live_anchor_complete_subscription_guide","1")}getSubscriptionSubOnlyChat(){return"1"===(0,yi.le)("live_subscription_sub_only_chat","0")}setSubscriptionSubOnlyChat(e){return(0,yi.D$)("live_subscription_sub_only_chat",e?"1":"0")}get studioDownloadVisited(){return"1"===(0,yi.le)("studio_download_visited","0")}setStudioDownloadVisited(){return(0,yi.D$)("studio_download_visited","1")}getSharePlatform(e){const t=(0,yi.le)("webapp-share-platform");return t?JSON.parse(t)[e]:{}}setSharePlatform(e,t){return(0,yi.D$)("webapp-share-platform",JSON.stringify({[e]:t}))}sortSharePlatform(e,t){var i,o;const n=null!==(i=this.getSharePlatform(e))&&void 0!==i?i:{},a=null!==(o=n[t])&&void 0!==o?o:0;if(n[t]=a+1,a===Number.MAX_SAFE_INTEGER){const e=Object.keys(n).sort(((e,t)=>{var i,o;return(null!==(i=n[e])&&void 0!==i?i:0)-(null!==(o=n[t])&&void 0!==o?o:0)}));e.forEach(((e,t)=>{n[e]=t}))}this.setSharePlatform(e,n)}getLiveCreatorHubPopup(){return"0"===(0,yi.le)("webapp-live-creator-hub-popup","0")}setLiveCreatorHubPopup(e){return(0,yi.D$)("webapp-live-creator-hub-popup",e?"1":"0")}};oo=(0,m.__decorate)([(0,ae.G)()],oo);var no=i(80279),ao=i.n(no);const ro=Object.values(Ti.$J);function so(e){return ro.some((t=>ao()(t).test(e.replace(/\?(.*)/,""))))}var lo;!function(e){e.VideoLive="video_live",e.ThirdParty="third_party",e.Audio="audio",e.ScreenShare="screen_share",e.SocialLive="social_live",e.LiveStudio="live_studio"}(lo||(lo={}));var co=i(35167),po=i(21396);const uo="ls_golive_livecontent_othergame",go="ls_golive_livecontent_other";var mo=i(30626);let ho=class{constructor(e){this.fetch=e,this.checkRoomAlive=e=>this.fetch.get("/webcast/room/check_alive/",{query:e,baseUrlType:4}),this.getRoomInfo=e=>this.fetch.get("/webcast/room/info/",{query:e,baseUrlType:4}),this.getTopicTagsAndGameTags=()=>this.fetch.get("/webcast/room/hashtag/list/",{baseUrlType:4}),this.sendLiveChat=e=>this.fetch.post("/webcast/room/chat/",{query:e,baseUrlType:4,headers:{"Content-Type":mo.zv.FORM_ENCODE}}).pipe(Wi()),this.sendLiveEmoteChat=e=>this.fetch.post("/webcast/room/emote_chat/",{query:e,baseUrlType:4,headers:{"Content-Type":mo.zv.FORM_ENCODE}}).pipe(Wi())}};ho=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],ho);let _o=class extends pe.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.t=i,this.defaultState={roomTopics:[],roomGameTags:[],roomGameTopic:null,roomInfo:null,hotLiveRoomInfo:null,loadingState:{roomInfo:0,roomTopics:0}}}setRoomInfo(e,t){e.roomInfo=t}setHotLiveRoomInfo(e,t){e.hotLiveRoomInfo=t}setRoomTopicsAndGameTags(e,t){var i,o,n,a,r,s,l;e.roomTopics=null!==(n=null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.hashtag)||void 0===o?void 0:o.map((e=>Object.assign({id:0,title:"",image:{},namespace:0},e))))&&void 0!==n?n:[];const d={id:"0",show_name:(c=this.t)(go),short_name:c(go),full_name:c(go),game_category:[{game_type:0,title:""}]};var c;const p=function(e){return{id:"-1",show_name:e(uo),short_name:e(uo),full_name:e(uo),game_category:[{game_type:3,title:""},{game_type:2,title:""},{game_type:1,title:""}]}}(this.t);e.roomGameTags=(null!==(r=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.game_tag_list)&&void 0!==r?r:[]).concat([d,p]).map((e=>Object.assign(Object.assign({},e),{id:`${e.id}`}))),e.roomGameTopic=null!==(l=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.game_hashtag)&&void 0!==l?l:null}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}getRoomInfo(e){return e.pipe((0,Yi.w)((e=>this.service.getRoomInfo(e).pipe((0,Ki.b)((({status_code:e})=>{(0,eo.k)(e,[0])})),(0,Li.z)((({status_code:e,data:t})=>0!==e?Ei.E:(0,Ii.of)(this.getActions().setRoomInfo(t)))),(0,Ji.O)(this.getActions().setLoadingState({roomInfo:1})),(0,Xi.l)(this.getActions().setLoadingState({roomInfo:2})),(0,Ai.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ii.of)(this.getActions().setLoadingState({roomInfo:3})))))))))}getRoomTopics(e){return e.pipe((0,Yi.w)((()=>this.service.getTopicTagsAndGameTags().pipe((0,Li.z)((e=>(0,Ii.of)(this.getActions().setRoomTopicsAndGameTags(e)))),(0,Ji.O)(this.getActions().setLoadingState({roomTopics:1})),(0,Xi.l)(this.getActions().setLoadingState({roomTopics:2})),(0,Ai.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ii.of)(this.getActions().setLoadingState({roomTopics:3})))))))))}};var vo;(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"setRoomInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"setHotLiveRoomInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"setRoomTopicsAndGameTags",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"setLoadingState",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"getRoomInfo",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],_o.prototype,"getRoomTopics",null),_o=(0,m.__decorate)([(0,ge.Y)("Room"),(0,m.__param)(2,(0,co.t)(po.s)),(0,m.__metadata)("design:paramtypes",[ho,Mi,Function])],_o),function(e){e.StreamNotSupport="livesdk_stream_not_support",e.OptimizeStyleForCohost="livesdk_optimize_style_for_cohost"}(vo||(vo={}));let yo=class{constructor(e){this.service=e,this.handleStreamNotSupported=({roomId:e,streamData:t})=>{this.service.emitEvent("livesdk_stream_not_support",{count:1},{roomId:e,streamData:t})}}handleOptimizeStyleForCohost(e,t){const{uidsStr:i,needOptimize:o,successOptimize:n}=t;this.service.emitEvent("livesdk_optimize_style_for_cohost",{count:1},{uniqueId:e,uidsStr:i,needOptimize:String(o),successOptimize:String(n)})}};yo=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],yo);var bo,fo,xo=i(14379),ko=i.n(xo);!function(e){e[e.On=1]="On",e[e.Off=2]="Off"}(bo||(bo={})),function(e){e.LD="ld",e.SD="sd",e.HD="hd",e.HD60="hd_60",e.UHD="uhd",e.UHD60="uhd_60",e.ORIGIN="origin",e.AUTO="auto"}(fo||(fo={}));const wo={origin:"Original",uhd:"1080p",uhd_60:"1080p60",hd:"720p",hd_60:"720p60",sd:"540p",ld:"360p"};var So,jo,Co;!function(e){e.H264="h264",e.Bytevc1="bytevc1"}(So||(So={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.OBS=1]="OBS",e[e.MEDIA=2]="MEDIA",e[e.AUDIO=3]="AUDIO",e[e.SCREEN=4]="SCREEN",e[e.SOCIAL_LIVE=5]="SOCIAL_LIVE",e[e.STUDIO=6]="STUDIO"}(jo||(jo={})),function(e){e.Normal="normal",e.PoorConnection="poor_connection",e.Offline="offline"}(Co||(Co={}));const Po=Object.freeze(["auto","origin","uhd_60","uhd","hd_60","hd","sd","ld"]);function To(e){return"bytevc1"===e.VCodec}function Oo(e,t){const i=function(e){return e.map((e=>{var t;return{key:e.sdkKey,label:null!==(t=e.definition)&&void 0!==t?t:""}}))}(e).map((e=>e.key)),o=function(e,t){return e.find((e=>e.sdkKey===t))}(e,t&&i.includes(t)?t:i[0]);return o||(console.error(`[stream] getMainStream: no stream found by ${t}`),null)}let Lo=class extends pe.D{constructor(e,t){super(),this.liveStreamSlardar=e,this.appContext=t,this.defaultState={streamId:"",streamItems:[],isSupportDefinition:!1,currentDefinitionKey:"auto",abrDefinitionLabel:"",abrDefinitionKey:void 0,abrBitrate:0,networkStatus:"normal",canUpdateActiveStream:!0,isFatal:!1}}setStreamId(e,t){e.streamId=t}setNetworkStatus(e,t){e.networkStatus=t}setStreamInfo(e,t){e.streamItems=t}clearStreamInfo(e){e.streamItems=[],e.abrDefinitionLabel="",e.currentDefinitionKey="auto",e.isSupportDefinition=!1,e.isFatal=!1}setActiveStream(e,t){const{key:i,url:o}=t;e.streamItems=e.streamItems.map((e=>Object.assign(Object.assign({},e),{isActive:i===e.sdkKey,activeUrl:o})))}setSupportDefinition(e,t){e.isSupportDefinition=t}setCurrentDefinitionKey(e,t){e.currentDefinitionKey=t}setAbrDefinitionLabel(e,t){e.abrDefinitionLabel=t}setAbrDefinitionKey(e,t){e.abrDefinitionKey=t}setAbrBitrate(e,t){e.abrBitrate=t}setIsFatal(e,t){e.isFatal=t}updateAbrDefinition(e){return e.pipe((0,Li.z)((e=>{var t,i;return(0,Ii.of)(this.getActions().setAbrDefinitionLabel(null!==(t=null==e?void 0:e.definition)&&void 0!==t?t:""),this.getActions().setAbrDefinitionKey(null==e?void 0:e.sdkKey),this.getActions().setAbrBitrate(null!==(i=null==e?void 0:e.bitrate)&&void 0!==i?i:0))})))}updateDefinition(e){return e.pipe((0,he.M)(this.state$,this.appContext.state$),(0,Li.z)((([e,t,{appContext:i}])=>{var o,n,a;if("auto"===e)return(0,Ii.of)(this.getActions().setCurrentDefinitionKey(e));{const r=Oo(t.streamItems,e),s=(null==i?void 0:i.isIOS)?null!==(o=null==r?void 0:r.url.mainHLS)&&void 0!==o?o:"":null!==(n=null==r?void 0:r.url.mainFLV)&&void 0!==n?n:"",l={key:null!==(a=null==r?void 0:r.sdkKey)&&void 0!==a?a:"",url:s};return(0,Ii.of)(this.getActions().setCurrentDefinitionKey(e),this.getActions().setActiveStream(l),this.getActions().updateAbrDefinition(r))}})))}updateDefinitionByBitrate(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{const i=(o=t.streamItems,n=e,o.find((e=>e.bitrate===n)));var o,n;return(null==i?void 0:i.sdkKey)?(0,Ii.of)(this.getActions().updateAbrDefinition(i)):Ei.E})))}getDefaultStreamConfig(e,t){var i,o,n,a,r,s,l,d,c,p,u,g,m,h,_;const{streamData:v,notSupportData:y}=function(e){var t,i,o,n,a,r;try{const s={common:{},data:{}},l={},d=e?JSON.parse(null!==(n=null===(o=null===(i=null===(t=e.stream_url)||void 0===t?void 0:t.live_core_sdk_data)||void 0===i?void 0:i.pull_data)||void 0===o?void 0:o.stream_data)&&void 0!==n?n:""):{};if(s.common=d.common,d.data)for(const e in d.data){if(d.data[e].main){const t=JSON.parse(d.data[e].main.sdk_params);To(t)?(l[e]={},l[e].main=d.data[e].main):(s.data[e]={},s.data[e].main=d.data[e].main,s.data[e].main.sdk_params=t)}if(d.data[e].backup){const t=JSON.parse(d.data[e].backup.sdk_params);To(t)?(l[e]=null!==(a=l[e])&&void 0!==a?a:{},l[e].backup=d.data[e].backup):(s.data[e]=null!==(r=s.data[e])&&void 0!==r?r:{},s.data[e].backup=d.data[e].backup,s.data[e].backup.sdk_params=t)}}return{streamData:s,notSupportData:l}}catch(e){return{streamData:{},notSupportData:{}}}}(e),b=function(e){return ko()(e,(e=>Po.indexOf(e.sdkKey)))}((f=v,x=null!==(r=null===(a=null===(n=null===(o=null===(i=e.stream_url)||void 0===i?void 0:i.live_core_sdk_data)||void 0===o?void 0:o.pull_data)||void 0===n?void 0:n.options)||void 0===a?void 0:a.qualities)&&void 0!==r?r:[],Object.keys(f.data).map((e=>{var t,i,o,n;const a=f.data[e],r=null!==(i=null===(t=x.find((t=>t.sdk_key===e)))||void 0===t?void 0:t.name)&&void 0!==i?i:wo[e];let s=a.main.sdk_params.vbitrate;return"origin"===e&&(s=2e6),{sdkKey:e,definition:r,bitrate:s,url:{mainFLV:a.main.flv,mainHLS:a.main.hls,backupFLV:null===(o=a.backup)||void 0===o?void 0:o.flv,backupHLS:null===(n=a.backup)||void 0===n?void 0:n.hls},activeUrl:"",isActive:!1,pullFailedCount:0}}))));var f,x;Object.keys(y).length&&this.liveStreamSlardar.handleStreamNotSupported({roomId:null!==(s=e.id_str)&&void 0!==s?s:"",streamData:JSON.stringify(y)});const k=!!(null==e?void 0:e.live_room_mode)&&[1,4,6].includes(e.live_room_mode),w=Oo(b,null!==(g=null===(u=null===(p=null===(c=null===(d=null===(l=e.stream_url)||void 0===l?void 0:l.live_core_sdk_data)||void 0===d?void 0:d.pull_data)||void 0===c?void 0:c.options)||void 0===p?void 0:p.default_quality)||void 0===u?void 0:u.sdk_key)&&void 0!==g?g:b[0].sdkKey);return{streamItems:b,isSupportDefinition:k,definitionKey:"auto",defaultActiveStream:w,activeSdkKey:null!==(m=null==w?void 0:w.sdkKey)&&void 0!==m?m:"",activeStreamUrl:t?null!==(h=null==w?void 0:w.url.mainHLS)&&void 0!==h?h:"":null!==(_=null==w?void 0:w.url.mainFLV)&&void 0!==_?_:""}}updateRoomStream(e){return e.pipe((0,he.M)(this.appContext.state$),(0,Li.z)((([e,t])=>{var i,o;const{isSupportDefinition:n,streamItems:a,activeSdkKey:r,definitionKey:s,defaultActiveStream:l,activeStreamUrl:d}=this.getDefaultStreamConfig(e.roomInfo,Boolean(null===(i=t.appContext)||void 0===i?void 0:i.isIOS)),c=!e.roomInfo.id_str||e.roomInfo.id_str!==this.state.streamId,p=[this.getActions().setStreamId(null!==(o=e.roomInfo.id_str)&&void 0!==o?o:""),this.getActions().setIsFatal(!1),this.getActions().setCurrentDefinitionKey(s),this.getActions().setSupportDefinition(n),this.getActions().setStreamInfo(a)];return c?(0,Ii.of)(...p,this.getActions().updateAbrDefinition(l),this.getActions().setActiveStream({key:r,url:d})):(0,Ii.of)(...p)})))}changeAvailableStream(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{const i=t.streamItems.map((e=>e.isActive?Object.assign(Object.assign({},e),{pullFailedCount:e.pullFailedCount+1}):e)),o="auto"===t.currentDefinitionKey,n=[],a=function(e){let t=0;const i=function(e){return e.reduce(((e,t)=>(e.push(t.url.mainFLV),e.push(t.url.mainHLS),t.url.backupFLV&&e.push(t.url.backupFLV),t.url.backupHLS&&e.push(t.url.backupHLS),e)),[])}(e).length;let o;const n=4*(2*e.length<i?2:1);for(;!o&&t<n;)o=e.find((e=>e.pullFailedCount===t)),t++;if(o){const t=function(e,t){var i,o;let n=e.url.mainFLV;switch(t){case 1:n=null!==(i=e.url.backupFLV)&&void 0!==i?i:e.url.mainHLS;break;case 2:n=e.url.backupFLV?e.url.mainHLS:e.url.mainFLV;break;case 3:n=null!==(o=e.url.backupHLS)&&void 0!==o?o:e.url.mainHLS;break;default:n=e.url.mainFLV}return n}(o,o.pullFailedCount%4);return function(e,t,i){return e.map((e=>Object.assign(Object.assign({},e),{isActive:t===e.sdkKey,activeUrl:i})))}(e,o.sdkKey,t)}return e.map((e=>Object.assign(Object.assign({},e),{isActive:!1})))}(i),r=a.find((e=>e.isActive));return r?o?n.push(this.getActions().updateAbrDefinition(r)):n.push(this.getActions().setCurrentDefinitionKey(r.sdkKey)):t.streamItems.length>0&&n.push(this.getActions().setIsFatal(!0)),(0,Ii.of)(this.getActions().setStreamInfo(a),...n)})))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setStreamId",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setNetworkStatus",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Array]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setStreamInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"clearStreamInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setActiveStream",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setSupportDefinition",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setCurrentDefinitionKey",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setAbrDefinitionLabel",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setAbrDefinitionKey",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setAbrBitrate",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"setIsFatal",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"updateAbrDefinition",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"updateDefinition",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"updateDefinitionByBitrate",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",me.y)],Lo.prototype,"updateRoomStream",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Lo.prototype,"changeAvailableStream",null),Lo=(0,m.__decorate)([(0,ge.Y)("Stream"),(0,m.__metadata)("design:paramtypes",[yo,K.G])],Lo);let Io=class{constructor(e){this.fetch=e,this.getCreateInfo=()=>this.fetch.get("/webcast/room/create_info/",{query:{aid:O.CO},baseUrlType:5}),this.updateScreenshotStatus=e=>this.fetch.post("/webcast/room/screenshot_cover/update/",{query:e,baseUrlType:5,headers:{"Content-Type":mo.zv.FORM_ENCODE}}),this.createRoom=e=>this.fetch.post("/webcast/room/create/",{query:e,baseUrlType:5,headers:{"Content-Type":mo.zv.FORM_ENCODE}}).pipe(Wi((e=>[4003035,20063].includes(e)))),this.endLive=()=>this.fetch.post("/webcast/room/finish_abnormal/",{baseUrlType:5}),this.setTopicTag=e=>this.fetch.post("/webcast/room/hashtag/set/",{query:e,baseUrlType:4,headers:{"Content-Type":mo.zv.FORM_ENCODE}}),this.uploadImage=e=>{const t=new FormData;return t.append("image",e),this.fetch.post("/webcast/room/upload/image/",{body:t,omitContentType:!0,baseUrlType:5})},this.getEndLiveInfo=e=>this.fetch.get("/webcast/data/data_center/room_stats/",{query:e,baseUrlType:5}),this.getLastBanRecord=e=>this.fetch.get("/webcast/review/get_latest_ban_record/",{query:Object.assign(Object.assign({},e),{ban_type:2}),baseUrlType:5})}};Io=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],Io);let Ao=class extends pe.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.roomModule=t,this.roomService=i,this.streamModule=o,this.slardar=n,this.storage=a,this.defaultState={liveStatus:0,roomCreateInfo:null,showSuicidePrevention:!1,showAppealModal:!1,roomStats:null,isTempPermission:!1,streamKey:"",streamKeyExpiration:io,loadingState:{createRoomInfo:0,roomCreateInfo:0,OBSAccessRecallInfo:0}}}setLiveStatus(e,t){e.liveStatus=t}setIsTempPermission(e,t){e.isTempPermission=t}setRoomCreateInfo(e,t){e.roomCreateInfo=t}setRoomStatsData(e,t){e.roomStats=t}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}setSuicidePrevention(e,t){e.showSuicidePrevention=t}setStreamKey(e,t){e.streamKey=t.streamKey,e.streamKeyExpiration=t.expiration}setAppealVisible(e,t){e.showAppealModal=t}getCreateRoomInfo(e){return e.pipe((0,Yi.w)((e=>{const{shouldGetRoomInfo:t}=e;return this.service.getCreateInfo().pipe((0,Ki.b)((({status_code:e})=>{(0,eo.k)(e,[0])})),(0,Li.z)((({data:e,status_code:i})=>{if(0!==i)return this.slardar.handleGetCreateRoomInfoFail({errorCode:i.toString(),errorMessage:""}),this.slardar.handleTraceError({errorCode:"1002",errorMessage:`status_code: ${i}`}),Ei.E;const{last_room_id_str:o,live_status:n,ban_status:a}=e,r=!(null==a?void 0:a.is_ban),s=[2,1,3].includes(n);var l;return r&&t&&(l=n,Fi()(l)&&(1===l?Bi():zi())),r&&s&&t?this.roomService.getRoomInfo({is_anchor:!0,room_id:o}).pipe((0,Li.z)((({data:t})=>(this.slardar.handleGetCreateRoomInfoSuccess(),(0,Ii.of)(this.getActions().setRoomCreateInfo(e),...this.setRoomInfo(t),this.getActions().setLiveStatus(n)))))):(0,Ii.of)(this.getActions().setRoomCreateInfo(e),this.getActions().setLiveStatus(n))})),(0,Ji.O)(this.getActions().setLoadingState({roomCreateInfo:1})),(0,Xi.l)(this.getActions().setLoadingState({roomCreateInfo:2})),(0,Ai.K)((e=>(this.slardar.reportGoLiveError(e),this.slardar.handleTraceError({errorCode:"1002",errorMessage:e.message}),this.slardar.handleGetCreateRoomInfoFail({errorCode:"-1",errorMessage:e.message}),(0,Ii.of)(this.getActions().setLoadingState({roomCreateInfo:3}))))))})))}createRoomInfo(e){return e.pipe((0,he.M)(this.roomModule.state$),(0,Li.z)((([e,t])=>this.service.createRoom(e).pipe((0,Li.z)((({data:i,status_code:o})=>{var n,a;if(o&&0!==o)switch(o){case 2403:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ii.of)(this.getActions().setSuicidePrevention(!0),this.getActions().setLoadingState({createRoomInfo:3}));case 10018:case 4003035:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ii.of)(this.getActions().setLiveStatus(-1),this.getActions().setLoadingState({createRoomInfo:3}));case 50004:case 20063:case 30009:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ii.of)(this.getActions().setLoadingState({createRoomInfo:3}));case 4003105:return i.prompts&&Zt.h.open({content:i.prompts,duration:3}),this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ii.of)(this.getActions().setLoadingState({createRoomInfo:3}));default:throw new Error(`status_code: ${o}`)}this.slardar.handleCreateRoomSuccess(),Bi(),this.slardar.handleTraceSuccess();const r=t.roomGameTags.find((t=>t.id===e.game_tag_id));return s={anchor_id:null===(n=i.owner)||void 0===n?void 0:n.id_str,room_id:i.id_str,live_type:(null==i?void 0:i.live_type_third_party)?"third_party":"video_live",game_label:null==r?void 0:r.show_name,game_label_id:null==r?void 0:r.id,choose_hashtag_id:e.hashtag_id,choose_hashtag_name:null===(a=t.roomTopics.find((t=>t.id===e.hashtag_id)))||void 0===a?void 0:a.title,cover_type:1===e.screenshot_cover_status?"screen_shot":"user_upload"},re.W.event("livesdk_live_take",Object.assign({live_type:"third_party",send_gift_type:"open",event_type:"click",is_active_fans_show:0,show_active_user_ucnt:0,event_page:"live_take_button",game_label:s.game_label,game_label_id:s.game_label_id},s)),(0,Ii.of)(...this.setRoomInfo(i),this.getActions().setLiveStatus(1),this.getActions().setLoadingState({createRoomInfo:2}));var s})),(0,Ji.O)(this.getActions().setLoadingState({createRoomInfo:1})),(0,Ai.K)((e=>(this.slardar.handleTraceError({errorCode:"1003",errorMessage:e.message}),this.slardar.handleCreateRoomFail({errorCode:"-1",errorMessage:e.message}),(0,Ii.of)(this.getActions().setLoadingState({createRoomInfo:3})))))))))}setRoomInfo(e){const t=[],[,i]=function(e){if(e){const t=e.lastIndexOf("/");return[e.substr(0,t),e.substr(t+1)]}return[]}(function(e){var t,i;const o=null==e?void 0:e.stream_url,n=null===(t=null==o?void 0:o.push_urls)||void 0===t?void 0:t[0];return null!==(i=null!=n?n:null==o?void 0:o.rtmp_push_url)&&void 0!==i?i:""}(e));if(i&&e.id_str){let o=i;const{streamKey:n,expiration:a}=this.storage.getGoLiveStreamKeyInfo(o,e.id_str);o!==n?o=n:this.storage.setGoLiveStreamKeyInfo(o,e.id_str),t.push(this.getActions().setStreamKey({streamKey:o,expiration:a}))}return t.push(this.roomModule.getActions().setRoomInfo(e)),t.push(this.streamModule.getActions().updateRoomStream({roomInfo:e,forceUpdate:!0})),t}endLive(e){return e.pipe((0,Li.z)((()=>this.service.endLive().pipe((0,Li.z)((()=>(this.slardar.handleEndLiveSuccess(),(0,Ii.of)(this.getActions().setLiveStatus(4),this.streamModule.getActions().setStreamInfo([]))))),(0,Ai.K)((e=>(this.slardar.handleEndLiveFail(),this.slardar.reportGoLiveError(e),Ei.E)))))))}setTopicTag(e){return e.pipe((0,Yi.w)((e=>this.service.setTopicTag(e).pipe((0,_e.U)((()=>this.noop())),(0,Ai.K)((e=>(this.slardar.reportGoLiveError(e),Ei.E)))))))}getRoomStatsData(e){return e.pipe((0,Li.z)((e=>this.service.getEndLiveInfo({room_id:e}).pipe((0,Ki.b)((({status_code:e})=>{(0,eo.k)(e,[0])})),(0,Li.z)((({data:e})=>(0,Ii.of)(this.getActions().setRoomStatsData(e.room_stats)))),(0,Ai.K)((e=>(this.slardar.reportGoLiveError(e),Ei.E)))))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setLiveStatus",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setIsTempPermission",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setRoomCreateInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setRoomStatsData",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setLoadingState",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setSuicidePrevention",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setStreamKey",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setAppealVisible",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"getCreateRoomInfo",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"createRoomInfo",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"endLive",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"setTopicTag",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Ao.prototype,"getRoomStatsData",null),Ao=(0,m.__decorate)([(0,ge.Y)("GoLive"),(0,m.__metadata)("design:paramtypes",[Io,_o,ho,Lo,Ui,oo])],Ao);var Eo,Mo=i(96942),Ro=i.n(Mo),Fo=i(87608),Do=i(56785),Bo=i(84834);!function(e){e.EnterFollowingTab="enter_following_tab",e.LoginEntranceShow="login_entrance_show",e.LoginEntranceClick="login_entrance_click",e.DownloadAppNotify="download_app_notify",e.DownloadAppConfirm="download_app_confirm",e.DownloadAppDismiss="download_app_dismiss"}(Eo||(Eo={}));const zo=e=>{re.W.event("enter_following_tab",e)};var No;!function(e){e.Logo="click_logo",e.Click="click_navigation_bar",e.ClickHamburgerMenu="click_hamburger_menu"}(No||(No={}));const Uo=e=>{re.W.event("click_navigation_bar",e)};var Wo=i(24878),qo=i(88650),Go=i(63092),Ho=i(11838),Zo=i(75131),$o=i(43683),Vo=i(28626),Qo=i(75546);const Yo=(0,Vo.Z)("div",{target:"e797se20"})((({theme:e})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",":hover":{textDecoration:"none"}},(0,de.VZ)({theme:e})]),"label:DivUserLinkContainer;"),Ko=(0,Vo.Z)(Qo.k,{target:"e797se22"})((({isSmall:e=!1})=>[({theme:{direction:t}})=>[(0,de.YJ)({direction:t,marginEnd:e?"6px":"12px"}),(0,de.f1)({max:1071,style:(0,de.YJ)({direction:t,marginStart:"2px",marginEnd:"0"})})],{flex:"0 0 48px"}]),"label:StyledUserAvatar;"),Jo=(0,Vo.Z)(Ho.D,{target:"e797se24"})([{flexGrow:1,height:"32px",":hover":{textDecoration:"none"}},(0,de.f1)({max:1071,style:{display:"none"}})],"label:StyledUserContentLink;"),Xo=(de.wj,(0,Vo.Z)("div",{target:"e797se26"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivUserTitleWrapper;")),en=(0,Vo.Z)("h4",{target:"e797se27"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),de.wj,"label:H4UserTitle;"),tn=(0,Vo.Z)("p",{target:"e797se29"})((({theme:e})=>[(0,de.GI)({theme:e,fontWeight:"normal",typography:"P4",fontFamily:"Proxima",color:"TextSecondary"}),{lineHeight:"15px",maxWidth:"260px"}]),de.wj,"label:PUserDesc;"),on=(0,Vo.Z)("div",{target:"e797se213"})((({theme:{direction:e}})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",height:"48px"},(0,de.f1)({max:1071,style:[{justifyContent:"center",width:"48px",height:"48px",marginBottom:"0",padding:"0 8px",borderRadius:"4px"},(0,de.YJ)({direction:e,marginStart:"2px"})]})]),"label:DivUserSkeletonContainerV2;"),nn=(0,Vo.Z)("div",{target:"e797se214"})((({theme:{direction:e}})=>[{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"48px"},(0,de.YJ)({direction:e,marginStart:"12px"}),(0,de.f1)({max:1071,style:{display:"none"}})]),"label:DivSkeletonTitleGroup;"),an=(0,j.memo)((0,j.forwardRef)((function(e,t){const{uniqueId:i,e2ePrefix:n="",style:a,enterMethod:r="click_panel"}=e,s=(0,V.mp)(Wo.z,{selector:e=>{const t=e.users[i];if(!t)return null;const{verified:o,avatarThumb:n,secUid:a,nickname:r,roomId:s,id:l,relation:d}=t;return{avatarThumb:n,secUid:a,verified:o,nickname:r,roomId:s,id:l,uniqueId:i,relation:d}},dependencies:[i]}),{secUid:l,verified:d,nickname:c,relation:p}=(0,J.m7)(s),u=(0,qo.zW)(s),{isShowLive:g}=u,m=g?Go.G:Ho.D,h=(0,j.useRef)(null);(0,j.useImperativeHandle)(t,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=h.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0},get offsetLeft(){var e,t;return null!==(t=null===(e=h.current)||void 0===e?void 0:e.offsetLeft)&&void 0!==t?t:0}})),[]),(0,qo.TB)({isShowLive:g,autoReport:!0,once:!0,enterMethod:"suggested_others_photo",reportTrigger:g,reportValidator:()=>void 0!==p,user:s});const _=(0,qo.CN)({user:s,enterMethod:r}),{isInVideoFeedRedesign:v}=(0,T.y7)(),{isDetailPageCoverQuantityTestGroup:y}=(0,T.t1)(),{isInNewVideoDetail:b}=(0,T.xy)(),f=v||y||b,x=(0,j.useMemo)((()=>f?{maxWidth:"145px"}:{}),[f]),k=(0,j.useCallback)((()=>{Zo.W.handleEnterUser({to_user_id:null==s?void 0:s.id,enter_method:r}),Uo({target:g?"live_detail":"others_homepage"})}),[g,null==s?void 0:s.id,r]);return(0,o.jsxs)(Yo,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:h,onClick:k,style:a},{children:[(0,o.jsx)(m,Object.assign({uniqueId:i,secUid:l,teaParams:_,"data-e2e":`${n}-user-avatar`,onClick:yi.UW},{children:(0,o.jsx)(Ko,Object.assign({liveTheme:6,size:32},u,{isShowLiveTag:!1}),void 0)}),void 0),(0,o.jsxs)(Jo,Object.assign({uniqueId:i,secUid:l,teaParams:_,onClick:yi.UW},{children:[(0,o.jsxs)(Xo,{children:[(0,o.jsx)(en,Object.assign({style:x,"data-e2e":`${n}-user-title`},{children:i}),void 0),d&&(0,o.jsx)("div",Object.assign({"data-e2e":`${n}-user-bluev`},{children:(0,o.jsx)($o.Q,{width:14,height:14},void 0)}),void 0)]},void 0),(0,o.jsx)(tn,Object.assign({style:x,"data-e2e":`${n}-user-desc`},{children:c}),void 0)]}),void 0)]}),void 0)})));var rn=i(9578);const sn=(0,j.memo)((function(){return(0,o.jsxs)(on,{children:[(0,o.jsx)(rn.Od.Avatar,{style:{width:32,height:32}},void 0),(0,o.jsxs)(nn,{children:[(0,o.jsx)(rn.Od.Title,{style:{width:107,height:12}},void 0),(0,o.jsx)(rn.Od.Title,{style:{width:66,height:12}},void 0)]},void 0)]},void 0)}));var ln=i(97953);const dn=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),cn=(0,Vo.Z)("div",{target:"e4a681b0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),dn({color:t.LineSecondary}),(0,de.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivUserContainer;"),pn=(0,Vo.Z)("p",{target:"e4a681b1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,de.GI)({theme:e,typography:"P3"}),(0,de.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),un=(0,Vo.Z)("div",{target:"e4a681b2"})((({isAtBottom:e=!0,theme:{direction:t}})=>[{display:"flex",flexDirection:"row",alignItems:"center",padding:"0 8px",marginTop:"8px",cursor:"pointer"},e?null:[{position:"absolute",top:"8px"},(0,de.YJ)({direction:t,end:"0"})],(0,de.f1)({max:1071,style:{display:"none"}})]),"label:DivShowMoreTextContainer;");un.defaultProps=Object.assign(Object.assign({},un.defaultProps),{"data-e2e":"see-all"});const gn=(0,Vo.Z)("p",{target:"e4a681b3"})((({theme:e})=>(0,de.GI)({theme:e,color:"Primary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"})),"label:PShowMoreText;"),mn=(0,Vo.Z)(ln.Z,{target:"e4a681b4"})((({up:e,theme:{direction:t}})=>[(0,de.YJ)({direction:t,marginStart:"4px"}),{transition:"all 0.3s",transform:e?"rotate(180deg)":"none",display:"none"}]),"label:StyledArrowDown;"),hn=(0,Vo.Z)("p",{target:"e4a681b5"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{padding:"0 8px"},(0,de.f1)({max:1071,style:{display:"none"}})]),"label:PFollowEmptyHint;"),_n=(0,j.forwardRef)((function({title:e,listType:t,loading:i=!0,children:n},a){const r=(0,V.mp)(Fo.G,{selector:e=>0===e[t].list.length,dependencies:[t]});return(0,o.jsxs)(cn,Object.assign({bottomBar:"following"===t,ref:a},{children:[(0,o.jsx)(pn,Object.assign({"data-e2e":`${t}-accounts`},{children:e}),void 0),r&&i?Array(1).fill("").map(((e,t)=>(0,o.jsx)(sn,{},t))):n]}),void 0)})),vn=(0,j.memo)((0,j.forwardRef)((function(e,t){var i;const n=(0,a.u)(),r=(0,ni.Q)(),{abTestVersion:s}=null!==(i=(0,ne.L)((()=>["abTestVersion"]),[]))&&void 0!==i?i:{},[l,c]=(0,j.useState)(!1),[p,u]=(0,j.useState)(!1),g=10,[{authorIdList:m,loading:h,hasMore:_,totalLength:v},y]=(0,V.b7)(Fo.G,{selector:e=>{const{list:t,loading:i,maxCursor:o}=e.following;return{authorIdList:l?t:t.slice(0,g),loading:i,hasMore:-1!==o,totalLength:t.length}},dependencies:[l],equalFn:(e,t)=>Ro()(e,t)});(0,j.useImperativeHandle)(t,(()=>({handleHitBottom:d()})),[]);const{needRefresh:b,setPathname:f,pathname:x}=wi();(0,j.useEffect)((()=>{b&&y.getFollowingList({count:g}),f(x)}),[y,b,g]);const{setPlaying:k}=(0,V.qj)(Do.x),w=(0,Ci.x)(s,"em_follow_p2_test"),S="v1"===w||"v3"===w,C=(0,j.useCallback)((()=>{if(!S)return u(!0),k(!1),void zo({enter_method:"click_following_panel"});_&&l||c(!l),_&&y.getFollowingList({count:g}),!l||(_||!l)&&Uo({target:"see_more"})}),[y,_,l,g,S,k]),{shouldShowToggle:P,showMoreText:T}=(({hasMore:e,isShowingMore:t,totalLength:i,showNum:o,loading:n})=>{const a=(0,ni.Q)();return{shouldShowToggle:Boolean(i)&&(e&&!t||!e&&i>o||!n),showMoreText:a(e||!t?"feed_caption_see_more":"see_less")}})({hasMore:_,isShowingMore:l,totalLength:v,showNum:g,loading:h}),O=r("desktop_logged_in_profile"),L=(0,j.useCallback)((()=>{u(!1),k(!0)}),[k]);return(0,o.jsxs)(_n,Object.assign({loading:h,listType:"following",title:O},{children:[v?m.map((e=>e?(0,o.jsx)(an,{uniqueId:e,e2ePrefix:"following",enterMethod:"click_navigation"},e):null)):(0,o.jsx)(hn,{children:r("sidenav_follow_hint")},void 0),h&&S?(0,o.jsx)("div",Object.assign({style:{marginTop:"4px"}},{children:(0,o.jsx)(sn,{},void 0)}),void 0):null,P&&(0,o.jsxs)(un,Object.assign({isAtBottom:S,onClick:C,"data-e2e":"following-see-all"},{children:[(0,o.jsx)(gn,{children:S?T:r("feed_caption_see_more")},void 0),S&&(0,o.jsx)(mn,{fill:n.colors.Primary,width:16,height:16,up:l},void 0)]}),void 0),(0,o.jsx)(Bo.U,{visible:p,type:"following",onClose:L},void 0)]}),void 0)})));var yn=i(49167);const bn=(0,j.memo)((function(e){var t;const{onEnterItem:i,onLeaveItem:n}=e,{abTestVersion:a}=null!==(t=(0,ne.L)((()=>["abTestVersion"]),[]))&&void 0!==t?t:{},r=(0,ni.Q)(),{pathname:s}=(0,P.TH)(),l=(0,V.mp)(yn.R,{selector:e=>e.uniqueId,dependencies:[]}),d=(0,V.mp)(Wo.z,{selector:e=>e.users[null!=l?l:""],dependencies:[l]}),c=(0,j.useRef)(""),[p,u]=(0,j.useState)(!1),[g,m]=(0,j.useState)(!1),[{list:h,totalLength:_},v]=(0,V.b7)(Fo.G,{selector:e=>{const{list:t}=e.suggest;return{list:t,totalLength:t.length}},dependencies:[p]}),{needRefresh:y,setPathname:b}=wi();(0,j.useEffect)((()=>{var e;(0,Re.bf)(s)?c.current!==(null==d?void 0:d.id)&&d&&(c.current=null!==(e=d.id)&&void 0!==e?e:"",v.getRecommendList({pathname:s,userId:null==d?void 0:d.id})):(c.current="-1",y&&v.getRecommendList({pathname:s})),b(s)}),[v,y,s,b,d]);const{setPlaying:f}=(0,V.qj)(Do.x),x=(0,Ci.x)(a,"em_follow_p2_test"),k="v1"===x||"v3"===x,w=("v3"===x||"v4"===x)&&(0,Re.bf)(s),S=(0,j.useCallback)((()=>{if(!k)return m(!0),f(!1),void zo({enter_method:"click_suggested_panel"});u(!p),!p&&Uo({target:"see_more"})}),[p,k,f]),C=(0,j.useRef)([]),T=(0,j.useRef)(null),O=(0,j.useCallback)((e=>t=>{C.current[e]=t}),[]),L=(0,j.useCallback)(((e,t)=>()=>{var o,n,a,r;null==i||i(e,(null!==(n=null===(o=C.current[t])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)+(null!==(r=null===(a=T.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0),0)}),[i]),I=(0,j.useCallback)((e=>()=>{null==n||n(e)}),[n]),A=(0,j.useCallback)((()=>{m(!1),f(!0)}),[f]),E=(({pathname:e,user:t})=>{var i;const{user:o}=null!==(i=(0,ne.L)((()=>["user"]),[]))&&void 0!==i?i:{};return!((0,Re.BL)(e)||(0,Re.ws)(e)||(0,Re.Dj)(e)||(0,Re.FZ)(e)&&!o||(0,Re.bf)(e)&&((null==t?void 0:t.secret)||void 0!==t&&(null==t?void 0:t.uniqueId)===(null==o?void 0:o.uniqueId)))})({pathname:s,user:d});return!E||w?null:(0,o.jsxs)(_n,Object.assign({ref:T,listType:"suggest",title:r("sug_accounts")},{children:[h.map(((e,t)=>e?(0,o.jsx)(an,{ref:O(t),onMouseEnter:L(e,t),onMouseLeave:I(e),uniqueId:e,e2ePrefix:"suggest",style:!p&&t>=5?{display:"none"}:void 0,enterMethod:"click_panel"},e):null)),_>5&&(0,o.jsx)(un,Object.assign({isAtBottom:k,isRecommend:!0,onClick:S},{children:(0,o.jsx)(gn,Object.assign({"data-e2e":"suggest-see-all"},{children:r(k&&p?"see_less":"see_all")}),void 0)}),void 0),(0,o.jsx)(Bo.U,{visible:g,type:"suggest",onClose:A},void 0)]}),void 0)}));var fn;!function(e){e.DiscoverLinkShow="discover_link_show",e.ClickDiscoverLink="click_discover_link"}(fn||(fn={}));let xn=class{constructor(e){this.fetch=e}getDiscoverList(e){return this.fetch.get("/node/share/discover/list",{query:{pageType:e}}).pipe((0,_e.U)((e=>e.body.discoverList)))}};xn=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],xn);let kn=class extends pe.D{constructor(e){super(),this.service=e,this.defaultState={list:[],loading:!1}}setList(e,t){const{list:i}=t;e.list=i}setLoading(e,t){const{loading:i}=t;e.loading=i}getDiscoverList(e){return e.pipe((0,ve.z)((({pageType:e})=>this.service.getDiscoverList(e).pipe((0,Ki.b)((e=>{e.forEach(((e,t)=>{const{type:i,title:o,isInternalLink:n}=e;var a;a={link_type:i,order:t,content:o,is_experiment:n?1:0},re.W.event("discover_link_show",a)}))})),(0,_e.U)((e=>this.getActions().setList({list:e}))),(0,Ji.O)(this.getActions().setLoading({loading:!0})),(0,Xi.l)(this.getActions().setLoading({loading:!1}),this.terminate()),(0,ye.n)({})))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],kn.prototype,"setList",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],kn.prototype,"setLoading",null),(0,m.__decorate)([(0,ue.Qm)({payloadGetter:1}),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kn.prototype,"getDiscoverList",null),kn=(0,m.__decorate)([(0,ge.Y)("DiscoverList"),(0,m.__metadata)("design:paramtypes",[xn])],kn);var wn=i(3624),Sn=i(65598),jn=i(63155),Cn=i(43756),Pn=i(17492),Tn=i(77107);const On=(0,wn.F4)({"0%":{transform:"translateX(-240px)"},"100%":{transform:"translateX(328px)"}}),Ln=(0,Vo.Z)("div",{target:"eikhr9j0"})((({theme:{colors:e}})=>({overflow:"hidden",width:"208px",height:"24px",marginBottom:"12px",borderRadius:"12px",background:e.BGPlaceholderOpaque})),"label:DivDiscoverSkeletonItem;"),In=(0,Vo.Z)("div",{target:"eikhr9j1"})({width:"120px",height:"24px",background:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .06) 50.52%, rgba(22, 24, 35, 0) 100%)",animation:`${On} 1.5s cubic-bezier(0, 0, 1, 1) infinite`},"label:DivLinearGradient;"),An=(0,Vo.Z)("div",{target:"eikhr9j2"})((({theme:{colors:e}})=>[{position:"relative",boxSizing:"border-box",width:"100%",padding:"16px 8px 8px 8px","::after":{content:'""',position:"absolute",top:"0",width:"calc(100% - 16px)",height:"1px",background:e.LineSecondary,transform:"scaleY(.5)"}},(0,de.f1)({max:1071,style:{display:"none"}})]),"label:DivDiscoverContainer;"),En=(0,Vo.Z)("p",{target:"eikhr9j3"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{paddingBottom:"16px"}]),"label:PDiscoverTitle;");En.defaultProps=Object.assign(Object.assign({},En.defaultProps),{"data-e2e":"nav-discover-title"});const Mn=(0,Vo.Z)("div",{target:"eikhr9j4"})({display:"flex",flexWrap:"wrap",width:"100%"},"label:DivDiscoverListContainer;");Mn.defaultProps=Object.assign(Object.assign({},Mn.defaultProps),{"data-e2e":"nav-discover-list"});const Rn={display:"block",width:"fit-content",maxWidth:"100%",":hover":{textDecoration:"none"}},Fn=(0,Vo.Z)(Sn.rU,{target:"eikhr9j5"})(Rn,"label:StyledLink;");Fn.defaultProps=Object.assign(Object.assign({},Fn.defaultProps),{"data-e2e":"nav-discover-href"});const Dn=(0,Vo.Z)(Tn.v,{target:"eikhr9j6"})(Rn,"label:StyledTmpLink;");Dn.defaultProps=Object.assign(Object.assign({},Dn.defaultProps),{"data-e2e":"nav-discover-href"});const Bn=(0,Vo.Z)("div",{target:"eikhr9j7"})((({theme:e,theme:{colors:t,direction:i}})=>[{display:"flex",boxSizing:"border-box",width:"fit-content",maxWidth:"100%",height:"24px",marginBottom:"12px",padding:"3px 10px",border:`1px solid ${t.LinePrimary}`,borderRadius:"12px",background:t.BGSecondary2},(0,de.VZ)({theme:e}),(0,de.YJ)({direction:i,marginEnd:"8px"})]),"label:DivDiscoverItemContainer;"),zn=(0,Vo.Z)(jn.Z,{target:"eikhr9j9"})({flexShrink:0},"label:StyledNumber;"),Nn=(0,Vo.Z)(Cn.Z,{target:"eikhr9j10"})({flexShrink:0},"label:StyledMusicNote;"),Un=(0,Vo.Z)(Pn.Z,{target:"eikhr9j11"})({flexShrink:0},"label:StyledMagnifyingGlass;"),Wn=(0,Vo.Z)("p",{target:"eikhr9j12"})(de.wj,(({theme:e,theme:{direction:t}})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"18px"},(0,de.YJ)({direction:t,paddingStart:"6px"})]),"label:PText;"),qn=function(){var e;const t=(0,ni.Q)(),{pathname:i}=(0,P.TH)(),{language:n}=null!==(e=(0,ne.L)((()=>["language"]),[]))&&void 0!==e?e:{},[{list:a,loading:r},s]=(0,V.b7)(kn,{selector:e=>{const{list:t,loading:i}=e;return{list:t,loading:i}},dependencies:[]}),{needRefresh:l,setPathname:d}=wi();(0,j.useEffect)((()=>{const e=(0,Re.C2)(i);l&&s.getDiscoverList({pageType:e}),d(i)}),[s,i]);const c=(0,j.useCallback)(((e,t)=>()=>{const{type:i,title:o,isInternalLink:n}=e;switch(a={link_type:i,order:t,content:o,is_experiment:n?1:0},re.W.event("click_discover_link",a),i){case 3:Zo.W.handleEnterTagDetail({enter_method:"discover"});break;case 4:Zo.W.handleEnterMusicDetail({enter_method:"discover"});break;default:Zo.W.handleDiscoveryPage({enter_method:"discover"})}var a}),[]);return!r&&a.length<4?null:(0,o.jsxs)(An,{children:[(0,o.jsx)(En,{children:t("Discover")},void 0),r?(0,o.jsxs)("div",{children:[(0,o.jsx)(Ln,{children:(0,o.jsx)(In,{},void 0)},void 0),(0,o.jsx)(Ln,{children:(0,o.jsx)(In,{},void 0)},void 0)]},void 0):(0,o.jsx)(Mn,{children:a.map(((e,t)=>{const{type:i,title:a}=e;let{link:r}=e,s=null;switch(r=`${r.replace("https://www.tiktok.com","")}?lang=${n}`,i){case 3:s=(0,o.jsx)(zn,{width:16,height:16},void 0);break;case 4:s=(0,o.jsx)(Nn,{width:16,height:16},void 0);break;default:s=(0,o.jsx)(Un,{width:16,height:16},void 0)}return(0,o.jsx)(Dn,Object.assign({to:r,onClick:c(e,t)},{children:(0,o.jsxs)(Bn,{children:[s,(0,o.jsx)(Wn,{children:a},void 0)]},void 0)}),t)}))},void 0)]},void 0)};var Gn=i(39973),Hn=i(84475);const Zn=(0,Vo.Z)("div",{target:"el3hfgg0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",paddingTop:"16px","::before":{content:'""',position:"absolute",left:"8px",right:"8px",top:0,height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,de.YJ)({direction:t,paddingStart:"8px"}),(0,de.f1)({max:1071,style:{display:"none"}})]),"label:DivFooterContainer;"),$n=(0,Vo.Z)("div",{target:"el3hfgg1"})({marginBottom:"8px"},"label:DivLinkContainer;"),Vn=e=>[(0,de.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P4",isLink:!0}),{display:"inline-block",marginRight:"6px",marginTop:"5px"}],Qn=(0,Vo.Z)("span",{target:"el3hfgg2"})((({theme:e})=>Vn(e)),"label:SpanCopyright;");Qn.defaultProps=Object.assign(Object.assign({},Qn.defaultProps),{"data-e2e":"copyright"});const Yn=(0,Vo.Z)(Tn.v,{target:"el3hfgg3"})((({theme:e})=>Vn(e)),"label:StyledNavLink;"),Kn=(0,Vo.Z)("div",{target:"el3hfgg4"})({marginBottom:"8px",position:"relative"},"label:DivMoreContainer;"),Jn=(0,Vo.Z)("span",{target:"el3hfgg5"})((({theme:e})=>Vn(e)),{cursor:"pointer"},"label:SpanMoreText;");Jn.defaultProps=Object.assign(Object.assign({},Jn.defaultProps),{"data-e2e":"more-link"});const Xn=(0,Vo.Z)("div",{target:"el3hfgg6"})({padding:"15px 16px 20px",width:"fit-content",maxWidth:"200px"},"label:DivMorePopupWrapper;"),ea=(0,Vo.Z)(Tn.v,{target:"el3hfgg7"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{display:"block",":hover":{textDecoration:"none",color:e.colors.Primary},"& + &":{marginTop:"20px"}}]),"label:StyledMoreLink;"),ta=(0,j.memo)((function({navList:e,translateText:t=!1,e2e:i}){const n=(0,ni.Q)();return(0,o.jsx)($n,{children:e.map((e=>(0,o.jsx)(Yn,Object.assign({forceSSR:!0,to:e.href,"data-e2e":i,target:"_blank"},{children:t?n(e.title):e.title}),e.href)))},void 0)}));var ia;!function(e){e.Sidebar="sidebar",e.Footer="footer"}(ia||(ia={}));const oa="copyright-policy",na=[{title:"terms",key:"terms-of-service",href:""},{title:"privacy",key:"privacy-policy-row",href:""},{title:"copyright",key:"copyright-policy",href:""}];function aa(e){var t;return null!==(t=null==e?void 0:e.children.filter((({placements:e=[]})=>0===e.length||e.includes("sidebar"))))&&void 0!==t?t:[]}const ra=(0,j.memo)((function({lang:e}){const t=(0,ni.Q)(),{active:i,handleMouseEnter:n,handleMouseLeave:a}=(0,Gn.R)(),{navList:r=[],$legalList:s,region:l}=(0,V.mp)(K.G,{selector:e=>{var i,o,n,a;return{$legalList:null===(o=null===(i=e.appContext)||void 0===i?void 0:i.navList.find((({title:e})=>e===t("Legal"))))||void 0===o?void 0:o.children,navList:null===(n=e.appContext)||void 0===n?void 0:n.navList,region:null===(a=e.appContext)||void 0===a?void 0:a.region}},dependencies:[]}),{pageList:d,programList:c,legalList:p}=(0,j.useMemo)((()=>{const t=[{title:"help",key:"help-center",href:`https://support.tiktok.com/${e}`},{title:"safety",key:"safety-center",href:`https://www.tiktok.com/safety?lang=${e}`},...na.reduce(((t,i)=>{var o;const n=(null!=s?s:[]).map((({key:e})=>e)).indexOf(i.key);return i.key===oa&&(t.push({title:"Creator Portal",key:"create-portal",href:"https://www.tiktok.com/creators/creator-portal/en-us/"}),t.push({title:"Community Guidelines",key:"community-guidelines",href:`https://www.tiktok.com/community-guidelines?lang=${e}`})),n>=0&&t.push(Object.assign(Object.assign({},i),{href:null!==(o=null==s?void 0:s[n].href)&&void 0!==o?o:""})),t}),[])],i=aa(r[0]),o=aa(r[1]);return o.splice(3,0,{href:`https://www.tiktok.com/transparency?lang=${e}`,key:"transparency",title:"Transparency"}),{pageList:i,programList:o,legalList:t}}),[s,e,r]),u=`${(new Date).getFullYear()} TikTok`,g=(null!=s?s:[]).filter((e=>-1===p.findIndex((({key:t})=>t===e.key))||e.key===oa));return"DE"===(null==l?void 0:l.trim().toUpperCase())&&g.splice(3,0,{href:"https://www.tiktok.com/transparency/de-de/netzdg/",key:"netzdg",title:"NetzDG"}),"AT"===(null==l?void 0:l.trim().toUpperCase())&&g.push({href:"https://www.tiktok.com/transparency/de-de/koplg-about/",key:"kopig",title:"KoPi-G"}),(0,o.jsxs)(Zn,{children:[(0,o.jsx)(ta,{navList:d,e2e:"page-link"},void 0),(0,o.jsx)(ta,{navList:c,e2e:"program-link"},void 0),(0,o.jsx)(ta,{translateText:!0,navList:p,e2e:"legal-link"},void 0),g.length>0&&(0,o.jsx)(Kn,{children:(0,o.jsxs)(Jn,Object.assign({onMouseEnter:n,onMouseLeave:a},{children:[t("more"),(0,o.jsx)(Hn.G,Object.assign({active:i,placement:"topLeft",verticalOffset:5},{children:(0,o.jsx)(Xn,{children:g.map((({title:e,href:t})=>(0,o.jsx)(ea,Object.assign({forceSSR:!0,to:t,target:"_blank"},{children:e}),e)))},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsxs)(Qn,{children:[" ",u]},void 0)]},void 0)}));var sa=i(23588);const la="https://livecenter.tiktok.com",da="=+~#$@",ca={"[]":/\[([^[\]]+)\]/g,"{}":/\{([^{}]*)\}/g,"%s":/%s/g},pa=({text:e,matchArr:t,replaceComponents:i})=>{const[n,a]=(0,j.useState)([]);return(0,j.useEffect)((()=>{let n=[];const r=[],s=ca[t];let l=e;l=e.replace(s,((...e)=>(r.push(e[1]),da))),n=l.split(da);const d=[];n.forEach(((e,t)=>{if(d.push(e),r.length>t&&i.length>0){const e=i[t%i.length];d.push((0,o.jsx)(e,{text:r[t],matchIndex:t},t))}})),a(d)}),[e,t,i]),(0,o.jsx)(o.Fragment,{children:n},void 0)};var ua,ga,ma,ha,_a,va=i(70040);function ya(){return ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ya.apply(this,arguments)}const ba=function(e){return j.createElement("svg",ya({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 84 81",width:"1em",height:"1em"},e),ua||(ua=j.createElement("path",{fill:"white",d:"M36.802 9.019c2.308-4.005 8.088-4.005 10.396 0l31.117 53.985c2.305 4-.582 8.996-5.199 8.996H10.884c-4.617 0-7.504-4.996-5.199-8.996L36.802 9.019z"})),ga||(ga=j.createElement("path",{fill:"url(#video-warning_svg__paint0_linear_1104_6141)",d:"M38.522 10.121c1.534-2.699 5.422-2.699 6.956 0l30.627 53.903C77.62 66.69 75.694 70 72.627 70H11.373c-3.067 0-4.993-3.31-3.478-5.976l30.627-53.903z"})),ma||(ma=j.createElement("path",{fill:"white",d:"M38.5 28a1 1 0 011-1h4a1 1 0 011 1v23a1 1 0 01-1 1h-4a1 1 0 01-1-1V28z"})),ha||(ha=j.createElement("circle",{cx:41.5,cy:59,r:3,fill:"white"})),_a||(_a=j.createElement("defs",null,j.createElement("linearGradient",{id:"video-warning_svg__paint0_linear_1104_6141",x1:33.5,x2:64,y1:20.5,y2:67,gradientUnits:"userSpaceOnUse"},j.createElement("stop",{stopColor:"#FF796B"}),j.createElement("stop",{offset:1,stopColor:"#FF4C3A"})))))},fa=(0,va.Z)("div",{target:"e1m9td0x0"})({width:400,display:"flex",flexDirection:"column",alignItems:"center",padding:"36px 19px 32px 19px"},"label:DivContainer;"),xa=(0,va.Z)(ba,{target:"e1m9td0x1"})([{width:83,height:81,marginBottom:24}],"label:StyledVideoWarningIcon;"),ka=(0,va.Z)("div",{target:"e1m9td0x2"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"TextPrimary"}),{textAlign:"center",marginBottom:24}]),"label:DivContent;"),wa=(0,va.Z)("div",{target:"e1m9td0x3"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"TextTertiary"}),{marginBottom:24}]),"label:DivTips;"),Sa=(0,va.Z)("span",{target:"e1m9td0x4"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"Primary"}),{marginBottom:24}]),"label:SpanTipsHighlight;"),ja=(0,va.Z)(bt.W,{target:"e1m9td0x5"})((({theme:e,theme:{colors:t}})=>[(0,de.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"ConstTextInverse",fontWeight:"semiBold"}),{padding:"12px auto",textAlign:"center",width:"100%",backgroundColor:t.Primary,":hover":{backgroundColor:t.Primary}}]),"label:StyledButton;"),Ca=function({onOkClick:e,visible:t,duration:i}){const n=(0,ni.Q)(),a=(0,j.useMemo)((()=>[({text:e})=>(0,o.jsx)(Sa,{children:e},void 0)]),[]);return(0,o.jsx)(Tt.u_,Object.assign({visible:t,maskClosable:!1},{children:(0,o.jsxs)(fa,{children:[(0,o.jsx)(xa,{},void 0),(0,o.jsx)(ka,{children:n("pm_mt_obs_revoke_desc")},void 0),(0,o.jsx)(wa,{children:(0,o.jsx)(pa,{text:n("pm_mt_revoke_duration",{num:i,number:i}).replace("%s",i),matchArr:"%s",replaceComponents:a},void 0)},void 0),(0,o.jsx)(ja,Object.assign({type:"submit",onClick:e},{children:n("pm_mt_modal_revoke_confirm_btn")}),void 0)]},void 0)}),void 0)};var Pa=i(88671);const Ta=(0,Vo.Z)("div",{target:"enmnmya0"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"normal"}),{display:"none",position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:"#4b4b4b"},(0,de.f1)({max:1071,style:{display:"block"}})]),"label:DivNavHintContainer;"),Oa=function({text:e,active:t,containerRef:i,scrollRef:n}){const{transform:r}=function({containerRef:e,scrollRef:t}){const{direction:i}=(0,a.u)(),[o,n]=(0,j.useState)(-1e3),[r,s]=(0,j.useState)(-1e3),l=()=>{var t,o;if(!e.current)return;const a=e.current.getBoundingClientRect();s(null!==(t="ltr"===i?a.left+a.width+12:a.left-12)&&void 0!==t?t:0),n(null!==(o=a.top+a.height/2)&&void 0!==o?o:0)},d=(0,Pa.fB)(l,[e,i],200),c=(0,j.useCallback)(l,[e,i]);return(0,j.useEffect)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.dom;return window.addEventListener("resize",d),null==i||i.addEventListener("scroll",c),window.addEventListener("recalculate-tip-position",c),d(),()=>{window.removeEventListener("resize",d),window.removeEventListener("recalculate-tip-position",c),null==i||i.removeEventListener("scroll",c)}}),[e,d,c,t]),{top:o,left:r,transform:`translate(${"ltr"===i?"0":"-100%"}, -50%) translate(${r}px, ${o}px)`}}({containerRef:i,scrollRef:n});return t?(0,c.createPortal)((0,o.jsx)(Ta,Object.assign({style:{transform:r}},{children:e}),void 0),document.body):null},La=(0,Vo.Z)("div",{target:"e1k5k7j00"})((({theme:{colors:e,direction:t}})=>[{padding:"8px",position:"relative","::before":{content:'""',position:"absolute",left:"8px",top:"0px",right:"8px",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,de.f1)({max:1071,style:{[`${Ea}`]:{display:"none"},[`${Ra}`]:[(0,de.YJ)({direction:t,marginEnd:"0"})]}})]),"label:DivGoLiveEntranceContainer;"),Ia=(0,Vo.Z)(Tn.v,{target:"e1k5k7j01"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,de.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:StyledLink;"),Aa=(0,Vo.Z)("div",{target:"e1k5k7j02"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,de.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:DivText;"),Ea=(0,Vo.Z)("span",{target:"e1k5k7j03"})((({theme:{colors:e},isLiveStreaming:t,isDisabled:i})=>({color:i?e.TextQuaternary:t?e.Primary:e.TextPrimary})),"label:SpanText;"),Ma=[(0,wn.F4)({"0%":{y:"4px",height:"10px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"10px"}}),(0,wn.F4)({"0%":{y:"4px",height:"6px"},"40%":{y:"4px",height:"10px"},"70%":{y:"4px",height:"12px"},"100%":{y:"4px",height:"6px"}}),(0,wn.F4)({"0%":{y:"4px",height:"8px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"8px"}})],Ra=(0,Vo.Z)("svg",{target:"e1k5k7j04"})((({isLiveStreaming:e,theme:{direction:t}})=>[(0,de.YJ)({direction:t,marginEnd:"4px"}),e?{rect:{transformOrigin:"center",transform:"rotateZ(180deg)",":nth-of-type(1)":{animation:`${Ma[0]} .5s ease-out infinite`},":nth-of-type(2)":{animation:`${Ma[1]} .5s ease-out infinite`},":nth-of-type(3)":{animation:`${Ma[2]} .5s ease-out infinite`}}}:null]),"label:SvgLiveIcon;"),Fa=(0,j.memo)((function({isLiveStreaming:e,isDisabled:t}){const{colors:i}=(0,a.u)(),n=t?i.TextQuaternary:e?i.Primary:i.Primary2;return(0,o.jsxs)(Ra,Object.assign({isLiveStreaming:!t&&e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,o.jsx)("rect",{x:"4.1665",y:"4.16797",width:"2.69231",height:"11.6667",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"8.65381",y:"9.02734",width:"2.69231",height:"6.80555",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"13.1406",y:"7.08594",width:"2.69231",height:"8.75",rx:"0.5",fill:n},void 0)]}),void 0)})),Da=function({scrollRef:e}){var t,i,n,a;const r=(0,ni.Q)(),[s,l]=(0,j.useState)(!1),[d,c]=(0,j.useState)(!1),p=function(){const{liveStatus:e}=(0,V.mp)(Ao);return[1,2,3].includes(e)}(),{permissionInfo:u}=(0,V.mp)(Gi),{roomCreateInfo:g}=(0,V.mp)(Ao),{pathname:m}=(0,P.TH)(),h=1===Number(null===(t=null==g?void 0:g.obs_accees_recall_info)||void 0===t?void 0:t.status),_=(v=Number(null===(i=null==g?void 0:g.obs_accees_recall_info)||void 0===i?void 0:i.duration),parseInt((v/86400).toString())||1).toString();var v;const{user:y,lang:b,abTestVersion:f}=(0,V.mp)(K.G,{dependencies:[],selector:({appContext:e,lang:t})=>{var i,o,n;return{user:{uniqueId:null===(i=null==e?void 0:e.user)||void 0===i?void 0:i.uniqueId,secUid:null===(o=null==e?void 0:e.user)||void 0===o?void 0:o.secUid,uid:null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.uid},lang:t,abTestVersion:null==e?void 0:e.abTestVersion}}}),x=(0,te.fz)(sa.yB),k=r(h?"go_live":p?"live_on_status":"go_live"),w=(0,j.useRef)(null),S=(0,j.useCallback)((()=>{var e;if(!p&&!h){const t=(0,yi.le)(O.AH);x.handleLiveStreamEntranceClick({anchor_id:null!==(e=y.uid)&&void 0!==e?e:"",is_notified:t?0:1,is_application_needed:(null==u?void 0:u.hasLiveApplyPermission)?1:0})}h&&l(!0),(0,yi.D$)(O.AH,JSON.stringify({name:y.uniqueId}))}),[p,x,y.uid,y.uniqueId,null==u?void 0:u.hasLiveApplyPermission,h]),C=(0,j.useCallback)((()=>{c(!0)}),[]),T=(0,j.useCallback)((()=>{c(!1)}),[]),L=null!==(a="v2"===(null!==(n=(0,Ci.x)(f,"live_golive_entrance"))&&void 0!==n?n:"v1"))&&void 0!==a&&a,I=L?`${la}/producer`:Ti.$J.liveGoLive,A=(0,be.stringifyUrl)({url:I,query:{lang:b}}),E=!L&&so(m),M=(0,j.useMemo)((()=>h?(0,o.jsxs)(Aa,Object.assign({onClick:S},{children:[(0,o.jsx)(Fa,{isDisabled:!0,isLiveStreaming:p},void 0),(0,o.jsx)(Ea,Object.assign({isLiveStreaming:p,"data-e2e":"go-live-entrance-text",isDisabled:!0},{children:k}),void 0)]}),void 0):(0,o.jsxs)(Ia,Object.assign({forceSSR:!E,to:A,onClick:S},{children:[(0,o.jsx)(Fa,{isDisabled:!1,isLiveStreaming:p},void 0),(0,o.jsx)(Ea,Object.assign({isLiveStreaming:p,"data-e2e":"go-live-entrance-text",isDisabled:!1},{children:k}),void 0)]}),void 0)),[h,E,A,p,S,k]),R=(0,j.useCallback)((()=>l(!1)),[]);return(0,j.useEffect)((()=>{var e,t;s&&(t={anchor_id:null!==(e=y.uid)&&void 0!==e?e:""},re.W.event("livesdk_obs_revoke_remind",t))}),[s,y.uid]),(0,o.jsxs)(La,Object.assign({ref:w,onMouseEnter:C,onMouseLeave:T,"data-e2e":"go-live-entrance"},{children:[M,(0,o.jsx)(Oa,{active:d,text:k,scrollRef:e,containerRef:w},void 0),(0,o.jsx)(Ca,{visible:s,onOkClick:R,duration:_},void 0)]}),void 0)};var Ba=i(51302);const za=(0,Vo.Z)("div",{target:"efna91q0"})([{position:"relative",padding:"20px 8px 24px 8px",margin:"0","::before":{content:'""',position:"absolute",height:"1px",left:"8px",right:"8px",background:"rgba(22, 24, 35, .12)",transform:"scaleY(.5)",top:"0"}},(0,de.f1)({max:1071,style:{display:"none"}})],"label:DivFrameContainer;"),Na=(0,Vo.Z)("p",{target:"efna91q1"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"TextTertiary"})),"label:PLoginHint;");Na.defaultProps=Object.assign(Object.assign({},Na.defaultProps),{"data-e2e":"nav-login-tip"});const Ua=(0,Vo.Z)(bt.W,{target:"efna91q2"})({marginTop:"20px",width:"100%"},"label:StyledLogin;");Ua.defaultProps=Object.assign(Object.assign({},Ua.defaultProps),{"data-e2e":"nav-login-button"});const Wa=function(){const e=(0,ni.Q)(),t=(0,V.qj)($t.r),i=(0,j.useCallback)((()=>{t.openModal({query:{enter_method:"click_navigation",enter_from:re.W.commonParams.page_name,redirect_url:(0,Ba.AY)()}}),Uo({target:"login"})}),[t]);return(0,o.jsxs)(za,{children:[(0,o.jsx)(Na,{children:e("sidenav_login_cta")},void 0),(0,o.jsx)(Ua,Object.assign({buttonTheme:"line",onClick:i},{children:e("Log In")}),void 0)]},void 0)};var qa,Ga=i(25147),Ha=i(90594),Za=i(40308),$a=i(15632),Va=i(48499),Qa=i(83922),Ya=i(74472),Ka=i(21137);function Ja(){const{canShowliveEntry:e}=function(){const e=(0,ne.L)((()=>["user","liveSuggestConfig","abTestVersion"]),[]),t=function(){var e;const{botType:t}=null!==(e=(0,ne.L)((()=>["botType"]),[]))&&void 0!==e?e:{};return"others"!==t}();return(0,j.useMemo)((()=>{var i,o,n;const a=null!==(i=(0,Ci.x)(null==e?void 0:e.abTestVersion,"live_detail_non_logged_in_entry"))&&void 0!==i?i:"v1",r=null===(o=null==e?void 0:e.liveSuggestConfig)||void 0===o?void 0:o.isBlockedArea,s=null===(n=null==e?void 0:e.liveSuggestConfig)||void 0===n?void 0:n.isRiskArea,l=Boolean(null==e?void 0:e.user),d=Boolean(!l&&"v1"===a),c=Boolean(!l&&"v2"===a),p=Boolean(!l&&"v3"===a),u=Boolean(!l&&s);if(t)return{canShowliveEntry:!0,canLoadFeed:!0,canEnterRoom:!0};if(r)return{canShowliveEntry:!1,canLoadFeed:!1,canEnterRoom:!1};if(u)return{canShowliveEntry:!0,canLoadFeed:!1,canEnterRoom:!1};const g=l||t||d;return{canShowliveEntry:!c,canLoadFeed:g||p,canEnterRoom:g}}),[t,e])}();return e}i(88008),function(e){e.Show="livesdk_live_tab_show"}(qa||(qa={}));var Xa=i(44798),er=i(75036);const tr=(0,Vo.Z)(er.w,{target:"e14l9ebt0"})((({extraTop:e=0,extraWidth:t,theme:{colors:i,direction:o}})=>[{top:de.Mz+e,bottom:"0",width:`${null!=t?t:356}px`,background:i.BGPrimary,position:"fixed",zIndex:99},(0,de.YJ)({direction:o,paddingEnd:"8px"}),(0,de.f1)({max:1071,style:{padding:"0 8px",width:"72px",flex:"0 0 72px",borderRight:`1px solid ${i.LineSecondary}`,boxShadow:`0px 2px 8px ${i.ShadowSecondary}`}})]),"label:StyledScroll;"),ir=(0,Vo.Z)("div",{target:"e14l9ebt1"})((({transStatus:e,extraWidth:t})=>{const i=e===Xa.d0||e===Xa.Ix;return[{position:"relative",width:`${null!=t?t:356}px`,flex:`0 0 ${null!=t?t:356}px`},(0,de.f1)({max:767,style:{zIndex:99,[`${tr}`]:[null,i?{transition:"all 0.3s"}:null]}}),(0,de.f1)({max:1071,style:{width:"72px",flex:"0 0 72px"}})]}),"label:DivSideNavContainer;"),or=(0,Vo.Z)("div",{target:"e14l9ebt2"})((({theme:{direction:e}})=>[{flexShrink:0,padding:"20px 0 26px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:"100%"},(0,de.YJ)({direction:e,paddingStart:"8px"}),(0,de.f1)({max:1071,style:{padding:"12px 0 26px"}})]),"label:DivWrapper;"),nr=({theme:e})=>[{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"8px",boxSizing:"border-box",borderRadius:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},(0,de.VZ)({theme:e}),(0,de.f1)({max:1071,style:{justifyContent:"center"}})],ar=(0,Vo.Z)(Tn.v,{target:"e14l9ebt5"})(nr,"label:StyledTmpLink;"),rr=(0,Vo.Z)("div",{target:"e14l9ebt6"})({flex:"1 1 0px"},"label:DivPlaceholder;"),sr=(0,Vo.Z)("h2",{target:"e14l9ebt7"})((({active:e,theme:t,theme:{direction:i}})=>[(0,de.GI)({theme:t,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",lineHeight:"32px",color:e?"Primary":"Primary2"}),(0,de.YJ)({direction:i,marginStart:"8px"}),(0,de.f1)({max:1071,style:{display:"none"}})]),"label:H2MainNavText;"),lr=(0,Vo.Z)("div",{target:"e14l9ebt8"})([{marginBottom:"8px",padding:"0"},(0,de.f1)({max:1071,style:{padding:"0"}})],"label:DivMainNavContainer;"),dr={path:"/",Icon:Ga.Z,ActiveIcon:Ha.Z,text:"for_you",teaReport:()=>{Uo({target:"trending"}),Zo.W.handleEnterTrending({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-foryou",disableAutoLang:!0}},cr={path:"/following",Icon:Za.Z,ActiveIcon:$a.Z,text:"Following",teaReport:()=>{Uo({target:"following"}),Zo.W.handleEnterFollowing({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-following",disableAutoLang:!1}},pr={path:"/live",Icon:Va.Z,ActiveIcon:Qa.Z,text:"LIVE",teaReport:()=>{Uo({target:"live"}),Zo.W.handleEnterLiveDiscover({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-live",disableAutoLang:!1}};function ur({currentPath:e,configPath:t}){return e===t}const gr=function(e){const{text:t,path:i,onClick:n,onLoad:r,onCheckActive:s=ur,Container:l=ar,Icon:d,ActiveIcon:c,linkProps:p,teaReport:u,scrollRef:g,forceSSR:m}=e,h=(0,ni.Q)(),{pathname:_}=(0,P.TH)(),{colors:v}=(0,a.u)(),[y,b]=(0,j.useState)(s({configPath:i,currentPath:_})),f=y?c:d,[x,k]=(0,j.useState)(!1),w=(0,j.useCallback)((e=>{u(),null==n||n(e)}),[n,u]);(0,j.useEffect)((()=>{b(s({configPath:i,currentPath:location.pathname}))}),[s,i,_]),(0,j.useEffect)((()=>{null==r||r()}),[r]);const S=(0,j.useRef)(null),C=(0,j.useCallback)((()=>{k(!0)}),[]),T=(0,j.useCallback)((()=>{k(!1)}),[]);return(0,o.jsx)("div",Object.assign({ref:S},{children:(0,o.jsxs)(l,Object.assign({to:i,onClick:w},p,{forceSSR:m,onMouseEnter:C,onMouseLeave:T},{children:[(0,o.jsx)(f,{fill:y?v.Primary:v.Primary2,width:32,height:32},void 0),(0,o.jsx)(sr,Object.assign({active:y},{children:h(t)}),void 0),(0,o.jsx)(Oa,{active:x,text:h(t),scrollRef:g,containerRef:S},void 0)]}),void 0)}),void 0)},mr=(0,j.memo)((function({scrollRef:e}){const t=Ja(),{pathname:i}=(0,P.TH)(),n=(0,V.qj)(Ya.h),[{enterForyou:a},{setEnterForyou:r}]=(0,V.b7)(Ka.e),{lang:s=""}=(0,V.mp)(K.G,{selector:({appContext:e})=>{const{language:t}=null!=e?e:{};return{lang:t}},dependencies:[]});(0,j.useEffect)((()=>{!(0,Re.oC)(i)&&r(!1)}),[r,i]);const l=(0,j.useCallback)((()=>a&&(0,Re.cQ)(i)||(0,Re.oC)(i)),[i,a]),d=(0,j.useCallback)((e=>{(0,Re.oC)(i)&&(e.preventDefault(),n.resetItemList({key:"foryou"}),n.getRecommendList({key:"foryou"}))}),[n,i]);dr.path=`/${s}`;const c=so(i),p=(0,j.useCallback)((()=>{re.W.event("livesdk_live_tab_show")}),[]);return(0,o.jsxs)(lr,{children:[(0,o.jsx)(gr,Object.assign({},dr,{scrollRef:e,onClick:d,onCheckActive:l}),void 0),(0,o.jsx)(gr,Object.assign({},cr,{scrollRef:e}),void 0),t&&(0,o.jsx)(gr,Object.assign({onLoad:p,forceSSR:!c,Container:ar,scrollRef:e},pr),void 0)]},void 0)}));var hr=i(94328),_r=i(53046);let vr=class extends pe.D{constructor(){super(...arguments),this.defaultState={profileUserId:null,itemOffset:0,offsetLeft:0}}setShowing(e,t){e.profileUserId=t.userId,t.itemOffset&&(e.itemOffset=t.itemOffset),t.offsetLeft&&(e.offsetLeft=t.offsetLeft)}itemEnter(e){return e.pipe((0,Yi.w)((({userId:e,itemOffset:t,offsetLeft:i,timeout:o})=>(0,hr.H)(o).pipe((0,_r.h)(this.getActions().setShowing({userId:e,itemOffset:t,offsetLeft:i}))))))}};var yr;function br(){return br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},br.apply(this,arguments)}(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],vr.prototype,"setShowing",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],vr.prototype,"itemEnter",null),vr=(0,m.__decorate)([(0,ge.Y)("SideNavigation")],vr);var fr,xr;function kr(){return kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},kr.apply(this,arguments)}var wr,Sr,jr;function Cr(){return Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Cr.apply(this,arguments)}var Pr,Tr,Or;function Lr(){return Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Lr.apply(this,arguments)}var Ir;function Ar(){return Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ar.apply(this,arguments)}var Er,Mr;function Rr(){return Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Rr.apply(this,arguments)}var Fr,Dr,Br,zr;function Nr(){return Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Nr.apply(this,arguments)}const Ur=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),Wr=(0,Vo.Z)("div",{target:"ehbc6qq0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),Ur({color:t.LineSecondary}),(0,de.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivTopicContainer;"),qr=(0,Vo.Z)("p",{target:"ehbc6qq1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,de.GI)({theme:e,typography:"P3"}),(0,de.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),Gr=(0,Vo.Z)(Sn.rU,{target:"ehbc6qq2"})([{padding:"4px 8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",marginTop:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},({theme:e})=>(0,de.VZ)({theme:e})],"label:StyledTopicItemLink;"),Hr=(0,Vo.Z)("h2",{target:"ehbc6qq3"})((({active:e,theme:t,theme:{direction:i}})=>[(0,de.GI)({theme:t,fontFamily:"Proxima",typography:"P2",color:e?"Primary":"Primary2"}),{height:"22px",lineHeight:"24px"},(0,de.YJ)({direction:i,marginStart:"10px"}),(0,de.f1)({max:1071,style:{display:"none"}})]),"label:H2TopicNavText;"),Zr=[{key:"topic_foryou_comedy",value:"comedy",Icon:function(e){return j.createElement("svg",Cr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),wr||(wr=j.createElement("path",{fillRule:"evenodd",d:"M24 38c6.29 0 11.45-4.84 11.959-11 .045-.55-.407-1-.959-1H13c-.552 0-1.004.45-.959 1 .508 6.16 5.668 11 11.959 11zm0-4a8 8 0 01-6.93-4h13.86A8 8 0 0124 34z",clipRule:"evenodd"})),Sr||(Sr=j.createElement("path",{d:"M18.376 20.059c.312.455.738.941 1.29.941H21c.552 0 1.01-.452.901-.994a5.002 5.002 0 00-9.802 0c-.11.542.349.994.901.994h1.333c.553 0 .979-.486 1.291-.941a1.665 1.665 0 012.752 0zM33.667 21c-.553 0-.979-.486-1.291-.941a1.665 1.665 0 00-2.752 0c-.312.455-.738.941-1.29.941H27c-.552 0-1.01-.452-.901-.994a5.002 5.002 0 019.802 0c.11.542-.349.994-.901.994h-1.333z"})),jr||(jr=j.createElement("path",{fillRule:"evenodd",d:"M44 24c0 11.046-8.954 20-20 20S4 35.046 4 24 12.954 4 24 4s20 8.954 20 20zm-4 0c0 8.837-7.163 16-16 16S8 32.837 8 24 15.163 8 24 8s16 7.163 16 16z",clipRule:"evenodd"})))}},{key:"topic_foryou_gaming",value:"gaming",Icon:function(e){return j.createElement("svg",Rr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Er||(Er=j.createElement("path",{d:"M17 14.5a1 1 0 011 1v2h2a1 1 0 011 1v2a1 1 0 01-1 1h-2v2a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2h-2a1 1 0 01-1-1v-2a1 1 0 011-1h2v-2a1 1 0 011-1h2zM33 17.5a2 2 0 114 0 2 2 0 01-4 0zM31 19.5a2 2 0 100 4 2 2 0 000-4z"})),Mr||(Mr=j.createElement("path",{fillRule:"evenodd",d:"M14 5.5c-5.523 0-10 4.477-10 10v19.369a7.631 7.631 0 0014.496 3.333l2.631-5.417a.2.2 0 01.18-.113h5.386a.2.2 0 01.18.113l2.63 5.417A7.631 7.631 0 0044 34.87V15.5c0-5.523-4.477-10-10-10H14zm-6 10a6 6 0 016-6h20a6 6 0 016 6v19.369a3.631 3.631 0 01-6.898 1.586l-2.631-5.418a4.2 4.2 0 00-3.778-2.365h-5.386a4.2 4.2 0 00-3.778 2.365l-2.631 5.418A3.632 3.632 0 018 34.869V15.5z",clipRule:"evenodd"})))}},{key:"topic_foryou_food",value:"food",Icon:function(e){return j.createElement("svg",Ar({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Ir||(Ir=j.createElement("path",{fillRule:"evenodd",d:"M32.573 31.34c-.029-.197-.06-.397-.092-.597-.35-2.196-.869-4.52-1.175-5.489a11.393 11.393 0 00-2.836-4.657 11.31 11.31 0 00-4.668-2.793c-.987-.301-3.444-.95-5.729-1.4a46.377 46.377 0 00-.49-.094L11.06 37.91l21.514-6.569zm11.167.414c-.058.388-.339.703-.713.817L5.672 43.977a.522.522 0 01-.649-.653L16.291 6.023c.112-.372.42-.652.8-.715 3.497-.578 7.081-.34 10.477.695a23.13 23.13 0 019.547 5.712 23.3 23.3 0 015.801 9.525 23.397 23.397 0 01.825 10.514zM26.016 10.47c-2.265-.691-4.117-1.07-5.955-1.06l-.827 2.91.459.096c2.157.456 4.322 1.03 5.332 1.338 2.412.736 4.61 2.05 6.403 3.831a15.628 15.628 0 013.892 6.39c.363 1.152.855 3.368 1.21 5.44l.026.158 2.82-.81c.102-1.968-.152-3.766-.802-5.826a19.063 19.063 0 00-4.747-7.794 18.926 18.926 0 00-7.811-4.673zm-9.223 15.98a2.097 2.097 0 012.977 0 2.124 2.124 0 010 2.993 2.097 2.097 0 01-2.977 0 2.124 2.124 0 010-2.992zm10.42 0a2.097 2.097 0 00-2.977 0 2.124 2.124 0 000 2.993 2.097 2.097 0 002.977 0 2.124 2.124 0 000-2.992z",clipRule:"evenodd"})))}},{key:"topic_foryou_dance",value:"dance",Icon:function(e){return j.createElement("svg",Lr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Pr||(Pr=j.createElement("path",{d:"M38.61 4.402c.032-.114.048-.171.06-.196a.368.368 0 01.66 0c.012.025.028.082.06.195l.032.114c.065.23.098.344.133.45.55 1.67 1.897 2.986 3.622 3.54.11.035.228.068.465.133.076.022.114.032.132.039a.344.344 0 010 .646 2.093 2.093 0 01-.132.039c-.236.065-.355.098-.465.134-1.725.553-3.072 1.869-3.622 3.538-.035.107-.068.221-.133.45l-.032.114v.001c-.032.113-.048.17-.06.195a.368.368 0 01-.66 0c-.012-.025-.028-.082-.06-.195l-.032-.114c-.065-.23-.098-.344-.133-.45-.55-1.67-1.897-2.986-3.622-3.54a12.93 12.93 0 00-.465-.133c-.076-.022-.114-.032-.132-.039a.344.344 0 010-.646c.018-.007.056-.017.132-.039.236-.065.355-.098.465-.134 1.725-.553 3.072-1.869 3.622-3.538.035-.107.068-.221.133-.45l.032-.114z"})),Tr||(Tr=j.createElement("path",{fillRule:"evenodd",d:"M24 44c-9.389 0-17-7.611-17-17 0-7.649 5.051-14.118 12-16.253V10a2 2 0 012-2h1V5a1 1 0 011-1h2a1 1 0 011 1v3h1a2 2 0 012 2v.747C35.949 12.882 41 19.351 41 27c0 9.389-7.611 17-17 17zm13.91-17c0 1.062-.12 2.097-.346 3.09H31.6a37.224 37.224 0 000-6.18h5.964c.226.993.345 2.028.345 3.09zm-9.413-3.09c.09.99.14 2.023.14 3.09 0 1.067-.05 2.1-.14 3.09h-8.994c-.09-.99-.14-2.023-.14-3.09 0-1.067.05-2.1.14-3.09h8.994zm2.704-3.092h5.262a13.958 13.958 0 00-7.478-6.807c.975 1.813 1.743 4.147 2.216 6.807zM24 13.091c.176 0 1.346.298 2.65 3.167.573 1.26 1.058 2.804 1.406 4.56h-8.112c.348-1.756.833-3.3 1.406-4.56 1.304-2.869 2.474-3.167 2.65-3.167zm-4.985.92c-.975 1.813-1.743 4.147-2.216 6.807h-5.262a13.958 13.958 0 017.478-6.807zm-2.216 19.17h-5.262a13.958 13.958 0 007.478 6.808c-.975-1.813-1.743-4.147-2.216-6.807zm12.186 6.808l.018-.032-.002.026-.016.006zm-.93-6.807c-.347 1.756-.832 3.3-1.405 4.56-1.304 2.869-2.474 3.167-2.65 3.167-.176 0-1.346-.298-2.65-3.167-.573-1.26-1.058-2.804-1.406-4.56h8.112z",clipRule:"evenodd"})),Or||(Or=j.createElement("path",{d:"M7.688 36.322c.026-.092.039-.137.048-.157a.294.294 0 01.528 0c.01.02.022.065.048.157l.026.09c.052.184.078.276.106.36.44 1.336 1.517 2.389 2.897 2.831.088.029.183.055.372.107h.001c.06.018.091.026.105.032a.275.275 0 010 .517l-.105.03h-.002c-.188.053-.283.08-.37.108-1.38.442-2.458 1.495-2.898 2.83a9.43 9.43 0 00-.106.36l-.026.091a1.601 1.601 0 01-.048.157.294.294 0 01-.528 0 1.601 1.601 0 01-.048-.157l-.026-.09a9.431 9.431 0 00-.106-.36c-.44-1.336-1.517-2.389-2.898-2.831a10.268 10.268 0 00-.372-.108l-.105-.03a.275.275 0 010-.517c.014-.006.044-.014.105-.031h.001c.189-.053.284-.08.371-.108 1.38-.442 2.458-1.495 2.898-2.83.028-.086.054-.177.106-.36l.026-.091z"})))}},{key:"topic_foryou_beauty",value:"beauty",Icon:function(e){return j.createElement("svg",kr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),fr||(fr=j.createElement("path",{fillRule:"evenodd",d:"M24.928 4.25a5.99 5.99 0 011.903.705l13.257 7.654a3.692 3.692 0 011.351 5.043.308.308 0 01-.42.113L30.027 11.42l-10.5 18.186 10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843-1.25 2.166L27.27 41.58a.308.308 0 01.113.42 3.692 3.692 0 01-5.044 1.352L9.08 35.699a5.99 5.99 0 01-2.9-6.294 5.99 5.99 0 01.704-1.902L18.635 7.15a5.99 5.99 0 016.293-2.9zM12.813 33.236l13.75-23.816-.866-.5a3 3 0 00-4.098 1.098l-10.75 18.62a3 3 0 001.098 4.098l.866.5z",clipRule:"evenodd"})),xr||(xr=j.createElement("path",{d:"M28.527 14.017l10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843 2-3.464zM36.128 25.89l-10.601-6.676-2 3.464L34.61 28.52a.5.5 0 00.666-.192l1.019-1.765a.5.5 0 00-.167-.673zM22.527 24.41l10.601 6.677a.5.5 0 01.167.673l-1.02 1.764a.5.5 0 01-.665.193l-11.083-5.843 2-3.464z"})))}},{key:"topic_foryou_animals",value:"animals",Icon:function(e){return j.createElement("svg",br({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),yr||(yr=j.createElement("path",{fillRule:"evenodd",d:"M18 18c3.038 0 5.5-3.134 5.5-7S21.038 4 18 4s-5.5 3.134-5.5 7 2.462 7 5.5 7zm.744-4.521c.4-.51.756-1.373.756-2.479s-.356-1.97-.756-2.478C18.349 8.019 18.056 8 18 8c-.056 0-.349.019-.744.522-.4.509-.756 1.372-.756 2.478s.356 1.97.756 2.479c.395.502.688.521.744.521.056 0 .349-.019.744-.521zM9.5 28c3.038 0 5.5-2.91 5.5-6.5S12.538 15 9.5 15 4 17.91 4 21.5 6.462 28 9.5 28zm.835-4.488c.358-.422.665-1.12.665-2.012 0-.892-.307-1.59-.665-2.012-.35-.414-.66-.488-.835-.488-.176 0-.486.074-.836.488C8.307 19.91 8 20.608 8 21.5c0 .892.307 1.59.664 2.012.35.414.66.488.836.488.176 0 .486-.074.835-.488zM35.5 11c0 3.866-2.462 7-5.5 7s-5.5-3.134-5.5-7 2.462-7 5.5-7 5.5 3.134 5.5 7zm-4 0c0 1.106-.356 1.97-.756 2.479-.395.502-.688.521-.744.521-.056 0-.349-.019-.744-.521-.4-.51-.756-1.373-.756-2.479s.356-1.97.756-2.478C29.651 8.019 29.944 8 30 8c.056 0 .349.019.744.522.4.509.756 1.372.756 2.478zM38.5 28c3.038 0 5.5-2.91 5.5-6.5S41.538 15 38.5 15 33 17.91 33 21.5s2.462 6.5 5.5 6.5zm.836-4.488c.357-.422.664-1.12.664-2.012 0-.892-.307-1.59-.664-2.012-.35-.414-.66-.488-.836-.488-.175 0-.486.074-.836.488-.357.422-.664 1.12-.664 2.012 0 .892.307 1.59.664 2.012.35.414.66.488.836.488.175 0 .486-.074.836-.488zM16.508 25.027c2.978-6.721 12.04-6.697 14.985.04l1.193 2.73a7.78 7.78 0 001.81 2.57C39.586 35.123 36.398 44 29.6 44H18.42c-6.802 0-10.005-8.87-4.93-13.65a7.799 7.799 0 001.777-2.521l1.241-2.802zM29.601 40H18.42c-1.44 0-2.613-.884-3.157-2.391-.548-1.518-.259-3.19.97-4.348a11.8 11.8 0 002.69-3.812l1.242-2.802c1.567-3.537 6.11-3.53 7.662.022l1.193 2.73a11.782 11.782 0 002.744 3.89c1.228 1.147 1.52 2.812.977 4.326-.54 1.504-1.707 2.385-3.14 2.385z",clipRule:"evenodd"})))}},{key:"topic_foryou_sports",value:"sports",Icon:function(e){return j.createElement("svg",Nr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em"},e),Fr||(Fr=j.createElement("mask",{id:"sports_svg__a"},j.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"}),j.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"}))),Dr||(Dr=j.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"})),Br||(Br=j.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"})),zr||(zr=j.createElement("path",{d:"M19.388 9.9l-2.475 3.143 3.63 2.858 2.31-4-3.465-2zm-2.266-1.407l-3.464-2-2.165 3.75 3.91 1.861 1.719-3.611zm6.732-6.326l3.464 2-3.465-2zm-.867-1.5v-4 4zm-7.02 0v4-4zm-.868.505l3.476 1.98-3.476-1.98zM11.586 7.34L8.11 5.36 4.58 11.562l7.133-.224-.126-3.998zm2.92.263l-.842 3.91 2.867.617 1.45-2.548-3.475-1.98zm2.43-4.268v-4h-2.325l-1.15 2.02 3.475 1.98zm3.165 0l3.464 2 3.464-6h-6.928v4zM6.883 8.461l1.697 3.622 3.945-1.85-2.178-3.772-3.464 2zM4.608 9.856l-3.464 2 2.296 3.976 3.624-2.819-2.456-3.157zm-.686-6.523v-4h-6.929l3.465 6 3.464-2zm3.164 0l3.476-1.98-1.15-2.02H7.085v4zm2.146 3.77L5.757 9.081l3.475 6.103 3.476-6.103-3.476-1.98zm1.535-2.695l3.476 1.98 1.127-1.98-1.127-1.98-3.476 1.98zM8.924 1.172L12.4-.808l-3.476 1.98zm-8.755.995l-3.464 2 3.464-2zm12.118 11.475l3.804-1.236-3.804 1.236zm.805 2.48l3.804-1.236-3.804 1.236zm-1.44-2.48l3.805 1.236-3.804-1.236zm-.805 2.48l-3.804-1.236 3.804 1.236zm-3.12.833l2.351-3.236-2.35 3.236zm2.11 1.532l-2.352 3.236 2.351-3.236zm.12.373l3.805 1.236-3.805-1.236zm-.805 2.48l3.804 1.235-3.804-1.236zm.513.372l-2.351-3.236 2.35 3.236zm2.109-1.532l-2.351-3.236 2.35 3.236zm.392 0l2.35-3.236-2.35 3.236zm2.108 1.532l-2.35 3.236 2.35-3.236zm.514-.373l3.804-1.236-3.804 1.236zm-.806-2.48l-3.804 1.237 3.804-1.236zm.121-.372l2.351 3.236-2.351-3.236zm2.109-1.532l-2.351-3.236 2.351 3.236zm5.651-10.197a16.005 16.005 0 00-3.021-1.877l-3.44 7.223a8 8 0 011.511.94l4.95-6.286zM20.39.167L15.924 7.9l6.928 4 4.466-7.734-6.929-4zm2.599 4.5c-2.31 0-3.753-2.5-2.599-4.5l6.929 4c1.924-3.334-.482-7.5-4.33-7.5v8zm-7.02 0h7.02v-8h-7.02v8zm2.607-1.515a3 3 0 01-2.607 1.515v-8a5 5 0 00-4.345 2.526l6.952 3.959zm-3.513 6.167l3.513-6.167-6.952-3.96L8.11 5.36l6.952 3.959zM11.97 3.333c-.17 0-.34.003-.51.008l.252 7.996c.085-.002.171-.004.258-.004v-8zm3.377.358a16.048 16.048 0 00-3.377-.358v8c.585 0 1.152.063 1.694.18l1.683-7.822zm-1.886-2.337L11.03 5.622l6.952 3.96 2.43-4.269-6.951-3.959zm6.64-2.02h-3.165v8h3.165v-8zm.485 11.159l2.979-5.16-6.928-4-2.98 5.16 6.93 4zM5.185 4.84a16 16 0 00-3.033 1.859l4.912 6.314a8.001 8.001 0 011.516-.93L5.185 4.84zm-4.727.493l2.96 5.129 6.929-4-2.961-5.129-6.928 4zm6.628-6H3.922v8h3.164v-8zm5.622 5.79l-2.146-3.77-6.952 3.96 2.147 3.769 6.951-3.96zM7.291 2.428L5.757 5.123l6.951 3.959 1.535-2.694-6.952-3.96zm-1.843.723l1.843 3.236 6.952-3.958L12.4-.808l-6.952 3.96zm2.607 1.516A3 3 0 015.448 3.15L12.4-.808a5 5 0 00-4.345-2.525v8zm-7.02 0h7.02v-8h-7.02v8zm2.598-4.5c1.155 2-.289 4.5-2.598 4.5v-8c-3.85 0-6.255 4.166-4.33 7.5l6.928-4zm4.44 7.689L3.632.166l-6.928 4 4.44 7.69 6.927-4zM14.635 18a2.667 2.667 0 01-2.666 2.667v8c5.89 0 10.666-4.776 10.666-10.667h-8zm-2.666-2.667A2.667 2.667 0 0114.636 18h8c0-5.891-4.775-10.667-10.666-10.667v8zM9.303 18a2.667 2.667 0 012.667-2.667v-8C6.079 7.333 1.303 12.11 1.303 18h8zm2.667 2.667A2.667 2.667 0 019.303 18h-8c0 5.891 4.776 10.667 10.667 10.667v-8zM17.303 18a5.333 5.333 0 01-5.333 5.333v8c7.363 0 13.333-5.97 13.333-13.333h-8zm-5.333-5.333A5.333 5.333 0 0117.303 18h8c0-7.364-5.97-13.333-13.333-13.333v8zM6.636 18a5.333 5.333 0 015.334-5.333v-8C4.606 4.667-1.364 10.637-1.364 18h8zm5.334 5.333A5.333 5.333 0 016.636 18h-8c0 7.364 5.97 13.333 13.334 13.333v-8zm-3.488-8.455l.806 2.48 7.608-2.473-.805-2.479-7.609 2.472zm6.975 0c-1.098 3.379-5.877 3.378-6.975 0l7.609-2.472c-1.297-3.992-6.945-3.992-8.243 0l7.609 2.472zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.48 7.608 2.472zm-4.12 2.994a4.333 4.333 0 004.12-2.994l-7.608-2.473a3.667 3.667 0 013.487-2.533v8zm-2.608 0h2.607v-8H7.923v8zm2.155-6.633c2.874 2.088 1.397 6.633-2.155 6.633v-8c-4.198 0-5.943 5.372-2.547 7.839l4.702-6.472zm2.11 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.701-6.472zm1.574 4.845a4.333 4.333 0 00-1.575-4.845l-4.702 6.472a3.667 3.667 0 01-1.332-4.1l7.609 2.473zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.479 7.608 2.472zm-5.642-4.1c2.873-2.088 6.74.721 5.642 4.1l-7.608-2.473c-1.298 3.992 3.272 7.312 6.668 4.845l-4.702-6.472zm2.109-1.532l-2.11 1.532 4.703 6.472 2.109-1.532-4.702-6.473zm5.094 0a4.333 4.333 0 00-5.094 0l4.702 6.472a3.667 3.667 0 01-4.31 0l4.702-6.473zm2.109 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.702-6.472zm-5.643 4.1c-1.097-3.379 2.769-6.188 5.643-4.1l-4.703 6.472c3.396 2.467 7.966-.853 6.669-4.845l-7.609 2.472zm-.805-2.48l.805 2.48 7.609-2.473-.806-2.48-7.608 2.473zm1.574-4.845a4.333 4.333 0 00-1.574 4.845l7.608-2.472a3.667 3.667 0 01-1.332 4.1l-4.702-6.473zm2.109-1.532l-2.11 1.532 4.703 6.472 2.11-1.532-4.703-6.472zm2.155 6.633c-3.552 0-5.029-4.545-2.155-6.633l4.702 6.472c3.396-2.467 1.65-7.84-2.547-7.84v8zm-2.607 0h2.607v-8H13.41v8zm-4.121-2.994a4.333 4.333 0 004.121 2.994v-8a3.667 3.667 0 013.487 2.534l-7.608 2.472z",mask:"url(#sports_svg__a)"})))}}],$r=()=>{const e=(0,ni.Q)(),{colors:t}=(0,a.u)(),{pathname:i}=(0,P.TH)(),n=(0,P.LX)(i,{path:$.Ad.topics,exact:!0}),r=null==n?void 0:n.params.name,s=(0,j.useCallback)((e=>{const t=e.currentTarget.dataset.topic;Zo.W.handleEnterTopic({topic_name:t})}),[]);return(0,o.jsxs)(Wr,{children:[(0,o.jsx)(qr,{children:e("topic_foryou_topics_header")},void 0),Zr.map((({key:i,value:n,Icon:a})=>{const l=r===n;return(0,o.jsxs)(Gr,Object.assign({"data-topic":n,to:$.zp.topics({name:n}),onClick:s},{children:[l&&(0,o.jsx)("h1",Object.assign({style:{display:"none"}},{children:e(i)}),void 0),(0,o.jsx)(a,{width:32,height:32,fill:l?t.Primary:t.Primary2},void 0),(0,o.jsx)(Hr,Object.assign({active:l},{children:e(i)}),void 0)]}),i)}))]},void 0)},Vr=(0,j.memo)((function({lang:e,slot:t,transStatus:i,extraTop:n,extraWidth:a}){const{user:r,topicLab:s,region:l}=(0,V.mp)(K.G,{selector:e=>{var t,i,o;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user,isSideNavActive:e.sideNavActive,topicLab:(0,Ci.x)(null===(i=e.appContext)||void 0===i?void 0:i.abTestVersion,"video_topic"),region:null===(o=e.appContext)||void 0===o?void 0:o.region}},dependencies:[]}),{pathname:d}=(0,P.TH)(),c=Oi(),{permissionInfo:p}=(0,V.mp)(Gi),u=Boolean(r),g=(0,j.useRef)(null),m=(0,j.useRef)(null),[{profileUserId:h,offsetTop:_,offsetLeft:v},y]=(0,V.b7)(vr,{selector:({profileUserId:e,itemOffset:t,offsetLeft:i})=>({profileUserId:e,offsetTop:t,offsetLeft:i}),dependencies:[]}),[b,f]=(0,j.useState)(!1),x=(0,j.useCallback)(((e,t,i)=>{var o,n;const a=document.documentElement.scrollTop||document.body.scrollTop,r=null!==(n=null===(o=m.current)||void 0===o?void 0:o.scrollTop)&&void 0!==n?n:0;let s;window.innerWidth<1072?(s=t-r+a-de.Mz+20,f(!0)):(s=t-r+a+10,f(!1)),y.itemEnter({userId:e,itemOffset:s,timeout:1e3,offsetLeft:i})}),[y]),k=(0,j.useCallback)((()=>{y.itemEnter({userId:null,timeout:0})}),[y]),w=(0,j.useCallback)((()=>{y.itemEnter({userId:h,timeout:0})}),[y,h]),S=(0,j.useCallback)((()=>{y.itemEnter({userId:null,timeout:500})}),[y]),C=(0,j.useCallback)((()=>{h&&y.itemEnter({userId:null,timeout:0})}),[y,h]);(0,j.useEffect)((()=>{const e=ji()((()=>{y.itemEnter({userId:null,timeout:0})}),1e3);return window.addEventListener("scroll",e),()=>{window.addEventListener("scroll",e)}}),[y]);const T=(0,V.qj)(Ao);(0,j.useEffect)((()=>{(null==r?void 0:r.uid)&&!c&&(null==p?void 0:p.showComputerLiveEntrance)&&T.getCreateRoomInfo({})}),[T,r,null==p?void 0:p.showComputerLiveEntrance,c]);const O=b,L=(0,V.qj)(Gi);return(0,j.useEffect)((()=>{(null==r?void 0:r.uid)&&L.getLivePermission()}),[L,r]),(0,j.useEffect)((()=>{h&&S()}),[S,d]),(0,o.jsxs)(ir,Object.assign({transStatus:i,extraWidth:a},{children:[(0,o.jsxs)(tr,Object.assign({extraTop:n,extraWidth:a,Wrapper:or,onScroll:C,ref:m},{children:[(0,o.jsx)(mr,{scrollRef:m},void 0),(null==p?void 0:p.showComputerLiveEntrance)&&(0,o.jsx)(Da,{scrollRef:m},void 0),!u&&(0,o.jsx)(Wa,{},void 0),"V2"===s&&"US"===l&&(0,o.jsx)($r,{},void 0),t||(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(bn,{onEnterItem:x,onLeaveItem:k},void 0),u&&(0,o.jsx)(vn,{ref:g},void 0),(0,o.jsx)(qn,{},void 0),(0,o.jsx)(rr,{},void 0)]},void 0),(0,o.jsx)(ra,{lang:e},void 0)]}),void 0),h&&(0,o.jsx)(Pi.C,{followTheme:"primary",paddingTop:24,paddingStart:O?20:0,hideSignature:!0,fixedLeft:O?52:v,top:_,uniqueId:h,onMouseEnter:w,onMouseLeave:S},void 0)]}),void 0)}));var Qr=i(37535),Yr=i.n(Qr),Kr=i(31090),Jr=i(16119),Xr=i(40599);const es=[{"*, *::before, *::after":{boxSizing:"border-box"},"body,h1,h2,h3,h4,p,figure,blockquote,dl,dd":{margin:0},'ul[role="list"], ol[role="list"]':{listStyle:"none"},"html:focus-within":{scrollBehavior:"smooth"},body:{minHeight:"100vh",textRendering:"optimizeSpeed",lineHeight:1.5},"a:not([class])":{textDecorationSkipInk:"auto"},"img, picture":{maxWidth:"100%",display:"block"},"input,button,textarea,select":{font:"inherit"},"@media (prefers-reduced-motion: reduce)":{"html:focus-within":{scrollBehavior:"auto"},"*,*::before,*::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}},"@supports (-webkit-touch-callout: none)":{body:{minHeight:"-webkit-fill-available"}}}];var ts=i(66312),is=i(55602),os=i(43039);const ns=(0,Vo.Z)("div",{target:"eyhjz840"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivErrorBoundaryContainer;");class as extends j.Component{constructor(){super(...arguments),this.state={isNetOffline:!1,hasError:!1},this.handleOnlineStatusChange=()=>{this.setState({isNetOffline:!navigator.onLine})}}get iconElem(){const{hasError:e}=this.state;return e?(0,o.jsx)(ts.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0):(0,o.jsx)(is.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}get text(){const{hasError:e}=this.state;return e?{title:"Page not available",desc:"server_error_sub",button:"try_again_btn"}:{title:"network_error_title",desc:"network_error_sub",button:"try_again_btn"}}componentDidMount(){window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("online",this.handleOnlineStatusChange),window.removeEventListener("offline",this.handleOnlineStatusChange)}handleRetry(){window.location.reload()}componentDidCatch(e,t){const{onCatchError:i}=this.props;i(e,t),this.setState({hasError:!0})}render(){const{isNetOffline:e,hasError:t}=this.state,{children:i,isMobile:n}=this.props,{t:a}=this.context;if(e||t){const{title:e,desc:t,button:i}=this.text;return n?(0,o.jsx)(ns,{children:(0,o.jsx)(os.T,{brightness:0,isFullScreen:!0,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i),onButtonClick:this.handleRetry},void 0)},void 0):(0,o.jsx)(os.T,{isFullScreen:!0,onButtonClick:this.handleRetry,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i)},void 0)}return i}}as.contextType=g.OO;let rs=class{constructor(e){this.fetch=e}reportRenderError(e){return this.fetch.get("/node-webapp/page/error",{query:{page:e}})}};rs=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],rs);const ss=(0,o.jsx)(Vt.g,{center:!0,style:{margin:"auto"}},void 0);function ls({children:e,isMobile:t,loading:i=ss}){var n,r;const s=(0,te.fz)(Kr.i),[l,d]=(0,V.b7)(K.G,{selector:e=>({lang:e.lang,appContext:e.appContext&&Yr()(e.appContext,"statusCode"),initialized:e.initialized}),dependencies:[]}),{pathname:c,search:p}=(0,P.TH)(),u="now.tiktok.com"===(null===(n=l.appContext)||void 0===n?void 0:n.host),g=(0,ni.H)(t,null===(r=l.appContext)||void 0===r?void 0:r.isBot,u);(0,j.useEffect)((()=>{var e,t,i,o,n;const a=null!==(o=null!==(i=null===(t=null===(e=(0,be.parse)(p))||void 0===e?void 0:e.lang)||void 0===t?void 0:t.toString())&&void 0!==i?i:document.documentElement.getAttribute("lang"))&&void 0!==o?o:"en";d.init({lang:a,starlingNs:g}),!(null===(n=l.appContext)||void 0===n?void 0:n.isBot)&&s.checkTTwid(),s.initTargetIdcRequest().subscribe()}),[d]);const m=(0,te.fz)(mo.GV);(0,Jr.L)((()=>{l.appContext&&m.setAppContext(l.appContext)}),[m,l.appContext]);const{GlobalModalProvider:h,value:_}=(0,Xr.R)(),{value:v}=(0,j.useContext)(z),y=(0,j.useMemo)((()=>B({isDark:v,isMobile:t,lang:l.lang})),[v,t,l.lang]),b=(S={isDark:v,lang:l.lang,isMobile:t},(0,j.useMemo)((()=>{return e=B(S),t=S.isMobile,[es,{body:{fontFamily:e.fontFamilies.Proxima,fontSize:e.text.fontSize,color:e.colors.TextPrimary,backgroundColor:e.colors.BGPrimary,overscrollBehavior:"contain",direction:e.direction,a:{color:e.colors.TextPrimary,transition:"color 250ms",textDecoration:"none",cursor:"pointer"},"a:visited":{color:e.colors.TextPrimary},"a:hover":{color:e.colors.TextPrimary,textDecoration:"underline"},"a:active":{color:e.colors.TextPrimary},"a:focus":{color:e.colors.TextPrimary},input:{"::-ms-clear":{display:"none",width:0,height:0},"::-ms-reveal":{display:"none",width:0,height:0},"::-webkit-search-decoration, ::-webkit-search-cancel-button, ::-webkit-search-results-button, ::-webkit-search-results-decoration":{display:"none"}},"&.hidden":{overflow:"hidden"},WebkitFontSmoothing:"antialiased"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff2) format("woff2"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Semibold"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff2) format("woff2"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff) format("woff"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Medium"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.otf) format("opentype")',fontWeight:500,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Semibold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{html:t?{}:{body:{overflowY:"overlay"},"*":{"::-webkit-scrollbar":{borderRadius:"0",width:"8px"},"::-webkit-scrollbar-track":{borderRadius:"0",backgroundColor:"rgba(0, 0, 0, 0)"},"::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault}}}}];var e,t}),[S])),f=(0,te.fz)(Oe.n),x=(0,te.fz)(rs),k=(0,j.useMemo)((()=>(0,Ba.BB)(c)),[c]),w=(0,j.useCallback)(((e,t)=>{try{x.reportRenderError(k),f.captureMessage(`Page render Error: ${e.message}`,"fatal",{page:k}),console.info("Error occurs in render time:",e),console.info("Error occurs in component:",t.componentStack)}catch(e){console.error("Error occurs when reporting error:",e)}}),[x,k,f]);var S;return l.initialized?(0,o.jsx)(h,Object.assign({value:_},{children:(0,o.jsx)(a.a,Object.assign({theme:y},{children:(0,o.jsxs)(as,Object.assign({onCatchError:w,isMobile:t},{children:[(0,o.jsx)(wn.xB,{styles:b},void 0),e]}),void 0)}),void 0)}),void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(wn.xB,{styles:{"#app":{justifyContent:"center"}}},void 0),i]},void 0)}const ds=(0,Vo.Z)(Tn.v,{target:"e1an6zpe0"})({fontSize:0},"label:StyledLinkLogo;");ds.defaultProps=Object.assign(Object.assign({},ds.defaultProps),{"data-e2e":"tiktok-logo"});const cs=(0,r.ZP)({resolved:{},chunkName:()=>"logo-light.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1605).then(i.bind(i,93886)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>93886}),ps=(0,r.ZP)({resolved:{},chunkName:()=>"logo-muted-white.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1255).then(i.bind(i,41830)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>41830}),us=(0,r.ZP)({resolved:{},chunkName:()=>"logo-muted-black.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(2798).then(i.bind(i,82757)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>82757}),gs=function({alt:e}){return(0,o.jsx)("svg",Object.assign({height:42,width:118,alt:e},{children:(0,o.jsx)("use",{xlinkHref:"#svg-header-logo"},void 0)}),void 0)},ms=(0,j.memo)((function({isDark:e,isGrayFilter:t}){const i=(0,ni.Q)(),{pathname:n}=(0,P.TH)(),a=(0,V.qj)(Ya.h),r=(0,j.useCallback)((e=>{(0,Re.oC)(n)&&(e.preventDefault(),a.resetItemList({key:"foryou"}),a.getRecommendList({key:"foryou"})),re.W.event("click_logo")}),[a,n]),s=i("TikTok i18n title"),l=(0,j.useMemo)((()=>e?t?(0,o.jsx)(ps,{height:42,width:118},void 0):(0,o.jsx)(cs,{alt:s,height:42,width:118},void 0):t?(0,o.jsx)(us,{height:42,width:118},void 0):(0,o.jsx)(gs,{alt:s},void 0)),[e,t,s]);return(0,o.jsxs)(ds,Object.assign({to:$.Ad.home,onClick:r,style:{position:"relative"}},{children:[l,(0,o.jsx)("strong",{children:s},void 0)]}),void 0)}));var hs=i(2108),_s=i(88018),vs=i(57779),ys=i(60871),bs=i(4825),fs=i(50121),xs=i(94806),ks=i(93943);const ws=(0,Vo.Z)("div",{target:"e8cpz260"})({padding:"29px 26px 48px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #979797",transition:"all .3s cubic-bezier"},(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{padding:"48px 0",flexDirection:"column",alignItems:"center"}}),"label:DivContainer;"),Ss=(0,Vo.Z)("div",{target:"e8cpz261"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivWrapper;"),js=(0,Vo.Z)("p",{target:"e8cpz262"})({fontSize:"24px",lineHeight:"24px",marginBottom:"16px"},(({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"semiBold"})),"label:PTitle;"),Cs=(0,Vo.Z)("div",{target:"e8cpz263"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{flexDirection:"column"}}),"label:DivIconContainer;"),Ps=(0,Vo.Z)("a",{target:"e8cpz264"})({margin:"0 4px",width:"170px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",":active, :hover, :link, :visited":{textDecoration:"none"}},(({withBorder:e})=>e?{border:"1px solid rgba(255, 255, 255, .5)",borderRadius:"8px"}:null),(({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"P1",color:"ConstTextInverse",isLink:!0})),(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{marginBottom:"20px"}}),"label:AIconContainer;");var Ts;!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(Ts||(Ts={}));const Os={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -53px"},google:{backgroundPosition:"0 -106px"}},Ls=(0,Vo.Z)("img",{target:"e8cpz265"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},Os[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"170px",height:"50px",backgroundSize:"170px",objectFit:"cover",backgroundRepeat:"no-repeat",boxSizing:"border-box",lineHeight:0},"label:ImgIcon;"),Is=(0,Vo.Z)("img",{target:"e8cpz266"})({marginRight:"8px",width:"20px"},"label:ImgQRCode;"),As=(0,Vo.Z)("p",{target:"e8cpz267"})({marginBottom:"60px",textAlign:"center"},(({theme:e})=>(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold",typography:"H3"})),"label:PQRTitle;"),Es=(0,Vo.Z)("div",{target:"e8cpz268"})({display:"flex",flexDirection:"column",alignItems:"center",padding:"80px 85px"},"label:DivBodyContainer;"),Ms=(0,Vo.Z)(ks.Z,{target:"e8cpz269"})({display:"block"},"label:StyledQrBg;"),Rs=(0,Vo.Z)("div",{target:"e8cpz2610"})({position:"relative",width:"202px",height:"202px"},"label:DivQRCodeWrapper;"),Fs=(0,Vo.Z)("img",{target:"e8cpz2611"})({width:"200px",position:"absolute",left:"1px",top:"1px",borderRadius:"8px",overflow:"hidden"},"label:ImgQRCodeDownload;"),Ds=function(e){const t=(0,ni.Q)(),[i,n]=(0,j.useState)(!1),a=(0,V.mp)(K.G,{selector:e=>{var t;return"t"===(null===(t=e.appContext)||void 0===t?void 0:t.appType)?fs:bs},dependencies:[]}),r=(0,j.useCallback)((e=>{e.preventDefault(),n(!0)}),[]),s=(0,j.useCallback)((()=>{n(!1)}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ps,Object.assign({onClick:r,withBorder:!0,href:"#"},{children:[(0,o.jsx)(Is,{src:"https://lf16-tiktok-common.ibytedtos.com/obj/tiktok-web-common-sg/mtact/static/images/share/video/ic-qrcode.svg"},void 0),(0,o.jsx)("span",{children:"QR CODE"},void 0)]}),void 0),(0,o.jsxs)(hs.AR,Object.assign({isOpen:i,onClose:s},{children:[(0,o.jsx)(hs.EZ,{},void 0),(0,o.jsxs)(Es,{children:[(0,o.jsx)(As,{children:t("QR CODE Text")},void 0),(0,o.jsxs)(Rs,{children:[(0,o.jsx)(Ms,{width:"202",height:"202"},void 0),(0,o.jsx)(Fs,{src:a},void 0)]},void 0)]},void 0)]}),void 0)]},void 0)},Bs=function(e){const t=(0,ni.Q)(),i=(0,J.m7)((0,ne.L)((()=>["language","downloadLink","isAndroid","isIOS"]),[])),{language:n}=i,a=(0,m.__rest)(i,["language"]),{iconLanguage:r,iconConfig:s}=(0,j.useMemo)((()=>(0,_s.lk)(Object.assign({lang:n},a))),[n,a]),l=(0,j.useCallback)((e=>{xs.Fx.handleClickAppStore(e)}),[]);return(0,o.jsx)(ws,{children:(0,o.jsxs)(Ss,{children:[(0,o.jsx)(js,{children:t("pc_reflow_download")},void 0),(0,o.jsxs)(Cs,{children:[(0,o.jsx)(Ds,{},void 0),s.map((({alt:e,href:t,platform:i})=>(0,o.jsx)(Ps,Object.assign({withBorder:"microsoft"===i,href:t,target:"_blank",rel:"nofollow noopener noreferrer",onClick:l.bind(null,i)},{children:(0,o.jsx)(Ls,{src:"microsoft"===i?(0,vs.Aq)(r):ys,platform:i,alt:e,lang:r},void 0)}),i)))]},void 0)]},void 0)},void 0)};var zs,Ns=i(29626),Us=i(91623),Ws=i.n(Us);!function(e){e.ClickLanguage="click_change_language",e.ChangeLanguage="change_langauage"}(zs||(zs={}));const qs=e=>{re.W.event("click_change_language",e)};function Gs(){return(0,j.useCallback)((({lang:e,url:t,currentLang:i,isMobile:o})=>{var n;n={language:i,to_language:e,enter_method:o?"top_bar":void 0},re.W.event("change_langauage",n),Ws().remove(Me.ci,{domain:"www.tiktok.com"}),Ws().set(Me.ci,e,{secure:!0,expires:300,domain:".tiktok.com"}),window.location.replace(t)}),[])}const Hs=(0,Vo.Z)("div",{target:"e1g150f60"})({boxSizing:"border-box",position:"relative",width:"172px",height:"36px",padding:"0 16px",display:"flex",border:"1px solid #8a8b91",borderRadius:"2px",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},(({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"normal"}),(0,de.YJ)({direction:e.direction,textAlign:"end"})]),"label:DivLangSelectionContainer;"),Zs=(0,Vo.Z)("p",{target:"e1g150f61"})({display:"block",lineHeight:"36px",fontSize:"14px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"label:PLabel;"),$s=(0,Vo.Z)("select",{target:"e1g150f62"})({position:"absolute",left:0,right:0,top:0,width:"100%",height:"100%",opacity:0},"label:SelectLangForm;"),Vs=Me.tF.map((e=>{const{label:t,value:i}=e;return(0,o.jsx)("option",Object.assign({value:i},{children:t}),i)})),Qs=function(){const e=(0,V.mp)(K.G,{selector:e=>{var t,i;return null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.language)&&void 0!==i?i:"en"},dependencies:[]}),t=(0,j.useMemo)((()=>{var t;return null===(t=Me.tF.find((({value:t})=>t===e)))||void 0===t?void 0:t.label}),[e]),{pathname:i,search:n}=(0,P.TH)(),a=Gs(),r=(0,j.useCallback)((t=>{const{value:o}=t.target;let r;r=(0,Re.Hg)(i)?`/${o}`:(0,be.stringifyUrl)({url:i,query:Object.assign(Object.assign({},(0,be.parse)(n)),{lang:o})}),a({url:r,lang:o,currentLang:e,isMobile:!0})}),[e,i,a,n]),s=(0,j.useCallback)((()=>{qs({language:e})}),[e]);return(0,o.jsxs)(Hs,{children:[(0,o.jsx)(Zs,{children:(0,o.jsx)("span",{children:t},void 0)},void 0),(0,o.jsx)(Ns.Z,{width:30,height:30,fill:"#B0B0B4"},void 0),(0,o.jsx)($s,Object.assign({value:e,onChange:r,onClick:s},{children:Vs}),void 0)]},void 0)},Ys=(0,Vo.Z)("div",{target:"eks331y0"})((({theme:{direction:e,colors:t}})=>[{flex:"1 1 0%",maxWidth:"226px",color:t.ConstTextInverse},(0,de.YJ)({direction:e,paddingEnd:"8px"}),(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{flex:"auto",padding:0,marginTop:"32px"}})]),"label:DivContainer;"),Ks=(0,Vo.Z)("h4",{target:"eks331y1"})({fontSize:"14px",lineHeight:"28px",margin:0},(({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold"})),"label:H4Title;"),Js=(0,Vo.Z)("span",{target:"eks331y2"})({},"label:SpanContent;"),Xs=(0,Vo.Z)("a",{target:"eks331y3"})({display:"block",textDecoration:"none",position:"relative",[`:hover ${Js}`]:{paddingBottom:"2px",borderBottom:"2px solid #ccc"},fontSize:"14px",lineHeight:"28px"},(({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",color:"ConstTextInverse3",isLink:!0}),{":link, :hover, :active, :visited":{textDecoration:"none",color:e.colors.ConstTextInverse3}}]),"label:ALink;"),el=function(e){const t=(0,V.mp)(K.G,{selector:e=>{var t;const i=null===(t=e.appContext)||void 0===t?void 0:t.navList;return(null!=i?i:[]).map((e=>{const t=Object.assign({},e);return t.children=t.children.filter((({placements:e=[]})=>0===e.length||e.includes("footer"))),t}))},dependencies:[]});return(0,o.jsx)(o.Fragment,{children:t.map((({title:e,children:t})=>(0,o.jsx)(j.Fragment,{children:(0,o.jsxs)(Ys,{children:[(0,o.jsx)(Ks,{children:e},void 0),t.map((({title:e,href:t,newWindow:i=!1})=>(0,o.jsx)(Xs,Object.assign({href:t,target:i?"_blank":void 0,rel:"noreferrer"},{children:(0,o.jsx)(Js,{children:e},void 0)}),e)))]},void 0)},e)))},void 0)},tl=(0,Vo.Z)("div",{target:"e1j0kpjo0"})((({theme:{colors:e}})=>({width:"100%",color:e.ConstTextInverse,backgroundColor:e.ConstBGInverse})),(({hasPaddingBottom:e})=>[{paddingBottom:e?"24px":0},(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{paddingBottom:e?"80px":0,textAlign:"center"}})]),"label:DivFooterContainer;"),il=(0,Vo.Z)("footer",{target:"e1j0kpjo1"})({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-start",paddingTop:"40px"},(({theme:{direction:e}})=>(0,de.YJ)({direction:e,paddingStart:"378px"})),(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{padding:"40px 0 0",flexDirection:"column",alignItems:"center"}}),"label:FooterWrapper;"),ol=(0,Vo.Z)("div",{target:"e1j0kpjo2"})({display:"block",position:"absolute",top:"43px","& > strong":{visibility:"hidden",position:"absolute",left:0,top:0}},(({theme:{direction:e}})=>[(0,de.YJ)({direction:e,start:"144px"}),(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:Object.assign({position:"relative",top:0},(0,de.YJ)({direction:e,start:"0"}))})]),"label:DivLogoWrapper;"),nl=(0,Vo.Z)("div",{target:"e1j0kpjo3"})({padding:"0 144px",marginTop:"60px",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{padding:0,marginTop:"72px",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}}),"label:DivBottomWrapper;"),al=(0,Vo.Z)("div",{target:"e1j0kpjo4"})((({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",typography:"P3",color:"ConstTextInverse3"})),{lineHeight:"24px"},(0,de.f1)({max:hs.gq[hs.T9.Medium]-1,style:{marginTop:"20px"}}),"label:DivCopyright;"),rl=(new Date).getFullYear(),sl=function({hideContent:e,hideDownload:t,hideLanguageSelection:i}){const n=(0,ni.Q)(),{config:a}=(0,J.m7)((0,ne.L)((()=>["config"]),[]));return(0,o.jsxs)(tl,Object.assign({hasPaddingBottom:!e},{children:[!t&&!(null==a?void 0:a.shouldBlock)&&(0,o.jsx)(Bs,{},void 0),(0,o.jsxs)(il,{children:[(0,o.jsxs)(ol,{children:[(0,o.jsx)(ms,{isDark:!0,isGrayFilter:null==a?void 0:a.isGrayFilter},void 0),(0,o.jsx)("strong",{children:n("TikTok i18n title")},void 0)]},void 0),(0,o.jsx)(el,{},void 0)]},void 0),(0,o.jsxs)(nl,{children:[i?(0,o.jsx)("div",{},void 0):(0,o.jsx)(Qs,{},void 0),(0,o.jsxs)(al,{children:[" ",rl," TikTok"]},void 0)]},void 0)]}),void 0)};var ll=i(77813),dl=i(71963),cl=i(72349),pl=i.n(cl);let ul=class{constructor(e){this.fetch=e}getComplianceSettings(){return this.fetch.get("/api/compliance/settings/",{query:{aid:1988,fromWeb:1}}).pipe(this.errorHandler)}validateAge(e){return this.fetch.post("https://www.tiktok.com/api/v3/register/verification/age/",{body:pl().stringify({fromWeb:1,source:"web",session_registered:1,update_birthdate_type:1,birthday:e,tt_csrf_token:this.fetch.csrfToken})}).pipe(this.errorHandler)}errorHandler(e){return e.pipe((0,Ai.K)((e=>(0,Ii.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var gl,ml;ul=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],ul),function(e){e[e.PASS=0]="PASS",e[e.FTC=1]="FTC",e[e.NormalThreshold=2]="NormalThreshold"}(gl||(gl={})),function(e){e[e.YoungerThan1=3008010]="YoungerThan1",e[e.YoungerThan2=3008012]="YoungerThan2",e[e.YoungerThan3=3008008]="YoungerThan3",e[e.OlderThan123=3008011]="OlderThan123"}(ml||(ml={}));let hl=class extends pe.D{constructor(e,t){super(),this.service=e,this.pnsReport=t,this.defaultState={ageGateAction:0,registerLimited:!1,initial:!1,birthday:"",checkAgeLoading:!1,ageEligible:!1}}setYear(e,t){e.year=t}setMonth(e,t){e.month=t}setDate(e,t){e.date=t}setBirthday(e,t){const{year:i,month:o,date:n}=t,a=`${i}-${o<10?`0${o}`:o}-${n<10?`0${n}`:n}`;a!==e.birthday&&(e.birthday=a,e.ageEligible=!1,e.ageErrorMsg="",e.showAgeConfirm=!1,e.showErrorByToast=!1)}setAgeGateSetting(e,t){e.initial=!0,e.ageGateAction=t.action,e.registerLimited=t.registerLimited}setCheckAgeLoading(e,t){e.checkAgeLoading=t}setAgeCheckResult(e,t){e.ageErrorMsg=t.ageErrorMsg,e.ageEligible=t.ageEligible,e.showErrorByToast=Boolean(t.showErrorByToast),e.errorCode=t.errorCode}setShowAgeConfirm(e,t){e.showAgeConfirm=t}getComplianceSettings(e){return e.pipe((0,Li.z)((()=>this.service.getComplianceSettings().pipe((0,_e.U)((e=>{if(0===(null==e?void 0:e.status_code)){const{age_gate_info:t={},device_limit_register_expired:i=!0}=e,{register_age_gate_action:o=2}=t;return this.getActions().setAgeGateSetting({registerLimited:!i,action:o})}return this.noop()}))))))}validateAge(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([{canSkip:e,checkPassCallback:t},{birthday:i,ageEligible:o,ageGateAction:n}])=>e||o||0===n?(null==t||t(),(0,Ii.of)(this.getActions().setCheckAgeLoading(!1),this.noop())):this.service.validateAge(i).pipe((0,_e.U)((e=>{const{is_eligible:i,status_code:o,status_msg:n,register_age_gate_post_action:a}=e;if(this.pnsReport.handleAgeGateResponse(i,o),i)return null==t||t(),this.getActions().setAgeCheckResult({ageErrorMsg:"",ageEligible:!0,errorCode:o});if(i||1!==a){const e=[3008010,3008012,3008008,3008011].includes(o);return this.getActions().setAgeCheckResult({ageErrorMsg:n||"Sorry, something went wrong, please try again later",ageEligible:!1,showErrorByToast:e,errorCode:o})}return null==t||t(),this.getActions().setShowAgeConfirm(!0)})),(0,Ji.O)(this.getActions().setCheckAgeLoading(!0)),(0,Xi.l)(this.getActions().setCheckAgeLoading(!1))))))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],hl.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setYear",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setMonth",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setDate",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setBirthday",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setAgeGateSetting",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setCheckAgeLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setAgeCheckResult",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"setShowAgeConfirm",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"getComplianceSettings",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hl.prototype,"validateAge",null),hl=(0,m.__decorate)([(0,ge.Y)("AgeGateModule"),(0,m.__metadata)("design:paramtypes",[ul,se])],hl);const _l={"#app":{justifyContent:"center"},"#loginContainer":{display:"flex",alignItems:"center",flexDirection:"column"}},vl=e=>({".date-selector .rmc-picker":{height:"250px"},".date-selector .rmc-picker:first-of-type":{position:"absolute",right:e?"unset":0,left:e?"0":"unset",width:"33.3333%"},".date-selector .rmc-picker-indicator":{height:"50px"},".date-selector .rmc-picker-item":{height:"50px",lineHeight:"50px",color:"#161823"},".date-selector":{width:"66%"}});var yl=i(1394),bl=i.n(yl),fl=i(52500);const xl={1011:"common_login_email_error",1009:"common_login_password_error"},kl={1002:"common_registration_phone_input_error",1003:"common_registration_phone_input_error",1054:"common_login_reset_phone_input_error"},wl={1011:"common_login_reset_email_input_error",1202:"common_registration_phone_sms_error"},Sl={1039:"login_risk_SMS_1",1091:"passport_uid_banned",1203:"mus_error_code",1054:"common_login_reset_phone_input_error",1051:"common_registration_password_error",1382:"createpw_error_1",8:"login_expired",2027:"login_page_lock",2028:"login_page_lock"},jl=[1203];var Cl,Pl;Cl||(Cl={}),function(e){e[e.NeedTwoStep=2046]="NeedTwoStep",e[e.NeedForceResetPassword=1381]="NeedForceResetPassword",e[e.TwoStepBlockResetPassword=1356]="TwoStepBlockResetPassword",e[e.TwoStepBlockLogin=1053]="TwoStepBlockLogin",e[e.NeedSignup=1011]="NeedSignup",e[e.AuthorizationError=1045]="AuthorizationError",e[e.ReactiveAccountError=4]="ReactiveAccountError"}(Pl||(Pl={}));const Tl=[1075,1430];var Ol=i(51882),Ll=i(7282);let Il=class{init(e){this.history=e}push(e,t){var i;null===(i=this.history)||void 0===i||i.push(e,t)}};Il=(0,m.__decorate)([(0,ae.G)()],Il);const Al=e=>{Zt.h.destroy(),Zt.h.open({content:e,duration:3,widthType:"half",style:{minWidth:"300px"}})};var El=i(23427);const Ml=(e,t,i)=>{switch(e){case 1027:case 3250:return"common_registration_username_error_format";case 3251:return"common_registration_username_error_short";case 3252:return"common_registration_username_error_long";case 3253:return"common_registration_username_error_period";case 3254:return"common_registration_username_error_number";case 1024:case 1028:return"common_registration_username_error_ sensitivity";case 0:return;default:return null!=i?i:t?"common_registration_username_error_occupied":"common_registration_username_error_ sensitivity"}},Rl=e=>-1!==[1340,1341].indexOf(e)||-1!==[2020,2025,2032,2033,2031,2046].indexOf(e)||-1!==[1357,1384].indexOf(e);var Fl;!function(e){e.Main="webapp",e.TV="tv",e.AgeVerify="ageVerify",e.DataExport="dataExport",e.Seller="seller",e.Rechange="recharge",e.Search="search",e.DataExportLogin="dataExportLogin",e.TT4DWebView="developer_webview"}(Fl||(Fl={}));const Dl={loginTitle:"common_login_panel_title",loginSlogan:"common_login_panel_copy",signUpTitle:"common_registration_panel_title",signUpSlogan:"common_registration_panel_copy",aid:"1459",disableSignup:!1,isSecurityVerification:!1,hideHomePage:!1},Bl={tv:{loginTitle:"tv_login_title",loginSlogan:"tv_login_tiktoktv-desc",signUpTitle:"tv_sign_up_title",signUpSlogan:"tv_login_tiktoktv-desc"},ageVerify:{loginTitle:"age_verify_login_title",loginSlogan:"age_verify_login_intro",disableSignup:!0,isSecurityVerification:!0},dataExport:{loginTitle:"data_export_login_title",loginSlogan:"data_export_login_intro",disableSignup:!0,isSecurityVerification:!0},seller:{aid:"4068"},recharge:{loginTitle:"webapp_coin_recharge_login",signUpTitle:"WebApp_coin_recharge_9"},search:{loginTitle:"login_to_search",signUpTitle:"login_to_search"},developer_webview:{hideHomePage:!0}};var zl,Nl,Ul;!function(e){e.AccountNotExist="inexistent",e.InEligible="ineligible",e.TwoStepBlock="twoStepVerifyBlock",e.TwoStepBlockResetPwd="TwoStepBlockResetPwd",e.Null=""}(zl||(zl={})),function(e){e[e.Login=1]="Login",e[e.Reactive=2]="Reactive"}(Nl||(Nl={})),function(e){e.Phone="phone",e.Email="email"}(Ul||(Ul={}));let Wl=class{constructor(e){this.fetch=e}getUrlParams(e){const t=e?e.split("?")[1]:window.location.search;return(0,be.parse)(t)}getIsPhoenix(){return"www.tiktok.in"===window.location.host}getLoginConfig(){return this.fetch.get("/node-webapp/api/login-config",{baseUrlType:2})}};Wl=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],Wl);let ql=class{constructor(e){this.service=e,this.getLoginType=e=>{var t;const i=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null==e?void 0:e.enter_method;if(!i)return"webapp";const o=Array.isArray(i)?i[0]:i;return Bl[o]?i:"webapp"},this.getShowAlertMessageType=(e,t)=>{const{message:i}=t;if(!i)return;const o=Array.isArray(i)?i[0]:i;return"ageVerify"!==e||"ineligible"!==o&&"inexistent"!==o?void 0:o}}getLoginContext(e){var t;const i=this.service.getUrlParams(e),o=this.getLoginType(i),n=this.getShowAlertMessageType(o,i),a=null!==(t=Bl[o])&&void 0!==t?t:{},{redirect_url:r="",is_modal:s,hide_close_btn:l,hide_toggle_login_signup:d}=i;return this.service.getLoginConfig().pipe((0,Li.z)((e=>{if(0!==e.statusCode)throw new Error("get api error");return(0,Ii.of)(Object.assign({},e.config))})),(0,Ai.K)((()=>(0,Ii.of)({emailSuffixConfig:[],platformConfig:{show_num:3,order:"FACEBOOK,GOOGLE,TWITTER,INSTAGRAM"},disableSignup:!1,forceLogin:!1,emailConsent:!1,phoenix:this.service.getIsPhoenix(),ttpConfig:{open:!0,syncSeverList:[{name:"global",domain:"https://m.tiktok.com"},{name:"ttp",domain:"https://us.tiktok.com"}]}})))).pipe((0,_e.U)((e=>Object.assign(Object.assign(Object.assign(Object.assign({},Dl),a),{loginType:o,phoenix:this.service.getIsPhoenix(),showAlertMessageType:n,redirectUrl:Array.isArray(r)?r[0]:null!=r?r:"",isModal:"1"===s,hideCloseButton:"1"===l,hideToggleLoginSign:"1"===d}),e))))}};ql=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Wl])],ql);let Gl=class extends pe.D{constructor(e,t){super(),this.service=e,this.modalLogin=t,this.defaultState={initialized:!1,phoenix:!1,platformConfig:{order:""},emailSuffixConfig:[]}}setContext(e,t){for(const i in t)e[i]=t[i]}setInitialized(e,t){e.initialized=t}setShowAlertMessageType(e,t){e.showAlertMessageType=t}init(e){return e.pipe((0,he.M)(this.modalLogin.state$),(0,Li.z)((([e,{url:t,loginModalShow:i}])=>this.service.getLoginContext(i?t:void 0).pipe((0,ve.z)((e=>(0,Ii.of)(this.getActions().setContext(e),this.getActions().setInitialized(!0)))),(0,Xi.l)(this.terminate())))))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],Gl.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Gl.prototype,"setContext",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Gl.prototype,"setInitialized",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Gl.prototype,"setShowAlertMessageType",null),(0,m.__decorate)([(0,ue.Qm)({ssr:!0}),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Gl.prototype,"init",null),Gl=(0,m.__decorate)([(0,ge.Y)("LoginContextModule"),(0,m.__metadata)("design:paramtypes",[ql,$t.r])],Gl);const Hl=[{label:"A",lists:[{name:"Afghanistan",shortname:"AF",code:93,key:"afghanistan"},{name:"land Islands",shortname:"AX",code:35818,key:"land_islands"},{name:"Albania",shortname:"AL",code:355,key:"albania"},{name:"Algeria",shortname:"DZ",code:213,key:"algeria"},{name:"American Samoa",shortname:"AS",code:1684,key:"american_samoa"},{name:"Andorra",shortname:"AD",code:376,key:"andorra"},{name:"Angola",shortname:"AO",code:244,key:"angola"},{name:"Anguilla",shortname:"AI",code:1264,key:"anguilla"},{name:"Antigua & Barbuda",shortname:"AG",code:1268,key:"antigua_and_barbuda"},{name:"Argentina",shortname:"AR",code:54,key:"argentina"},{name:"Armenia",shortname:"AM",code:374,key:"armenia"},{name:"Aruba",shortname:"AW",code:297,key:"aruba"},{name:"Ascension Island",shortname:"SH",code:247,key:"ascension"},{name:"Australia",shortname:"AU",code:61,key:"australia"},{name:"Austria",shortname:"AT",code:43,key:"austria"},{name:"Azerbaijan",shortname:"AZ",code:994,key:"azerbaijan"}]},{label:"B",lists:[{name:"Bahamas",shortname:"BS",code:1242,key:"bahamas"},{name:"Bahrain",shortname:"BH",code:973,key:"bahrain"},{name:"Bangladesh",shortname:"BD",code:880,key:"bangladesh"},{name:"Barbados",shortname:"BB",code:1246,key:"barbados"},{name:"Barbuda",shortname:"AG",code:1268,key:"barbuda"},{name:"Belarus",shortname:"BY",code:375,key:"belarus"},{name:"Belgium",shortname:"BE",code:32,key:"belgium"},{name:"Belize",shortname:"BZ",code:501,key:"belize"},{name:"Benin",shortname:"BJ",code:229,key:"benin"},{name:"Bermuda",shortname:"BM",code:1441,key:"bermuda_island"},{name:"Bhutan",shortname:"BT",code:975,key:"bhutan"},{name:"Bolivia",shortname:"BO",code:591,key:"bolivia"},{name:"Bosnia & Herzegovina",shortname:"BA",code:387,key:"bosnia_and_herzegovina"},{name:"Botswana",shortname:"BW",code:267,key:"botswana"},{name:"Brazil",shortname:"BR",code:55,key:"brazil"},{name:"British Indian Ocean Territory",shortname:"IO",code:246,key:"british_indian_ocean_territory"},{name:"British Virgin Islands",shortname:"VG",code:1284,key:"british_virgin_islands"},{name:"Brunei",shortname:"BN",code:673,key:"brunei"},{name:"Bulgaria",shortname:"BG",code:359,key:"bulgaria"},{name:"Burkina-faso",shortname:"BF",code:226,key:"burkina_faso"},{name:"Burundi",shortname:"BI",code:257,key:"burundi"}]},{label:"C",lists:[{name:"Cameroon",shortname:"CM",code:237,key:"cameroon"},{name:"Canada",shortname:"CA",code:1,key:"canada"},{name:"Cape Verde",shortname:"CV",code:238,key:"cape_verde"},{name:"Caribbean Netherlands",shortname:"BQ",code:5997,key:"caribbean_netherlands"},{name:"Cayman Is.",shortname:"KY",code:1345,key:"cayman_islands"},{name:"Central African Republic",shortname:"CF",code:236,key:"central_african_republic"},{name:"Chad",shortname:"TD",code:235,key:"chad"},{name:"Chile",shortname:"CL",code:56,key:"chile"},{name:"China mainland",shortname:"CN",code:86,key:"china_mainland"},{name:"Christmas Island",shortname:"CX",code:61,key:"christmas_island"},{name:"Cocos (Keeling) Islands",shortname:"CC",code:61,key:"cocos_keeling_islands"},{name:"Colombia",shortname:"CO",code:57,key:"colombia"},{name:"Comoros",shortname:"KM",code:269,key:"comoros"},{name:"Congo - Brazzaville",shortname:"CG",code:242,key:"congo"},{name:"Congo - Kinshasa",shortname:"CD",code:243,key:"congo_kinshasa"},{name:"Cook Is.",shortname:"CK",code:682,key:"cook_islands"},{name:"Costa Rica",shortname:"CR",code:506,key:"costa_rica"},{name:"Croatia",shortname:"HR",code:385,key:"croatia"},{name:"Curaao",shortname:"CW",code:5999,key:"curaao"},{name:"Cyprus",shortname:"CY",code:357,key:"cyprus"},{name:"Czechia",shortname:"CZ",code:420,key:"czech_republic"}]},{label:"D",lists:[{name:"Denmark",shortname:"DK",code:45,key:"denmark"},{name:"Diego Garcia",shortname:"DG",code:246,key:"diego_garcia"},{name:"Djibouti",shortname:"DJ",code:253,key:"djibouti"},{name:"Dominica",shortname:"DM",code:1767,key:"dominica"},{name:"Dominican Republic",shortname:"DO",code:1,key:"dominican_republic"}]},{label:"E",lists:[{name:"EI Salvador",shortname:"SV",code:503,key:"el_salvador"},{name:"Ecuador",shortname:"EC",code:593,key:"ecuador"},{name:"Egypt",shortname:"EG",code:20,key:"egypt"},{name:"Equatorial Guinea",shortname:"GQ",code:240,key:"equatorial_guinea"},{name:"Eritrea",shortname:"ER",code:291,key:"eritrea"},{name:"Estonia",shortname:"EE",code:372,key:"estonia"},{name:"Eswatini",shortname:"SZ",code:268,key:"eswatini"},{name:"Ethiopia",shortname:"ET",code:251,key:"ethiopia"}]},{label:"F",lists:[{name:"Falkland Islands",shortname:"FK",code:500,key:"falkland_islands"},{name:"Faroe Islands",shortname:"FO",code:298,key:"faroe_islands"},{name:"Fiji",shortname:"FJ",code:679,key:"fiji"},{name:"Finland",shortname:"FI",code:358,key:"finland"},{name:"France",shortname:"FR",code:33,key:"france"},{name:"French Guiana",shortname:"GF",code:594,key:"french_guiana"},{name:"French Polynesia",shortname:"PF",code:689,key:"french_polynesia"}]},{label:"G",lists:[{name:"Gabon",shortname:"GA",code:241,key:"gabon"},{name:"Gambia",shortname:"GM",code:220,key:"gambia"},{name:"Georgia",shortname:"GE",code:995,key:"georgia"},{name:"Germany",shortname:"DE",code:49,key:"germany"},{name:"Ghana",shortname:"GH",code:233,key:"ghana"},{name:"Gibraltar",shortname:"GI",code:350,key:"gibraltar"},{name:"Greece",shortname:"GR",code:30,key:"greece"},{name:"Greenland",shortname:"GL",code:299,key:"greenland"},{name:"Grenada",shortname:"GD",code:1473,key:"grenada"},{name:"Guadeloupe",shortname:"GP",code:590,key:"guadeloupe"},{name:"Guam",shortname:"GU",code:1671,key:"guam"},{name:"Guatemala",shortname:"GT",code:502,key:"guatemala"},{name:"Guernsey",shortname:"GG",code:44,key:"guernsey"},{name:"Guinea",shortname:"GN",code:224,key:"guinea"},{name:"Guinea-Bissau",shortname:"GW",code:245,key:"guinea_bissau"},{name:"Guyana",shortname:"GY",code:592,key:"guyana"}]},{label:"H",lists:[{name:"Haiti",shortname:"HT",code:509,key:"haiti"},{name:"Honduras",shortname:"HN",code:504,key:"honduras"},{name:"Hongkong",shortname:"HK",code:852,key:"hongkong"},{name:"Hungary",shortname:"HU",code:36,key:"hungary"}]},{label:"I",lists:[{name:"Iceland",shortname:"IS",code:354,key:"iceland"},{name:"India",shortname:"IN",code:91,key:"india"},{name:"Indonesia",shortname:"ID",code:62,key:"indonesia"},{name:"Iraq",shortname:"IQ",code:964,key:"iraq"},{name:"Ireland",shortname:"IE",code:353,key:"ireland"},{name:"Israel",shortname:"IL",code:972,key:"israel"},{name:"Isle of Man",shortname:"IM",code:44,key:"region_isle_of_man"},{name:"Italy",shortname:"IT",code:39,key:"italy"},{name:"Ivory Coast",shortname:"CI",code:225,key:"cte_d_ivoire"}]},{label:"J",lists:[{name:"Jamaica",shortname:"JM",code:1876,key:"jamaica"},{name:"Japan",shortname:"JP",code:81,key:"japan"},{name:"Jersey",shortname:"JE",code:44,key:"jersey"},{name:"Jordan",shortname:"JO",code:962,key:"jordan"}]},{label:"K",lists:[{name:"Kampuchea (Cambodia )",shortname:"KH",code:855,key:"cambodia"},{name:"Kazakhstan",shortname:"KZ",code:76,key:"kazakhstan"},{name:"Kazakhstan",shortname:"KZ",code:77,key:"kazakhstan"},{name:"Kenya",shortname:"KE",code:254,key:"kenya"},{name:"Kiribati",shortname:"KI",code:686,key:"kiribati"},{name:"Korea",shortname:"KR",code:82,key:"south_korea"},{name:"Kosovo",shortname:"XK",code:383,key:"region_kosovo"},{name:"Kuwait",shortname:"KW",code:965,key:"kuwait"},{name:"Kyrgyzstan",shortname:"KG",code:996,key:"kyrgyzstan"}]},{label:"L",lists:[{name:"Laos",shortname:"LA",code:856,key:"laos"},{name:"Latvia",shortname:"LV",code:371,key:"latvia"},{name:"Lebanon",shortname:"LB",code:961,key:"lebanon"},{name:"Lesotho",shortname:"LS",code:266,key:"lesotho"},{name:"Liberia",shortname:"LR",code:231,key:"liberia"},{name:"Libya",shortname:"LY",code:218,key:"libya"},{name:"Liechtenstein",shortname:"LI",code:423,key:"liechtenstein"},{name:"Lithuania",shortname:"LT",code:370,key:"lithuania"},{name:"Luxembourg",shortname:"LU",code:352,key:"luxembourg"}]},{label:"M",lists:[{name:"Macao",shortname:"MO",code:853,key:"macao"},{name:"Madagascar",shortname:"MG",code:261,key:"madagascar"},{name:"Malawi",shortname:"MW",code:265,key:"malawi"},{name:"Malaysia",shortname:"MY",code:60,key:"malaysia"},{name:"Maldives",shortname:"MV",code:960,key:"maldives"},{name:"Mali",shortname:"ML",code:223,key:"mali"},{name:"Malta",shortname:"MT",code:356,key:"malta"},{name:"Marshall Islands",shortname:"MH",code:692,key:"marshall_islands"},{name:"Martinique",shortname:"MQ",code:596,key:"martinique"},{name:"Mauritania",shortname:"MR",code:222,key:"mauritania"},{name:"Mauritius",shortname:"MU",code:230,key:"mauritius"},{name:"Mayotte",shortname:"YT",code:262,key:"mayotte"},{name:"Mexico",shortname:"MX",code:52,key:"mexico"},{name:"Micronesia",shortname:"FM",code:691,key:"micronesia"},{name:"Moldova, Republic of",shortname:"MD",code:373,key:"republic_of_moldova"},{name:"Monaco",shortname:"MC",code:377,key:"monaco"},{name:"Mongolia",shortname:"MN",code:976,key:"mongolia"},{name:"Montenegro",shortname:"ME",code:382,key:"montenegro"},{name:"Montserrat",shortname:"MS",code:1664,key:"montserrat"},{name:"Morocco",shortname:"MA",code:212,key:"morocco"},{name:"Mozambique",shortname:"MZ",code:258,key:"mozambique"},{name:"Myanmar (Burma)",shortname:"MY",code:95,key:"myanmar_burma"}]},{label:"N",lists:[{name:"Namibia",shortname:"NA",code:264,key:"namibia"},{name:"Nauru",shortname:"NR",code:674,key:"nauru"},{name:"Nepal",shortname:"NP",code:977,key:"nepal"},{name:"Netherlands",shortname:"NL",code:31,key:"netherlands"},{name:"New Caledonia",shortname:"NC",code:687,key:"new_caledonia"},{name:"New Zealand",shortname:"NZ",code:64,key:"new_zealand"},{name:"Nicaragua",shortname:"NI",code:505,key:"nicaragua"},{name:"Niger",shortname:"NE",code:227,key:"niger"},{name:"Nigeria",shortname:"NG",code:234,key:"nigeria"},{name:"Niue",shortname:"NU",code:683,key:"niue"},{name:"Norfolk Island",shortname:"NF",code:672,key:"norfolk_island"},{name:"North Macedonia",shortname:"MK",code:389,key:"macedonia"},{name:"Northern Mariana Islands",shortname:"MP",code:1670,key:"northern_mariana_islands"},{name:"Norway",shortname:"NO",code:47,key:"norway"}]},{label:"O",lists:[{name:"Oman",shortname:"OM",code:968,key:"oman"}]},{label:"P",lists:[{name:"Pakistan",shortname:"PK",code:92,key:"pakistan"},{name:"Palau",shortname:"PW",code:680,key:"palau"},{name:"Palestinian Territories",shortname:"PS",code:970,key:"palestinian_territories"},{name:"Panama",shortname:"PA",code:507,key:"panama"},{name:"Papua New Cuinea",shortname:"PG",code:675,key:"papua_new_guinea"},{name:"Paraguay",shortname:"PY",code:595,key:"paraguay"},{name:"Peru",shortname:"PE",code:51,key:"peru"},{name:"Philippines",shortname:"PH",code:63,key:"philippines"},{name:"Pitcairn Islands",shortname:"PN",code:64,key:"pitcairn_islands"},{name:"Poland",shortname:"PL",code:48,key:"poland"},{name:"Portugal",shortname:"PT",code:351,key:"portugal"},{name:"Puerto Rico",shortname:"PR",code:1787,key:"puerto_rico"},{name:"Puerto Rico",shortname:"PR",code:1939,key:"puerto_rico"}]},{label:"Q",lists:[{name:"Qatar",shortname:"QA",code:974,key:"qatar"}]},{label:"R",lists:[{name:"Runion",shortname:"RE",code:262,key:"reunion"},{name:"Romania",shortname:"RO",code:40,key:"romania"},{name:"Russia",shortname:"RU",code:7,key:"russia"},{name:"Rwanda",shortname:"RW",code:250,key:"rwanda"}]},{label:"S",lists:[{name:"Samoa",shortname:"WS",code:685,key:"samoa"},{name:"San Marino",shortname:"SM",code:378,key:"san_marino"},{name:"Sao Tome and Principe",shortname:"ST",code:239,key:"sao_tome_and_principe"},{name:"Saudi Arabia",shortname:"SA",code:966,key:"saudi_arabia"},{name:"Senegal",shortname:"SN",code:221,key:"senegal"},{name:"Serbia",shortname:"RS",code:381,key:"serbia"},{name:"Seychelles",shortname:"SC",code:248,key:"seychelles"},{name:"Sierra Leone",shortname:"SL",code:232,key:"sierra_leone"},{name:"Singapore",shortname:"SG",code:65,key:"singapore"},{name:"Sint Maarten",shortname:"SX",code:1721,key:"sint_maarten"},{name:"Slovakia",shortname:"SK",code:421,key:"slovakia"},{name:"Slovenia",shortname:"SI",code:386,key:"slovenia"},{name:"Solomon Is",shortname:"SB",code:677,key:"solomon_islands"},{name:"Somali",shortname:"SO",code:252,key:"somalia"},{name:"South Africa",shortname:"ZA",code:27,key:"south_africa"},{name:"So. Georgia & So. Sandwich  Isl.",shortname:"GS",code:500,key:"south_georgia_and_south_sandwich_islands"},{name:"South Sudan",shortname:"SS",code:211,key:"south_sudan"},{name:"Spain",shortname:"ES",code:34,key:"spain"},{name:"Sri Lanka",shortname:"LK",code:94,key:"sri_lanka"},{name:"St. Barthlemy",shortname:"BL",code:590,key:"st_barthlemy"},{name:"St. Helena",shortname:"SH",code:290,key:"st_helena"},{name:"St. Kitts & Nevis",shortname:"KN",code:1869,key:"st_kitts_and_nevis"},{name:"St. Martin",shortname:"MF",code:590,key:"st_martin_france"},{name:"St. Pierre & Miquelon",shortname:"PM",code:508,key:"st_pierre_and_miquelon"},{name:"St.Lucia",shortname:"LC",code:1758,key:"saint_lucia"},{name:"St. Vincent & Grenadines",shortname:"VC",code:1784,key:"st.vincent"},{name:"Sudan",shortname:"SD",code:249,key:"sudan"},{name:"Suriname",shortname:"SR",code:597,key:"suriname"},{name:"Svalbard & Jan Mayen",shortname:"SJ",code:4779,key:"svalbard_and_jan_mayen"},{name:"Sweden",shortname:"SE",code:46,key:"sweden"},{name:"Switzerland",shortname:"CH",code:41,key:"switzerland"}]},{label:"T",lists:[{name:"Taiwan",shortname:"TW",code:886,key:"taiwan"},{name:"Tajikstan",shortname:"TJ",code:992,key:"tajikistan"},{name:"Tanzania",shortname:"TZ",code:255,key:"tanzania"},{name:"Thailand",shortname:"TH",code:66,key:"thailand"},{name:"Timor-Leste",shortname:"TL",code:670,key:"east_timor"},{name:"Togo",shortname:"TG",code:228,key:"togo"},{name:"Tokelau",shortname:"TK",code:690,key:"tokelau"},{name:"Tonga",shortname:"TO",code:676,key:"tonga"},{name:"Trinidad & Tobago",shortname:"TT",code:1868,key:"trinidad_and_tobago"},{name:"Tunisia",shortname:"TN",code:216,key:"tunisia"},{name:"Turkey",shortname:"TR",code:90,key:"turkey"},{name:"Turkmenistan",shortname:"TM",code:993,key:"turkmenistan"},{name:"Turks & Caicos Islands",shortname:"TC",code:1649,key:"turks_and_caicos_islands"},{name:"Tuvalu",shortname:"TV",code:688,key:"tuvalu"}]},{label:"U",lists:[{name:"U.S. Virgin Islands",shortname:"VI",code:1340,key:"u_s_virgin_islands"},{name:"Uganda",shortname:"UG",code:256,key:"uganda"},{name:"Ukraine",shortname:"UA",code:380,key:"ukraine"},{name:"United Arab Emirates",shortname:"AE",code:971,key:"united_arab_emirates"},{name:"United Kingdom",shortname:"UK",code:44,key:"united_kingdom"},{name:"United States",shortname:"US",code:1,key:"united_states"},{name:"Uruguay",shortname:"UY",code:598,key:"uruguay"},{name:"Uzbekistan",shortname:"UZ",code:998,key:"uzbekistan"}]},{label:"V",lists:[{name:"Vanuatu",shortname:"VU",code:678,key:"vanuatu"},{name:"Vatican City",shortname:"VA",code:379,key:"vatican_city"},{name:"Vatican City",shortname:"VA",code:3906698,key:"vatican_city"},{name:"Venezuela",shortname:"VE",code:58,key:"venezuela"},{name:"Vietnam",shortname:"VN",code:84,key:"vietnam"}]},{label:"W",lists:[{name:"Wallis & Futuna",shortname:"WF",code:681,key:"wallis_and_futuna"},{name:"Western Sahara",shortname:"EH",code:212,key:"region_western_sahara"}]},{label:"Y",lists:[{name:"Yemen",shortname:"YE",code:967,key:"yemen"}]},{label:"Z",lists:[{name:"Zambia",shortname:"ZM",code:260,key:"zambia"},{name:"Zimbabwe",shortname:"ZW",code:263,key:"zimbabwe"}]}],Zl=e=>/^\w+([\.\-\+]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e);let $l=class extends pe.D{constructor(){super(...arguments),this.defaultState={area:"",phone:"",phoneCode:"",searchText:"",showAreaCodeSelector:!1,mobile:"",mobileOpenId:""}}setShowAreaCodeSelector(e,t){e.showAreaCodeSelector=t}setAreaCode(e,t){const{code:i,area:o}=t;e.areaCode=i,e.area=o,this.setMobileInfo(e,{areaCode:i,phone:e.phone})}setPhoneNumber(e,t){e.phone=t,this.setMobileInfo(e,{areaCode:e.areaCode,phone:t})}setErrorMsg(e,t){e.phoneErrorMsg=t}setAreaSearchText(e,t){if(e.searchText=t,!t)return void(e.matchSearchArea=void 0);const i=RegExp(t.replace("+","\\+"),"ig");e.matchSearchArea=Hl.reduce(((e,{lists:t})=>e.concat(t)),[]).find((({name:e,code:t,shortname:o})=>e.match(i)||`${t}`.match(i)||o.match(i)))}setPhoneCode(e,t){e.phoneCode=t}toggleAreaCodeSelector(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([,{showAreaCodeSelector:e}])=>(0,Ii.of)(this.getActions().setShowAreaCodeSelector(!e)))))}selectAreaCode(e){return e.pipe((0,Li.z)((({code:e,area:t})=>(0,Ii.of)(this.getActions().setAreaCode({area:t,code:e}),this.getActions().setShowAreaCodeSelector(!1)))))}checkPhoneNumberFormat(e){return e.pipe((0,Li.z)((({phone:e})=>{const t=(e=>e&&/[^\d]+/.test(e))(e);return(0,Ii.of)(this.getActions().setPhoneNumber(e),this.getActions().setErrorMsg(t?"common_registration_phone_input_error":""))})))}setMobileInfo(e,t){const{phone:i,areaCode:o}=t;if(!i||!o)return e.mobile="",void(e.mobileOpenId="");e.mobile=`+${o} ${i}`,e.mobileOpenId=86===o?i:`+${o}${i}`}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],$l.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setShowAreaCodeSelector",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setAreaCode",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setPhoneNumber",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setAreaSearchText",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"setPhoneCode",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"toggleAreaCodeSelector",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"selectAreaCode",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],$l.prototype,"checkPhoneNumberFormat",null),$l=(0,m.__decorate)([(0,ge.Y)("PhoneNumberModule")],$l);let Vl=class extends pe.D{constructor(e,t){super(),this.appContext=e,this.history=t,this.defaultState={}}setErrorCode(e,t){e.errorCode=t}setShowInstagramCantLoginModal(e,t){e.showInstagramRisk=t}setShowRiskModal(e,t){e.showRiskModal=t}handleRiskError(e){return e.pipe((0,he.M)(this.appContext.state$),(0,Li.z)((([{errorCode:e},{appContext:t}])=>(null==t?void 0:t.isMobile)?(0,Ii.of)(this.getActions().setShowRiskModal(!0),this.getActions().setErrorCode(e)):(this.history.push($.gY.loginDownloadApp),(0,Ii.of)(this.noop())))))}};var Ql,Yl;(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],Vl.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],Vl.prototype,"setErrorCode",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Vl.prototype,"setShowInstagramCantLoginModal",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Vl.prototype,"setShowRiskModal",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Vl.prototype,"handleRiskError",null),Vl=(0,m.__decorate)([(0,ge.Y)("RiskErrorModule"),(0,m.__metadata)("design:paramtypes",[K.G,Il])],Vl),function(e){e.SendSms="send_sms",e.SendMail="send_mail",e.SendSmsResult="monitor_send_sms",e.SendMailResult="monitor_send_email_code"}(Ql||(Ql={})),function(e){e.Click="user_click",e.Resend="resend",e.ForgotPwd="forgot_password",e.TwoStep="2sv",e.ForceReset="force_reset",e.Delete="delete"}(Yl||(Yl={}));const Kl=e=>{re.W.event("send_sms",e)},Jl=e=>{re.W.event("send_mail",e)},Xl=(e,t=!1)=>{const i=(0,yi.St)(`sms_code_count_down${t?"_email":""}_${e}`),o=Number(i)-Date.now();return"number"!=typeof o||o<0?{hasSent:Boolean(i),countDownSecond:0}:{hasSent:Boolean(i),countDownSecond:Math.round(o/1e3)}};let ed=class extends pe.D{constructor(e,t){super(),this.service=e,this.history=t,this.defaultState={}}setEmail(e,t){e.email=t}setEmailErrorMsg(e,t){e.emailErrorMsg=t}setSuggestEmailSuffixConfig(e,t){var i,o;e.email=(null!==(o=null===(i=e.email)||void 0===i?void 0:i.split("@")[0])&&void 0!==o?o:"")+t,e.emailErrorMsg=void 0}setLoading(e,t){e.checkEmailLoading=t}setEmailInfo(e){return e.pipe((0,Li.z)((({email:e,valid:t})=>(0,Ii.of)(this.getActions().setEmail(e),this.getActions().setEmailErrorMsg(t||!e?"":"common_registration_email_input_error")))))}checkEmailRegistered(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,{email:t=""}])=>Zl(t)?this.service.checkEmailRegistered({email:t}).pipe((0,_e.U)((e=>{const{error_code:t,description:i,is_registered:o}=e;if(t)return this.getActions().setEmailErrorMsg(i);{const e=o?$.gY.loginWithSignedEmail:$.gY.signupEmailCreatePassword;return this.history.push(e),this.noop()}})),(0,Ji.O)(this.getActions().setLoading(!0)),(0,Xi.l)(this.getActions().setLoading(!1))):(0,Ii.of)(this.getActions().setEmailErrorMsg("common_registration_email_input_error")))))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],ed.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"setEmail",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"setEmailErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"setSuggestEmailSuffixConfig",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"setLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"setEmailInfo",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],ed.prototype,"checkEmailRegistered",null),ed=(0,m.__decorate)([(0,ge.Y)("EmailModule"),(0,m.__metadata)("design:paramtypes",[Ol.Q,Il])],ed);let td=class extends pe.D{constructor(e,t,i,o,n,a,r){super(),this.contextModule=e,this.service=t,this.ageGate=i,this.phone=o,this.email=n,this.history=a,this.riskError=r,this.defaultState={sendCodeLoading:!1,code:""},this.sendReason="user_click",this.isEmail=!1}setCode(e,t){const i=(e=>Boolean(e&&(/[^\d]+/.test(e)||6!==e.length)))(t);e.codeFormatError=i?"common_login_reset_email_verify_title":"",e.code=t}setTicket(e,t){e.ticket=t}setSendCodeLoading(e,t){t&&(e.getCodeErrorMsg=""),e.sendCodeLoading=t}clearGetCodeError(e){e.getCodeErrorMsg="",e.emailRegistered=void 0}setErrorMsg(e,t){const{description:i,emailRegistered:o}=t;e.emailRegistered=o,e.getCodeErrorMsg=i}sendPhoneCodeForVerify(e){return e.pipe((0,Ki.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,Li.z)((({mobile:e,nextUrl:t})=>this.service.notLoginSendCode({mobile:e}).pipe(this.sendCodeHandler({cacheKey:e,nextUrl:t})))))}sendPhoneCodeForLogin(e){return e.pipe((0,Ki.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,Yi.w)((e=>{const{isSignUp:t,mobile:i}=e;return this.ageGate.validateAge((0,Ii.of)({canSkip:!t})).pipe((0,fl.T)(1),(0,Li.z)((({payload:t})=>"boolean"==typeof t?(0,Ii.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendPhoneCode(e).pipe(this.sendCodeHandler({cacheKey:i,agePayload:null!=t?t:void 0,nextUrl:e.nextUrl})):(0,Ii.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,Ji.O)(this.getActions().setSendCodeLoading(!0)),(0,Xi.l)(this.getActions().setSendCodeLoading(!1)))})))}sendPhoneCodeForResetPwd(e){return e.pipe((0,Ki.b)((({mobile:e,verify_ticket:t})=>{var i;return this.reportSendCode({reason:"forgot_password",cacheKey:null!==(i=null!=e?e:t)&&void 0!==i?i:""})})),(0,Ki.b)((()=>Kl({send_reason:"forgot_password"}))),(0,Li.z)((({mobile:e,verify_ticket:t,not_login_ticket:i,nextUrl:o})=>{var n;return this.service.sendPhoneCodeWithType({mobile:e,type:4,method:"GET",verify_ticket:t,not_login_ticket:i}).pipe(this.sendCodeHandler({cacheKey:null!==(n=null!=e?e:t)&&void 0!==n?n:"",nextUrl:o}))})))}sendPhoneCodeForTwoStep(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:e.verify_ticket}))),(0,Li.z)((({verify_ticket:e,not_login_ticket:t,mobile:i})=>this.service.sendPhoneCodeWithType({verify_ticket:e,not_login_ticket:t,type:t?13:22,method:"GET",mobile:i}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForForceResetPwd(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket}))),(0,he.M)(this.state$),(0,Li.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendPhoneCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendEmailCodeForForceResetPwd(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket,isEmail:!0}))),(0,he.M)(this.state$),(0,Li.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendEmailCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({email:!0,cacheKey:e})))))}sendEmailCodeForLogin(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,Ki.b)((()=>Jl({send_reason:"user_click"}))),(0,Li.z)((({email:e,not_login_ticket:t,verify_ticket:i})=>this.service.sendEmailCodeForLogin({email:null!=e?e:"",extra_params:{not_login_ticket:t,verify_ticket:i}}).pipe(this.sendCodeHandler({email:!0,cacheKey:i})))))}sendEmailCodeForVerify(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,Li.z)((e=>this.service.verifySendEmailCode(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${e.verify_ticket}`})))))}sendEmailCodeForSignup(e){return e.pipe((0,Ki.b)((e=>this.reportSendCode({reason:"user_click",cacheKey:`${e.email}`,isEmail:!0}))),(0,Li.z)((e=>this.ageGate.validateAge((0,Ii.of)({canSkip:!1})).pipe((0,fl.T)(1),(0,Li.z)((({payload:t})=>"boolean"==typeof t?(0,Ii.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendEmailCodeForSignup(e).pipe((0,Ki.b)((e=>{1023===e.error_code&&(e.emailRegistered=!0)})),this.sendCodeHandler({email:!0,agePayload:null!=t?t:void 0,cacheKey:`${e.email}`})):(0,Ii.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,Ji.O)(this.getActions().setSendCodeLoading(!0)),(0,Xi.l)(this.getActions().setSendCodeLoading(!1))))))}sendEmailCodeForReset(e){return e.pipe((0,Ki.b)((e=>{var t;return this.reportSendCode({reason:"forgot_password",cacheKey:`${null!==(t=e.email)&&void 0!==t?t:e.verify_ticket}`,isEmail:!0})})),(0,Li.z)((e=>{var t;return this.service.sendEmailCodeForResetPwd(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${null!==(t=e.email)&&void 0!==t?t:`${e.verify_ticket}`}`,nextUrl:e.nextUrl}))})))}reportSendCode(e){const{cacheKey:t,reason:i,isEmail:o}=e;this.sendReason=i,this.isEmail=Boolean(o);const{hasSent:n}=Xl(t);o?Jl({is_retry:n,send_reason:i}):Kl({is_retry:n,send_reason:i})}reportSendCodeResult(e){const{error_code:t,"x-tt-logid":i,message:o,description:n}=e,a={status:t?1:0,error_code:t,error_desc:o||n,type:this.sendReason,logid:i};var r;this.isEmail?(r=a,re.W.event("monitor_send_email_code",r)):(e=>{re.W.event("monitor_send_sms",e)})(a)}sendCodeHandler({cacheKey:e,agePayload:t,email:i,nextUrl:o}){return n=>n.pipe((0,Ki.b)((e=>this.reportSendCodeResult(e))),(0,Li.z)((n=>{var a;const{retry_time:r=60,emailRegistered:s,ticket:l,error_code:d}=n;return d||(((e,t,i)=>{(0,yi.D9)(`sms_code_count_down${i?"_email":""}_${e}`,`${Date.now()+1e3*t}`)})(e,r,i),o&&this.history.push(o)),Rl(d)?(0,Ii.of)(this.riskError.getActions().handleRiskError({errorCode:d})):1356===d?(0,Ii.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd")):l?(0,Ii.of)(this.getActions().setTicket(l)):kl[d]?(0,Ii.of)(this.phone.getActions().setErrorMsg(kl[d]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):wl[d]?(0,Ii.of)(this.email.getActions().setEmailErrorMsg(wl[d]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):(0,Ii.of)(this.getActions().setErrorMsg({description:s||!d?"":null!==(a=n.description)&&void 0!==a?a:"Sorry, something went wrong, please try again later",emailRegistered:s}),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop())})),(0,Ji.O)(this.getActions().setSendCodeLoading(!0)),(0,Xi.l)(this.getActions().setSendCodeLoading(!1)))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],td.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"setCode",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"setTicket",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"setSendCodeLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"clearGetCodeError",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendPhoneCodeForVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendPhoneCodeForLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendPhoneCodeForResetPwd",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendPhoneCodeForTwoStep",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendPhoneCodeForForceResetPwd",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendEmailCodeForForceResetPwd",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendEmailCodeForLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendEmailCodeForVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendEmailCodeForSignup",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],td.prototype,"sendEmailCodeForReset",null),td=(0,m.__decorate)([(0,ge.Y)("SendCode"),(0,m.__metadata)("design:paramtypes",[Gl,Ol.Q,hl,$l,ed,Il,Vl])],td);var id=i(15608),od=i(87837);let nd=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleSyncKrPolicyApprove=e=>{this.service.emitEvent("SyncKrPolicyApprove",this.defaultMetrics,e)}}};nd=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],nd);let ad=class extends pe.D{constructor(e,t,i,o){super(),this.pnsSlardar=e,this.pnsReport=t,this.service=i,this.appContext=o,this.defaultState={krPolicySelection:[],termsDomContent:"",privacyDomContent:""}}setKrPolicySelection(e,t){e.krPolicySelection=t}setTermsDomContent(e,t){e.termsDomContent=t}setPrivacyDomContent(e,t){e.privacyDomContent=t}requestPolicyContent(e){return e.pipe((0,he.M)(this.appContext.state$),(0,Li.z)((([{articleKeys:e},{appContext:t}])=>(0,id.D)(e.map((e=>{var i;return this.service.getPolicyContent({lang:null!==(i=null==t?void 0:t.language)&&void 0!==i?i:"en",project_key:"legal",article_key:e})})))))).pipe((0,Li.z)((e=>(0,Ii.of)(this.getActions().setTermsDomContent(e[0].body.article_content),this.getActions().setPrivacyDomContent(e[1].body.article_content)))))}syncKrPolicyApprove(){var e;const{krPolicySelection:t}=this.state,{region:i}=null!==(e=this.appContext.state.appContext)&&void 0!==e?e:{};if("KR"!==i||!t.length)return(0,Ii.of)(null);const o=-1!==t.indexOf("push-policy");return this.pnsReport.handlePolicyConfirmOnFYP({trending:o?"on":"off"}),this.service.setUniversalPopOperation({business:"kr_consent_market_message",policy_version:"v20200629",style:"bottom",operation:-1!==t.indexOf("push-policy")?"2":"1",aid:1988}).pipe((0,_e.U)((({status_code:e})=>{if(this.pnsSlardar.handleSyncKrPolicyApprove({error_code:`${e}`}),0!==e)throw new Error(`sync kr policy error, error_code: ${e}`);return(0,Ii.of)(null)})),(0,Ai.K)((e=>(console.error(e),(0,Ii.of)({status_code:-1})))),(0,od.X)(1))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],ad.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Array]),(0,m.__metadata)("design:returntype",void 0)],ad.prototype,"setKrPolicySelection",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],ad.prototype,"setTermsDomContent",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],ad.prototype,"setPrivacyDomContent",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],ad.prototype,"requestPolicyContent",null),ad=(0,m.__decorate)([(0,ge.Y)("PolicyModule"),(0,m.__metadata)("design:paramtypes",[nd,se,xe,K.G])],ad);var rd=i(68254);let sd=class extends pe.D{constructor(e,t,i){super(),this.fetch=e,this.complianceService=t,this.t=i,this.defaultState={isRegisterWithPrivateOn:!1}}setIsRegisterWithPrivateOn(e,t){e.isRegisterWithPrivateOn=t}handlePrivateConfirm(e){return e.pipe((0,ve.z)((()=>this.complianceService.postPrivateBannerAck())),(0,_e.U)((()=>this.getActions().setIsRegisterWithPrivateOn(!1))),(0,Ai.K)((e=>(console.error(e),Zt.h.open({content:this.t("Sorry, something went wrong, please try again later"),duration:2e3}),(0,Ii.of)(this.noop())))))}getIsRegisterPrivateAccount(){return this.fetch.get("/api/user/detail/self/",{query:{tt_csrf_token:this.fetch.csrfToken}}).pipe((0,_e.U)((({statusCode:e,userInfo:t})=>{var i,o;if(0!==e&&10222!==e)throw new Error(`getIsRegisterPrivateAccount error, error_code ${e}`);return null!==(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.showPrivateBanner)&&void 0!==o&&o})),(0,Ai.K)((e=>(console.error(e),(0,Ii.of)(!1)))),(0,od.X)(1))}};var ld;(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],sd.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],sd.prototype,"setIsRegisterWithPrivateOn",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],sd.prototype,"handlePrivateConfirm",null),sd=(0,m.__decorate)([(0,ge.Y)("RegisterPrivateAccount"),(0,m.__param)(2,(0,co.t)(po.s)),(0,m.__metadata)("design:paramtypes",[fe.r,rd.n,Function])],sd),function(e){e.ShowConsentCheckBox="show_button_consent_check_box",e.ClickConsentCheckBox="click_button_consent_check_box",e.RegisterClick="register_click_next"}(ld||(ld={}));var dd=i(38645),cd=i(745),pd=i.n(cd);let ud=class{constructor(e){this.fetch=e}validateUsername(e){return this.fetch.get("https://www.tiktok.com/api/uniqueid/check/",{query:{unique_id:e,fromWeb:1,aid:1180}}).pipe(this.errorHandler)}validateFTCUsername(e){return this.fetch.get("https://www.tiktok.com/api/register/check/login/name/",{query:{login_name:e}}).pipe(this.errorHandler)}syncEmailConsentInfo(){return this.fetch.post("https://www.tiktok.com/api/privacy/agreement/record/agree/v1",{body:pd().stringify({record_name:"email_consent",tt_csrf_token:this.fetch.csrfToken||"IQodDvCCo34LIXpe5ArEKd-S"})})}errorHandler(e){return e.pipe((0,Ai.K)((e=>(0,Ii.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var gd;ud=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],ud),function(e){e.Third="Third",e.Phone="Phone"}(gd||(gd={}));let md=class extends pe.D{constructor(e,t,i,o,n,a,r,s,l,d){super(),this.service=e,this.policy=t,this.registerPrivateAccount=i,this.ageGate=o,this.accountService=n,this.loginReport=a,this.t=r,this.regionService=s,this.history=l,this.riskError=d,this.defaultState={username:"",signupLoading:!1}}setSuccess(e){e.success=!0}setEmailConsent(e,t){e.emailConsent=t}setErrorMsg(e,t){e.errorMsg=t}setLoading(e,t){e.signupLoading=t}setCheckNameLoading(e,t){e.checkNameLoading=t}setUsername(e,t){e.username=t}setUsernameInfo(e,t){e.usernameInfo=t}setFromNotRegisterLogin(e,t){e.fromNotRegisterLogin=t}cacheSmsCodeKey(e,t){e.phoneNotRegistered=t,e.fromNotRegisterLogin="Phone"}cacheThirdNotRegistered(e,t){e.thirdPlatformNotRegistered=t,e.fromNotRegisterLogin="Third"}clearSignUpResult(e){e.errorMsg=""}registerThirdPlatform(e){return e.pipe((0,he.M)(this.ageGate.state$),(0,Li.z)((([{platform:e,profileKey:t,rrc:i,ageCheckDone:o},{ageGateAction:n,birthday:a}])=>0===n||1===n&&-1!==["facebook","google"].indexOf(e)||o?this.accountService.thirdLogin({platform_app_id:dd.Oy[e],platform:e,profile_key:t,rrc:i,login_only:!1,birthday:a}).pipe((0,_e.U)((t=>(t.fromThird=!0,this.loginReport.setPlatform(e),t.platform=e,this.getActions().handleSignupResult(t)))),(0,Ji.O)(this.getActions().setLoading(!0)),(0,Xi.l)(this.getActions().setLoading(!1))):(this.history.push($.gY.signupAgeGate),(0,Ii.of)(this.getActions().cacheThirdNotRegistered({platform:e,profileKey:t}))))))}registerPhone(e){return e.pipe((0,Ki.b)((()=>{this.loginReport.setPlatform("sms_verification"),this.loginReport.loginSubmit({signUp:!0})})),(0,he.M)(this.state$,this.ageGate.state$),(0,Li.z)((([{ageCheckDone:e},{phoneNotRegistered:t},{ageGateAction:i,birthday:o}])=>{var n,a;return i&&!e?(this.history.push($.gY.signupAgeGate),(0,Ii.of)(this.noop())):this.accountService.smsLoginContinue({mobile:null!==(n=null==t?void 0:t.mobile)&&void 0!==n?n:"",sms_code_key:null!==(a=null==t?void 0:t.smsCodeKey)&&void 0!==a?a:"",extra_params:{birthday:o}}).pipe((0,_e.U)((e=>(e.platform="sms_verification",this.getActions().handleSignupResult(e)))),(0,Ji.O)(this.getActions().setLoading(!0)),(0,Xi.l)(this.getActions().setLoading(!1)))})))}syncUserInfos(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([{fromThird:e,fromEmail:t,fromFTC:i},{emailConsent:o}])=>(0,id.D)([this.policy.syncKrPolicyApprove(),this.syncEmailConsent(o),this.registerPrivateAccount.getIsRegisterPrivateAccount()]).pipe((0,Yi.w)((o=>{const[,,n]=o,a=e||t?$.gY.signupCreateUsername:$.gY.signupCreatePassword;return i||this.history.push(a),(0,Ii.of)(this.getActions().setLoading(!1),this.registerPrivateAccount.getActions().setIsRegisterWithPrivateOn(n),i?this.getActions().setSuccess():this.noop())}))))))}validateUsername(e){return e.pipe((0,Li.z)((({name:e,fromThird:t})=>e?this.service.validateUsername(e).pipe((0,Li.z)((i=>{const{status_code:o,recommended_unique_ids:n,is_valid:a,status_msg:r}=i,s=!a&&t?null==n?void 0:n[0]:e;return t&&!s?(0,Ii.of)(this.noop()):(0,Ii.of)(this.getActions().setUsernameInfo({value:s,isValid:a,suggestList:n,errorMsg:t?"":Ml(o,Boolean(n),r)}))})),(0,Ji.O)(this.getActions().setCheckNameLoading(!0)),(0,Xi.l)(this.getActions().setCheckNameLoading(!1))):(0,Ii.of)(this.getActions().setUsernameInfo(void 0)))))}validateFTCUsername(e){return e.pipe((0,Li.z)((({name:e})=>e?this.service.validateFTCUsername(e).pipe((0,_e.U)((t=>{const{valid:i}=t;return this.getActions().setUsernameInfo({value:e,isValid:i,errorMsg:i?"":"common_registration_username_error_ sensitivity"})})),(0,Ji.O)(this.getActions().setCheckNameLoading(!0)),(0,Xi.l)(this.getActions().setCheckNameLoading(!1))):(0,Ii.of)(this.getActions().setUsernameInfo(void 0)))))}usernameRegister(e){return e.pipe((0,Ki.b)((()=>{this.loginReport.setPlatform("handle"),this.loginReport.loginSubmit({signUp:!0})})),(0,he.M)(this.state$,this.ageGate.state$),(0,Li.z)((([{password:e},{username:t},{birthday:i}])=>this.accountService.usernameRegister({password:e,username:t,extra_params:{birthday:i}}).pipe((0,_e.U)((e=>(e.fromFTC=!0,this.getActions().handleSignupResult(e)))),(0,Ji.O)(this.getActions().setLoading(!0)),(0,Xi.l)(this.getActions().setLoading(!1))))))}emailRegister(e){return e.pipe((0,he.M)(this.ageGate.state$,this.state$),(0,Ki.b)((([,,{emailConsent:e}])=>{var t;this.loginReport.setPlatform("email"),this.loginReport.loginSubmit({signUp:!0}),t=void 0===e?{}:{status:e?"checked":"unchecked",text_type:"long_version"},re.W.event("register_click_next",t)})),(0,Li.z)((([{password:e,code:t,email:i},{birthday:o}])=>this.accountService.emailRegister({password:e,code:t,email:i,ifLogin:!0,extra_params:{birthday:o,email_logic_type:e?2:1}}).pipe((0,_e.U)((e=>(e.fromEmail=!0,this.getActions().handleSignupResult(e)))),(0,Ji.O)(this.getActions().setLoading(!0)),(0,Xi.l)(this.getActions().setLoading(!1))))))}handleSignupResult(e){return e.pipe((0,Li.z)((e=>{const{error_code:t,errorMsg:i,description:o,error_msg:n,fromThird:a,fromFTC:r,fromEmail:s,name:l,screen_name:d,sec_user_id:c,default_error_msg:p}=e;if(!t)return this.loginReport.loginSuccess({is_register:1}),this.regionService.authBroadcast({screen_name:d,sec_uid:c}).pipe((0,Li.z)((()=>(0,Ii.of)(this.getActions().syncUserInfos({fromThird:a,fromEmail:s,fromFTC:r}),a?this.getActions().validateUsername({name:l,fromThird:a}):this.noop()))));if(this.loginReport.loginFailure({error_code:t,signUp:!0}),Rl(t))return(0,Ii.of)(this.riskError.getActions().handleRiskError({errorCode:t}));const u=i||n||o||p;return a?(Al(this.t(u)),(0,Ii.of)(this.noop())):(0,Ii.of)(this.getActions().setErrorMsg(u))})))}syncEmailConsent(e){return e?this.service.syncEmailConsentInfo().pipe((0,_e.U)((()=>(0,Ii.of)(null))),(0,Ai.K)((e=>(console.error(e),(0,Ii.of)({status_code:-1}))))):(0,Ii.of)(null)}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],md.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setSuccess",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setEmailConsent",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setCheckNameLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setUsername",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setUsernameInfo",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"setFromNotRegisterLogin",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"cacheSmsCodeKey",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"cacheThirdNotRegistered",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"clearSignUpResult",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"registerThirdPlatform",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"registerPhone",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"syncUserInfos",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"validateUsername",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"validateFTCUsername",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"usernameRegister",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"emailRegister",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],md.prototype,"handleSignupResult",null),md=(0,m.__decorate)([(0,ge.Y)("SignupModule"),(0,m.__param)(6,(0,co.t)(po.s)),(0,m.__metadata)("design:paramtypes",[ud,ad,sd,hl,Ol.Q,dl.ZI,Function,Ll.D,Il,Vl])],md);let hd=class extends pe.D{constructor(e,t,i,o,n,a,r,s,l,d,c,p){super(),this.appContext=e,this.contextModule=t,this.signupModule=i,this.service=o,this.regionService=n,this.ageGate=a,this.loginReport=r,this.sendCode=s,this.phone=l,this.t=d,this.history=c,this.riskError=p,this.defaultState={errorMsg:"",showReactiveModal:!1,loginLoading:!1}}setLoginSuccess(e,t){e.success=null!=t?t:1}setErrorMsg(e,t){e.errorMsg=t}setErrorCode(e,t){e.errorCode=t}setTwoStepVerifyRes(e,t){e.twoStepResponse=t}setNeedForceResetPassword(e,t){const i=t.otp_type.match("email")?"email":"phone";this.history.push("email"===i?$.gY.loginForgetEmailPassword:$.gY.loginForgetPhonePassword),e.forceResetResponse=Object.assign(Object.assign({},t),{type:i})}clearForceResetRes(e){e.forceResetResponse=void 0}setShowReactiveModal(e,t){e.showReactiveModal=t.show,t.res?e.inCancellationResponse=Object.assign(Object.assign({},t.res),{isStopAccount:1430===t.res.error_code}):e.inCancellationResponse=void 0}setLoginLoading(e,t){e.loginLoading=t}setPhoneNotRegistered(e,t){e.phoneNotRegistered=t}clearLoginResult(e){e.errorMsg="",e.phoneNotRegistered=!1,e.twoStepResponse=void 0}cancelDeleteAccount(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{var i,o;const n=null===(i=t.inCancellationResponse)||void 0===i?void 0:i.token;return((null===(o=t.inCancellationResponse)||void 0===o?void 0:o.isStopAccount)?this.service.cancelDeactiveAccount({token:n,type:0}):this.service.cancelDeleteAccount({token:n,type:0})).pipe((0,Li.z)((e=>(e.successType=2,(0,Ii.of)(this.getActions().setShowReactiveModal({show:!1}),this.getActions().handleLoginResult(e))))))})))}handleForceResetPwdByEmail(e){return e.pipe((0,Li.z)((e=>this.service.validateEmailCodeForForceReset(e).pipe((0,Yi.w)((t=>{const{error_code:i,ticket:o}=t;return i?(0,Ii.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,_e.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1)))})),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwdByPhone(e){return e.pipe((0,Li.z)((e=>this.service.validatePhoneCodeForForceReset(e).pipe((0,Li.z)((t=>{const{error_code:i,ticket:o}=t;return i?(0,Ii.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,_e.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1)))})),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwd(e){return e.pipe((0,Li.z)((e=>{var{type:t}=e,i=(0,m.__rest)(e,["type"]);return("email"===t?this.service.forceResetPwdByEmailTicket(i):this.service.forceResetPwdByMobileTicket(i)).pipe((0,_e.U)((e=>(e.password=i.password,this.getActions().handleLoginResult(e)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1)))})))}handlePasswordLogin(e){return e.pipe((0,he.M)(this.contextModule.state$),(0,Li.z)((([e,{isSecurityVerification:t}])=>(t?this.service.verifyPwdWithoutLogin(e):this.service.passwordLogin(e)).pipe((0,_e.U)((t=>{var i;const{verify_ticket:o}=null!==(i=e.extra_params)&&void 0!==i?i:{};return o&&this.loginReport.twoStepResult({error_code:t.error_code,result:t.error_code?"fail":"success",verification_method:"password"}),t.accountQuery=e,xl[t.error_code]&&e.mobile&&(t.errorMsg=xl[t.error_code]),this.getActions().handleLoginResult(t)})),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}changePwdByEmail(e){return e.pipe((0,Li.z)((({password:e,email:t,emailCode:i,not_login_ticket:o,verify_ticket:n})=>this.service.resetPwdLoginByEmail({email:t,code:i,password:e,extra_params:{not_login_ticket:o,verify_ticket:n}}).pipe((0,_e.U)((t=>(n&&this.loginReport.twoStepResult({verification_method:"email",error_code:t.error_code,result:t.error_code?"fail":"success"}),t.error_code&&(t.password=e,1011===t.error_code&&(t.errorMsg="common_login_reset_email_input_error")),this.getActions().handleLoginResult(t)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}handleSmsLogin(e){return e.pipe((0,Li.z)((({mobile:e,phoneCode:t,login_only:i,birthday:o})=>this.ageGate.validateAge((0,Ii.of)({canSkip:i})).pipe((0,fl.T)(1),(0,Li.z)((({payload:n})=>"boolean"==typeof n?(0,Ii.of)(this.ageGate.getActions().setShowAgeConfirm(n)):(null==n?void 0:n.ageEligible)||null===n?this.service.smsLogin({mobile:e,code:t,login_only:i,birthday:o}).pipe((0,Li.z)((e=>(e.error_code&&(e.errorMsg=Sl[e.error_code]),(0,Ii.of)(this.getActions().handleLoginResult(e),n?this.ageGate.getActions().setAgeCheckResult(n):this.noop())))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))):(0,Ii.of)(this.ageGate.getActions().setAgeCheckResult(n))))))))}handleSmsVerify(e){return e.pipe((0,Li.z)((({mobile:e,phoneCode:t})=>this.service.smsVerify({mobile:e,code:t}).pipe((0,Li.z)((e=>(e.error_code&&(e.errorMsg=Sl[e.error_code]),(0,Ii.of)(this.getActions().handleLoginResult(e))))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}changePwdByMobile(e){return e.pipe((0,Li.z)((({password:e,mobile:t,phoneCode:i})=>this.service.changePwdByMobile({mobile:t,code:i,password:e}).pipe((0,_e.U)((t=>(t.error_code&&(t.password=e,t.errorMsg=Sl[t.error_code]),this.getActions().handleLoginResult(t)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}setAccount(e){return e.pipe((0,Li.z)((e=>{var{nextUrl:t}=e,i=(0,m.__rest)(e,["nextUrl"]);return this.service.setAccount(i).pipe((0,_e.U)((e=>{const{error_code:i,description:o}=e;return i?(Al(this.t(o)),this.noop()):t?(this.history.push(t),this.noop()):this.getActions().setLoginSuccess()})),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1)))})))}handleChangePwdByTicket(e){return e.pipe((0,Li.z)((e=>{var{type:t}=e,i=(0,m.__rest)(e,["type"]);return("email"===t?this.service.resetPwdByEmailTicket(i):this.service.resetPwdByMobileTicket(i)).pipe((0,_e.U)((e=>(e.error_code&&(e.password=i.password,e.errorMsg=Sl[e.error_code]),this.getActions().handleLoginResult(e)))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1)))})))}handleLoginResult(e){return e.pipe((0,he.M)(this.contextModule.state$,this.phone.state$,this.appContext.state$),(0,Li.z)((([e,{disableSignup:t,isSecurityVerification:i,phoenix:o},{mobile:n},{appContext:a}])=>{const{error_code:r,errorMsg:s,error_msg:l,description:d,new_user:c,screen_name:p,sec_user_id:u,successType:g,ticket:m,default_error_msg:h}=e;if(El.g.hide(),c)return this.loginReport.loginSuccess({is_register:1}),(0,Ii.of)(this.signupModule.getActions().syncUserInfos({}));if(!r)return this.loginReport.loginSuccess({is_register:0}),i&&this.setTicketIntoCookie(m,o),this.regionService.authBroadcast({screen_name:p,sec_uid:u}).pipe((0,_e.U)((()=>this.getActions().setLoginSuccess(g))));if(this.loginReport.loginFailure({error_code:r}),1381===r)return(0,Ii.of)(this.getActions().setNeedForceResetPassword(e));if(2046===r)return(0,Ii.of)(this.getActions().setTwoStepVerifyRes(e));if(-1!==Tl.indexOf(r))return(null==a?void 0:a.isMobile)&&this.history.push({pathname:$.gY.accountDeactivate,state:{init:!0}}),(0,Ii.of)(this.getActions().setShowReactiveModal({show:!0,res:e}));if(1053===r)return(0,Ii.of)(this.contextModule.getActions().setShowAlertMessageType("twoStepVerifyBlock"));if(1356===r)return(0,Ii.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd"));if(1011===r&&t||1045===r&&i)return(0,Ii.of)(this.contextModule.getActions().setShowAlertMessageType("inexistent"));if(1011===r){if(e.sms_code_key)return(0,Ii.of)(this.getActions().setPhoneNotRegistered(!0),this.signupModule.getActions().cacheSmsCodeKey({smsCodeKey:e.sms_code_key,mobile:n}));if(e.profile_key)return(0,Ii.of)(this.signupModule.getActions().registerThirdPlatform({profileKey:e.profile_key,platform:e.platform}))}if(Rl(r))return(0,Ii.of)(this.riskError.getActions().handleRiskError({errorCode:r}));if(kl[r])return(0,Ii.of)(this.phone.getActions().setErrorMsg(kl[r]));const _=Sl[r]||s||l||d||h;return jl.includes(r)?(0,Ii.of)(this.sendCode.getActions().setErrorMsg({description:_})):(0,Ii.of)(this.getActions().setErrorMsg(_),this.getActions().setErrorCode(r))})))}setTicketIntoCookie(e,t){const i=new Date;i.setTime((new Date).getTime()+12e5),bl().set("security_verification_ticket",e,{domain:t?"www.tiktok.in":"tiktok.com",secure:!0,expires:i})}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],hd.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setLoginSuccess",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setErrorCode",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setTwoStepVerifyRes",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setNeedForceResetPassword",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"clearForceResetRes",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setShowReactiveModal",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setLoginLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setPhoneNotRegistered",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"clearLoginResult",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"cancelDeleteAccount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleForceResetPwdByEmail",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleForceResetPwdByPhone",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleForceResetPwd",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handlePasswordLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"changePwdByEmail",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleSmsLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleSmsVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"changePwdByMobile",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"setAccount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleChangePwdByTicket",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],hd.prototype,"handleLoginResult",null),hd=(0,m.__decorate)([(0,ge.Y)("LoginResultDealModule"),(0,m.__param)(9,(0,co.t)(po.s)),(0,m.__metadata)("design:paramtypes",[K.G,Gl,md,Ol.Q,Ll.D,hl,dl.ZI,td,$l,Function,Il,Vl])],hd);var _d=i(1360);const vd=(0,_d.Z)("div",{target:"esqadv70"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",width:e.isMobile?"300px":"400px",padding:"32px"})),"label:DivContainer;"),yd=(0,_d.Z)("h5",{target:"esqadv71"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"24px",lineHeight:"36px",textAlign:"center",margin:"0"}]),"label:H5Title;"),bd=(0,_d.Z)("p",{target:"esqadv72"})([({theme:e})=>(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"17px",margin:"16px 0px 24px",textAlign:"center",fontSize:"14px"}],"label:PDesc;"),fd=(0,_d.Z)("div",{target:"esqadv73"})({display:"flex",flexDirection:"column"},"label:DivButtonWrapper;"),xd=(0,_d.Z)(bt.W,{target:"esqadv74"})({minWidth:"auto",flex:"1",":last-child":{marginTop:"12px"}},"label:StyledButton;"),kd=(0,j.memo)((()=>{const e=(0,ni.Q)("WebApp_Login"),[{showReactiveModal:t},{setShowReactiveModal:i,cancelDeleteAccount:n}]=(0,V.b7)(hd),a=(0,j.useCallback)((()=>{i({show:!1})}),[i]),r=(0,j.useCallback)((()=>{n()}),[n]);return(0,o.jsx)(Tt.u_,Object.assign({visible:t,maskCloseable:!1,onClose:a},{children:(0,o.jsxs)(vd,{children:[(0,o.jsx)(yd,{children:e("reactivate_h1")},void 0),(0,o.jsx)(bd,{children:e("logback_reactivate_desc")},void 0),(0,o.jsxs)(fd,{children:[(0,o.jsx)(xd,Object.assign({size:"large",buttonTheme:"primary",onClick:r},{children:e("reactivate_btn")}),void 0),(0,o.jsx)(xd,Object.assign({size:"large",onClick:a},{children:e("common_registration_phone_input_popup_button")}),void 0)]},void 0)]},void 0)}),void 0)}));var wd=i(64236);const Sd=(0,_d.Z)("div",{target:"e1lgic6i0"})({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginTop:"40px",fontWeight:600},"label:DivBack;");Sd.defaultProps=Object.assign(Object.assign({},Sd.defaultProps),{"data-e2e":"back-btn"});const jd=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{loginModalShow:t}=(0,V.mp)($t.r),i=(0,P.k6)(),n=(0,P.$B)([$.gY.loginQRcode,$.gY.loginPhoneOrEmail,$.gY.signupPhoneOrEmail]),a=(0,j.useCallback)((()=>{i.goBack()}),[i]);return t||!n?null:(0,o.jsxs)(Sd,Object.assign({onClick:a},{children:[(0,o.jsx)(wd.Z,{},void 0),e("common_login_back")]}),void 0)}));var Cd,Pd=i(85866),Td=i(24054),Od=i(92178);!function(e){e.ClickSignUp="click_sign_up",e.ClickLoginButton="click_login_button",e.EnterSignUp="enter_sign_up"}(Cd||(Cd={}));var Ld;!function(e){e.ClickQrCcode="click_QR_login",e.ScanQrCode="scan_QR_login"}(Ld||(Ld={}));var Id=i(59688),Ad=i(39022),Ed=i.n(Ad);function Md(e,t){return(0,V.mp)(Gl,{selector:t=>{const i=t;return Ed()(i,...e())},dependencies:t})}var Rd=i(38743);const Fd=(0,_d.Z)("a",{target:"e15g97fd0"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima"}),{height:"18px",fontWeight:600,fontSize:"14px",lineHeight:"17px",display:"flex",alignItems:"center"}]),"label:AHelpTag;");Fd.defaultProps=Object.assign(Object.assign({},Fd.defaultProps),{"data-e2e":"feedback-entrance"});const Dd=(0,_d.Z)(Rd.Z,{target:"e15g97fd1"})((({theme:e})=>({width:"20px",height:"20px",color:e.colors.TextTertiary,transform:"rtl"===e.direction?"rotateY(180deg)":"unset"})),"label:StyledHelpIcon;"),Bd=(0,_d.Z)("span",{target:"e15g97fd2"})({marginInlineStart:"7px",color:"TextQuaternary"},"label:SpanHelpText;");var zd;!function(e){e.ForYou="https://www.tiktok.com/foryou",e.Support="https://support.tiktok.com",e.Feedback="https://www.tiktok.com/feedback"}(zd||(zd={}));const Nd=(0,j.memo)((function(){var e;const t=(0,ni.Q)("WebApp_Login"),{forceLogin:i,phoenix:n}=Md((()=>["forceLogin","phoenix"]),[]),{isMobile:a,language:r}=(0,J.m7)((0,ne.L)((()=>["isMobile","language"]),[])),s=i?`https://support.tiktok.com/${r}`:`https://www.tiktok.com/feedback/?lang=${r}`,l=[$.gY.signupPolicyConfirm,$.gY.signupPrivateOn,$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount];return(null===(e=(0,P.$B)(l))||void 0===e?void 0:e.isExact)||n?null:(0,o.jsxs)(Fd,Object.assign({href:s,target:"_blank",rel:"noopener noreferrer",className:"help-center"},{children:[(0,o.jsx)(Dd,{},void 0),!a&&(0,o.jsx)(Bd,{children:t("common_registration_feedback")},void 0)]}),void 0)})),Ud=(e,t,i)=>{var o;const n=`https://www.tiktok.com/foryou?lang=${e}`,a=window.decodeURIComponent(null!=i?i:""),r=a.match(location.origin)&&"/"===(null===(o=new URL(a))||void 0===o?void 0:o.pathname),s=[/^https?:\/\/([\w\-.]+?\.)?tiktok\.(com|in)(\/.*)?$/,"https://seller.tiktokglobalshop.com/"].some((e=>new RegExp(e).test(a)))||t&&["https://seller-boe.byteintl.net/",/^https?:\/\/([\w\-.]+?\.)?bytedance\.net(\/.*)?$/].some((e=>new RegExp(e).test(a)));return r?n:s&&a?a:n},Wd=(e,t,i)=>{const o=Ud(e,t,i);setTimeout((()=>{location.href=o}),1e3)},qd=(0,_d.Z)("header",{target:"e1x3uhsi0"})((({theme:e})=>({position:"fixed",width:"100%",top:0,left:0,height:44,background:`${e.colors.BGPrimary}`,padding:"0 16px",zIndex:2})),"label:HeaderWrapper;"),Gd=(0,_d.Z)("div",{target:"e1x3uhsi1"})((({align:e,theme:t})=>[(0,de.YJ)({direction:t.direction,start:"left"===e?"16px":"unset",end:"right"===e?"16px":"unset"}),{display:"flex",alignItems:"center",fontSize:"20px",position:"absolute",top:"12px"}]),"label:DivIcon;"),Hd=(0,_d.Z)(wd.Z,{target:"e1x3uhsi2"})((({theme:e})=>({transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"})),"label:StyledBackIcon;"),Zd=(0,_d.Z)("div",{target:"e1x3uhsi3"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{fontSize:"17px",textAlign:"center",lineHeight:"44px",fontWeight:700}]),"label:DivTitle;");Zd.defaultProps=Object.assign(Object.assign({},Zd.defaultProps),{"data-e2e":"header-text"});const $d=({title:e,showClose:t,showLeft:i=!0,showRight:n=!0,backIcon:a=!0,LeftIcon:r,onClose:s})=>{const{language:l,env:d}=(0,J.m7)((0,ne.L)((()=>["language","env"]),[])),{redirectUrl:c,hideHomePage:p}=Md((()=>["redirectUrl","hideHomePage"]),[]),u=(0,P.$B)([$.gY.loginPhoneOrEmail])&&p,g=(0,P.k6)(),m=(0,j.useCallback)((()=>{t?s?s():Wd(l,"boe"===(null==d?void 0:d.type),c):g.goBack()}),[g,t,s,l,c,d]),h=(0,j.useCallback)((()=>r?(0,o.jsx)(r,{},void 0):t?(0,o.jsx)(Id.Z,{"data-e2e":"close-btn"},void 0):a?(0,o.jsx)(Hd,{"data-e2e":"back-btn"},void 0):null),[r,a,t]);return(0,o.jsxs)(qd,{children:[!u&&i&&(0,o.jsx)(Gd,Object.assign({align:"left",onClick:m},{children:h()}),void 0),e&&(0,o.jsx)(Zd,{children:e},void 0),!p&&n&&(0,o.jsx)(Gd,Object.assign({align:"right"},{children:(0,o.jsx)(Nd,{},void 0)}),void 0)]},void 0)},Vd=(0,_d.Z)("div",{target:"e1cgu1qo0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima"}),{border:`1px solid ${e.colors.LineSecondary2}`,fontSize:"15px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",height:"44px",position:"relative",cursor:"pointer",marginBottom:"16px",wordBreak:"keep-all",whiteSpace:"nowrap",background:e.colors.BGTertiary}]),"label:DivBoxContainer;");Vd.defaultProps=Object.assign(Object.assign({},Vd.defaultProps),{"data-e2e":"channel-item"});const Qd=(0,_d.Z)("div",{target:"e1cgu1qo1"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,start:"12px"}),{fontSize:"20px",position:"absolute",display:"flex"}]),"label:DivIconContainer;"),Yd=e=>{const{text:t,Icon:i}=e;return(0,o.jsxs)(Vd,Object.assign({onClick:e.onClick},{children:[(0,o.jsx)(Qd,{children:(0,o.jsx)(i,{},void 0)},void 0),t]}),void 0)},Kd=(0,_d.Z)("a",{target:"epl6mg0"})((({theme:e,textTheme:t,underline:i=!0})=>[(0,de.GI)({theme:e,color:"primary"===t?"Primary":"TextSecondary",fontWeight:"semiBold"}),{fontSize:"12px","&:hover, &:focus":{textDecoration:i?"underline":"none",textDecorationColor:"primary"===t?e.colors.Primary:e.colors.TextSecondary}}]),"label:ALink;"),Jd=({path:e,text:t,children:i,className:n,replace:a=!1,textTheme:r,underline:s,onClick:l})=>{const d=(0,P.k6)(),c=(0,j.useCallback)((t=>{t.preventDefault(),t.stopPropagation(),null==l||l(),a?d.replace(e):d.push(e)}),[d,e,a,l]);return(0,o.jsxs)(Kd,Object.assign({onClick:c,href:e,className:n,textTheme:r,underline:s},{children:[t,i]}),void 0)};var Xd=i(77006),ec=i(42917),tc=i(94894),ic=i(11153),oc=i(97669),nc=i(86668),ac=i(91574),rc=i(27137),sc=i(91855),lc=i(17021);const dc=(e,t)=>{const i=(o=e,`${dd.lF}:${o}`);var o;const n={timestamp:Number(new Date),timeInterval:6e5},a=Object.assign(Object.assign({},t),{expires:n});(0,yi.D$)(i,JSON.stringify(a)),(0,yi.D$)(e,JSON.stringify(a))},cc=e=>{const t=(0,yi.le)(e);try{return JSON.parse(t)}catch(e){return{}}},pc=e=>{2===Number(null!=e?e:localStorage.getItem("oauthType"))&&(location.href=`${location.href}&no_refactor=1`)},uc="hello_page_login_way",gc=()=>{(0,yi.D$)(uc,"1")},mc="webapp_third_auth_page_redirect";var hc=i(14896),_c=i(14716);let vc=class{constructor(e,t){this.loginReport=e,this.fetch=t}get apple$(){return window.AppleID?(0,Ii.of)(null):(0,Ii.of)(null).pipe((0,Li.z)((()=>(0,id.D)([(0,_c.D)(i.e(6757).then(i.t.bind(i,57956,23))),this.getAppleConfig()]).pipe((0,_e.U)((([e,{data:t}])=>{const{client_id:i,state:o}=t;e.auth.init({clientId:i,state:o,redirectURI:"https://www.tiktok.com/oauth",scope:"name email",response_mode:"fragment",usePopup:!0}),window.AppleID=e}))))),(0,Ai.K)((()=>(0,Ii.of)({error_code:-1}))))}login(){return this.apple$.pipe((0,Yi.w)((()=>(0,_c.D)(window.AppleID.auth.signIn()).pipe((0,Yi.w)((e=>this.afterAppleAuthentication(e))),(0,Ai.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:"popup_closed_by_user"===e.error?2:1,error_desc:e.error})),(0,Ii.of)(Object.assign(Object.assign({error_code:-1},e),{error_msg:"user_trigger_new_signin_flow"===e.error?"":e.error,platform:"apple"})))))))))}afterAppleAuthentication(e){return(0,Ii.of)(e).pipe((0,_e.U)((e=>{const{authorization:t={}}=e,{id_token:i}=t;return{openid:(0,hc.Z)(i).sub,platform_app_id:dd.Oy.apple,platform:"apple",id_token:i}})))}getAppleConfig(){return this.fetch.post("https://www.tiktok.com/passport/web/auth/config",{query:{aid:1459,account_sdk_source:"web"},body:pd().stringify({platform_app_id:dd.Oy.apple,action:"login_only",next:"https://www.tiktok.com/foryou?lang=en"})})}};vc=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[dl.ZI,fe.r])],vc);var yc=i(83157),bc=i(96980);let fc=class{constructor(e){this.loginReport=e,this.loadSdk=e=>{i.e(8400).then(i.t.bind(i,57525,23)).then((({default:t})=>{t.init({facebook:"1862952583919182",google:"1096011445005-sdea0nf5jvj14eia93icpttv27cidkvk.apps.googleusercontent.com",twitter:"rLsbFQ5NHI2IsWZiRc2McRCFc",instagram:"c8785d0dc7df48f298532fddf33d7cb5",vk:"6961453"}),this.helloJS=t,null==e||e()})).catch((t=>{console.error(t),null==e||e()}))}}get helloJS$(){return this.helloJS?(0,Ii.of)(this.helloJS):new me.y((e=>{this.loadSdk((()=>{e.next(),e.complete()}))}))}login(e){const{platform:t,display:i}=e;return"page"===i&&gc(),this.helloJS$.pipe((0,Li.z)((()=>(0,_c.D)(this.helloJS(t).login(e)).pipe((0,Yi.w)((e=>this.afterHelloAuthentication(e)))))),(0,Ai.K)((o=>{var n,a,r,s;return this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},o.error),{status:"cancelled"===(null===(n=o.error)||void 0===n?void 0:n.code)?2:1,error_desc:null===(a=o.error)||void 0===a?void 0:a.message})),"blocked"===(null===(r=o.error)||void 0===r?void 0:r.code)&&"popup"===i&&(e.display="page",this.helloJS(t).login(e),gc()),(0,Ii.of)(Object.assign({platform:t,error_code:-1,error_msg:null===(s=o.error)||void 0===s?void 0:s.message},o.error))})))}ListenLogin(){return this.helloJS$.pipe((0,Yi.w)((()=>(0,yc.R)(this.helloJS,"auth.login").pipe((0,bc.q)(1)))),(0,Yi.w)((e=>((0,yi.e8)(uc),this.afterHelloAuthentication(e[0])))))}afterHelloAuthentication(e){return(0,Ii.of)(e).pipe((0,Yi.w)((e=>{const{network:t,authResponse:i}=e,o="vk"===t?{v:"5.81"}:void 0;return(0,_c.D)(this.helloJS(t).api("me",o)).pipe((0,_e.U)((e=>{const{access_token:o="",oauth_token_secret:n=""}=i;return{openid:e.id,access_token:o,access_token_secret:n,platform:t,platform_app_id:dd.Oy[t]}})))})))}};fc=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[dl.ZI])],fc);let xc=class{constructor(e){this.loginReport=e}get Kakao$(){return window.Kakao?(0,Ii.of)(null):new me.y((e=>{i.e(2628).then(i.t.bind(i,37373,23)).then((({default:t})=>{window.Kakao=t,window.Kakao.init(dd.Sx),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}login(){return this.Kakao$.pipe((0,Li.z)((()=>new me.y((e=>{const t=t=>{console.error(t),e.next({error_code:-1,error_msg:t.message,platform:"kakaotalk"}),e.complete()};window.Kakao.Auth.login({success(i){window.Kakao.API.request({url:"/v2/user/me",success:t=>{e.next(Object.assign({openid:t.id,platform_app_id:dd.Oy.kakaotalk,platform:"kakaotalk"},i)),e.complete()},fail:t})},fail:t})})))),(0,Ai.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:1,error_desc:e.error})),(0,Ii.of)({error_code:-1,platform:"kakaotalk",error_msg:e.message})))))}};xc=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[dl.ZI])],xc);let kc=class extends pe.D{constructor(e,t,i,o,n,a,r,s,l){super(),this.service=e,this.loginResultDealModule=t,this.app=i,this.contextModule=o,this.helloJS=n,this.kakaoSdk=a,this.appleSdk=r,this.slardar=s,this.loginReport=l,this.defaultState={platform:""}}handleHelloJSAuth(e){return e.pipe((0,Li.z)((e=>this.helloJS.login(e).pipe((0,Ki.b)((e=>this.reportThirdGetToken(e))),(0,_e.U)((e=>e.error_code?"cancelled"===e.code?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e)))))))}handleHelloLoginEvent(e){return e.pipe((0,Li.z)((()=>this.helloJS.ListenLogin().pipe((0,_e.U)((e=>e.error_code?this.noop():this.getActions().thirdLogin(e)))))))}handleKakaoLogin(e){return e.pipe((0,Li.z)((()=>this.kakaoSdk.login().pipe((0,_e.U)((e=>(this.reportThirdGetToken(e),this.getActions().thirdLogin(e))))))))}handleAppleLogin(e){return e.pipe((0,Li.z)((({appleToken:e})=>e?this.appleSdk.afterAppleAuthentication(e):this.appleSdk.login()))).pipe((0,Ki.b)((e=>this.reportThirdGetToken(e))),(0,_e.U)((e=>e.error_code?"popup_closed_by_user"===e.error?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e))))}handlePopupAuthorize(e){return e.pipe((0,he.M)(this.app.state$),(0,Li.z)((([{url:e,platform:t},{appContext:i}])=>{var o;return this.jumpAuthorizationPage({url:e,isSmartPlayer:null===(o=null==i?void 0:i.playerInfo)||void 0===o?void 0:o.isSmartPlayer}).pipe((0,_e.U)((({closeByUser:e})=>{if(e)return this.loginReport.thirdPartyLoginResult({error_code:-1,status:2,error_desc:"user cancel login"}),this.noop();const i=cc(t);if("twitter"===t){const e=JSON.stringify({oauth_token:i.oauth_token,oauth_verifier:i.oauth_verifier});i.code=sc.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({openid:i.user_id,platform_app_id:dd.Oy[t],platform:t},i))})))})))}authPageGoRedirect(e){return e.pipe((0,he.M)(this.contextModule.state$),(0,_e.U)((([{platform:e},{loginType:t,redirectUrl:i}])=>(((e,t)=>{const i=(0,be.stringifyUrl)({url:`${window.location.origin}/login`,query:t});location.href=i,(0,yi.D$)(mc,e)})(e,{type:t,redirect_uri:i}),this.noop()))))}dealPageAuthRedirect(e){return e.pipe((0,_e.U)((()=>{const e=(0,yi.le)(mc);if(!e)return this.noop();(0,yi.e8)(mc);const t=cc(e);if("twitter"===e){const e=JSON.stringify({oauth_token:t.oauth_token,oauth_verifier:t.oauth_verifier});t.code=sc.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({platform_app_id:dd.Oy[e],platform:e},t))})))}thirdLogin(e){return e.pipe((0,he.M)(this.contextModule.state$),(0,Li.z)((([e,{isSecurityVerification:t}])=>e.error_code||!e.platform_app_id?(0,Ii.of)(this.loginResultDealModule.getActions().handleLoginResult(e)):(El.g.show(),(t?this.service.thirdVerify(Object.assign(Object.assign({},e),{login_only:!0})):this.service.thirdLogin(Object.assign(Object.assign({},e),{login_only:!0}))).pipe((0,_e.U)((t=>(t.thirdQuery=Object.assign(Object.assign({},e),{profile_key:t.profile_key}),this.loginReport.setPlatform(e.platform),t.platform=e.platform,this.loginResultDealModule.getActions().handleLoginResult(t)))))))))}jumpAuthorizationPage(e){const{url:t,isSmartPlayer:i}=e;let o="";i||(o="resizable,scrollbars,width=500,height=550,display=popup");const n=window.open(t,"_blank",o);return n?new me.y((e=>{const t=setInterval((()=>{(!n||n.closed||n.authDoneClose)&&(clearInterval(t),e.next({closeByUser:!n.authDoneClose}),n.authDoneClose&&n.close(),e.complete())}),100)})):(0,Ei.c)()}reportThirdGetToken(e){var t;const{error_code:i,code:o,error_msg:n,error:a,platform:r}=e;this.slardar.handleThirdGetToken({error_code:i?-1:0,error_message:null!==(t=null!=o?o:a)&&void 0!==t?t:n,platform:r})}};var wc;function Sc(){return Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Sc.apply(this,arguments)}(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],kc.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"handleHelloJSAuth",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"handleHelloLoginEvent",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"handleKakaoLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"handleAppleLogin",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"handlePopupAuthorize",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"authPageGoRedirect",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"dealPageAuthRedirect",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kc.prototype,"thirdLogin",null),kc=(0,m.__decorate)([(0,ge.Y)("ThirdPlatformModule"),(0,m.__metadata)("design:paramtypes",[Ol.Q,hd,K.G,Gl,fc,xc,vc,lc.M,dl.ZI])],kc);const jc=function(e){return j.createElement("svg",Sc({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),wc||(wc=j.createElement("path",{fillRule:"evenodd",d:"M32.54 4c.278 2.368-.73 4.699-2.203 6.412-1.537 1.687-3.999 2.978-6.395 2.811-.312-2.276.9-4.697 2.26-6.174C27.739 5.372 30.406 4.09 32.539 4zm7.844 13.647c-.276.153-4.7 2.614-4.65 7.625.055 6.058 5.697 8.059 5.766 8.08-.034.14-.883 2.89-2.999 5.68-1.768 2.458-3.621 4.86-6.56 4.905-1.399.03-2.342-.345-3.326-.734-1.026-.407-2.095-.831-3.77-.831-1.773 0-2.89.437-3.966.86-.932.364-1.833.717-3.104.766-2.801.097-4.94-2.624-6.772-5.06-3.659-4.97-6.51-14.01-2.689-20.159 1.851-3.016 5.23-4.96 8.837-5.011 1.59-.031 3.114.538 4.45 1.038 1.02.381 1.932.722 2.678.722.657 0 1.543-.328 2.576-.709 1.628-.601 3.62-1.336 5.648-1.137 1.387.036 5.338.508 7.887 3.962l-.006.003z",clipRule:"evenodd"})))},Cc=(0,_d.Z)("div",{target:"exattu0"})({display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},"label:DivShowMore;");Cc.defaultProps=Object.assign(Object.assign({},Cc.defaultProps),{"data-e2e":"see-more-btn"});const Pc={facebook:{text:"common_login_panel_button_facebook",icon:Xd.Z},google:{text:"common_login_panel_button_google",icon:ec.Z},twitter:{text:"common_login_panel_button_twitter",icon:tc.Z},instagram:{text:"common_login_panel_button_instagram",icon:ic.Z},apple:{text:"common_login_panel_button_apple",icon:()=>(0,o.jsx)(jc,{},void 0)},line:{text:"common_login_panel_button_line",icon:oc.Z},kakaotalk:{text:"common_login_panel_button_kakaotalk",icon:nc.Z},vk:{text:"common_login_panel_button_vk",icon:ac.Z}},Tc=({signUp:e})=>{const t=(0,te.fz)(dl.ZI),i=(0,ni.Q)("WebApp_Login"),n=(0,P.k6)(),{platformConfig:a}=Md((()=>["platformConfig"]),[]),{isMobile:r,playerInfo:s}=(0,J.m7)((0,ne.L)((()=>["isMobile","playerInfo"]),[])),{name:l,isSmartPlayer:d}=(0,J.m7)(s),{setShowInstagramCantLoginModal:c}=(0,V.qj)(Vl),{handleAppleLogin:p,handlePopupAuthorize:u,handleHelloJSAuth:g,handleHelloLoginEvent:m,handleKakaoLogin:h,dealPageAuthRedirect:_}=(0,V.qj)(kc),[v,y]=(0,j.useState)(!1),b=(e=>{const t={show_num:2,order:"FACEBOOK,GOOGLE,INSTAGRAM,LINE,TWITTER,KAKAOTALK"},{isSignUp:i,platform:o,brandName:n="",platformConfig:a=t,phoenix:r}=e,s=Boolean(n),l=/mercedes/i.test(n),d="FACEBOOK,GOOGLE,TWITTER,APPLE,INSTAGRAM,LINE,KAKAOTALK,VK".toLocaleLowerCase().split(","),c="APPLE,INSTAGRAM".toLocaleLowerCase().split(","),p="LINE,KAKAOTALK,APPLE".toLocaleLowerCase().split(",");s&&(p.push("instagram","vk"),l&&p.push("facebook","twitter"));const u=r?{show_num:4,order:"FACEBOOK,GOOGLE,TWITTER,APPLE"}:a,g={expand:[],fold:[]};if(o){const e=d.find((e=>e===o));return e&&g.expand.push(e),g}const m=u.order.toLocaleLowerCase().split(","),h={expand:[...m.slice(0,u.show_num)],fold:[...m.slice(u.show_num)]};return s&&(h.expand=h.expand.filter((e=>!p.includes(e))),h.fold=h.fold.filter((e=>!p.includes(e)))),i?(h.expand=h.expand.filter((e=>!c.includes(e))),h.fold=h.fold.filter((e=>!c.includes(e)))):h.expand=h.expand.concat(h.fold),h.expand=h.expand.filter((e=>d.includes(e))),h.fold=h.fold.filter((e=>d.includes(e))),h})({platformConfig:a,isSignUp:e,brandName:l}),f=(0,j.useCallback)((()=>{const e=(()=>{const e=(0,be.stringifyUrl)({url:`${window.location.origin}/oauth/?page=new`,query:{platform:["twitter"],oauthType:0,lang:"en"}});return(0,be.stringifyUrl)({url:"https://us.tiktok.com/passport/web/web_login/",query:{platform_app_id:dd.Oy.twitter,platform:["twitter"],aid:"1459",next:encodeURIComponent(e),action:"login_only"}})})();u({url:e,platform:"twitter"})}),[u]),x=(0,j.useCallback)((()=>{const e=(0,be.stringifyUrl)({url:"https://access.line.me/oauth2/v2.1/authorize",query:{response_type:"code",client_id:dd.z,redirect_uri:`${window.location.origin}/oauthLine/`,state:"1line",scope:"openid profile"}});u({url:e,platform:"line"})}),[u]),k=(0,j.useCallback)((()=>{const e=(0,be.stringifyUrl)({url:"https://oauth.vk.com/authorize",query:{display:"page",response_type:"token",client_id:dd.zH,redirect_uri:"https://www.tiktok.com/login/",scope:"offline, v",state:"vk_authorization"}});u({url:e,platform:"vk"})}),[u]),w=(0,j.useCallback)((()=>{r?c(!0):n.push({pathname:$.gY.loginDownloadApp,state:{fromIns:!0}})}),[r,c,n]),S=(0,j.useCallback)((i=>()=>{var o,n;switch(t.setPlatform(i),t.loginSubmit({signUp:e}),i){case"apple":p({});break;case"twitter":f();break;case"line":x();break;case"facebook":case"google":g({force:!0,platform:i,display:d?"page":"popup",redirect_uri:"https://www.tiktok.com/login/",scope:null!==(n=null===(o=Pc[i])||void 0===o?void 0:o.scope)&&void 0!==n?n:""});break;case"vk":k();break;case"kakaotalk":h();break;case"instagram":w()}}),[t,d,e,p,f,x,g,h,w,k]),C=(0,j.useCallback)((()=>{y(!0)}),[]),T=(0,j.useCallback)((e=>()=>{p({appleToken:e})}),[p]);return(0,j.useEffect)((()=>(document.addEventListener("AppleIDSignInOnSuccess",T),()=>{document.removeEventListener("AppleIDSignInOnSuccess",T)})),[T]),(0,j.useEffect)((()=>{(()=>{if(location.hash){const{state:e,access_token:t,user_id:i}=be.parse(location.hash.substr(1));"vk_authorization"===e&&(dc("vk",{access_token:null==t?void 0:t.toString(),user_id:null==i?void 0:i.toString()}),window.authDoneClose=!0)}})(),Boolean((0,yi.le)(uc))&&m()}),[m]),(0,j.useEffect)((()=>{_()}),[_]),(0,o.jsxs)(o.Fragment,{children:[b.expand.map((e=>Pc[e]?(0,o.jsx)(Yd,{text:i(Pc[e].text),type:e,Icon:Pc[e].icon,onClick:S(e)},e):null)),b.fold.length>0&&e&&!v&&(0,o.jsxs)(Cc,Object.assign({onClick:C},{children:[" ",(0,o.jsx)(rc.Z,{},void 0)]}),void 0),v&&b.fold.map((e=>Pc[e]?(0,o.jsx)(Yd,{text:i(Pc[e].text),Icon:Pc[e].icon,onClick:S(e)},e):null))]},void 0)};function Oc(){const{ageGateAction:e}=(0,V.mp)(hl),{region:t,isMobile:i}=(0,J.m7)((0,ne.L)((()=>["region","isMobile"]),[]));return i&&0!==e?$.gY.signupAgeGate:"KR"===t?$.gY.signupPolicyConfirm:$.gY.signupPhone}const Lc=(0,_d.Z)("div",{target:"exd0a430"})((({isMobile:e})=>({width:"375px",margin:"auto",padding:e?"0 30px":"unset"})),"label:DivLoginContainer;"),Ic=(0,_d.Z)("div",{target:"exd0a431"})((({isMobile:e})=>({padding:e?"0 30px":"unset"})),"label:DivHomeContainer;"),Ac=(0,_d.Z)("div",{target:"exd0a432"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextQuaternary"}),{fontSize:"15px",lineHeight:"18px",margin:"12px 0 32px",textAlign:"center"}]),"label:DivDescriptionContainer;"),Ec=(0,_d.Z)("div",{target:"exd0a433"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:e.isMobile?"24px":"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),Mc=()=>{const e=(0,ni.Q)("WebApp_Login"),{loginModalShow:t}=(0,V.mp)($t.r),{isMobile:i,playerInfo:n}=(0,J.m7)((0,ne.L)((()=>["isMobile","playerInfo"]),[])),{isSmartPlayer:a}=(0,J.m7)(n),{loginTitle:r,loginSlogan:s,signUpSlogan:l,signUpTitle:d}=Md((()=>["loginTitle","loginSlogan","signUpSlogan","signUpTitle"]),[]),c=(0,P.k6)(),{pathname:p}=c.location,u=p.startsWith($.gY.signupHome),g=Oc(),m=!u&&(!i||a),h=(0,j.useCallback)((()=>{u?re.W.event("click_sign_up"):re.W.event("click_login_button")}),[u]),_=(0,j.useCallback)((()=>{re.W.event("click_QR_login")}),[]),v=(0,j.useCallback)((()=>u?(0,o.jsx)(Ec,Object.assign({"data-e2e":"login-title"},{children:e(d)}),void 0):(0,o.jsx)(Ec,Object.assign({"data-e2e":"sign-up-title"},{children:e(r)}),void 0)),[e,u]),y=(0,j.useCallback)((()=>{if(t)return null;const i=e(u?l:s),n=u?"sign-up-desc":"login-desc";return(0,o.jsx)(Ac,Object.assign({"data-e2e":n},{children:i}),void 0)}),[e,u]);return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)($d,{showClose:!0},void 0),(0,o.jsxs)(Ic,Object.assign({isMobile:i},{children:[v(),y(),m&&(0,o.jsx)(Jd,Object.assign({path:$.gY.loginQRcode,underline:!1},{children:(0,o.jsx)(Yd,{text:e("common_login_panel_button_qrcode"),Icon:Td.Z,onClick:_},void 0)}),void 0),(0,o.jsx)(Jd,Object.assign({underline:!1,path:u?g:$.gY.loginPhoneOrEmail},{children:(0,o.jsx)(Yd,{text:e(u?"common_registration_panel_button_phoneoremail":"common_login_panel_button_phoneoremailorusername"),Icon:Od.Z,onClick:h},void 0)}),void 0),(0,o.jsx)(Tc,{signUp:u},void 0)]}),void 0)]},void 0)};var Rc=i(54393),Fc=i.n(Rc),Dc=i(40706),Bc=i(81426);const zc=(0,_d.Z)("div",{target:"e1521l5b1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),Nc=(0,_d.Z)("div",{target:"e1521l5b3"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),Uc=(0,_d.Z)("div",{target:"e1521l5b4"})((({theme:e})=>[{marginTop:"20px",border:"1px solid",borderColor:e.colors.LineSecondary2,padding:"13px",borderRadius:"2px",width:"100%",position:"relative",":before":{content:'""',height:"16px",position:"absolute",background:e.colors.BGPrimary,width:"16px",top:"-8px",left:"rtl"===e.direction?"unset":"calc(50% - 8px)",right:"rtl"===e.direction?"calc(50% - 8px)":"unset",borderInlineEnd:`1px solid ${e.colors.LineSecondary2}`,borderTop:`1px solid ${e.colors.LineSecondary2}`,transform:"rotateZ(-45deg)"}}]),"label:DivPhoneNotRegistered;"),Wc=(0,_d.Z)("p",{target:"e1521l5b5"})((({theme:e,link:t})=>[{fontSize:"12px",lineHeight:"17px",color:t?e.colors.Primary:e.colors.TextPrimary,fontWeight:600,margin:"0 0 8px",cursor:"pointer"}]),"label:PPhoneNotRegistered;");var qc,Gc=i(95731),Hc=i(33874);!function(e){e.Init="init",e.GetCode="new",e.Scanned="scanned",e.Confirmed="confirmed",e.Expired="expired",e.Refused="refuse",e.Error="error"}(qc||(qc={}));let Zc=class extends pe.D{constructor(e,t,i){super(),this.service=e,this.fetch=t,this.loginSlardar=i,this.defaultState={status:"init",inQrcodePage:!1}}setStatus(e,t){e.status=t}setInQRCodePage(e,t){e.inQrcodePage=t,t&&(e.status="init")}setGetQrcodeResutl(e,t){const{qrCodeUrl:i,clientSecret:o,token:n}=t;e.token=n,e.clientSecret=o,e.qrCodeUrl=i,e.status="new"}getQrCodeUrl(e){return e.pipe((0,Li.z)((()=>this.service.getQrCodeUrl({next:"https://www.tiktok.com"}).pipe((0,Li.z)((e=>{const{token:t,qrcode_index_url:i}=e,o=function(e=8){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let i="";for(let o=0;o<e;o++)i+=t[Math.ceil(35*Math.random())];return i}(),n=pd().parse(decodeURIComponent(i).split("?")[1]),{next_url:a}=n,r=(0,m.__rest)(n,["next_url"]),s=`${a}?client_secret=${o}`,l=`${decodeURIComponent(i).split("?")[0]}?${pd().stringify(Object.assign(Object.assign({},r),{next_url:s}))}`;return this.shortenQrUrl(l).pipe((0,_e.U)((e=>{var i;return this.getActions().setGetQrcodeResutl({token:t,clientSecret:o,qrCodeUrl:null!==(i=e.short_url)&&void 0!==i?i:l})})))}))))))}checkQrConnect(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([{ttpConfig:e,oldStatus:t},{token:i="",clientSecret:o=""}])=>this.checkQrcodeRequest({token:i,clientSecret:o,ttpConfig:e,oldStatus:t}).pipe((0,_e.U)((e=>{const{status:t,error_code:i,description:o}=e;return i?(Al(o),this.getActions().setStatus("error")):this.getActions().setStatus(t)}))))))}shortenQrUrl(e){return this.fetch.post("https://www.tiktok.com/shorten/",{body:(0,cd.stringify)({belong:"tiktok-webapp-qrcode",persist:0,expired_time:3600,targets:e})}).pipe((0,_e.U)((e=>{var t;return null!==(t=e.data[0])&&void 0!==t?t:{status:"failed",short_url:void 0}})),(0,Ai.K)((e=>(this.loginSlardar.QRCodeShortenFail({code:`${e.code}`}),(0,Ii.of)({status:"failed",short_url:void 0})))))}checkQrcodeRequest(e){const{token:t,clientSecret:i,ttpConfig:o,oldStatus:n}=e,{open:a,syncSeverList:r}=o||{},s=a?r:[{name:"gloable",domain:""}];return(0,id.D)(s.map((e=>this.service.checkQrconnect({token:null!=t?t:"",next:"https://www.tiktok.com",baseURL:e.domain})))).pipe((0,Li.z)((e=>{const t=e.find((e=>e.client_secret===i));for(const o of e){const{status:e,client_secret:a,error_code:r,description:s}=t||o;if(this.state.inQrcodePage&&("init"===e||"new"===e||e===n))throw new Error("user not scanned, need check agin");return a===i?(0,Ii.of)({status:e}):r?(0,Ii.of)({error_code:r,description:s}):(0,Ii.of)({status:e})}return(0,Ii.of)(this.noop())})),(0,Gc.a)((e=>e.pipe((0,Hc.j)((()=>(0,hr.H)(800)))))))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],Zc.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Zc.prototype,"setStatus",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Zc.prototype,"setInQRCodePage",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Zc.prototype,"setGetQrcodeResutl",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Zc.prototype,"getQrCodeUrl",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Zc.prototype,"checkQrConnect",null),Zc=(0,m.__decorate)([(0,ge.Y)("QRCodeModule"),(0,m.__metadata)("design:paramtypes",[Ol.Q,fe.r,lc.M])],Zc);var $c,Vc=i(19891),Qc=i(34994),Yc=i(24112),Kc=i(11580);function Jc(){return Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jc.apply(this,arguments)}const Xc=function(e){return j.createElement("svg",Jc({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),$c||($c=j.createElement("path",{fill:"#0BE09B",fillRule:"evenodd",d:"M42.692 12.722a1 1 0 01-.03 1.414L18.886 36.944a2 2 0 01-2.8-.03L5.294 26.121a1 1 0 010-1.414l1.414-1.414a1 1 0 011.414 0l9.408 9.408 22.365-21.452a1 1 0 011.414.03l1.384 1.443z",clipRule:"evenodd"})))};var ep=i(41137),tp=i(12820),ip=i(7998);const op=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"2px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGTertiary2,":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGPrimary2,color:e.colors.TextQuaternary}};case"primary":return{borderRadius:"2px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2}};default:return{":disabled":{}}}},np={large:{minWidth:"248px",minHeight:"44px",fontSize:"15px",lineHeight:"18px",fontWeight:700},medium:{minWidth:"144px",height:"35px",fontSize:"14px",lineHeight:"17px",fontWeight:700},small:{minWidth:"88px",height:"28px",fontSize:"14px",lineHeight:"17px",fontWeight:700},tiny:{minWidth:"74px",minHeight:"24px",fontSize:"13px",lineHeight:"17px",fontWeight:600}},ap=(0,ip.Z)("button",{target:"e5u1qxo0"})((({buttonTheme:e="default",size:t="medium",theme:i,loading:o=!1})=>[op({theme:i,buttonTheme:e}),np[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",fontFamily:"ProximaNova, PingFangSC, sans-serif",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),rp=(0,j.memo)((function(e){var{buttonTheme:t,size:i,type:n="button",loading:a=!1,loadingTheme:r="primary",loadingSize:s="medium",children:l}=e,d=(0,m.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,o.jsxs)(ap,Object.assign({type:n,buttonTheme:t,loading:a,size:i},d,{children:[l,a&&(0,o.jsx)(tp.$,{style:{position:"absolute"},theme:r,size:s},void 0)]}),void 0)})),sp=(0,_d.Z)("div",{target:"eot7zvz0"})((({theme:e})=>({display:"flex",marginTop:"48px",justifyContent:"space-between",padding:e.isMobile?"0 32px":"unset"})),"label:DivQRContentBody;"),lp=(0,_d.Z)("div",{target:"eot7zvz1"})({width:"180px"},"label:DivTextContainer;"),dp=(0,_d.Z)("div",{target:"eot7zvz2"})({width:"180px",height:"180px",position:"relative"},"label:DivCodeImage;"),cp=(0,_d.Z)("img",{target:"eot7zvz3"})({width:"180px",height:"180px",borderRadius:"12px",border:"1px solid rgb(242, 242, 242)",margin:"auto"},"label:ImgCode;"),pp=(0,_d.Z)("div",{target:"eot7zvz4"})((({theme:e})=>[(0,de.YJ)({direction:e.direction}),{position:"absolute",display:"flex",flexDirection:"column",width:"180px",height:"180px",top:0,backgroundColor:"rgba(250, 250, 250, 0.95)",borderRadius:"12px",padding:"0 24px",justifyContent:"center",alignItems:"center"}]),"label:DivCodeMask;"),up=(0,_d.Z)("span",{target:"eot7zvz5"})({fontSize:"42px",height:"30px",marginBottom:"24px"},"label:SpanSuccessIcon;"),gp=(0,_d.Z)("p",{target:"eot7zvz6"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima"}),{fontWeight:600,lineHeight:"20px",fontSize:"14px"}]),"label:PCodeTip;"),mp=(0,_d.Z)("div",{target:"eot7zvz7"})({width:"100%",marginTop:"24px"},"label:DivStepContainer;"),hp=(0,_d.Z)("p",{target:"eot7zvz8"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"4px",svg:{verticalAlign:"middle"}}]),"label:PStep;"),_p=(0,_d.Z)("img",{target:"eot7zvz9"})((({theme:e})=>({marginInlineStart:e.isMobile?"unset":"20px",height:e.isMobile?"230px":"270px"})),"label:ImgTip;"),vp=(0,_d.Z)(rp,{target:"eot7zvz10"})({marginTop:"27px",fontSize:"16px"},"label:StyledButtonRefresh;"),yp=(0,_d.Z)(ep.Z,{target:"eot7zvz11"})({transform:"rotateZ(90deg)"},"label:StyledRefreshIcon;"),bp=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{ttpConfig:i}=Md((()=>["ttpConfig"]),[]),{appId:n,isMobile:a}=(0,J.m7)((0,ne.L)((()=>["appId","isMobile"]),[])),[{qrCodeUrl:r,status:s},{getQrCodeUrl:l,checkQrConnect:d,setInQRCodePage:c}]=(0,V.b7)(Zc),{handleLoginResult:p}=(0,V.qj)(hd),u=(0,j.useCallback)((()=>{l()}),[l]);(0,j.useEffect)((()=>(c(!0),u(),()=>{c(!1)})),[]),(0,j.useEffect)((()=>{"scanned"===s&&(re.W.event("scan_QR_login"),d({ttpConfig:i,oldStatus:"scanned"})),"confirmed"===s&&(t.setPlatform("QRcode"),p({error_code:0}))}),[d,p,t,s,i]),(0,j.useEffect)((()=>{r&&d({ttpConfig:i})}),[d,r,i]);const{value:g}=(0,j.useContext)(z),m=g?Vc:Qc;return(0,o.jsxs)(o.Fragment,{children:[a?(0,o.jsx)($d,{title:e("common_login_qrcode_title")},void 0):(0,o.jsx)(zc,Object.assign({"data-e2e":"qr-page-title"},{children:e("common_login_qrcode_title")}),void 0),(0,o.jsxs)(sp,{children:[(0,o.jsxs)(lp,{children:[(0,o.jsxs)(dp,Object.assign({"data-e2e":"qr-code"},{children:[r?(0,o.jsx)(Fc(),{size:180,value:r,style:{padding:"12px",borderRadius:"12px",border:"1px solid #f2f2f2"}},void 0):(0,o.jsx)(cp,{src:1233===n?Yc:Kc,alt:"qrcode"},void 0),["scanned","confirmed"].includes(s)&&(0,o.jsxs)(pp,{children:[(0,o.jsx)(up,{children:(0,o.jsx)(Xc,{},void 0)},void 0),(0,o.jsx)(gp,{children:e("common_login_qrcode_status_scanned")},void 0)]},void 0),["expired","refuse","error"].includes(s)&&(0,o.jsxs)(pp,{children:[(0,o.jsx)(gp,{children:e("common_login_qrcode_status_expired",{refresh_button:""})},void 0),(0,o.jsx)(vp,Object.assign({size:"tiny",onClick:u},{children:(0,o.jsx)(yp,{},void 0)}),void 0)]},void 0),"init"===s&&(0,o.jsx)(pp,{children:(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0),(0,o.jsxs)(mp,Object.assign({"data-e2e":"qr-body"},{children:[(0,o.jsx)(hp,{children:e("common_login_qrcode_copy_1")},1),(0,o.jsxs)(hp,{children:[e("common_login_qrcode_copy_2",{addfriends_button:(0,o.jsx)(Dc.Z,{width:"16",height:"16",fill:"currentColor"},void 0)})," "]},2),(0,o.jsx)(hp,{children:e("common_login_qrcode_copy_3",{qrscanner_button:(0,o.jsx)(Bc.Z,{width:"16",height:"16",fill:"currentColor"},void 0)})},3)]}),void 0)]},void 0),(0,o.jsx)(_p,{src:m,"data-e2e":"qr-img"},void 0)]},void 0)]},void 0)},fp={email_verify:"email",pwd_verify:"password",mobile_sms_verify:"phone"},xp={email:"email_verify",password:"pwd_verify",phone:"mobile_sms_verify"};let kp=class extends pe.D{constructor(e,t,i,o,n){super(),this.service=e,this.third=t,this.login=i,this.loginReport=o,this.phone=n,this.defaultState={loginLoading:!1}}setTwoStepVerifyRes(e,t){var i;const o=t.verify_ways,n={};o.forEach((({verify_way:e,mobile:t,email:i})=>{n[e]=null!=t?t:i})),e.verifyWays=n,e.type=t.default_verify_way||(null===(i=o[0])||void 0===i?void 0:i.verify_way),e.isTwoStep=Boolean(null==t?void 0:t.default_verify_way),e.thirdQuery=t.thirdQuery,e.accountQuery=t.accountQuery,e.password=t.password,e.verify_ticket=t.verify_ticket,e.not_login_ticket=t.not_login_ticket,e.sms_code_key=t.sms_code_key}setTwoStepType(e,t){e.type=t}setErrorMsg(e,t){e.errorMsg=t}setLoginLoading(e,t){e.loginLoading=t}handlePasswordVerify(e){return e.pipe((0,he.M)(this.state$,this.phone.state$),(0,Li.z)((([e,{sms_code_key:t=""},{mobile:i}])=>this.service.accountVerify(e).pipe((0,Ki.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"password"}))),(0,Yi.w)((e=>e.error_code?(0,Ii.of)(this.getActions().setErrorMsg(e.description)):this.service.smsLoginContinue({mobile:i,sms_code_key:t}).pipe((0,_e.U)((e=>this.login.getActions().handleLoginResult(e))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}handleCodeVerify(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,{type:t="",thirdQuery:i,accountQuery:o}])=>i||o?(t===xp.email?this.service.validateEmailCodeForLogin(e):this.service.validateMobileCodeForLogin(e)).pipe((0,Ki.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:fp[t]}))),(0,Yi.w)((e=>e.error_code?(0,Ii.of)(this.getActions().setErrorMsg(e.description)):i?(0,Ii.of)(this.third.getActions().thirdLogin(i)):o?(0,Ii.of)(this.login.getActions().handlePasswordLogin(o)):(0,Ii.of)(this.noop()))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))):(0,Ii.of)(this.getActions().handleEmailCodeVerify(e)))))}handleEmailCodeVerify(e){return e.pipe((0,Li.z)((e=>this.service.emailCodeLogin(e).pipe((0,Ki.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"email"}))),(0,_e.U)((e=>this.login.getActions().handleLoginResult(e))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}handleSmsCodeVerifyReset(e){return e.pipe((0,Li.z)((e=>this.service.validateMobileCodeForReset(e).pipe((0,Ki.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"phone"}))),(0,_e.U)((e=>this.login.getActions().handleLoginResult(e))),(0,Ji.O)(this.getActions().setLoginLoading(!0)),(0,Xi.l)(this.getActions().setLoginLoading(!1))))))}reportTwoStepResult(e){this.loginReport.twoStepResult({verification_method:e.type,result:e.error_code?"fail":"success",error_code:e.error_code})}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],kp.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"setTwoStepVerifyRes",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"setTwoStepType",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"setLoginLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"handlePasswordVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"handleCodeVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"handleEmailCodeVerify",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],kp.prototype,"handleSmsCodeVerifyReset",null),kp=(0,m.__decorate)([(0,ge.Y)("TwoStepModule"),(0,m.__metadata)("design:paramtypes",[Ol.Q,kc,hd,dl.ZI,$l])],kp);const wp=(0,_d.Z)(bt.W,{target:"e1w6iovg0"})((({theme:e})=>[{width:"100%",marginTop:e.isMobile?"32px":"21px"}]),"label:StyledButton;"),Sp=e=>{const{children:t}=e,i=(0,m.__rest)(e,["children"]);return(0,o.jsx)(wp,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew"},i,{children:t}),void 0)},jp=(0,_d.Z)("div",{target:"e1rj4s2h0"})((({theme:e})=>[Cp(e.isMobile)]),"label:DivContainer;"),Cp=e=>e?{padding:"0px 32px 32px"}:{},Pp=(0,_d.Z)("div",{target:"e1rj4s2h1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),Tp(e.isMobile)]),"label:DivTitleContainer;"),Tp=e=>e?{fontSize:"20px",marginTop:"24px"}:{fontSize:"33px"},Op=(0,_d.Z)("p",{target:"e1rj4s2h2"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),Lp(e.isMobile)]),"label:PDescriptionContainer;"),Lp=e=>e?{fontSize:"14px",lineHeight:"17px",margin:"8px 0"}:{fontSize:"16px",lineHeight:"22px",margin:"16px 0"},Ip=({theme:{isMobile:e}})=>[Ap(e)],Ap=e=>e?{position:"absolute",bottom:"28px",left:"32px",right:"32px",width:"auto"}:{},Ep=(0,_d.Z)(Sp,{target:"e1rj4s2h5"})(Ip,"label:StyledTwoStepButton;");let Mp=class extends pe.D{constructor(){super(...arguments),this.defaultState={password:""}}setPassword(e,t){e.password=t}setHasInvalid(e,t){e.hasInvalid=t}setLengthValid(e,t){e.lengthValid=t}setContentValid(e,t){e.contentValid=t}updatePassword(e){return e.pipe((0,Li.z)((({value:e})=>{const{hasInvalid:t,contentValid:i,lengthValid:o}=(e=>{if(!e)return{};const t=/[^\w~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/,i=/[_~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/.test(e)&&/[0-9]+/.test(e)&&/[A-Za-z]+/.test(e)&&!t.test(e),o=e.length>=8&&e.length<=20;return{hasInvalid:t.test(e),lengthValid:o,contentValid:i}})(e);return(0,Ii.of)(this.getActions().setPassword(e),this.getActions().setHasInvalid(t),this.getActions().setLengthValid(o),this.getActions().setContentValid(i))})))}};(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],Mp.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Mp.prototype,"setPassword",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Mp.prototype,"setHasInvalid",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Mp.prototype,"setLengthValid",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],Mp.prototype,"setContentValid",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Mp.prototype,"updatePassword",null),Mp=(0,m.__decorate)([(0,ge.Y)("SetPasswordModule")],Mp);let Rp=class extends pe.D{constructor(e,t){super(),this.service=e,this.history=t,this.defaultState={checkCodeLoading:!1,ticket:"",type:"phone"}}setErrorMsg(e,t){e.errorMsg=t}setTicket(e,t){e.ticket=t}setType(e,t){e.type=t}setForceResetTicket(e,t){e.conditional_login_ticket=t}setCheckCodeLoading(e,t){e.checkCodeLoading=t}checkEmailCodeForReset(e){return e.pipe((0,Li.z)((e=>this.service.validateEmailCodeForReset(e).pipe((0,_e.U)((e=>(e.resetType="email",this.getActions().handleCheckResult(e)))),(0,Ji.O)(this.getActions().setCheckCodeLoading(!0)),(0,Xi.l)(this.getActions().setCheckCodeLoading(!1))))))}checkPhoneCodeForReset(e){return e.pipe((0,Li.z)((e=>this.service.validatePhoneCodeForReset(e).pipe((0,_e.U)((e=>(e.resetType="phone",this.getActions().handleCheckResult(e)))),(0,Ji.O)(this.getActions().setCheckCodeLoading(!0)),(0,Xi.l)(this.getActions().setCheckCodeLoading(!1))))))}checkCodeForForceReset(e){return e.pipe((0,Li.z)((e=>{var{type:t}=e,i=(0,m.__rest)(e,["type"]);return("email"===t?this.service.validateEmailCodeForForceReset(i):this.service.validatePhoneCodeForForceReset(i)).pipe((0,_e.U)((e=>(e.resetType=t,e.forceTicket=i.conditional_login_ticket,this.getActions().handleCheckResult(e)))),(0,Ji.O)(this.getActions().setCheckCodeLoading(!0)),(0,Xi.l)(this.getActions().setCheckCodeLoading(!1)))})))}handleCheckResult(e){return e.pipe((0,Li.z)((e=>{const{ticket:t,description:i,resetType:o,forceTicket:n}=e;return t?(this.history.push($.gY.resetPassword),(0,Ii.of)(this.getActions().setTicket(t),this.getActions().setType(o),this.getActions().setForceResetTicket(n))):(0,Ii.of)(this.getActions().setErrorMsg(i))})))}};function Fp(e=[]){const[{errorMsg:t},i]=(0,V.b7)(hd),[{errorMsg:o},n]=(0,V.b7)(md),{phone:a,areaCode:r}=(0,V.mp)($l),{email:s}=(0,V.mp)(ed),[{code:l},{clearGetCodeError:d}]=(0,V.b7)(td),{password:c}=(0,V.mp)(Mp),[{errorMsg:p},{setErrorMsg:u}]=(0,V.b7)(kp),{setErrorMsg:g}=(0,V.qj)(Rp),[m,h]=(0,j.useState)(""),_=t||o||p,v=(0,ni.Q)("WebApp_Login"),y=(0,P.k6)(),{pathname:b}=y.location;return(0,j.useEffect)((()=>{_&&(b===$.gY.loginHome||b===$.gY.loginHome||b===$.gY.signupAgeGate?Al(v(_)):h(_))}),[v,y.location,_,b]),(0,j.useEffect)((()=>{i.clearLoginResult(),n.setErrorMsg(""),d(),h(""),g("")}),[a,r,s,l,i,n,c,...e]),(0,j.useEffect)((()=>()=>{i.clearLoginResult(),n.clearSignUpResult(),d(),h(""),u("")}),[]),m}function Dp(){const{phone:e,areaCode:t}=(0,V.mp)($l),{email:i}=(0,V.mp)(ed),[{code:o,getCodeErrorMsg:n},{clearGetCodeError:a}]=(0,V.b7)(td);return(0,j.useEffect)((()=>{a()}),[e,t,i,o,a]),n}(0,m.__decorate)([(0,ue.cQ)(),(0,m.__metadata)("design:type",me.y)],Rp.prototype,"dispose$",void 0),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"setErrorMsg",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"setTicket",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"setType",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"setForceResetTicket",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"setCheckCodeLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"checkEmailCodeForReset",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"checkPhoneCodeForReset",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"checkCodeForForceReset",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],Rp.prototype,"handleCheckResult",null),Rp=(0,m.__decorate)([(0,ge.Y)("CheckDigitCodeModule"),(0,m.__metadata)("design:paramtypes",[Ol.Q,Il])],Rp);const Bp=(0,j.memo)((function(e){const t=(0,j.useCallback)((t=>{var i;t.preventDefault(),null===(i=e.onSubmit)||void 0===i||i.call(e)}),[e]);return(0,o.jsx)("form",Object.assign({onSubmit:t},{children:e.children}),void 0)}));var zp=i(85485);const Np=(0,_d.Z)("div",{target:"e3v3zbj0"})((({theme:e,type:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"15px",margin:"4px 0",color:"error"===t?e.colors.Negative:"success"===t?e.colors.Positive:e.colors.TextTertiary,display:"flex",svg:{marginInlineEnd:"4px"}}]),"label:DivTextContainer;"),Up=(0,j.memo)((({text:e,type:t="default",children:i,style:n,errorIcon:a})=>(0,o.jsxs)(Np,Object.assign({type:t,style:n},{children:[a&&(0,o.jsx)(zp.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),i,e]}),void 0)));var Wp=i(62687);const qp=(0,_d.Z)("button",{target:"e1gzcpl10"})((({theme:e})=>[(0,de.GI)({color:"TextPrimary",theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:0,backgroundColor:e.colors.BGInput2,borderColor:e.colors.LineSecondary2,borderWidth:1.5,borderStyle:"solid",borderRadius:"rtl"===e.direction?"4px 0 0 4px":"0px 4px 4px 0px",borderInlineStartWidth:1.5,cursor:"pointer",fontSize:"16px",padding:"0px 16px",height:"44px",flexShrink:0,boxSizing:"content-box","&:disabled":{color:e.colors.TextQuaternary,cursor:"not-allowed"},"&:focus-visible":{outline:"none"}}]),"label:ButtonSendCode;");qp.defaultProps=Object.assign(Object.assign({},qp.defaultProps),{"data-e2e":"send-code-button"});const Gp=(0,_d.Z)(Wp.Z,{target:"e1gzcpl11"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Hp=(0,j.memo)((function(e){const{text:t,disabled:i,countDownSecond:n=0,loading:a}=e;return(0,o.jsxs)(qp,Object.assign({type:"button",onClick:e.onClick,disabled:Boolean(i)||Boolean(n),lo:!0},{children:[t+(n?`: ${n}s`:""),a&&(0,o.jsx)(Gp,{},void 0)]}),void 0)})),Zp=(e,t,i)=>{const[o,n]=(0,j.useState)(0),[a,r]=(0,j.useState)(!1),s=(0,j.useRef)({});return(0,j.useEffect)((()=>{const{hasSent:t,countDownSecond:o}=Xl(e,i);r(t),n(o)}),[e,i,t]),(0,j.useEffect)((()=>{o>0?(s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{n(o-1)}),1e3)):s.current&&clearTimeout(s.current)}),[o]),{hasSent:a,countDownSecond:o}};var $p,Vp=i(50786);function Qp(){return Qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qp.apply(this,arguments)}const Yp=function(e){return j.createElement("svg",Qp({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),$p||($p=j.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},j.createElement("path",{d:"M2.8 7.8c2.1 1 4.5 1.6 7 1.6s4.9-.6 7-1.6M9.8 9.8v3M5.1 9.2l-1.5 2.6M14.6 9.2l1.5 2.6"}))))};var Kp;function Jp(){return Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jp.apply(this,arguments)}const Xp=function(e){return j.createElement("svg",Jp({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Kp||(Kp=j.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},j.createElement("path",{d:"M9.8 4.8c3 0 5.3 1.7 7 5-1.7 3.3-4 5-7 5s-5.3-1.7-7-5c1.6-3.4 4-5 7-5z"}),j.createElement("path",{d:"M9.8 11.8a2 2 0 100-4 2 2 0 000 4z"}))))},eu=(0,_d.Z)("div",{target:"etcs7ny0"})({position:"relative",marginBottom:"9px"},"label:DivInputContainer;"),tu=(0,_d.Z)("input",{target:"etcs7ny1"})((({theme:{colors:e,isMobile:t},border:i=!1,errorState:o=!1,hasIconPadding:n})=>[iu(t,i,e),{"::placeholder":{color:e.TextQuaternary},color:o?e.Negative:e.TextPrimary,lineHeight:"100%",outline:"none",fontSize:"16px",height:"44px",caretColor:e.Primary,width:"100%",borderColor:o?e.Negative:e.LineSecondary2,paddingInlineEnd:n?"24px":"unset"}]),"label:InputContainer;"),iu=(e,t,i)=>e?{background:"transparent",border:"none",borderRadius:"0",paddingInlineStart:"0px",borderBottom:t?"1px solid":"none"}:{borderRadius:"2px",backgroundColor:i.BGInput,border:t?"1px solid":"none",paddingInlineStart:"12px"},ou=(0,_d.Z)("div",{target:"etcs7ny2"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,end:"0"}),{display:"flex",alignItems:"center",position:"absolute",top:0,height:"44px",paddingInlineEnd:e.isMobile?"4px":"16px"}]),"label:DivIconContainer;"),nu=(0,_d.Z)("i",{target:"etcs7ny3"})({lineHeight:"0",marginInlineStart:"16px",cursor:"pointer",fontSize:"20px"},"label:IPasswordIcon;"),au=(0,_d.Z)("i",{target:"etcs7ny4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"0",color:e.colors.LineInverse}]),"label:IDeleteIcon;"),ru=(0,j.memo)((function(e){const{errorState:t,value:i,placeholder:n,password:a=!1,className:r,border:s=!0,style:l,autocomplete:d,name:c,autoFocus:p,disableDelete:u,readonly:g=!1,onInput:m=(()=>{}),onChange:h=(()=>{})}=e,[_,v]=(0,j.useState)("text"),{isMobile:y}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[]));(0,j.useEffect)((()=>{a&&v("password")}),[a]);const b=(0,j.useCallback)((()=>{v("text")}),[]),f=(0,j.useCallback)((()=>{v("password")}),[]),x=(0,j.useCallback)((()=>{const e={target:{value:""}};h(e),m(e)}),[h,m]),k=(0,j.useCallback)((e=>{h(e)}),[h]),w=Boolean((null==i?void 0:i.length)&&y&&!u),S=a&&(!y||u),C=S||w;return(0,o.jsxs)(eu,Object.assign({className:r,style:l},{children:[(0,o.jsx)(tu,{autoFocus:p,value:i,type:_,errorState:t,placeholder:n,onChange:k,onFocus:e.onFocus,onBlur:e.onBlur,onInput:e.onInput,border:s,autoComplete:d,autocomplete:d,name:c,readOnly:g,hasIconPadding:C},void 0),(0,o.jsxs)(ou,{children:[t&&!y&&(0,o.jsx)(zp.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),S&&("password"===_?(0,o.jsx)(nu,Object.assign({onClick:b},{children:(0,o.jsx)(Yp,{},void 0)}),void 0):(0,o.jsx)(nu,Object.assign({onClick:f},{children:(0,o.jsx)(Xp,{},void 0)}),void 0)),w&&(0,o.jsx)(au,Object.assign({onClick:x},{children:(0,o.jsx)(Vp.Z,{},void 0)}),void 0)]},void 0)]}),void 0)})),su=(0,_d.Z)("div",{target:"e2oypfg0"})({transition:"all 0.3s",display:"flex",justifyContent:"space-between"},"label:DivCodeInputContainer;"),lu=(0,_d.Z)(ru,{target:"e2oypfg1"})((({theme:e})=>({flex:1,width:0,"& > input":{height:"47px",borderInlineEndWidth:"0",borderRadius:"rtl"===e.direction?"0 2px 2px 0":"2px 0px 0px 2px"}})),"label:StyledBaseInput;");lu.defaultProps=Object.assign(Object.assign({},lu.defaultProps),{"data-e2e":"digit-code-input"});const du=(0,j.memo)((function(e){const{errorMsg:t,disabled:i,codeFromNumber:n,loading:a,autoSendFirstTime:r,email:s}=e,l=(0,ni.Q)("WebApp_Login"),[d,c]=(0,j.useState)(!1),[p,u]=(0,j.useState)(),[{codeFormatError:g,getCodeErrorMsg:m,code:h},{setCode:_}]=(0,V.b7)(td);(0,j.useEffect)((()=>{u(t)}),[t]),(0,j.useEffect)((()=>{u(m)}),[m]);const{countDownSecond:v,hasSent:y}=Zp(n,a,s);(0,j.useEffect)((()=>{if(r){const{countDownSecond:t}=Xl(n,s);!t&&e.onClickSendCode()}return()=>{_("")}}),[]);const b=(0,j.useCallback)((()=>{c(!0)}),[]),f=(0,j.useCallback)((()=>{c(!1)}),[]),x=(0,j.useCallback)((e=>{_(e.target.value)}),[_]),k=p||g,w=g?!d:Boolean(k);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(su,{children:[(0,o.jsx)(lu,{placeholder:l("common_login_reset_email_verify_title"),onFocus:b,onBlur:f,onChange:x,value:h,className:"code-input",autoComplete:"off",errorState:w},void 0),(0,o.jsx)(Hp,{loading:a,onClick:e.onClickSendCode,disabled:Boolean(i)||Boolean(v)||a,countDownSecond:v,text:l(y?"common_registration_phone_sms_button":"common_registration_phone_input_button")},void 0)]},void 0),w&&k&&(0,o.jsx)(Up,{text:l(k),type:"error"},void 0)]},void 0)})),cu=(0,_d.Z)("p",{target:"e17ptbg00"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:"20px",lineHeight:"24px",marginTop:"24px",marginBottom:"8px"}]),"label:PTitleContainer;"),pu=(0,_d.Z)("p",{target:"e17ptbg01"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextTertiary2",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"17px",marginBottom:"8px"}]),"label:PDescriptionContainer;"),uu=(0,_d.Z)(Wp.Z,{target:"eo6lrdp0"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),gu=(0,_d.Z)("div",{target:"e1ait7k0"})({display:"flex",margin:"20px 0",height:"18px",justifyContent:"space-between"},"label:DivContainer;"),mu=(0,_d.Z)("span",{target:"e1ait7k1"})((({theme:e,disabled:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{color:t?e.colors.TextQuaternary:e.colors.TextPrimary,fontSize:"14px",lineHeight:"18px"}]),"label:SpanText;"),hu=(0,j.memo)((function(e){const{loading:t,codeFromNumber:i,email:n}=e,{countDownSecond:a}=Zp(i,t,n),r=(0,ni.Q)("WebApp_Login");return(0,o.jsxs)(gu,{children:[(0,o.jsx)(mu,Object.assign({onClick:e.onClick,disabled:Boolean(a)},{children:`${r("common_registration_phone_sms_button")}${a?`: ${a}s`:""}`}),void 0),t&&(0,o.jsx)(uu,{},void 0)]},void 0)})),_u=(0,_d.Z)("p",{target:"e1tvj6xp0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextTertiary2",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"17px",marginBottom:"8px"}]),"label:PDescriptionContainer;"),vu=(0,_d.Z)("div",{target:"e1tvj6xp1"})({height:"48px",display:"flex"},"label:DivInputContainer;"),yu=(0,_d.Z)("input",{target:"e1tvj6xp2"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,start:"-1000px"}),{opacity:0,position:"absolute"}]),"label:Input;"),bu=(0,_d.Z)("div",{target:"e1tvj6xp3"})((({theme:e,error:t,active:i})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{position:"relative",fontSize:"20px",flex:"1",borderBottom:"1px solid",borderBottomColor:t?e.colors.Negative:e.colors.LinePrimary2,display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",marginInlineEnd:"10px",":last-child":{marginInlineEnd:"0"},"::before":{content:'""',position:"absolute",height:"16px",width:"2px",background:e.colors.Primary,margin:"auto",display:i?"block":"none",animation:"cursor-animation 1.5s linear infinite"},"@keyframes cursor-animation":{"0%":{opacity:0},"25%":{opacity:0},"50%":{opacity:1},"75%":{opacity:1},"100%":{opacity:0}}}]),"label:DivLabel;"),fu=(0,j.memo)((function(e){const t=(0,ni.Q)("WebApp_Login"),{codeFromNumber:i,codeDesc:n,email:a,loading:r,onSubmit:s,showTitle:l=!0,autoSubmit:d=!0,errorMsg:c="",autoSendFirstTime:p}=e,[{code:u,sendCodeLoading:g,getCodeErrorMsg:m=""},{setCode:h}]=(0,V.b7)(td),_=(0,j.useRef)(null),v=(0,j.useCallback)((()=>{var e;null===(e=_.current)||void 0===e||e.focus()}),[]),y=(0,j.useCallback)((e=>{if(6===u.length&&5===e.target.value.length)h("");else{const t=e.target.value.replace(/[^\d]/g,"");h(t)}}),[h,u]),b=(0,j.useCallback)((e=>{e.persist()}),[]);(0,j.useEffect)((()=>{if(p){const{countDownSecond:t}=Xl(i,a);!t&&e.onClickSendCode()}return()=>{h("")}}),[]),(0,j.useEffect)((()=>{6===u.length&&d&&s()}),[u,s,d]);const f=null!=n?n:t("Your code was sent to {code}",{code:i}),x=m||c,k=Boolean(x);return(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(cu,{children:t("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(_u,{children:f},void 0)]},void 0),(0,o.jsxs)(vu,Object.assign({onClick:v},{children:[(0,o.jsx)(yu,{ref:_,onChange:y,type:"tel",autoFocus:!0,value:u,autoComplete:"one-time-code",onAnimationEnd:b},void 0),Array(6).fill("").map(((e,t)=>(0,o.jsx)(bu,Object.assign({active:u.length===t,error:k},{children:u[t]}),t)))]}),void 0),(0,o.jsx)(Up,{text:t(x),type:"error"},void 0),(0,o.jsx)(hu,{codeFromNumber:i,loading:g||r,onClick:e.onClickSendCode,email:a},void 0)]},void 0)})),xu=e=>{const{onSubmit:t}=e,i=(0,m.__rest)(e,["onSubmit"]),{isMobile:n}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[]));return n?(0,o.jsx)(fu,Object.assign({},i,{onSubmit:e.onSubmit,autoSubmit:!1,showTitle:!1}),void 0):(0,o.jsx)(du,Object.assign({},i),void 0)},ku=(0,_d.Z)(Jd,{target:"ep888o80"})({fontSize:"12px",display:"inline-block"},"label:StyledLink;"),wu=(0,j.memo)((function(e){const{text:t,path:i,replace:n,textTheme:a}=e;return(0,o.jsx)(ku,{path:i,text:t,replace:n,textTheme:a,onClick:e.onClick},void 0)})),Su=(0,_d.Z)("div",{target:"e1mtjw290"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",padding:"4px 0 0",textAlign:"center",margin:"auto",overflow:"hidden"})),"label:DivContainer;"),ju=(0,_d.Z)("h5",{target:"e1mtjw291"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px",padding:"24px",margin:"0"}]),"label:H5Title;"),Cu=(0,_d.Z)(rp,{target:"e1mtjw292"})((({theme:e})=>({width:"100%",borderRadius:"0",height:"48px",fontWeight:600,border:"none",borderTop:`1px solid ${e.colors.LineSecondary2}`,"&:last-child":{color:e.colors.TextTertiary2}})),"label:StyledButton;"),Pu={width:"80%",maxWidth:"400px",background:"transparent"},Tu=(0,j.memo)((({title:e,visible:t,actions:i})=>{const n=(0,ni.Q)("WebApp_Login");return(0,o.jsx)(Tt.u_,Object.assign({contentStyle:Pu,visible:t,maskCloseable:!1},{children:(0,o.jsxs)(Su,{children:[(0,o.jsx)(ju,{children:n(e)},void 0),i.map((({onClick:e,text:t},i)=>(0,o.jsx)(Cu,Object.assign({onClick:e},{children:n(t)}),i)))]},void 0)}),void 0)})),Ou=(0,_d.Z)("div",{target:"e8ziav60"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",lineHeight:"18px",margin:"20px 0 -12px 0"}]),"label:DivText;");Ou.defaultProps=Object.assign(Object.assign({},Ou.defaultProps),{"data-e2e":"forgot-passport-button"});const Lu=(0,j.memo)((function({onClickForgetEmailPwd:e}){const t=(0,P.k6)(),i=(0,ni.Q)("WebApp_Login"),[n,a]=(0,j.useState)(!1),r=(0,j.useCallback)((()=>{a(!0)}),[]),s=(0,j.useCallback)((()=>{t.push($.gY.loginForgetPhonePassword)}),[t]),l=(0,j.useCallback)((()=>{null==e||e(),t.push($.gY.loginForgetEmailPassword)}),[t,e]),d=(0,j.useMemo)((()=>[{text:"Phone number",onClick:s},{text:"Email",onClick:l},{text:"common_registration_phone_input_popup_button",onClick:()=>a(!1)}]),[l,s]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ou,Object.assign({onClick:r},{children:[i("forget_password")," "]}),void 0),(0,o.jsx)(Tu,{visible:n,actions:d,title:"common_login_reset_popup_title"},void 0)]},void 0)})),Iu=(0,j.memo)((function(e){const t=(0,ni.Q)("WebApp_Login"),{isMobile:i}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[]));return i?(0,o.jsx)(Lu,{onClickForgetEmailPwd:e.onClickForgetEmailPwd},void 0):(0,o.jsx)(wu,{text:t("forget_password"),path:$.gY.loginForgetEmailPassword,onClick:e.onClickForgetEmailPwd},void 0)}));var Au=i(28931);const Eu=(0,_d.Z)("span",{target:"eea75y50"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{display:"inline-block",fontSize:"14px",lineHeight:"17px",margin:"12px 0",paddingInlineEnd:"12px","& + &":{paddingInlineStart:"12px",position:"relative","&::before":Object.assign({content:'""',position:"absolute",height:"12px",width:"1px",top:"2px",background:e.colors.LineSecondary},[(0,de.YJ)({start:"0",direction:e.direction})])}}]),"label:SpanOptionsText;"),Mu=(0,_d.Z)("span",{target:"eea75y51"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{margin:"12px 0",display:"inline-block",fontSize:"14px",fontWeight:600,zIndex:20}]),"label:SpanChangeWayText;"),Ru=(0,_d.Z)(rp,{target:"eea75y52"})((({theme:e})=>({width:"100%",borderRadius:"0",height:"48px",fontWeight:600,border:"none",borderBottom:`1px solid ${e.colors.LineSecondary2}`,"&:last-child":{color:e.colors.TextTertiary2,marginTop:"8px"}})),"label:StyledButton;"),Fu={[xp.email]:"use email instead",[xp.password]:"use password instead",[xp.phone]:"use SMS instead"},Du=(0,j.memo)((function(e){const t=(0,ni.Q)("WebApp_Login"),{verifyWays:i=[]}=e;return(0,o.jsx)(o.Fragment,{children:i.map((i=>{const n=`/login/2sv/${fp[i]}`;return(0,o.jsx)(Eu,Object.assign({onClick:e.onClickType(i)},{children:(0,o.jsx)(Au.rU,Object.assign({to:n},{children:t(Fu[i])}),void 0)}),i)}))},void 0)}));var Bu=i(8274);const zu=(0,_d.Z)("div",{target:"e1pjeozo0"})({position:"fixed",left:0,top:0,bottom:0,right:0,overflow:"auto",outline:"0px",zIndex:12,display:"none",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)","&.enter-active":{display:"block"},"&.enter-done":{display:"block"},"&.exit":{display:"block"},"&.exit-active":{display:"none"}},"label:DivPopup;"),Nu=(0,_d.Z)("div",{target:"e1pjeozo1"})((({theme:e})=>({position:"absolute",width:"100vw",bottom:0,left:0,right:0,background:e.colors.BGPlaceholderOpaque,borderRadius:"8px 8px 0 0",overflow:"hidden",transition:"all 500ms",zIndex:11,"&.enter-active":{opacity:1,transform:"translateY(100%)"},"&.enter-done":{transform:"translateY(0)"}})),"label:DivContent;"),Uu=(0,_d.Z)("div",{target:"e1pjeozo2"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"absolute",left:0,right:0,top:0,bottom:0})),"label:DivMask;"),Wu=e=>{const{visible:t}=e,i=(0,j.useRef)(null);return(0,o.jsx)(Bu.Z,Object.assign({in:t,timeout:300},{children:(0,o.jsxs)(zu,{children:[(0,o.jsx)(Uu,{},void 0),(0,o.jsx)(Bu.Z,Object.assign({in:t,timeout:100,nodeRef:i},{children:(0,o.jsx)(Nu,Object.assign({ref:i},{children:e.children}),void 0)}),void 0)]},void 0)}),void 0)},qu={[xp.email]:"login_send_code_email",[xp.phone]:"login_send_code_sms",[xp.password]:"twosv_login_switch_pw"},Gu=(0,j.memo)((function(e){const t=(0,ni.Q)("WebApp_Login"),[i,n]=(0,j.useState)(!1),{verifyWays:a=[],onClickType:r}=e,s=(0,j.useCallback)((()=>{n(!0)}),[]),l=(0,j.useCallback)((()=>{n(!1)}),[]),d=(0,j.useCallback)((e=>()=>{r(e)(),n(!1)}),[r]);return a.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Wu,Object.assign({visible:i},{children:(0,o.jsxs)("div",{children:[a.map(((e,i)=>(0,o.jsx)(Ru,Object.assign({onClick:d(e),loading:!1},{children:t(qu[e])}),i))),(0,o.jsx)(Ru,Object.assign({onClick:l},{children:t("step_verification_cancel")}),void 0)]},void 0)}),void 0),(0,o.jsx)(Mu,Object.assign({onClick:s},{children:t("login_try_another_method")}),void 0)]},void 0):null})),Hu=(0,j.memo)((function(){const[{verifyWays:e={},type:t},{setTwoStepType:i}]=(0,V.b7)(kp),{isMobile:n}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),a=(0,j.useCallback)((e=>()=>{i(e)}),[i]),r=(0,j.useMemo)((()=>({verifyWays:Object.keys(e).filter((e=>e!==t)),onClickType:a})),[t,e,a]);return(0,o.jsxs)(o.Fragment,{children:[n?(0,o.jsx)(Gu,Object.assign({},r),void 0):(0,o.jsx)(Du,Object.assign({},r),void 0),"pwd_verify"===t&&1===Object.keys(e).length&&(0,o.jsx)(Iu,{},void 0)]},void 0)})),Zu=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendEmailCodeForReset:r,sendEmailCodeForLogin:s,sendEmailCodeForVerify:l}]=(0,V.b7)(td),[{verifyWays:d,not_login_ticket:c,verify_ticket:p,password:u="",loginLoading:g},{handleCodeVerify:m}]=(0,V.b7)(kp),{changePwdByEmail:h}=(0,V.qj)(hd),_=Fp(),v=(0,j.useCallback)((()=>{t.twoStepSubmit({verification_method:"email",forReset:Boolean(u)}),u?h({not_login_ticket:c,verify_ticket:p,emailCode:n,password:u,email:""}):m({code:n,not_login_ticket:c,verify_ticket:p})}),[h,n,m,t,c,u,p]),y=(0,j.useCallback)((()=>{u?r({not_login_ticket:c,verify_ticket:p}):c?s({not_login_ticket:c,verify_ticket:p}):l({verify_ticket:p})}),[u,r,c,s,p,l]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:v},{children:[(0,o.jsx)(Op,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(Op,{children:e("common_verify_email_text",{email:null==d?void 0:d.email_verify})},void 0),(0,o.jsx)(xu,{autoSendFirstTime:!0,email:!0,codeFromNumber:p,loading:i,onClickSendCode:y,onSubmit:v,errorMsg:_},void 0),(0,o.jsx)(Hu,{},void 0),(0,o.jsx)(Ep,Object.assign({disabled:Boolean(a)||!n,loading:g},{children:e("login_next")}),void 0)]}),void 0)};var $u=i(58778);const Vu=(0,_d.Z)("div",{target:"e1bi0g3c0"})({marginBottom:"9px"},"label:DivContainer;"),Qu=(0,_d.Z)("p",{target:"e1bi0g3c1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:"4px 0"}]),"label:PDescriptionTitleContainer;"),Yu=(0,j.memo)((function(e){const{loginErrorText:t="",autoFocus:i,create:n=!0,loginError:a}=e,[{password:r,hasInvalid:s,lengthValid:l,contentValid:d},{updatePassword:c}]=(0,V.b7)(Mp),{isMobile:p}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),u=(0,ni.Q)("WebApp_Login"),[g,m]=(0,j.useState)(!1),h=(0,j.useCallback)((()=>{m(!0)}),[]),_=(0,j.useCallback)((()=>{m(!1)}),[]),v=(0,j.useCallback)((e=>{c({value:e.target.value})}),[c]);(0,j.useEffect)((()=>()=>{c({value:""})}),[]);const y=n&&(!1===l||!1===d)&&(p||!g),b=(!l||!d)&&r||g||p,f=!1!==l||!p&&g?!0===l?"success":"default":"error",x=!1!==d||!p&&g?!0===d?"success":"default":"error";return(0,o.jsxs)(Vu,{children:[(0,o.jsx)(ru,{"data-e2e":"passward-input",autoFocus:i,placeholder:u("Password"),onFocus:h,onBlur:_,onChange:v,value:r,errorState:y||Boolean(t)||a,password:!0,autocomplete:"new-password",disableDelete:n},void 0),Boolean(t)&&(0,o.jsx)(Up,{errorIcon:!0,text:u(t),type:"error"},void 0),s&&(0,o.jsx)(Up,{errorIcon:p,text:u("createpw_error_6"),type:"error"},void 0),b&&n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Qu,{children:u("common_registration_password_pc_text")},void 0),(0,o.jsx)(Up,Object.assign({text:u("common_registration_password_pc_1"),type:f},{children:(0,o.jsx)($u.Z,{fill:"success"===f?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0),(0,o.jsx)(Up,Object.assign({text:u("createpw_helptext_2"),type:x},{children:(0,o.jsx)($u.Z,{fill:"success"===x?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0)]},void 0)]},void 0)})),Ku=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{password:i,hasInvalid:n}=(0,V.mp)(Mp),{isMobile:a}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),[{verify_ticket:r,loginLoading:s},{handlePasswordVerify:l}]=(0,V.b7)(kp),d=Fp(),c=(0,j.useCallback)((()=>{t.twoStepSubmit({verification_method:"password",forReset:!1}),l({password:i,verify_ticket:r})}),[l,t,i,r]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:c},{children:[(0,o.jsx)(Op,{children:e("common_verify_password_text")},void 0),(0,o.jsx)(Yu,{create:!1,loginError:Boolean(d),loginErrorText:a?d:void 0},void 0),(0,o.jsx)(Hu,{},void 0),!a&&(0,o.jsx)(Up,{text:e(d),type:"error"},void 0),(0,o.jsx)(Ep,Object.assign({disabled:Boolean(n)||!i,loading:s},{children:e("login_next")}),void 0)]}),void 0)},Ju=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForTwoStep:r,sendPhoneCodeForResetPwd:s}]=(0,V.b7)(td),[{verifyWays:l,verify_ticket:d,not_login_ticket:c,password:p,loginLoading:u,accountQuery:g},{handleCodeVerify:m,handleSmsCodeVerifyReset:h}]=(0,V.b7)(kp),_=Fp(),v=(0,j.useCallback)((()=>{const e={verify_ticket:d,not_login_ticket:c,mobile:null==g?void 0:g.mobile};p?s(e):r(e)}),[null==g?void 0:g.mobile,c,p,s,r,d]),y=(0,j.useCallback)((()=>{t.twoStepSubmit({verification_method:"phone",forReset:Boolean(p)}),p?h({not_login_ticket:c,verify_ticket:d,code:n,password:p}):m({verify_ticket:d,code:n,not_login_ticket:c})}),[n,m,h,t,c,p,d]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:y},{children:[(0,o.jsx)(Op,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(Op,{children:e("common_verify_sms_text",{mobile:null==l?void 0:l.mobile_sms_verify})},void 0),(0,o.jsx)(xu,{autoSendFirstTime:!0,codeFromNumber:d,loading:i,onClickSendCode:v,onSubmit:y,errorMsg:_},void 0),(0,o.jsx)(Hu,{},void 0),(0,o.jsx)(Ep,Object.assign({disabled:Boolean(a)||!n,loading:u},{children:e("login_next")}),void 0)]}),void 0)},Xu=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{isMobile:i}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),n=(0,P.k6)(),{isTwoStep:a,verifyWays:r,password:s}=(0,V.mp)(kp),{type:l}=(0,P.UO)(),d=xp[l];return(0,j.useEffect)((()=>{d&&(null==r?void 0:r[d])||n.replace($.gY.loginHome),t.twoStepNotify({verification_method:l,forReset:Boolean(s)})}),[n,t,s,l,r,d]),(0,o.jsxs)(jp,{children:[i&&(0,o.jsx)($d,{},void 0),(0,o.jsx)(Pp,{children:e(a?"security_step_verification":"common_verify_title")},void 0),l===fp.pwd_verify?(0,o.jsx)(Ku,{},void 0):l===fp.email_verify?(0,o.jsx)(Zu,{},void 0):(0,o.jsx)(Ju,{},void 0)]},void 0)};var eg=i(48655);const tg={initialized:!1,eventCommonParams:{},init(e){var t;const{enter_from:i,enter_method:o,platform:n}=be.parse(e);this.initialized=!0,this.eventCommonParams={enter_from:null!==(t=null==i?void 0:i.toString())&&void 0!==t?t:"login",enter_method:null==o?void 0:o.toString(),platform:n}}},ig=()=>{const e=(0,te.fz)(dl.ZI);(0,j.useEffect)((()=>{e.loginNotify()}),[e])},og={login:{title:"Log in",description:"Log in or sign up for an account on TikTok. Start watching to discover real people and real videos that will make your day.",keywords:"Log in, Log in to TikTok"},signup:{title:"Sign up",description:"Sign up for an account or log back into TikTok. Create an account to discover real people and real videos that will make your day.",keywords:"Sign up, Sign up for TikTok"}},ng=(0,j.memo)((({page:e})=>{const t=og[e],i=(0,ni.Q)("WebApp_Login"),{language:n}=(0,J.m7)((0,ne.L)((()=>["language"]),[]));return(0,o.jsxs)(C.ql,Object.assign({htmlAttributes:{lang:n}},{children:[(0,o.jsx)("title",{children:i(`${t.title}${t.title.indexOf(" ")<0?"":" | TikTok"}`)},void 0),(0,o.jsx)("meta",{name:"description",content:i(t.description)},void 0),(0,o.jsx)("meta",{name:"keywords",content:t.keywords},void 0)]}),void 0)})),ag=(0,_d.Z)("div",{target:"e10o7n900"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"24px",lineHeight:"32px",margin:"32px auto 12px",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),rg=(0,_d.Z)("div",{target:"e10o7n901"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary"}),{fontSize:"18px",lineHeight:"25px",display:"flex",justifyContent:"space-between",marginBottom:"40px"}]),"label:DivDescription;"),sg=(0,_d.Z)("img",{target:"e10o7n902"})({width:"80%",margin:"0 auto 16px"},"label:ImgQR;");var lg=i(30008);const dg=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rg,Object.assign({"data-e2e":"instagram-desc"},{children:e("login_risk_popup_pc_body_2")}),void 0),(0,o.jsx)(sg,{src:lg,"data-e2e":"instagram-img"},void 0)]},void 0)})),cg=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),t=(0,P.TH)(),{fromIns:i}=t.state||{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ag,Object.assign({"data-e2e":"instagram-title"},{children:e(i?"login_new_ins_PC_title":"login_risk_popup_pc_title")}),void 0),(0,o.jsx)(dg,{},void 0)]},void 0)})),pg=(0,_d.Z)("div",{target:"eop2wpq1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{marginBottom:"16px",fontSize:"18px",lineHeight:"24px",display:"flex",justifyContent:"space-between"}]),"label:DivDescription;"),ug=()=>{const e=(0,te.fz)(dl.ZI),t=(0,ni.Q)("WebApp_Login"),[{forceResetResponse:i,loginLoading:n},{handleForceResetPwdByEmail:a,handleForceResetPwdByPhone:r,clearForceResetRes:s}]=(0,V.b7)(hd),{conditional_login_ticket:l,type:d,email:c,mobile:p}=(0,J.m7)(i),[{sendCodeLoading:u,ticket:g,code:m,codeFormatError:h},{sendPhoneCodeForForceResetPwd:_,sendEmailCodeForForceResetPwd:v}]=(0,V.b7)(td),{password:y,contentValid:b,lengthValid:f}=(0,V.mp)(Mp),x=Fp(),k=(0,j.useCallback)((()=>{"email"===d?v({conditional_login_ticket:l}):_({conditional_login_ticket:l})}),[d,v,l,_]),w=(0,j.useCallback)((()=>{const t={code:m,ticket:null!=g?g:"",password:y,conditional_login_ticket:l};e.forceResetSubmit(),"email"===d?a(t):r(t)}),[m,l,a,r,e,y,g,d]),S=!m||!y||!b||!f||Boolean(h),C="email"===d?t("setting_password_code_email_text",{email:c}):t("setting_password_code_sms_text",{mobile:p}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,j.useEffect)((()=>()=>{s()}),[]),(0,o.jsxs)(Bp,Object.assign({onSubmit:w},{children:[(0,o.jsx)(zc,{children:t("common_login_reset_password_title")},void 0),(0,o.jsx)(pg,{children:t("changepw_banner")},void 0),(0,o.jsx)(du,{email:"email"===d,autoSendFirstTime:!0,disabled:!l,codeFromNumber:l,loading:u,onClickSendCode:k},void 0),(0,o.jsx)(Up,{text:C,type:"default"},void 0),(0,o.jsx)(Yu,{loginError:Boolean(x)},void 0),(0,o.jsx)(Up,{text:t(x),type:"error"},void 0),(0,o.jsx)(Sp,Object.assign({disabled:S,loading:n},{children:t("Login")}),void 0)]}),void 0)},gg=(0,_d.Z)("div",{target:"e1419m800"})({marginBottom:"9px",position:"relative"},"label:DivEmailContainer;"),mg=(0,_d.Z)("ul",{target:"e3y4xh60"})((({theme:e})=>({position:"absolute",top:"44px",borderRadius:"4px",background:e.colors.BGPrimary,border:"1px solid",borderColor:e.colors.LineSecondary,zIndex:2,marginTop:"4px",width:"100%",padding:"0"})),"label:UlList;"),hg=(0,_d.Z)("li",{target:"e3y4xh61"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),_g=(0,j.memo)((function({focused:e}){const{emailSuffixConfig:t}=Md((()=>["emailSuffixConfig"]),[]),[{email:i=""},{setSuggestEmailSuffixConfig:n}]=(0,V.b7)(ed),[a,r]=(0,j.useState)(!1);(0,j.useEffect)((()=>{if(e){const e=i.split("@")[1];if(i.includes("@")&&".com"!==e.slice(-4))return void r(!0)}r(!1)}),[e,a,i]);const s=(0,j.useCallback)((e=>()=>{r(!1),n(e)}),[n]);return a?(0,o.jsx)(mg,{children:t.map(((e,t)=>{var n;return(0,o.jsxs)(hg,Object.assign({onClick:s(`@${e}`)},{children:[null!==(n=null==i?void 0:i.split("@")[0])&&void 0!==n?n:"","@",e]}),t)}))},void 0):null})),vg=(0,j.memo)((function(e){const t=(0,ni.Q)("WebApp_Login"),{isMobile:i}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),{emailRegistered:n,errorMsg:a=""}=e,[{emailErrorMsg:r="",email:s=""},{setEmailInfo:l}]=(0,V.b7)(ed),[d,c]=(0,j.useState)(!1),p=(0,j.useCallback)((()=>{c(!0)}),[]),u=(0,j.useCallback)((()=>{setTimeout((()=>{c(!1)}),300)}),[]),g=(0,j.useCallback)((e=>{const t=e.target.value;l({email:t,valid:!0})}),[l]);(0,j.useEffect)((()=>{if(!d&&!i){const e=Zl(s);l({email:s,valid:e})}}),[i,s,d,l]);const m=(Boolean(r||a)||n)&&(!d||i),h=r||a;return(0,o.jsxs)(gg,{children:[(0,o.jsx)(ru,{placeholder:t("common_login_reset_email_input_placeholder"),onFocus:p,onBlur:u,onInput:g,value:s,errorState:m,autocomplete:"email",name:"email"},void 0),!i&&(0,o.jsx)(_g,{focused:d},void 0),m&&(0,o.jsx)(Up,{text:t(h),type:"error"},void 0)]},void 0)})),yg=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{emailErrorMsg:i,email:n=""}=(0,V.mp)(ed),[{loginLoading:a},{changePwdByEmail:r}]=(0,V.b7)(hd),[{sendCodeLoading:s,code:l,codeFormatError:d},{sendEmailCodeForReset:c}]=(0,V.b7)(td),{password:p,lengthValid:u,contentValid:g}=(0,V.mp)(Mp),m=Fp(),h=(0,j.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),r({password:p,email:n,emailCode:l})}),[t,r,p,n,l]),_=(0,j.useCallback)((()=>{c({email:n,email_logic_type:2})}),[n,c]),v=!n||!p||!l||!g||!u||Boolean(d)||Boolean(i);return(0,o.jsxs)(Bp,Object.assign({onSubmit:h},{children:[(0,o.jsx)(zc,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(Nc,{children:[e("setting_password_email_verify_title"),(0,o.jsx)(wu,{text:e("forget_password_switch_phone"),path:$.gY.loginForgetPhonePassword,replace:!0},void 0)]},void 0),(0,o.jsx)(vg,{},void 0),(0,o.jsx)(du,{email:!0,disabled:Boolean(i)||!n,codeFromNumber:n,loading:s,onClickSendCode:_},void 0),(0,o.jsx)(Yu,{loginError:Boolean(m)},void 0),(0,o.jsx)(Up,{text:e(m),type:"error"},void 0),(0,o.jsx)(Sp,Object.assign({disabled:v,loading:a},{children:e("Login")}),void 0)]}),void 0)};var bg=i(51877);const fg=(0,_d.Z)("ul",{target:"e2hldqz0"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{padding:"0",margin:0}]),"label:UlListContainer;"),xg=(0,_d.Z)("li",{target:"e2hldqz1"})((({theme:e,selected:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),()=>t&&{backgroundColor:"rgba(22, 24, 35, .03)"},{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),kg=(0,_d.Z)("span",{target:"e2hldqz2"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary"}),{paddingInlineEnd:"4px"}]),"label:SpanItemName;"),wg=(0,_d.Z)("span",{target:"e2hldqz3"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary"})]),"label:SpanItemCode;"),Sg=({filterCountryList:e=[],onSelected:t,searchText:i,currentSelectCode:n,matchSearchArea:a})=>{const{isMobile:r}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),s=(0,ni.Q)("WebApp_Login"),l=RegExp(i.replace("+","\\+"),"ig"),d=(0,j.useCallback)((({code:e,shortname:i})=>()=>{t({code:e,area:i})}),[t]);return(0,o.jsxs)(fg,{children:[Hl.map((t=>{const{label:a,lists:s}=t;return(0,o.jsx)("div",Object.assign({id:a},{children:s.map((t=>{const{name:a,code:s,shortname:c}=t;if(-1!==e.indexOf(c))return null;if(i&&!(a.match(l)||`+${s}`.match(l)||c.match(l)))return null;const p=`${n}`==`${s}`;return(0,o.jsx)(xg,Object.assign({selected:p,onClick:d({shortname:c,code:s})},{children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kg,{children:a},void 0),(0,o.jsx)(wg,{children:`+${s}`},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kg,{dangerouslySetInnerHTML:{__html:(u=`${a} +${s}`,i?u=u.replace(l,(e=>`<span style="color: #20D5EC">${e}</span>`)):u)}},void 0),p&&(0,o.jsx)(bg.Z,{width:16,height:16,fill:"#000"},void 0)]},void 0)}),a+s);var u}))}),a)})),Boolean(!a)&&(0,o.jsx)(xg,Object.assign({selected:!1,style:{justifyContent:"center"}},{children:s("registration_phone_search_empty")}),void 0)]},void 0)};var jg=i(5550);const Cg=(0,_d.Z)("div",{target:"emwsnhg0"})((({theme:{colors:e}})=>({top:"45px",height:"35px",width:"326px",boxSizing:"border-box",borderBottom:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,marginTop:"4px",display:"flex",justifyContent:"space-between",flexShrink:0})),"label:DivSearchContainer;"),Pg=(0,_d.Z)("div",{target:"emwsnhg1"})((({theme:e})=>({margin:"0 15px",color:e.colors.LineInput,display:"flex",alignItems:"center"})),"label:DivSearchIcon;"),Tg=(0,_d.Z)("input",{target:"emwsnhg2"})((({theme:e})=>({outline:"none",border:"none",flex:"1",color:e.colors.TextPrimary,background:e.colors.BGPrimary,caretColor:e.colors.Primary})),"label:InputSearch;"),Og=()=>{const e=(0,ni.Q)("WebApp_Login"),{matchSearchArea:t}=(0,V.mp)($l),{setAreaSearchText:i,selectAreaCode:n}=(0,V.qj)($l),a=(0,j.useCallback)((e=>{i(e.target.value)}),[i]),r=(0,j.useCallback)((e=>{13===e.keyCode&&t&&n({code:t.code,area:t.shortname})}),[t,n]);return(0,j.useEffect)((()=>()=>{i("")}),[i]),(0,o.jsxs)(Cg,{children:[(0,o.jsx)(Pg,{children:(0,o.jsx)(jg.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)(Tg,{autoFocus:!0,maxLength:35,onKeyUp:r,placeholder:e("registration_phone_search_placeholder"),onChange:a},void 0)]},void 0)},Lg=(0,_d.Z)("div",{target:"e1llxcni0"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,start:"0"}),{maxHeight:"320px",background:e.colors.BGPrimary,border:"0.5px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"4px",position:"absolute",top:"54px",display:"flex",flexDirection:"column",zIndex:2}]),"label:DivSelectorContainer;"),Ig=(0,_d.Z)("div",{target:"e1llxcni1"})({flex:"1",overflow:"auto"},"label:DivListWrapper;"),Ag=(0,_d.Z)("div",{target:"e1llxcni2"})({position:"fixed",zIndex:11,top:0,bottom:0,left:0,right:0,background:"#fff",overflowY:"auto"},"label:DivPageSelectorContainer;"),Eg=(0,_d.Z)("div",{target:"e1llxcni3"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,paddingEnd:"32px",paddingStart:"16px"}),{marginTop:"44px",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivPageSelector;"),Mg=e=>(0,o.jsxs)(Lg,{children:[(0,o.jsx)(Og,{},void 0),(0,o.jsx)(Ig,{children:(0,o.jsx)(Sg,{matchSearchArea:e.matchSearchArea,filterCountryList:e.filterCountryList,onSelected:e.onSelected,currentSelectCode:e.currentSelectCode,searchText:e.searchText},void 0)},void 0)]},void 0);function Rg(e){const{region:t,appType:i}=(0,J.m7)((0,ne.L)((()=>["region","appType"]),[])),[o,n]=(0,V.b7)($l),{areaCode:a}=o;(0,j.useEffect)((()=>{if(!a){let o=!1;if(Hl.forEach((({lists:e})=>e.forEach((({code:e,shortname:i})=>{i===t&&(o=!0,n.selectAreaCode({code:e,area:i}))})))),!o){let t="m"===i?{code:1,area:"US"}:{code:81,area:"JP"};(null==e?void 0:e.find((e=>e===t.area)))&&(t={code:1,area:"CA"}),n.selectAreaCode(t)}}}),[i,t,a,n,e])}var Fg=i(1399);const Dg=(0,_d.Z)("div",{target:"ewblsjs0"})({marginBottom:"9px"},"label:DivContainer;"),Bg=(0,_d.Z)(ru,{target:"ewblsjs1"})({flex:1,width:0,marginBottom:"0","& > input":{background:"transparent"}},"label:StyledBaseInput;");Bg.defaultProps=Object.assign(Object.assign({},Bg.defaultProps),{"data-e2e":"phone-number-input"});const zg=(0,_d.Z)("div",{target:"ewblsjs2"})((({theme:{colors:e},errState:t})=>[{background:e.BGInput,border:`1px solid ${e.LineSecondary2}`,transition:"all 0.3s",borderRadius:"4px",display:"flex"},()=>t?{border:`1px solid ${e.Negative}`,input:{color:e.Negative}}:{}]),"label:DivPhoneInputContainer;"),Ng=(0,_d.Z)("div",{target:"ewblsjs3"})({position:"relative",cursor:"pointer"},"label:DivAreaSelectionContainer;"),Ug=(0,_d.Z)("div",{target:"ewblsjs4"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"12px",height:"44px","::after":{content:'""',width:"1px",height:"30px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),Wg=(0,_d.Z)("span",{target:"ewblsjs5"})((({theme:{colors:e}})=>[{fontSize:"16px",lineHeight:1,color:e.TextPrimary,marginInlineEnd:"12px"}]),"label:SpanLabelContainer;"),qg=(0,_d.Z)(Fg.Z,{target:"ewblsjs7"})((({up:e})=>[{transform:e?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"}]),"label:StyledArrowIcon;"),Gg=(0,j.memo)((function({errorStatus:e,filterCountryList:t}){Rg(t);const i=(0,j.useRef)(null),[n,a]=(0,V.b7)($l),{area:r,areaCode:s,phoneErrorMsg:l,showAreaCodeSelector:d,searchText:c,phone:p,matchSearchArea:u}=n,[g,m]=(0,j.useState)(!1),{checkPhoneNumberFormat:h}=a,{toggleAreaCodeSelector:_,selectAreaCode:v}=a,y=(0,ni.Q)("WebApp_Login"),b=(0,j.useCallback)((e=>{var t;d&&!(null===(t=null==i?void 0:i.current)||void 0===t?void 0:t.contains(e.target))&&_()}),[d,_]);(0,j.useEffect)((()=>(window.addEventListener("mousedown",b),()=>{window.removeEventListener("mousedown",b)})),[a,b]);const f=(0,j.useCallback)((e=>{h({phone:e.target.value})}),[h]),x=(0,j.useCallback)((()=>{m(!0)}),[]),k=(0,j.useCallback)((()=>{m(!1)}),[]),w=(0,j.useCallback)((({code:e,area:t})=>{v({code:e,area:t})}),[v]),S=Boolean((l||e)&&!g);return(0,o.jsxs)(Dg,{children:[(0,o.jsxs)(zg,Object.assign({errState:S},{children:[(0,o.jsxs)(Ng,Object.assign({ref:i},{children:[(0,o.jsxs)(Ug,Object.assign({onClick:_},{children:[(0,o.jsxs)(Wg,{children:[r," +",s]},void 0),(0,o.jsx)(qg,{up:d},void 0)]}),void 0),d&&(0,o.jsx)(Mg,{matchSearchArea:u,filterCountryList:t,onSelected:w,currentSelectCode:s,searchText:c},void 0)]}),void 0),(0,o.jsx)(Bg,{value:p,border:!1,errState:S,placeholder:y("phone_number"),onChange:f,onFocus:x,onBlur:k,name:"mobile",autocomplete:"tel-national"},void 0)]}),void 0),S&&(0,o.jsx)(Up,{text:y(l||e||""),type:"error"},void 0)]},void 0)})),Hg=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[i]=(0,V.b7)($l),{phoneErrorMsg:n,mobile:a,phone:r}=i,[{sendCodeLoading:s,codeFormatError:l,code:d},{sendPhoneCodeForResetPwd:c}]=(0,V.b7)(td),[{loginLoading:p},{changePwdByMobile:u}]=(0,V.b7)(hd),{password:g,lengthValid:m,contentValid:h}=(0,V.mp)(Mp),_=Fp(),v=(0,j.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit(),u({password:g,mobile:a,phoneCode:d})}),[t,u,g,a,d]),y=(0,j.useCallback)((()=>{c({mobile:a})}),[a,c]),b=!a||!g||!d||!h||!m||Boolean(n)||Boolean(l);return(0,o.jsxs)(Bp,Object.assign({onSubmit:v},{children:[(0,o.jsx)(zc,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(Nc,{children:[e("setting_bind_phone_input_title"),(0,o.jsx)(wu,{text:e("forget_password_switch_email"),path:$.gY.loginForgetEmailPassword,replace:!0},void 0)]},void 0),(0,o.jsx)(Gg,{},void 0),(0,o.jsx)(du,{disabled:Boolean(n)||!r,codeFromNumber:a,loading:s,onClickSendCode:y},void 0),(0,o.jsx)(Yu,{loginError:Boolean(_)},void 0),(0,o.jsx)(Up,{text:e(_),type:"error"},void 0),(0,o.jsx)(Sp,Object.assign({disabled:b,loading:p},{children:e("Login")}),void 0)]}),void 0)},Zg=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{setEmail:i}=(0,V.qj)(ed),[{loginLoading:n},{handlePasswordLogin:a}]=(0,V.b7)(hd),{password:r,hasInvalid:s}=(0,V.mp)(Mp),[l,d]=(0,j.useState)(""),c=Fp([l]),p=(0,j.useCallback)((()=>{const e=Zl(l)?l:void 0;t.setPlatform(e?"email":"handle"),t.loginSubmit(),a({username:l,password:r,email:e})}),[a,t,r,l]),u=(0,j.useCallback)((e=>{d(e.target.value)}),[]),g=(0,j.useCallback)((()=>{Zl(l)&&i(l)}),[l,i]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:p},{children:[(0,o.jsx)(ru,{placeholder:e("Email or Username"),onChange:u,name:"username",value:l,"data-e2e":"email-input"},void 0),(0,o.jsx)(Yu,{create:!1,loginError:Boolean(c)},void 0),c&&(0,o.jsx)(Up,{text:e(c),type:"error"},void 0),(0,o.jsx)(Iu,{onClickForgetEmailPwd:g},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!l||!r||s,loading:n,"data-e2e":"login-button"},{children:e("Login")}),void 0)]}),void 0)})),$g=()=>{const e=(0,ni.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(zc,{children:e("Login")},void 0),(0,o.jsxs)(Nc,{children:[e("Email or Username")," ",(0,o.jsx)(wu,{text:e("common_login_switch_phone"),path:$.gY.loginPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(Zg,{},void 0)]},void 0)},Vg=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForLogin:r,sendPhoneCodeForVerify:s}]=(0,V.b7)(td),[{phoneNotRegistered:l,loginLoading:d},{handleSmsLogin:c,handleSmsVerify:p}]=(0,V.b7)(hd),{registerPhone:u}=(0,V.qj)(md),{isSecurityVerification:g}=Md((()=>["isSecurityVerification"]),[]),[m]=(0,V.b7)($l),{mobile:h,phoneErrorMsg:_}=m,v=h&&n&&!_&&!a,y=Fp(),b=(0,j.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit();const e={mobile:h,phoneCode:n,login_only:!0};g?p(e):c(e)}),[c,p,g,t,h,n]),f=(0,j.useCallback)((()=>{g?s({mobile:h}):r({mobile:h})}),[g,h,r,s]),x=(0,j.useCallback)((()=>{u({})}),[u]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:b},{children:[(0,o.jsx)(zc,{children:e("Login")},void 0),(0,o.jsxs)(Nc,{children:[e("phone"),(0,o.jsx)(wu,{text:e("common_login_switch_email"),path:$.gY.loginEmail,replace:!0,"data-e2e":"email-tab"},void 0)]},void 0),(0,o.jsx)(Gg,{},void 0),(0,o.jsx)(du,{disabled:Boolean(_)||!h,codeFromNumber:h,loading:i,errorMsg:y,onClickSendCode:f},void 0),(0,o.jsx)(wu,{text:e("login_option_password"),path:$.gY.loginPhonePassword},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!v,loading:d,"data-e2e":"login-button"},{children:e("Login")}),void 0),l&&(0,o.jsxs)(Uc,{children:[(0,o.jsx)(Wc,{children:e("common_login_sms_unregistered_pc_1")},void 0),(0,o.jsx)(Wc,Object.assign({link:!0,onClick:x},{children:e("common_login_sms_unregistered_pc_2")}),void 0)]},void 0)]}),void 0)},Qg=(0,_d.Z)("div",{target:"e1c067ot0"})({display:"flex",alignItems:"center",marginTop:"9px"},"label:DivLinksContainer;"),Yg=(0,_d.Z)("span",{target:"e1c067ot1"})((({theme:e})=>({width:"1px",height:"12px",margin:"0 16px",background:e.colors.LineSecondary})),"label:SpanSplitLine;"),Kg=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,V.b7)(hd),{phoneErrorMsg:a,phone:r,areaCode:s}=(0,V.mp)($l),{password:l,hasInvalid:d}=(0,V.mp)(Mp),c=Fp(),p=(0,j.useCallback)((()=>{const e=`+${s} ${r}`;t.setPlatform("phone"),t.loginSubmit(),n({account:e,password:l,mobile:e})}),[s,n,t,l,r]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:p},{children:[(0,o.jsx)(zc,{children:e("Login")},void 0),(0,o.jsxs)(Nc,{children:[e("phone")," ",(0,o.jsx)(wu,{text:e("common_login_switch_email"),path:$.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Gg,{},void 0),(0,o.jsx)(Yu,{create:!1,loginError:Boolean(c)},void 0),c&&(0,o.jsx)(Up,{text:e(c),type:"error"},void 0),(0,o.jsxs)(Qg,{children:[(0,o.jsx)(wu,{text:e("forget_password"),path:$.gY.loginForgetPhonePassword},void 0),(0,o.jsx)(Yg,{},void 0),(0,o.jsx)(wu,{text:e("common_login_password_button"),path:$.gY.loginPhone},void 0)]},void 0),(0,o.jsx)(Sp,Object.assign({disabled:Boolean(a)||!r||!l||d,loading:i},{children:e("Login")}),void 0)]}),void 0)},Jg=(0,_d.Z)("div",{target:"eph3mrd0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:e.isMobile?"20px":"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivTitle;"),Xg=(0,_d.Z)("div",{target:"eph3mrd1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextTertiary"}),{fontSize:"14px",display:"flex",justifyContent:"space-between",marginBottom:"24px"}]),"label:DivDescription;"),em=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,V.b7)(hd),{email:a}=(0,V.mp)(ed),{isMobile:r}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),[s,l]=(0,j.useState)(""),d=Fp([s]),c=(0,j.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),n({email:a,password:s,username:a})}),[a,n,t,s]),p=(0,j.useCallback)((e=>{l(e.target.value)}),[]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:c},{children:[(0,o.jsx)(Jg,{children:e("common_registration_email_existing_title")},void 0),r&&(0,o.jsx)(Xg,{children:e("common_registration_email_existing_text")},void 0),(0,o.jsx)(ru,{value:a,readonly:!0,disableDelete:!0},void 0),(0,o.jsx)(ru,{placeholder:e("Password"),onChange:p,password:!0,border:!0,errorState:Boolean(d)},void 0),(0,o.jsx)(Up,{text:e(d||(r?"":"common_registration_email_existing_text")),type:d?"error":"default"},void 0),(0,o.jsx)(Iu,{},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!s,loading:i},{children:e("Login")}),void 0)]}),void 0)},tm=()=>{const e=(0,ni.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(zc,{children:e("Login")},void 0),(0,o.jsx)(em,{},void 0)]},void 0)},im=(0,j.memo)((()=>{ig(),(0,Pd.q)({pid:"login"});const{forceResetResponse:e}=(0,V.mp)(hd),{isMobile:t}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[]));return(0,o.jsxs)(Lc,Object.assign({isMobile:t},{children:[(0,o.jsx)(ng,{page:"login"},void 0),(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:$.gY.loginHome,component:Mc,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginQRcode,component:bp,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhoneOrEmail,component:Vg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhone,component:Vg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhonePassword,component:Kg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginEmail,component:$g,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginWithSignedEmail,component:tm,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginTwoStepVerify,component:Xu,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetEmailPassword,component:e?ug:yg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetPhonePassword,component:e?ug:Hg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginDownloadApp,component:cg,exact:!0},void 0),(0,o.jsx)(P.AW,{path:"*",component:Mc},void 0)]},void 0)]}),void 0)}));var om=i(64785);function nm(){const{registerLimited:e}=(0,V.mp)(hl),t=(0,P.k6)();(0,j.useEffect)((()=>{e&&t.replace($.gY.signupCreateAccount)}),[t,e])}function am(){const{region:e}=(0,J.m7)((0,ne.L)((()=>["region"]),[])),t=(0,P.k6)(),{validateAge:i}=(0,V.qj)(hl),[{fromNotRegisterLogin:o,thirdPlatformNotRegistered:n},{registerThirdPlatform:a,registerPhone:r}]=(0,V.b7)(md),s=(0,j.useCallback)((()=>{"KR"===e?t.push($.gY.signupPolicyConfirm):"Third"===o&&n?a({ageCheckDone:!0,platform:n.platform,profileKey:n.profileKey}):"Phone"===o?r({ageCheckDone:!0}):t.push($.gY.signupPhoneOrEmail)}),[e,o,t,r,a,n]);return{handleCheckAge:(0,j.useCallback)((()=>{i({canSkip:!1,checkPassCallback:s})}),[s,i])}}function rm(){const{registerLimited:e,ageGateAction:t}=(0,V.mp)(hl),i=(0,P.k6)();(0,j.useEffect)((()=>{e||1===t||i.replace($.gY.signupHome)}),[t,i,e])}const sm=(0,_d.Z)("div",{target:"e7y6k0x0"})((({theme:e,isModal:t})=>[(0,de.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:t?"20px":"32px",lineHeight:t?"24px":"38px"}]),"label:DivTitle;"),lm=(0,_d.Z)("div",{target:"e7y6k0x1"})((({theme:e,isModal:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:t?"14px":"18px",lineHeight:t?"18px":"24px",textAlign:"center",padding:"16px 8px"}]),"label:DivDescription;"),dm=(0,_d.Z)("div",{target:"e7y6k0x2"})((({isModal:e=!1})=>[cm(e)]),"label:DivContainer;"),cm=e=>e?{paddingTop:"32px",width:"300px"}:{marginTop:"110px"},pm=({isModal:e=!1})=>{const t=(0,ni.Q)("WebApp_Login"),{setShowAgeConfirm:i}=(0,V.qj)(hl),n=(0,P.k6)(),a=(0,j.useCallback)((()=>{i(!1),n.push($.gY.signupCreateAccount)}),[n,i]),r=(0,j.useMemo)((()=>e?{borderLeft:"none",borderRight:"none",borderBottom:"none",borderRadius:"0 0 8px 8px",fontWeight:500}:void 0),[e]);return(0,o.jsxs)(dm,Object.assign({isModal:e},{children:[(0,o.jsx)(sm,Object.assign({isModal:e},{children:t("mus_agegate_error_ftc_title")}),void 0),(0,o.jsx)(lm,Object.assign({isModal:e},{children:t("mus_agegate_error_ftc_desc")}),void 0),(0,o.jsx)(Sp,Object.assign({onClick:a,buttonTheme:e?"default":"primary",bottonTheme:"text",style:r},{children:t("Continue")}),void 0)]}),void 0)};var um;!function(e){e.Terms="terms-of-service",e.Privacy="privacy-policy",e.Push="push-policy"}(um||(um={}));const gm=[{title:"common_registration_terms_and_conditions_decription_terms",value:"terms-of-service",content:""},{title:"common_registration_terms_and_conditions_decription_pp",value:"privacy-policy",content:""},{title:"register_page_marketing_push_title",value:"push-policy",content:"register_page_marketing_push_subtitle"}];var mm;!function(e){e.Big="big",e.Small="small"}(mm||(mm={}));const hm=(0,_d.Z)("div",{target:"e14eam340"})((({size:e})=>({width:"big"===e?"32px":"24px",position:"relative"})),"label:DivCheckboxWrapper;"),_m=(0,_d.Z)("input",{target:"e14eam341"})({width:"24px",height:"24px",visibility:"hidden"},"label:InputCheckbox;"),vm=(0,_d.Z)("i",{target:"e14eam342"})((({theme:e,checked:t,circle:i=!0,size:o})=>[(0,de.YJ)({direction:e.direction,start:"0"}),{position:"absolute",top:0,borderRadius:i?"50%":"unset",border:"1px solid",borderColor:t?e.colors.Primary:e.colors.LineInverse,marginInlineEnd:"8px",display:"inline-block",background:t?e.colors.Primary:e.colors.BGPrimary,transition:"all .1s",padding:"3px 0",textAlign:"center",boxSizing:"border-box"},ym(o,i)]),"label:ICheckboxIcon;"),ym=(e,t)=>"small"===e?{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px"}:{width:t?"24px":"22px",height:t?"24px":"22px"},bm=({id:e,value:t,checked:i,onChange:n,circle:a,size:r="big"})=>{const s=(0,j.useCallback)((e=>{n(e.target.checked,t)}),[n,t]);return(0,o.jsxs)(hm,Object.assign({size:r},{children:[(0,o.jsx)(_m,{type:"checkbox",value:t,id:e,onClick:s},void 0),(0,o.jsx)("label",Object.assign({htmlFor:e},{children:(0,o.jsx)(vm,Object.assign({checked:i,circle:a,size:r},{children:(0,o.jsx)(bg.Z,{fill:"white",fontSize:"14px"},void 0)}),void 0)}),void 0)]}),void 0)},fm=(0,_d.Z)("div",{target:"eb49p770"})((({theme:e})=>[{paddingBottom:e.isMobile?"64px":"unset"}]),"label:DivPolicyContainer;"),xm=(0,_d.Z)("h3",{target:"eb49p771"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),km(e.isMobile)]),"label:H3Title;"),km=e=>e?{fontSize:"17px",lineHeight:"22px",marginBottom:"24px",textAlign:"left"}:{fontSize:"32px",lineHeight:"38px",marginBottom:"32px",textAlign:"center",marginTop:"64px"},wm=(0,_d.Z)("div",{target:"eb49p772"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),Sm=(0,_d.Z)("p",{target:"eb49p773"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"15px",lineHeight:"24px",display:"inline"}]),"label:PCheckboxText;"),jm=(0,_d.Z)("h5",{target:"eb49p774"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"15px",lineHeight:"24px",display:"inline",margin:0}]),"label:H5CheckboxTitle;"),Cm=(0,_d.Z)("p",{target:"eb49p775"})((({theme:e})=>[{fontSize:"12px",lineHeight:"18px",maxHeight:"140px",overflowY:"auto",wordBreak:"break-word",padding:"12px",background:e.colors.BGPlaceholderDefault,color:e.colors.TextSecondary,borderRadius:"8px",marginBottom:"16px",marginTop:"12px",img:{maxWidth:"100%"},"h1, h2, h3, h4, h5, h6, p, ul, ol, li, strong, font, a":{fontSize:"12px !important",lineHeight:"15px !important",color:`${e.colors.TextSecondary} !important`,margin:0,padding:0},strong:{fontWeight:"normal"},"ul > li":{listStyleType:"disc"},a:{cursor:"pointer",textDecoration:"underline"}}]),"label:PPolicyContent;"),Pm=(0,_d.Z)("div",{target:"eb49p776"})((({theme:e})=>[Tm(e.isMobile),{background:e.colors.BGPrimary}]),"label:DivButtonWrapper;"),Tm=e=>e?{position:"fixed",bottom:"0px",left:"0",right:"0",padding:"8px 32px"}:{marginTop:"9px"},Om=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),t=(0,P.k6)(),{isMobile:i}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),[{termsDomContent:n,privacyDomContent:a},{requestPolicyContent:r,setKrPolicySelection:s}]=(0,V.b7)(ad),[{fromNotRegisterLogin:l,thirdPlatformNotRegistered:d},{registerThirdPlatform:c,registerPhone:p}]=(0,V.b7)(md),[u,g]=(0,j.useState)([]),m=(0,j.useMemo)((()=>i?{marginTop:"0"}:void 0),[i]);(0,j.useEffect)((()=>{r({articleKeys:["terms-of-service","privacy-policy"]})}),[r]);const h=(0,j.useCallback)((e=>{g(e?["terms-of-service","privacy-policy","push-policy"]:[])}),[]),_=(0,j.useCallback)(((e,t)=>{const i=u.indexOf(t);g(-1===i?[...u,t]:u.filter((e=>e!==t)))}),[u]);(0,j.useEffect)((()=>{s(u)}),[s,u]);const v=(0,j.useCallback)((()=>{"Third"===l&&d?c({ageCheckDone:!0,platform:d.platform,profileKey:d.profileKey}):"Phone"===l?p({ageCheckDone:!0}):t.push($.gY.signupPhone)}),[l,t,p,c,d]),y=-1===u.indexOf("terms-of-service")||-1===u.indexOf("privacy-policy");return(0,o.jsxs)(fm,{children:[(0,o.jsx)(xm,Object.assign({"data-e2e":"policy-confirm-title"},{children:e("common_registration_terms_and_conditions_title")}),void 0),(0,o.jsxs)(wm,{children:[(0,o.jsx)(bm,{"data-e2e":"policy-confirm-box",circle:!0,checked:3===u.length,onChange:h,id:"signup-policy-all"},void 0),(0,o.jsx)(Sm,Object.assign({"data-e2e":"policy-confirm-item"},{children:e("register_page_agree_all_kr")}),void 0)]},void 0),gm.map((({title:t,value:i,content:r},s)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)(wm,{children:[(0,o.jsx)(bm,{id:`signup-policy-${i}`,checked:-1!==u.indexOf(i),value:i,onChange:_,circle:!0},void 0),(0,o.jsx)(jm,{children:e(t)},void 0)]},void 0),"terms-of-service"===i?(0,o.jsx)(Cm,{dangerouslySetInnerHTML:{__html:n}},void 0):"privacy-policy"===i?(0,o.jsx)(Cm,{dangerouslySetInnerHTML:{__html:a}},void 0):(0,o.jsx)(Cm,{children:e(r)},void 0)]},s))),(0,o.jsx)(Pm,{children:(0,o.jsx)(Sp,Object.assign({disabled:y,onClick:v,style:m,"data-e2e":"next-button"},{children:e("common_registration_terms_and_conditions_next")}),void 0)},void 0)]},void 0)}));var Lm=i(16789);const Im=["Month_1","Month_2","Month_3","Month_4","Month_5","Month_6","Month_7","Month_8","Month_9","Month_10","Month_11","Month_12"],Am=()=>Im.map(((e,t)=>({value:t+1,key:e}))),Em=(e=1)=>{let t=31;return 2===e?t=29:-1!==[4,6,9,11].indexOf(e)&&(t=30),Array(t).fill(0).map(((e,t)=>({value:t+1,key:`${t+1}`})))},Mm=(0,_d.Z)("div",{target:"e1phcp2x0"})((({theme:e})=>({background:e.colors.BGInput,borderRadius:"4px",position:"relative","& + &":{marginInlineStart:"8px"},cursor:"pointer"})),"label:DivSelector;");Mm.defaultProps=Object.assign(Object.assign({},Mm.defaultProps),{"data-e2e":"select-container"});const Rm=(0,_d.Z)("div",{target:"e1phcp2x1"})((({hasValue:e,theme:t,error:i})=>({width:"120px",height:"44px",padding:"0 12px",display:"flex",justifyContent:"space-between",alignItems:"center",color:i?t.colors.Negative:e?t.colors.TextPrimary:t.colors.TextQuaternary,fontSize:"16px"})),"label:DivSelectLabel;"),Fm=(0,_d.Z)(Fg.Z,{target:"e1phcp2x2"})((({theme:e,up:t})=>({color:e.colors.TextPrimary,transform:t?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"})),"label:StyledArrowTriangleDownLargeFill;"),Dm=(0,_d.Z)(bg.Z,{target:"e1phcp2x3"})({width:"16px",height:"16px",marginInlineStart:"12px"},"label:StyledSelectIcon;"),Bm=(0,_d.Z)("div",{target:"e1phcp2x4"})((({theme:e,show:t})=>[(0,de.YJ)({direction:e.direction,end:"0",start:"0"}),{width:"120px",maxHeight:"320px",overflow:"auto",position:"absolute",background:e.colors.BGPrimary,borderRadius:"4px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",top:"50px",zIndex:12,display:t?"block":"none",transition:"display .3s"}]),"label:DivOptionsWarpper;");Bm.defaultProps=Object.assign(Object.assign({},Bm.defaultProps),{"data-e2e":"select-list"});const zm=(0,_d.Z)("div",{target:"e1phcp2x5"})((({theme:e,selected:t})=>({height:"34px",overflow:"auto",fontSize:"16px",padding:"0 12px",cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.TextPrimary,background:t?e.colors.BGView:"unset",":hover":{background:e.colors.BGView}})),"label:DivOption;"),Nm=e=>{const t=(0,ni.Q)("WebApp_Login"),{placeholder:i,options:n,selectItem:a,onClick:r,error:s}=e,{key:l,value:d}=null!=a?a:{},c=(0,j.useRef)(null),[p,u]=(0,j.useState)(!1),g=(0,j.useCallback)((e=>()=>{r(e),u(!1)}),[r]),m=(0,j.useCallback)((e=>{var t;p&&!(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.contains(e.target))&&u(!1)}),[p]);(0,j.useEffect)((()=>(window.addEventListener("mousedown",m),()=>{window.removeEventListener("mousedown",m)})),[m]);const h=(0,j.useCallback)((()=>{u(!p)}),[p]);return(0,o.jsxs)(Mm,Object.assign({ref:c},{children:[(0,o.jsxs)(Rm,Object.assign({onClick:h,hasValue:Boolean(l),error:s},{children:[t(null!=l?l:i),(0,o.jsx)(Fm,{up:p},void 0)]}),void 0),(0,o.jsx)(Bm,Object.assign({show:p},{children:n.map(((e,i)=>{var n;return(0,o.jsxs)(zm,Object.assign({selected:d===e.value,onClick:g(e)},{children:[t(`${null!==(n=e.key)&&void 0!==n?n:e.value}`),d===e.value&&(0,o.jsx)(Dm,{},void 0)]}),i)}))}),void 0)]}),void 0)},Um=(0,_d.Z)("div",{target:"e18rms3f0"})({display:"flex",marginBottom:"4px"},"label:DivAgeSelector;"),Wm=(0,_d.Z)("div",{target:"e18rms3f1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"16px",lineHeight:"22px",marginBottom:"4px"}]),"label:DivTitle;"),qm=(0,_d.Z)("div",{target:"e18rms3f2"})((({theme:e,type:t})=>[(0,de.GI)({theme:e,color:"error"===t?"Negative":"TextTertiary"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"16px"}]),"label:DivDescription;"),Gm=Am(),Hm=(()=>{const e=new Date(1900,0,1,0,0,0),t=new Date((new Date).getFullYear()-1,11,31,0,0,0);return Array(t.getFullYear()-e.getFullYear()+1).fill(t.getFullYear()).map(((e,t)=>({value:e-t,key:""+(e-t)})))})(),Zm=(0,j.memo)((function(){const e=(0,te.fz)(dl.ZI),[{ageErrorMsg:t,year:i,month:n,date:a},{setBirthday:r,setMonth:s,setYear:l,setDate:d}]=(0,V.b7)(hl),c=(0,ni.Q)("WebApp_Login");(0,j.useEffect)((()=>{n&&i&&a&&r({year:i.value,month:n.value,date:a.value})}),[i,n,a,r]),(0,j.useEffect)((()=>{e.ageGateShow()}),[]);const p=(0,j.useCallback)((e=>{s(e)}),[s]),u=(0,j.useCallback)((e=>{d(e)}),[d]),g=(0,j.useCallback)((e=>{l(e)}),[l]),m=t||"mus_age_gate_tips";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Wm,{children:c("common_registration_agegate_title")},void 0),(0,o.jsxs)(Um,{children:[(0,o.jsx)(Nm,{error:Boolean(t),placeholder:"Month",selectItem:n,options:Gm,onClick:p},void 0),(0,o.jsx)(Nm,{error:Boolean(t),placeholder:"Day",selectItem:a,options:Em(null==n?void 0:n.value),onClick:u},void 0),(0,o.jsx)(Nm,{error:Boolean(t),placeholder:"Year",selectItem:i,options:Hm,onClick:g},void 0)]},void 0),(0,o.jsx)(qm,Object.assign({type:t?"error":"default"},{children:c(m)}),void 0)]},void 0)})),$m=(0,_d.Z)("div",{target:"e1lzrlvq0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),Vm=(0,_d.Z)("div",{target:"e1lzrlvq1"})({width:"375px",margin:"auto"},"label:DivLoginContainer;"),Qm=(0,_d.Z)("div",{target:"e1lzrlvq2"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),Ym=()=>{const e=(0,ni.Q)("WebApp_Login"),{handleCheckAge:t}=am(),{signupLoading:i}=(0,V.mp)(md),{birthday:n,ageErrorMsg:a,showErrorByToast:r,checkAgeLoading:s}=(0,V.mp)(hl);return(0,j.useEffect)((()=>{a&&r&&Lm.Z.open({content:e(a),duration:3})}),[a,e,r]),(0,o.jsxs)(Vm,{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(Zm,{},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!n,loading:i||s,onClick:t,"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0)]},void 0)},Km=(0,_d.Z)("div",{target:"eopmsux0"})({marginBottom:"16px",position:"relative"},"label:DivUsernameContainer;"),Jm=(0,_d.Z)("div",{target:"eopmsux1"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",boxSizing:"border-box",paddingTop:"14.5px",width:"20px",height:"44px",top:0,div:{position:"absolute",width:"15px",height:"15px",margin:"2px",border:"2px solid rgba(22, 24, 35, .34)",borderRadius:"50%",animation:"lds-ring 1.2s cubic-bezier(.5, 0, .5, 1) infinite",borderColor:"rgba(22, 24, 35, .34) transparent transparent transparent",":nth-of-type(1)":{animationDelay:"-.45s"},":nth-of-type(2)":{animationDelay:"-.3s"},":nth-of-type(3)":{animationDelay:"-.15s"}},"@keyframes lds-ring":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}]),"label:DivNameCheckLoading;"),Xm=(0,_d.Z)("div",{target:"e1ulspo0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",marginTop:"11px",borderRadius:"4px",border:"1px solid",background:e.BGPrimary,borderColor:e.LineSecondary,zIndex:2,width:"100%",":before":{content:'""',height:"14px",position:"absolute",background:e.BGPrimary,width:"14px",top:"-7px",left:"rtl"===t?"unset":"14px",right:"rtl"===t?"14px":"unset",zIndex:-1,borderInlineEnd:`1px solid ${e.LineSecondary2}`,borderTop:`1px solid ${e.LineSecondary2}`,transform:"rtl"===t?"rotateZ(45deg)":"rotateZ(-45deg)"}}]),"label:DivSuggestListWrapper;"),eh=(0,_d.Z)("div",{target:"e1ulspo1"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"13px",lineHeight:"17px",padding:"16px 12px 9px"}]),"label:DivLabel;"),th=(0,_d.Z)("ul",{target:"e1ulspo2"})({padding:"0",margin:"0",maxHeight:"200px",overflowY:"auto"},"label:UlList;"),ih=(0,_d.Z)("li",{target:"e1ulspo3"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),oh=(0,j.memo)((function(){var e,t;const[{usernameInfo:i},{setUsername:n}]=(0,V.b7)(md),a=(0,ni.Q)("WebApp_Login"),r=(0,j.useCallback)((e=>()=>{n(e)}),[n]);return(null==i?void 0:i.isValid)||!(null===(e=null==i?void 0:i.suggestList)||void 0===e?void 0:e.length)?null:(0,o.jsxs)(Xm,{children:[(0,o.jsx)(eh,{children:a("common_registration_email_input_suggested")},void 0),(0,o.jsx)(th,{children:null===(t=null==i?void 0:i.suggestList)||void 0===t?void 0:t.map(((e,t)=>(0,o.jsx)(ih,Object.assign({onClick:r(`${e}`)},{children:e}),t)))},void 0)]},void 0)})),nh=(0,j.memo)((function({autoFocus:e,ftc:t,placeholder:i,tip:n}){var a,r;const[{usernameInfo:s,username:l,checkNameLoading:d},{validateUsername:c,validateFTCUsername:p,setUsername:u,setUsernameInfo:g}]=(0,V.b7)(md),{isMobile:m}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),h=(0,ni.Q)("WebApp_Login"),_=(0,j.useCallback)((e=>{const t=e.target.value;u(t)}),[u]);(0,j.useEffect)((()=>{l?t?p({name:l}):c({name:l}):g(void 0)}),[t,g,l,p,c]);const v=m?"":"common_registration_username_text";return(0,o.jsxs)(Km,{children:[(0,o.jsx)(ru,{autoFocus:e,placeholder:h(null!=i?i:"common_registration_username_placeholder"),onChange:_,errorState:s&&!s.isValid&&!d,autoComplete:"off",name:"new-username",value:l,disableDelete:d},void 0),d&&(0,o.jsxs)(Jm,{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]},void 0),(0,o.jsx)(Up,{text:h(null!==(r=null!==(a=null==s?void 0:s.errorMsg)&&void 0!==a?a:n)&&void 0!==r?r:v),type:(null==s?void 0:s.errorMsg)?"error":"default"},void 0),!m&&(0,o.jsx)(oh,{},void 0)]},void 0)})),ah=(0,_d.Z)("div",{target:"e1sbfgbz0"})((({theme:e,asText:t})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.BGPrimary,borderBottom:e.isMobile?"none":"1px solid",borderColor:e.colors.LineReverse3,padding:t?"unset":"16px 30px",marginBottom:t?"12px":"unset"})),"label:DivAgreement;");ah.defaultProps=Object.assign(Object.assign({},ah.defaultProps),{"data-e2e":"policy-confirm-tips"});const rh=(0,_d.Z)("p",{target:"e1sbfgbz1"})((({theme:e,asText:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"12px",lineHeight:"15px",width:"375px",textAlign:t?"unset":"center"}]),"label:PText;"),sh=(0,_d.Z)("a",{target:"e1sbfgbz2"})((({theme:e})=>({color:e.colors.TextPrimary})),"label:ALink;"),lh=(0,j.memo)((function({i18nKey:e,show:t,asText:i}){const{isMobile:n,language:a}=(0,J.m7)((0,ne.L)((()=>["isMobile","language"]),[])),r=n?[$.gY.signupHome]:[$.gY.signupPhoneOrEmail,$.gY.signupPhone,$.gY.signupEmail,$.gY.signupHome],{pathname:s}=(0,P.TH)(),l=null!=t?t:r.find((e=>e===s.replace(/\/$/,""))),d=(0,ni.Q)("WebApp_Login"),c=d(null!=e?e:"common_registration_email_input_agreement").split(/%\d*\$s/),p=d("common_registration_terms_use"),u=d("common_registration_privacy_policy");return l?(0,o.jsx)(ah,Object.assign({asText:i},{children:(0,o.jsxs)(rh,Object.assign({asText:i},{children:[c[0]," ",(0,o.jsx)(sh,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/terms-of-use?lang=${a}`},{children:p}),void 0),c[1]," ",(0,o.jsx)(sh,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/privacy-policy?lang=${a}`},{children:u}),void 0),c[2]]}),void 0)}),void 0):null})),dh=()=>{const e=(0,ni.Q)("WebApp_Login"),[{usernameInfo:t,errorMsg:i,signupLoading:n},{usernameRegister:a}]=(0,V.b7)(md),{registerLimited:r}=(0,V.mp)(hl);rm();const{password:s,lengthValid:l,contentValid:d}=(0,V.mp)(Mp),c=(0,j.useCallback)((()=>{a({password:s})}),[s,a]),p=!1===(null==t?void 0:t.isValid)||!s||!d||!l;return(0,o.jsxs)(Bp,Object.assign({onSubmit:c},{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(Qm,{children:e("common_login_sms_popup_option_1")},void 0),(0,o.jsx)(nh,{autoFocus:!0,placeholder:e("common_registration_username_placeholder"),tip:"mus_create_account_desc_pc",ftc:!0},void 0),(0,o.jsx)(Yu,{loginError:Boolean(i)},void 0),r&&(0,o.jsx)(lh,{show:!0},void 0),(0,o.jsx)(Up,{text:e(null!=i?i:""),type:"error"},void 0),(0,o.jsx)(Sp,Object.assign({disabled:p,loading:n},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},ch=(0,_d.Z)("div",{target:"e6sea5o0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:e.isMobile?"normal":"bold"}),{height:e.isMobile?"16px":"44px",lineHeight:e.isMobile?"16px":"44px",textAlign:"center",fontSize:"16px",marginTop:e.isMobile?"unset":"10px",width:"100%",cursor:"pointer"}]),"label:DivTextContainer;"),ph=(0,j.memo)((function(){var e;const t=(0,ni.Q)("WebApp_Login"),{setLoginSuccess:i}=(0,V.qj)(hd),{isMobile:n}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),a=(0,P.k6)(),r=(null===(e=(0,P.$B)($.gY.signupCreatePassword))||void 0===e?void 0:e.isExact)&&n,s=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r?a.push($.gY.signupCreateUsername):i()}),[a,r,i]);return(0,o.jsx)(ch,Object.assign({onClick:s},{children:t("common_registration_username_skip")}),void 0)})),uh=()=>{const e=(0,ni.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,V.mp)(md),[{loginLoading:n},{setAccount:a}]=(0,V.b7)(hd),{password:r,lengthValid:s,contentValid:l}=(0,V.mp)(Mp),d=(0,j.useCallback)((()=>{a({password:r,username:i})}),[a,r,i]),c=!((null==t?void 0:t.isValid)&&r&&l&&s);return(0,o.jsxs)(Bp,Object.assign({onSubmit:d},{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(Qm,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Yu,{autoFocus:!0},void 0),(0,o.jsx)(Qm,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(nh,{},void 0),(0,o.jsx)(Sp,Object.assign({disabled:c,loading:n},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(ph,{},void 0)]}),void 0)},gh=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,V.mp)(md),[{loginLoading:n},{setAccount:a}]=(0,V.b7)(hd),r=(0,j.useCallback)((()=>{a({username:i})}),[a,i]),s=!(null==t?void 0:t.isValid);return(0,o.jsxs)(Bp,Object.assign({onSubmit:r},{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(Qm,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(nh,{},void 0),(0,o.jsx)(Sp,Object.assign({disabled:s,loading:n},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(ph,{},void 0)]}),void 0)}));var mh=i(8355);const hh=(0,_d.Z)("div",{target:"e19c4o080"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),_h=(0,_d.Z)("p",{target:"e19c4o081"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"16px",display:"inline"}]),"label:PCheckboxText;");_h.defaultProps=Object.assign(Object.assign({},_h.defaultProps),{"data-e2e":"collect-email-conconsent-text"});const vh=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{emailConsent:t}=Md((()=>["emailConsent"]),[]),{region:i,isMobile:n}=(0,J.m7)((0,ne.L)((()=>["region","isMobile"]),[])),[{emailConsent:a},{setEmailConsent:r}]=(0,V.b7)(md),s=(0,j.useCallback)((e=>{var t;t={checked:e},re.W.event("click_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version",status:t.checked?"checked":"unchecked"}),r(e)}),[r]);return(0,j.useEffect)((()=>{t&&(re.W.event("show_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version"}),["MY","PK","BD"].includes(i)&&r(!0))}),[i,t,r]),t?(0,o.jsxs)(hh,{children:[(0,o.jsx)(bm,{"data-e2e":"collect-email-conconsent-box",size:n?"small":"big",checked:Boolean(a),onChange:s,id:"email-consent",circle:n},void 0),(0,o.jsx)(_h,{children:e("EDM_onboarding_email_consent_checkbox_list")},void 0)]},void 0):null})),yh=(0,_d.Z)("p",{target:"esdrtey0"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary"}),{fontSize:"12px",lineHeight:"15px",marginBottom:"8px",marginTop:"-4px",display:"flex"}]),"label:PRegister;"),bh=(0,_d.Z)("span",{target:"esdrtey1"})((({theme:e})=>[(0,de.GI)({theme:e,color:"Primary"}),{display:"flex",alignItems:"center"}]),"label:SpanLink;"),fh=()=>{const e=(0,ni.Q)("WebApp_Login"),{ageGateAction:t,birthday:i}=(0,V.mp)(hl),[{errorMsg:n,signupLoading:a},{emailRegister:r}]=(0,V.b7)(md),{emailErrorMsg:s,email:l=""}=(0,V.mp)(ed),[{sendCodeLoading:d,code:c,codeFormatError:p,emailRegistered:u},{sendEmailCodeForSignup:g}]=(0,V.b7)(td),{password:m,lengthValid:h,contentValid:_}=(0,V.mp)(Mp),v=(0,j.useCallback)((()=>{g({email:l})}),[l,g]),y=(0,j.useCallback)((()=>{r({password:m,code:c,email:l})}),[l,c,r,m]),b=!l||!m||!c||!_||!h||Boolean(p)||Boolean(s)||Boolean(!i&&t);return(0,o.jsxs)(Bp,Object.assign({onSubmit:y},{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),Boolean(t)&&(0,o.jsx)(Zm,{},void 0),(0,o.jsxs)(Qm,{children:[e("email")," ",(0,o.jsx)(wu,{text:e("common_registration_switch_phone"),path:$.gY.signupPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(vg,{emailRegistered:u},void 0),u&&(0,o.jsxs)(yh,{children:[e("common_registration_email_existing_title"),",",(0,o.jsx)(Jd,Object.assign({path:$.gY.loginWithSignedEmail,underline:!1},{children:(0,o.jsxs)(bh,{children:[e("Log in"),(0,o.jsx)(mh.Z,{},void 0)]},void 0)}),void 0)]},void 0),(0,o.jsx)(Yu,{},void 0),(0,o.jsx)(du,{email:!0,disabled:Boolean(s||!l||!i&&t),codeFromNumber:l,loading:d,errorMsg:n,onClickSendCode:v},void 0),(0,o.jsx)(vh,{},void 0),(0,o.jsx)(Sp,Object.assign({loading:a,disabled:b},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},xh=()=>{const e=(0,ni.Q)("WebApp_Login"),[{birthday:t,ageGateAction:i}]=(0,V.b7)(hl),[{sendCodeLoading:n,code:a,codeFormatError:r},{sendPhoneCodeForLogin:s}]=(0,V.b7)(td),[{loginLoading:l},{handleSmsLogin:d}]=(0,V.b7)(hd),c=(0,te.fz)(dl.ZI),[p]=(0,V.b7)($l),{mobile:u,phoneErrorMsg:g,phone:m}=p,h=u&&a&&!g&&!r&&(t||!i),_=Fp(),v=(0,j.useCallback)((()=>{c.setPlatform("sms_verification"),c.loginSubmit({signUp:!0}),d({birthday:t,phoneCode:a,mobile:u,login_only:!1})}),[t,d,c,u,a]),y=(0,j.useCallback)((()=>{s({mobile:u,isSignUp:!0})}),[u,s]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:v},{children:[(0,o.jsx)($m,{children:e("common_login_panel_entry_2")},void 0),Boolean(i)&&(0,o.jsx)(Zm,{platform:"sms_verification"},void 0),(0,o.jsxs)(Qm,{children:[e("phone")," ",(0,o.jsx)(wu,{text:e("common_registration_switch_email"),path:$.gY.signupEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Gg,{},void 0),(0,o.jsx)(du,{disabled:Boolean(g||!m||!t&&i),codeFromNumber:u,loading:n,errorMsg:_,onClickSendCode:y},void 0),(0,o.jsx)(Sp,Object.assign({loading:l,disabled:!h},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},kh=(0,j.memo)((()=>{const{initial:e}=(0,V.mp)(hl);(0,j.useEffect)((()=>{re.W.event("enter_sign_up",{enter_type:"click_sign_up"})}),[]),(0,Pd.q)({pid:"signup"}),nm(),function(){const{isMobile:e}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),{showAgeConfirm:t}=(0,V.mp)(hl),i=(0,P.k6)();(0,j.useEffect)((()=>{t&&!e&&i.push($.gY.signupAgeGateConfirm)}),[i,t,e])}();const t=(0,P.k6)(),{pathname:i}=t.location;return e||i===$.gY.signupHome?(0,o.jsxs)(Lc,{children:[(0,o.jsx)(ng,{page:"signup"},void 0),(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:$.gY.signupHome,component:Mc,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPhoneOrEmail,component:xh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPhone,component:xh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupEmail,component:fh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreatePassword,component:uh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreateUsername,component:gh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreateAccount,component:dh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupAgeGate,component:Ym,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupAgeGateConfirm,component:pm,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPolicyConfirm,component:Om,exact:!0},void 0),(0,o.jsx)(P.AW,{path:"*",component:Mc},void 0)]},void 0)]},void 0):(0,o.jsx)(om.Z,{center:!0,style:{margin:"auto"}},void 0)})),wh=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.AW,{path:$.gY.loginHome,component:im},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupHome,component:kh},void 0),(0,o.jsx)(kd,{},void 0),(0,o.jsx)(jd,{},void 0)]},void 0);var Sh=i(60908),jh=i(87692);var Ch=i(56417);const Ph=(0,_d.Z)("div",{target:"e1pdjumk0"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,start:"0"}),{background:e.colors.BGPrimary,borderRadius:"8px 8px 0 0",width:"100%",padding:"16px",textAlign:"center"}]),"label:DivContainer;"),Th=(0,_d.Z)("div",{target:"e1pdjumk1"})((({fill:e})=>({height:"64px",width:"64px",borderRadius:"50%",position:"relative",background:"rgba(22, 24, 35, .03)",display:"inline-block","&::before, &::after":{width:"5px",height:"23px",display:"block",content:'""',background:null!=e?e:"#fe3824",position:"absolute",left:"50%",transform:"translate(-50%, 16px)"},"&::after":{height:"5px",transform:"translate(-50%, 43px)"}})),"label:DivIcon;"),Oh=(0,_d.Z)("i",{target:"e1pdjumk2"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,end:"16px"}),{position:"absolute",top:"16px",cursor:"pointer"}]),"label:IClose;"),Lh=(0,_d.Z)("p",{target:"e1pdjumk3"})([({theme:e})=>(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",fontSize:"17px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),Ih={US:{1357:"login_deactivated_popup_website_text_US"},1357:"login_deactivated_popup_website_text_nonUS",1384:"ban_age_gate_removed_pc_text"},Ah={1357:"login_deactivated_popup_webapp_text",1384:"ban_age_gate_removed_mobile_text"},Eh=(0,j.memo)((()=>{const e=(0,ni.Q)("WebApp_Login"),[{showRiskModal:t,errorCode:i,showInstagramRisk:n=!1},a]=(0,V.b7)(Vl),{region:r,isMobile:s,appType:l}=(0,J.m7)((0,ne.L)((()=>["region","isMobile","appType"]),[])),d=((e,t,i)=>{var o,n;if(i)return t?Ah[i]:null!==(n=null===(o=Ih[e])||void 0===o?void 0:o[i])&&void 0!==n?n:Ih[i]})(r,s,i)||(n?"login_new_ins_mobile_body":"login_risk_popup_body"),c=(0,j.useCallback)((()=>{a.setShowRiskModal(!1),a.setShowInstagramCantLoginModal(!1)}),[a]),p=(0,j.useCallback)((()=>{const e=(({pid:e,downloadLink:t="",appType:i,pageName:o,enterMethod:n,samsung:a=!1,wid:r,utmCampaign:s,activationAd:l,region:d,config:c,modalType:p,extraOnelinkParams:u})=>{const{samsungEnableRegion:g}=(0,J.m7)(c),{region:m=[],isFull:h}=(0,J.m7)(g),_=a||navigator.userAgent.indexOf("SamsungBrowser")>-1&&(h||m.includes(d)),v="1"===(0,yi.St)("is_from_samsung_quick_access");t||(t=_?"https://snssdk1233.onelink.me/bIdt":"t"===i?"https://www.tiktok.com/download-link/ol/BAuo":"https://www.tiktok.com/download-link/ol/bIdt");const y=(0,yi.St)("webapp_launch_mode"),b=(0,yi.St)("webapp_original_traffic_type"),f=/google|yahoo|yandex|bing|naver/gi.test(b),x={af_adset:y,pid:null!=e?e:"paid"===y?"tiktokwebsem":f?"tiktokwebseo":"tiktokweb",af_siteid:Boolean(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))||"android"===function(){const e=navigator.userAgent;return/android/i.test(e)?"android":/iPhone|iPad|iPod|iOS/i.test(e)?"ios":/\(Macintosh; Intel /.test(e)?"mac":/Win\d{2}|Windows/.test(e)?"windows":"unknown"}()?"mobile":"pc",c:o,af_ad:null!=l?l:`${n?`enter_method:${n};`:""}${p?`modal_type:${p};`:""}`,web_id:r,af_ad_id:b};"paid"===y&&(x.is_retargeting=!0,x.af_click_lookback="1d");const k=(0,yi.St)("utm_source"),w=(0,yi.St)("utm_medium"),S=(0,yi.St)("utm_campaign"),j=(0,yi.St)("utm_term"),C=(0,yi.St)("utm_content"),P=s?`${s},${S}`:S,T=(0,yi.St)("referer_url"),O=(0,yi.St)("referer_video_id"),L=`${k?`source:${k};`:""}${w?`medium:${w};`:""}${P?`campaign:${P};`:""}${j?`term:${j};`:""}${C?`content:${C};`:""}`,I=`${T?`referer_url:${T}};`:""}${O?`referer_video_id:${O};`:""}`;return L&&(x.af_adset_id=L),I&&(x.af_channel=I),_&&v&&(x.pid="samsungbrowser",x.c=`samsungbrowser_${null==d?void 0:d.toLowerCase()}`,x.af_click_lookback="1d",x.af_android_url="https://apps.samsung.com/appquery/appDetail.as?appId=com.zhiliaoapp.musically",x.af_dp="snssdk1233://"),"undefined"!=typeof window&&(x.canonical=encodeURIComponent(`${Ch.o6}${decodeURIComponent(location.pathname)}`)),u&&Object.assign(x,u),`${t}?${be.stringify(x)}`})({appType:l,enterMethod:"login_anti_spam",pageName:re.W.commonParams.page_name});(e=>{const t=navigator.userAgent&&-1!==navigator.userAgent.indexOf("CriOS")?"_self":"_blank",i=window.open(e,t);i&&(i.opener=null)})(e)}),[l]);return(0,o.jsx)(Wu,Object.assign({visible:t||n,maskCloseable:!1},{children:(0,o.jsxs)(Ph,Object.assign({"data-e2e":"instagram-modal"},{children:[(0,o.jsx)(Th,{},void 0),(0,o.jsx)(Oh,Object.assign({onClick:c,"data-e2e":"instagram-modal-close"},{children:(0,o.jsx)(Id.Z,{},void 0)}),void 0),(0,o.jsx)(Lh,Object.assign({"data-e2e":"instagram-modal-desc"},{children:e(d)}),void 0),(0,o.jsx)(Sp,Object.assign({onClick:p,"data-e2e":"instagram-modal-button"},{children:e("login_risk_popup_button")}),void 0)]}),void 0)}),void 0)})),Mh=()=>{const[{phoneNotRegistered:e=!1},{setPhoneNotRegistered:t}]=(0,V.b7)(hd),{registerPhone:i}=(0,V.qj)(md),n=(0,P.k6)(),a=(0,j.useCallback)((()=>{t(!1),i({})}),[t,i]),r=(0,j.useCallback)((()=>{t(!1),n.goBack()}),[t,n]),s=(0,j.useMemo)((()=>[{text:"common_login_sms_popup_option_1",onClick:a},{text:"common_login_sms_popup_option_2",onClick:r}]),[r,a]);return(0,o.jsx)(Tu,{visible:e,title:"common_login_sms_popup_text",actions:s},void 0)},Rh=(0,_d.Z)("div",{target:"e7p76pd0"})({padding:"0 32px",flex:"1",minHeight:"550x"},"label:DivMobileBody;"),Fh=e=>{const{children:t,onSubmit:i}=e,n=(0,m.__rest)(e,["children","onSubmit"]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($d,Object.assign({},n),void 0),(0,o.jsx)(Rh,{children:i?(0,o.jsx)(Bp,Object.assign({onSubmit:e.onSubmit},{children:t}),void 0):t},void 0)]},void 0)},Dh=()=>{var e;const t=(0,ni.Q)("WebApp_Login"),i=(0,te.fz)(dl.ZI),{birthday:n}=(0,V.mp)(hl),{mobile:a}=(0,V.mp)($l),[{code:r},{sendPhoneCodeForLogin:s,sendPhoneCodeForVerify:l}]=(0,V.b7)(td),[{loginLoading:d},{handleSmsLogin:c,handleSmsVerify:p}]=(0,V.b7)(hd),{isSecurityVerification:u}=Md((()=>["isSecurityVerification"]),[]),g=null===(e=(0,P.$B)($.gY.signupPhoneDigit))||void 0===e?void 0:e.isExact,m=Fp(),h=(0,j.useCallback)((()=>{u?l({mobile:a}):s({mobile:a})}),[u,a,s,l]),_=(0,j.useCallback)((()=>{i.setPlatform("sms_verification"),i.loginSubmit();const e={birthday:g?n:void 0,mobile:a,phoneCode:r,login_only:!g};u?p(e):c(e)}),[i,g,n,a,r,u,p,c]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fu,{codeFromNumber:a,onClickSendCode:h,onSubmit:_,loading:d,errorMsg:m},void 0),!g&&(0,o.jsx)(wu,{text:t("login_option_password"),path:$.gY.loginPhonePassword},void 0)]},void 0)},Bh=(0,_d.Z)("div",{target:"e1ntpldy0"})((({theme:e})=>({height:"40px",borderBottom:`1px solid ${e.colors.LinePrimary2}`,display:"flex",padding:"0 16px",boxSizing:"border-box",width:"100%",marginInlineStart:"50%",transform:"rtl"===e.direction?"translateX(50%)":"translateX(-50%)",marginBottom:"40px"})),"label:DivTabWrapper;"),zh=(0,_d.Z)("div",{target:"e1ntpldy1"})((({theme:e,selected:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:t?"TextPrimary":"TextQuaternary"}),{textAlign:"center",lineHeight:"40px",transition:"all .1s",flex:1,margin:"0 10px",borderBottom:"2px solid",borderBottomColor:t?e.colors.TextPrimary:"transparent",whiteSpace:"nowrap"}]),"label:DivTab;"),Nh=(0,j.memo)((function(e){const{tabs:t,currentTab:i}=e;return(0,o.jsx)(Bh,{children:t.map((({text:n,e2e:a},r)=>(0,o.jsx)(zh,Object.assign({onClick:e.onSwitchTab(r),selected:t[i].text===n,"data-e2e":a},{children:n}),r)))},void 0)})),Uh=(0,_d.Z)("div",{target:"eybrrr40"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,end:"0"}),{width:"20px",position:"fixed",top:"50%",transform:"translateY(-50%)",textAlign:"center"}]),"label:DivLetterListContainer;"),Wh=(0,_d.Z)("div",{target:"eybrrr41"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima"}),{fontWeight:600,fontSize:"12px",lineHeight:"14px",color:"rgba(22, 24, 35, .5)"}]),"label:DivLetterItem;"),qh=e=>(0,o.jsx)(Uh,{children:Hl.map((t=>(0,o.jsx)(Wh,Object.assign({onClick:e.onClick(t.label)},{children:t.label}),t.label)))},void 0),Gh=e=>{const{onClose:t}=e,i=(0,m.__rest)(e,["onClose"]),n=(0,ni.Q)("WebApp_Login"),a=(0,j.useRef)(null),r=(0,j.useCallback)((e=>()=>{var t,i;const o=document.getElementById(e);null===(t=null==a?void 0:a.current)||void 0===t||t.scrollTo(0,null!==(i=null==o?void 0:o.offsetTop)&&void 0!==i?i:0)}),[]);return(0,o.jsxs)(Ag,Object.assign({ref:a},{children:[(0,o.jsx)($d,{onClose:e.onClose,showRight:!1,title:n("select_region"),showClose:!0},void 0),(0,o.jsxs)(Eg,{children:[(0,o.jsx)(Sg,Object.assign({},i),void 0),(0,o.jsx)(qh,{onClick:r},void 0)]},void 0)]}),void 0)},Hh=(0,_d.Z)("div",{target:"eex98o0"})({marginBottom:"12px"},"label:DivContainer;"),Zh=(0,_d.Z)(ru,{target:"eex98o1"})({flex:1,width:0,marginBottom:"0"},"label:StyledBaseInput;");Zh.defaultProps=Object.assign(Object.assign({},Zh.defaultProps),{"data-e2e":"phone-number-input"});const $h=(0,_d.Z)("div",{target:"eex98o2"})((({theme:{colors:e},errState:t})=>[{transition:"all 0.3s",display:"flex",borderBottom:"1px solid",input:{color:t?e.Negative:"unset",paddingInlineStart:"8px"},borderColor:t?e.Negative:e.LineSecondary2}]),"label:DivPhoneInputContainer;"),Vh=(0,_d.Z)("div",{target:"eex98o3"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"2px",height:"44px","::after":{content:'""',width:"1px",height:"10px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),Qh=(0,_d.Z)("span",{target:"eex98o4"})((({theme:{colors:e}})=>[{fontSize:"15px",lineHeight:1,color:e.TextPrimary,fontWeight:400}]),"label:SpanLabelContainer;"),Yh=(0,_d.Z)(rc.Z,{target:"eex98o5"})({fontSize:"16px",margin:"0 4px"},"label:StyledArrowIcon;"),Kh=(0,j.memo)((function({filterCountryList:e}){Rg(e);const[t,i]=(0,V.b7)($l),{area:n,areaCode:a,phoneErrorMsg:r,showAreaCodeSelector:s,searchText:l,phone:d,matchSearchArea:c}=t,{checkPhoneNumberFormat:p}=i,{toggleAreaCodeSelector:u,selectAreaCode:g}=i,m=(0,ni.Q)("WebApp_Login"),h=Dp(),_=(0,j.useCallback)((e=>{p({phone:e.target.value.replace(/[^\d]/g,"")})}),[p]),v=(0,j.useCallback)((({code:e,area:t})=>{g({code:e,area:t})}),[g]),y=Boolean(r||h);return(0,o.jsxs)(Hh,{children:[(0,o.jsxs)($h,Object.assign({errState:y},{children:[(0,o.jsxs)(Vh,Object.assign({onClick:u},{children:[(0,o.jsxs)(Qh,{children:[n," +",a]},void 0),(0,o.jsx)(Yh,{},void 0)]}),void 0),s&&(0,o.jsx)(Gh,{onClose:u,matchSearchArea:c,filterCountryList:e,onSelected:v,currentSelectCode:a,searchText:l},void 0),(0,o.jsx)(Zh,{value:d,border:!1,errState:y,placeholder:m("phone_number"),onChange:_,name:"mobile",type:"tel"},void 0)]}),void 0),y&&(0,o.jsx)(Up,{text:m(r||h||""),type:"error"},void 0)]},void 0)})),Jh=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{phone:t,mobile:i}=(0,V.mp)($l),[{sendCodeLoading:n},{sendPhoneCodeForLogin:a,sendPhoneCodeForVerify:r}]=(0,V.b7)(td),{isSecurityVerification:s}=Md((()=>["isSecurityVerification"]),[]),l=(0,P.$B)($.gY.signupPhoneOrEmail),d=(0,j.useCallback)((()=>{const e={mobile:i,nextUrl:l?$.gY.signupPhoneDigit:$.gY.loginPhoneDigit};s?r(e):a(e)}),[s,r,i,a,l]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:d},{children:[(0,o.jsx)(Kh,{},void 0),l&&(0,o.jsx)(lh,{show:!0,asText:!0,i18nKey:"common_registration_phone_input_agreement"},void 0),(0,o.jsx)(Sp,Object.assign({loading:n,disabled:!t,"data-e2e":"login-button"},{children:e(l?"common_registration_phone_input_button":"Login")}),void 0)]}),void 0)})),Xh=(0,j.memo)((function(){var e;const t=(0,ni.Q)("WebApp_Login"),i=(0,P.k6)(),n=(0,P.$B)(`${$.gY.loginPhoneOrEmail}/:type`),a="email"===(null===(e=null==n?void 0:n.params)||void 0===e?void 0:e.type)?1:0,r=(0,j.useMemo)((()=>[{text:t("Phone")},{text:t("common_login_email_input_tab"),e2e:"email-tab"}]),[t]),s=(0,j.useCallback)((e=>()=>{0===e?i.replace($.gY.loginPhone):i.replace($.gY.loginEmail)}),[i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nh,{tabs:r,currentTab:a,onSwitchTab:s},void 0),0===a&&(0,o.jsx)(Jh,{},void 0),1===a&&(0,o.jsx)(Zg,{},void 0)]},void 0)})),e_=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,V.b7)(hd),{mobile:a}=(0,V.mp)($l),{password:r}=(0,V.mp)(Mp),s=Fp(),l=(0,j.useCallback)((()=>{t.setPlatform("phone"),t.loginSubmit(),n({account:a,password:r,mobile:a})}),[n,t,a,r]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:l},{children:[(0,o.jsx)(cu,{children:e("common_login_password_title")},void 0),(0,o.jsx)(Yu,{create:!1,loginError:Boolean(s)},void 0),(0,o.jsx)(Up,{text:e(s),type:"error"},void 0),(0,o.jsx)(Lu,{},void 0),(0,o.jsx)(Sp,Object.assign({loading:i,disabled:!r},{children:e("Login")}),void 0)]}),void 0)},t_=()=>{const e=(0,ni.Q)("WebApp_Login"),{hideHomePage:t,loginTitle:i}=Md((()=>["hideHomePage","loginTitle"]),[]),n=t?i:"Login";return(0,o.jsxs)(Fh,Object.assign({title:e(n)},{children:[(0,o.jsx)(P.AW,{path:$.gY.loginPhonePassword,component:e_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhoneOrEmail,component:Xh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhone,component:Xh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginEmail,component:Xh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhoneDigit,component:Dh,exact:!0},void 0)]}),void 0)},i_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),[{sendCodeLoading:t},{sendEmailCodeForReset:i}]=(0,V.b7)(td),[{emailErrorMsg:n,email:a=""},{setEmailInfo:r}]=(0,V.b7)(ed),s=Dp(),l=(0,j.useCallback)((()=>{const e=Zl(a);r({email:a,valid:e}),e&&i({email:a,email_logic_type:2,nextUrl:$.gY.emailResetDigit})}),[i,a,r]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:l},{children:[(0,o.jsx)(cu,{children:e("setting_password_email_verify_title")},void 0),(0,o.jsx)(pu,{children:e("common_login_reset_email_input_text")},void 0),(0,o.jsx)(vg,{errorMsg:s},void 0),(0,o.jsx)(Sp,Object.assign({loading:t,disabled:Boolean(n)||!a},{children:e("common_registration_phone_input_button")}),void 0)]}),void 0)})),o_=(0,j.memo)((function(){const{email:e=""}=(0,V.mp)(ed),[{code:t},{sendEmailCodeForReset:i}]=(0,V.b7)(td),[{checkCodeLoading:n,errorMsg:a},{checkEmailCodeForReset:r,setErrorMsg:s}]=(0,V.b7)(Rp);(0,j.useEffect)((()=>{s("")}),[t,s]);const l=(0,j.useCallback)((()=>{i({email:e,email_logic_type:2})}),[e,i]),d=(0,j.useCallback)((()=>{r({email:e,code:t})}),[t,r,e]);return(0,o.jsx)(fu,{codeFromNumber:e,onClickSendCode:l,onSubmit:d,loading:n,errorMsg:a,email:!0},void 0)})),n_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),[{code:t},{sendPhoneCodeForForceResetPwd:i,sendEmailCodeForForceResetPwd:n}]=(0,V.b7)(td),[{forceResetResponse:a},{clearForceResetRes:r}]=(0,V.b7)(hd),{conditional_login_ticket:s,mobile:l,email:d,type:c}=(0,J.m7)(a),[{checkCodeLoading:p,errorMsg:u},{checkCodeForForceReset:g,setErrorMsg:m}]=(0,V.b7)(Rp);(0,j.useEffect)((()=>{m("")}),[t,m]);const h=(0,j.useCallback)((()=>{"email"===c?n({conditional_login_ticket:s}):i({conditional_login_ticket:s})}),[n,i,s,c]),_=(0,j.useCallback)((()=>{g({conditional_login_ticket:s,code:t,type:c})}),[g,s,t,c]);(0,j.useEffect)((()=>()=>{r()}),[]);const v="email"===c?e("setting_password_code_email_text",{email:d}):e("setting_password_code_sms_text",{mobile:l}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,o.jsx)(fu,{autoSendFirstTime:!0,codeDesc:v,codeFromNumber:s,onClickSendCode:h,onSubmit:_,loading:p,errorMsg:u,email:"email"===c},void 0)})),a_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{phone:t,mobile:i}=(0,V.mp)($l),[n,{sendPhoneCodeForResetPwd:a}]=(0,V.b7)(td),{sendCodeLoading:r}=n,s=(0,j.useCallback)((()=>{a({mobile:i,nextUrl:$.gY.phoneResetDigit})}),[a,i]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:s},{children:[(0,o.jsx)(cu,{children:e("setting_bind_phone_input_title")},void 0),(0,o.jsx)(pu,{children:e("common_login_reset_phone_input_text")},void 0),(0,o.jsx)(Kh,{},void 0),(0,o.jsx)(Sp,Object.assign({loading:r,disabled:!t},{children:e("common_registration_phone_input_button")}),void 0)]}),void 0)})),r_=(0,j.memo)((function(){const{mobile:e}=(0,V.mp)($l),[{code:t},{sendPhoneCodeForResetPwd:i}]=(0,V.b7)(td),[{checkCodeLoading:n,errorMsg:a},{checkPhoneCodeForReset:r,setErrorMsg:s}]=(0,V.b7)(Rp);(0,j.useEffect)((()=>{s("")}),[t,s]);const l=(0,j.useCallback)((()=>{i({mobile:e})}),[e,i]),d=(0,j.useCallback)((()=>{r({mobile:e,code:t})}),[e,t,r]);return(0,o.jsx)(fu,{codeFromNumber:e,onClickSendCode:l,onSubmit:d,loading:n,errorMsg:a},void 0)})),s_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),t=(0,te.fz)(dl.ZI),{password:i,lengthValid:n,contentValid:a}=(0,V.mp)(Mp),{ticket:r,type:s,conditional_login_ticket:l}=(0,V.mp)(Rp),[{loginLoading:d},{handleChangePwdByTicket:c,handleForceResetPwd:p}]=(0,V.b7)(hd),u=Fp(),g=(0,j.useCallback)((()=>{l?(t.forceResetSubmit(),p({ticket:r,password:i,conditional_login_ticket:l,type:s})):(t.setPlatform("email"===s?"email":"sms_verification"),t.loginSubmit(),c({password:i,ticket:r,type:s}))}),[t,s,l,p,r,i,c]),m=!(r&&i&&n&&a);return(0,o.jsxs)(Bp,Object.assign({onSubmit:g},{children:[(0,o.jsx)(cu,{children:e("common_login_reset_password_title")},void 0),(0,o.jsx)(Yu,{autoFocus:!0,loginErrorText:u},void 0),(0,o.jsx)(Sp,Object.assign({loading:d,disabled:m},{children:e("Login")}),void 0)]}),void 0)})),l_=(0,_d.Z)("div",{target:"e1ku7a1t0"})((({theme:e})=>[{background:e.colors.BGPlaceholderDefault,padding:"8px 16px",color:e.colors.TextTertiary,width:"100vw",marginInlineStart:"-32px"}]),"label:DivTips;"),d_=()=>{var e;const t=(0,ni.Q)("WebApp_Login"),{forceResetResponse:i}=(0,V.mp)(hd),n=(null===(e=(0,P.$B)([$.gY.loginForgetPhonePassword,$.gY.loginForgetEmailPassword]))||void 0===e?void 0:e.isExact)&&i,a=i?"":t("Reset");return(0,o.jsxs)(Fh,Object.assign({title:a,showLeft:!n},{children:[n&&(0,o.jsx)(l_,{children:t("changepw_banner")},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetEmailPassword,component:i?n_:i_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.emailResetDigit,component:o_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetPhonePassword,component:i?n_:a_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.phoneResetDigit,component:r_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.resetPassword,component:s_,exact:!0},void 0)]}),void 0)},c_=()=>{const e=(0,ni.Q)("WebApp_Login");return(0,o.jsx)(Fh,Object.assign({title:e("Login")},{children:(0,o.jsx)(em,{},void 0)}),void 0)},p_=(0,j.memo)((()=>(ig(),(0,Pd.q)({pid:"login"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ng,{page:"login"},void 0),(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:$.gY.loginHome,component:Mc,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginQRcode,component:bp,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhoneOrEmail,component:t_},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginPhoneDigit,component:t_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginWithSignedEmail,component:c_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetEmailPassword,component:d_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginForgetPhonePassword,component:d_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginReset,component:d_},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginTwoStepVerify,component:Xu,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginTwoStepVerify,component:Xu,exact:!0},void 0),(0,o.jsx)(P.AW,{path:"*",component:Mc},void 0)]},void 0),(0,o.jsx)(Mh,{},void 0)]},void 0)))),u_=()=>{const{showAgeConfirm:e}=(0,V.mp)(hl);return(0,o.jsx)(Tt.u_,Object.assign({visible:e},{children:(0,o.jsx)(pm,{isModal:!0},void 0)}),void 0)};var g_=i(1025);const m_=(0,_d.Z)("div",{target:"e1i2f2310"})({position:"absolute",marginTop:"24px",left:0,right:0},"label:DivWrapper;"),h_=new Date(1900,0,1,0,0,0),__=new Date((new Date).getFullYear()-1,11,31,0,0,0),v_=Am(),y_=(0,j.memo)((function(){const e=(0,te.fz)(dl.ZI),[{year:t,month:i,date:n},{setBirthday:a,setMonth:r,setYear:s,setDate:l}]=(0,V.b7)(hl),d=(0,ni.Q)("WebApp_Login");(0,j.useEffect)((()=>{e.ageGateShow()}),[]);const c=(0,j.useCallback)((e=>{var t;return(0,o.jsx)(j.Fragment,{children:d(null===(t=v_[e])||void 0===t?void 0:t.key)},void 0)}),[d]),p=(0,j.useCallback)((e=>{const t=e.getDate(),i=e.getMonth()+1,o=e.getFullYear();r({value:i,key:String(i-1)}),s({value:o,key:String(o)}),l({value:t,key:String(t)}),a({year:o,month:i,date:t})}),[a,l,r,s]),u=(0,j.useMemo)((()=>{if(!(null==t?void 0:t.value)||!(null==i?void 0:i.value)||!(null==n?void 0:n.value)){const e=new Date;return new Date(__.getFullYear(),e.getMonth(),e.getDate())}return new Date(t.value,i.value,n.value)}),[t,i,n]);return(0,o.jsx)(m_,{children:(0,o.jsx)(g_.Z,{className:"date-selector",defaultDate:u,mode:"date",maxDate:__,minDate:h_,onDateChange:p,formatMonth:c},void 0)},void 0)})),b_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{birthday:t,checkAgeLoading:i,ageErrorMsg:n="",showErrorByToast:a}=(0,V.mp)(hl),{signupLoading:r}=(0,V.mp)(md),{user:s}=(0,J.m7)((0,ne.L)((()=>["user"]),[])),{handleCheckAge:l}=am();(0,j.useEffect)((()=>{n&&a&&Al(e(n))}),[a,n,e]);const d=Boolean(n)&&!a;return(0,o.jsxs)(Fh,Object.assign({title:e("sign_up")},{children:[(0,o.jsx)(cu,Object.assign({"data-e2e":"birthday-text"},{children:e("common_registration_agegate_title")}),void 0),(0,o.jsx)(pu,Object.assign({"data-e2e":"birthday-desc"},{children:e("mus_age_gate_tips")}),void 0),(0,o.jsx)(ru,{errorState:d,disableDelete:!0,placeholder:e("birthdate_placeholder"),value:t,readonly:!0},void 0),d&&(0,o.jsx)(Up,{text:e(n),type:"error"},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!t||Boolean(s),onClick:l,loading:r||i,"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(y_,{},void 0)]}),void 0)})),f_=(0,_d.Z)("div",{target:"ekgsvu50"})({height:"30px",overflow:"hidden",marginTop:"32px"},"label:DivWrapper;"),x_=(0,_d.Z)("div",{target:"ekgsvu51"})((({theme:{colors:e}})=>[{position:"relative",background:e.BGPrimary,borderColor:e.LineSecondary,width:"100%",display:"flex",overflowX:"auto",alignItems:"center",paddingBottom:"10px"}]),"label:DivSuggestListWrapper;"),k_=(0,_d.Z)("span",{target:"ekgsvu52"})((({theme:e,disabled:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:t?"TextTertiary":"TextPrimary",fontWeight:"semiBold"}),{padding:"6px 10px",fontSize:"13px",lineHeight:"14px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",marginInlineEnd:"8px",whiteSpace:"nowrap"}]),"label:SpanItem;"),w_=(0,j.memo)((function({labelText:e="common_registration_email_input_suggested",list:t=[],onSelect:i}){const n=(0,ni.Q)("WebApp_Login");return(0,o.jsx)(f_,{children:(0,o.jsxs)(x_,{children:[(0,o.jsx)(k_,Object.assign({disabled:!0},{children:n(e)}),void 0),t.map(((e,t)=>(0,o.jsx)(k_,Object.assign({onClick:i(`${e}`)},{children:e}),t)))]},void 0)},void 0)})),S_=(0,j.memo)((function(){var e;const[{usernameInfo:t},{setUsername:i}]=(0,V.b7)(md),n=(0,j.useCallback)((e=>()=>{i(e)}),[i]);return(null==t?void 0:t.isValid)||!(null===(e=null==t?void 0:t.suggestList)||void 0===e?void 0:e.length)?null:(0,o.jsx)(w_,{onSelect:n,list:null==t?void 0:t.suggestList},void 0)})),j_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{usernameInfo:t}=(0,V.mp)(md),i=(0,P.k6)();rm();const n=(0,j.useCallback)((()=>{i.push({pathname:$.gY.signupCreatePassword,state:{createAccount:!0}})}),[i]);return(0,o.jsxs)(Fh,Object.assign({title:e("sign_up"),onSubmit:n},{children:[(0,o.jsxs)(cu,{children:[" ",e("common_login_sms_popup_option_1")]},void 0),(0,o.jsxs)(pu,{children:[" ",e("mus_create_account_desc")," "]},void 0),(0,o.jsx)(nh,{ftc:!0},void 0),(0,o.jsx)(Sp,Object.assign({disabled:!(null==t?void 0:t.isValid)},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(S_,{},void 0)]}),void 0)})),C_=()=>{const e=(0,ni.Q)("WebApp_Login"),[{loginLoading:t},{setAccount:i}]=(0,V.b7)(hd),{usernameRegister:n}=(0,V.qj)(md),{password:a,lengthValid:r,contentValid:s}=(0,V.mp)(Mp),l=(0,P.TH)(),{createAccount:d}=(0,J.m7)(l.state),c=(0,j.useCallback)((()=>{d?n({password:a}):i({password:a,nextUrl:$.gY.signupCreateUsername})}),[i,a,d,n]),p=!a||!s||!r;return(0,o.jsxs)(Fh,Object.assign({LeftIcon:d?void 0:ph,onSubmit:c,title:e("sign_up")},{children:[(0,o.jsx)(cu,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Yu,{autoFocus:!0},void 0),(0,o.jsx)(Sp,Object.assign({disabled:p,loading:t},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},P_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,V.mp)(md),[{loginLoading:n},{setAccount:a}]=(0,V.b7)(hd),r=(0,j.useCallback)((()=>{a({username:i})}),[a,i]);return(0,o.jsxs)(Fh,Object.assign({title:e("sign_up"),onSubmit:r,LeftIcon:ph},{children:[(0,o.jsx)(cu,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(pu,{children:e("common_registration_username_text")},void 0),(0,o.jsx)(nh,{},void 0),(0,o.jsx)(Sp,Object.assign({loading:n,disabled:!(null==t?void 0:t.isValid)},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(S_,{},void 0)]}),void 0)})),T_=(0,j.memo)((function(){const{email:e=""}=(0,V.mp)(ed),[{code:t},{sendEmailCodeForSignup:i}]=(0,V.b7)(td),[{errorMsg:n,signupLoading:a},{emailRegister:r}]=(0,V.b7)(md),s=(0,P.TH)(),{password:l}=s.state||{},d=(0,j.useCallback)((()=>{i({email:e})}),[e,i]),c=(0,j.useCallback)((()=>{r({email:e,code:t,password:l})}),[t,r,e,l]);return(0,o.jsx)(fu,{autoSendFirstTime:!0,codeFromNumber:e,onClickSendCode:d,onSubmit:c,loading:a,errorMsg:n,email:!0},void 0)})),O_=()=>{const e=(0,ni.Q)("WebApp_Login"),{password:t,lengthValid:i,contentValid:n}=(0,V.mp)(Mp),a=(0,P.k6)(),r=(0,j.useCallback)((()=>{a.push({pathname:$.gY.signupEmailDigit,state:{password:t}})}),[a,t]),s=!t||!n||!i;return(0,o.jsxs)(Bp,Object.assign({onSubmit:r},{children:[(0,o.jsx)(cu,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Yu,{autoFocus:!0},void 0),(0,o.jsx)(Sp,Object.assign({disabled:s},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},L_=(0,j.memo)((function(){const{setSuggestEmailSuffixConfig:e}=(0,V.qj)(ed),{emailSuffixConfig:t}=Md((()=>["emailSuffixConfig"]),[]),i=(0,j.useCallback)((t=>()=>{e(t)}),[e]),n=t.map((e=>`@${e}`));return(0,o.jsx)(w_,{list:n,onSelect:i},void 0)})),I_=(0,j.memo)((function(){const e=(0,ni.Q)("WebApp_Login"),[{email:t="",emailErrorMsg:i,checkEmailLoading:n},{checkEmailRegistered:a}]=(0,V.b7)(ed),r=Dp(),s=(0,j.useCallback)((()=>{a()}),[a]);return(0,o.jsxs)(Bp,Object.assign({onSubmit:s},{children:[(0,o.jsx)(vg,{errorMsg:r},void 0),(0,o.jsx)(lh,{show:!0,asText:!0},void 0),(0,o.jsx)(vh,{},void 0),(0,o.jsx)(Sp,Object.assign({loading:n,disabled:!t||Boolean(i),"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(L_,{},void 0)]}),void 0)})),A_=(0,j.memo)((function(){var e;const t=(0,ni.Q)("WebApp_Login"),i=(0,P.k6)(),n=(0,P.$B)(`${$.gY.signupPhoneOrEmail}/:type`),a="email"===(null===(e=null==n?void 0:n.params)||void 0===e?void 0:e.type)?1:0,r=(0,j.useMemo)((()=>[{text:t("Phone")},{text:t("Email"),e2e:"email-tab"}]),[t]),s=(0,j.useCallback)((e=>()=>{0===e?i.replace($.gY.signupPhone):i.replace($.gY.signupEmail)}),[i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nh,{tabs:r,currentTab:a,onSwitchTab:s},void 0),0===a&&(0,o.jsx)(Jh,{},void 0),1===a&&(0,o.jsx)(I_,{},void 0)]},void 0)})),E_=()=>{const e=(0,ni.Q)("WebApp_Login");return(0,o.jsxs)(Fh,Object.assign({title:e("sign_up")},{children:[(0,o.jsx)(P.AW,{path:$.gY.signupPhoneOrEmail,component:A_},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPhoneDigit,component:Dh,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupEmailDigit,component:T_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupEmailCreatePassword,component:O_,exact:!0},void 0)]}),void 0)},M_=(0,j.memo)((function(){return(0,o.jsx)(Fh,Object.assign({showRight:!1},{children:(0,o.jsx)(Om,{},void 0)}),void 0)})),R_=(0,j.memo)((()=>(ig(),nm(),(0,Pd.q)({pid:"signup"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ng,{page:"signup"},void 0),(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:$.gY.signupHome,component:Mc,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPhoneOrEmail,component:E_},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPhoneDigit,component:E_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupEmailDigit,component:E_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupEmailCreatePassword,component:E_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreatePassword,component:C_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreateUsername,component:P_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupCreateAccount,component:j_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupAgeGate,component:b_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPolicyConfirm,component:M_,exact:!0},void 0),(0,o.jsx)(P.AW,{path:"*",component:Mc},void 0)]},void 0),(0,o.jsx)(u_,{},void 0)]},void 0)))),F_=(0,_d.Z)("div",{target:"e1apasj50"})({paddingTop:"150px",textAlign:"center"},"label:DivWrapper;"),D_=(0,_d.Z)("p",{target:"e1apasj51"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{fontSize:"17px",lineHeight:"20px",marginTop:"20px"}]),"label:PTitleContainer;"),B_=(0,_d.Z)("div",{target:"e1apasj52"})([({theme:e})=>(0,de.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{lineHeight:"17px",marginTop:"12px",textAlign:"center",fontSize:"14px"}],"label:DivContentWrapper;"),z_=(0,_d.Z)("div",{target:"e1apasj53"})({position:"absolute",bottom:"32px",left:"32px",right:"32px"},"label:DivButtonWrapper;"),N_=()=>{const e=(0,ni.Q)("WebApp_Login"),t=(0,P.k6)(),i=(0,P.TH)(),{cancelDeleteAccount:n}=(0,V.qj)(hd);(0,j.useEffect)((()=>{var e;(null===(e=i.state)||void 0===e?void 0:e.init)||t.replace($.gY.loginHome)}),[i,t]);const a=(0,j.useCallback)((()=>{n()}),[n]),r=(0,j.useCallback)((()=>{t.push($.gY.loginHome)}),[t]);return(0,o.jsx)(Fh,Object.assign({showLeft:!1,showRight:!1},{children:(0,o.jsxs)(F_,{children:[(0,o.jsx)(Th,{fill:"rgba(22, 24, 35, 0.45)"},void 0),(0,o.jsx)(D_,{children:e("reactivate_h1")},void 0),(0,o.jsx)(B_,{children:e("logback_reactivate_desc")},void 0),(0,o.jsxs)(z_,{children:[(0,o.jsx)(Sp,Object.assign({onClick:a},{children:e("reactivate_btn")}),void 0),(0,o.jsx)(Sp,Object.assign({buttonTheme:"default",onClick:r,style:{marginTop:"16px"}},{children:e("common_registration_phone_input_popup_button")}),void 0)]},void 0)]},void 0)}),void 0)},U_=()=>{const{language:e}=(0,J.m7)((0,ne.L)((()=>["language"]),[])),t="ar"===e||"ur"===e||"he-IL"===e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.ql,{children:[(0,o.jsx)("link",{rel:"stylesheet",href:Sh},void 0),(0,o.jsx)("link",{rel:"stylesheet",href:jh},void 0)]},void 0),(0,o.jsx)(wn.xB,{styles:vl(t)},void 0),(0,o.jsx)(P.AW,{path:$.gY.loginHome,component:p_},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupHome,component:R_},void 0),(0,o.jsx)(P.AW,{path:$.gY.accountDeactivate,component:N_},void 0),(0,o.jsx)(Eh,{},void 0)]},void 0)};var W_;!function(e){e.MonitorLogout="monitor_logout"}(W_||(W_={}));const q_=(0,_d.Z)("div",{target:"e1lgi0990"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),G_=(0,j.memo)((function(){const{user:e,language:t,env:i}=(0,J.m7)((0,ne.L)((()=>["user","language","env"]),[])),{redirectUrl:n,aid:a}=(0,V.mp)(Gl);return(0,j.useEffect)((()=>{var o;o=e?{status:0,error_code:0}:{status:1,error_code:-1,error_desc:"no account info"},re.W.event("monitor_logout",o);const r=encodeURIComponent(Ud(t,"boe"===(null==i?void 0:i.type),n));location.href=`https://${location.host}/passport/web/logout/?aid=${a}&account_sdk_source=web&next=${r}&`}),[n,a,t,e,i]),(0,o.jsx)(q_,{children:(0,o.jsx)(Vt.g,{},void 0)},void 0)})),H_=(0,_d.Z)("div",{target:"e10jupx40"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),Z_=(0,j.memo)((function(){const{search:e}=(0,P.TH)(),{oauth_token:t,oauth_verifier:i,error:n,oauthType:a}=(0,be.parse)(e),r=(0,te.fz)(dl.ZI),s=(0,te.fz)(lc.M),{authPageGoRedirect:l}=(0,V.qj)(kc);return(0,j.useEffect)((()=>{pc(null==a?void 0:a.toString()),s.handleThirdGetToken({platform:"twitter",error_code:t&&i?0:-1,error_message:String(n)}),t&&i?(dc("twitter",{oauth_token:t.toString(),oauth_verifier:i.toString()}),window.parent?window.authDoneClose=!0:l({platform:"line"})):r.thirdPartyLoginResult({status:1,error_code:-1,error_desc:null==n?void 0:n.toString()})}),[n,r,t,i,s,a,l]),(0,o.jsx)(H_,{children:(0,o.jsx)(Vt.g,{},void 0)},void 0)})),$_=()=>{const{search:e}=(0,P.TH)(),{code:t,error:i}=(0,be.parse)(e),n=(0,te.fz)(dl.ZI),a=(0,te.fz)(lc.M),{authPageGoRedirect:r}=(0,V.qj)(kc);return(0,j.useEffect)((()=>{pc(),a.handleThirdGetToken({platform:"line",error_code:t?0:-1,error_message:String(i)}),t?(dc("line",{code:null==t?void 0:t.toString()}),window.opener?window.authDoneClose=!0:r({platform:"line"})):n.thirdPartyLoginResult({status:1,error_code:-1,error_desc:String(i)})}),[t,i,n,a,r]),(0,o.jsx)(H_,{children:(0,o.jsx)(Vt.g,{},void 0)},void 0)};var V_;!function(e){e.PrivateNotifyShow="private_notify_show",e.PrivateNotifyClick="private_notify_click"}(V_||(V_={}));const Q_=e=>{re.W.event("private_notify_click",e)};var Y_,K_;function J_(){return J_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},J_.apply(this,arguments)}const X_=function(e){return j.createElement("svg",J_({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50",width:"1em",height:"1em"},e),Y_||(Y_=j.createElement("g",{clipPath:"url(#icon_svg__clip0)"},j.createElement("path",{fill:"black",fillRule:"evenodd",d:"M15.029 13.695a7.618 7.618 0 1115.235 0 7.618 7.618 0 01-15.235 0zM22.646 4c-5.354 0-9.695 4.34-9.695 9.695 0 5.354 4.34 9.695 9.695 9.695s9.695-4.34 9.695-9.695c0-5.354-4.34-9.695-9.695-9.695zM5.081 43.861c1.066-8.393 8.375-14.921 17.274-14.921 1.813 0 3.56.271 5.201.774.53.162 1.104-.101 1.295-.62l.03-.082c.19-.517-.074-1.093-.6-1.258a19.807 19.807 0 00-5.926-.901c-9.964 0-18.21 7.351-19.352 16.87-.066.548.353 1.025.904 1.062l.08.006c.551.037 1.025-.381 1.094-.93zm28.672-9.39H30.61a.692.692 0 00-.692.692V45.55c0 .383.31.693.692.693h16.62c.383 0 .693-.31.693-.693V35.163a.692.692 0 00-.693-.693h-3.143-10.333zm-.373-2.078h-2.77a2.77 2.77 0 00-2.77 2.77V45.55a2.77 2.77 0 002.77 2.77h16.62A2.77 2.77 0 0050 45.55V35.163a2.77 2.77 0 00-2.77-2.77h-2.77v-2.77a5.54 5.54 0 10-11.08 0v2.77zm2.078 0h6.925v-2.77a3.463 3.463 0 10-6.925 0v2.77z",clipRule:"evenodd"}))),K_||(K_=j.createElement("defs",null,j.createElement("clipPath",{id:"icon_svg__clip0"},j.createElement("path",{fill:"white",d:"M0 0h50v50H0z"})))))},ev=(0,_d.Z)("div",{target:"e6r3pim0"})((({theme:e})=>({margin:e.isMobile?"30px 32px 0":"80px auto 0",maxWidth:"400px"})),"label:DivContainer;"),tv=(0,_d.Z)("div",{target:"e6r3pim1"})((({theme:e})=>({width:"80px",height:"80px",fontSize:"50px",margin:"24px auto",border:`1px solid ${e.colors.LineSecondary}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"})),"label:DivIcon;"),iv=(0,_d.Z)("div",{target:"e6r3pim2"})((({theme:e})=>[(0,de.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"24px",lineHeight:"28px",marginBottom:"24px"}]),"label:DivTitle;"),ov=(0,_d.Z)("div",{target:"e6r3pim3"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"16px",textAlign:"center",lineHeight:"22px",marginBottom:"12px"}]),"label:DivDescription;"),nv=(0,_d.Z)("span",{target:"e6r3pim4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"22px",color:e.colors.Primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}]),"label:SpanLinkText;"),av=()=>{const e=(0,ni.Q)("WebApp_Login"),{handlePrivateConfirm:t}=(0,V.qj)(sd),i=(0,j.useCallback)((()=>{t(),Q_({result:"ok"})}),[t]),n=(0,j.useCallback)((()=>{Q_({result:"learn_more"})}),[]);return(0,j.useEffect)((()=>{re.W.event("private_notify_show")}),[]),(0,o.jsxs)(ev,{children:[(0,o.jsx)(tv,{children:(0,o.jsx)(X_,{},void 0)},void 0),(0,o.jsx)(iv,{children:e("title_private_on")},void 0),(0,o.jsx)(ov,{children:e("descrip_private_on_signup")},void 0),(0,o.jsx)(Jd,Object.assign({underline:!1,path:"https://support.tiktok.com/en/account-and-privacy/account-privacy-settings/making-your-account-public-or-private"},{children:(0,o.jsxs)(nv,Object.assign({onClick:n},{children:[e("link_learn_more_private_accounts_signup")," >"]}),void 0)}),void 0),(0,o.jsx)(Sp,Object.assign({onClick:i,bottonTheme:"text"},{children:e("button_signup_private_on")}),void 0)]},void 0)};var rv=i(98465),sv=i(85404);function lv(){const[{lang:e,hasLoaded:t},i]=(0,V.b7)(rv.L,{selector:({lang:e,translations:t})=>{var i;return{lang:e,hasLoaded:Boolean(null===(i=t[e])||void 0===i?void 0:i.WebApp_Login)}},dependencies:[]}),{loadData:o}=i,{domain:n,teaDomain:a}=(0,sv.o)();return(0,j.useEffect)((()=>{o({lang:e,namespaces:["WebApp_Login"],teaDomain:a,domain:n})}),[e,o,n,a]),t}var dv=i(81775);const cv=(0,_d.Z)("div",{target:"ermvtw20"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",maxWidth:e.isMobile?"300px":"400px",padding:"0px 32px 32px",textAlign:"center"})),"label:DivContainer;"),pv=(0,_d.Z)("h5",{target:"ermvtw21"})((({theme:e})=>[(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px"}]),"label:H5Title;"),uv=(0,_d.Z)("p",{target:"ermvtw22"})([({theme:e})=>(0,de.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),gv=e=>{const t=(0,ni.Q)("WebApp_Login"),{title:i,text:n,buttonText:a,visible:r,supportText:s}=e,{language:l}=(0,J.m7)((0,ne.L)((()=>["language"]),[])),d={marginTop:"16px"};return(0,o.jsx)(Tt.u_,Object.assign({visible:r,maskCloseable:!1,onClose:e.onClose},{children:(0,o.jsxs)(cv,{children:[i&&(0,o.jsx)(pv,{children:t(i)},void 0),(0,o.jsx)(uv,{children:t(n)},void 0),s&&(0,o.jsx)("a",Object.assign({href:`https://support.tiktok.com?lang=${l}`,target:"_blank",rel:"noopener noreferrer"},{children:(0,o.jsx)(Sp,Object.assign({style:d},{children:t(null!=a?a:"twosv_recover_pw_popup_btn")}),void 0)}),void 0),(0,o.jsx)(Sp,Object.assign({buttonTheme:"default",onClick:e.onClose,style:d},{children:t(null!=a?a:"OK")}),void 0)]},void 0)}),void 0)},mv={inexistent:{title:"age_verify_login_inexistent",subTitle:"age_verify_login_inexistent_intro"},ineligible:{title:"age_verify_login_ineligible",subTitle:"age_verify_login_ineligible_intro"},twoStepVerifyBlock:{title:"twosv_login_sms_block_title",subTitle:"twosv_login_sms_block_content"},TwoStepBlockResetPwd:{title:"twosv_recover_pw_popup_title",subTitle:"twosv_recover_pw_popup_desc",supportText:"twosv_recover_pw_popup_btn"}},hv=()=>{var e;const t=(0,P.k6)(),[{showAlertMessageType:i},{setShowAlertMessageType:n}]=(0,V.b7)(Gl),a=null===(e=(0,P.$B)($.gY.loginHome))||void 0===e?void 0:e.isExact,r=(0,j.useCallback)((()=>{n("");const{message:e}=(0,be.parse)(window.location.search),i=new RegExp(`&?message=${e}`);t.replace({pathname:$.gY.loginHome,search:(window.location||{}).search.replace(i,"")})}),[t,n]);return(0,j.useEffect)((()=>{i&&!a&&t.push($.gY.loginHome)}),[i,t,a]),i?(0,o.jsx)(gv,{supportText:mv[i].supportText,visible:Boolean(i),title:mv[i].title,text:mv[i].subTitle,onClose:r},void 0):null},_v=(0,j.memo)((function(){var e,t,i,n;const a=(0,ne.b)();(e=>{const t=(0,P.TH)(),{loginModalShow:i,url:o}=(0,V.mp)($t.r),{loginType:n}=Md((()=>["loginType"]),[]);tg.initialized||tg.init(i?o.split("?")[1]:t.search),(0,X.k0)((()=>Object.assign({page_name:e,login_type:n},tg.eventCommonParams)),[n,e]),(0,j.useEffect)((()=>{n&&eg._.handlePageView({})}),[n])})("login");const r=lv(),s=(0,te.fz)(Ol.Q),l=(0,te.fz)(Ll.D),d=null===(e=(0,P.$B)($.gY.loginHome))||void 0===e?void 0:e.isExact;!function(){const{twoStepResponse:e}=(0,V.mp)(hd),[{type:t},{setTwoStepVerifyRes:i,setTwoStepType:o}]=(0,V.b7)(kp),n=(0,P.k6)(),{pathname:a}=(0,P.TH)();(0,j.useEffect)((()=>{e&&i(e)}),[e,i]),(0,j.useEffect)((()=>{t&&`/login/2sv/${fp[t]}`!==a&&n.push(`/login/2sv/${fp[t]}`)}),[t,e]),(0,j.useEffect)((()=>()=>{o(void 0)}),[])}(),function(){const{isRegisterWithPrivateOn:e}=(0,V.mp)(sd),{success:t}=(0,V.mp)(hd),{redirectUrl:i}=(0,V.mp)(Gl),{success:o}=(0,V.mp)(md),{language:n,env:a}=(0,J.m7)((0,ne.L)((()=>["language","env"]),[])),r=(0,ni.Q)("WebApp_Login"),s=(0,P.k6)();(0,j.useEffect)((()=>{if(t||o){if(e)return void s.push($.gY.signupPrivateOn);Al(r(r(2===t?"reactivate_toast":"Login Success"))),Wd(n,"boe"===(null==a?void 0:a.type),i)}}),[n,r,i,o,t,e,s,a])}(),function(){const e=(0,te.fz)(fc);(0,j.useEffect)((()=>{e.loadSdk()}),[e])}(),function(){const{user:e,language:t,env:i}=(0,J.m7)((0,ne.L)((()=>["user","language","env"]),[])),{redirectUrl:o,initialized:n}=(0,V.mp)(Gl),a=(0,ni.Q)("WebApp_Login"),r=(0,te.fz)(dl.ZI),s=[$.gY.oauth,$.gY.oauthLine,$.gY.logout],l=(0,P.$B)(s);(0,j.useEffect)((()=>{e&&!l&&n&&(Al(a("You are logged in, no need to repeat")),r.setPlatform("repeatLogin"),r.loginSuccess({is_register:0}),Wd(t,"boe"===(null==i?void 0:i.type),o))}),[o,n,i])}(),Fp(),function(){const e=(0,te.fz)(Il),t=(0,P.k6)();(0,j.useEffect)((()=>{e.init(t)}),[t,e])}(),function(){const{hideHomePage:e}=Md((()=>["hideHomePage"]),[]),t=(0,P.k6)();(0,j.useEffect)((()=>{e&&t.replace($.gY.loginPhoneOrEmail)}),[e,t])}();const[{initialized:c,ttpConfig:p,phoenix:u,hideHomePage:g},{init:m}]=(0,V.b7)(Gl),[{initial:h},{getComplianceSettings:_}]=(0,V.b7)(hl);return(0,j.useEffect)((()=>{var e,t,i;a.appContext&&s.setAppContext(Object.assign(Object.assign({},a.appContext),{phoenix:u})),a.appContext&&(null===(t=null===(e=window.byted_acrawler)||void 0===e?void 0:e.setUserMode)||void 0===t||t.call(e,(0,dv.i)(null===(i=a.appContext)||void 0===i?void 0:i.isTTP)))}),[a.appContext,s,u]),(0,j.useEffect)((()=>{var e,t;p&&l.setInitConfig({isSG:(null===(e=a.appContext)||void 0===e?void 0:e.sgOpen)||1180===(null===(t=a.appContext)||void 0===t?void 0:t.appId),ttpConfig:p,phoenix:u})}),[null===(t=a.appContext)||void 0===t?void 0:t.appId,null===(i=a.appContext)||void 0===i?void 0:i.sgOpen,p,u,l]),(0,j.useEffect)((()=>{!c&&m(),!h&&_()}),[]),!r||!c||g&&d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(wn.xB,{styles:_l},void 0),(0,o.jsx)(Vt.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:$.gY.logout,component:G_},void 0),(0,o.jsx)(P.AW,{path:$.gY.oauth,component:Z_},void 0),(0,o.jsx)(P.AW,{path:$.gY.oauthLine,component:$_},void 0),(0,o.jsx)(P.AW,{path:$.gY.signupPrivateOn,component:av,exact:!0},void 0),(null===(n=a.appContext)||void 0===n?void 0:n.isMobile)?(0,o.jsx)(U_,{},void 0):(0,o.jsx)(wh,{},void 0)]},void 0),(0,o.jsx)(Ae,{appContext:a.appContext,slardarBid:Ee.Zy},void 0),(0,o.jsx)(hv,{},void 0)]},void 0)})),vv=(0,_d.Z)("div",{target:"e1b6crsh0"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{height:"64px",borderTop:e.isMobile?"none":`1px solid ${e.colors.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px",lineHeight:"18px"}]),"label:DivContainer;"),yv=(0,_d.Z)("span",{target:"e1b6crsh1"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,marginStart:"5px"}),{fontWeight:600,fontSize:"15px",lineHeight:"18px",color:e.colors.Primary}]),"label:SpanLinkText;"),bv=(0,j.memo)((function({style:e}){var t;const{disableSignup:i,hideHomePage:n}=Md((()=>["disableSignup","hideHomePage"]),[]),{isMobile:a}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),{loginModalShow:r}=(0,V.mp)($t.r),s=(0,ni.Q)("WebApp_Login"),{pathname:l}=(0,P.TH)(),d=[$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount],c=null===(t=(0,P.$B)(d))||void 0===t?void 0:t.isExact,p=n?[$.gY.loginPhoneOrEmail,$.gY.signupPhoneOrEmail]:[$.gY.loginHome,$.gY.signupHome],u=(0,P.$B)(p),g=a&&!n?null==u?void 0:u.isExact:u&&!c,m=l.includes("signup"),h=s(m?"common_registration_panel_entry_1":"common_login_panel_entry_1"),_=s(m?"common_registration_panel_entry_2":"common_registration_username_button"),v=Oc(),y=m?n?$.gY.loginPhoneOrEmail:$.gY.loginHome:n?v:$.gY.signupHome;return i||!g?null:(0,o.jsxs)(vv,Object.assign({modal:r,style:e},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"bottom-text"},{children:h.replace("%s"," ")}),void 0),(0,o.jsx)(Jd,Object.assign({path:y,textTheme:"primary",replace:r,"data-e2e":"botton-sign-up"},{children:(0,o.jsx)(yv,Object.assign({"data-e2e":m?"bottom-login":"bottom-sign-up"},{children:_}),void 0)}),void 0)]}),void 0)})),fv=(0,_d.Z)("div",{target:"eg439om0"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"16px",cursor:"pointer",transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"}]),"label:DivBack;"),xv=(0,_d.Z)(wd.Z,{target:"eg439om1"})([{width:"24px",height:"24px"}],"label:StyledChevronLeftOffset;"),kv=(0,_d.Z)("div",{target:"eg439om2"})({width:"483px",height:"100%",padding:"48px 0 0",display:"flex",flexDirection:"column"},"label:DivModalContent;");kv.defaultProps=Object.assign(Object.assign({},kv.defaultProps),{"data-e2e":"login-modal"});const wv=(0,_d.Z)("div",{target:"eg439om3"})({flex:"1",overflow:"auto"},"label:DivPageWrapper;"),Sv={margin:"auto",position:"relative",maxHeight:"693px",height:"80%",overflow:"hidden"},jv={transform:"scale(1.7)"},Cv=(0,j.memo)((function(){const[{loginModalShow:e,url:t,closeable:i},{setLoginModalShow:n}]=(0,V.b7)($t.r),r=(0,te.fz)(dl.ZI),[s,l]=(0,j.useState)(0),[d,c]=(0,j.useState)(!1),[p,u]=(0,j.useState)(!1),g=lv(),m=(0,j.useRef)((0,ll.PP)({initialEntries:[null!=t?t:$.gY.loginHome]}));(0,j.useEffect)((()=>{e&&t&&(m.current.go(Number(`-${m.current.length}`)),m.current.replace(t))}),[e,t]);const{forceLogin:h}=Md((()=>["forceLogin"]),[]),_=(0,j.useCallback)((()=>{m.current.goBack()}),[]),v=(0,j.useCallback)((()=>{c([$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount].includes(m.current.location.pathname))}),[c]),y=(0,j.useCallback)((()=>{u([$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount].includes(m.current.location.pathname))}),[]),b=(0,j.useCallback)((()=>{n(!1);const e=m.current.location.pathname.match("/signup")?"1":"0";r.LoginNotifyClose({isSignUp:e})}),[r,n]);(0,j.useEffect)((()=>{m.current.listen((()=>{y(),v(),l(m.current.index)}))}),[v,y]);const{colors:f}=(0,a.u)(),x=(0,j.useMemo)((()=>Object.assign(Object.assign({},Sv),{backgroundColor:f.BGSecondary})),[f]);return(0,o.jsxs)(Tt.u_,Object.assign({visible:e,onClose:b,maskCloseable:!1,contentStyle:x,closeStyles:jv,closeStyle:h||p||!i?0:2},{children:[s>0&&!d&&(0,o.jsx)(fv,Object.assign({onClick:_},{children:(0,o.jsx)(xv,{},void 0)}),void 0),(0,o.jsx)(P.F0,Object.assign({history:m.current},{children:(0,o.jsxs)(kv,{children:[(0,o.jsx)(wv,Object.assign({id:"loginContainer"},{children:(0,o.jsx)(_v,{},void 0)}),void 0),g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(lh,{},void 0),(0,o.jsx)(bv,{},void 0)]},void 0)]},void 0)}),void 0)]}),void 0)})),Pv=(0,Vo.Z)("div",{target:"e10win0d0"})((({theme:{colors:e}})=>[{display:"flex",justifyContent:"space-around",boxShadow:`0px 1px 1px ${e.ShadowPrimary}`,height:de.Mz,width:"100%",top:0,position:"fixed",alignItems:"center",background:e.BGPrimary,zIndex:1e3}]),"label:DivHeaderContainer;"),Tv=(0,Vo.Z)("div",{target:"e10win0d1"})({width:"100%",display:"flex",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},(({expand:e})=>e?{}:{maxWidth:de.XP}),(({theme:{direction:e}})=>(0,de.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})),"label:DivHeaderWrapperMain;"),Ov=(0,Vo.Z)(Tv,{target:"e10win0d2"})([{maxWidth:"100%"},({theme:{direction:e}})=>(0,de.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})],"label:StyledDivHeaderWrapperMainV2;");var Lv=i(68137),Iv=i(84047),Av=i(42972),Ev=i(97103),Mv=i(66958),Rv=i(67974),Fv=i(72852),Dv=i(80185),Bv=i(48710),zv=i(69829);const Nv=(0,Vo.Z)("form",{target:"ev30f210"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"})),"label:FormElement;"),Uv=(0,Vo.Z)("div",{target:"ev30f211"})((({theme:{colors:e}})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1.5px solid ${e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),Wv=(0,Vo.Z)("input",{target:"ev30f212"})((({theme:{colors:e,typography:t,fontFamilies:i,fontWeights:o},withIcon:n})=>Object.assign(Object.assign({fontFamily:i.Proxima,fontWeight:o.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:n?"252px":"292px",color:e.TextPrimary,caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${Uv}`]:{display:"block"}})),"label:InputElement;");Wv.defaultProps=Object.assign(Object.assign({},Wv.defaultProps),{"data-e2e":"search-user-input"});const qv=(0,Vo.Z)("div",{target:"ev30f213"})({fontSize:0},"label:DivIconWrapper;"),Gv=(0,Vo.Z)(zv.Z,{target:"ev30f214"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Hv=(0,Vo.Z)("span",{target:"ev30f215"})((({theme:{colors:e}})=>({width:"1px",height:"28px",margin:"-3px 0",background:e.LineSecondary})),"label:SpanSpliter;"),Zv=(0,Vo.Z)("button",{target:"ev30f216"})((({theme:{colors:e,direction:t}})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:"transparent",":hover":{background:e.BGView},":active":{background:e.BGInput2}},(0,de.YJ)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");Zv.defaultProps=Object.assign(Object.assign({},Zv.defaultProps),{"data-e2e":"search-button"});const $v=(0,j.memo)((function({initialValue:e,onEnter:t}){var i;const[{searchValue:n,loading:r},{handleInputFocusChange:s,setSearchValue:l,setActiveUp:d,setActiveDown:c}]=(0,V.b7)(Iv.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading})}),{user:p,searchVideoForLoggedin:u}=null!==(i=(0,ne.L)((()=>["user","searchVideoForLoggedin"]),[]))&&void 0!==i?i:{},g=Boolean(p),m=(0,j.useRef)(null),{pathname:h}=(0,P.TH)(),_=Boolean((0,P.LX)(h,{path:$.Ad.searchHome})),v=(0,ni.Q)()(g||!u?"search_bar_login":"search_users"),{colors:y}=(0,a.u)(),b=(0,j.useMemo)((()=>({fill:y.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[y]);(0,j.useEffect)((()=>{l(e)}),[e,l]);const f=(0,j.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&l(t)}),[l]),x=(0,Bv.J)({upHandler:d,downHandler:c,confirmHandler:t}),k=(0,j.useCallback)((()=>{s(!0)}),[s]),w=(0,j.useCallback)((()=>{s(!1)}),[s]),S=(0,j.useCallback)((()=>{var e;l(""),null===(e=m.current)||void 0===e||e.focus()}),[l]);(0,j.useEffect)((()=>{_||l("")}),[_,l]);const C=(0,j.useCallback)((()=>r?(0,o.jsx)(qv,{children:(0,o.jsx)(Gv,Object.assign({},b),void 0)},void 0):n?(0,o.jsx)(qv,Object.assign({onClick:S,"data-e2e":"reset-search-form"},{children:(0,o.jsx)(Dv.Z,Object.assign({},b),void 0)}),void 0):null),[r,n,b,S]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Wv,{ref:m,withIcon:Boolean(n)||r,value:n,onChange:f,onKeyDown:x,onFocus:k,onBlur:w,placeholder:v,name:"q",type:"search",autoComplete:"off"},void 0),C()]},void 0)})),Vv=(0,j.memo)((function({initialValue:e,onSubmit:t}){const[i,n]=(0,V.b7)(Iv.B,{dependencies:[],selector:e=>e.searchValue}),{search:r}=(0,P.TH)(),{q:s}=(0,be.parse)(r),{colors:l}=(0,a.u)(),{pathname:d}=(0,P.TH)(),c=(0,j.useRef)(!1),p=(0,j.useCallback)((()=>{c.current=!0}),[]),u=(0,j.useCallback)((e=>{e.preventDefault(),n.setInputFocus(!1),null==t||t(c.current),c.current=!1}),[n,t]),g=Boolean((0,P.LX)(d,{path:$.Ad.searchHome}));return(0,o.jsxs)(Nv,Object.assign({className:"search-input",action:"/search",onSubmit:u},{children:[g&&(0,o.jsx)("h1",Object.assign({style:{display:"none",alignItems:"center"}},{children:s}),void 0),(0,o.jsx)($v,{initialValue:e,onEnter:p},void 0),(0,o.jsx)(Hv,{},void 0),(0,o.jsx)(Zv,Object.assign({type:"submit"},{children:(0,o.jsx)(Pn.Z,{fill:i?l.TextSecondary:l.TextQuaternary,width:24,height:24},void 0)}),void 0),(0,o.jsx)(Uv,{},void 0)]}),void 0)})),Qv=(0,Vo.Z)("div",{target:"eagc08l0"})({position:"relative"},"label:DivSearchFormContainer;"),Yv=e=>{const[{activeIndex:t},i]=(0,V.b7)(Iv.B),o=t===e,n=(0,j.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:n}};var Kv=i(13761);const Jv=(0,Vo.Z)("div",{target:"e1yapk9z0"})((({theme:{colors:e}})=>({position:"absolute",width:"100%",marginTop:"8px",background:e.BGPrimary,boxShadow:`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:`min(calc(100vh - 96px - ${de.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden"})),"label:DivContainer;");Jv.defaultProps=Object.assign(Object.assign({},Jv.defaultProps),{"data-e2e":"sug-container"});const Xv=(0,Vo.Z)("div",{target:"e1yapk9z1"})((({paddingVertical:e,active:t,theme:{colors:i}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?i.BGView:void 0,display:"flex",alignItems:"center"})),"label:DivItemContainer;"),ey=(0,Vo.Z)("h4",{target:"e1yapk9z2"})((({theme:{typography:e,fontWeights:t}})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:H4ItemTitle;"),ty=(0,Vo.Z)("p",{target:"e1yapk9z3"})((({theme:{typography:e,fontWeights:t,colors:i}})=>Object.assign(Object.assign({},e.P3),{color:i.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),iy=(0,Vo.Z)("p",{target:"e1yapk9z4"})((({theme:{fontFamilies:e,fontWeights:t,typography:i,colors:o}})=>Object.assign(Object.assign({fontFamily:e.Proxima,fontWeight:t.semiBold},i.P2),{color:o.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),oy=(0,Vo.Z)("div",{target:"e1yapk9z5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,de.YJ)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),ny=(0,Vo.Z)(Kv.q,{target:"e1yapk9z6"})((({theme:{direction:e}})=>Object.assign({},(0,de.YJ)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),ay=(0,Vo.Z)("div",{target:"e1yapk9z7"})({flex:"0 1 auto",minWidth:0},"label:DivSugItemContent;"),ry=(0,Vo.Z)("div",{target:"e1yapk9z8"})((({theme:{fontWeights:e,typography:t,colors:i}})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:i.TextTertiary})),"label:DivSugAccountTitle;"),sy=(0,j.memo)((function(e){const{item:t,index:i,onSelect:n}=e,{active:a,handleMouseEnter:r}=Yv(i),{content:s,extra_info:l}=t,{nickname:d,unique_id:c,is_verified:p,rich_sug_avatar_uri:u}=l,g=Boolean(c),m=(0,j.useCallback)((()=>{null==n||n(t,i)}),[i,t,n]),h=g?"user-sug-item":"content-sug-item";return(0,o.jsxs)(Xv,Object.assign({"data-e2e":h,paddingVertical:9,active:a,onMouseDown:m,onMouseMove:r},{children:[g?(0,o.jsx)(ny,{src:u,size:40},void 0):(0,o.jsx)(oy,{children:(0,o.jsx)(Pn.Z,{},void 0)},void 0),(0,o.jsx)(ay,{children:g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ey,{children:[c," ",p&&(0,o.jsx)($o.Q,{width:14,height:14},"badge")]},void 0),(0,o.jsx)(ty,{children:d},void 0)]},void 0):(0,o.jsx)(ey,{children:s},void 0)},void 0)]}),void 0)})),ly=(0,j.memo)((function({index:e,onClick:t}){const i=(0,V.mp)(Iv.B,{dependencies:[],selector:e=>e.searchValue}),{active:n,handleMouseEnter:a}=Yv(e),r=(0,ni.Q)()("view_all_results",{keyword:i}),s=(0,j.useCallback)((()=>{null==t||t("click_view_all")}),[t]);return(0,o.jsx)(Xv,Object.assign({paddingVertical:15,active:n,onMouseMove:a,onMouseDown:s},{children:(0,o.jsx)(iy,{children:r},void 0)}),void 0)})),dy=(0,j.memo)((function(e){const t=(0,ni.Q)(),[i,n]=(0,V.b7)(Iv.B,{selector:e=>e.sugList,dependencies:[]}),a=(0,j.useCallback)((()=>{n.setActiveIndex(-1)}),[n]),[r,s]=(0,j.useMemo)((()=>i.reduce((([e,t],i)=>(i.extra_info.sug_user_id?e.push(i):t.push(i),[e,t])),[[],[]])),[i]),l=(t,i=0)=>t.map(((t,n)=>(0,o.jsx)(sy,{item:t,index:n+i,onSelect:e.onSelect},t.content)));return(0,o.jsxs)(Jv,Object.assign({onMouseLeave:a},{children:[l(s),0===r.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ry,{children:t("search_account")},void 0),l(r,s.length)]},void 0),(0,o.jsx)(ly,{index:i.length,onClick:e.onSelectMore},void 0)]}),void 0)})),cy={[$.Ad.searchHome]:"general",[$.Ad.searchUser]:"user",[$.Ad.searchVideo]:"video"},py=(0,j.memo)((function(){const{search:e,pathname:t}=(0,P.TH)(),{q:i}=(0,be.parse)(e),n=(0,Lv.if)(cy[t]),[{searchValue:a,loading:r,sugList:s,inputFocus:l,activeIndex:d},c]=(0,V.b7)(Iv.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),{lang:p,user:u,searchVideoForLoggedin:g}=(0,V.mp)(K.G,{selector:e=>{var t,i,o;return{lang:e.lang,user:null===(t=e.appContext)||void 0===t?void 0:t.user,searchVideoForLoggedin:null!==(o=null===(i=e.appContext)||void 0===i?void 0:i.searchVideoForLoggedin)&&void 0!==o?o:[]}},dependencies:[]}),[{currentKeyword:m},h]=(0,V.b7)(Av.t8,{selector:e=>{var i,o;return{currentKeyword:null!==(o=null===(i=e[cy[t]])||void 0===i?void 0:i.keyword)&&void 0!==o?o:""}},dependencies:[t]}),_=Boolean(u),v=(0,j.useRef)([]),y=(0,P.k6)(),b=(0,P.TH)(),f=(0,j.useCallback)((()=>{c.getSugList({app_language:(0,Rv.s)(p),history_list:encodeURIComponent(JSON.stringify(v.current)),keyword:a})}),[c,p,a]),x=Boolean((0,P.LX)(t,{path:$.Ad.searchHome}));(0,j.useEffect)((()=>{x&&i&&c.setSearchValue(String(i))}),[i,x]),(0,j.useEffect)((()=>{f()}),[f]);const k=(0,j.useCallback)(((e,t)=>{c.setInputFocus(!1);const i=Date.now();let o=x?b.pathname:$.zp.searchHome();if(x&&e===m)return void n(!0,!0);!_&&g&&(o=$.zp.searchUser());const a=(0,Ev.C)({location:b,to:{pathname:o,search:{q:e,t:i}}});y.push(a,Object.assign({searchSource:"normal_search"},t))}),[x,b,_,n,y,c,g,m]),w=(0,j.useCallback)(((e,i)=>{const{extra_info:{unique_id:o,sug_user_id:n},word_record:{words_content:r,group_id:s},content:l,impr_id:d}=e;v.current.push(l);const c=Boolean(n);Fv.xq.handleSugClick({impr_id:d,words_source:"sug",words_position:i,words_content:r,raw_query:a,sug_type:c?"enrich_sug":"normal_sug",query_id:"",group_id:s}),c?(Zo.W.handleEnterUser({enter_from:"search_sug",search_keyword:a,to_user_id:n,search_id:d,impr_id:d,rank:i,search_type:cy[t]}),window.location.href=(0,be.stringifyUrl)({url:(0,Mv.yl)({uniqueId:o}),query:{lang:p}})):k(l,{enterMethod:"click_icon"})}),[p,a,k,t]),S=(0,j.useCallback)((e=>{h.resetSearchResult(),k(a,{enterMethod:e})}),[k,h,a]),C=(0,j.useCallback)((e=>{a&&(e&&s[d]?w(s[d],d):S(e?"click_enter":"click_icon"))}),[d,S,w,a,s]);return(0,o.jsxs)(Qv,{children:[(0,o.jsx)(Vv,{initialValue:"",onSubmit:C},void 0),!r&&Boolean(a)&&s.length>0&&l?(0,o.jsx)(dy,{onSelect:w,onSelectMore:S},void 0):null]},void 0)}));var uy=i(43094),gy=i(17936),my=i(33980);let hy=class{constructor(e){this.fetch=e}getReportNotices(e){return this.fetch.get("/aweme/v1/report/inbox/notice",{query:e,baseUrlType:2})}getReportList(e){return this.fetch.get("/node/report/inbox/list",{query:e,baseUrlType:2})}getReportDetail(e){return this.fetch.get("/node/report/inbox/detail",{query:e,baseUrlType:2})}};hy=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],hy);let _y=class{constructor(e){this.fetch=e}getNoticeCount(){return this.fetch.get("/api/notice/count/",{query:{source:7},baseUrlType:2})}};_y=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],_y);let vy=class extends pe.D{constructor(e,t,i){super(),this.service=e,this.reportInboxService=t,this.appContext=i,this.defaultState={noticeCount:[],reportInbox:{noticeList:[],count:0},isFooterRequest:!1}}setNoticeCount(e,t){e.noticeCount=t}setIsFooterRequest(e,t){e.isFooterRequest=t}setReportInboxNoticeList(e,t){e.reportInbox.noticeList=t}setReportInboxNoticeCount(e,t){e.reportInbox.count=t}fetchNoticeCount(e){return e.pipe((0,Li.z)((()=>this.service.getNoticeCount().pipe((0,Ki.b)((e=>{(0,eo.k)(e.status_code,[0])})),(0,Li.z)((e=>{var t;if(0===e.status_code){const i=(null!==(t=e.notice_count)&&void 0!==t?t:[]).filter((e=>[500,2,7,3,6].indexOf(e.group)>=0&&500!==e.group));return(0,Ii.of)(this.getActions().setNoticeCount(i),this.getActions().setIsFooterRequest(!0))}return(0,Ii.of)(this.noop())})),(0,ye.n)({})))))}fetchReportInbox(e){return e.pipe((0,he.M)(this.appContext.state$),(0,ve.z)((([e,{appContext:t}])=>{var i,o,n,a;return this.reportInboxService.getReportNotices({request_tag_from:(null==t?void 0:t.isMobile)?"h5":"pc",carrier_region:null!==(i=null==t?void 0:t.region)&&void 0!==i?i:"",sys_region:null!==(o=null==t?void 0:t.region)&&void 0!==o?o:"",current_region:null!==(n=null==t?void 0:t.region)&&void 0!==n?n:"",locale:null!==(a=null==t?void 0:t.language)&&void 0!==a?a:""}).pipe((0,Li.z)((({notice_lists:e})=>{var t;if(!e)return[this.noop()];const{notice_list:i}=e[0];if(!i)return[this.noop()];const o=!1===(null===(t=i[0])||void 0===t?void 0:t.has_read)?1:0;return[this.getActions().setReportInboxNoticeList(i),this.getActions().setReportInboxNoticeCount(o)]})),(0,ye.n)({}))})))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Array]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"setNoticeCount",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"setIsFooterRequest",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Array]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"setReportInboxNoticeList",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"setReportInboxNoticeCount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"fetchNoticeCount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],vy.prototype,"fetchReportInbox",null),vy=(0,m.__decorate)([(0,ge.Y)("InboxTooltip"),(0,m.__metadata)("design:paramtypes",[_y,hy,K.G])],vy);const yy=/^\(\d+\+?\)/;var by=i(44860),fy=i(28370);const xy=(0,le.Z)("div",{target:"e1nx07zo0"})((({theme:{direction:e},removeMarginLeft:t})=>(0,de.YJ)({direction:e,marginStart:t?"0px":"16px"})),{cursor:"pointer",height:"32px",padding:"3px 3px 0",position:"relative"},"label:DivMessageIconContainer;");xy.defaultProps=Object.assign(Object.assign({},xy.defaultProps),{"data-e2e":"top-dm-icon"});const ky=({theme:{direction:e}})=>({display:"block",width:"26px",height:"26px",transform:"rtl"===e?"rotateY(180deg)":"none"}),wy=(0,le.Z)(by.Z,{target:"e1nx07zo1"})(ky,"label:StyledIcon;"),Sy=(0,le.Z)(fy.Z,{target:"e1nx07zo2"})(ky,"label:StyledActiveIcon;"),jy=(0,le.Z)("sup",{target:"e1nx07zo3"})((({theme:e,long:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold"}),(0,de.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"-7px",minWidth:"20px",borderRadius:"10px",height:"20px",background:e.colors.Primary,textAlign:"center",padding:t?"0 6px":"0"}]),"label:SupMsgBadge;"),Cy=function({removeMarginLeft:e}){const{pathname:t}=(0,P.TH)(),i=t.startsWith("/message")?Sy:wy,n=(0,ni.Q)(),a=(0,V.mp)(K.G,{dependencies:[],selector:e=>e.lang}),r=(0,V.mp)(my.O,{dependencies:[],selector:e=>e.messageCount});!function(){const{user:e,encryptedWebid:t,lang:i,appType:o,env:n,wid:a,$apiUrl:r,$wsUrl:s}=(0,V.mp)(K.G,{dependencies:[],selector:e=>{var t,i,o,n,a,r,s;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user,wid:null===(i=e.appContext)||void 0===i?void 0:i.wid,encryptedWebid:null===(o=e.appContext)||void 0===o?void 0:o.encryptedWebid,appType:null===(n=e.appContext)||void 0===n?void 0:n.appType,lang:e.lang,env:null===(a=e.appContext)||void 0===a?void 0:a.env,$apiUrl:null===(r=e.appContext)||void 0===r?void 0:r.domains.imApi,$wsUrl:null===(s=e.appContext)||void 0===s?void 0:s.domains.imFrontier}}}),l=(0,V.qj)(my.O),d=(0,te.fz)(mo.GV);(0,j.useEffect)((()=>{d.getRiskParams(0).then((o=>{var n;Object.keys(o).forEach((e=>{void 0!==o[e]?o[e]=String(o[e]):o[e]=""})),o.referer||(o.referer=window.location.href);const d={appId:1459,userId:null!==(n=null==e?void 0:e.uid)&&void 0!==n?n:"",secUid:null==e?void 0:e.secUid,deviceId:null!=a?a:"",appKey:"e1bd35ec9db7b8d846de66ed140b1ad9",fpId:9,method:1,apiUrl:r,frontierUrl:s,headers:Object.assign(Object.assign({},o),{from_appID:"1988",app_language:i,app_name:"tiktok_web",channel:"web",user_agent:navigator.userAgent}),extended:{device_id:void 0,ttwid:window.decodeURIComponent(null!=t?t:"")},timeout:5e3,disableInitPull:!0,eventListner(e){l.handleImEvent(e)}};Object.assign(d,{debug:!1,service:5,withCredentials:!0}),l.initSDK(d)}))}),[o,null==n?void 0:n.name,null==e?void 0:e.secUid,null==e?void 0:e.uid,a,t,l,i,d,r,s])}(),function(){const e=(0,V.mp)(my.O,{dependencies:[],selector:e=>e.messageCount}),t=(0,V.mp)(vy,{dependencies:[],selector:e=>e.noticeCount.reduce(((e,{count:t})=>e+t),0)}),i=(0,j.useMemo)((()=>e+t),[e,t]);(0,j.useEffect)((()=>{if(i>0){const e=(0,J.a1)(i);yy.test(document.title)?document.title=document.title.replace(yy,`(${e})`):document.title=`(${e})${document.title}`}else document.title=document.title.replace(yy,"")}),[i])}();const s=(0,j.useCallback)((()=>{uy.R.handleEnterChatList(r)}),[r]),l=(0,J.a1)(r);return(0,o.jsx)(gy.u,Object.assign({overlay:n("webdm_message_button"),placement:"bottom"},{children:(0,o.jsxs)(xy,Object.assign({removeMarginLeft:e},{children:[(0,o.jsx)(Tn.v,Object.assign({forceSSR:!1,to:`/messages?lang=${a}`,onClick:s},{children:(0,o.jsx)("span",{children:(0,o.jsx)(i,{},void 0)},void 0)}),void 0),r>0&&(0,o.jsx)(jy,Object.assign({long:r>10},{children:l}),void 0)]}),void 0)}),void 0)};var Py=i(26802),Ty=i(13033);let Oy=class{constructor(e){this.fetch=e}postScheduleRecord(e){return this.fetch.post("/api/v1/post_schedule/ack/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})})}updateRedDot(e){return this.fetch.post("/api/reddot/report",{query:Object.assign({},e)})}};Oy=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],Oy);const Ly="upload-long-video",Iy="series-tip";var Ay,Ey;!function(e){e[e.None=0]="None",e[e.Upload=1]="Upload",e[e.Inbox=2]="Inbox",e[e.EditProfile=3]="EditProfile",e[e.LiveCreatorTooltip=4]="LiveCreatorTooltip",e[e.DarkMode=5]="DarkMode",e[e.Series=6]="Series"}(Ay||(Ay={})),function(e){e[e.Schedule=0]="Schedule",e[e.LongVideo=1]="LongVideo"}(Ey||(Ey={}));let My=class extends pe.D{constructor(e,t){var i,o,n,a,r,s,l,d,c,p,u,g,m;super(),this.service=e,this.home=t,this.defaultState={tooltipPriority:(null===(o=null===(i=this.home.state.appContext)||void 0===i?void 0:i.user)||void 0===o?void 0:o.showScheduleTips)||(null!==(r=null===(a=null===(n=this.home.state.appContext)||void 0===n?void 0:n.user)||void 0===a?void 0:a.longVideoMinutes)&&void 0!==r?r:0)>0&&!Ty.iv.getItem(Ly)?1:(null===(l=null===(s=this.home.state.appContext)||void 0===s?void 0:s.user)||void 0===l?void 0:l.hasCollectionsAccess)&&!Ty.iv.getItem(Iy)?6:5,uploadTooltipType:(null!==(p=null===(c=null===(d=this.home.state.appContext)||void 0===d?void 0:d.user)||void 0===c?void 0:c.longVideoMinutes)&&void 0!==p?p:0)>0&&!Ty.iv.getItem(Ly)?1:0,redDot:null!==(m=null===(g=null===(u=this.home.state.appContext)||void 0===u?void 0:u.user)||void 0===g?void 0:g.redDot)&&void 0!==m?m:[]}}setTooltipPriority(e,t){e.tooltipPriority=t}deleteTypeRedDot(e,t){const i=[...e.redDot],o=i.indexOf(t);i.splice(o,1),e.redDot=i}postScheduleRecord(e){return e.pipe((0,Li.z)((e=>this.service.postScheduleRecord(e).pipe((0,_e.U)((()=>this.noop()))))))}updateRedDot(e){return e.pipe((0,Li.z)((({redirect:e,type:t})=>this.service.updateRedDot({type:t}).pipe((0,Ki.b)((()=>{e&&(location.href=e)})),(0,_e.U)((()=>this.getActions().deleteTypeRedDot(t)))))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],My.prototype,"setTooltipPriority",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],My.prototype,"deleteTypeRedDot",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],My.prototype,"postScheduleRecord",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],My.prototype,"updateRedDot",null),My=(0,m.__decorate)([(0,ge.Y)("Header"),(0,m.__metadata)("design:paramtypes",[Oy,K.G])],My);const Ry=(0,Vo.Z)("div",{target:"efubjyv0"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"24px"})),{position:"relative",width:"32px",height:"32px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"50%",cursor:"pointer"},"label:DivProfileContainer;");Ry.defaultProps=Object.assign(Object.assign({},Ry.defaultProps),{"data-e2e":"profile-icon"});const Fy=(0,j.memo)((function(e){var t;const{children:i,style:n={}}=e,{appContext:a}=(0,V.mp)(K.G);return(0,o.jsx)(Ry,Object.assign({style:Object.assign({backgroundImage:`url(${null===(t=null==a?void 0:a.user)||void 0===t?void 0:t.avatarUri[0]})`},n),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:i}),void 0)}));var Dy;!function(e){e.DarkModeShow="dark_mode_show",e.DarkModeClick="dark_mode_click",e.DarkModePopUpShow="dark_mode_pop_up_show",e.DarkModePopUpClose="dark_mode_pop_up_close",e.DarkModePopUpDisappear="dark_mode_pop_up_disappear"}(Dy||(Dy={}));const By={handleDarkModeShow:()=>{re.W.event("dark_mode_show")},handleDarkModeClick:()=>{re.W.event("dark_mode_click")},handleDarkModePopUpShow:()=>{re.W.event("dark_mode_pop_up_show")},handleDarkModePopUpClose:()=>{re.W.event("dark_mode_pop_up_close")},handleDarkModePopUpDisappear:()=>{re.W.event("dark_mode_pop_up_disappear")}},zy=(0,Vo.Z)("div",{target:"ercuxj60"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),Ny=(0,Vo.Z)("h3",{target:"ercuxj61"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Uy=(0,Vo.Z)("p",{target:"ercuxj62"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Wy=(0,Vo.Z)("div",{target:"ercuxj63"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),qy=(0,Vo.Z)("button",{target:"ercuxj65"})(de.Ph,(({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Gy=(0,j.memo)((({userPopupActive:e})=>{const{colors:t,direction:i}=(0,a.u)(),n=(0,ni.Q)(),[r,s]=(0,j.useState)(!1),[{tooltipPriority:l},d]=(0,V.b7)(My),c=(0,j.useRef)(!1),p=(0,j.useRef)(null),u=(0,j.useCallback)((e=>{var t;e.target===p.current||(null===(t=p.current)||void 0===t?void 0:t.contains(e.target))||(s(!1),By.handleDarkModePopUpDisappear(),d.setTooltipPriority(3),window.removeEventListener("click",u))}),[d]),g=(0,j.useCallback)((e=>{s(!1),By[null!=e?e:"handleDarkModePopUpDisappear"](),d.setTooltipPriority(3),window.removeEventListener("click",u)}),[d,u]);(0,j.useEffect)((()=>{let e;return r&&(e=window.setTimeout((()=>{c.current=!0,g()}),5e3),window.addEventListener("click",u)),()=>{clearTimeout(e),r&&!c.current&&(By.handleDarkModePopUpDisappear(),d.setTooltipPriority(3)),window.removeEventListener("click",u)}}),[r,u]);const{hasDarkModeSwitch:m}=(0,T.ui)();(0,j.useEffect)((()=>{const e=(0,yi.le)(O.HW);Number(e)<2&&5===l&&m?(s(!0),By.handleDarkModePopUpShow(),(0,yi.D$)(O.HW,String(Number(e)+1))):(s(!1),5===l&&d.setTooltipPriority(3))}),[l]),(0,j.useEffect)((()=>{e&&r&&(c.current=!0,g())}),[e,r]);const h=(0,j.useCallback)((()=>{c.current=!0,g("handleDarkModePopUpClose")}),[g]),_="ltr"===i?"bottomRight":"bottomLeft";return(0,o.jsx)(Hn.G,Object.assign({active:r,backgroundColor:t.ConstSecondary2,placement:_,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(zy,Object.assign({ref:p},{children:[(0,o.jsx)(Ny,{children:n("pc_web_dark_mode_popup_header")},void 0),(0,o.jsx)(Uy,{children:n("pc_web_dark_mode_popup_body")},void 0),(0,o.jsx)(Wy,{children:(0,o.jsx)(qy,Object.assign({onClick:h},{children:n("editprofile_close")}),void 0)},void 0)]}),void 0)}),void 0)}));var Hy,Zy=i(87358),$y=i(10441),Vy=i(4058),Qy=i(32568),Yy=i(56163),Ky=i.n(Yy);!function(e){e.MessagePopShow="message_pop_notice_show",e.ChangeNoticeTab="change_notification_tab",e.EnterFollowRequest="enter_follow_request",e.FollowRequestAction="follow_request_action",e.EnterFoldMessage="enter_folded_message"}(Hy||(Hy={}));const Jy="homepage_message";let Xy=class{handlePopShow(e){re.W.event("message_pop_notice_show",e)}handleChangeTab(e){re.W.event("change_notification_tab",this.getNoticeParams(e))}handleEnterFollow(e){re.W.event("enter_follow_request",this.getNoticeParams(e))}handleFollowRequestAction(e){re.W.event("follow_request_action",Ky()(e,{enter_from:"follow_request_page",previous_page:"homepage_message"}))}handleEnterFold(e){re.W.event("enter_folded_message",Ky()(e,{enter_from:Jy,account_type:"like"}))}getNoticeParams(e){return Ky()(e,{enter_from:Jy,page_name:Jy,previous_page:re.W.commonParams.page_name})}};Xy=(0,m.__decorate)([(0,ae.G)()],Xy);let eb=class{constructor(e){this.fetch=e}getNoticeGroupData(e){return this.fetch.get("/api/notice/multi/",{query:e,baseUrlType:2})}getNoticeDiggList(e){return this.fetch.get("/api/notice/digg/list/",{query:e})}getNoticeFollowRequestList(e){return this.fetch.get("/api/user/following/request/list/",{query:e})}postFollowReplyApprove(e){return this.fetch.post("/api/commit/follow/request/approve/",{query:{from_user_id:e,from:33},headers:{[mo.eD]:this.fetch.csrfToken}})}postFollowReplyReject(e){return this.fetch.post("/api/commit/follow/request/reject/",{query:{from_user_id:e,from:33},headers:{[mo.eD]:this.fetch.csrfToken}})}};eb=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],eb);const tb=e=>33===e.type&&Boolean(e.follow),ib=e=>41===e.type&&Boolean(e.digg),ob=e=>31===e.type&&Boolean(e.comment),nb=e=>21===e.type&&Boolean(e.duet),ab=e=>45===e.type&&Boolean(e.at),rb=e=>213===e.type&&Boolean(e.template_notice);var sb,lb;!function(e){e[e.All=500]="All",e[e.Like=3]="Like",e[e.Comment=2]="Comment",e[e.Mention=6]="Mention",e[e.Follow=7]="Follow"}(sb||(sb={})),function(e){e[e.Approve=0]="Approve",e[e.Reject=1]="Reject"}(lb||(lb={}));const db={500:"all",2:"comments",7:"followers",3:"likes",6:"mentions"};let cb=class extends pe.D{constructor(e,t,i){super(),this.report=e,this.service=t,this.user=i,this.defaultNoticeList={has_more:1,max_time:0,min_time:0,notice_list:[],loading:!1},this.defaultFollowRequest={has_more:!1,min_time:0,total:0,users:[],loading:!1},this.defaultState={diggList:{users:[],loading:!1,has_more:1,max_cursor:0,min_cursor:0},activeGroup:500,noticeList:this.defaultNoticeList,followRequest:this.defaultFollowRequest}}setActiveGroup(e,t){e.activeGroup=t}setNoticeList(e,t){e.noticeList=t}setNoticeListLoading(e,t){e.noticeList.loading=t}changeActiveGroup(e){return e.pipe((0,Ki.b)((e=>{this.report.handleChangeTab({to_tab_name:db[e]})})),(0,Li.z)((e=>(0,Ii.of)(this.getActions().setActiveGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchNoticeData()))))}fetchNoticeData(e){return e.pipe((0,he.M)(this.state$),(0,Yi.w)((([e,{activeGroup:t,noticeList:i}])=>{if(i.loading||!i.has_more)return Ei.E;const o={count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time};return this.service.getNoticeGroupData({aid:1988,group_list:JSON.stringify([o])}).pipe((0,Ki.b)((e=>{(0,eo.k)(e.status_code,[0])})),(0,Li.z)((e=>{var t;if(0===e.status_code){const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,Ii.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:r,notice_list:s=[]}=o[0];return(0,Ii.of)(this.user.getActions().multiSetUser(this.getNoticeUsers(s)),this.getActions().setNoticeList({has_more:n,max_time:a,min_time:r,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...s],loading:!1}))}return(0,Ii.of)(this.noop())})),(0,Ji.O)(this.getActions().setNoticeListLoading(!0)),(0,Xi.l)(this.getActions().setNoticeListLoading(!1)),(0,ye.n)({}))})))}setDiggList(e,t){e.diggList.users=t}setDiggListLoading(e,t){e.diggList.loading=t}fetchDiggListData(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([{ref_id:e},{diggList:t}])=>{if(t.loading||!t.has_more)return Ei.E;const i={count:20,max_cursor:t.max_cursor,min_cursor:t.min_cursor,digg_type:1,ref_id:e,aid:1988};return this.service.getNoticeDiggList(i).pipe((0,Li.z)((e=>{var t;const i=(null!==(t=e.digg_infos)&&void 0!==t?t:[]).map((({simple_user:e})=>(0,J.yk)(e)));return(0,Ii.of)(this.user.getActions().multiSetUser(i),this.getActions().setDiggList(i.map((({uniqueId:e})=>e))))})),(0,Ji.O)(this.getActions().setDiggListLoading(!0)),(0,Xi.l)(this.getActions().setDiggListLoading(!1)))})))}setNoticeFollowRequest(e,t){e.followRequest=t}setNoticeFollowRequestLoading(e,t){e.followRequest.loading=t}fetchNoticeFollowRequest(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([{uid:e,refresh:t},{followRequest:i}])=>{const o={user_id:e,count:20,max_time:t?0:i.min_time,aid:1988};return this.service.getNoticeFollowRequestList(o).pipe((0,Ki.b)((e=>{(0,eo.k)(e.status_code,[0])})),(0,Li.z)((e=>{var o;if(0===e.status_code){const n=(null!==(o=e.request_users)&&void 0!==o?o:[]).map((e=>(0,J.yk)(e))),a=n.map((({uniqueId:e})=>e));return(0,Ii.of)(this.user.getActions().multiSetUser(n),this.getActions().setNoticeFollowRequest({has_more:e.has_more,loading:!1,min_time:e.min_time,total:e.total,users:t?a:i.users.concat(a),from:"fetchNoticeFollowRequest"}))}return(0,Ii.of)(this.noop())})),(0,Ji.O)(this.getActions().setNoticeFollowRequestLoading(!0)),(0,Xi.l)(this.getActions().setNoticeFollowRequestLoading(!1)),(0,ye.n)({}))})))}setNoticeFollowRequestReply(e,t){const i=e.followRequest.users.indexOf(t);if(i>=0){e.followRequest.users.splice(i,1);const{total:t}=e.followRequest;e.followRequest.total="string"==typeof t?t.replace(/(.+?)(\d0*$)/,((e,t,i)=>t+String(Number(i)-1))):t-1}}postFollowReply(e){return e.pipe((0,Ki.b)((({approveOrReject:e,uid:t=""})=>{this.report.handleFollowRequestAction({action:0===e?"accept":"delete",to_user_id:t})})),(0,Li.z)((({approveOrReject:e,uniqueId:t,uid:i=""})=>(0===e?this.service.postFollowReplyApprove(i):this.service.postFollowReplyReject(i)).pipe((0,_r.h)(this.getActions().setNoticeFollowRequestReply(t))))))}getNoticeUsers(e){return e.reduce(((e,t)=>{var i;return tb(t)&&e.push((0,J.yk)(t.follow.from_user)),ib(t)&&(null===(i=t.digg.from_user)||void 0===i||i.forEach((t=>e.push((0,J.yk)(t))))),ob(t)&&e.push((0,J.yk)(t.comment.comment.user)),nb(t)&&e.push((0,J.yk)(t.duet.aweme.author)),ab(t)&&t.at.user_info&&e.push((0,J.yk)(t.at.user_info)),e}),[])}};var pb;function ub(){return ub=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ub.apply(this,arguments)}(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setActiveGroup",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setNoticeList",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setNoticeListLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"changeActiveGroup",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"fetchNoticeData",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Array]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setDiggList",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setDiggListLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"fetchDiggListData",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setNoticeFollowRequest",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setNoticeFollowRequestLoading",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"fetchNoticeFollowRequest",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"setNoticeFollowRequestReply",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],cb.prototype,"postFollowReply",null),cb=(0,m.__decorate)([(0,ge.Y)("Notice"),(0,m.__metadata)("design:paramtypes",[Xy,eb,Wo.z])],cb);const gb=function(e){return j.createElement("svg",ub({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),pb||(pb=j.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M4.123 12l7.586 7.586a.5.5 0 010 .707l-1.414 1.414a.5.5 0 01-.707 0L.94 13.061a1.5 1.5 0 010-2.122l8.647-8.646a.5.5 0 01.707 0l1.414 1.414a.5.5 0 010 .707L4.123 12z",clipRule:"evenodd"})))};let mb=class extends pe.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reportDetail:{isLoading:!1,data:null},reportList:{data:[],hasNextPage:!0,pageCount:0},activeReport:null}}setReportDetail(e,t){e.reportDetail.data=t}setReportDetailLoading(e,t){e.reportDetail.isLoading=t}setReportListData(e,t){e.reportList.data.push(...t.data),e.reportList.hasNextPage=t.hasNextPage,e.reportList.pageCount=t.pageCount}setActiveReport(e,t){e.activeReport=t}getReportDetail(e){return e.pipe((0,ve.z)((({reportId:e,reportType:t})=>this.service.getReportDetail({report_id:e,report_type:t}).pipe((0,_e.U)((({body:{detail:e}})=>e?this.getActions().setReportDetail(e):this.noop())),(0,Ji.O)(this.getActions().setReportDetailLoading(!0)),(0,Xi.l)(this.getActions().setReportDetailLoading(!1)),(0,ye.n)({callback:this.commonToastError})))))}getReportList(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([e,{reportList:{pageCount:t,hasNextPage:i}}])=>i?this.service.getReportList({start:t,count:15}).pipe((0,_e.U)((({body:{status_code:e,list:i,has_more:o}})=>0!==e?this.noop():this.getActions().setReportListData({data:null!=i?i:[],hasNextPage:o,pageCount:t+15}))),(0,ye.n)({callback:this.commonToastError})):(0,Ii.of)(this.noop()))))}updateActiveReport(e){return e.pipe((0,Li.z)((e=>[this.getActions().setActiveReport(e)])))}commonToastError(){Zt.h.destroy(),Zt.h.open({content:this.t(O.kU),duration:3,widthType:"half"})}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"setReportDetail",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"setReportDetailLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"setReportListData",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"setActiveReport",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"getReportDetail",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"getReportList",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],mb.prototype,"updateActiveReport",null),mb=(0,m.__decorate)([(0,ge.Y)("ReportInbox"),(0,m.__param)(1,(0,co.t)(po.s)),(0,m.__metadata)("design:paramtypes",[hy,Function])],mb);var hb,_b,vb,yb=i(21145);function bb(){return bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},bb.apply(this,arguments)}const fb=function(e){return j.createElement("svg",bb({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 20",width:"1em",height:"1em"},e),hb||(hb=j.createElement("rect",{width:1.501,height:17.768,fill:"#fff",rx:.5,transform:"scale(1 -1) rotate(45.638 27.162 10.536)"})),_b||(_b=j.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M10.57 14.556c1.11 0 2.163-.17 3.11-.472L12.5 12.93a.512.512 0 01-.058-.068 9.006 9.006 0 01-1.873.193c-1.802 0-3.368-.514-4.445-1.267-1.08-.757-1.557-1.658-1.557-2.484 0-.826.476-1.728 1.557-2.485a5.44 5.44 0 01.075-.051L5.11 5.702c-1.266.94-2.043 2.207-2.043 3.602 0 2.9 3.36 5.252 7.503 5.252zM7.475 4.518c.943-.3 1.99-.466 3.093-.466 4.144 0 7.503 2.351 7.503 5.252 0 1.39-.77 2.652-2.03 3.592l-1.09-1.066a5.9 5.9 0 00.062-.042c1.08-.757 1.557-1.658 1.557-2.484 0-.826-.476-1.728-1.557-2.485-1.076-.753-2.643-1.267-4.445-1.267-.65 0-1.268.067-1.844.188l-1.25-1.222z",clipRule:"evenodd"})),vb||(vb=j.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.357 11.81a2.626 2.626 0 01-3.31-3.236l3.31 3.236zM9.803 6.792a2.626 2.626 0 013.296 3.224L9.804 6.792z",clipRule:"evenodd"})))};var xb=i(39556),kb=i.n(xb);function wb(e){if(isNaN(Number(e)))return"";const t=kb().unix(Number(e)),i=e=>e.toString().padStart(2,"0"),o=i(t.month()+1),n=i(t.date()),a=i(t.hour()),r=i(t.minute()),s=i(t.second());return`${t.year()}-${o}-${n} ${a}:${r}:${s}`}const Sb=(0,le.Z)("div",{target:"egjh0py0"})({display:"flex",padding:"10px 0"},"label:DivItemContainer;"),jb=(0,le.Z)("img",{target:"egjh0py1"})((({theme:{direction:e}})=>[{height:"48px",width:"48px",borderRadius:"50%"},(0,de.YJ)({direction:e,marginEnd:"12px"})]),"label:ImgLeftIcon;"),Cb=(0,le.Z)("img",{target:"egjh0py2"})((({theme:{colors:e}})=>({objectFit:"cover",backgroundColor:e.TextTertiary})),"label:ImgCover;"),Pb=(0,le.Z)("div",{target:"egjh0py3"})({flex:1,display:"flex",justifyContent:"space-between"},"label:DivRightContent;"),Tb=(0,le.Z)("div",{target:"egjh0py4"})((({theme:{colors:e,direction:t}})=>[{flex:1,color:e.TextPrimary},(0,de.YJ)({direction:t,marginEnd:"12px"})]),"label:DivDialogContent;"),Ob=(0,le.Z)("span",{target:"egjh0py5"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{lineHeight:"17px"}]),"label:SpanTitle;"),Lb=(0,le.Z)("div",{target:"egjh0py6"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"17px"}]),"label:DivContent;"),Ib=(0,le.Z)("span",{target:"egjh0py7"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTime;"),Ab=(0,le.Z)("div",{target:"egjh0py8"})({width:"42px",height:"56px",borderRadius:"2px",overflow:"hidden",position:"relative"},"label:DivImgWrapper;"),Eb=(0,le.Z)("div",{target:"egjh0py9"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, .5)"},(0,de.YJ)({direction:e,start:0})]),"label:DivViolationMask;"),Mb=({item:e,isV2:t})=>{const[i,n]=(0,j.useState)(!1),a=(0,j.useCallback)((()=>{n(!0)}),[]),{title:r="",content:s="",time:l="",cover_url:d="",avatar_url:c="",has_mask:p=!1}=e;return(0,o.jsxs)(Sb,{children:[(0,o.jsx)(jb,{src:c||yb},void 0),(0,o.jsxs)(Pb,{children:[(0,o.jsxs)(Tb,{children:[(0,o.jsx)(Ob,{children:r},void 0),(0,o.jsxs)(Lb,{children:[s," ",(0,o.jsx)(Ib,{children:t?wb(l):l},void 0)]},void 0)]},void 0),d&&(0,o.jsxs)(Ab,{children:[(0,o.jsx)(Cb,{width:"100%",height:"100%",src:d,onLoad:a},void 0),p&&i&&(0,o.jsx)(Eb,{children:(0,o.jsx)(fb,{width:20,height:20},void 0)},void 0)]},void 0)]},void 0)]},void 0)},Rb=(0,le.Z)("div",{target:"eaptjjg0"})((({theme:{direction:e}})=>[{paddingTop:"8px",display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflowY:"auto"},(0,de.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})]),"label:DivReportDetail;"),Fb=({reportId:e,reportType:t})=>{const{reportDetail:{isLoading:i,data:n}}=(0,V.mp)(mb),a=(0,V.qj)(mb),r=(0,j.useCallback)((()=>{a.getReportDetail({reportId:e,reportType:t})}),[e,t,a]);if((0,j.useEffect)((()=>{r()}),[r]),i)return(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0);if(!n)return(0,o.jsx)("div",{},void 0);const{text_infos:s}=n,l=void 0!==t;return(0,o.jsx)(Rb,{children:null==s?void 0:s.map(((e,t)=>(0,o.jsx)(Mb,{item:e,isV2:l},t)))},void 0)};var Db,Bb=i(53304);function zb(){return zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},zb.apply(this,arguments)}const Nb=function(e){return j.createElement("svg",zb({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32",width:"1em",height:"1em"},e),Db||(Db=j.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.58 6.023c-2.175-1.546-4.752-1.507-6.651-1.157a14.519 14.519 0 00-3.097.948 8.763 8.763 0 00-.252.116l-.016.008-.006.003-.004.001A1 1 0 006 6.838v20.495c0 .369.298.667.667.667h.666A.667.667 0 008 27.333v-8.247l.233-.09c.515-.19 1.236-.42 2.059-.57 1.674-.31 3.597-.27 5.129.819 2.174 1.546 4.751 1.506 6.65 1.156a14.515 14.515 0 003.097-.948 8.48 8.48 0 00.253-.116l.015-.007h.001l.005-.003.003-.002A1 1 0 0026 18.43V6.838a1 1 0 00-1.444-.896h-.001l-.006.003a3.144 3.144 0 01-.186.085 12.52 12.52 0 01-2.654.812c-1.675.309-3.598.27-5.13-.82zm-6.288.81c1.674-.308 3.597-.269 5.129.82 2.174 1.546 4.751 1.506 6.65 1.156a14.358 14.358 0 001.929-.5v9.464a12.486 12.486 0 01-2.292.661c-1.674.309-3.597.27-5.129-.82-2.174-1.545-4.751-1.506-6.65-1.156a14.35 14.35 0 00-1.929.5V7.495l.233-.09c.515-.19 1.236-.42 2.059-.57z",clipRule:"evenodd"})))};var Ub;function Wb(){return Wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Wb.apply(this,arguments)}const qb=function(e){return j.createElement("svg",Wb({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 16",width:"1em",height:"1em"},e),Ub||(Ub=j.createElement("path",{fill:"#161823",fillOpacity:.5,fillRule:"evenodd",d:"M12.305 7.529L6.874 2.098a.333.333 0 00-.472 0l-.471.471a.333.333 0 000 .471L10.891 8l-4.96 4.96a.333.333 0 000 .471l.471.471c.13.13.342.13.472 0l5.43-5.43a.667.667 0 000-.943z",clipRule:"evenodd"})))},Gb={101:"report_inbox_video",102:"report_inbox_comment",103:"report_inbox_account",107:"report_inbox_live",130:"report_inbox_livecomment",106:"report_inbox_directmessage",115:"report_inbox_directmessage",123:"report_inbox_directmessage",105:"report_inbox_sound",119:"report_inbox_hashtag",141:"shoutouts_detail_comment_report_title",142:"tns_intro_reporter_title",160:"%s - qareport_question",230:"profile_page_events_list",210:"photo_name_nocaption"},Hb={1:"report_inbox_inreview",3:"report_inbox_violation",2:"report_inbox_noviolation"},Zb=(0,le.Z)("div",{target:"e1cbfxtu0"})((({theme:{colors:e,direction:t},isNotice:i,isMobile:o=!1})=>[{height:"68px",minHeight:"68px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",cursor:"pointer",":hover":o?{}:{backgroundColor:e.BGPlaceholderDefault}},(0,de.YJ)({direction:t,paddingStart:"16px",paddingEnd:i?"16px":"24px"})]),"label:DivReportItemContainer;"),$b=(0,le.Z)("div",{target:"e1cbfxtu1"})((({theme:{colors:e}})=>[{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:`1px solid ${e.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center"}]),"label:DivFlagContainer;"),Vb=(0,le.Z)("div",{target:"e1cbfxtu2"})((({theme:{direction:e}})=>[{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden",wordWrap:"break-word"},(0,de.YJ)({direction:e,marginStart:"12px"})]),"label:DivReportItemContent;"),Qb=(0,le.Z)("div",{target:"e1cbfxtu3"})((({theme:{direction:e}})=>[Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivArrowContainer;"),Yb=(0,le.Z)("span",{target:"e1cbfxtu4"})((({theme:e,isNotice:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextPrimary",fontWeight:"semiBold"}),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:t?"normal":"nowrap",lineHeight:"17px"}]),"label:SpanTitle;"),Kb=(0,le.Z)("span",{target:"e1cbfxtu5"})((({theme:e,isNotice:t})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:t?"TextPrimary":"TextTertiary"}),{lineHeight:"17px"}]),"label:SpanSubtitle;"),Jb=(0,le.Z)("span",{target:"e1cbfxtu6"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTimestamp;"),Xb=(0,le.Z)("div",{target:"e1cbfxtu7"})((({theme:{direction:e}})=>[{position:"relative",width:"42px",minWidth:"42px",height:"56px",minHeight:"56px",borderRadius:"2px",overflow:"hidden"},(0,de.YJ)({direction:e,marginStart:"12px"})]),"label:DivCoverImageWrapper;"),ef=(0,le.Z)("img",{target:"e1cbfxtu8"})((({theme:{colors:e},isNotLoaded:t})=>[Object.assign({width:"100%",height:"100%",objectFit:"cover"},t?{backgroundColor:e.TextTertiary}:{})]),"label:ImgCoverImage;"),tf=(0,le.Z)("div",{target:"e1cbfxtu9"})({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .5)"},"label:DivViolationMask;"),of=(0,le.Z)("span",{target:"e1cbfxtu10"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"70%",float:"left"},"label:SpanReportBoxRow;"),nf=({report:e,onClick:t})=>{const{timeTranslator:i}=(0,sv.e)(),n=(0,ni.Q)(),{isMobile:a}=(0,J.m7)((0,ne.L)((()=>["isMobile"]),[])),[r,s]=(0,j.useState)(!1),l=Gb[e.report_type]?n(Gb[e.report_type]):"",d=i(1e3*Number(e.modify_time)),c=(0,j.useCallback)((()=>{t()}),[t]),p=(0,j.useCallback)((()=>{s(!0)}),[]),u=Hb[e.status]?n(Hb[e.status]):"";return(0,o.jsxs)(Zb,Object.assign({onClick:c,isMobile:a},{children:[(0,o.jsx)($b,{children:(0,o.jsx)(Nb,{width:32,height:32},void 0)},void 0),(0,o.jsxs)(Vb,{children:[(0,o.jsx)(Yb,{children:(()=>{if(e.title)return e.title;if(160===e.report_type){const t=` - ${n("qareport_question")||"Question"}`;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(of,{children:e.object_desc},void 0),(0,o.jsx)("span",{children:t.padStart(t.length+1)},void 0)]},void 0)}return l.replace("%s",e.object_owner_name||e.object_desc||"")})()},void 0),(0,o.jsxs)(Kb,{children:[n("report_inbox_status"),": ",u,(0,o.jsx)(Jb,{children:d.padStart(d.length+1)},void 0)]},void 0)]},void 0),e.cover_image?(0,o.jsxs)(Xb,{children:[(0,o.jsx)(ef,{isNotLoaded:!r,src:e.cover_image,onLoad:p},void 0),3===e.status&&r&&(0,o.jsx)(tf,{children:(0,o.jsx)(fb,{width:20,height:20},void 0)},void 0)]},void 0):(0,o.jsx)(Qb,{children:(0,o.jsx)(qb,{width:16,height:16},void 0)},void 0)]}),void 0)},af=(0,le.Z)("div",{target:"eq5dlep0"})({display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflow:"auto",height:"100%"},"label:DivReportList;"),rf=()=>{const{reportList:{data:e,hasNextPage:t}}=(0,V.mp)(mb),i=(0,V.qj)(mb),n=(0,j.useRef)(null);(0,j.useEffect)((()=>{e.length>0||i.getReportList()}),[i,e.length]);const a=(0,j.useCallback)((()=>{i.getReportList()}),[i]),r=(0,j.useCallback)((e=>()=>{i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]);return(0,Bb.s)({elemRef:n,onHitBottom:a,bottomThreshold:200,throttle:200}),(0,o.jsxs)(af,Object.assign({ref:n},{children:[e.map(((e,t)=>(0,o.jsx)(nf,{report:e,onClick:r(e)},t))),t&&(0,o.jsx)("div",{children:(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0)},sf=(0,le.Z)("div",{target:"e115u39r0"})({height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden"},"label:DivReportInboxContainer;"),lf=(0,le.Z)("div",{target:"e115u39r1"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",margin:"24px 0 18px"},"label:DivHeader;"),df=(0,le.Z)("span",{target:"e115u39r2"})((({theme:e})=>[(0,de.GI)({theme:e,fontFamily:"Sofia",typography:"H4",color:"TextPrimary",fontWeight:"bold"})]),"label:SpanHeaderTitle;"),cf=(0,le.Z)("div",{target:"e115u39r3"})((({theme:{direction:e}})=>[Object.assign({width:"24px",height:"24px",cursor:"pointer"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivBackButton;"),pf=({onClose:e})=>{var t,i;const{reportDetail:n,activeReport:a}=(0,V.mp)(mb),r=(0,ni.Q)(),s=(0,V.qj)(mb),l=(0,j.useCallback)((()=>{null===a?e():s.setActiveReport(null)}),[a,s,e]),d=r("report_inbox_title"),c=null!==a&&null!==(i=null===(t=n.data)||void 0===t?void 0:t.tab_title)&&void 0!==i?i:d;return(0,o.jsxs)(sf,{children:[(0,o.jsxs)(lf,{children:[(0,o.jsx)(cf,Object.assign({onClick:l},{children:(0,o.jsx)(gb,{width:24,height:24},void 0)}),void 0),(0,o.jsx)(df,{children:c},void 0)]},void 0),null!==a?(0,o.jsx)(Fb,{reportId:a.reportId,reportType:a.reportType},void 0):(0,o.jsx)(rf,{},void 0)]},void 0)};var uf=i(25615),gf=i.n(uf),mf=i(2723),hf=i(89436),_f=i(98691),vf=i(87700),yf=i(59130),bf=i(97099),ff=i(84698);const xf=(0,le.Z)("div",{target:"e1d0xjxi0"})({padding:"88px 32px 0",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivErrorContainer;"),kf=(0,le.Z)("p",{target:"e1d0xjxi1"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{marginTop:"20px"},"label:PErrorTitle;"),wf=(0,le.Z)("p",{target:"e1d0xjxi2"})((({theme:e})=>(0,de.GI)({theme:e,typography:"H6",color:"TextSecondary"})),{marginTop:"12px",textAlign:"center"},"label:PErrorDesc;"),Sf={500:{title:"inbox_all_activity",desc:"inbox_default_text",Icon:_f.Z},2:{title:"Inbox_Comments_on_your_videos",desc:"Inbox_When_someone_comments_on__one_of_your_videos_you_ll_see_it_here",Icon:vf.Z},7:{title:"Inbox_New_followers",desc:"Inbox_When_someone_new_follows_you_you_ll_see_it_here",Icon:yf.Z},3:{title:"Inbox_Likes_on_your_videos",desc:"Inbox_When_someone_likes_one_of_your_videos_you_ll_see_it_here",Icon:bf.Z},6:{title:"Inbox_Mentions_of_You",desc:"Inbox_When_someone_mentions_you_you_ll_see_it_here",Icon:ff.Z}},jf=(0,j.memo)((function({type:e}){const t=(0,ni.Q)(),{colors:i}=(0,a.u)(),{title:n,desc:r,Icon:s}=Sf[e];return(0,o.jsxs)(xf,{children:[(0,o.jsx)(s,{width:70,height:70,fill:i.TextQuaternary},void 0),(0,o.jsx)(kf,{children:t(n)},void 0),(0,o.jsx)(wf,{children:t(r)},void 0)]},void 0)})),Cf=({item:e,onClick:t})=>{var i,n,a,r,s,l,d;const{isMobile:c=!1}=null!==(i=(0,ne.L)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{timeTranslator:p}=(0,sv.e)(),u=p(1e3*Number(e.create_time)),g=null!==(r=null===(a=null===(n=e.template_notice)||void 0===n?void 0:n.notice)||void 0===a?void 0:a.content)&&void 0!==r?r:"",m=(0,j.useCallback)((()=>{c?window.location.href="/report/inbox":null==t||t()}),[c,t]);return(0,o.jsxs)(Zb,Object.assign({isNotice:!0,onClick:m},{children:[(0,o.jsx)($b,{children:(0,o.jsx)(Nb,{width:32,height:32},void 0)},void 0),(0,o.jsx)(Vb,{children:(0,o.jsxs)(Yb,Object.assign({isNotice:!0},{children:[null===(d=null===(l=null===(s=e.template_notice)||void 0===s?void 0:s.notice)||void 0===l?void 0:l.title)||void 0===d?void 0:d.title,":",(0,o.jsxs)(Kb,Object.assign({isNotice:!0},{children:[g.padStart(g.length+1),(0,o.jsx)(Jb,{children:u.padStart(u.length+1)},void 0)]}),void 0)]}),void 0)},void 0),(0,o.jsx)(Qb,{children:(0,o.jsx)(qb,{width:16,height:16},void 0)},void 0)]}),void 0)};var Pf=i(70756);function Tf({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,hf.e)();return t=(0,Pf.ot)(t),(0,j.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}function Of({uniqueId:e,onClick:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const r=(0,V.mp)(K.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.user)&&(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]});return(0,j.useCallback)((e=>{var s;let l=i;a&&(l=null!==(s=function(e){let t=e.target;for(;!((null==t?void 0:t.dataset.method)||t===e.currentTarget&&t);)t=t.parentElement;return t.dataset.method}(e))&&void 0!==s?s:i),null==t||t(e);const d={enter_method:l,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:re.W.commonParams.page_name};r?Zo.W.handleEnterProfile(d):Zo.W.handleEnterUser(d)}),[i,a,t,r,o,n])}function Lf(e){const{vid:t,authorId:i}=e;return(0,j.useCallback)((()=>{Zo.W.handleEnterVideo({enter_method:"click_noti",group_id:t,to_group_id:t,to_author_id:i})}),[i,t])}const If=(0,le.Z)("div",{target:"exfus50"})((({theme:e})=>[(0,de.GI)({theme:e,typography:"H6"}),de.gi,{display:"flex",flexDirection:"row",padding:"10px 16px",alignItems:"flex-start",cursor:"pointer",":hover":{background:e.colors.BGView}}]),"label:DivItemContainer;"),Af=(0,le.Z)("div",{target:"exfus51"})({position:"relative",width:"48px",height:"48px",flex:"0 0 48px"},"label:DivAvatarContainer;"),Ef=(0,le.Z)(Kv.q,{target:"exfus52"})((({size:e,multiple:t,theme:i})=>t?{position:"absolute",border:`1px solid ${i.colors.BGPrimary}`,background:i.colors.BGPrimary,boxSizing:"content-box",":first-of-type":{right:0,top:0},":last-of-type":{left:0,bottom:0}}:{flex:`0 0 ${e}px`}),"label:StyledAvatar;"),Mf=(0,le.Z)(bt.W,{target:"exfus53"})({alignSelf:"center",flex:"0 0 auto","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;"),Rf=(0,le.Z)("div",{target:"exfus54"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:DivVideoCover;"),Ff=(0,le.Z)(Tn.v,{target:"exfus55"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:StyledLinkVideoCover;"),Df=(0,le.Z)("div",{target:"exfus56"})({padding:"0 12px",flex:"1 1 auto"},"label:DivContentContainer;"),Bf=({theme:e})=>({fontWeight:e.fontWeights.semiBold}),zf=(0,le.Z)("p",{target:"exfus57"})(Bf,"label:PTitleText;"),Nf=(0,le.Z)("a",{target:"exfus58"})(Bf,"label:ATitleLink;"),Uf=(0,le.Z)(Tn.v,{target:"exfus59"})(Bf,"label:StyledTitleTextLink;"),Wf=(0,le.Z)("p",{target:"exfus510"})((0,de.FC)(7),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PDescText;"),qf=(0,le.Z)("span",{target:"exfus511"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:SpanPrimary;"),Gf=(0,le.Z)(Wf,{target:"exfus512"})((({theme:e})=>({position:"relative",paddingLeft:"8px",marginTop:"4px",lineClamp:1,WebkitLineClamp:1,"::before":{content:'""',position:"absolute",top:0,left:0,width:"2px",height:"100%",background:e.colors.LineSecondary}})),"label:StyledExtraText;"),Hf=(0,le.Z)("div",{target:"exfus513"})({marginTop:"8px"},"label:DivFollowReqButtonWrapper;"),Zf=(0,le.Z)(bt.W,{target:"exfus514"})({display:"inline-flex",":not(:first-of-type)":{marginLeft:"8px"}},"label:StyledFollowReqButton;"),$f=(0,j.memo)((function({item:e}){var t,i,n,a,r;const s=(0,V.mp)(Wo.z,{selector:t=>{var i;return t.users[null!==(i=e.comment.comment.user.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),l=e.comment.aweme,d=`/@${null==l?void 0:l.author.uid}/video/${null==l?void 0:l.aweme_id}`,c=(0,Mv.yl)({uniqueId:null!==(t=null==s?void 0:s.uniqueId)&&void 0!==t?t:"",secUid:null==s?void 0:s.secUid}),p=Lf({vid:null==l?void 0:l.aweme_id,authorId:null==l?void 0:l.author.uid}),{handleBefore:u,state:g}=(0,j.useMemo)((()=>({handleBefore:()=>{Ty.To.setItem("highlight_comment",{id:e.comment.comment.cid,groupId:e.comment.aweme.aweme_id,show:!0}),p()},state:{browserMode:!0,cid:e.comment.comment.cid,vid:e.comment.aweme.aweme_id}})),[p,e.comment.aweme.aweme_id,e.comment.comment.cid]),m=Tf({href:`${d}?browserMode=1`,state:g,shouldUsePush:!0,beforeStart:u}),h=Of({uniqueId:null==s?void 0:s.uniqueId,onClick:yi.UW,enter_method:"click_head"}),_=Of({uniqueId:null==s?void 0:s.uniqueId,onClick:yi.UW,enter_method:"click_name"}),v=(0,j.useCallback)((e=>{e.stopPropagation(),Zo.W.handleEnterVideo({enter_method:"click_noti",group_id:null==l?void 0:l.aweme_id,to_group_id:null==l?void 0:l.aweme_id,to_author_id:null==l?void 0:l.author.uid})}),[null==l?void 0:l.author.uid,null==l?void 0:l.aweme_id]);return s?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:m},{children:[(0,o.jsx)(Tn.v,Object.assign({to:c,onClick:h},{children:(0,o.jsx)(Ef,{size:48,src:s.avatarThumb,multiple:!1},void 0)}),void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Uf,Object.assign({"data-e2e":"inbox-title",to:c,onClick:_},{children:s.uniqueId}),void 0),(0,o.jsx)(Vf,{item:e,user:s},void 0)]},void 0),(0,o.jsx)(Tn.v,Object.assign({to:d,onClick:v},{children:(0,o.jsx)(Rf,{style:{backgroundImage:`url(${null===(r=null===(a=null===(n=null===(i=e.comment.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover)||void 0===a?void 0:a.url_list)||void 0===r?void 0:r[0]})`}},void 0)}),void 0)]}),void 0):(0,eo.G)(["user"])})),Vf=(0,j.memo)((function({item:e,user:t}){var i,n;const{timeTranslator:a,t:r}=(0,sv.e)(),{comment:s,create_time:l}=e,{comment_type:d,reply_comment:c}=s,p=(0,o.jsxs)(o.Fragment,{children:["",a(1e3*Number(l))]},void 0);return 2===d||11===d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(qf,{children:`${r("Inbox_replied_to_your_comment").replace("%s","")}: ${null!==(i=s.comment.text)&&void 0!==i?i:""}`},void 0),p]}),void 0),(0,o.jsx)(Gf,{children:`${null!==(n=null==t?void 0:t.uniqueId)&&void 0!==n?n:""}: ${null==c?void 0:c.text}`},void 0)]},void 0):17===d||18===d?(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(qf,{children:r("inbox_videoreply")},void 0),p]}),void 0):(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(qf,{children:r("Inbox_commented").replace(/%(s|@)/g,"")+s.comment.text},void 0),p]}),void 0)})),Qf=(0,j.memo)((function({item:e}){var t,i,n,a,r,s;const{t:l,timeTranslator:d}=(0,sv.e)(),c=(0,V.mp)(Wo.z,{selector:t=>{var i;return t.users[null!==(i=e.duet.aweme.author.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),p=(0,Mv.fH)({videoId:e.duet.aweme.aweme_id,uniqueId:null!==(t=null==c?void 0:c.uniqueId)&&void 0!==t?t:"",secUid:null==c?void 0:c.secUid}),u=(0,Mv.yl)({uniqueId:null!==(i=null==c?void 0:c.uniqueId)&&void 0!==i?i:"",secUid:null==c?void 0:c.secUid}),g=Of({uniqueId:null==c?void 0:c.uniqueId,enter_method:"click_head"}),m=Of({uniqueId:null==c?void 0:c.uniqueId,enter_method:"click_name"}),h=Tf({href:p,shouldUsePush:!0,beforeStart:Lf({vid:e.duet.aweme.aweme_id,authorId:e.duet.aweme.author.uid})});return c?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:h},{children:[(0,o.jsx)(Tn.v,Object.assign({to:u,onClick:g},{children:(0,o.jsx)(Ef,{size:48,src:c.avatarThumb},void 0)}),void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Uf,Object.assign({"data-e2e":"inbox-title",to:u,onClick:m},{children:c.uniqueId}),void 0),(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[l("Inbox_created_a_duet_with_you").replace(/%(s|#)/g,"")," ",d(1e3*Number(e.create_time))]}),void 0)]},void 0),(0,o.jsx)(Rf,{style:{backgroundImage:`url(${null===(s=null===(r=null===(a=null===(n=e.duet.aweme)||void 0===n?void 0:n.video)||void 0===a?void 0:a.cover)||void 0===r?void 0:r.url_list)||void 0===s?void 0:s[0]})`}},void 0)]}),void 0):(0,eo.G)(["user"])}));var Yf=i(59151),Kf=i(33104);const Jf=(0,j.memo)((function({item:e}){var t,i,n;const a=(0,V.mp)(K.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),{t:r,timeTranslator:s}=(0,sv.e)(),l=(0,V.mp)(Wo.z,{selector:t=>{var i;return t.users[null!==(i=e.follow.from_user.unique_id)&&void 0!==i?i:""]},dependencies:[e.follow.from_user.unique_id]}),{handleFollow:d,isFollowing:c,text:p,relation:u}=(0,Kf.w)({uniqueId:null!==(t=null==l?void 0:l.uniqueId)&&void 0!==t?t:"",followerStatus:null===(i=null==l?void 0:l.extraInfo)||void 0===i?void 0:i.followerStatus,prevent:!0,teaParams:{enter_from:"homepage_message",page_name:"homepage_message",page_type:re.W.commonParams.page_name,previous_page:re.W.commonParams.page_name}}),g=0===e.follow.follow_button_type?r("Inbox_is_following_you").replace(/%s/g,"")+a:r("Inbox_started_following_you").replace(/%s/g,"")+a,m=s(1e3*Number(e.create_time)),h=(0,Mv.yl)({uniqueId:null!==(n=null==l?void 0:l.uniqueId)&&void 0!==n?n:"",secUid:null==l?void 0:l.secUid}),_=Tf({href:h,shouldUsePush:!0,beforeStart:Of({uniqueId:e.follow.from_user.unique_id,enter_method:"click_noti",shouldHandleDom:!0})});return l?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:_},{children:[(0,o.jsx)(Kv.q,{size:48,src:l.avatarThumb,style:{flex:"0 0 48px"},"data-method":"click_head"},void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Nf,Object.assign({"data-e2e":"inbox-title",href:h,onClick:yi.PF,"data-method":"click_name"},{children:l.uniqueId}),void 0),(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[g," ",m]}),void 0)]},void 0),(0,o.jsxs)(Mf,Object.assign({"data-e2e":2===u?"":"follow-back",onClick:d,size:"tiny",buttonTheme:c?"default":"primary"},{children:[2===u?(0,o.jsx)(Yf.Z,{},void 0):null,p]}),void 0)]}),void 0):(0,eo.G)(["user"])}));var Xf,ex=i(73487);!function(e){e[e.Single=48]="Single",e[e.Multiple=36]="Multiple"}(Xf||(Xf={}));const tx=(0,j.memo)((function({item:e,onClick:t}){var i,n,a;const r=(0,V.mp)(Wo.z,{selector:t=>{var i;return null===(i=e.digg.from_user)||void 0===i?void 0:i.map((({unique_id:e})=>t.users[null!=e?e:""]))},dependencies:[e.digg.from_user]}),s=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`,l=(0,j.useCallback)((i=>{i.preventDefault(),i.stopPropagation(),t(e)}),[e,t]),d=(0,j.useCallback)((t=>{t.stopPropagation(),Zo.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid})}),[e.digg.aweme.author.uid,e.digg.aweme.aweme_id]);return(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(ix,{users:r},void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(zf,Object.assign({"data-e2e":"inbox-title",onClick:yi.UW},{children:(0,o.jsx)(nx,{users:r,merge_count:e.digg.merge_count},void 0)}),void 0),(0,o.jsx)(ox,{item:e},void 0)]},void 0),(0,o.jsx)(Ff,{onClick:d,to:s,style:{backgroundImage:`url(${null===(a=null===(n=null===(i=e.digg.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover.url_list)||void 0===a?void 0:a[0]})`}},void 0)]}),void 0)})),ix=(0,j.memo)((function({users:e}){var t,i,n,a,r;const s=Boolean(null==e?void 0:e[1]),l=Of({uniqueId:null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.uniqueId,enter_method:"click_head"});if(!s){const{uniqueId:t="",secUid:a}=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:{},r=(0,Mv.yl)({uniqueId:t,secUid:a});return(0,o.jsx)(Af,Object.assign({onClick:yi.UW},{children:(0,o.jsx)(ex.rU,Object.assign({to:r,onClick:l},{children:(0,o.jsx)(Ef,{size:48,src:null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.avatarThumb},void 0)}),void 0)}),void 0)}return(0,o.jsxs)(Af,Object.assign({"data-e2e":"inbox-avatar-multiple"},{children:[(0,o.jsx)(Ef,{size:36,multiple:!0,src:null===(a=null==e?void 0:e[1])||void 0===a?void 0:a.avatarThumb},void 0),(0,o.jsx)(Ef,{size:36,multiple:!0,src:null===(r=null==e?void 0:e[0])||void 0===r?void 0:r.avatarThumb},void 0)]}),void 0)})),ox=(0,j.memo)((function({item:e}){var t;const{t:i,timeTranslator:n}=(0,sv.e)(),a=(0,V.mp)(K.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),r=n(1e3*Number(e.create_time),!0);if(1===e.digg.digg_type)return(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_video").replace(/%s/g,"")+a," ",r]}),void 0);if(3===e.digg.digg_type){const{text:n,user:s}=null!==(t=e.digg.comment)&&void 0!==t?t:{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_comment").replace(/%s/g,"")+a," ",r]}),void 0),(0,o.jsxs)(Gf,{children:[null==s?void 0:s.unique_id,": ",n]},void 0)]},void 0)}return null})),nx=function({merge_count:e,users:t}){const i=(0,ni.Q)();return(null==t?void 0:t[1])?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ax,{user:null==t?void 0:t[0]},void 0),","," ",(0,o.jsx)(ax,{user:null==t?void 0:t[1]},void 0),"number"==typeof e&&e>2&&(0,o.jsxs)(o.Fragment,{children:[" ",i("Inbox_and")," ",i("Inbox_others").replace(/%d/,String(e-2))]},void 0)]},void 0):(0,o.jsx)(ax,{user:null==t?void 0:t[0]},void 0)},ax=function({user:e}){const t=Of({uniqueId:null==e?void 0:e.uniqueId,enter_method:"click_name"});if(!e)return null;const{uniqueId:i,secUid:n}=e,a=(0,Mv.yl)({uniqueId:i,secUid:n});return(0,o.jsx)(ex.rU,Object.assign({to:a,onClick:t},{children:e.uniqueId}),void 0)},rx=(0,j.memo)((function({item:e}){var t,i,n,a,r,s,l;const d=(0,V.mp)(Wo.z,{selector:t=>{var i,o;return t.users[null!==(o=null===(i=e.at.user_info)||void 0===i?void 0:i.unique_id)&&void 0!==o?o:""]},dependencies:[e]}),c=e.at.aweme,p=`/@${null==c?void 0:c.author.uid}/video/${null==c?void 0:c.aweme_id}`,u=(0,Mv.yl)({uniqueId:null!==(t=null==d?void 0:d.uniqueId)&&void 0!==t?t:"",secUid:null==d?void 0:d.secUid}),{schema_url:g}=e.at,m=(null!==(i=null==g?void 0:g.match(/cid=(\d+)/))&&void 0!==i?i:[])[1],h=(null!==(n=null==g?void 0:g.match(/detail\/(\d+)/))&&void 0!==n?n:[])[1],_=(0,j.useMemo)((()=>{if(m)return{browserMode:!0,cid:m,vid:h}}),[m,h]),v=Lf({vid:null==c?void 0:c.aweme_id,authorId:null==c?void 0:c.author.uid}),y=Of({uniqueId:null==d?void 0:d.uniqueId,onClick:yi.UW,enter_method:"click_head"}),b=Of({uniqueId:null==d?void 0:d.uniqueId,onClick:yi.UW,enter_method:"click_name"}),f=Tf({href:`${p}?browserMode=1`,state:_,shouldUsePush:!0,beforeStart:(0,j.useCallback)((()=>{v(),m&&Ty.To.setItem("highlight_comment",{id:m,groupId:h,show:!0})}),[m,v,h])}),x=(0,j.useCallback)((e=>{e.stopPropagation(),Zo.W.handleEnterVideo({enter_method:"click_noti",group_id:null==c?void 0:c.aweme_id,to_group_id:null==c?void 0:c.aweme_id,to_author_id:null==c?void 0:c.author.uid})}),[null==c?void 0:c.author.uid,null==c?void 0:c.aweme_id]);return d?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:f},{children:[(0,o.jsx)(Tn.v,Object.assign({to:u,onClick:y},{children:(0,o.jsx)(Ef,{size:48,src:d.avatarThumb},void 0)}),void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Uf,Object.assign({"data-e2e":"inbox-title",to:u,onClick:b},{children:d.uniqueId}),void 0),(0,o.jsx)(sx,{item:e},void 0)]},void 0),(0,o.jsx)(Tn.v,Object.assign({to:p,onClick:x},{children:(0,o.jsx)(Rf,{style:{backgroundImage:`url(${null===(l=null===(s=null===(r=null===(a=e.at.aweme)||void 0===a?void 0:a.video)||void 0===r?void 0:r.cover)||void 0===s?void 0:s.url_list)||void 0===l?void 0:l[0]})`}},void 0)}),void 0)]}),void 0):(0,eo.G)(["user"])})),sx=({item:e})=>{var t;const{t:i,timeTranslator:n}=(0,sv.e)(),{create_time:a,at:r}=e,{sub_type:s,content:l,reply_comment:d}=r,c=(0,o.jsxs)(o.Fragment,{children:["",n(1e3*Number(a))]},void 0);return 1===s?(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_mentioned_you_in_a_video").replace(/%(s|#)/g,""),c]}),void 0):2===s?(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(qf,{children:i("Inbox_mentioned_you_in_a_comment").replace("%@"," ").replace("%#","")+l},void 0),c]}),void 0):5===s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(qf,{children:i("Inbox_replied_to_your_comment").replace("%s","")+l},void 0),c]}),void 0),(0,o.jsx)(Gf,{children:null!==(t=null==d?void 0:d.text)&&void 0!==t?t:""},void 0)]},void 0):null},lx=(0,j.memo)((function({item:e,onLikeClick:t,onReportInboxClick:i}){const n=(0,j.useCallback)((e=>{t(e)}),[t]);return tb(e)?(0,o.jsx)(Jf,{item:e},void 0):ib(e)?(0,o.jsx)(tx,{item:e,onClick:n},void 0):ob(e)?(0,o.jsx)($f,{item:e},void 0):nb(e)?(0,o.jsx)(Qf,{item:e},void 0):ab(e)?(0,o.jsx)(rx,{item:e},void 0):rb(e)?(0,o.jsx)(Cf,{item:e,onClick:i},void 0):null})),dx=(0,j.memo)((function({uniqueId:e}){var t;const i=(0,ni.Q)(),n=(0,V.mp)(Wo.z,{selector:t=>t.users[e],dependencies:[e]}),a=(0,V.qj)(cb),r=(0,j.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),a.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==n?void 0:n.id})}),[a,e,null==n?void 0:n.id]),s=(0,Mv.yl)({uniqueId:null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",secUid:null==n?void 0:n.secUid}),l=Tf({href:s,shouldUsePush:!0,beforeStart:Of({uniqueId:null==n?void 0:n.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0})});return n?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(Ef,{size:48,src:n.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Nf,Object.assign({"data-e2e":"inbox-title",href:s,onClick:yi.PF,"data-method":"click_name"},{children:n.uniqueId}),void 0),(0,o.jsx)(Wf,{children:n.nickname},void 0),(0,o.jsxs)(Hf,{children:[(0,o.jsx)(Zf,Object.assign({size:"tiny",onClick:r(1)},{children:i("delete")}),void 0),(0,o.jsx)(Zf,Object.assign({"data-e2e":"inbox-request-accept",size:"tiny",buttonTheme:"primary",onClick:r(0)},{children:i("inbox_request_accept")}),void 0)]},void 0)]},void 0)]}),void 0):(0,eo.G)(["user"])}));var cx=i(89442);const px=(0,le.Z)("div",{target:"e11z9zg00"})({flex:"1 1 auto",overflow:"auto"},"label:DivInboxContentContainer;"),ux=(0,le.Z)("p",{target:"e11z9zg01"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"TextTertiary"})),{padding:"0 16px",marginTop:"8px"},"label:PTimeGroupTitle;"),gx=(0,le.Z)(Tn.v,{target:"e11z9zg02"})({display:"block",width:"54px",height:"72px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px",margin:"auto"},"label:StyledAnchor;"),mx=(0,le.Z)("p",{target:"e11z9zg03"})((({theme:e})=>(0,de.GI)({theme:e,typography:"H6",color:"TextTertiary"})),de.wj,{padding:"8px 48px 2px"},"label:PCommentText;"),hx=(0,le.Z)("div",{target:"e11z9zg04"})((({theme:{colors:e}})=>({height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)",margin:"8px 16px"})),"label:DivSplit;"),_x=(0,le.Z)("div",{target:"e11z9zg05"})({cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"8px"},(({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"16px",marginEnd:"auto"})),"label:DivBack;"),vx=(0,le.Z)(cx.Z,{target:"e11z9zg06"})((({theme:{direction:e}})=>"ltr"===e?null:{transform:"rotate(180deg)"}),"label:StyledChevronLeftOffset;"),yx=(0,le.Z)("div",{target:"e11z9zg07"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3"})),{padding:"8px 24px 8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},"label:DivFollowReqEntranceContainer;"),bx=(0,le.Z)("span",{target:"e11z9zg08"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:SpanHintContainer;"),fx=(0,le.Z)("i",{target:"e11z9zg09"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"8px",background:e.Primary},(0,de.YJ)({direction:t,marginEnd:"8px"})]),"label:IDot;"),xx=(0,le.Z)("span",{target:"e11z9zg010"})((({theme:{colors:e,direction:t}})=>[{color:e.TextTertiary,marginRight:"8px"},(0,de.YJ)({direction:t,marginEnd:"8px"})]),"label:SpanHintText;"),kx=(0,j.memo)((function(e){const t=(0,ni.Q)();return(0,o.jsxs)(_x,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(cx.Z,{},void 0),(0,o.jsx)("span",{children:t("Back")},void 0)]}),void 0)})),wx=(0,j.memo)((function(e){const{item:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kx,{onClickBack:e.onClickBack},void 0),(0,o.jsx)(px,Object.assign({"data-e2e":"inbox-list"},{children:t.users.map((e=>(0,o.jsx)(dx,{uniqueId:e},e)))}),void 0)]},void 0)}));var Sx=i(99122);const jx=(0,j.memo)((function(e){const{total:t}=e,i=(0,ni.Q)(),{colors:n}=(0,a.u)();return(0,o.jsxs)(yx,Object.assign({"data-e2e":"inbox-follow-request",onClick:e.onClick},{children:[(0,o.jsx)("h4",{children:i("Inbox_Follow_requests")},void 0),(0,o.jsxs)(bx,{children:[(0,o.jsx)(fx,{},void 0),(0,o.jsx)(xx,{children:t},void 0),(0,o.jsx)(Sx.Z,{fill:n.TextTertiary,width:12,height:12},void 0)]},void 0)]}),void 0)})),Cx=(0,j.memo)((function({uniqueId:e}){var t;const i=(0,V.mp)(Wo.z,{selector:t=>t.users[e],dependencies:[e]}),{handleFollow:n,isFollowing:a,text:r,relation:s}=(0,Kf.w)({uniqueId:e,prevent:!0,teaParams:{enter_from:"homepage_message"}}),l=(0,Mv.yl)({uniqueId:null!==(t=null==i?void 0:i.uniqueId)&&void 0!==t?t:"",secUid:null==i?void 0:i.secUid}),d=Tf({href:l,shouldUsePush:!0,beforeStart:Of({uniqueId:e,enter_method:"click_noti",shouldHandleDom:!0})});return i?(0,o.jsxs)(If,Object.assign({"data-e2e":"inbox-list-item",onClick:d},{children:[(0,o.jsx)(Ef,{size:48,src:i.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(Df,{children:[(0,o.jsx)(Nf,Object.assign({"data-e2e":"inbox-title",href:l,onClick:yi.PF,"data-method":"click_name"},{children:i.uniqueId}),void 0),(0,o.jsx)(Wf,Object.assign({"data-e2e":"inbox-content"},{children:i.nickname}),void 0)]},void 0),(0,o.jsxs)(Mf,Object.assign({onClick:n,size:"tiny",buttonTheme:a?"default":"primary"},{children:[2===s?(0,o.jsx)(Yf.Z,{},void 0):null,r]}),void 0)]}),void 0):(0,eo.G)(["user"])})),Px=(0,j.memo)((function(e){var t,i,n;const{item:a}=e,r=(0,ni.Q)(),[{loading:s,users:l},d]=(0,V.b7)(cb,{selector:e=>e.diggList,dependencies:[]});(0,j.useEffect)((()=>{var e,t;return d.fetchDiggListData({ref_id:null!==(t=null===(e=a.digg.comment)||void 0===e?void 0:e.cid)&&void 0!==t?t:a.digg.aweme.aweme_id}),()=>{d.setDiggList([]),d.setDiggListLoading(!1)}}),[d,a.digg.aweme.aweme_id,null===(t=a.digg.comment)||void 0===t?void 0:t.cid]);const c=(0,j.useCallback)((()=>s&&!l.length?(0,o.jsx)(Vt.g,{size:"small",center:!0},void 0):l.map((e=>(0,o.jsx)(Cx,{uniqueId:e},e)))),[s,l]),p=(0,Pf.ot)(`/@${a.digg.aweme.author.uid}/video/${a.digg.aweme.aweme_id}`),u=(0,j.useCallback)((()=>{location.href=p}),[p]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_x,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(vx,{},void 0),(0,o.jsx)("span",{children:r("Back")},void 0)]}),void 0),(0,o.jsxs)(px,Object.assign({"data-e2e":"inbox-list"},{children:[(0,o.jsx)(gx,{to:p,style:{backgroundImage:`url(${null===(i=a.digg.aweme.video.cover.url_list)||void 0===i?void 0:i[0]})`},onClick:u},void 0),(null===(n=a.digg.comment)||void 0===n?void 0:n.text)&&(0,o.jsx)(mx,{children:a.digg.comment.text},void 0),(0,o.jsx)(hx,{},void 0),c()]}),void 0)]},void 0)}));var Tx;!function(e){e[e.New=0]="New",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.ThisWeek=3]="ThisWeek",e[e.ThisMonth=4]="ThisMonth",e[e.Previous=5]="Previous"}(Tx||(Tx={}));const Ox={0:"Inbox_New",1:"Inbox_Today",2:"Inbox_Yesterday",3:"Inbox_This_Week",4:"Inbox_This_Month",5:"Inbox_Previous"},Lx=[0,1,6,(new Date).getDate()].map((e=>function(e=0){return(new Date).setHours(0,0,0,0)/1e3-86400*e}(e))),Ix=e=>{if(!e.has_read)return 0;const t=Lx.findIndex((t=>t<e.create_time));return-1===t?5:t+1},Ax=(0,j.memo)((function(e){var t;const{activeGroup:i,item:n,likeItem:a,reportInboxList:r,onLikeItemChange:s,followItem:l,showFollow:d,onFollowChange:c,onHitBottom:p,onReportInboxClick:u}=e,g=(0,te.fz)(Xy),m=(0,j.useCallback)((()=>{s(null)}),[s]),h=(0,j.useRef)(null);(0,mf.s)({elementRef:h,onHitBottom:p,threshold:100});const _=(0,j.useCallback)((()=>{c(!1)}),[c]),v=(0,j.useCallback)((()=>{c(!0),g.handleEnterFollow({request_cnt:Number(l.total)})}),[l.total,c,g]);return a?(0,o.jsx)(Px,{item:a,onClickBack:m},void 0):d?(0,o.jsx)(wx,{onClickBack:_,item:l},void 0):(0,o.jsxs)(px,Object.assign({"data-e2e":"inbox-list",ref:h},{children:[500===i&&Boolean(l.total)&&(0,o.jsx)(jx,{onClick:v,total:l.total},void 0),(0,o.jsx)(Mx,{item:n,onLikeItemChange:e.onLikeItemChange,reportInboxList:r,activeGroup:i,onReportInboxClick:u},void 0),Boolean(null===(t=n.notice_list)||void 0===t?void 0:t.length)&&n.loading&&(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)]}),void 0)})),Ex={preventDefault:gf()},Mx=(0,j.memo)((function({item:e,onLikeItemChange:t,activeGroup:i,reportInboxList:n,onReportInboxClick:a}){var r;const s=(0,ni.Q)(),l=n[0],d=(0,te.fz)(Xy),c=(0,hf.e)(),p=(0,j.useCallback)((e=>{var o,n,a;if(3===(null==e?void 0:e.digg.digg_type)||1===(null===(o=null==e?void 0:e.digg.from_user)||void 0===o?void 0:o.length)){const t=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`;let i;return 3===e.digg.digg_type&&(null===(n=e.digg.comment)||void 0===n?void 0:n.cid)&&(Ty.To.setItem("highlight_comment",{id:e.digg.comment.cid,groupId:e.digg.aweme.aweme_id,show:!0}),i={browserMode:!0,cid:e.digg.comment.cid,vid:e.digg.aweme.aweme_id}),Zo.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid}),void c(Ex,{href:t,state:i,shouldUsePush:!0})}t(e),d.handleEnterFold({tab_name:500===i?"all":"likes",group_id:null!==(a=null==e?void 0:e.digg.aweme.aweme_id)&&void 0!==a?a:""})}),[i,c,t,d]),u=(0,j.useMemo)((()=>{var t;if(500!==i||!l)return e.notice_list;const o=Ix(l),n=(null!==(t=e.notice_list)&&void 0!==t?t:[]).slice();for(let e=0;e<n.length;e++){const t=n[e],i=Ix(t);if(0===o&&0!==i)return n.splice(e,0,l),n;if(l.create_time>t.create_time)return n.splice(e,0,l),n}return n.push(l),n}),[i,l,e.notice_list]);if(e.loading&&!(null===(r=e.notice_list)||void 0===r?void 0:r.length))return(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0);if(!(null==u?void 0:u.length))return(0,o.jsx)(jf,{type:i},void 0);let g=Ix(null==u?void 0:u[0]);return(0,o.jsx)(o.Fragment,{children:null==u?void 0:u.map(((e,t)=>{let i=null;return(0===t||0===g&&e.has_read||e.create_time<Lx[g-1])&&(g=Ix(e),i=(0,o.jsx)(ux,{children:s(Ox[g])},g)),(0,o.jsxs)(o.Fragment,{children:[i,(0,o.jsx)(lx,{item:e,onLikeClick:p,onReportInboxClick:a},e.nid)]},void 0)}))},void 0)})),Rx=(0,le.Z)("div",{target:"e1bp8k4k0"})((({theme:{direction:e}})=>[{paddingTop:"24px",flex:"0 0 auto"},(0,de.YJ)({direction:e,paddingStart:"16px"})]),"label:DivInboxHeaderContainer;"),Fx=(0,le.Z)("h4",{target:"e1bp8k4k1"})((({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H4",color:"TextPrimary"})),"label:H4InboxTitle;"),Dx=(0,le.Z)("div",{target:"e1bp8k4k2"})((({theme:e})=>(0,de.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"})),{marginTop:"16px",display:"flex",flexDirection:"row",flexWrap:"wrap"},"label:DivGroupContainer;"),Bx=e=>({0:{background:e.BGPlaceholderDefault,":hover":{background:e.ShadowPrimary}},1:{color:e.BGPrimary,background:e.TextPrimary}}),zx=(0,le.Z)("span",{target:"e1bp8k4k3"})((({theme:{colors:e,direction:t},active:i})=>[Bx(e)[Number(i)],{":not(:last-child)":[(0,de.YJ)({direction:t,marginEnd:"8px"})]}]),{display:"block",padding:"2px 8px",marginBottom:"12px",textAlign:"center",cursor:"pointer",borderRadius:"12px",transition:"all 300ms"},"label:SpanGroupItem;"),Nx={500:"Inbox_All",3:"Inbox_Likes",2:"Inbox_Comments",6:"Inbox_Mentions",7:"Followers"},Ux=[500,3,2,6,7],Wx=["all","likes","comments","mentions","followers"],qx=(0,j.memo)((function({value:e,onChange:t}){const i=(0,ni.Q)(),n=(0,j.useCallback)((e=>()=>{t(e)}),[t]);return(0,o.jsxs)(Rx,{children:[(0,o.jsx)(Fx,{children:i("Inbox_Notifications")},void 0),(0,o.jsx)(Dx,Object.assign({"data-e2e":"inbox-bar"},{children:Ux.map(((t,a)=>(0,o.jsx)(zx,Object.assign({"data-e2e":Wx[a],active:t===e,onClick:n(t)},{children:i(Nx[t])}),t)))}),void 0)]},void 0)})),Gx=(0,le.Z)("div",{target:"e32s1fi0"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;"),Hx=(0,j.memo)((function(){const[e,t]=(0,j.useState)("main"),i=(0,j.useCallback)((()=>{t("report-inbox")}),[]),n=(0,j.useCallback)((()=>{t("main")}),[]),a=(0,V.mp)(K.G,{selector:e=>{var t,i,o,n,a;return{uid:null!==(o=null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uid)&&void 0!==o?o:"",did:null!==(a=null===(n=e.appContext)||void 0===n?void 0:n.wid)&&void 0!==a?a:""}},dependencies:[]}),r=(0,V.mp)(vy,{selector:e=>e.reportInbox.noticeList,dependencies:[]}),[{activeGroup:s,noticeList:l,followRequest:d},c]=(0,V.b7)(cb,{selector:e=>{const{activeGroup:t,noticeList:i,followRequest:o}=e;return{activeGroup:t,noticeList:i,followRequest:o}},dependencies:[]}),[p,u]=(0,j.useState)(null),[g,m]=(0,j.useState)(!1),h=(0,j.useCallback)((e=>{c.changeActiveGroup(e),u(null),m(!1)}),[c]);(0,j.useEffect)((()=>{g||setTimeout((()=>{c.fetchNoticeFollowRequest(Object.assign(Object.assign({},a),{refresh:!0}))}),2e3)}),[c,a,g]),(0,j.useEffect)((()=>{d.has_more||0!==d.total?d.has_more&&d.users.length<=10&&c.fetchNoticeFollowRequest(a):m(!1)}),[c,d.has_more,d.total,d.users.length,a]);const _=(0,j.useRef)(!0),v=(0,j.useCallback)((()=>{_.current||(_.current=!0,c.fetchNoticeData())}),[c]);return(0,j.useEffect)((()=>{_.current=Boolean(l.loading)}),[l.loading]),"report-inbox"===e?(0,o.jsx)(pf,{onClose:n},void 0):(0,o.jsxs)(Gx,Object.assign({"data-e2e":"inbox-notifications"},{children:[(0,o.jsx)(qx,{value:s,onChange:h},void 0),(0,o.jsx)(Ax,{activeGroup:s,item:l,onHitBottom:v,likeItem:p,onLikeItemChange:u,followItem:d,showFollow:g,onFollowChange:m,reportInboxList:r,onReportInboxClick:i},void 0)]}),void 0)}));var Zx=i(35785),$x=i(27558),Vx=i(1723);const Qx=(0,Vo.Z)("div",{target:"e18kkhh40"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"16px"})),{position:"relative"},"label:DivHeaderInboxContainer;");Qx.defaultProps=Object.assign(Object.assign({},Qx.defaultProps),{"data-e2e":"inbox-icon"});const Yx={cursor:"pointer",display:"block"},Kx=(0,Vo.Z)(Zx.Z,{target:"e18kkhh41"})(Yx,"label:StyledInboxIcon;"),Jx=(0,Vo.Z)($x.Z,{target:"e18kkhh42"})(Yx,"label:StyledInboxIconActive;"),Xx=(0,Vo.Z)("sup",{target:"e18kkhh43"})((({long:e,theme:t})=>[(0,de.GI)({theme:t,fontFamily:"Proxima",typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,de.YJ)({direction:t.direction,start:"16px"}),{background:t.colors.Primary,minWidth:"20px",height:"20px",display:"flex",justifyContent:"center",borderRadius:"10px",position:"absolute",top:"-20%"},e?{padding:"0 6px"}:{}]),"label:SupBadge;"),ek=(0,Vo.Z)("div",{target:"e18kkhh44"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P4",color:"ConstTextInverse",fontWeight:"semiBold"})),{display:"flex",padding:"12px",fontSize:"12px"},"label:DivTipWrapper;"),tk=(0,Vo.Z)("span",{target:"e18kkhh47"})({display:"flex",alignItems:"center",justifyContent:"center","& + &":{marginLeft:"16px"},b:{marginLeft:"2px",fontWeight:600}},"label:SpanTipItem;"),ik=(0,Vo.Z)(Vx.Z,{target:"e18kkhh48"})({position:"absolute",top:"-8px"},(({theme:{direction:e}})=>(0,de.YJ)({direction:e,end:"70px"})),"label:StyledArrow;"),ok=(0,Vo.Z)("div",{target:"e18kkhh49"})((({theme:{colors:e,direction:t},state:i,duration:o})=>[{display:i===Xa.Wj?"none":"block",position:"absolute",width:"376px",height:"640px",top:"45px",background:e.BGSecondary,borderRadius:"8px",boxShadow:"0 -4px 32px rgba(0, 0, 0, 0.12)",transition:`all ${o}ms linear`,zIndex:1e3,opacity:Number(i===Xa.cn)},(0,de.YJ)({direction:t,end:"-66px"})]),"label:DivHeaderInboxWrapper;"),nk={width:16,height:16},ak={2:(0,o.jsx)(Zy.Z,Object.assign({},nk),void 0),3:(0,o.jsx)($y.Z,Object.assign({},nk),void 0),6:(0,o.jsx)(Vy.Z,Object.assign({},nk),void 0),7:(0,o.jsx)(Qy.Z,Object.assign({},nk),void 0)},rk=(0,j.memo)((function(){const e=(0,ni.Q)(),t=(0,a.u)(),{pathname:i}=(0,P.TH)(),[{noticeList:n,reportInboxNoticeCount:r},s]=(0,V.b7)(vy,{selector:e=>({noticeList:e.noticeCount,reportInboxNoticeCount:e.reportInbox.count}),dependencies:[]}),[{tooltipPriority:l},d]=(0,V.b7)(My),{totalText:c,totalLong:p,countList:u,isShowTotal:g}=(0,j.useMemo)((()=>{const e=n.reduce(((e,{count:t})=>e+t),0);return{isShowTotal:e>0,totalText:(0,J.a1)(e+r),totalLong:e+r>10,countList:n.filter((e=>e.count>=0))}}),[n,r]),m=function(){const[e,t]=(0,j.useState)(!1);return(0,j.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}(),[h,_]=(0,j.useState)(!1);(0,j.useEffect)((()=>{let e;return g&&2===l&&(_(!0),e=window.setTimeout((()=>{_(!1),d.setTooltipPriority(5)}),5e3)),()=>{e&&clearTimeout(e)}}),[l,g,d]);const{handleEnter:v}=function({showTip:e}){const t=(0,j.useRef)(0),i=(0,te.fz)(Xy),{total:o,countList:n}=(0,V.mp)(vy,{dependencies:[],selector:e=>{const t=e.noticeCount;return{total:t.reduce(((e,{count:t})=>e+t),0),countList:t.filter((e=>e.count>=0))}}});(0,j.useEffect)((()=>{t.current=Date.now()}),[]);const a=(0,j.useCallback)((()=>{const e=Date.now()-t.current;Zo.W.handleEnterMessage({show_cnt:o,enter_within_30s:e<3e4?1:0})}),[o]);return(0,j.useEffect)((()=>{if(e){const e=n.reduce(((e,{group:t,count:i})=>{switch(t){case 2:e.comment_cnt=i;break;case 3:e.like_cnt=i;break;case 6:e.mention_cnt=i;break;case 7:e.follower_cnt=i}return e}),{like_cnt:0,comment_cnt:0,mention_cnt:0,follower_cnt:0});i.handlePopShow(e)}}),[n,i,e]),{handleEnter:a}}({showTip:h}),[y,b]=(0,j.useState)(!1),f=(0,j.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),b(!y),s.setNoticeCount([]),s.setReportInboxNoticeCount(0),y||v()}),[s,v,y]);(0,j.useEffect)((()=>{-1!==location.search.indexOf("open_inbox=1")&&f()}),[]);const x=(0,j.useMemo)((()=>y?Jx:Kx),[y]),{showModal:k,hideModal:w}=(0,Xr.J)(),S=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]);(0,j.useEffect)((()=>{s.fetchNoticeCount(),s.fetchReportInbox()}),[s]);const C=(0,j.useRef)(null),T=(0,j.useRef)(!1),O=(0,j.useCallback)((()=>{k(),T.current=!0}),[k]),L=(0,j.useCallback)((()=>{w(),T.current=!1}),[w]);(0,j.useEffect)((()=>{const e=()=>{T.current||b(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,j.useEffect)((()=>{y&&b(!1)}),[i]);const I=(0,j.useRef)(!1),A=(0,V.qj)(cb);return(0,j.useEffect)((()=>{y&&!I.current&&(A.fetchNoticeData(),I.current=!0)}),[A,y]),(0,o.jsxs)(Qx,Object.assign({onClick:f},{children:[y?(0,o.jsx)(x,{width:32,height:32},void 0):(0,o.jsx)(gy.u,Object.assign({placement:"bottom",overlay:e("Inbox")},{children:(0,o.jsx)("span",{children:(0,o.jsx)(x,{width:32,height:32},void 0)},void 0)}),void 0),(g||r>0)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hn.G,Object.assign({active:h,placement:u.length>2?"bottomRight":"bottom",margin:"-54px",arrowMargin:"52px",backgroundColor:t.colors.Primary},{children:(0,o.jsx)(ek,{children:u.filter((({count:e})=>e>0)).map((({group:e,count:t})=>(0,o.jsxs)(tk,{children:[ak[e],(0,o.jsx)("b",{children:(0,J.BT)(t)},void 0)]},e)))},void 0)}),void 0),!h&&(0,o.jsx)(Xx,Object.assign({long:p},{children:c}),void 0)]},void 0),m&&(0,o.jsx)(Xa.ZP,Object.assign({timeout:200,in:y,nodeRef:C},{children:e=>(0,o.jsxs)(ok,Object.assign({ref:C,state:e,duration:200,onClick:S,onMouseEnter:O,onMouseLeave:L},{children:[(0,o.jsx)(ik,{width:24,height:8,fill:t.colors.BGSecondary},void 0),(0,o.jsx)(Hx,{},void 0)]}),void 0)}),void 0)]}),void 0)})),sk=({children:e})=>{var t;const[i,n]=(0,j.useState)(!1),r=(0,te.fz)(oo),{direction:s}=(0,a.u)(),l=(0,j.useMemo)((()=>({offset:"ltr"===s?[30,20]:[-30,20]})),[s]),d=(0,j.useMemo)((()=>"ltr"===s?"bottomRight":"bottomLeft"),[s]),{tooltipPriority:c}=(0,V.mp)(My),p=(0,ne.L)((()=>["region","liveCenterConfig"]),[]),u=null!==(t=null==p?void 0:p.region)&&void 0!==t?t:"",g=(0,j.useMemo)((()=>{var e,t;return(null!==(t=null===(e=null==p?void 0:p.liveCenterConfig)||void 0===e?void 0:e.showCreatorHubRegion)&&void 0!==t?t:[]).includes(u)}),[p,u]),m=(0,j.useMemo)((()=>({width:180,padding:12,fontSize:14})),[]),h=(0,ni.Q)();(0,j.useEffect)((()=>{if(g){const e=r.getLiveCreatorHubPopup()&&4===c;n(e)}}),[g,r,c]);const _=(0,j.useCallback)((e=>{e||(n(!1),r.setLiveCreatorHubPopup(!0))}),[r]);return(0,o.jsx)(gy.u,Object.assign({visible:i,trigger:"click",tooltipTheme:"blue",placement:d,align:l,overlay:h("live_creator_hub_home_desc",{},"Explore the endless possibilities of TikTok LIVE. It's the place to be for real-time fun, expression, creativity, and connection."),overlayInnerStyle:m,onVisibleChange:_},{children:e}),void 0)};var lk=i(92396);const dk=(0,Vo.Z)("div",{target:"e5vohn00"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),ck=(0,Vo.Z)("h3",{target:"e5vohn01"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),pk=(0,Vo.Z)("p",{target:"e5vohn02"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),uk=(0,Vo.Z)("div",{target:"e5vohn03"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),gk=(0,Vo.Z)(Sn.rU,{target:"e5vohn04"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),(({theme:e})=>(0,de.YJ)({direction:e.direction,marginStart:"16px"})),{color:"#ffffff!important",cursor:"pointer","&:hover":{textDecoration:"none"}},"label:StyledLink;"),mk=(0,Vo.Z)("button",{target:"e5vohn05"})(de.Ph,(({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),hk=(0,j.memo)((({uniqueId:e,secUid:t,userPopupActive:i})=>{const{colors:n,direction:r}=(0,a.u)(),s=(0,ni.Q)(),{pathname:l}=(0,P.TH)(),d=(0,Re.Xq)(l),c="fyp"===d?"homepage_hot_tooltip":`${d}_tooltip`,[p,u]=(0,j.useState)(!1),[{tooltipPriority:g},m]=(0,V.b7)(My),h=(0,Re.bf)(l)&&l.replace("/@","")===e,_=(0,j.useRef)(!1);(0,j.useEffect)((()=>{let e;return p&&(e=window.setTimeout((()=>{_.current=!0,lk.p.handleCloseProfileTooltip({enter_from:c,close_method:"auto_cancel"}),u(!1)}),5e3)),()=>clearTimeout(e)}),[p]),(0,j.useEffect)((()=>()=>{p&&!_.current&&lk.p.handleCloseProfileTooltip({enter_from:c,close_method:"other"})}),[p]),(0,j.useEffect)((()=>{(0,yi.le)(O.S0)||h||3!==g?(u(!1),3===g&&m.setTooltipPriority(4)):(u(!0),lk.p.handleShowProfileTooltip({enter_from:c}),(0,yi.D$)(O.S0,"1"))}),[g]),(0,j.useEffect)((()=>{i&&p&&(_.current=!0,lk.p.handleCloseProfileTooltip({enter_from:c,close_method:"other"}),u(!1))}),[i,c,p]);const v=(0,j.useCallback)((()=>{lk.p.handleCloseProfileTooltip({enter_from:c,close_method:"edit_profile"}),lk.p.handleClickEditProfile({enter_from:c}),(0,yi.D9)(O.OB,c),_.current=!0,u(!1)}),[c]),y=(0,j.useCallback)((()=>{_.current=!0,u(!1),lk.p.handleCloseProfileTooltip({enter_from:c,close_method:"cancel"})}),[c]),b=(0,Pf.ot)({pathname:(0,Mv.yl)({uniqueId:e,secUid:t}),search:{}}),f=(0,j.useMemo)((()=>({pathname:b})),[b]),x="ltr"===r?"bottomRight":"bottomLeft";return(0,o.jsx)(Hn.G,Object.assign({active:p,backgroundColor:n.ConstSecondary2,placement:x,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(dk,{children:[(0,o.jsx)(ck,{children:s("editprofile_feedtooltip_title")},void 0),(0,o.jsx)(pk,{children:s("editprofile_feedtooltip_subtitle")},void 0),(0,o.jsxs)(uk,{children:[(0,o.jsx)(mk,Object.assign({onClick:y},{children:s("editprofile_close")}),void 0),(0,o.jsx)(gk,Object.assign({to:f,onClick:v},{children:s("editprofile_editprofile")}),void 0)]},void 0)]},void 0)}),void 0)}));var _k,vk=i(11242);!function(e){e.LiveRechargeShow="livesdk_recharge_show",e.LiveRechargeClick="livesdk_recharge_click",e.LiveRechargeCashierShow="livesdk_web_cashier_show",e.LiveRechargePay="livesdk_recharge_pay",e.LiveRechargeSuccess="livesdk_recharge_success",e.LiveRechargeFailed="livesdk_recharge_failed",e.LiveBillingAddressClick="livesdk_billing_address_click",e.LiveWebGetCoinShow="livesdk_web_getcoin_show",e.LiveWebGetCoinClick="livesdk_web_getcoin_click",e.LiveWebPayFeedbackShow="livesdk_web_pay_feedback_show",e.LiveWebPayFeedbackClick="livesdk_web_pay_feedback_click",e.LiveWebPayMethodClick="livesdk_web_pay_method_click",e.LiveWebLinkEWalletShow="livesdk_link_ewallet_show",e.LiveWebLinkEWalletClick="livesdk_link_ewallet_click",e.LiveWebLinkEWalletSuccess="livesdk_link_ewallet_success",e.LiveWebLinkEWalletFailed="livesdk_link_ewallet_failed",e.LiveRechargeExchangeEntranceShow="livesdk_recharge_exchange_entrance_show",e.LiveRechargeExchangeEntranceClick="livesdk_recharge_exchange_entrance_click",e.LiveRechargeExchangeClick="livesdk_recharge_exchange_click",e.LiveRechargeExchangePopupShow="livesdk_recharge_exchange_popup_show",e.LiveRechargeExchangeConfirm="livesdk_recharge_exchange_confirm",e.LiveRechargeExchangeCancel="livesdk_recharge_exchange_cancel",e.LiveRechargeExchangeSuccess="livesdk_recharge_exchange_success",e.LiveRechargeExchangeFailed="livesdk_recharge_exchange_failed",e.LiveRechargeLogoutClick="livesdk_logout_click",e.LiveBillingAddressShow="livesdk_billing_address_show",e.LiveBillingAddressConfirm="livesdk_billing_address_confirm",e.LiveBillingAddressCancel="livesdk_billing_address_cancel",e.LiveBillingAddressFailed="livesdk_billing_address_failed",e.LiveRechargeNoticeShow="livesdk_webapp_top_notice_show",e.LiveRechargeNoticeClick="livesdk_webapp_top_notice_click",e.LiveRechargeNoticeClose="livesdk_webapp_top_notice_close",e.LiveAbnormalFeatureToast="livesdk_feature_abnormal_toast",e.LiveKycReminderPopup="livesdk_kyc_reminder_popup",e.LiveKycReminderPopupClick="livesdk_kyc_reminder_popup_click",e.LiveKycPopupShow="livesdk_kyc_popup_show",e.LiveKycPopupClick="livesdk_kyc_popup_click",e.LivePaymentBindShow="livesdk_payment_bind_show",e.LivePaymentBindClick="livesdk_payment_bind_click",e.LivePaymentBindSuccess="livesdk_payment_bind_success",e.LivePaymentBindFail="livesdk_payment_bind_fail",e.LiveRechargePackageShow="livesdk_recharge_package_show"}(_k||(_k={}));let yk=class{constructor(){this.handleRechargeShow=e=>{re.W.event("livesdk_recharge_show",e)},this.handleRechargeClick=e=>{re.W.event("livesdk_recharge_click",e)},this.handleCashierShow=e=>{re.W.event("livesdk_web_cashier_show",e)},this.handlePayAction=e=>{re.W.event("livesdk_recharge_pay",e)},this.handleRechargeSuccess=e=>{re.W.event("livesdk_recharge_success",e)},this.handleRechargeFailed=e=>{re.W.event("livesdk_recharge_failed",e)},this.handleBillingAddressClick=e=>{re.W.event("livesdk_billing_address_click",e)},this.handleLiveWebGetCoinShow=e=>{re.W.event("livesdk_web_getcoin_show",e)},this.handleLiveWebGetCoinClick=e=>{re.W.event("livesdk_web_getcoin_click",e)},this.handleRechargeFeedbackShow=e=>{re.W.event("livesdk_web_pay_feedback_show",e)},this.handleRechargeFeedbackClick=e=>{re.W.event("livesdk_web_pay_feedback_click",e)},this.handleRechargeCashierSelectPaymentMethod=e=>{re.W.event("livesdk_web_pay_method_click",e)},this.handleRechargeCashierEWalletShow=e=>{re.W.event("livesdk_link_ewallet_show",e)},this.handleRechargeCashierEWalletClick=e=>{re.W.event("livesdk_link_ewallet_click",e)},this.handleRechargeCashierEWalletSuccess=e=>{re.W.event("livesdk_link_ewallet_success",e)},this.handleRechargeCashierEWalletFailed=e=>{re.W.event("livesdk_link_ewallet_failed",e)},this.handleExchangeEntranceShow=e=>{re.W.event("livesdk_recharge_exchange_entrance_show",e)},this.handleExchangeEntranceClick=e=>{re.W.event("livesdk_recharge_exchange_entrance_click",e)},this.handleExchangeClick=e=>{re.W.event("livesdk_recharge_exchange_click",e)},this.handleExchangePopupShow=e=>{re.W.event("livesdk_recharge_exchange_popup_show",e)},this.handleExchangeConfirm=e=>{re.W.event("livesdk_recharge_exchange_confirm",e)},this.handleExchangeCancel=e=>{re.W.event("livesdk_recharge_exchange_cancel",e)},this.handleExchangeSuccess=e=>{re.W.event("livesdk_recharge_exchange_success",e)},this.handleExchangeFailed=e=>{re.W.event("livesdk_recharge_exchange_failed",e)},this.handleRechargeLogoutClick=e=>{re.W.event("livesdk_logout_click",e)},this.handleBillingAddressShow=e=>{re.W.event("livesdk_billing_address_show",e)},this.handleBillingAddressConfirm=e=>{re.W.event("livesdk_billing_address_confirm",e)},this.handleBillingAddressCancel=e=>{re.W.event("livesdk_billing_address_cancel",e)},this.handleBillingAddressFailed=e=>{re.W.event("livesdk_billing_address_failed",e)},this.handleNoticeShow=e=>{re.W.event("livesdk_webapp_top_notice_show",e)},this.handleNoticeClick=e=>{re.W.event("livesdk_webapp_top_notice_click",e)},this.handleNoticeClose=e=>{re.W.event("livesdk_webapp_top_notice_close",e)},this.handleAbnormalFeatureToast=e=>{re.W.event("livesdk_feature_abnormal_toast",e)},this.liveKycReminderPopup=e=>{re.W.event("livesdk_kyc_reminder_popup",e)},this.liveKycReminderPopupClick=e=>{re.W.event("livesdk_kyc_reminder_popup_click",e)},this.liveKycPopupShow=e=>{re.W.event("livesdk_kyc_popup_show",e)},this.liveKycPopupClick=e=>{re.W.event("livesdk_kyc_popup_click",e)},this.handlePaymentBindShow=e=>{re.W.event("livesdk_payment_bind_show",e)},this.handlePaymentBindClick=e=>{re.W.event("livesdk_payment_bind_click",e)},this.handlePaymentBindSuccess=e=>{re.W.event("livesdk_payment_bind_success",e)},this.handlePaymentBindFail=e=>{re.W.event("livesdk_payment_bind_fail",e)},this.handleRechargePackageShow=e=>{re.W.event("livesdk_recharge_package_show",e)}}};var bk;yk=(0,m.__decorate)([(0,ae.G)()],yk),function(e){e[e.SLARDAR=0]="SLARDAR",e[e.TEA=1]="TEA"}(bk||(bk={}));const fk={key:"rd_live_webapp_recharge_place_order_result_api_send",platform:0},xk={key:"rd_live_webapp_recharge_place_order_result_api_res",platform:0},kk={key:"rd_live_webapp_recharge_place_order_result_api_err",platform:0},wk={key:"rd_live_webapp_recharge_save_address_api_err",platform:0},Sk={key:"rd_live_webapp_recharge_get_permission_api_err",platform:0},jk={key:"rd_live_webapp_recharge_get_coins_api_err",platform:0},Ck={key:"rd_live_webapp_exchange_diamond_exchange_api_err",platform:0},Pk={key:"rd_live_webapp_exchange_diamond_exchange_api_success",platform:0},Tk={key:"rd_live_webapp_transaction_history_getTransactionHistoryList_api_err",platform:0},Ok={key:"rd_live_webapp_m_recharge_place_order_result_api_send",platform:0},Lk={key:"rd_live_webapp_m_recharge_place_order_result_api_res",platform:0},Ik={key:"rd_live_webapp_m_recharge_place_order_result_api_err",platform:0},Ak={key:"rd_live_webapp_m_recharge_save_address_api_err",platform:0},Ek={key:"rd_live_webapp_m_recharge_get_permission_api_err",platform:0},Mk={key:"rd_live_webapp_m_recharge_get_coins_api_err",platform:0},Rk={key:"rd_live_webapp_m_exchange_diamond_exchange_api_err",platform:0},Fk={key:"rd_live_webapp_m_exchange_diamond_exchange_api_success",platform:0},Dk={key:"rd_live_webapp_m_transaction_history_load_transaction_history_api_err",platform:0};let Bk=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleReport=(e,t)=>{switch(e.platform){case 0:this.service.emitEvent(e.key,this.defaultMetrics,t);break;case 1:re.W.event(e.key,null!=t?t:{});break;default:console.error(`rdLog platform ${e.platform} not registered`)}}}};Bk=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],Bk);const zk=e=>{const{count:t,realDot:i,keepDot:o,currentPrice:n}=e,a=t*n;if(0===a)return{showAmount:"0.00",localAmount:"0",total:0};let r=i-o,s=a,l=!1;for(;r>0;)s%10>0&&(l=!0),r--,s=Math.trunc(s/10);const d=(l?Number(s)+1:Number(s)).toString().split(""),c=i-o,p=d.splice(-c),u=p.length>0?`.${p.join("").padStart(o,"0")}`:".00",g=`${d.join("")||0}${u}`,m=g.toString().split("."),h=(m[1]||"").padEnd(o,"0").split("").slice(0,o).join("");return{showAmount:g,localAmount:`${m[0]}${h}`,total:a}},Nk=e=>{const{keepDot:t,currentPrice:i}=e,o=i,n=o.toString().split(""),a=n.splice(-t),r=a.length>0?`.${a.join("").padStart(t,"0")}`:".00";return{showAmount:`${n.join("")||0}${r}`,localAmount:o.toString(),total:o}},Uk=4005205,Wk=[42030,42031,42032,4005265,4005266,4005267,4005268,4005269,4005270,4005271];var qk;!function(e){e.GetPackagesError="live_sdk_get_packages_error",e.GetBasePackageError="live_sdk_get_basepackage_error",e.PlaceOrderError="live_sdk_place_exchange_order_error"}(qk||(qk={}));let Gk=class{constructor(e){this.service=e,this.defaultTag={where:"Exchange"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePackagesFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_packages_error",this.defaultMetrics,this.defaultTag)},this.handleBasePackageFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_basepackage_error",this.defaultMetrics,this.defaultTag)},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_exchange_order_error",this.defaultMetrics,this.defaultTag)}}};Gk=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],Gk);var Hk=i(31943),Zk=i.n(Hk),$k=i(98425),Vk=i.n($k);Zk().extend(Vk());const Qk=(e,t,i)=>{var o,n,a;let r=0;const s=(null==e?void 0:e.currency_price)&&null!==(o=null==e?void 0:e.currency_price[0].price)&&void 0!==o?o:0,l=(null==e?void 0:e.currency_price)&&null!==(n=null==e?void 0:e.currency_price[0].price_dot)&&void 0!==n?n:0,d=(null==e?void 0:e.currency_price)&&null!==(a=e.currency_price[0].keep_dot)&&void 0!==a?a:0;if(t){const e=i*s;if(0===e)return 0;let t=l-d,o=e,n=!1;if(d>=l)for(let e=l;e<d;e++)o*=10;for(;t>0;)o%10>0&&(n=!0),t--,o=Math.trunc(o/10);const a=n?Number(o)+1:Number(o);if(0===d)return a;const r=a.toString().split(""),c=r.splice(-d);for(;d>c.length;)c.unshift("0");const p=c.length>0?`.${c.join("")}`:"",u=r.join("");return Number(`${u}${p}`)}{if(r=s,d>=l)for(let e=l;e<d;e++)r*=10;const e=r.toString().split("");let t=[];if(e.length<d)for(let t=e.length;t<d;t++)e.unshift("0");t=0===d&&0!==l?e.splice(d-l):0===d&&0===l?e.splice(e.length):e.splice(-d);const i=t.length>0?`.${t.join("")}`:"",o=e.join("");return Number(`${o}${i}`)}},Yk=Object.values(Ti.w_).map((e=>{var t;return null===(t=e.match(/\/coin\/([^/@:]+)\/?.*/))||void 0===t?void 0:t[1]})).filter((e=>Boolean(e)));var Kk=i(40235);let Jk=class{constructor(e){this.fetch=e}getPermission(e){return this.fetch.get("/webcast/wallet_api/diamond_buy/permission/",{query:e,baseUrlType:4,requireSecSdk:!0})}getCoinsConfig(){return this.fetch.get("/webcast/diamond/",{baseUrlType:4,requireSecSdk:!0})}getNonce(){return this.fetch.get("/webcast/wallet_api/diamond_buy/nonce",{baseUrlType:4,requireSecSdk:!0})}placeOrder(e){return this.fetch.get("/webcast/wallet_api/diamond_buy_external/",{query:e,baseUrlType:4,requireSecSdk:!0})}getTransactionHistory(e){return this.fetch.get("/webcast/wallet_api/query_web_order/",{query:e,baseUrlType:4,requireSecSdk:!0})}getInvoiceAddressApi(e){return this.fetch.get("/webcast/wallet_api/invoice/download/",{query:e,baseUrlType:4,requireSecSdk:!0})}getNoticeContent(){return this.fetch.get("/webcast/wallet_api_tiktok/notifycenter/notices/",{query:{view_name:"recharge"},baseUrlType:4,requireSecSdk:!0})}getExchangeCustomPackage(e){return this.fetch.post("/webcast/recharge/base_package/",{query:e,baseUrlType:4,requireSecSdk:!0})}getExchangePackages(e){return this.fetch.post("/webcast/recharge/packages/",{query:e,baseUrlType:4,requireSecSdk:!0})}exchangeEarningsToCoins(e){return this.fetch.post("/webcast/wallet_api/diamond_exchange/",{query:e,baseUrlType:4,requireSecSdk:!0})}verifyZipCode(e){return this.fetch.get("/webcast/wallet_api/verify_zip_code/",{query:e,baseUrlType:4,requireSecSdk:!0})}saveBillingAddress(e){return this.fetch.post("/webcast/wallet_api/save_billing_address_info/",{query:e,body:(0,Kk.stringify)(e),baseUrlType:4,requireSecSdk:!0})}};var Xk,ew;Jk=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],Jk),function(e){e[e.WebAppPage=2]="WebAppPage",e[e.WebAppH5=3]="WebAppH5"}(Xk||(Xk={})),function(e){e.Default="default",e.From3ds="From3ds"}(ew||(ew={}));let tw=class extends pe.D{constructor(e,t,i,o,n){super(),this.service=e,this.appContext=t,this.report=i,this.exchangeSlardar=o,this.rdReport=n,this.defaultState={userState:{loadingState:0,hasRechargePermission:!1,showEntry:!1,coins:0,exchangePermission:{currency:"",enable:!1,has_short_video_gift:!1,price_dot:0,region:"",revenue:0,unit_price:0}},orderInfo:{loadingState:0},coins:{loadingState:0,coinsData:[]},exchangePackages:{loadingState:0,packagesData:{}},exchangeCustomPackage:{loadingState:0,customPackageData:{}},exchangeState:{loadingState:0,packageList:[],selectedPackageIndex:-1,selectedComboId:0,currency:"",coinAmount:0,currencyDot:0,localAmount:0,showAmountLocal:"0.00",showAmountUSD:"0.00",dontToast:!1},nonce:{loadingState:0,nonce:"",expiredAt:Date.now()},customerCoinId:0,customCoinMaxNum:0,customCoinMinNum:0,priceUnit:"",apUnitPrice:{},gpUnitPrice:{},merchantId:"",paymentMethod:"",paymentState:{selectedComboId:0,coinAmount:0,priceDot:0,keepDot:0,totalPrice:0,coinPrice:0,price:0,currency:""},transactionHistory:{loadingState:0,total:0,pageNumber:1,pageSize:8,pageData:[],totalData:[],isWebRechargedBefore:void 0},noticeData:{notices:[]},inAppState:{hideHeader:!1,hidePadding:!1,rechargeFrom:"others"},reportState:{},mobileInputVisible:!1,cashierModalLoaded:!1,billingAddress:{postalCode:"",validating:!1,validated:!1,isValid:!1,hasClickedConfirm:!1},showVerifyNow:!1,errorPrompt:"",region:void 0,kycErrorInfo:void 0}}setUserPermission(e,t){e.userState=Object.assign(Object.assign({},e.userState),t)}setNotice(e,t){e.noticeData=Object.assign(Object.assign({},e.noticeData),t)}setCoinsConfig(e,t){e.coins=Object.assign(Object.assign({},e.coins),t)}setPaymentState(e,t){e.paymentState=Object.assign(Object.assign({},e.paymentState),t)}setPaymentMethod(e,t){e.paymentMethod=t}setExchangePackages(e,t){e.exchangePackages=Object.assign(Object.assign({},e.exchangePackages),t)}setExchangeCustomPackage(e,t){e.exchangeCustomPackage=Object.assign(Object.assign({},e.exchangeCustomPackage),t)}setExchangeState(e,t){e.exchangeState=Object.assign(Object.assign({},e.exchangeState),t)}setCustomCoin(e,t){const{customerCoinId:i,customCoinMaxNum:o,customCoinMinNum:n,priceUnit:a,apUnitPrice:r,gpUnitPrice:s,merchantId:l}=t;e.customerCoinId=i,e.customCoinMaxNum=o,e.customCoinMinNum=n,e.priceUnit=a,e.apUnitPrice=r,e.gpUnitPrice=s,e.merchantId=l}updateOrder(e,t){e.orderInfo=Object.assign(Object.assign({},e.orderInfo),t)}updateNonce(e,t){t.nonce?e.nonce=Object.assign(Object.assign(Object.assign({},e.nonce),t),{loadingState:2,expiredAt:Date.now()+24e4}):e.nonce=Object.assign(Object.assign({},e.nonce),t)}setTransactionHistory(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),t)}setTransactionSize(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),{pageSize:t.pageSize,pageNumber:t.pageNumber})}setInAppState(e,t){e.inAppState=Object.assign(Object.assign({},e.inAppState),t)}setRefHash(e,t){t&&!Yk.includes(t)&&(e.refhash=t)}setEnterFrom(e,t){e.reportState.enterFrom=t}setMobileInputVisible(e,t){e.mobileInputVisible=t}setCashierModalLoaded(e,t){e.cashierModalLoaded=t}setBillingAddress(e,t){e.billingAddress=Object.assign(Object.assign({},e.billingAddress),t)}setDefaultSelectedMethod(e,t){e.defaultSelectedMethod=Object.assign(Object.assign({},e.defaultSelectedMethod),t)}setShowVerifyNow(e,t){e.showVerifyNow=t}setErrorPrompt(e,t){e.errorPrompt=t}setRegion(e,t){e.region=t}resetErrorState(e){e.orderInfo.statusCode=void 0,e.orderInfo.noPrompts=!1,e.exchangeState.statusCode=void 0,e.exchangeState.dontToast=!1}setKycErrorInfo(e,t){e.kycErrorInfo=t}initPayment(e){return e.pipe((0,Li.z)((()=>(0,Ii.of)(this.getActions().updateOrder({orderData:void 0,loadingState:0}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,priceDot:0,totalPrice:0,price:0,currency:""})))))}updateCoinsAmount(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{var i,o,n;const{coinComboId:a}=e,{coins:r,customerCoinId:s}=t,{coinsData:l}=r,d=null==l?void 0:l.find((e=>e.id===a));let c=null!==(i=null==d?void 0:d.diamond_count)&&void 0!==i?i:0,p=0;a===s?(c=e.coinAmount,d&&(p=Qk(d,!0,c))):d&&(p=Qk(d,!1,c));const u=null===(o=r.coinsData)||void 0===o?void 0:o.find((e=>e.id===a)),g=(null!==(n=null==u?void 0:u.currency_price)&&void 0!==n?n:[])[0],{currency:m,price:h,price_dot:_,keep_dot:v}=g;return(0,Ii.of)(this.getActions().setPaymentState({selectedComboId:a,coinAmount:c,totalPrice:p,currency:m,price:h,priceDot:_,keepDot:v}))})))}fetchPermission(e){return e.pipe((0,he.M)(this.appContext.state$),(0,Li.z)((([e,t])=>{const{appContext:i}=t,{user:o,region:n,isMobile:a}=i;return this.service.getPermission({user_id:null==o?void 0:o.uid,local_country:n,live_id:12}).pipe((0,Li.z)((e=>{var t,i;return(null==e?void 0:e.data)?(0,Ii.of)(this.getActions().setUserPermission({hasRechargePermission:e.data.is_allow,showEntry:e.data.is_show,coins:(null===(t=e.data)||void 0===t?void 0:t.coins)||0,exchangePermission:null===(i=e.data)||void 0===i?void 0:i.exchange,loadingState:2}),this.getActions().fetchCustomExchangePackage(),this.getActions().fetchExchangePackages()):(a?this.rdReport.handleReport(Ek,e):this.rdReport.handleReport(Sk,e),(0,Ii.of)(this.getActions().setUserPermission({loadingState:3})))})),(0,Ji.O)(this.getActions().setUserPermission({loadingState:1})),(0,Ai.K)((e=>(a?this.rdReport.handleReport(Ek,e):this.rdReport.handleReport(Sk,e),(0,Ii.of)(this.getActions().setUserPermission({loadingState:3}))))))})))}fetchNotice(e){return e.pipe((0,Li.z)((()=>this.service.getNoticeContent().pipe((0,Li.z)((e=>{var t,i;if(null==e?void 0:e.data){const o=(null!==(t=localStorage.getItem("webapp_recharge_hidden_notices_history"))&&void 0!==t?t:"").split(","),n=null===(i=e.data.notices)||void 0===i?void 0:i.filter((e=>!o.includes(e.id)));return(0,Ii.of)(this.getActions().setNotice({notices:null!=n?n:[]}))}return(0,Ii.of)(this.getActions().setNotice({}))})),(0,Ai.K)((()=>(0,Ii.of)(this.getActions().setNotice({}))))))))}placeOrder(e){return e.pipe((0,he.M)(this.appContext.state$,this.state$),(0,ve.z)((([e,t,i])=>{var o,n,a;const{type:r="default",skipKyc:s}=e,{paymentState:l,customerCoinId:d,refhash:c}=i,p=null===(o=t.appContext)||void 0===o?void 0:o.region,u=null===(n=t.appContext)||void 0===n?void 0:n.geo,g=null===(a=t.appContext)||void 0===a?void 0:a.user;if(!p)return(0,Ii.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));let m={};if("AE"===p&&(m.sub_region=null==u?void 0:u[0]),"default"===r){const{selectedComboId:t,currency:i,coinAmount:o,totalPrice:n,keepDot:a,price:r}=l;let u=r.toString();if(t===d){const e=n.toString().split("."),t=(e[1]||"").padEnd(a,"0").split("").slice(0,a).join("");u=`${e[0]}${t}`}m=Object.assign(Object.assign({},m),{diamond_id:t,currency:i,source:e.source,coins_count:o,local_amount:u,region:p,refhash:c,skip_kyc_reminder:s})}else if("From3ds"===r){const{diamond_id:t,coins_count:i,local_amount:o,currency:n}=e;if(!(t&&i&&o&&n))return(0,Ii.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));m=Object.assign(Object.assign({},m),{diamond_id:t,currency:n,source:e.source,coins_count:i,local_amount:o,region:p,refhash:c})}const h=3===e.source;return h?this.rdReport.handleReport(Ok,m):this.rdReport.handleReport(fk,m),this.service.placeOrder(m).pipe((0,Li.z)((e=>{var t,i,o,n,a,r,s,l;if(0===e.status_code&&e.data)return h?this.rdReport.handleReport(Lk,e):this.rdReport.handleReport(xk,e),e.data.nonce?[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().updateNonce({nonce:e.data.nonce})]:[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().getNonce()];{const d={loadingState:3,statusCode:null!==(t=null==e?void 0:e.status_code)&&void 0!==t?t:"",prompts:null!==(o=null===(i=e.data)||void 0===i?void 0:i.prompts)&&void 0!==o?o:""};return h?this.rdReport.handleReport(Ik,d):this.rdReport.handleReport(kk,d),Wk.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(a=null===(n=e.data)||void 0===n?void 0:n.prompts)&&void 0!==a?a:""),this.getActions().updateOrder(Object.assign(Object.assign({},d),{noPrompts:!0})),this.getActions().setKycErrorInfo(null!==(r=e.extra)&&void 0!==r?r:void 0),this.getActions().setShowVerifyNow(!0)]:((null==e?void 0:e.status_code)===Uk&&this.report.handleAbnormalFeatureToast({user_id:null==g?void 0:g.uid,scenario:"recharge"}),(0,Ii.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(d),this.getActions().setErrorPrompt(null!==(l=null===(s=e.data)||void 0===s?void 0:s.prompts)&&void 0!==l?l:"")))}})),(0,Ji.O)(this.getActions().updateOrder({loadingState:1})),(0,Ai.K)((e=>{h?this.rdReport.handleReport(Ik,e):this.rdReport.handleReport(kk,e);let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,Ii.of)(this.getActions().updateOrder({loadingState:3,prompts:t}))})))})))}fetchExchangePackages(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,Ii.of)(this.noop());const{region:i}=t.userState.exchangePermission;return this.service.getExchangePackages({currency:"USD",package_region:i,type:101}).pipe((0,Li.z)((e=>(null==e?void 0:e.data)?(0,Ii.of)(this.getActions().setExchangePackages({loadingState:2,packagesData:e.data})):(0,Ii.of)(this.getActions().setExchangePackages({loadingState:3})))),(0,Ji.O)(this.getActions().setExchangePackages({loadingState:1})),(0,Ai.K)((e=>(this.exchangeSlardar.handlePackagesFail(e),(0,Ii.of)(this.getActions().setExchangePackages({loadingState:3}))))))})))}fetchCustomExchangePackage(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,Ii.of)(this.noop());const{region:i,revenue:o}=t.userState.exchangePermission;return this.service.getExchangeCustomPackage({currency:"USD",package_region:i,balance:o,type:101,real_dot:2}).pipe((0,Li.z)((e=>(null==e?void 0:e.data)?(0,Ii.of)(this.getActions().setExchangeCustomPackage({loadingState:2,customPackageData:e.data})):(0,Ii.of)(this.getActions().setExchangeCustomPackage({loadingState:3})))),(0,Ji.O)(this.getActions().setExchangeCustomPackage({loadingState:1})),(0,Ai.K)((e=>(this.exchangeSlardar.handleBasePackageFail(e),(0,Ii.of)(this.getActions().setExchangeCustomPackage({loadingState:3}))))))})))}setExchangePackageList(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>(0,Ii.of)(this.getActions().setExchangeState({packageList:e})))))}updateExchangeAmount(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{var i;const{selectedPackageIndex:o,coinAmount:n}=e,{packageList:a}=t.exchangeState,r=a[o],{coins:s,price:l,realDot:d,keepDot:c,localRealDot:p,localKeepDot:u,localPrice:g}=r,m=t.exchangePackages.packagesData,h=o===a.length-1,_=o===a.length-2,v=h?n:s,y=Boolean(m.local_currency_info),b=null===(i=null==m?void 0:m.currency_info)||void 0===i?void 0:i.code,{total:f,showAmount:x,localShowAmount:k}=(e=>{const{count:t,realDot:i,keepDot:o,isCustom:n=!1,currentPrice:a,useLocal:r=!1,localRealDot:s=0,localKeepDot:l=0,localCurrentPrice:d=0}=e,c=n?zk:Nk,{showAmount:p,localAmount:u,total:g}=c({count:t,realDot:i,keepDot:o,currentPrice:a}),m={showAmount:p,localAmount:u,total:g};if(r){const{showAmount:e,localAmount:i,total:o}=c({count:t,realDot:s,keepDot:l,currentPrice:d});m.localShowAmount=e||"",m.localTotal=o||0,m.localAmountString=i||""}return m})({isCustom:_||h,count:_?Number(r.coins):v,realDot:d,keepDot:c,currentPrice:l,useLocal:y,localRealDot:p,localKeepDot:u,localCurrentPrice:g});return(0,Ii.of)(this.getActions().setExchangeState({selectedComboId:r.id,selectedPackageIndex:o,currency:b,currencyDot:d,localAmount:f,coinAmount:Number(v),showAmountUSD:x,showAmountLocal:k}))})))}placeExchangeOrder(e){return e.pipe((0,he.M)(this.appContext.state$,this.state$),(0,ve.z)((([e,t,i])=>{const{isMobile:o,reportParams:n,skipKyc:a}=e,{exchangeState:r}=i,{selectedComboId:s,currency:l,coinAmount:d,currencyDot:c,localAmount:p}=r,{appContext:u}=t,{user:g}=u;return this.service.exchangeEarningsToCoins({diamond_id:s,way:1,source:o?3:2,currency:l,currency_dot:c,coins_count:d,local_amount:p,skip_kyc_reminder:a}).pipe((0,Li.z)((e=>{var t,a,r,s,l,d,c,p,u,m,h,_;return e.data&&1===e.data.status?(this.report.handleExchangeSuccess(Object.assign({},n)),o?this.rdReport.handleReport(Fk):this.rdReport.handleReport(Pk),(0,Ii.of)(this.getActions().setExchangeState({loadingState:2,statusCode:e.data.status}),this.getActions().fetchPermission(),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:i.transactionHistory.pageSize}))):(e.status_code===Uk&&this.report.handleAbnormalFeatureToast({user_id:null==g?void 0:g.uid,scenario:"recharge_page_exchange"}),this.report.handleExchangeFailed(Object.assign(Object.assign({},n),{error_code:null===(t=e.data)||void 0===t?void 0:t.status})),Wk.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(r=null===(a=e.data)||void 0===a?void 0:a.prompts)&&void 0!==r?r:""),this.getActions().setExchangeState({loadingState:3,statusCode:null!==(s=null==e?void 0:e.status_code)&&void 0!==s?s:"",prompts:null!==(d=null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.prompts)&&void 0!==d?d:"",dontToast:!0}),this.getActions().setKycErrorInfo(null!==(c=e.extra)&&void 0!==c?c:void 0),this.getActions().setShowVerifyNow(!0)]:(o?this.rdReport.handleReport(Rk,{error:JSON.stringify(e)}):this.rdReport.handleReport(Ck,{error:JSON.stringify(e)}),(0,Ii.of)(this.getActions().resetErrorState(),this.getActions().setExchangeState({loadingState:3,statusCode:null!==(p=null==e?void 0:e.status_code)&&void 0!==p?p:"",prompts:null!==(m=null===(u=null==e?void 0:e.data)||void 0===u?void 0:u.prompts)&&void 0!==m?m:""}),this.getActions().setErrorPrompt(null!==(_=null===(h=e.data)||void 0===h?void 0:h.prompts)&&void 0!==_?_:""))))})),(0,Ji.O)(this.getActions().setExchangeState({loadingState:1})),(0,Ai.K)((e=>{this.exchangeSlardar.handlePlaceOrderFail(e),o?this.rdReport.handleReport(Rk,e):this.rdReport.handleReport(Ck,e);let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,Ii.of)(this.getActions().setExchangeState({loadingState:3,prompts:t}))})))})))}initExchangeOrderStatus(e){return e.pipe((0,Li.z)((()=>(0,Ii.of)(this.getActions().setExchangeState({loadingState:0,coinAmount:0,selectedComboId:0,prompts:""}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,totalPrice:0})))))}fetchCoinsConfig(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([e,t])=>this.service.getCoinsConfig().pipe((0,Li.z)((i=>{var o,n,a,r,s,l,d,c,p,u,g,m,h,_,v,y,b,f,x,k,w,S,j,C;if(0===i.status_code&&i.data&&i.extra)return(0,Ii.of)(this.getActions().setCoinsConfig({loadingState:2,coinsData:i.data}),this.getActions().setCustomCoin({customerCoinId:(null===(o=null==i?void 0:i.extra)||void 0===o?void 0:o.customized_ids)?null===(n=null==i?void 0:i.extra)||void 0===n?void 0:n.customized_ids[0]:0,customCoinMaxNum:null!==(r=null===(a=null==i?void 0:i.extra)||void 0===a?void 0:a.max_customized_diamond_cnt)&&void 0!==r?r:0,customCoinMinNum:null!==(s=null==i?void 0:i.extra.min_customized_diamond_cnt)&&void 0!==s?s:0,priceUnit:(null===(l=null==i?void 0:i.data[0])||void 0===l?void 0:l.currency_price)&&null!==(p=null===(c=null===(d=null==i?void 0:i.data[0])||void 0===d?void 0:d.currency_price[0])||void 0===c?void 0:c.price_show_form)&&void 0!==p?p:"",apUnitPrice:null!==(g=null===(u=null==i?void 0:i.extra)||void 0===u?void 0:u.ap_unit_price)&&void 0!==g?g:{},gpUnitPrice:null!==(h=null===(m=null==i?void 0:i.extra)||void 0===m?void 0:m.gp_unit_price)&&void 0!==h?h:{},merchantId:null!==(v=null===(_=null==i?void 0:i.extra)||void 0===_?void 0:_.merchant_id)&&void 0!==v?v:""}),this.getActions().setRegion(null!==(b=null===(y=null==i?void 0:i.extra)||void 0===y?void 0:y.region)&&void 0!==b?b:void 0));{const o={error_code:null!==(f=String(null==i?void 0:i.status_code))&&void 0!==f?f:"unknown",message:null!==(k=null===(x=null==i?void 0:i.data)||void 0===x?void 0:x.prompts)&&void 0!==k?k:"some error in get_coins"};return this.report.handleRechargeFailed(Object.assign(Object.assign({},o),{error_from:"get_coins",charge_from:null!==(w=t.refhash)&&void 0!==w?w:"",request_page:e.isMobile?"mobile_h5":"webapp",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",recharge_type:"feature_available",order_id:null!==(j=null===(S=t.orderInfo.orderData)||void 0===S?void 0:S.order_id)&&void 0!==j?j:"",event_module:(null==t?void 0:t.customerCoinId)===(null===(C=null==t?void 0:t.paymentState)||void 0===C?void 0:C.selectedComboId)?"customized":"normal",recharge_from:t.inAppState.rechargeFrom,pay_method:t.paymentMethod})),e.isMobile?this.rdReport.handleReport(Mk,o):this.rdReport.handleReport(jk,o),(0,Ii.of)(this.getActions().setCoinsConfig({loadingState:3}))}})),(0,Ji.O)(this.getActions().setCoinsConfig({loadingState:1})),(0,Ai.K)((t=>(e.isMobile?this.rdReport.handleReport(Mk,t):this.rdReport.handleReport(jk,t),(0,Ii.of)(this.getActions().setCoinsConfig({loadingState:3})))))))))}getTransactionHistoryList(e){return e.pipe((0,he.M)(this.appContext.state$),(0,ve.z)((([e,t])=>{const{pageSize:i,pageNumber:o}=e,{appContext:n}=t,a=null==n?void 0:n.user;if(!a)return(0,Ii.of)(this.noop());const r=a.uid;return this.service.getTransactionHistory({page:o,count:i,user_id:r}).pipe((0,Li.z)((e=>(0,Ii.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,total:e.data.total_count,pageNumber:o,pageSize:i,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,Ji.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Ai.K)((e=>(this.rdReport.handleReport(Tk,{pageSize:String(i),pageNumber:String(o),error:e}),(0,Ii.of)(this.getActions().setTransactionHistory({loadingState:3}))))))})))}loadTransactionHistory(e){return e.pipe((0,he.M)(this.appContext.state$,this.state$),(0,Yi.w)((([e,t,i])=>{const{pageSize:o,pageNumber:n,totalData:a}=i.transactionHistory,{appContext:r}=t,s=null==r?void 0:r.user;if(!s)return(0,Ii.of)(this.noop());const l=s.uid;return this.service.getTransactionHistory({page:n,count:o,user_id:l}).pipe((0,Li.z)((e=>(0,Ii.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,totalData:[...a,...e.data.list_recharge_order],total:e.data.total_count,pageNumber:n+1,pageSize:o,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,Ji.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Ai.K)((()=>(this.rdReport.handleReport(Dk,{page:String(n),count:String(o),user_id:l}),(0,Ii.of)(this.getActions().setTransactionHistory({loadingState:3}))))))})))}getNonce(e){return e.pipe((0,Li.z)((()=>this.service.getNonce().pipe((0,Li.z)((e=>{var t;return 0===e.status_code?(0,Ii.of)(this.getActions().updateNonce({nonce:null===(t=e.data)||void 0===t?void 0:t.nonce,loadingState:2})):(0,Ii.of)(this.getActions().updateNonce({loadingState:3}))})),(0,Ji.O)(this.getActions().updateNonce({loadingState:1}))))))}init(e){return e.pipe((0,Li.z)((e=>[this.getActions().fetchPermission(),this.getActions().fetchCoinsConfig({isMobile:e.isMobile}),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:e.pageSize}),this.getActions().fetchNotice()])),(0,Ai.K)((()=>(0,Ii.of)(this.noop()))))}updateInAppState(e){return e.pipe((0,Li.z)((e=>[this.getActions().setInAppState(e)])),(0,Ai.K)((()=>(0,Ii.of)(this.noop()))))}verifyPostalCode(e){return e.pipe((0,he.M)(this.state$),(0,Yi.w)((([e,t])=>this.service.verifyZipCode({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,Li.z)((e=>{var t;return(0,Ii.of)(this.getActions().setBillingAddress({isValid:null===(t=e.data)||void 0===t?void 0:t.is_valid,validating:!1,validated:!0}))})),(0,Ai.K)((()=>(0,Ii.of)(this.getActions().setBillingAddress({validating:!1})))),(0,Ji.O)(this.getActions().setBillingAddress({validating:!0}))))))}saveBillingAddress(e){return e.pipe((0,he.M)(this.state$),(0,Li.z)((([e,t])=>{var i,o;const n={enter_from:null!==(i=t.reportState.enterFrom)&&void 0!==i?i:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:e.isMobile?"mobile_h5":"webapp",event_module:t.paymentState.selectedComboId===t.customerCoinId?"customized":"normal",recharge_package:t.paymentState.coinAmount,charge_from:null!==(o=t.refhash)&&void 0!==o?o:""};return this.service.saveBillingAddress({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,Li.z)((t=>{var i;return(null===(i=t.data)||void 0===i?void 0:i.is_saved)?(0,Ii.of)(this.getActions().setBillingAddress({isValid:!0})):(this.report.handleBillingAddressFailed(n),e.isMobile?this.rdReport.handleReport(Ak):this.rdReport.handleReport(wk),(0,Ii.of)(this.getActions().updateOrder({loadingState:3})))})),(0,Ai.K)((t=>(this.report.handleBillingAddressFailed(n),e.isMobile?this.rdReport.handleReport(Ak,t):this.rdReport.handleReport(wk,t),(0,Ii.of)(this.getActions().updateOrder({loadingState:3}))))))})))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setUserPermission",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setNotice",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setCoinsConfig",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setPaymentState",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setPaymentMethod",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setExchangePackages",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setExchangeCustomPackage",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setExchangeState",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setCustomCoin",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"updateOrder",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"updateNonce",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setTransactionHistory",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setTransactionSize",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setInAppState",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setRefHash",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setEnterFrom",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setMobileInputVisible",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setCashierModalLoaded",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setBillingAddress",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setDefaultSelectedMethod",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setShowVerifyNow",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,String]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setErrorPrompt",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setRegion",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"resetErrorState",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Object]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setKycErrorInfo",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"initPayment",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"updateCoinsAmount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"fetchPermission",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"fetchNotice",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"placeOrder",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"fetchExchangePackages",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"fetchCustomExchangePackage",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"setExchangePackageList",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"updateExchangeAmount",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"placeExchangeOrder",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"initExchangeOrderStatus",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"fetchCoinsConfig",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"getTransactionHistoryList",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"loadTransactionHistory",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"getNonce",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"init",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"updateInAppState",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"verifyPostalCode",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],tw.prototype,"saveBillingAddress",null),tw=(0,m.__decorate)([(0,ge.Y)("Recharge"),(0,m.__metadata)("design:paramtypes",[Jk,K.G,yk,Gk,Bk])],tw);const iw=(0,Vo.Z)("div",{target:"equhrky0"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"16px"})),{cursor:"pointer",height:"32px",position:"relative",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivRechargeContainer;");iw.defaultProps=Object.assign(Object.assign({},iw.defaultProps),{"data-e2e":"recharge-icon"});const ow=(0,Vo.Z)("span",{target:"equhrky1"})({width:"24px",height:"24px",display:"block"},"label:SpanLogoContainer;"),nw=(0,Vo.Z)("span",{target:"equhrky2"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginEnd:"8px"})),{width:"20px",height:"20px",display:"block"},"label:SpanLogoContainerInner;"),aw=(0,Vo.Z)("div",{target:"equhrky3"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"16px"})),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer",height:"36px",position:"relative",padding:"7px 16px",borderRadius:"2px",border:"1px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box"},"label:DivRechargeContainerWithText;");aw.defaultProps=Object.assign(Object.assign({},aw.defaultProps),{"data-e2e":"recharge-icon"});const rw=(0,Vo.Z)("h2",{target:"equhrky4"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e})),{fontFamily:"Proxima Nova",height:"24px",position:"relative",fontStyle:"normal",whiteSpace:"nowrap",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:H2RechargeTextContainer;"),sw="HAS_ENTERED_KEY",lw="HAS_ENTERED_VALUE";var dw;!function(e){e[e.Showing=0]="Showing",e[e.Clicking=1]="Clicking"}(dw||(dw={}));const cw=()=>(0,o.jsx)(nw,{children:(0,o.jsx)(vk.Z,{width:20,height:20},void 0)},void 0),pw=()=>{const e=(0,ni.Q)();return(0,o.jsx)(gy.u,Object.assign({placement:"bottom",overlay:e("WebApp_coin_recharge_1")},{children:(0,o.jsx)(ow,{children:(0,o.jsx)(vk.Z,{width:22.5,height:22.5},void 0)},void 0)}),void 0)},uw=()=>{const e=(0,ni.Q)(),t=(0,P.k6)(),i=(0,te.fz)(yk),n=(0,V.mp)(tw),a=n.userState.showEntry,r=(0,j.useCallback)((()=>{i.handleLiveWebGetCoinShow({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]);(0,j.useEffect)((()=>{r()}),[r]);const s=(0,j.useCallback)((()=>{i.handleLiveWebGetCoinClick({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]),l=(0,j.useCallback)((()=>{t.push(`${Ti.$J.coin}?enter_from=web_live_nav`)}),[t]),d=(0,j.useCallback)((()=>{s(),l()}),[s,l]);return a?(0,o.jsxs)(aw,Object.assign({onClick:d},{children:[(0,o.jsx)(cw,{},void 0),(0,o.jsx)(rw,{children:e("WebApp_coin_recharge_1")},void 0)]}),void 0):null},gw=()=>{const[e,t]=(0,j.useState)(!0),[i,n]=(0,j.useState)(!1),a=(0,P.k6)(),r=(0,ni.Q)(),s=(0,te.fz)(yk),l=(0,ne.L)((()=>["abTestVersion"]),[]),d=(0,V.mp)(tw),c=d.userState.showEntry,p=(0,Ci.x)(null==l?void 0:l.abTestVersion,"expose_recharge_entry_pc"),u=void 0===p||"v1"===p,g=void 0!==p&&"v2"===p,m=g&&e;(0,j.useEffect)((()=>{e&&g&&(0,yi.le)(sw)===lw&&t(!1),n(!0)}),[e,g]);const h=(0,j.useCallback)((e=>{const t={show_page:"main_page",is_web_recharged_before:d.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:m?"icon_and_text":"icon_only"};0===e?s.handleLiveWebGetCoinShow(t):1===e&&s.handleLiveWebGetCoinClick(t)}),[s,d.transactionHistory.isWebRechargedBefore,m]),_=(0,j.useCallback)((()=>{h(0)}),[h]);(0,j.useEffect)((()=>{i&&c&&!u&&_()}),[i,e,c,u,_]);const v=(0,j.useCallback)((()=>{(0,yi.D$)(sw,lw)}),[]),y=(0,j.useCallback)((()=>{a.push(`${Ti.$J.coin}?enter_from=web_main_nav`)}),[a]),b=(0,j.useCallback)((()=>{h(1)}),[h]),f=(0,j.useCallback)((()=>{g&&e&&v(),b(),y()}),[g,e,v,y,b]);return!c||u?null:m?(0,o.jsxs)(aw,Object.assign({onClick:f},{children:[(0,o.jsx)(cw,{},void 0),(0,o.jsx)(rw,{children:r("WebApp_coin_recharge_1")},void 0)]}),void 0):(0,o.jsx)(iw,Object.assign({onClick:f},{children:(0,o.jsx)(pw,{},void 0)}),void 0)},mw=({alwaysShowRechargeIconAndText:e})=>e?(0,o.jsx)(uw,{},void 0):(0,o.jsx)(gw,{},void 0);var hw;!function(e){e.ShowCollectionsTooltip="show_collections_tooltip",e.EnterCollectionsPage="enter_collections_page"}(hw||(hw={}));const _w=(0,Vo.Z)("div",{target:"e15tt1x80"})({padding:"12px",width:"180px",wordBreak:"break-word"},"label:DivTipWrapper;"),vw=(0,Vo.Z)("p",{target:"e15tt1x81"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),yw=(0,j.memo)((({userPopupActive:e})=>{const t=(0,ni.Q)(),{colors:i,direction:n}=(0,a.u)(),[r,s]=(0,j.useState)(!1),{tooltipPriority:l}=(0,V.mp)(My),d="ltr"===n?"bottomRight":"bottomLeft";return(0,j.useEffect)((()=>{Ty.iv.getItem(Iy)||6!==l?s(!1):(s(!0),re.W.event("show_collections_tooltip"),Ty.iv.setItem(Iy,!0))}),[l]),(0,j.useEffect)((()=>{let e;return r&&(e=window.setTimeout((()=>{s(!1)}),15e3)),()=>clearTimeout(e)})),(0,j.useEffect)((()=>{e&&r&&s(!1)}),[r,e]),(0,o.jsx)(Hn.G,Object.assign({active:r,backgroundColor:i.ConstSecondary2,placement:d,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsx)(_w,{children:(0,o.jsx)(vw,{children:t("tiktok_series_webapp_tooltip_get_started")},void 0)},void 0)}),void 0)}));var bw,fw,xw=i(32950),kw=i(74629),ww=i(97578),Sw=i(65974),jw=i(37578),Cw=i(56705),Pw=i(97820),Tw=i(4591),Ow=i(78120),Lw=i(60053),Iw=i(5351),Aw=i(66739);function Ew(){return Ew=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ew.apply(this,arguments)}const Mw=function(e){return j.createElement("svg",Ew({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),bw||(bw=j.createElement("path",{fillRule:"evenodd",d:"M15.83 4A3.83 3.83 0 0012 7.83V12H7.83A3.83 3.83 0 004 15.83v24.34A3.83 3.83 0 007.83 44h24.34A3.83 3.83 0 0036 40.17v-4.34h4.17A3.83 3.83 0 0044 32V7.83A3.83 3.83 0 0040.17 4H15.83zm16.34 8H16V8h24v23.83h-4v-16A3.83 3.83 0 0032.17 12zM8 40V16h24v24H8z",clipRule:"evenodd"})),fw||(fw=j.createElement("path",{fillRule:"evenodd",d:"M19.57 37h1.1c.42 0 .76-.32.76-.71v-1.11c1.5-.2 2.64-.74 3.41-1.52A4.09 4.09 0 0026 30.74c0-1.42-.63-2.39-1.56-3.05a9.05 9.05 0 00-3-1.23v-2.51c.65.2 1.28.5 1.81.95.33.26.85.25 1.13-.1l1.03-1.27c.23-.29.2-.7-.1-.95a7.76 7.76 0 00-3.88-1.69v-1.18c0-.4-.34-.71-.76-.71h-1.1c-.41 0-.76.32-.76.71v1.15c-2.65.36-4.44 2.04-4.44 4.22 0 1.38.6 2.32 1.51 2.96.84.6 1.92.93 2.93 1.19v2.95a5.68 5.68 0 01-2.47-1.31.8.8 0 00-1.16.09l-1.04 1.33c-.2.28-.19.67.09.92 1.1 1 2.63 1.75 4.58 1.97v1.1c0 .4.35.72.76.72zm2.97-6.04c0 .44-.27.97-1.1 1.23v-2.27c.34.13.6.27.79.42.2.18.3.37.3.62zm-4.7-6.06c0-.46.3-.87.97-1.07v1.94a2.59 2.59 0 01-.71-.37c-.19-.15-.26-.3-.26-.5z",clipRule:"evenodd"})))};var Rw;!function(e){e.UploadEmoteError="live_sdk_subscription_upload_emote_error",e.GetEmoteDetailError="live_sdk_subscription_get_emote_error",e.PermissionError="live_sdk_subscription_get_permission_error",e.GetBadgeDetailError="live_sdk_subscription_get_badge_detail_error",e.UpdateBadgeError="live_sdk_subscription_update_badge_error"}(Rw||(Rw={}));let Fw=class{constructor(e){this.service=e,this.defaultTag={where:"Subscription"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleUploadEmoteError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_upload_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetBadgeDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_badge_detail_error",this.defaultMetrics,this.defaultTag)},this.handleUpdateBadgeError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_update_badge_error",this.defaultMetrics,this.defaultTag)},this.handlePermissionError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_permission_error",this.defaultMetrics,this.defaultTag)}}};Fw=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[Oe.n])],Fw);let Dw=class{constructor(e){this.fetch=e,this.getSubPermissionInfo=e=>this.fetch.get("/webcast/sub/privilege/get_sub_info",{query:e,baseUrlType:4}),this.getDetails=e=>this.fetch.get("/webcast/sub/privilege/get_sub_privilege_detail",{query:{sec_anchor_id:e,for_anchor:!0},baseUrlType:4}),this.getBadgeDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_badge_detail",{query:e,baseUrlType:4}),this.getSubscriberList=e=>this.fetch.get("/webcast/sub/anchor/subscriber/",{query:e,baseUrlType:4}),this.updateBadge=e=>this.fetch.post("/webcast/sub/privilege/update_badge",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.getEmoteDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_emote_detail/",{query:e,baseUrlType:4}),this.updateEmote=e=>this.fetch.post("/webcast/sub/privilege/update_emote",{body:JSON.stringify(Object.assign({},e)),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.uploadImage=e=>{const t=new FormData;return t.append("data",e),this.fetch.post("/webcast/resource/upload/",{query:{scene:"tikcast_subscription"},body:t,omitContentType:!0,baseUrlType:4})}}};var Bw;Dw=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[fe.r])],Dw),function(e){e[e.Guide=0]="Guide",e[e.Badge=1]="Badge",e[e.Emote=2]="Emote"}(Bw||(Bw={}));let zw=class extends pe.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={loading:0,showInitModal:!1,showUpdateModal:!1,enableSubscription:!1,initializedSubscription:!1,emoteStatus:0,badgeStatus:0,hasFetchedPermission:!1,initStep:0,hasEditEmote:!1,hasEditBadge:!1}}setEnableSubscription(e,t){e.enableSubscription=t}setInitializedSubscription(e,t){e.initializedSubscription=t}setBadgeStatus(e,t){e.badgeStatus=t}setEmoteStatus(e,t){e.emoteStatus=t}setLoading(e,t){e.loading=t}setShowInitModal(e,t){e.showInitModal=t}setShowUpdateModal(e,t){e.showUpdateModal=t}setInitStep(e,t){e.initStep=t}setHasFetchedPermission(e,t){e.hasFetchedPermission=t}setHasEditEmote(e,t){e.hasEditEmote=t}setHasEditBadge(e,t){e.hasEditBadge=t}getSubPermissionInfo(e){return e.pipe((0,he.M)(this.state$),(0,ve.z)((([e,{hasFetchedPermission:t}])=>t?(0,Ii.of)(this.noop()):this.service.getSubPermissionInfo(e).pipe((0,Li.z)((({status_code:e,data:t})=>{var i,o;if(0!==e||!t)return(0,Ii.of)(this.noop());const{enable:n,initialized:a,badge_info:r,emote_info:s}=t;return(0,Ii.of)(this.getActions().setEnableSubscription(null!=n&&n),this.getActions().setInitializedSubscription(null!=a&&a),this.getActions().setBadgeStatus(null!==(i=null==r?void 0:r.current_status)&&void 0!==i?i:0),this.getActions().setEmoteStatus(null!==(o=null==s?void 0:s.current_status)&&void 0!==o?o:0),this.getActions().setHasFetchedPermission(!0))})),(0,Ji.O)(this.getActions().setLoading(1)),(0,Xi.l)(this.getActions().setLoading(2)),(0,Ai.K)((e=>(this.slardar.handlePermissionError(e),(0,Ii.of)(this.noop()))))))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setEnableSubscription",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setInitializedSubscription",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setBadgeStatus",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setEmoteStatus",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setLoading",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setShowInitModal",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setShowUpdateModal",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Number]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setInitStep",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setHasFetchedPermission",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setHasEditEmote",null),(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"setHasEditBadge",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],zw.prototype,"getSubPermissionInfo",null),zw=(0,m.__decorate)([(0,ge.Y)("SubscriptionCommonModule"),(0,m.__metadata)("design:paramtypes",[Dw,Fw])],zw);var Nw=i(70754),Uw=i(66688),Ww=i(25818),qw=i(19531);const Gw=(0,Vo.Z)("div",{target:"e1xkydcv0"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{minWidth:"223px"},"label:DivContainer;"),Hw=(0,Vo.Z)("div",{target:"e1xkydcv1"})({display:"flex",alignItems:"center",position:"relative",height:"50px"},"label:DivHeader;"),Zw=(0,Vo.Z)(qw.Z,{target:"e1xkydcv2"})((({theme:{direction:e}})=>[(0,de.YJ)({direction:e,marginStart:"28px"}),"ltr"===e?null:{transform:"rotate(180deg)"}]),{width:"20px",height:"20px"},"label:StyledBackIcon;"),$w=(0,Vo.Z)("p",{target:"e1xkydcv3"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{position:"absolute",left:"50%",transform:"translateX(-50%)"},"label:PTitle;"),Vw=(0,Vo.Z)("ul",{target:"e1xkydcv4"})({listStyle:"none",margin:0,padding:0,maxHeight:"590px",overflowY:"auto"},"label:UlListWrapper;"),Qw=(0,Vo.Z)("li",{target:"e1xkydcv5"})((({theme:e,theme:{colors:t},active:i})=>[{padding:"10px 24px",background:i?t.BGPlaceholderDefault:"transparent",":hover":{background:t.BGPlaceholderDefault}},(0,de.GI)({theme:e,fontFamily:"Sofia"})]),"label:LiListItem;"),Yw=function(e){var t,i;const n=(0,ni.Q)(),{language:a}=null!==(t=(0,ne.L)((()=>["language"]),[]))&&void 0!==t?t:{},r=null!==(i=Me.tF.reduce(((e,t)=>(t.value===a?e.unshift(t):e.push(t),e)),[]))&&void 0!==i?i:[],{pathname:s,search:l}=(0,P.TH)(),d=Gs(),c=(0,j.useCallback)((e=>()=>{let t;t=(0,Re.Hg)(s)?`/${e}`:(0,be.stringifyUrl)({url:s,query:Object.assign(Object.assign({},(0,be.parse)(l)),{lang:e})}),d({lang:e,url:t})}),[s,d,l]),{showModal:p,hideModal:u}=(0,Xr.J)();return(0,j.useEffect)((()=>(p(),()=>{u()})),[u,p]),(0,o.jsxs)(Gw,{children:[(0,o.jsxs)(Hw,{children:[(0,o.jsx)("i",Object.assign({onClick:e.onBack},{children:(0,o.jsx)(Zw,{},void 0)}),void 0),(0,o.jsx)($w,{children:n("Language")},void 0)]},void 0),(0,o.jsx)(Vw,{children:r.map((({value:e,label:t})=>(0,o.jsx)(Qw,Object.assign({active:a===e,onClick:c(e)},{children:t}),e)))},void 0)]},void 0)};var Kw=i(89649),Jw=i(93328),Xw=i(21666);const eS=(0,Vo.Z)("ul",{target:"exws2ct0"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{padding:"8px 0",margin:0,minWidth:"223px",listStyle:"none"},"label:UlPopupContainer;"),tS=(0,Vo.Z)("li",{target:"exws2ct1"})((({theme:{colors:e},withBorder:t})=>[{padding:"10px 8px 10px 16px",":hover":{background:e.BGView},display:"flex",justifyContent:"space-between"},t?{borderTop:`1px solid ${e.LineSecondary}`}:null]),"label:LiItemWrapper;"),iS={display:"flex",whiteSpace:"nowrap",flexDirection:"row",alignItems:"center",":hover":{textDecoration:"none"}},oS=(0,Vo.Z)(Tn.v,{target:"exws2ct2"})(iS,"label:StyledLinkItem;"),nS=(0,Vo.Z)(Ho.D,{target:"exws2ct3"})(iS,"label:StyledUserLink;"),aS=(0,Vo.Z)("div",{target:"exws2ct4"})(iS,"label:DivSettingItem;"),rS=(0,Vo.Z)("i",{target:"exws2ct5"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"50%",background:e.Primary},(0,de.YJ)({direction:t,marginStart:"8px"})]),"label:INewIcon;");var sS;rS.defaultProps=Object.assign(Object.assign({},rS.defaultProps),{"data-e2e":"red-dot"}),function(e){e[e.Main=0]="Main",e[e.Language=1]="Language"}(sS||(sS={}));const lS=function({Icon:e,text:t,href:i,renderLink:n,withBorder:r,hasNew:s,forceSSR:l=!1,e2eTag:d,onClick:c,children:p}){const u=(0,ni.Q)(),{direction:g}=(0,a.u)(),m=function(e){const t=(0,de.YJ)({direction:e,marginEnd:"8px"});return(0,Xw.iv)([t,{width:"20px",height:"20px",flex:"0 0 20px"}])}(g),h=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,{className:m},void 0),(0,o.jsx)("span",{children:u(t)},void 0),s&&(0,o.jsx)(rS,{},void 0)]},void 0);return(0,o.jsxs)(tS,Object.assign({withBorder:r,"data-e2e":d,onClick:c},{children:[n?n(h):i?(0,o.jsx)(oS,Object.assign({forceSSR:l,to:null!=i?i:"#"},{children:h}),void 0):(0,o.jsx)(aS,{children:h},void 0),p]}),void 0)},dS="series-red-dot",cS=(0,j.memo)((function({active:e,margin:t=-17,e2eTag:i}){var n,r,s,l,d,c,p,u,g,m;const{direction:h}=(0,a.u)(),{pathname:_,search:v}=(0,P.TH)(),y=(0,V.qj)(Ao),b=(0,P.k6)(),f=Oi(),x=(0,te.fz)(yk),k=(0,ne.L)((()=>["user","language","abTestVersion","region","searchVideoForLoggedin","studioDownloadEntrance","liveStudioEnable","liveCenterConfig"]),[]),w=(0,j.useMemo)((()=>{var e,t;return(null!==(t=null===(e=Me.tF.find((({value:e})=>e===(null==k?void 0:k.language))))||void 0===e?void 0:e.label)&&void 0!==t?t:"Language").replace(/[(].+?$/,"")}),[null==k?void 0:k.language]),C=null==k?void 0:k.user,L=null!==(n=null==k?void 0:k.region)&&void 0!==n?n:"",I=null!==(r=null==k?void 0:k.liveStudioEnable)&&void 0!==r&&r,A=null!==(l=null===(s=null==k?void 0:k.studioDownloadEntrance)||void 0===s?void 0:s.all)&&void 0!==l&&l,E=(0,j.useMemo)((()=>{var e,t;return null!==(t=null===(e=null==k?void 0:k.studioDownloadEntrance)||void 0===e?void 0:e.regions)&&void 0!==t?t:[]}),[null===(d=null==k?void 0:k.studioDownloadEntrance)||void 0===d?void 0:d.regions]),M=(0,j.useMemo)((()=>_===Ti.$J.studioDownload),[_]),R=(0,j.useMemo)((()=>!!I||!(!A&&!E.includes(L))),[A,E,L,I]),{roomCreateInfo:F}=(0,V.mp)(Ao),D=Boolean(null===(c=null==k?void 0:k.liveCenterConfig)||void 0===c?void 0:c.entrance)&&0===(null==F?void 0:F.never_go_live_flag),B=(null!==(u=null===(p=null==k?void 0:k.liveCenterConfig)||void 0===p?void 0:p.showCreatorHubRegion)&&void 0!==u?u:[]).includes(L),N=C?"portrait":"more",U=(0,j.useMemo)((()=>so(_)),[_]),[W,q]=(0,V.b7)(My,{selector:e=>{var t;return null!==(t=e.redDot)&&void 0!==t?t:[]},dependencies:[]});(0,j.useEffect)((()=>{var e;(null===(e=null==k?void 0:k.user)||void 0===e?void 0:e.uid)&&!f&&y.getCreateRoomInfo({})}),[y,null===(g=null==k?void 0:k.user)||void 0===g?void 0:g.uid,f]),(0,j.useEffect)((()=>{var e,t;D&&(t={anchor_id:null===(e=null==k?void 0:k.user)||void 0===e?void 0:e.uid},re.W.event("livesdk_anchor_live_center_entrance_show",{anchor_id:t.anchor_id,enter_from:"profile_hover",app_name:"webapp"}))}),[D,null===(m=null==k?void 0:k.user)||void 0===m?void 0:m.uid]);const[G,H]=(0,j.useState)(!1),{keyboardMenuItem:Z}=(({setShowKeyboardShortcut:e})=>{const{enhanceVideoConsumptionVersion:t="v1"}=(0,Jw.m)(),i=(0,j.useCallback)((()=>{e(!0),Zo.W.handleEnterKeyboardShortcut(),Ty.u8.setItem("hasCloseKeyboardShortcut",!0)}),[e]);return{keyboardMenuItem:"v3"===t?(0,o.jsx)(lS,{Icon:Kw.Z,text:"desktop_kb_shortcuts_menu",href:null,onClick:i,e2eTag:"keyboard-shortcut-entrance"},void 0):null}})({setShowKeyboardShortcut:H}),Q=(0,V.mp)(bi.e,{selector:e=>e.hasNewFeedbackReply,dependencies:[]}),Y=(0,j.useCallback)((()=>{Nw.e.handleEnterFeedback(Q?"history":"new")}),[Q]),K=Q?"/feedback/report":"/feedback",J=(0,j.useCallback)((()=>{Zo.W.handleEnterSet({enter_method:"top_bar"})}),[]),X=(0,j.useCallback)((()=>{H(!1),Ty.u8.setItem("hasCloseKeyboardShortcut",!0)}),[]),[ee,ie]=(0,j.useState)(0);(0,j.useEffect)((()=>{e?By.handleDarkModeShow():ie(0)}),[e]);const oe=(0,j.useCallback)((()=>{qs({enter_method:"top_bar"}),ie(1)}),[]),ae=(0,j.useCallback)((()=>{ie(0)}),[]),{value:se,toggle:le}=(0,j.useContext)(z),de=(0,te.fz)(Uw.e);(0,j.useEffect)((()=>{de.setIsDarkMode(se)}),[de,se]);const ce=(0,j.useCallback)((e=>{By.handleDarkModeClick(),le(e),S.Z.set(O.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"})}),[le]),pe="ltr"===h?"bottomRight":"bottomLeft",ue=(0,j.useCallback)((e=>C?(0,o.jsx)(nS,Object.assign({secUid:C.secUid,uniqueId:C.uniqueId,shouldStopPropagation:!1,reportTea:!1,teaParams:{to_user_id:C.uid}},{children:e}),void 0):null),[C]),ge=(0,j.useCallback)((()=>{Zo.W.handleEnterProfile({enter_method:"top_bar"})}),[]),me=(0,j.useCallback)((()=>{Py.F.handleClickAnalyticsButton()}),[]),he=(0,j.useCallback)((()=>{window.location.href=`${Ti.$J.studioDownload}?enter_from=profile`}),[]),_e=(0,j.useCallback)((()=>{-1!==W.indexOf(2)&&q.updateRedDot({type:2,redirect:`${location.origin}/business-suite`}),Zo.W.handleEnterBusiness()}),[W,q]),[ve,ye]=(0,V.b7)(tw);(0,j.useEffect)((()=>{(null==k?void 0:k.user)&&ye.fetchPermission()}),[k,ye]);const fe=ve.userState.showEntry,xe=(0,Ci.x)(null==k?void 0:k.abTestVersion,"expose_recharge_entry_pc"),ke=fe&&!U&&(void 0===xe||"v1"===xe),[we,Se]=(0,V.b7)(zw);(0,j.useEffect)((()=>{var e;(null==k?void 0:k.user)&&Se.getSubPermissionInfo({sec_anchor_id:null===(e=null==k?void 0:k.user)||void 0===e?void 0:e.secUid,need_current_state:!0})}),[Se,k]);const je=(null==k?void 0:k.searchVideoForLoggedin)&&[$.zp.searchHome(),$.zp.searchVideo()].includes(_)||[$.zp.messages()].includes(_),Ce=(0,be.stringify)(Yr()((0,be.parse)(v),"q","t")),Pe=Ce?`?${Ce}`:"",Te=`https://www.tiktok.com${$.zp.foryou()}${Pe}`,Oe=`/logout?redirect_url=${encodeURIComponent(je?Te:"undefined"==typeof window?"":(0,Ba.AY)())}`,Le=(0,j.useCallback)((()=>{x.handleLiveWebGetCoinShow({show_page:"setting",is_web_recharged_before:ve.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[x,ve.transactionHistory.isWebRechargedBefore]);(0,j.useEffect)((()=>{ke&&Le()}),[ke,Le]);const Ie=(0,j.useCallback)((()=>{x.handleLiveWebGetCoinClick({show_page:"setting",is_web_recharged_before:ve.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[x,ve.transactionHistory.isWebRechargedBefore]),Ae=(0,j.useCallback)((()=>{Ie(),b.push(`${Ti.jT.coin()}?enter_from=web_main_nav`)}),[Ie,b]),{hasDarkModeSwitch:Ee}=(0,T.ui)(),Re=(0,j.useMemo)((()=>!Ty.iv.getItem(dS)||(null==C?void 0:C.hasCollectionsRedDot)),[null==C?void 0:C.hasCollectionsRedDot]),Fe=(0,j.useCallback)((()=>{re.W.event("enter_collections_page"),Ty.iv.setItem(dS,!0)}),[]),De=(0,j.useCallback)((e=>(0,o.jsx)(Mw,Object.assign({},e),void 0)),[]),{colors:Be}=(0,a.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hn.G,Object.assign({backgroundColor:Be.BGSecondary,placement:pe,active:e,arrowMargin:15,margin:t},{children:(()=>{var e,t;switch(ee){case 0:return(0,o.jsxs)(eS,Object.assign({"data-e2e":i},{children:[C&&(0,o.jsx)(lS,{renderLink:ue,onClick:ge,Icon:xw.Z,text:"View profile",href:null,e2eTag:"profile-info"},void 0),ke&&(0,o.jsx)(lS,{Icon:vk.Z,text:"WebApp_coin_recharge_1",href:"/coin?enter_from=web_main_nav",forceSSR:!0,e2eTag:"recharge-entrance",onClick:Ae},void 0),Boolean(null==C?void 0:C.hasCollectionsAccess)&&(0,o.jsx)(lS,{Icon:De,text:"tiktok_series_webapp_option",href:"/series",forceSSR:!0,e2eTag:"tiktok-series-entrance",hasNew:Re,onClick:Fe},void 0),Boolean((null==C?void 0:C.analyticsOn)&&!(null===(e=C.proAccountInfo)||void 0===e?void 0:e.businessSuiteEntrance))&&(0,o.jsx)(lS,{Icon:kw.Z,text:"view_analytics",forceSSR:!0,href:"/analytics",e2eTag:"analytics-entrance",onClick:me},void 0),!M&&C&&!C.ftcUser&&R&&(0,o.jsx)(lS,{Icon:ww.Z,text:"ls_live_studio",forceSSR:!0,href:null,e2eTag:"live-studio-entrance",onClick:he},void 0),(null===(t=null==C?void 0:C.proAccountInfo)||void 0===t?void 0:t.businessSuiteEntrance)&&(0,o.jsx)(lS,{Icon:Sw.Z,text:"web_business_suite_entry",href:-1!==W.indexOf(2)?"":"/business-suite",forceSSR:!0,hasNew:-1!==W.indexOf(2),onClick:_e,e2eTag:"business-entrance"},void 0),D&&(0,o.jsx)(lS,{Icon:jw.Z,text:"live_center_title",href:`${la}?enter_from=profile_hover&lang=${null==k?void 0:k.language}`,forceSSR:!0,e2eTag:"live-center"},void 0),B&&(0,o.jsx)(lS,{Icon:Cw.Z,text:"live_creator_hub_name",href:`https://www.tiktok.com/live/creators?enter_from=${N}&lang=${null==k?void 0:k.language}&region=${null==k?void 0:k.region}`,forceSSR:!0,e2eTag:"live-creator-hub"},void 0),C&&(0,o.jsx)(lS,{Icon:Pw.Z,text:"settings",href:"/setting",onClick:J,forceSSR:!0,e2eTag:"settings-entrance"},void 0),(0,o.jsx)(lS,{Icon:Tw.Z,text:w,href:null,onClick:oe,e2eTag:"language-select"},void 0),(0,o.jsx)(lS,{Icon:Ow.Z,text:"Feedback and help",href:K,onClick:Y,hasNew:Q,forceSSR:!0,e2eTag:"feedback-entrance"},void 0),Z,Ee&&(0,o.jsx)(lS,Object.assign({Icon:Lw.Z,text:"pc_web_dark_mode",href:null,forceSSR:!0},{children:(0,o.jsx)(Ww.r,{checked:se,onChange:ce},void 0)}),void 0),C&&(0,o.jsx)(lS,{withBorder:!0,Icon:Iw.Z,text:"Log out",forceSSR:!0,href:Oe,e2eTag:"logout-entrance"},void 0)]}),void 0);case 1:return(0,o.jsx)(Yw,{onBack:ae},void 0);default:return null}})()}),void 0),(0,o.jsx)(Tt.u_,Object.assign({visible:G,onClose:X,maskCloseable:!1},{children:(0,o.jsx)(Aw.e,{onClose:X,isModal:!0},void 0)}),void 0)]},void 0)}));var pS=i(16492);const uS=(0,Vo.Z)("div",{target:"e13wiwn60"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},"label:DivHeaderRightContainer;"),gS=(0,Vo.Z)("button",{target:"e13wiwn61"})(de.Ph,(({theme:e})=>[(0,de.GI)({theme:e,typography:"P2",fontFamily:"Sofia",fontWeight:"semiBold",color:"Primary"}),(0,de.YJ)({direction:e.direction,marginStart:"6px",marginEnd:"-24px"})]),{minWidth:"88px",padding:"6px 8px",userSelect:"none",cursor:"pointer"},"label:ButtonSignUp;"),mS=(0,Vo.Z)(bt.W,{target:"e13wiwn62"})((({theme:e,theme:{direction:t}})=>[(0,de.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),(0,de.YJ)({direction:t,marginStart:"16px"}),{minWidth:"100px"}]),"label:StyledLoginButton;");mS.defaultProps=Object.assign(Object.assign({},mS.defaultProps),{"data-e2e":"top-login-button"});const hS=(0,Vo.Z)("i",{target:"e13wiwn63"})((({theme:{direction:e}})=>(0,de.YJ)({direction:e,marginStart:"16px"})),{position:"relative",cursor:"pointer",fontStyle:"normal",padding:"0 4px"},"label:IMoreIconWrapper;");hS.defaultProps=Object.assign(Object.assign({},hS.defaultProps),{"data-e2e":"see-more-icon"});const _S=(0,Vo.Z)(pS.Z,{target:"e13wiwn64"})({width:"20px",height:"20px",display:"block"},"label:StyledEllipsisVertical;"),vS=(0,Vo.Z)("i",{target:"e13wiwn65"})((({theme:e})=>[(0,de.YJ)({direction:e.direction,right:"unset",left:0}),{position:"absolute",width:"8px",height:"8px",borderRadius:"50%",background:e.colors.Primary,border:`1px solid ${e.colors.ConstTextInverse}`,boxSizing:"content-box",right:0,top:"-4px"}]),"label:IStyledRedDot;");var yS;vS.defaultProps=Object.assign(Object.assign({},vS.defaultProps),{"data-e2e":"profile-icon-red"}),function(e){e.ClickEntrance="click_upload_entrance"}(yS||(yS={}));const bS=e=>{re.W.event("click_upload_entrance",e)};var fS=i(85498);const xS=(0,Vo.Z)("div",{target:"e18d3d940"})((({needMarginLeft:e})=>({marginLeft:e?"16px":"0px",position:"relative",height:"36px","a:hover":[{textDecoration:"none"}],"@media screen and (max-width: 479px)":{display:"none"}})),"label:DivUploadContainer;");xS.defaultProps=Object.assign(Object.assign({},xS.defaultProps),{"data-e2e":"upload-icon"});const kS=(0,Vo.Z)(Tn.v,{target:"e18d3d941"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{display:"block",":hover":{textDecoration:"none"}},"label:StyledLinkText;");kS.defaultProps=Object.assign(Object.assign({},kS.defaultProps),{"data-e2e":"upload-icon"});const wS=(0,Vo.Z)("div",{target:"e18d3d942"})({padding:"16px",width:"282px",wordBreak:"break-word"},"label:DivTipWrapper;"),SS=(0,Vo.Z)("div",{target:"e18d3d943"})((({theme:{colors:e}})=>({minWidth:"110px",padding:"0 16px",height:"36px",border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",background:e.BGSecondary2,":hover":{backgroundColor:e.BGView},":target":{backgroundColor:"rgba(22, 24, 35, 0.06)"}})),"label:DivUpload;"),jS=(0,Vo.Z)(fS.Z,{target:"e18d3d944"})({height:"20px",width:"20px",marginRight:"8px"},"label:StyledPlusIcon;"),CS=(0,Vo.Z)("span",{target:"e18d3d945"})({fontStyle:"normal",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"ConstTextInverse2"},"label:SpanUploadText;"),PS=(0,Vo.Z)("h3",{target:"e18d3d946"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),TS=(0,Vo.Z)("p",{target:"e18d3d947"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),OS=(0,Vo.Z)("div",{target:"e18d3d948"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),LS=(0,Vo.Z)("button",{target:"e18d3d949"})(de.Ph,(({theme:e})=>(0,de.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),IS=(0,Vo.Z)(LS,{target:"e18d3d9410"})({width:"100%",height:"36px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, .12)",marginTop:"8px"},"label:StyledButtonUpload;"),AS=function({needMarginLeft:e}){var t,i;const n=(0,ni.Q)(),{colors:r,direction:s}=(0,a.u)(),[{tooltipPriority:l,uploadTooltipType:d},c]=(0,V.b7)(My),p=(0,ne.L)((()=>["user"]),[]),u=null!==(i=null===(t=null==p?void 0:p.user)||void 0===t?void 0:t.longVideoMinutes)&&void 0!==i?i:0,[g,m]=(0,j.useState)(!1),{lang:h}=(0,V.mp)(K.G,{selector:e=>({lang:e.lang}),dependencies:[]}),_=(0,j.useCallback)((()=>{c.setTooltipPriority(2),c.postScheduleRecord({ack_type:1})}),[c]),{isInVideoFeedRedesign:v}=(0,T.y7)(),y=(0,j.useMemo)((()=>v?{play_mode:"large_video_mode"}:{}),[v]),b=(0,j.useCallback)((()=>{bS(Object.assign({enter_method:"navigation_bar"},y)),Uo({target:"upload",order:1})}),[y]);(0,j.useEffect)((()=>{1===l?setTimeout((()=>{m(!0)}),1e3):m(!1)}),[l]),(0,j.useEffect)((()=>{g&&1===d&&(Ty.iv.setItem(Ly,!0),setTimeout((()=>{c.setTooltipPriority(2)}),15e3))}),[g,d,c]);const f=(0,j.useCallback)((()=>{c.setTooltipPriority(2),window.location.href=`https://www.tiktok.com/upload?lang=${h}`}),[c,h]),x=(0,o.jsxs)(SS,{children:[(0,o.jsx)(jS,{},void 0),(0,o.jsx)(CS,{children:n("Upload")},void 0)]},void 0),k="ltr"===s?"bottomRight":"bottomLeft";return(0,o.jsxs)(xS,Object.assign({needMarginLeft:e},{children:[(0,o.jsx)(Tn.v,Object.assign({forceSSR:!0,to:`/upload?lang=${h}`,onClick:b},{children:x}),void 0),(0,o.jsx)(Hn.G,Object.assign({active:g,backgroundColor:r.ConstSecondary2,placement:k,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(wS,{children:[(0,o.jsx)(PS,{children:n(0===d?"scheduler_welcome_tooltip_title":"new_video_length_tooltip_header")},void 0),(0,o.jsx)(TS,{children:0===d?n("scheduler_welcome_tooltip_des"):n("new_feature_guidance_text",{num:u}).replace(/%\w/,String(u))},void 0),0===d?(0,o.jsx)(OS,{children:(0,o.jsx)(LS,Object.assign({onClick:_},{children:n("OK")}),void 0)},void 0):(0,o.jsx)(IS,Object.assign({onClick:f},{children:n("new_feature_guidance_Upload")}),void 0)]},void 0)}),void 0)]}),void 0)},ES=function(){const e=(0,ni.Q)(),t=(0,V.qj)($t.r),{isInVideoFeedRedesign:i}=(0,T.y7)(),n=(0,j.useMemo)((()=>i?{play_mode:"large_video_mode"}:{}),[i]),a=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),bS(Object.assign({enter_method:"navigation_bar"},n)),t.openModal({query:{enter_method:"click_navigation_bar",redirect_url:"https://www.tiktok.com/upload/"}})}),[n,t]);return(0,o.jsx)("div",{children:(0,o.jsx)(kS,Object.assign({forceSSR:!0,to:"/upload",onClick:a},{children:(0,o.jsxs)(SS,{children:[(0,o.jsx)(jS,{},void 0),(0,o.jsx)(CS,{children:e("Upload")},void 0)]},void 0)}),void 0)},void 0)},MS=function({alwaysShowRechargeIconAndText:e=!1}){const t=(0,ni.Q)(),{user:i,deviceLimitRegisterExpired:n,signUpOpen:a=!0}=(0,V.mp)(K.G,{selector:e=>{var t,i,o,n;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user,deviceLimitRegisterExpired:null===(i=e.appContext)||void 0===i?void 0:i.deviceLimitRegisterExpired,signUpOpen:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.config)||void 0===n?void 0:n.signUpOpen}},dependencies:[]}),[r,s]=(0,j.useState)(!0),{hasNewFeedbackReply:l}=(0,V.mp)(bi.e),d=(0,V.qj)($t.r),[c,p]=(0,V.b7)(My,{selector:e=>-1!==e.redDot.indexOf(1),dependencies:[]}),u=(0,j.useCallback)(((e=!1)=>()=>{d.openModal({closeable:!0,isSignup:e,query:{enter_method:"click_top_bar",redirect_url:(0,Ba.AY)()}})}),[d]),{active:g,handleMouseEnter:m,handleMouseLeave:h}=(0,Gn.R)(500),_=(0,ne.L)((()=>["abTestVersion"]),[]),v=(0,Ci.x)(null==_?void 0:_.abTestVersion,"expose_recharge_entry_pc"),y=void 0!==v&&"v2"===v,b=y&&r;(0,j.useEffect)((()=>{r&&y&&"HAS_ENTERED_VALUE"===(0,yi.le)("HAS_ENTERED_KEY")&&s(!1)}),[r,y]);const f=(0,j.useCallback)((()=>{c&&p.updateRedDot({type:1}),m(),Py.F.handleProfileHoveShow()}),[c,p,m]);if(!i)return(0,o.jsxs)(uS,{children:[(0,o.jsx)(ES,{},void 0),!n&&a&&(0,o.jsx)(gS,Object.assign({onClick:u(!0)},{children:t("common_notification_unlogged_button")}),void 0),(0,o.jsx)(mS,Object.assign({size:"medium",buttonTheme:"primary",onClick:u(!1)},{children:t("Log In")}),void 0),(0,o.jsxs)(hS,Object.assign({onMouseEnter:f,onMouseLeave:h},{children:[(0,o.jsx)(_S,{},void 0),(0,o.jsx)(cS,{active:g,e2eTag:"see-more-popup",margin:-13},void 0)]}),void 0),(0,o.jsx)(Gy,{userPopupActive:g},void 0)]},void 0);const{uniqueId:x,secUid:k}=i;return(0,o.jsxs)(uS,{children:[!b&&(0,o.jsx)(AS,{},void 0),(null==i?void 0:i.hasIMPermission)&&b&&(0,o.jsx)(Cy,{removeMarginLeft:!0},void 0),(null==i?void 0:i.hasIMPermission)&&!b&&(0,o.jsx)(Cy,{},void 0),(0,o.jsx)(rk,{},void 0),b&&(0,o.jsx)(AS,{needMarginLeft:!0},void 0),(0,o.jsx)(mw,{alwaysShowRechargeIconAndText:e},void 0),(0,o.jsx)(sk,{children:(0,o.jsxs)(Fy,Object.assign({onMouseEnter:f,onMouseLeave:h},{children:[(l||c)&&(0,o.jsx)(vS,{className:"red-dot"},void 0),(0,o.jsx)(cS,{margin:-12,active:g,e2eTag:"profile-popup"},void 0)]}),void 0)},void 0),(0,o.jsx)(hk,{uniqueId:x,secUid:k,userPopupActive:g},void 0),(0,o.jsx)(Gy,{userPopupActive:g},void 0),(null==i?void 0:i.hasCollectionsAccess)&&(0,o.jsx)(yw,{userPopupActive:g},void 0)]},void 0)};var RS,FS;!function(e){e.Show="browser_push_notifications_show",e.Granted="browser_push_notifications_allow",e.Denied="browser_push_notifications_block",e.Default="browser_push_notifications_close"}(RS||(RS={})),function(e){e.Show="guide_permission_popup_show",e.Yes="guide_permission_popup_turn_on",e.No="guide_permission_popup_cancel"}(FS||(FS={}));var DS,BS=i(42685);function zS(){return e=this,t=void 0,n=function*(){const{FCM:e}=yield Promise.all([i.e(9207),i.e(7954),i.e(5079),i.e(9602),i.e(9026),i.e(1565)]).then(i.bind(i,22343));return e},new((o=void 0)||(o=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}));var e,t,o,n}!function(e){e.GrantedSuccess="GRANTED_SUCCESS",e.GrantedFailed="GRANTED_FAILED",e.Denied="DENIED",e.Default="DEFAULT",e.Failed="FAILED"}(DS||(DS={}));const NS="web-push-permission";let US=class{constructor(e){this.security=e}initFCM(e,t){const i={firebaseConfig:{apiKey:"AIzaSyDHGqRfibWT6DffZBTYlhXfTQHAP_ri1MI",appId:"1:943363548815:web:f9a03b69b49a48fb5c72fa",authDomain:"tiktok-webapp.firebaseapp.com",databaseURL:"https://tiktok-webapp.firebaseio.com",measurementId:"G-WTKRD0C8TF",messagingSenderId:"943363548815",projectId:"tiktok-webapp",storageBucket:"tiktok-webapp.appspot.com"},messagingConfig:{vapidKey:"BAxZo-Q87DGZeDuCG33n7l9hsdXb2Zwf3-Cc9_NPuaNZvqMCHhCtCm-5kivnFwhVef1N06SoKbWlJBpZU0jcfa4",onMessageShow:!0,requestPermission:!1},commonParameter:{aid:1988,sender_id:17,app_region:e,app_language:t,version_code:"1.0.0"}};return(0,id.D)([zS(),this.security.init$]).pipe((0,Li.z)((([e])=>{const t=new e(i.firebaseConfig,i.messagingConfig,i.commonParameter);return(0,_c.D)(t.requestPermission().then((e=>{switch(e){case"granted":return t.onTokenRefresh().then((()=>"GRANTED_SUCCESS")).catch((()=>"GRANTED_FAILED"));case"denied":return"DENIED";default:return"DEFAULT"}})))})),(0,Ai.K)((()=>(console.warn("fcm init failed"),(0,Ii.of)("FAILED")))))}getPushPermissionAllowed(){var e;try{const t=null!==(e=Ty.iv.getItem(NS))&&void 0!==e?e:[],i=Date.now();return 0===t.length?(t.unshift(i),Ty.iv.setItem(NS,t),(0,Ii.of)(!0)):i-t[0]<864e5?(0,Ii.of)(!1):t.length<3?(t.unshift(i),Ty.iv.setItem(NS,t),(0,Ii.of)(!0)):i-t[2]<2592e6?(0,Ii.of)(!1):(t.unshift(i),Ty.iv.setItem(NS,t.slice(0,3)),(0,Ii.of)(!0))}catch(e){return(0,Ii.of)(!1)}}};US=(0,m.__decorate)([(0,ae.G)(),(0,m.__metadata)("design:paramtypes",[BS.$])],US);let WS=class extends pe.D{constructor(e){super(),this.service=e,this.defaultState={pushPermissionOn:!1}}setPushPermissionOn(e,t){e.pushPermissionOn=t}initFCM(e){return e.pipe((0,Ki.b)((({showMethod:e})=>{e&&(e=>{re.W.event("browser_push_notifications_show",{show_method:e})})(e)})),(0,Li.z)((({region:e,lang:t,showMethod:i,callback:o})=>this.service.initFCM(e,t).pipe((0,Ki.b)((e=>{if(null==o||o(e),i)switch(e){case"GRANTED_SUCCESS":case"GRANTED_FAILED":(e=>{re.W.event("browser_push_notifications_allow",{show_method:e})})(i);break;case"DENIED":(e=>{re.W.event("browser_push_notifications_block",{show_method:e})})(i);break;case"DEFAULT":(e=>{re.W.event("browser_push_notifications_close",{show_method:e})})(i)}})),(0,_e.U)((()=>this.noop()))))))}judgeIfPush(e){return e.pipe((0,Li.z)((({region:e,lang:t,vid:i})=>this.service.getPushPermissionAllowed().pipe((0,_e.U)((o=>o?"v3"===i?this.getActions().setPushPermissionOn(!0):this.getActions().initFCM({region:e,lang:t,showMethod:"direct_ask_notification_permission"}):this.noop())),(0,Ai.K)((()=>(0,Ii.of)(this.noop())))))))}};(0,m.__decorate)([(0,ue.lF)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[Object,Boolean]),(0,m.__metadata)("design:returntype",void 0)],WS.prototype,"setPushPermissionOn",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],WS.prototype,"initFCM",null),(0,m.__decorate)([(0,ue.Qm)(),(0,m.__metadata)("design:type",Function),(0,m.__metadata)("design:paramtypes",[me.y]),(0,m.__metadata)("design:returntype",void 0)],WS.prototype,"judgeIfPush",null),WS=(0,m.__decorate)([(0,ge.Y)("Push"),(0,m.__metadata)("design:paramtypes",[US])],WS);var qS=i(4139);const GS=(0,qS.Z)("div",{target:"e1gxxrd20"})((({theme:{colors:e}})=>({position:"absolute",boxSizing:"border-box",width:"400px",padding:"32px",top:"0",left:"50%",transform:"translateX(-50%)",background:e.BGPrimary,boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px",zIndex:2,textAlign:"center"})),"label:DivPushPermissionContainer;"),HS=(0,qS.Z)("div",{target:"e1gxxrd21"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P0",fontWeight:"bold",fontFamily:"Proxima"})),"label:DivPushPermissionTitle;"),ZS=(0,qS.Z)("div",{target:"e1gxxrd22"})((({theme:e})=>(0,de.GI)({theme:e,typography:"P2",fontFamily:"Proxima"})),(({theme:{colors:e}})=>({margin:"8px 0 24px",color:e.TextPrimary})),"label:DivPushPermissionSubtitle;"),$S=(0,qS.Z)("div",{target:"e1gxxrd23"})({display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"},"label:DivPushPermissionButtonContainer;"),VS=(0,qS.Z)(bt.W,{target:"e1gxxrd24"})({"min-width":"164px"},"label:StyledButton;"),QS=function({permissionCallback:e}){const t=(0,ni.Q)();(0,j.useEffect)((()=>{re.W.event("guide_permission_popup_show")}),[]);const i=(0,j.useCallback)((()=>{e("denied"),re.W.event("guide_permission_popup_cancel")}),[e]),n=(0,j.useCallback)((()=>{e("granted"),re.W.event("guide_permission_popup_turn_on")}),[e]);return(0,o.jsxs)(GS,{children:[(0,o.jsx)(HS,{children:t("push_popup_title")},void 0),(0,o.jsx)(ZS,{children:t("push_popup_content")},void 0),(0,o.jsxs)($S,{children:[(0,o.jsx)(VS,Object.assign({buttonTheme:"default",size:"largeNew",onClick:i},{children:t("push_popup_btn1")}),void 0),(0,o.jsx)(VS,Object.assign({buttonTheme:"primary",size:"largeNew",onClick:n},{children:t("push_popup_btn2")}),void 0)]},void 0)]},void 0)},YS=(0,qS.Z)("div",{target:"e15qqn8h0"})({position:"relative"},(0,de.f1)({max:767,style:{display:"none"}}),"label:DivHeaderCenterContainer;"),KS=()=>{const{pathname:e}=(0,P.TH)();return(0,j.useMemo)((()=>(0,Re.BL)(e)||(0,Re.I8)(e)),[e])},JS=(0,j.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,T.y7)(),{isDetailPageCoverQuantityTestGroup:i}=(0,T.t1)(),{isInNewVideoDetail:n}=(0,T.xy)(),a=KS(),r=t||i||n||a?Ov:Tv;return(0,o.jsx)(r,Object.assign({},e),void 0)})),XS=(0,j.memo)((function(){const{isLoaded:e,isGrayFilter:t}=(0,V.mp)(K.G,{selector:({appContext:e})=>({isLoaded:Boolean(e),isGrayFilter:null==e?void 0:e.config.isGrayFilter}),dependencies:[]}),[i,n]=(0,j.useState)(0),a=(0,j.useCallback)((({hasModal:e,scrollWidth:t})=>{n(e?t:0)}),[]),{pushPermissionOn:r,permissionCallback:s}=function(){const[{pushPermissionOn:e},t]=(0,V.b7)(WS),{lang:i,region:o,user:n,abTestVersion:a}=(0,V.mp)(K.G,{selector:e=>{var t,i,o,n;return{lang:e.lang,region:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.region)&&void 0!==i?i:"",user:null===(o=e.appContext)||void 0===o?void 0:o.user,abTestVersion:null===(n=e.appContext)||void 0===n?void 0:n.abTestVersion}},dependencies:[]}),r=(0,Ci.x)(a,"web_push_test"),s=(0,j.useCallback)((e=>{t.setPushPermissionOn(!1),"granted"===e&&t.initFCM({region:o,lang:i,showMethod:"click_guide_permission_popup_turn_on"})}),[o,i,t]),l=(0,j.useCallback)((()=>{zS().then((e=>{if(("v2"===r||"v3"===r)&&e.isAvailable()&&("US"!==o||n))switch(Notification.permission){case"denied":return;case"granted":t.initFCM({region:o,lang:i});break;default:t.judgeIfPush({region:o,lang:i,vid:r})}})).catch((()=>{console.warn("load fcm failed")}))}),[r,o,n,t,i]);return(0,j.useEffect)((()=>{l()}),[l]),{pushPermissionOn:e,permissionCallback:s}}(),{subscribeModalChange:l}=(0,Xr.J)();(0,j.useEffect)((()=>{const e=l(a);return()=>{e()}}),[a,l]);const{value:d}=(0,j.useContext)(z);return(0,o.jsxs)(Pv,Object.assign({style:{right:i/2+"px"}},{children:[r?(0,o.jsx)(QS,{permissionCallback:s},void 0):null,(0,o.jsxs)(JS,{children:[(0,o.jsx)(ms,{isGrayFilter:t,isDark:d},void 0),(0,o.jsx)(YS,{children:(0,o.jsx)(py,{},void 0)},void 0),e&&(0,o.jsx)(MS,{},void 0)]},void 0)]}),void 0)}));var ej=i(50482);const tj=(0,ej.ZP)({resolved:{},chunkName:()=>"following",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(9013),i.e(3944),i.e(1454),i.e(8617),i.e(5383),i.e(2143),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(4990),i.e(2539),i.e(528),i.e(5690),i.e(8376),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(9050),i.e(426),i.e(1073),i.e(2322),i.e(4858),i.e(3641),i.e(2028),i.e(556)]).then(i.bind(i,60056)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>60056}),ij=(0,ej.ZP)({resolved:{},chunkName:()=>"search",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(7991),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(2085),i.e(3872),i.e(6464)]).then(i.bind(i,60343)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>60343}),oj=(0,ej.ZP)({resolved:{},chunkName:()=>"user",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(9013),i.e(7991),i.e(3944),i.e(1454),i.e(8617),i.e(5383),i.e(2143),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(4990),i.e(9754),i.e(8992),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(9050),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(7155),i.e(4602),i.e(378)]).then(i.bind(i,35116)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>35116}),nj=(0,ej.ZP)({resolved:{},chunkName:()=>"challenge",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7991),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(9050),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(7155),i.e(4602),i.e(7454)]).then(i.bind(i,81108)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>81108}),aj=(0,ej.ZP)({resolved:{},chunkName:()=>"video",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(9013),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(9050),i.e(7155),i.e(2322),i.e(4858),i.e(6791)]).then(i.bind(i,48919)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>48919}),rj=(0,ej.ZP)({resolved:{},chunkName:()=>"playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(6313),i.e(3458),i.e(4321),i.e(426),i.e(3594),i.e(2768),i.e(7449)]).then(i.bind(i,59954)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>59954}),sj=(0,ej.ZP)({resolved:{},chunkName:()=>"music",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7991),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(9050),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(7155),i.e(2768),i.e(4602),i.e(4106)]).then(i.bind(i,21309)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>21309}),lj=(0,ej.ZP)({resolved:{},chunkName:()=>"foryou",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(9013),i.e(3944),i.e(1454),i.e(8617),i.e(5383),i.e(2143),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(4990),i.e(2539),i.e(528),i.e(5690),i.e(8376),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(5714),i.e(2085),i.e(9050),i.e(7155),i.e(2322),i.e(4858),i.e(3641),i.e(2028),i.e(427),i.e(8782)]).then(i.bind(i,72246)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>72246}),dj=(0,ej.ZP)({resolved:{},chunkName:()=>"topics",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(9013),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(5714),i.e(9050),i.e(2322),i.e(427),i.e(3062)]).then(i.bind(i,43410)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>43410},{resolveComponent:e=>e.Topics}),cj=(0,ej.ZP)({resolved:{},chunkName:()=>"question",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(7991),i.e(7063),i.e(3447),i.e(7767),i.e(7769),i.e(2388),i.e(6313),i.e(5714),i.e(3458),i.e(2085),i.e(4321),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(6516)]).then(i.bind(i,13640)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>13640}),pj=(0,ej.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(8844),i.e(7063),i.e(3447),i.e(5714),i.e(8726)]).then(i.bind(i,34847)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>34847}),uj=(0,ej.ZP)({resolved:{},chunkName:()=>"messages",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(7063),i.e(3447),i.e(7767),i.e(6313),i.e(4158)]).then(i.bind(i,2812)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>2812}),gj=(0,ej.ZP)({resolved:{},chunkName:()=>"discover",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(7785),i.e(5029),i.e(8674),i.e(4067),i.e(4585),i.e(966),i.e(9503),i.e(492),i.e(7494),i.e(270),i.e(937),i.e(6609),i.e(8457),i.e(9349),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(7063),i.e(3447),i.e(7767),i.e(2768),i.e(5023)]).then(i.bind(i,65603)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>65603}),mj=(0,ej.ZP)({resolved:{},chunkName:()=>"setting",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(8844),i.e(4067),i.e(7166),i.e(9013),i.e(3944),i.e(1454),i.e(8617),i.e(5383),i.e(2143),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(4990),i.e(9207),i.e(7954),i.e(5079),i.e(9602),i.e(9026),i.e(1565),i.e(7063),i.e(6313),i.e(3458),i.e(4314)]).then(i.bind(i,27939)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>27939}),hj=(0,ej.ZP)({resolved:{},chunkName:()=>"faq",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(6189),i.e(4398),i.e(8215),i.e(4922),i.e(9770),i.e(4372),i.e(7063),i.e(4038),i.e(1720)]).then(i.bind(i,22258)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>22258}),_j=(0,ej.ZP)({resolved:{},chunkName:()=>"report",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(5029),i.e(8994),i.e(7063),i.e(4038),i.e(8983)]).then(i.bind(i,36102)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>36102}),vj=(0,qS.Z)("div",{target:"e1irlpdw0"})((({extraTop:e=0,maxWidth:t})=>({marginTop:de.Mz+e,display:"flex",width:"100vw",maxWidth:null!=t?t:de.XP,justifyContent:"space-between",alignSelf:"center",flex:"1 1 auto"})),"label:DivBodyContainer;"),yj=(0,qS.Z)("div",{target:"e1irlpdw1"})({},"label:DivSideNavContainer;"),bj=(0,qS.Z)("div",{target:"e1irlpdw2"})((({status:e,theme:{colors:t}})=>(0,de.f1)({max:767,style:[{position:"fixed",inset:de.Mz-1+"px 0 0",zIndex:99,backgroundColor:t.ConstBGInverse2,opacity:e===Q.d0||e===Q.cn?1:0},e===Q.d0||e===Q.Ix?{transition:"all 0.3s"}:null,e===Q.Wj?{pointerEvents:"none"}:null]})),"label:DivSideNavMask;"),fj=(0,qS.Z)(vj,{target:"e1x8fefz0"})({maxWidth:"unset",justifyContent:"flex-start"},"label:StyledDivBodyContainerV2;"),xj=(0,j.memo)((e=>{const{pathname:t}=(0,P.TH)(),{isInVideoFeedRedesign:i}=(0,T.y7)(),n=i||(0,Re.BL)(t)?fj:vj;return(0,o.jsx)(n,Object.assign({},e),void 0)})),kj=[$.Ad.messages,$.Ad.setting,$.Ad.settingBlockList,$.Ad.feedback,$.Ad.feedbackReport,$.Ad.feedbackHistory],wj=[$.Ad.feedback,$.Ad.feedbackReport,$.Ad.feedbackHistory],Sj=(0,o.jsx)((function(e){return j.createElement("svg",mi({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 88 88",width:"1em",height:"1em"},e),ui||(ui=j.createElement("g",{fillRule:"evenodd",clipPath:"url(#tiktok-icon_svg__clip0_18497_176148)",clipRule:"evenodd"},j.createElement("path",{fill:"#25F4EE",d:"M59.338 5.009A20.23 20.23 0 0158.712 0H44.313v57.2c0 6.596-5.325 11.943-11.894 11.943-6.57 0-11.894-5.347-11.894-11.943 0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V30.432a27.04 27.04 0 00-3.756-.26C17.552 30.171 5.5 42.271 5.5 57.2c0 14.927 12.052 27.029 26.919 27.029 14.658 0 26.586-11.763 26.919-26.4V28.56a34.175 34.175 0 0019.407 6.011V20.114c-9.342 0-17.19-6.42-19.407-15.105z"}),j.createElement("path",{fill:"black",d:"M63.093 8.781a20.23 20.23 0 01-.626-5.009H48.069v57.2c0 6.596-5.326 11.943-11.895 11.943S24.28 67.568 24.28 60.972c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V34.205a27.04 27.04 0 00-3.756-.261c-14.867 0-26.919 12.1-26.919 27.028 0 14.928 12.052 27.029 26.92 27.029 14.657 0 26.585-11.763 26.918-26.4V32.333a34.174 34.174 0 0019.407 6.01V23.888c-9.342 0-17.19-6.42-19.407-15.106z"}),j.createElement("path",{fill:"#FE2C55",d:"M59.063 3.77a20.135 20.135 0 007.514 12.209 20.07 20.07 0 01-4.11-12.208h-3.404zm19.68 19.762V34.57a34.174 34.174 0 01-19.406-6.011v29.268c-.333 14.637-12.261 26.4-26.919 26.4a26.742 26.742 0 01-17.069-6.128c4.937 6.044 12.432 9.9 20.824 9.9 14.658 0 26.587-11.763 26.92-26.4V32.331a34.174 34.174 0 0019.406 6.01V23.886c-1.284 0-2.539-.121-3.755-.353zm-42.569 10.41v11.921a11.837 11.837 0 00-3.756-.608c-6.569 0-11.894 5.347-11.894 11.943 0 4.263 2.224 8.004 5.57 10.117a11.923 11.923 0 01-1.815-6.344c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.576.213 3.756.607V34.203a27.044 27.044 0 00-3.755-.261z"}))),gi||(gi=j.createElement("defs",null,j.createElement("clipPath",{id:"tiktok-icon_svg__clip0_18497_176148"},j.createElement("path",{fill:"white",d:"M0 0h88v88H0z"})))))}),{style:{margin:"auto",width:"77px",height:"88px"}},void 0);function jj({location:e}){const t=(0,j.useMemo)((()=>({pathname:e.pathname.replace(/\/\/+/g,"/"),search:e.search})),[e.pathname,e.search]);return(0,o.jsx)(P.l_,{to:t},void 0)}function Cj(){return(0,o.jsx)("link",{rel:"stylesheet",href:Y},void 0)}const Pj=()=>{const[{appContext:e,isSideNavActive:t},i]=(0,V.b7)(K.G,{selector:e=>({appContext:e.appContext,isSideNavActive:e.sideNavActive}),dependencies:[]}),n=(0,P.$B)(kj),a=(0,P.$B)(wj),{user:r,language:s="en",appId:l,env:d}=(0,J.m7)(e),c=(0,j.useRef)(null);((e=!0)=>{const{language:t}=(0,J.m7)((0,ne.L)((()=>["language"]),[])),i=(0,j.useRef)(t),o=(0,V.qj)(fi.X),n=(0,j.useCallback)((()=>{o.setCookieBannerShowing(!0)}),[o]),a=(0,j.useCallback)((()=>{o.setCookieBannerShowing(!1)}),[o]);(0,j.useEffect)((()=>{e&&_i.f.loadCookieBanner({locale:t,onShow:n,onHide:a})}),[t,a,n,e]),(0,j.useEffect)((()=>{e&&(i.current&&t!==i.current&&_i.f.updateBannerLocale(t),i.current=t)}),[t,e])})(),function(e){const t=(0,V.qj)(bi.e);(0,j.useEffect)((()=>{e&&!e.ftcUser&&t.getNewestReply()}),[e,t])}(r),function(e,t,i){(0,j.useEffect)((()=>{e&&new hi.R({aid:1459,service:"www.tiktok.com",host:"boe"===(null==i?void 0:i.type)?"https://boei18n-device.bytedance.net":1180===t?"https://ttwid-sg.byteoversea.com":"https://ttwid-va.byteoversea.com"}).init()}),[t,null==i?void 0:i.type,e])}(r,l,d),function(){const[e,t]=(0,V.b7)(vi.D);(0,j.useEffect)((()=>{const i=i=>{if(e.isModalShow)return;i.preventDefault();const o=e.isExpand||!(0,yi.le)(O.OV);o&&t.handleShowSnack(!0),t.storeDeferredPrompt(i),t.setIsPwaInstallable(!0),t.setIsExpand(o)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}}),[t,e.isExpand,e.isModalShow])}(),(0,X.u8)(!1),function(){const e=(0,V.qj)(ee.f),t=(0,j.useCallback)((()=>{window.ttWebappFocusTime||(window.ttWebappFocusTime=Date.now(),window.ttWebappBlurTime=null)}),[]),i=(0,j.useCallback)((()=>{const t=Date.now();e.updateVideoFocusTime({blurTime:t}),window.ttWebappFocusTime=null,window.ttWebappBlurTime=t}),[e]);(0,j.useEffect)((()=>{window.ttWebappFocusTime=Date.now()}),[]),(0,j.useEffect)((()=>(window.addEventListener("blur",i),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",i)})),[i,t])}(),function(){const{pathname:e}=(0,P.TH)();(0,j.useEffect)((()=>{window.scrollTo(0,0)}),[e])}(),function(){const{photoSensitiveVideosSetting:e}=(0,V.mp)(xi.P);(0,j.useEffect)((()=>{ki.W.handleRemovePhotosensitiveStatus(1===e?"on":"off")}),[])}();const{isShow:p,url:u=""}=function(){const{search:e,pathname:t}=(0,P.TH)();return(0,j.useMemo)((()=>{const i=new URLSearchParams(e),o=i.get("scene"),n=i.get("redirect_url");return 0!==(null==o?void 0:o.indexOf("ecom_email"))||!n||0!==n.indexOf("aweme")&&0!==n.indexOf("sslocal")?{isShow:!1}:{isShow:!0,url:`https://www.tiktok.com${t}${e}`}}),[])}(),{bodyContainerWidth:g,sideNavWidth:m}=(()=>{const{isInVideoFeedRedesign:e}=(0,T.y7)(),{isDetailPageCoverQuantityTestGroup:t}=(0,T.t1)(),{isInNewVideoDetail:i}=(0,T.xy)(),o=KS(),n=e||t||i||o;return{sideNavWidth:n?240:void 0,bodyContainerWidth:n?"100vw":void 0}})(),h=(0,j.useCallback)((()=>{i.setSideNavActive(!1)}),[i]),{popupHeight:_,handlePopupHide:v,handlePopupShow:y}=function(){const[e,t]=(0,j.useState)(0),i=(0,j.useCallback)((()=>{t(0)}),[]);return{popupHeight:e,handlePopupShow:(0,j.useCallback)((e=>{t(e)}),[]),handlePopupHide:i}}(),b=(0,o.jsx)(Q.ZP,Object.assign({timeout:300,in:t,nodeRef:c},{children:e=>(0,o.jsxs)("div",Object.assign({ref:c},{children:[(0,o.jsx)(bj,{status:e,onClick:h},void 0),(0,o.jsx)(Vr,{extraWidth:m,extraTop:_,transStatus:e,lang:s},void 0)]}),void 0)}),void 0);return(0,o.jsxs)(ls,Object.assign({isMobile:!1,loading:Sj},{children:[(0,o.jsx)(Ae,{appContext:e,slardarBid:Ee.Li},void 0),(0,o.jsx)(Ue,{appContext:e},void 0),(0,o.jsx)(qe,{appContext:e},void 0),(0,o.jsx)(XS,{},void 0),(0,o.jsx)(Cj,{},void 0),(0,o.jsx)(qt,{onShow:y,onHide:v},void 0),(0,o.jsxs)(xj,Object.assign({extraTop:_,maxWidth:g},{children:[!n&&(0,o.jsx)(yj,{children:b},void 0),(0,o.jsxs)(P.rs,{children:[(0,o.jsx)(P.AW,{path:"(.*//+.*)",exact:!0,strict:!0,component:jj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.following,component:tj},void 0),(0,o.jsx)(P.AW,{path:$.Ad.searchHome,component:ij},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.user,component:oj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.challenge,component:nj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.video,component:aj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.musicPlaylist,component:rj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.music,component:sj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:Gt.Vh,component:lj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.topics,component:dj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.question,component:cj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.expansion,component:pj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.messages,component:uj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.discover,component:gj},void 0),(0,o.jsx)(P.AW,{path:$.Ad.setting,component:mj},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.feedbackReport,component:_j},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.feedbackHistory,component:_j},void 0),(0,o.jsx)(P.AW,{exact:!0,path:$.Ad.feedback,component:hj},void 0),(0,o.jsx)(Ht,{path:"*"},void 0)]},void 0)]}),void 0),a&&(0,o.jsx)(sl,{},void 0),(0,o.jsx)(Xt,{},void 0),(0,o.jsx)(Cv,{},void 0),p&&(0,o.jsx)(pi,{url:u},void 0),(0,o.jsx)("script",{dangerouslySetInnerHTML:{__html:';if ("serviceWorker" in navigator) {window.addEventListener("load", function() {navigator.serviceWorker.register("/sw.js").catch(function() {console.log("Service worker registration failed");});});}'}},void 0)]}),void 0)},Tj=k()(Object.values($.Ad));!function(e,t){const{beforeStart:l=d(),ns:p}=null!=t?t:{};(function(){return(0,m.__awaiter)(this,void 0,void 0,(function*(){"Promise"in window?(h.some((e=>!(e in window)))&&(yield i.e(1342).then(i.bind(i,16376))),(_.some((e=>!(e in Array.prototype)))||v.some((e=>!(e in Object))))&&(yield Promise.all([i.e(800).then(i.t.bind(i,67735,23)),i.e(800).then(i.t.bind(i,76299,23)),i.e(800).then(i.t.bind(i,58935,23)),i.e(800).then(i.t.bind(i,33759,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))})().then((()=>Promise.all([(0,s.g)(),(0,y.Bs)(),l(),(0,r.TA)(),b(p)]))).then((()=>{!function(e){const t=document.querySelector("#app");{const i=(0,n.Z)({key:"tiktok"});(0,c.hydrate)((0,o.jsx)(a.C,Object.assign({value:i},{children:(0,o.jsx)(e,{},void 0)}),void 0),t)}}(e)})).catch((e=>{console.error(e)}))}((()=>(0,o.jsx)(Z,Object.assign({supportRoutes:Tj},{children:(0,o.jsx)(Pj,{},void 0)}),void 0)),{beforeStart:void 0})},21396:(e,t,i)=>{"use strict";i.d(t,{s:()=>o});const o=new(i(12579).O)("i18n")},30121:(e,t,i)=>{"use strict";i.d(t,{Jc:()=>n,Vh:()=>a});var o=i(29046);const n=["/en","/ar","/de-DE","/es","/fi-FI","/fr","/id-ID","/ja-JP","/ko-KR","/ms-MY","/ru-RU","/th-TH","/tr-TR","/vi-VN","/zh-Hans","/zh-Hant-TW","/he-IL","/jv-ID","/ceb-PH","/cs-CZ","/it-IT","/hu-HU","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/sv-SE","/fil-PH","/el-GR","/uk-UA","/ur","/hi-IN","/bn-IN","/my-MM","/km-KH"],a=[o.Ad.home,o.Ad.foryou,...n];var r;o.gs.home,o.gs.foryou,o.gs.discover,o.gs.topics,function(e){e.Video="video",e.User="user",e.Challenge="hashtag",e.Trending="fyp",e.Live="live",e.Message="message",e.Setting="setting",e.Music="music",e.SearchResults="search",e.Discover="discover",e.Following="following",e.Topics="topics",e.Profile="profile",e.Expansion="expansion",e.Inbox="inbox",e.Report="report",e.Feedback="feedback"}(r||(r={}))},16119:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});const o=i(91051).useLayoutEffect},88671:(e,t,i)=>{"use strict";i.d(t,{fB:()=>l,Nr:()=>d});var o=i(57341),n=i.n(o),a=i(53586),r=i.n(a),s=i(91051);function l(e,t,i){return(0,s.useMemo)((()=>n()(e,i)),t)}function d(e,t,i){return(0,s.useMemo)((()=>r()(e,i)),t)}},8721:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,Q:()=>l});var o=i(91051),n=i(21041),a=i(67974),r=i(40798);function s(e,t,i){const{pathname:o,search:r}=(0,n.TH)();return(0,a.e4)({isMobile:e,search:r,pathname:o,isSearchbot:t,isNow:i})}const l=(e="Webapp")=>{const{t}=(0,o.useContext)(r.OO);return(0,o.useCallback)(((i,o,n)=>t(i,Object.assign({ns:e},o),n)),[e,t])}},40798:(e,t,i)=>{"use strict";i.d(t,{CJ:()=>l,OO:()=>d,bd:()=>c});var o=i(11040),n=i(16926),a=i(91051),r=i(21396);let s;const l={type:"intl3rdParty",name:"intl-react-plugin",init(e){s=e}},d=(0,a.createContext)({t:e=>e,lang:"en"}),c=({lang:e,t,children:i})=>{const l=(0,a.useMemo)((()=>[{provide:r.s,useValue:s.t}]),[]),c=(0,a.useMemo)((()=>({t:null!=t?t:s.t,lang:e})),[e,t]);return(0,o.jsx)(d.Provider,Object.assign({value:c},{children:(0,o.jsx)(n.yx,Object.assign({providers:l},{children:i}),void 0)}),void 0)}},66958:(e,t,i)=>{"use strict";i.d(t,{P4:()=>n,MB:()=>a,JD:()=>r,yl:()=>l,fH:()=>d,Pz:()=>p,_9:()=>c,cC:()=>h});var o=i(25508);const{getPureLivePath:n,getPureMusicPath:a,getPureTagPath:r,getPureStickerPath:s,getPureUserPath:l,getPureVideoPath:d,getPureQuestionPath:c}=o.Z,{getPureUniqueId:p,hasIllegalText:u,isPureNumber:g,isRealUniqueId:m,purifyMusicName:h}=o.c},50218:(e,t,i)=>{"use strict";i.d(t,{Hg:()=>r,oC:()=>s,Xq:()=>l,Io:()=>d,FZ:()=>c,cQ:()=>p,ws:()=>u,Dj:()=>g,bf:()=>m,BL:()=>h,TX:()=>_,Gc:()=>v,at:()=>y,u7:()=>b,I8:()=>f,C2:()=>x});var o=i(21041),n=i(29046),a=i(30121);function r(e){const t=e.replace(/\/$/,"");return e===n.Ad.home||a.Jc.includes(t)}function s(e){return e.replace(/\/$/,"")===n.Ad.foryou||r(e)}function l(e){if(s(e))return"fyp";if(e.match("/following"))return"following";if(e.match("/setting"))return"setting";if(e.match("/search"))return"search";if(e.match("/message"))return"message";if(e.match("/video"))return"video";if(e.match("/@"))return"user";if(e.match("/report"))return"report";if(e.match("/music"))return"music";if(e.match("/tag"))return"hashtag";if(e.match(/\/discover\/.+/))return"expansion";if(e.match("/discover"))return"discover";if(e.match("/live"))return"live";if(d(e)){const t=(0,o.LX)(e,{path:n.Ad.topics,exact:!0});return`topics_${null==t?void 0:t.params.name}`}return e.match("/profile")?"profile":e.match("/inbox")?"inbox":e.match("/feedback")?"feedback":""}function d(e){return Boolean((0,o.LX)(e,{path:n.Ad.topics,exact:!0}))}function c(e){return e===n.Ad.following}function p(e){return/^\/@[^/]*\/video\/\d+/.test(e)}function u(e){return/^\/music\/.+/.test(e)}function g(e){return/^\/tag\/.+/.test(e)}function m(e){return!/^\/@.+\/live/.test(e)&&!/^\/@.*\/video\/\d+/.test(e)&&/^\/@.+/.test(e)}function h(e){return/^\/discover\/.+/.test(e)}function _(e){return e===n.Ad.searchHome}function v(e){return e===n.Ad.searchUser}function y(e){return e===n.Ad.searchVideo}function b(e){return/^\/question\/.+/.test(e)}function f(e){return Boolean((0,o.LX)(e,{path:n.Ad.discover,exact:!0}))}function x(e){return s(e)?5:c(e)?11:p(e)?0:u(e)?4:g(e)?3:m(e)?1:v(e)?106:y(e)?107:_(e)?105:b(e)?16:d(e)?113:function(e){return/^\/messages/.test(e)}(e)?13:f(e)?103:5}},30626:(e,t,i)=>{"use strict";i.d(t,{eD:()=>u,zv:()=>g,GV:()=>m});var o=i(64047),n=i(57244),a=i(37729),r=i(50218),s=i(13964),l=i(39341);const d="webapp-session-referer";var c,p;!function(e){e[e.Default=0]="Default",e[e.Simple=1]="Simple",e[e.None=2]="None"}(c||(c={})),function(e){e[e.None=0]="None",e[e.AWEME=1]="AWEME",e[e.FixedWww=2]="FixedWww",e[e.AutoMOrT=3]="AutoMOrT",e[e.Webcast=4]="Webcast",e[e.AutoWebcastMOrT=5]="AutoWebcastMOrT",e[e.AWEMEV1=6]="AWEMEV1",e[e.PostLikeTest=7]="PostLikeTest",e[e.CommentTest=8]="CommentTest",e[e.WebcastT=9]="WebcastT",e[e.Now=10]="Now"}(p||(p={}));const u="tt-csrf-token",g={FORM_ENCODE:"application/x-www-form-urlencoded; charset=UTF-8"};let m=class{constructor(){this.appContext$=new a.t(1),this.appLanguage="en",this.isPageVisible=!0,this.isFocus=!0}setAppContext(e){this.appContext||(this.appContext$.next(e),this.appContext=e,(0,s.Y8)(this.handleVisibilityChange.bind(this,!1),this.handleVisibilityChange.bind(this,!0)),this.bindFocusChange())}getBaseUrl(e=0){var t,i,o,n,a,r,s,l,d,c,p,u,g,m,h,_,v,y,b,f,x,k,w,S,j;switch(e){case 9:{let e="https://webcast-t.tiktok.com";return"us"===(null===(t=this.appContext)||void 0===t?void 0:t.domains.kind)&&(e="https://webcast.us.tiktok.com"),e}case 1:return null!==(o=null===(i=this.appContext)||void 0===i?void 0:i.domains.aweme)&&void 0!==o?o:"https://api.tiktok.com";case 2:return null!==(a=null===(n=this.appContext)||void 0===n?void 0:n.domains.rootApi)&&void 0!==a?a:"https://www.tiktok.com";case 3:return this.appContext?this.appContext.domains.mTApi:"";case 6:return this.appContext?this.appContext.domains.rootApi:"";case 4:return null!==(s=null===(r=this.appContext)||void 0===r?void 0:r.domains.webcastRootApi)&&void 0!==s?s:"https://webcast.tiktok.com";case 5:return this.appContext?this.appContext.domains.webcastApi:"";case 0:return null!==(d=null===(l=this.appContext)||void 0===l?void 0:l.domains.rootApi)&&void 0!==d?d:"";case 7:return null!==(v=null!==(h=null===(m=null===(g=null===(u=null===(p=null===(c=this.appContext)||void 0===c?void 0:c.abTestVersion)||void 0===p?void 0:p.parameters)||void 0===u?void 0:u.like_comment_domain)||void 0===g?void 0:g.vid)||void 0===m?void 0:m.like)&&void 0!==h?h:null===(_=this.appContext)||void 0===_?void 0:_.domains.mTApi)&&void 0!==v?v:"";case 8:return null!==(j=null!==(w=null===(k=null===(x=null===(f=null===(b=null===(y=this.appContext)||void 0===y?void 0:y.abTestVersion)||void 0===b?void 0:b.parameters)||void 0===f?void 0:f.like_comment_domain)||void 0===x?void 0:x.vid)||void 0===k?void 0:k.comment)&&void 0!==w?w:null===(S=this.appContext)||void 0===S?void 0:S.domains.rootApi)&&void 0!==j?j:"";case 10:return"https://now.tiktok.com"}}getRiskParams(e,t=!1){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.appContext)return{};if(2===e)return{};(0,s.St)(d)||(0,s.D9)(d,document.referrer);const i=1===e;let o=null;if(!t&&navigator.getBattery&&(o=(yield navigator.getBattery()).level),i)return Object.assign(Object.assign({},(0,l.$b)()),{from_page:(0,r.Xq)(location.pathname)});const n={};return"ageVerify"===(0,s.St)("enter_method")&&(n.security_verification_aid="1459"),Object.assign(Object.assign(Object.assign({},(0,l.Kj)(this.appContext,this.isPageVisible,this.isFocus,o)),{from_page:(0,r.Xq)(location.pathname)}),n)}))}handleVisibilityChange(e){this.isPageVisible=e}bindFocusChange(){const e=()=>{this.isFocus=!0},t=()=>{this.isFocus=!1};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}};m=(0,o.__decorate)([(0,n.G)()],m)},4206:(e,t,i)=>{"use strict";i.d(t,{r:()=>C});var o=i(64047),n=i(57244),a=i(57001),r=i.n(a),s=i(40316),l=i.n(s),d=i(90293),c=i(82346),p=i(14716),u=i(60595),g=i(56979),m=i(53095),h=i(30626),_=i(39341),v=i(42685),y=i(71952);const b=1e4;var f;!function(e){e[e.Pass=0]="Pass",e[e.Reject=1]="Reject",e[e.Retry=2]="Retry"}(f||(f={}));let x=class{constructor(){this.domId="tiktok-verify-ele",this.captcha=null,this.verifyElement=null,this.open=!1,this.rejectPass=!1,this.checkVerify=(e,t,i,n)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var o;if("object"!=typeof e)return e;const{statusCode:a,code:r}=null!=e?e:{};if(a===b||r===String(b)){const a=r===String(b)?e:e.verifyConfig,s=yield this.loadCaptcha(n&&i?"ttp":a.region,t);if(-1===a.fp){const e=yield null===(o=this.captcha)||void 0===o?void 0:o.getFp();a.fp=e}return s?this.open?(yield this.updateState(),this.rejectPass?1:2):yield this.goVerify(a,n):1}return 0})),this.destroy=()=>{var e;null===(e=this.captcha)||void 0===e||e.close(),this.verifyElement&&(document.body.removeChild(this.verifyElement),this.verifyElement=null)}}init(){this.verifyElement||(this.verifyElement=document.createElement("div"),this.verifyElement.setAttribute("id",this.domId),document.body.appendChild(this.verifyElement))}goVerify(e,t){return this.init(),new Promise((i=>{this.openVerify((()=>{this.closeVerify(),i(2)}),(()=>{this.closeVerify(!0),i(1)}),e,t)}))}closeVerify(e=!1){var t;this.open=!1,this.rejectPass=e,null===(t=this.captcha)||void 0===t||t.close()}openVerify(e,t,i,o){var n;const a={ele:this.domId,lang:"en",successCb:e,showMode:"mask",closeCb:t,errorCb:()=>{},fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}};o&&(a.host=o),this.open=!0,this.rejectPass=!0,null===(n=this.captcha)||void 0===n||n.render({verify_data:i,captchaOptions:a})}updateState(){return new Promise((e=>{if(!this.open)return void e();const t=setInterval((()=>{this.open||(clearInterval(t),e())}),800)}))}loadCaptcha(e,t){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.captcha){let o;switch(e){case"boe":case"sg":o=i.e(3975).then(i.bind(i,14694));break;case"va":o=i.e(3975).then(i.bind(i,1371));break;case"in":case"ttp":o=i.e(3975).then(i.bind(i,85438));break;default:return!1}const n=yield o;this.captcha=n,n.init({commonOptions:{aid:1988,did:t||"0",iid:"0"},captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}}})}return!0}))}};x=(0,o.__decorate)([(0,n.G)()],x);const k="content-type",w=["application/pdf"],S={m:"va",t:"sg",us:"ttp",boe:"boe"},j="bdturing-verify";let C=class{constructor(e,t,i){this.verify=e,this.util=t,this.security=i,this.get=this.rxFetchFactory("GET"),this.post=this.fetchPost,this.put=this.rxFetchFactory("PUT"),this.delete=this.rxFetchFactory("DELETE")}get csrfToken(){var e,t;return this.util.appContext,null!==(t=null===(e=this.util.appContext)||void 0===e?void 0:e.csrfToken)&&void 0!==t?t:""}get appContext(){return this.util.appContext,this.util.appContext}rxFetchFactory(e){return(t,i)=>this.rxFetch(t,Object.assign(Object.assign({},i),{method:e}))}judgeNeedEncryption(e){return y.kS.some((t=>e.indexOf(t)>-1))}fetchPost(e,t={}){var{omitContentType:i=!1}=t,n=(0,o.__rest)(t,["omitContentType"]);const a=new Headers(n.headers);return a.get(k)||i||a.set(k,"application/x-www-form-urlencoded"),n.body||(n.body=""),n.headers=a,this.rxFetch(e,Object.assign(Object.assign({},n),{method:"POST"}))}getVerifyJson(e,t){var i,o;const n=e.status_code||e.code,a=3058===n,r=3059===n,s=S[null!==(o=null===(i=this.appContext)||void 0===i?void 0:i.domains.kind)&&void 0!==o?o:""];return t.includes("/api/update/profile/")&&(a||r)?{code:"10000",from:"shark_admin",type:"verify",version:1,region:s,subtype:a?"slide":"text",verify_event:"",detail:{},fp:-1}:e}rawFetch(e,t){var i,n,a,r,s,l,d;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const o=yield window.fetch.call(null,e,t);if(o.status>=400)return yield Promise.reject(o);{const c=o.headers.get(k);if(null==c?void 0:c.includes("application/json")){const d=o.headers.has(j)?JSON.parse(null!==(i=o.headers.get(j))&&void 0!==i?i:"{}"):yield o.json(),c=this.getVerifyJson(d,e),p=yield this.verify.checkVerify(c,null!==(a=null===(n=this.appContext)||void 0===n?void 0:n.wid)&&void 0!==a?a:"0",null!==(s=null===(r=this.appContext)||void 0===r?void 0:r.isTTP)&&void 0!==s&&s,null===(l=this.appContext)||void 0===l?void 0:l.domains.captcha);return 0===p?d:2===p?yield this.rawFetch(e,t):{statusCode:-1}}return(null===(d=o.headers.get(k))||void 0===d?void 0:d.includes("text/"))?yield o.text():-1!==w.indexOf(String(c))?yield o.blob():(null==c?void 0:c.includes("application/x-protobuf"))?yield o.arrayBuffer():yield o.text()}}))}rxFetch(e,t){var{credentials:i="include"}=t,n=(0,o.__rest)(t,["credentials"]);return(!e.startsWith("/")||e.startsWith("//")||"GET"!==n.method||y.rJ.some((t=>Boolean(e.match(new RegExp(t)))))?this.security.init$:(0,c.of)([!0,!0])).pipe((0,g.U)((([e,t])=>{if(!t&&(null==n?void 0:n.requireSecSdk))throw new Error("secsdk load error")})),(0,m.z)((()=>{var e;const t=null!==(e=n.riskParamsType)&&void 0!==e?e:0,{isInstantApp:i}=n;return(0,p.D)(this.util.getRiskParams(t,i))})),(0,m.z)((t=>new u.y((o=>{var a;const s="AbortController"in window?new AbortController:{signal:{aborted:!1},abort(){this.signal.aborted=!0}},c=Object.assign({},t,n.query);e.startsWith("http:")||e.startsWith("https:")||(e=`${this.util.getBaseUrl(n.baseUrlType)}${e}`);const p=l()(r()(n,{signal:s.signal,credentials:i}),"query","riskParamsType","baseUrlType");if(this.judgeNeedEncryption(e)){const i=(0,_.J4)(c);p.headers=Object.assign(Object.assign({},null!==(a=p.headers)&&void 0!==a?a:{}),{"x-tt-params":i}),t&&(e=(0,d.stringifyUrl)({url:e,query:t}))}else e=(0,d.stringifyUrl)({url:e,query:c});return this.rawFetch(e,p).then((e=>{o.next(e),o.complete()})).catch((e=>{o.error(e)})),()=>{s.signal.aborted||s.abort()}})))))}};C=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[x,h.GV,v.$])],C)},39341:(e,t,i)=>{"use strict";i.d(t,{Kj:()=>a,$b:()=>r,J4:()=>s});const o=i(70745),n=(e,t)=>{try{return sessionStorage.getItem(e)||t}catch(e){return console.warn("sessionStorage get failed"),t}},a=(e,t,i,o)=>{const a=document.cookie.match(/s_v_web_id=(\w+)/);try{const r={aid:"1988",app_name:"tiktok_web",channel:"tiktok_web",device_platform:(e||{}).isMobile?"web_mobile":"web_pc",device_id:(e||{}).wid,region:(e||{}).region,priority_region:((e||{}).user||{}).region||"",os:(e||{}).os,referer:document.referrer,root_referer:n("webapp-session-referer"),cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,verifyFp:(a||"")[1],app_language:(e||{}).language,webcast_language:(e||{}).language,tz_name:Intl.DateTimeFormat().resolvedOptions().timeZone,is_page_visible:t,focus_state:i,is_fullscreen:window.matchMedia("(display-mode: fullscreen)").matches,history_len:window.history.length};return"ageVerify"===n("enter_method")&&(r.security_verification_aid="1459"),navigator.getBattery&&(r.battery_info=o),r}catch(e){}return{}},r=()=>({cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,timezone_name:Intl.DateTimeFormat().resolvedOptions().timeZone}),s=e=>{const t=[];return Object.keys(e).forEach((i=>{const o=`${i}=${e[i]}`;t.push(o)})),t.push("is_encryption=1"),((e,t)=>{const i=((e,t)=>{let i=e.toString();const o=i.length;return o<16?i=new Array(16-o+1).join("0")+i:o>16&&(i=i.slice(0,16)),i})("webapp1.0+20210628"),n=o.enc.Utf8.parse(i);return o.AES.encrypt(e,n,{iv:n,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()})(t.join("&"))}},71952:(e,t,i)=>{"use strict";var o;i.d(t,{rJ:()=>n,kS:()=>l,Yf:()=>d}),function(e){e[e.LoginMode=513]="LoginMode",e[e.USUnloginMode=514]="USUnloginMode",e[e.USUnloginHighRiskMode=515]="USUnloginHighRiskMode",e[e.NonUSUnloginMode=516]="NonUSUnloginMode",e[e.U13Mode=517]="U13Mode"}(o||(o={}));const n=["/node/share/","/share/item/list","/discover/render/undefined","/node/feedback/upload_image/","/share/item/explore/list","/api/comment/list/","/api/comment/list/reply/","/api/commit/follow/user/","/api/commit/item/digg/","/aweme/v1/upload/image2/","/api/notice/multi/","/api/notice/count/","/api/notice/digg/list/","/api/user/following/request/list/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/sticker/item_list/","/api/user/contact/list/","/api/at/default/list/","/api/comment/search/user/","/web/aweme/v1/search/challengesug","/web/aweme/v1/discover/search/","/api/v1/item/create/","/api/search/user/full/","/api/search/user/preview/","/api/search/item/full/","/api/search/general/full/","/api/music/detail/","/api/challenge/detail/","/api/user/detail/","/api/user/list/","/api/item/detail/","/api/question/detail/","/api/question/item_list/","/api/discover/challenge/","/api/discover/user/","/api/discover/music/","/api/discover/expansion/video/","/api/discover/expansion/detail/","/api/discover/expansion/topic/","/api/discover/expansion/user/","/api/discover/expansion/challenge/","/api/discover/expansion/music/","/api/challenge/item_list/","/api/music/item_list/","/api/post/item_list/","/api/favorite/item_list/","/api/following/item_list/","/api/recommend/item_list/","/api/recommend/user/","/api/recommend/embed_videos/","/api/live/detail/","/api/im/multi_user/","/api/user/get/animation/","/api/user/settings/","/aweme/v1/music/list/","/api/mix/detail","/api/mix/item_list","/api/uniqueid/check/","/api/user/playlist/","/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/api/aweme/delete/","/api/schedule/aweme/delete/","/passport/web/login_name/update/","/api/update/profile/","/api/upload/image/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/","/tiktok/v1/username/save_async/","/node/report/reasons","/aweme/v1/aweme/feedback/","/webcast.*","/v1/message/send","/v2/conversation/create","/v1/voip/call","/v1/conversation/add_participants","/1/conversation/remove_participants","/v1/conversation/update_participant","/v1/conversation/set_setting_info","/v1/conversation/get_setting_info","/v1/conversation/upsert_core_ext_info","/v1/conversation/upsert_settings_ext","/v1/conversation/dissolve","/v1/message/mark","/v1/message/batch_unmark","/v1/message/set_property","/node-a/send/download_link","/api/uniqueid/check/","/api/v3/register/user/info/sync/","/api/policy/notice/approve/","/api/private_banner/ack/","/api/privacy/agreement/record/agree/v1","/api/v3/register/verification/age/","/api/register/check/login/name/","/api/user/detail/self/","/api/policy/notice/","api/compliance/settings","/passport/web/","/shorten/","/api/discover/expansion/detail/","/api/discover/expansion/video/","/api/discover/expansion/user/","/api/discover/expansion/challenge/","/api/discover/expansion/music/","/api/discover/expansion/topic/"],a=["/webcast/room/chat/","/webcast/room/create_info/","/webcast/room/enter/","/webcast/room/leave/","/webcast/room/live_podcast/","/webcast/room/ping/audience/","/webcast/user/relation/update/","/webcast/gift/send/","/webcast/room/emote_chat/","/webcast/room/share/","/webcast/wallet_api/diamond_exchange/","/webcast/wallet_api/save_billing_address_info/","/webcast/recharge/base_package/","/webcast/recharge/packages/","/webcast/wallet_api_tiktok/payment/initialize_payment","/webcast/wallet_api_tiktok/payment/initialize_agreement","/webcast/wallet_api_tiktok/payment/payment_methods/primary/set","/webcast/wallet_api_tiktok/payment/payment_methods/delete","/webcast/wallet_api_tiktok/payment/payment_methods/link","/webcast/wallet_api_tiktok/income_plus/tax/get_tax/","/webcast/wallet_api_tiktok/income_plus/tax/create_tax/","/webcast/wallet_api_tiktok/income_plus/tax/update_tax/","/webcast/wallet_api_tiktok/income_plus/agreement/","/webcast/wallet_api_tiktok/payout_onboarding_confirm/"],r=["/webcast/wallet_api/diamond_buy/permission/","/webcast/diamond/","/webcast/wallet_api/diamond_buy/nonce","/webcast/wallet_api/diamond_buy_external/","/webcast/wallet_api/query_web_order/","/webcast/wallet_api/invoice/download/","/webcast/wallet_api_tiktok/notifycenter/notices/latest","/webcast/wallet_api/verify_zip_code/","/webcast/wallet_api_tiktok/periodic_payout_onboarding/","/webcast/wallet_api_tiktok/payment_instrument_bind_url/","/webcast/wallet_api_tiktok/payment/payment_methods","/webcast/wallet_api_tiktok/notifycenter/notices/","/webcast/wallet_api_tiktok/income_plus/get_user_region_info/","/webcast/wallet_api_tiktok/income_plus/account_steps/","/webcast/wallet_api_tiktok/income_plus/user/","/webcast/recharge/base_package/","/webcast/recharge/packages/"],s=["/api/private_banner/ack/","/cloudpush/update_sender_token/","/cloudpush/app_notice_status/","/api/user/set/settings/","/api/reddot/report","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/aweme/delete/","/api/schedule/aweme/delete/","/api/privacy/user/private_account/update/v1","/api/im_setting/update/v1","/api/privacy/agreement/record/agree/v1","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/","/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/passport/web/login_name/update/","/api/update/profile/","/api/upload/image/","/tiktok/v1/username/save_async/"],l=["/api/post/item_list/","/api/music/item_list/"],d={"webcast.tiktok.com":{POST:a,GET:r},"webcast-t.tiktok.com":{POST:a,GET:r},"webcast-m.tiktok.com":{POST:a,GET:r},"webcast.us.tiktok.com":{POST:["/webcast/gift/send/","/webcast/wallet_api/diamond_exchange/"],GET:r},"www.tiktok.com":{POST:s},"us.tiktok.com":{POST:s},"m.tiktok.com":{POST:s},"t.tiktok.com":{POST:s}}},42685:(e,t,i)=>{"use strict";i.d(t,{$:()=>y,M:()=>b});var o=i(64047),n=i(57244),a=i(15608),r=i(82346),s=i(14716),l=i(96980),d=i(49584),c=i(93859),p=i(68854),u=i(56979),g=i(58755),m=i(84584),h=i(91218),_=i(30626),v=i(71952);let y=class{constructor(e,t){this.util=e,this.slardar=t,this.init$=(0,a.D)([this.initAcrawler().pipe((0,l.q)(1)),this.initCSRF().pipe((0,l.q)(1))]),this.acrawlerInitliazed=!1,this.csrfInitliazed=!1}initAcrawler(){return this.util.appContext$.pipe((0,d.z)((e=>{const{appId:t,sgOpen:i,user:o,isTTP:n,wid:a=""}=e,s=1233===t&&!i;let l=s?"va-tiktok":"sg-tiktok";return l=n?"ttp":l,this.loadSdk("acrawler").pipe((0,c.b)((()=>{var e;this.acrawlerInitliazed||(this.acrawlerInitliazed=!0,window.byted_acrawler.init({aid:1988,dfp:!1,boe:!1,intercept:!0,enablePathList:v.rJ,region:l,mode:b({isVA:s,isLogin:Boolean(o),isFTC:null!==(e=null==o?void 0:o.ftcUser)&&void 0!==e&&e,isHighRisk:!1}),isSDK:!1}))})),(0,p.K)((e=>{var t;return this.slardar.captureMessage(`load Acrawler Error: ${e.message}`,"warning",{uid:null!==(t=null==o?void 0:o.uid)&&void 0!==t?t:"",wid:a}),(0,r.of)(!0)})))})),(0,u.U)((()=>!0)),(0,p.K)((()=>(0,r.of)(!0))))}initCSRF(){return this.util.appContext$.pipe((0,d.z)((e=>{const{appId:t,sgOpen:i}=e,o=1233!==t||i?"secsdk_sg":"secsdk_va";return this.loadSdk(o)})),(0,u.U)((()=>!0)),(0,c.b)((()=>{this.csrfInitliazed||(this.csrfInitliazed=!0,window.secsdk.csrf.setProtectedHost(v.Yf))})),(0,p.K)((e=>(this.slardar.captureMessage(`load secsdk Error: ${e.message}`,"warning"),(0,r.of)(!1)))))}loadSdk(e,t=1e4){return(0,s.D)((0,m.yy)({moduleId:e,retry:1})).pipe((0,g.V)(t))}};y=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[_.GV,h.n])],y);const b=({isVA:e,isLogin:t,isFTC:i,isHighRisk:o})=>i?517:t?513:e&&o?515:e&&!o?514:516},90035:(e,t,i)=>{"use strict";i.d(t,{G:()=>o,k:()=>n});const o=e=>null,n=(e,t,i)=>{}},47165:(e,t,i)=>{"use strict";i.d(t,{n:()=>r});var o=i(11348),n=i(49847),a=i(68854);const r=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:r})=>s=>s.pipe((0,a.K)((a=>(t&&console.error("Effect error: ",null!=e?e:a),null==r||r(),i?o.E:(0,n._)((()=>a))))))},13964:(e,t,i)=>{"use strict";i.d(t,{G6:()=>a,Y8:()=>r,Di:()=>s,Ii:()=>l,YT:()=>d,KF:()=>c,cx:()=>p,uf:()=>g,KZ:()=>m,YZ:()=>h,le:()=>_,D$:()=>v,e8:()=>y,St:()=>b,D9:()=>f,lD:()=>x,NS:()=>k,UW:()=>w,PF:()=>S});var o=i(25615),n=i.n(o);function a(){return navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")}function r(e=n(),t=n()){let i,o;function a(){i&&document[i]?e():t()}return"hidden"in document?(i="hidden",o="visibilitychange"):"msHidden"in document?(i="msHidden",o="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",o="webkitvisibilitychange"),"addEventListener"in document&&i&&o?(document.addEventListener(o,a,!1),document.removeEventListener.bind(document,o,a,!1)):n()}function s(e,t){let i={top:0,bottom:0,left:0,right:0};try{i=e.getBoundingClientRect()}catch(e){}let{top:o,bottom:n}=i;const{height:a}=i;return o-=t,n-=t,o=Math.abs(o),n<=0||o>=a?0:Number((n/a).toFixed(2))}function l(){return window.innerHeight<document.body.offsetHeight&&"hidden"!==document.body.style.overflow}function d(){return window.innerWidth-document.body.offsetWidth}const c=(e=0,t=100,i,o=!0)=>{const n=p(),a=Date.now(),r=()=>{const s=Date.now()-a;if(s>=t)return o?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e),void(null==i||i());const l=n+s/t*(e-n);o?window.scrollTo({top:l,behavior:"smooth"}):window.scrollTo(0,l),requestAnimationFrame(r)};r()};function p(){const e=document.documentElement||document.body.parentNode||document.body;return void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop}const u="webapp-scroll_invoke_by_click";function g(){return b(u)}function m(){x(u)}function h(e=0,t=100){const i=p(),o=Date.now(),n=()=>{window.pageYOffset.toFixed()===e.toFixed()&&(f(u,"done"),window.removeEventListener("scroll",n))};f(u,"start"),window.addEventListener("scroll",n),function n(){const a=Date.now()-o;if(a>=t)return void window.scrollTo({top:e,behavior:"smooth"});const r=(t-a)/t*(e-i)+i;window.scrollTo({top:r,behavior:"smooth"}),requestAnimationFrame(n)}()}function _(e,t=""){var i;try{return null!==(i=localStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function v(e,t){try{localStorage.setItem(e,t)}catch(e){}}function y(e){try{localStorage.removeItem(e)}catch(e){}}function b(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function f(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}function x(e){try{sessionStorage.removeItem(e)}catch(e){}}const k=e=>{e.preventDefault(),e.stopPropagation()},w=e=>{e.stopPropagation()},S=e=>{e.preventDefault()}},40022:(e,t,i)=>{"use strict";function o(){return"undefined"==typeof window||"undefined"==typeof document}function n(){return!o()&&!window.SIGI_STATE}i.d(t,{y:()=>o,W:()=>n})},23588:(e,t,i)=>{"use strict";i.d(t,{yB:()=>l});var o,n,a=i(64047),r=i(57244),s=i(93797);!function(e){e.Share="livesdk_share",e.Report="livesdk_live_user_report",e.ReportSuccess="livesdk_report_success",e.ChatClose="livesdk_comment_close",e.HoverUserCardShow="livesdk_user_card_show",e.Follow="livesdk_follow",e.Take="livesdk_live_action",e.SetupPopShow="livesdk_live_tab_popup_show",e.AnchorEnterRoom="livesdk_anchor_enter_room",e.Show="livesdk_live_show",e.ClickEntrance="livesdk_rec_live_play",e.Unfollow="livesdk_unfollow"}(o||(o={})),function(e){e.VideoHeadBrowser="video_head_browser",e.Creator="creator",e.VideoHead="video_head",e.OthersPhoto="others_photo",e.SuggestedOthersPhoto="suggested_others_photo",e.ClickOneColumnUser="click_main_btn"}(n||(n={}));let l=class{constructor(){this.handleLiveEntranceShow=e=>{s.W.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{s.W.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{s.W.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};l=(0,a.__decorate)([(0,r.G)()],l)},48036:(e,t,i)=>{"use strict";i.d(t,{y7:()=>u,t1:()=>g,It:()=>m,xy:()=>h,II:()=>_,e6:()=>v,FH:()=>y,ui:()=>b});var o=i(9236),n=i(21041),a=i(50218),r=i(92311),s=i(34708),l=i(2734),d=i(23028);const c="abTestVersion",p="videoPlayerConfig";function u(){var e;const{abTestVersion:t,videoPlayerConfig:i}=(0,l.m7)((0,s.L)((()=>[c,p]),[])),{pathname:o}=(0,n.TH)(),r=(0,d.x)(t,"xgplayer_preload_test"),u=null!==(e=(0,d.x)(t,"video_feed_redesign"))&&void 0!==e?e:"v1",g=null==i?void 0:i.fallback,m="v2"===u,h="v3"===u;return{xgplayerVid:r,isUseNativePlayer:"v3"===r||g,isVideoFeedRedesignV1:!m&&!h,isVideoFeedRedesignV2:m,isVideoFeedRedesignV3:h,isInVideoFeedRedesign:(m||h)&&((0,a.oC)(o)||(0,a.FZ)(o))}}const g=()=>{var e,t;const{abTestVersion:i}=null!==(e=(0,s.L)((()=>[c]),[]))&&void 0!==e?e:{},{pathname:o}=(0,n.TH)(),r=(0,a.ws)(o)||(0,a.Dj)(o)||(0,a.bf)(o)||(0,a.u7)(o),l=null!==(t=(0,d.x)(i,"increase_detail_page_cover_quantity_test"))&&void 0!==t?t:"v1";return{isDetailPageCoverQuantityTestGroup:("v2"===l||"v3"===l)&&r,ssrLimit:"v3"===l&&r?16:6}};function m(){var e,t;const{abTestVersion:i,videoPlayerConfig:o}=(0,l.m7)((0,s.L)((()=>[c,p]),[])),n=null!==(e=(0,d.x)(i,"xgplayer_preload_test"))&&void 0!==e?e:"v1",a=null==o?void 0:o.fallback;return{isUseNativePlayer:"v3"===n||a,isUsePreload:"v1"===n,isUseAdaptBitrate:"v2"===(null!==(t=(0,d.x)(i,"video_bitrate_adapt"))&&void 0!==t?t:"v1"),xgplayerVid:n}}function h(){var e;const{pathname:t}=(0,n.TH)(),{abTestVersion:i}=(0,l.m7)((0,s.L)((()=>[c]),[])),o=null!==(e=(0,d.x)(i,"non_login_comment_video_detail_page"))&&void 0!==e?e:"v7",r="v1"!==o;return{hasNewVideoDetailPage:r,hasBrowserMode:"v7"!==o,isInNewVideoDetail:r&&(0,a.cQ)(t)}}function _(){var e,t,i,n;const{abTestVersion:a}=(0,l.m7)((0,s.L)((()=>[c]),[])),{abtest:p}=(0,o.mp)(r.q),u=null!==(e=(0,d.x)(a,"add_transcript"))&&void 0!==e?e:"v1",g=null!==(n=null===(i=null===(t=null==p?void 0:p.parameters)||void 0===t?void 0:t.transcript)||void 0===i?void 0:i.version)&&void 0!==n?n:"v1",m="v1"===u&&"v1"===g?"v1":null!=g?g:u;return{isDownloadTranscript:"v1"!==m,isOriginVideoDetail:"v1"===m,isInActionBar:"v2"===m,isDefaultHidden:"v2"===m,isDefaultExpanded:"v2"===m||"v3"===m,isDefaultFolded:"v4"===m,isShowCloseIcon:"v2"===m}}function v(){var e;const{abTestVersion:t,isTTP:i}=(0,l.m7)((0,s.L)((()=>[c,"isTTP"]),[])),o=null!==(e=(0,d.x)(t,"related_videos_video_detail_page"))&&void 0!==e?e:"v1";return{shouldUseRelatedVideo:!i||"v2"===o}}function y(){var e;const{abTestVersion:t,playbackNormalizePath:i}=(0,l.m7)((0,s.L)((()=>[c,"playbackNormalizePath"]),[]));return{shouldUseVideoNormalization:"v2"===(null!==(e=(0,d.x)(t,"volume_normalize"))&&void 0!==e?e:"v1"),playbackNormalizePath:i}}function b(){var e;const{abTestVersion:t}=(0,l.m7)((0,s.L)((()=>[c]),[])),i=null!==(e=(0,d.x)(t,"webapp_dark_mode"))&&void 0!==e?e:"v1",{pathname:o}=(0,n.TH)(),r=(0,a.Dj)(o)||(0,a.Io)(o)||(0,a.FZ)(o)||(0,a.oC)(o)||(0,a.ws)(o)||(0,a.cQ)(o)||(0,a.bf)(o)||(0,a.I8)(o)||(0,a.TX)(o)||(0,a.Gc)(o)||(0,a.at)(o)||(0,a.u7)(o);return{hasDarkModeSwitch:"v1"!==i&&r,defaultDarkMode:"v3"===i&&r}}},17230:(e,t,i)=>{"use strict";var o;i.d(t,{OV:()=>n,AH:()=>a,S0:()=>r,HW:()=>s,hw:()=>l,vN:()=>d,m8:()=>c,OB:()=>p,b7:()=>u,kU:()=>h,CO:()=>_,ES:()=>v,lK:()=>y,kg:()=>b,_T:()=>f,eQ:()=>x,jd:()=>k,u7:()=>w}),function(e){e[e.Hot=0]="Hot",e[e.Relation=1]="Relation",e[e.Fresh=2]="Fresh",e[e.Post=3]="Post",e[e.Favorite=4]="Favorite",e[e.Challenge=5]="Challenge",e[e.Music=6]="Music",e[e.Category=7]="Category",e[e.MusicFresh=8]="MusicFresh",e[e.ChallengeFresh=9]="ChallengeFresh",e[e.Follow=10]="Follow",e[e.Trending=18]="Trending",e[e.TitleRecommend=20]="TitleRecommend",e[e.Nearby=21]="Nearby",e[e.Search=23]="Search",e[e.HotVideo=24]="HotVideo",e[e.HotMusic=25]="HotMusic",e[e.FollowerList=26]="FollowerList",e[e.Inbox=33]="Inbox",e[e.Live=27]="Live"}(o||(o={}));const n="webapp-pwa-expanded",a="webapp-live-nav-click",r="webapp_showed_profile_tip",s="webapp_showed_dark_mode_tip_count",l="webapp_launch_mode",d="webapp_tiktok_open",c="webapp_tiktok_privious",p="webapp_open_edit_profile_modal_from",u="popup_profile_toast";var g,m;!function(e){e[e.NIL=-255]="NIL",e[e.UnknownError=-1]="UnknownError",e[e.Ok=0]="Ok",e[e.ReportLiveFailed=90002]="ReportLiveFailed",e[e.VerifyCode=1e4]="VerifyCode",e[e.VideoLikeFreq=2150]="VideoLikeFreq",e[e.VideoLikeFreq2=2210]="VideoLikeFreq2",e[e.VideoUnavailableDeleted=2054]="VideoUnavailableDeleted",e[e.AdVideoUnavailableChange=2752]="AdVideoUnavailableChange",e[e.CommentBanCode=22]="CommentBanCode",e[e.CommentLikePermissionDisable=3002043]="CommentLikePermissionDisable",e[e.SearchSensitiveCode=403]="SearchSensitiveCode",e[e.SearchYoungCode=203]="SearchYoungCode",e[e.SmsInvalidNumber=-1]="SmsInvalidNumber",e[e.SmsSlideVerify=-4]="SmsSlideVerify",e[e.FypVideoListLimit=10404]="FypVideoListLimit",e[e.ClientPageError=450]="ClientPageError",e[e.LiveNeedLogin=10119]="LiveNeedLogin",e[e.SharkBlock=10114]="SharkBlock",e[e.SharkSlide=10113]="SharkSlide",e[e.NetError=10111]="NetError",e[e.ServerErrorNot500=10101]="ServerErrorNot500",e[e.VideoRisk=10228]="VideoRisk",e[e.VideoRMask=10229]="VideoRMask",e[e.VideoRiskMask=10230]="VideoRiskMask",e[e.VideoNeedRecheck=10227]="VideoNeedRecheck",e[e.VideoUnshelveByMusic=10220]="VideoUnshelveByMusic",e[e.VideoNotExist=10204]="VideoNotExist",e[e.VideoAbnormal=10215]="VideoAbnormal",e[e.VideoLowAgeM=10213]="VideoLowAgeM",e[e.VideoLowAgeT=10214]="VideoLowAgeT",e[e.VideoFirstReviewUnshelve=10217]="VideoFirstReviewUnshelve",e[e.VideoPrivateByUser=10216]="VideoPrivateByUser",e[e.VideoGeofenceBlock=10231]="VideoGeofenceBlock",e[e.VideoPhoto=10239]="VideoPhoto",e[e.VideoFriendsOnly=10240]="VideoFriendsOnly",e[e.VideoDeleted=10241]="VideoDeleted",e[e.VideoUserBlockedByAuthor=10242]="VideoUserBlockedByAuthor",e[e.HashtagNotExist=10205]="HashtagNotExist",e[e.HashtagUnshelve=10212]="HashtagUnshelve",e[e.HashtagSensitivityWord=10211]="HashtagSensitivityWord",e[e.HashtagBlackList=10209]="HashtagBlackList",e[e.UserInboxFollowBan=24]="UserInboxFollowBan",e[e.UserNotExist=10202]="UserNotExist",e[e.UserBan=10221]="UserBan",e[e.UserPrivate=10222]="UserPrivate",e[e.UserNotLogin=10102]="UserNotLogin",e[e.UserFtc=10223]="UserFtc",e[e.UserUniqueSensitivity=10225]="UserUniqueSensitivity",e[e.QuestionNotAvailable=10236]="QuestionNotAvailable",e[e.MusicNotExist=10203]="MusicNotExist",e[e.MusicUnshelve=10218]="MusicUnshelve",e[e.MusicNoCopyright=10219]="MusicNoCopyright",e[e.GameNotExist=10224]="GameNotExist",e[e.LiveNotExist=10210]="LiveNotExist",e[e.GoLiveRoomBaned=10018]="GoLiveRoomBaned",e[e.GoLiveBaned=4003035]="GoLiveBaned",e[e.LiveRoomPrepare=30019]="LiveRoomPrepare",e[e.LiveRoomEnd=30003]="LiveRoomEnd",e[e.LiveRoomBan=30012]="LiveRoomBan",e[e.LiveNoGatedAuth=4003043]="LiveNoGatedAuth",e[e.LiveNoAgeGatedAuth=4003110]="LiveNoAgeGatedAuth",e[e.LivePaidEvent=4003072]="LivePaidEvent",e[e.LiveSuicideCase=2403]="LiveSuicideCase",e[e.LiveSensitiveTitle=50004]="LiveSensitiveTitle",e[e.LiveRoomBaned=10018]="LiveRoomBaned",e[e.LiveEnterRoomNeedLogin=20003]="LiveEnterRoomNeedLogin",e[e.LiveAccountUnderRiskControl=20063]="LiveAccountUnderRiskControl",e[e.LiveHitBanStrategy=30009]="LiveHitBanStrategy",e[e.LiveOBSAccessRecalled=4003105]="LiveOBSAccessRecalled",e[e.EffectNotExist=10208]="EffectNotExist",e[e.PlaylistNotExist=10233]="PlaylistNotExist",e[e.PlaylistInTrill=10234]="PlaylistInTrill",e[e.VideoPlaylistUnavailable=10243]="VideoPlaylistUnavailable",e[e.VideoPlaylistIsEmpty=10244]="VideoPlaylistIsEmpty",e[e.PrivateAccountLimitByBC=3026002]="PrivateAccountLimitByBC"}(g||(g={})),function(e){e.TrendingCSR="homepage_hot_csr",e.Trending="homepage_hot",e.Discover="discovery",e.Inbox="homepage_message",e.Profile="personal_homepage",e.User="others_homepage",e.Music="single_song",e.Challenge="challenge",e.Video="video_detail",e.Setting="setting",e.Report="report",e.Error="page_404",e.Analytics="insight_page",e.Following="homepage_follow",e.Feedback="feedback",e.FeedbackReport="feedback_report",e.FeedbackHistory="feedback_history",e.AgeVerification="AGE_VERIFICATION",e.Topics="topic",e.Live="live_detail",e.LiveEmbedDetail="live_embed_detail",e.GoLive="live_take",e.LiveDiscover="live_discover",e.LiveReferralHost="live_referral_host",e.LiveReferralHostLogin="live_referral_host_login",e.LiveReferralHostAccept="live_referral_host_accept",e.LiveReferralHostWrong="live_referral_host_wrong",e.LiveReferralHostFaq="live_referral_host_faq",e.LiveEvent="live_event",e.SearchReflow="search_reflow",e.SharingVideo="reflow_video",e.SharingMusic="reflow_music",e.SharingChallenge="reflow_challenge",e.SharingSticker="reflow_sticker",e.SharingUser="reflow_user",e.SharingGroup="reflow_group",e.SharingLive="reflow_live",e.SharingInvite="reflow_now_link",e.SharingPost="reflow_now_photo",e.SharingProfile="reflow_now_others",e.NowError="reflow_now_guaranteed",e.QADetail="qa_detail",e.QADetailReflow="reflow_qa_detail",e.VideoPlaylist="reflow_video_playlist",e.GeneralSearch="general_search",e.SearchUser="search_user",e.SearchVideo="search_video",e.SuicidePrevention="suicide_prevention",e.Messages="messages",e.Recharge="live_recharge",e.RechargeCashier="live_recharge_cashier",e.RewardOnboarding="reward_onboarding",e.RechargePaymentCode="live_recharge_payment_code",e.Exchange="live_exchange",e.Transaction="live_transaction",e.Expansion="discover_kw",e.Playlist="music_playlist",e.StudioDownload="studio_download",e.Subscription="subscription",e.VideoTT4D="video_tt4d",e.LiveGiftCpcFaq="live_gift_cpc_faq",e.Kyc="kyc",e.Login="login",e.Signup="signup",e.HelpPage="tns_show_ssh_tips_support_page"}(m||(m={}));const h="Sorry, something wrong with the server, please try again.",_=1988,v=3e4,y=30,b=9,f=9,x=30,k=30,w="tiktok_webapp_theme";var S;!function(e){e.DarkTheme="dark",e.LightTheme="light"}(S||(S={}))},83323:(e,t,i)=>{"use strict";i.d(t,{ew:()=>u,y9:()=>g,Cl:()=>m,Us:()=>h,vO:()=>_,NI:()=>v,jP:()=>y,IH:()=>b});var o,n,a,r,s,l,d,c,p=i(45288);!function(e){e.General="",e.Account="account",e.Common="common",e.Bug="bug",e.Feat="feature"}(o||(o={})),function(e){e[e.HideStillReport=2048]="HideStillReport",e[e.Account=4096]="Account"}(n||(n={})),function(e){e[e.ImageAnswer=1]="ImageAnswer",e[e.CategoryName=2]="CategoryName",e[e.Link=3]="Link"}(a||(a={})),function(e){e[e.NotEntranceShowType=0]="NotEntranceShowType",e[e.NotSolveAfterShow=1]="NotSolveAfterShow",e[e.NotSolveBeforeShow=2]="NotSolveBeforeShow",e[e.NotSolveAfterNotShow=3]="NotSolveAfterNotShow"}(r||(r={})),function(e){e[e.AlwaysShow=0]="AlwaysShow"}(s||(s={})),function(e){e.General="general"}(l||(l={})),function(e){e.V2="v2",e.V3="v3"}(d||(d={})),function(e){e.Yes="yes",e.No="no"}(c||(c={}));const u="general",g={5678:"login_page",9190:"login_page_lite",13e3:"abnor_live_purch",13417:"eg_referral",12043:"th_referral",10541:"br_referral",10561:"id_referral",11087:"Creator_Fund_EU",10960:"Creator_Fund",15376:"ca_referral",15375:"au_referral",15048:"BA_registration",13186:"TikTok_shoutouts",12996:"balance_page",13053:"br_referral_lite"},m=["US"],h=3,_=4,v={getListV2:"/feedback/2/common_feedback_list/",getListV3:"/feedback/3/common_feedback_list/",getNewestReply:"/api/feedback/v1/newest_reply/",uploadImage:"/node/feedback/upload_image/",getReportRecords:"/feedback/3/list/",submitFeedback:"/feedback/2/post_message/"},y=["image/png","image/jpeg","image/jpg","image/bmp"],b={id:"",label:p.Q.HELP_CENTER.key,translated:!1}},45288:(e,t,i)=>{"use strict";i.d(t,{Q:()=>o});const o={IS_YOUR_PROBLEM_RESOLVED:{key:"Is your problem resolved?"},BACKEND_SETTINGS_YES:{key:"backend_settings_yes"},BACKEND_SETTINGS_NO:{key:"backend_settings_no"},THANK_YOU_FOR_YOUR_FEEDBACK:{key:"Thank you for your feedback"},BACKEND_SETTINGS_STILLHAVEPROBLEM:{key:"backend_settings_stillhaveproblem"},HELP_CENTER:{key:"Help Center"},BACKEND_SETTINGS_TOPIC_TITLE:{key:"backend_settings_topictitle"},FEEDBACK_AND_HELP:{key:"Feedback and help"},FEEDBACK_PC_BACK:{key:"feedback_pc_back"},BACKEND_SETTINGS_FAQTITLE:{key:"backend_settings_faqtitle"},REPORT_A_PROBLEM:{key:"Report a problem"},FEEDBACK_PC_HISTORY:{key:"feedback_pc_history"},TELL_US_YOUR_FEEDBACK:{key:"Tell us your feedback"},PLEASE_PROVIDE_AS_MUCH_DETAIL_AS_POSSIBLE:{key:"Please provide as much detail as possible"},FEEDBACK_PC_UPLOAD:{key:"feedback_pc_upload"},SUBMIT:{key:"Submit"},NETWORK_ERROR_PLEASE_TRY_AGAIN:{key:"Network error. Please try again."},COM_MIG_YOUR_SUPPORT_TICKETS:{key:"com_mig_your_support_tickets"},DESCRIPTION_MUST_BE_AT_LEAST_2_CHARS:{key:"Description must be at least 2 characters"}}},493:(e,t,i)=>{"use strict";i.d(t,{Li:()=>o,Zy:()=>n});const o="tiktok_webapp",n="tiktok_webapp_login"},53304:(e,t,i)=>{"use strict";i.d(t,{s:()=>a,q:()=>r});var o=i(91051),n=i(88671);function a({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{offsetHeight:o,scrollTop:n,scrollHeight:a}=e.current;o+n+i>=a&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>{const{current:t}=e;return null==t||t.addEventListener("scroll",r),()=>{null==t||t.removeEventListener("scroll",r)}}),[e,e.current,r])}function r({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{bottom:o}=e.current.getBoundingClientRect();o-i<=window.innerHeight&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)})),[r])}},2723:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var o=i(91051),n=i(88671);function a({elementRef:e,threshold:t=1e3,onHitBottom:i,onPageBottom:a,shouldRunOnMount:r}){const s=(0,o.useRef)(null),l=(0,o.useRef)(0),d=(0,n.fB)((()=>{var o,n,r,d,c,p,u;if(!s)return;let g,m;if(e)g=null!==(r=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==r?r:0,m=(null!==(c=null===(d=e.current)||void 0===d?void 0:d.scrollHeight)&&void 0!==c?c:0)-(null!==(u=null===(p=e.current)||void 0===p?void 0:p.clientHeight)&&void 0!==u?u:0)-g;else{const e=document.documentElement||document.body.parentNode||document.body;g=void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop,m=Number(null===(o=s.current)||void 0===o?void 0:o.scrollHeight)-g-window.innerHeight}m-t<=0&&l.current<g&&(null==i||i()),m<=-60&&g-l.current>=18&&(null==a||a()),l.current=g}),[i,t,a,e],100);return(0,o.useEffect)((()=>{r&&d()}),[]),(0,o.useEffect)((()=>{var t;const i=null!==(t=null==e?void 0:e.current)&&void 0!==t?t:window;return i.addEventListener("scroll",d),()=>{i.removeEventListener("scroll",d)}}),[d,e]),s}},40599:(e,t,i)=>{"use strict";i.d(t,{R:()=>l,J:()=>d});var o=i(25615),n=i.n(o),a=i(91051),r=i(13964);const s=(0,a.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:n(),setScrollWidth:n(),subscribeModalChange:()=>n()});function l(){const e=(0,a.useRef)(0),t=(0,a.useRef)(0),i=(0,a.useRef)([]),o=(0,a.useCallback)((t=>{e.current=t}),[]),n=(0,a.useCallback)((e=>{t.current=e}),[]),r=(0,a.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),l=(0,a.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:o,setScrollWidth:n,subscribeModalChange:r})),[r,o,n]);return{GlobalModalProvider:s.Provider,value:l}}function d(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:o,scrollWidthRef:n,subscribeModalChange:l}=(0,a.useContext)(s),d=(0,a.useCallback)((e=>{o.current.forEach((t=>{t({hasModal:e,scrollWidth:n.current})}))}),[n,o]);return{showModal:(0,a.useCallback)((o=>{if(!(0,r.Ii)()&&!o)return;const{current:n}=e;if(t(n+1),0===n){const e=(0,r.YT)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",d(!0)}}),[e,d,t,i]),hideModal:(0,a.useCallback)((()=>{const{current:o}=e,n=Math.max(0,o-1);t(n),0===n&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",d(!1))}),[e,d,t,i]),subscribeModalChange:l}}},85404:(e,t,i)=>{"use strict";i.d(t,{o:()=>s,e:()=>l});var o=i(9236),n=i(91051),a=i(8721),r=i(84785);function s(){return(0,o.mp)(r.G,{selector:e=>{var t,i,o,n;return{domain:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.domains.starling)&&void 0!==i?i:"https://starling-oversea.byteoversea.com",teaDomain:null!==(n=null===(o=e.appContext)||void 0===o?void 0:o.domains.tea)&&void 0!==n?n:"https://maliva-mcs.byteoversea.com"}},dependencies:[]})}const l=(e="Webapp")=>{const t=(0,a.Q)(e),i=(0,n.useCallback)(((e,i)=>{const o=function(e){if(!e||isNaN(e))return"";const t=new Date(Number(e)),i=new Date,o=Math.max(i.getTime()-t.getTime(),0);return t.getFullYear()!==i.getFullYear()?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`:~~(o/g)>7?`${t.getMonth()+1}-${t.getDate()}`:7==~~(o/g)?{num:1,unit:"unit_week"}:o>g?{num:~~(o/g),unit:"unit_day"}:o>u?{num:~~(o/u),unit:"unit_hr"}:o>p?{num:~~(o/p),unit:"unit_min"}:{num:1+~~(o/c),unit:"unit_sec"}}(e);if("string"==typeof o)return o;const{num:n,unit:a}=o;return i?`${n}${t(a)}`:t("time_ago",{num:n,unit:t(a)})}),[t]);return{t,timeTranslator:i}};var d;!function(e){e.Week="unit_week",e.Day="unit_day",e.Hour="unit_hr",e.Minute="unit_min",e.Second="unit_sec"}(d||(d={}));const c=1e3,p=6e4,u=36e5,g=24*u},48710:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var o=i(91051);const n=({upHandler:e,downHandler:t,confirmHandler:i})=>(0,o.useCallback)((o=>{const{keyCode:n}=o;switch(n){case 38:o.preventDefault(),e();break;case 40:o.preventDefault(),t();break;case 13:null==i||i()}}),[i,t,e])},89436:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var o=i(91051),n=i(21041);function a(){const e=(0,n.k6)();return(0,o.useCallback)(((t,{href:i,state:o,shouldUsePush:n})=>{n&&(t.preventDefault(),e.push(i,o))}),[e])}},23753:(e,t,i)=>{"use strict";i.d(t,{A4:()=>n,S0:()=>r});const o={plugins:{ajax:{ignoreUrls:[".byteoversea.com","tiktokv.com/v1/list","mcs-sg.tiktok.com","mcs-va.tiktok.com","mcs.us.tiktok.com"]},jsError:{ignoreErrors:["Blocked a frame with origin","__msg_type","vid_mate_check is not defined","ResizeObserver loop limit exceeded"]},resource:!0,pageview:{sendInit:!1,routeMode:"manual"}},sample:{sample_rate:1,sample_granularity:"event",include_users:[],rules:{resource:{enable:!0,sample_rate:.01,conditional_sample_rules:[]},resource_error:{enable:!0,sample_rate:.05,conditional_sample_rules:[]},performance_longtask:{enable:!0,sample_rate:.001,conditional_sample_rules:[]}}},env:"production",release:"1.0.0.2216"},n=(e,t={})=>`!function(e,n,r,t,d){if(window[n]&&window[n].config)return;var i=document.createElement(r),s=document.getElementsByTagName(r)[0];i.async=1,i.src=e;var a=s.parentNode;a&&a.insertBefore(i,s);var o=[];function c(){o.push(arguments[0])}window[n]={error:o,config:t,listener:c,sf:d},window.addEventListener("error",c,!0),window.addEventListener("unhandledrejection",c)}("${"t"===e?"https://sf16-short-sg.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.1.1.0.sg.js":"https://sf16-short-va.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.1.1.0.maliva.js"}","SlardarLite","script",${JSON.stringify(Object.assign(o,t))},0);`;var a;!function(e){e.P0="fatal",e.P1="error",e.P2="warning",e.P3="info",e.P4="debug",e.P5="critical"}(a||(a={}));const r=["lcp","fp","fid","ttfb","mpfid"]},85866:(e,t,i)=>{"use strict";i.d(t,{q:()=>s});var o=i(16926),n=i(91051),a=i(91218);let r=!0;function s({pid:e}){const t=(0,o.fz)(a.n);(0,n.useEffect)((()=>{t.config({pid:e}),t.context({isLandingPage:r?1:0}),r=!1}),[e,t])}},91218:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var o=i(64047),n=i(57244),a=i(41078),r=i(93797),s=i(40022),l=i(493),d=i(23753);let c=class{constructor(){if(this.cachePreBid="",!(0,s.y)())try{a.Z.on("beforeSend",(e=>{var t,i,o,n;try{if("performance"===e.ev_type&&("metrics"in e.payload?e.payload.metrics.forEach(this.collectSlardarMetricsToTea):this.collectSlardarMetricsToTea(e.payload,null===(t=e.common)||void 0===t?void 0:t.pid)),"performance_timing"===e.ev_type){const{responseEnd:t,responseStart:a,domContentLoadedEventEnd:s,fetchStart:l,navigationStart:d}=null!==(i=e.payload.timing)&&void 0!==i?i:{},c=null!==(n=null===(o=e.payload.common)||void 0===o?void 0:o.pid)&&void 0!==n?n:"unknown",p=s-l,u=t-a,g=a-d;r.W.event("slardar_perf_domready",{metric_duration:p&&p>0?p.toString():-1,pid:c}),r.W.event("slardar_perf_response",{metric_duration:u&&u>0?u.toString():-1,pid:c}),r.W.event("slardar_perf_ttfb",{metric_duration:g&&g>0?g.toString():-1,pid:c})}}catch(e){}return e}))}catch(e){}}config(e){try{a.Z.config(e)}catch(e){}}toggleLoginSlardar(e){var t,i;e?(this.cachePreBid=null===(i=null===(t=window.SlardarLite)||void 0===t?void 0:t.config)||void 0===i?void 0:i.bid,this.config({bid:l.Zy})):this.config({bid:this.cachePreBid})}context(e){try{Object.entries(e).forEach((([e,t])=>{var i;return null===(i=a.Z.context)||void 0===i?void 0:i.set(e,t)}))}catch(e){}}captureMessage(e="",t,i={}){var o;try{null===(o=a.Z.captureException)||void 0===o||o.call(a.Z,new Error(e),t?Object.assign(Object.assign({},i),{level:t}):i)}catch(e){console.info("slardar: capture exception error")}}emitEvent(e,t,i){var o;try{null===(o=a.Z.sendEvent)||void 0===o||o.call(a.Z,{name:e,categories:i,metrics:t})}catch(e){}}reportI18nLoadedFailed(e,t){this.emitEvent("I18nLoadFailed",{count:1},{staringName:e,lang:t})}sendLog(e,t,i){var o;try{null===(o=a.Z.sendLog)||void 0===o||o.call(a.Z,{content:e,level:t,extra:i})}catch(e){}}sendPV(e){var t;try{null===(t=a.Z.sendPageview)||void 0===t||t.call(a.Z,e)}catch(e){}}previousPid(){var e,t;return null===(t=null===(e=window.SlardarLite)||void 0===e?void 0:e.config)||void 0===t?void 0:t.pid}collectSlardarMetricsToTea(e,t){if(e.isSupport||e.isPolyfill){const i=e.name.toLowerCase();d.S0.includes(i)&&r.W.event(`slardar_perf_${i}`,{metric_duration:e.value.toString(),pid:null!=t?t:"unknown"})}}};c=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[])],c)},59384:(e,t,i)=>{"use strict";i.d(t,{mn:()=>F,u8:()=>D,nV:()=>B,k0:()=>R});var o=i(64047),n=i(16926),a=i(90293),r=i(91051),s=i(21041),l=i(63747),d=i.n(l),c=i(93797),p=i(7306),u=i(90010);function g(e,t){var i,o,n,a,r,s;const l=(0,p.St)(u.lF,"");if(l&&"{}"!==l)return l;const d=(0,p.pm)()||{},c={object_id:null!==(i=d.object_id)&&void 0!==i?i:d.referer_video_id,object_type:d.object_type,share_device:null!==(n=null!==(o=d.share_device)&&void 0!==o?o:d.sender_device)&&void 0!==n?n:"",share_web_id:null!==(r=null!==(a=d.share_web_id)&&void 0!==a?a:d.sender_web_id)&&void 0!==r?r:"",share_user_id:null!==(s=d.share_user_id)&&void 0!==s?s:""};"referral_amp"===e||"referral_embed"===e?(c.object_type="video",c.object_id=d.referer_video_id):"reflow"===e||"webapp_reflow"===e?(c.object_type=null==t?void 0:t.object_type,c.object_id=null==t?void 0:t.object_id):"push"===e&&(c.push_type=d.push_type),Object.keys(c).forEach((e=>{c[e]||delete c[e]}));const g=JSON.stringify(c);return(0,p.D9)(u.lF,g),g}var m=i(37818);function h(e){if(!(null==e?void 0:e.geometry)||!(null==e?void 0:e.text))return e;const t=(0,m.as)(e.geometry),i=(0,m.as)(e.text);return Object.assign(Object.assign({},e),{text:i,geometry:t})}function _(){if("undefined"==typeof document)return null;const e=document.createElement("canvas");return e.width=256,e.height=128,e.getContext("webgl",{preserveDrawingBuffer:!0})}function v(){var e,t,i,o;const n={value:"",duration:0},a=_(),r=null===(e=null==a?void 0:a.createBuffer)||void 0===e?void 0:e.call(a),s=null===(t=null==a?void 0:a.createProgram)||void 0===t?void 0:t.call(a),l=null===(i=null==a?void 0:a.createShader)||void 0===i?void 0:i.call(a,a.VERTEX_SHADER),d=null===(o=null==a?void 0:a.createShader)||void 0===o?void 0:o.call(a,a.FRAGMENT_SHADER);if(a&&r&&s&&l&&d&&"undefined"!=typeof Uint8Array){let e="";try{a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0]),a.STATIC_DRAW);const t=3,i=3;a.shaderSource(l,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),a.compileShader(l),a.shaderSource(d,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),a.compileShader(d),a.attachShader(s,l),a.attachShader(s,d),a.linkProgram(s),a.useProgram(s);const o=a.getAttribLocation(s,"attrVertex"),n=a.getUniformLocation(s,"uniformOffset");a.enableVertexAttribArray(o),a.vertexAttribPointer(o,t,a.FLOAT,!1,0,0),a.uniform2f(n,1,1),a.drawArrays(a.TRIANGLE_STRIP,0,i);const c=new Uint8Array(131072);a.readPixels(0,0,256,128,a.RGBA,a.UNSIGNED_BYTE,c);const p=JSON.stringify(c).replace(/,?"[0-9]+":/g,"").replace(/^{[0]+}$/g,"");e=(0,m.as)(p)}catch(e){}n.value=e}return n}function y(){var e;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const t={value:"",duration:0};try{if("undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&(null===(e=navigator.userAgentData)||void 0===e?void 0:e.getHighEntropyValues)){const e=yield navigator.userAgentData.getHighEntropyValues(["architecture","bitness","platformVersion","fullVersionList"]);t.value=JSON.stringify(e)}}catch(e){t.value=""}return t}))}function b(){const e={value:"",duration:0};return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)&&(e.value=navigator.userAgent),e}function f(){var e;return{value:null!==(e=null===window||void 0===window?void 0:window.devicePixelRatio)&&void 0!==e?e:1,duration:0}}function x(){const e={value:!1,duration:0};return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.pdfViewerEnabled)&&(e.value=navigator.pdfViewerEnabled),e}function k(){const e={value:0,duration:0};try{const{AudioContext:t}=window;if(t){const i=new t;e.value=i.sampleRate}}catch(t){e.value=0}return e}function w(){var e;const t={value:"",duration:0};try{const i=_(),o=null===(e=null==i?void 0:i.getExtension)||void 0===e?void 0:e.call(i,"WEBGL_debug_renderer_info");i&&o&&(t.value=i.getParameter(o.UNMASKED_VENDOR_WEBGL))}catch(e){t.value=""}return t}function S(){var e;const t={value:"",duration:0};try{const i=_(),o=null===(e=null==i?void 0:i.getExtension)||void 0===e?void 0:e.call(i,"WEBGL_debug_renderer_info");i&&o&&(t.value=i.getParameter(o.UNMASKED_RENDERER_WEBGL))}catch(e){t.value=""}return t}var j=i(48655),C=i(5100),P=i(66688),T=i(37326),O=i(40022),L=i(50218),I=i(23028),A=i(34708),E=i(2734),M=i(51302);function R(e,t){const i=(0,E.m7)((0,A.L)((()=>["region","user","wid","domains","abTestVersion"]),[])),n=Boolean((0,I.x)(i.abTestVersion,"browser_device_id"));!function(e,t,i){const{user:n,region:a,wid:l,domains:u}=e,_=t(),j=(0,r.useCallback)((()=>{var e;const{page_name:t,enter_from:i,is_downgrade:n,object_id:a,object_type:r}=_,s=(0,o.__rest)(_,["page_name","enter_from","is_downgrade","object_id","object_type"]),l=(0,p.pm)();return Object.assign({previous_page:c.W.getPreviousInfo(t),page_name:t,enter_from:i,page_url:window.location.href,userAgent:navigator.userAgent,keyword:l.keyword,sub_keyword:l.sub_keyword,user_type_alias:window.navigator.userAgent.match(/google/gi)?"search":"user",domain_name:null!==(e=window.location.host)&&void 0!==e?e:"unknown",page_path:window.location.pathname},s)}),[_]),C=(0,r.useCallback)((e=>{const{page_name:t,is_downgrade:i,object_id:o,object_type:r,utm_medium:s,utm_campaign:p,utm_source:u}=_,m=d()(c.W.initDimensionalData,{utm_medium:s,utm_campaign:p,utm_source:u});return Object.assign({user_is_login:n?1:0,landing_page:c.W.getLandingPage(t),is_kids_mode:(null==n?void 0:n.ftcUser)?1:0,region:a,extraData:g(m.launch_mode,{object_id:o,object_type:r}),is_downgrade:i,session_id:c.W.getSessionId(l),webapp_hash_id:e},m)}),[_,a,n,l]);(0,r.useEffect)((()=>{(()=>{(0,o.__awaiter)(this,void 0,void 0,(function*(){var e;if(!_)return;const{shouldReportDeviceId:t=!1}=_;let i;if(t)try{i=yield function(){return(0,o.__awaiter)(this,void 0,void 0,(function*(){const e=yield m.ZP.load({monitoring:!1}),t=(yield e.get()).components,{domBlockers:i,canvas:n}=t,a=(0,o.__rest)(t,["domBlockers","canvas"]),r={value:h(n.value),duration:0};return Object.values(a).forEach((e=>e.duration=0)),m.ZP.hashComponents(Object.assign(Object.assign({},a),{canvasComponent:r,webglComponent:v(),highEntropyValues:yield y(),uaComponent:b(),devicePixelRatio:f(),pdfViewerEnabled:x(),sampleRate:k(),webGLUnmaskedVendorComponent:w(),webGLUnmaskedRendererComponent:S()}))}))}()}catch(e){i=void 0}const r=j(),s=C(i);c.W.config({initConfig:{channel_domain:u.tea,ab_channel_domain:u.libraWebSDK,id:1988},commonHeaderConfig:{region:a,user_id:null!==(e=null==n?void 0:n.uid)&&void 0!==e?e:"",user_is_login:Boolean(n),user_unique_id:l,"header.custom":s},commonEventParams:r})}))})()}),[...i]),function(){const e=(0,s.k6)();(0,r.useEffect)((()=>{const t=null==e?void 0:e.listen((e=>{c.W.resetStayDuration(e.pathname,e.pathname,window.location.href)}));return()=>{null==t||t()}}),[])}()}(i,(()=>Object.assign(Object.assign({},e()),{is_downgrade:(0,O.W)(),shouldReportDeviceId:n})),t)}function F({eParams:e}){var t;const{botType:i,isMobile:n}=null!==(t=(0,A.L)((()=>["botType","isMobile"]),[]))&&void 0!==t?t:{},{search:l,pathname:d}=(0,s.TH)(),c=(0,a.parse)(l);return(0,r.useCallback)((()=>{const t=e||{},{is_from_webapp:a}=t,r=(0,o.__rest)(t,["is_from_webapp"]),s=c.sender_web_id?{sender_device:c.sender_device,sender_web_id:c.sender_web_id}:{},l=n||(0,L.oC)(d)||(p=`#${location.pathname}`,/^#\/@.*\/video\/\d+$/.test(p))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:a||["v1","v2","v3"].indexOf(c.is_from_webapp)>-1?c.is_from_webapp:"0"},s):{};var p;const u=Object.assign(Object.assign({bot_type:null!=i?i:"others",keyword:c.keyword,sub_keyword:c.sub_keyword},r),l);j._.handlePageView(u)}),[e,c.sender_web_id,c.sender_device,c.is_from_webapp,n,c.keyword,c.sub_keyword,d,i])}function D(e){const{pathname:t}=(0,s.TH)(),i=(0,n.fz)(C.KF);(0,r.useEffect)((()=>{const e=(0,M.BB)(t);i.handleRouteChange(t),i.updateCurrentPage(e),i.setCurrentPageReport(!1),i.resetExist(),i.reportVideoAdditionStart({startTime:Date.now(),situation:"addition_first_load"})}),[i,e,t])}function B(){const e=(0,n.fz)(P.e),t=(0,n.fz)(T.k);(0,r.useEffect)((()=>{e.reset(),t.resetState()}),[e,t])}},23028:(e,t,i)=>{"use strict";i.d(t,{x:()=>a});var o=i(93797);const n=[];function a(e,t){try{return e.parameters[t].vid}catch(e){return void(-1===n.indexOf(t)&&(o.W.event("abtest_vid_failed",{experiment_name:t}),n.push(t)))}}},2734:(e,t,i)=>{"use strict";function o(e,t=1){return Math.round(Number(`${e}e${t}`))/Math.pow(10,t)}i.d(t,{BT:()=>n,a1:()=>a,ZT:()=>s,yk:()=>d,u0:()=>c,Nn:()=>p,Bm:()=>u,sA:()=>g,m7:()=>h,y7:()=>_,vp:()=>v});function n(e=0){let t;return t=e<1e4?e.toString():e<999999?`${o(e/1e3)}K`:e<999999999?`${o(e/1e6)}M`:`${o(e/1e9)}B`,t}function a(e,t=99,i="99+"){return e>t?i:String(e)}function r(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.url_list)||void 0===t?void 0:t.find((e=>!/\.webp/.test(e))))&&void 0!==i?i:""}function s(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}function l({is_block:e,is_blocked:t,follow_status:i}){if(null!=i)return e?4:t?5:u[i]}function d(e,t){const{avatar_larger:i,avatar_medium:o,avatar_thumb:n,uid:a,short_id:s,unique_id:d,sec_uid:c,room_id:p,nickname:u,is_block:g,is_blocked:m,follow_status:h,signature:_,show_favorite_list:v,custom_verify:y,enterprise_verify_reason:b,comment_setting:f,duet_setting:x,is_ad_fake:k,is_private_account:w,secret:S,show_secret_banner:j,stitch_setting:C,follower_status:P}=e;return{avatarLarger:r(i),avatarMedium:r(o),avatarThumb:r(n),id:a,shortId:s,uniqueId:null!=d?d:"",secUid:null!=c?c:"",roomId:String(null!=p?p:""),nickname:u,relation:l({is_block:g,is_blocked:m,follow_status:h}),signature:_,openFavorite:v,verified:Boolean(y||b),commentSetting:f,duetSetting:x,stitchSetting:C,isADVirtual:k,privateAccount:Boolean(w),secret:Boolean(S),createTime:0,showPrivateBanner:Boolean(j),extraInfo:Object.assign({followerStatus:P},t)}}function c(e,t=!1){const{follower_count:i,following_count:o,aweme_count:n}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=o?o:0,heart:0,heartCount:0,videoCount:null!=n?n:0,needFix:t}}function p(e){const{id_str:t,title:i,play_url:o,cover_medium:n,cover_large:a,cover_thumb:r,is_original:l,duration:d,author:c}=e;return{id:String(t),title:i,duration:d,keyToken:"",playUrl:s(o),coverMedium:s(n),coverLarge:s(a),coverThumb:s(r),original:null!=l&&l,authorName:c}}const u={[-1]:-1,0:0,1:1,2:2,4:3};function g(e,t){if(!e)return!0;const{commentSetting:i,relation:o,id:n}=e;return 1===i&&2!==o&&t!==n}const m=Object.freeze({});function h(e){return null!=e?e:m}function _(e,t,i){if((null==e?void 0:e.vv)&&Number(null==e?void 0:e.vv)>0)return Number(e.vv);let o=0;return t&&t.forEach((e=>{var t,i;o+=null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.playCount)&&void 0!==i?i:0})),i&&i.forEach((e=>{var t,i;o+=Number(null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.viewCount)&&void 0!==i?i:0)})),o}function v(e){return e.replace(/\n(\n)*( )*(\n)*\n/g,"\n")}},92803:(e,t,i)=>{"use strict";i.d(t,{LM:()=>n,rB:()=>a,Xo:()=>s,mX:()=>l,Pd:()=>d,jI:()=>c,Cc:()=>p,X:()=>u,i5:()=>g,nV:()=>f});var o=i(83323);function n(){return{appkey:"tiktok-web",app_key:"tiktok-web",aid:1284,app_name:"tiktok_web",iid:"0"}}function a(e){return e?e.toLocaleLowerCase().split("-")[0].replace("pt","pt_BR").replace("zh","zh-TW"):"en"}function r(e){var t;const i=e.EntranceShowType;return{id:e.FaqId,name:e.Name,value:e.Value,url:e.Url,children:(null!==(t=e.Children)&&void 0!==t?t:[]).map(r),knowledgeType:e.KnowledgeType,entranceShowType:i,imageUrl:e.ImageUrl,originLabelId:e.OriginLabelId,ticketAppId:e.TicketAppId,ticketCategoryId:e.TicketCategoryId,flags:2===i?0:2048,neverShowNeedMoreHelp:3===i}}function s(e){const{statusCode:t,statusMessage:i,faqInfoMap:o,entranceMap:n}=e;return{statusCode:t,statusMessage:i,faqInfoMap:Object.entries(null!=o?o:{}).reduce(((e,[t,i])=>e?(e[t]=(i||[]).map(r),e):e),{}),entranceMap:n}}function l({faqInfoMap:e,entranceMap:t,faqType:i,entrance:o}){var n;const a=("common"===i?"common":o===(null==t?void 0:t.general)&&o)||"general";return null!==(n=null==e?void 0:e[a])&&void 0!==n?n:[]}function d(e){return o.Cl.some((t=>t===e))}function c(e){var t;return null!==(t=Array.isArray(e)?e[0]:e)&&void 0!==t?t:""}function p(e){return o.y9[c(e)]||""}function u(e,t,i={flattened:{},levels:[]}){return(e||[]).reduce(((e,i)=>{const o=(t?[...(null==t?void 0:t.__parents)||[],t.id]:[]).length,n=Object.assign(Object.assign({},i),{level:o,__parents:t?[...(null==t?void 0:t.__parents)||[],t.id]:[]});return e.flattened[n.id]=n,e.levels[o]=e.levels[o]||{},e.levels[o][i.id]=n,u(i.children,n,e),e}),i)}function g(e){var t;return Boolean(e&&(e.length>1||(null===(t=e[0])||void 0===t?void 0:t.children.length)))}function m(e,t,i=""){return`<a \n    style="color: #00C6E9;" \n    href="mailto:${e}?subject=TikTok-Web&body=Username: ${t}   Country/Region: ${i}">${e}</a>`}o.NI.getListV2,o.NI.getListV3;const h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},_="privacy@tiktok.com",v="feedback@tiktok.com",y=new RegExp(_,"g"),b=new RegExp(v,"g");function f(e,t,i,o){let n=e;return n=n.replace(/[&<>"'/]/g,(e=>h[e]||"")),1===t&&(n=n.replace(y,(()=>m(_,null!=i?i:"",o))).replace(b,(()=>m(v,null!=i?i:"",o)))),n}},97913:(e,t,i)=>{"use strict";i.d(t,{Re:()=>l,Ld:()=>p});var o=i(64047),n=i(57244);const a=8*Math.pow(10,5),r="keyvaluepairs",s={byteLength:-1,duration:-1,type:-1,vid:"unknown"};let l=class{constructor(){this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=e=>{e.length&&(this.preloadQueue=null!=e?e:[],e.forEach((({id:e})=>{e&&this.preloadUrlsPool.add(e)})))},this.setPreloadIndex=e=>{e>=0&&(this.preloadStartIndex=e)},this.getPreloadUrls=()=>{const{preloadStartIndex:e}=this;return this.preloadQueue.slice(e+1,e+4)},this.getPreloadedPool=()=>this.preloadUrlsPool,this.reset=()=>{this.preloadQueue=[],this.preloadStartIndex=-1,this.preloadUrlsPool.clear()},this.setCurrentPage=e=>{this.currentPage=e||"unknown"},this.clearAllVideoCaches=()=>{this.currentPage&&(this.preloadUrlsPool.clear(),this.clearIndexDBCache())},this.clearSingleVideoCache=e=>{this.clearIndexDBCache(!1,[e],(()=>{this.preloadUrlsPool.delete(e)}))},this.clearIndexDBCache=(e=!0,t=[],i=(()=>{}))=>{const o=this;if(!window.indexedDB)return void console.warn("Browser doesn't support a stable version of IndexedDB, preload feature may not be available. ");const n=window.indexedDB.open("__PRE_CACHE__");n.onsuccess=function(){const s=n.result;try{const n=s.transaction([r],"readwrite"),l=n.objectStore(r);e?l.clear().onsuccess=function(){i.call(o)}:t.forEach((e=>{l.delete(((e,t="video",i=0)=>`TT-vCache-${e}#${t}#${i}#${a-1}`)(e)).onsuccess=function(){i.call(o,e)}})),n.onerror=function(){console.error("[IndexDB]: transaction error: ",n.error)}}catch(e){return}},n.onerror=function(e){console.error("[IndexDB]: Open database error, maybe no authorization. For more: ",n.error,e.target.errorCode)}}}};l=(0,o.__decorate)([(0,n.G)()],l);class d{constructor(){this.preloadVideoId="",this.preloadVideoCache=s,this.setPreloadCacheInfo=(e,t)=>{e&&t&&e!==this.preloadVideoId&&(this.preloadVideoId=e,this.preloadVideoCache=t)},this.getPreloadCacheInfo=e=>e&&this.preloadVideoId&&e===this.preloadVideoId?this.preloadVideoCache:s}}let c=null;const p=()=>(c||(c=new d),c)},91506:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var o=i(90293);const n=({src:e,sgOpen:t})=>{const i=/^https?:\/\/[a-zA-Z0-9-]+-sg/.test(e)||t?"t.tiktok.com":"m.tiktok.com";return(0,o.stringifyUrl)({url:`https://${i}/node-a/video/playsv`,query:{play_url:e}})}},13033:(e,t,i)=>{"use strict";i.d(t,{iv:()=>l,F3:()=>d,To:()=>c,Bv:()=>u,u8:()=>g,$I:()=>m});var o=i(13964);const n=()=>'""',a=()=>{},r=()=>{};class s{constructor(e,t){this.key=e,this.type=t,this.storageObject=null,this.getter=n,this.setter=a,this.remove=r,this.getter="local"===t?o.le:o.St,this.setter="local"===t?o.D$:o.D9,this.remove="local"===t?o.e8:o.lD}get storage(){return this.storageObject||(this.storageObject=this.tryParseJson(this.getter(this.key,"{}"))),this.storageObject}setItem(e,t){this.storage[e]=t,this.setter(this.key,JSON.stringify(this.storage))}getItem(e){return this.storage[e]}removeItem(e){this.storage[e]=void 0,this.setter(this.key,JSON.stringify(this.storage))}removeAll(){this.storageObject=null,this.remove(this.key)}tryParseJson(e){try{return JSON.parse(e)}catch(e){return{}}}}const l=new s("frequency-control-config","local"),d=new s("webapp-common-config","local"),c=new s("webapp-common-config","session");var p;!function(e){e.Manual="manual",e.BrowserMode="browser_mode"}(p||(p={}));const u=new s("webapp-video-mute","local"),g=new s("keyboard-shortcut-config","local"),m=new s("webapp-comment-url","session")},51302:(e,t,i)=>{"use strict";i.d(t,{BB:()=>s,AY:()=>l});var o=i(21041),n=i(29046),a=i(1e3),r=i(50218);function s(e){return(0,r.oC)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/tag\//.test(e)?"challenge":/^\/following/.test(e)?"homepage_follow":/^\/discover\/.+/.test(e)?"discover_kw":/^\/discover/.test(e)?"discovery":/^\/profile/.test(e)?"personal_homepage":/^\/topics/.test(e)?`topic_${e.slice(1).split("/")[1]}`:/^\/inbox/.test(e)?"homepage_message":/^\/report/.test(e)?"report":(0,o.LX)(e,{path:n.Ad.searchHome,exact:!0})?"general_search":(0,o.LX)(e,{path:n.Ad.searchUser,exact:!0})?"search_user":(0,o.LX)(e,{path:n.Ad.searchVideo,exact:!0})?"search_video":(0,o.LX)(e,{path:a.$J.liveGoLive,exact:!0})?"live_take":(0,o.LX)(e,{path:[a.$J.liveReferralHost,a.$J.liveReferralHostFaq],exact:!0})?"live_referral_host":(0,o.LX)(e,{path:a.$J.liveDiscover,exact:!0})?"live_discover":(0,o.LX)(e,{path:a.$J.liveRoomEmbed,exact:!0})?"live_embed_detail":(0,o.LX)(e,{path:a.$J.liveRoom,exact:!0})?"live_detail":(0,o.LX)(e,{path:a.$J.rechargePayment,exact:!0})||(0,o.LX)(e,{path:a.$J.coinPayment,exact:!0})?"live_recharge_cashier":(0,o.LX)(e,{path:n.gY.loginHome,exact:!1})||(0,o.LX)(e,{path:n.gY.oauth,exact:!1})||(0,o.LX)(e,{path:n.gY.oauthLine,exact:!1})?"login":(0,o.LX)(e,{path:n.gY.signupHome,exact:!1})?"signup":(0,o.LX)(e,{path:[a.$J.recharge,a.$J.rechargePaymentCode,a.$J.rechargePaymentResult,a.$J.rechargeTransactions,a.$J.rechargeUnavailable,a.$J.rechargeTerms,a.$J.rechargeTransactionsDetail,a.$J.rechargeCardManagement,a.$J.coin,a.$J.coinPaymentCode,a.$J.coinPaymentResult,a.$J.coinTransactions,a.$J.coinUnavailable,a.$J.coinTerms,a.$J.coinTransactionsDetail,a.$J.coinCardManagement],exact:!0})?"live_recharge":"unknown"}function l(){return location.pathname.startsWith(n.Ad.musicPlaylist.split(":")[0])?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}},88018:(e,t,i)=>{"use strict";var o;i.d(t,{lk:()=>s}),function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={}));const n=["ast","de","en","fr","it","ja","pt"],a=["microsoft","apple","amazon","google","download"],r={apple:"ios_app_store",google:"google_play",amazon:"amazon_store",download:"download_apk",microsoft:"microsoft_store"};function s({lang:e,downloadLink:t={},isIOS:i=!1,isAndroid:o=!1}){var s;const l=e.split("-")[0],d=n.includes(l)&&!(null===(s=t.download)||void 0===s?void 0:s.visible)?l:"en";return{iconLanguage:d,iconConfig:a.reduce(((e,n)=>{const a=t[n];return(null==a?void 0:a.visible)&&function({platform:e,isIOS:t,isAndroid:i}){switch(e){case"apple":return!i;case"google":case"download":case"amazon":return!t;default:return!0}}({platform:n,isAndroid:o,isIOS:i})&&e.push({platform:n,language:d,href:a.officewebshare||a.normal,alt:`${n}-store`,target:r[n]||n}),e}),[])}}},57779:(e,t,i)=>{"use strict";i.d(t,{Mf:()=>u,$:()=>m,EV:()=>h,wF:()=>_,Aq:()=>y});var o=i(32913),n=i(27918),a=i(59126),r=i(6998),s=i(25555),l=i(22745),d=i(24400),c=i(11723),p=i(40567);const u=(0,o.Z)("div",{target:"e1obx3ji0"})((({region:e})=>({marginTop:"US"===e?"40px":"16px",display:"flex",flexDirection:"row",width:"288px",flexWrap:"wrap",justifyContent:"space-between"})),"label:DivDownloadContainer;"),g={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -43px"},google:{backgroundPosition:"0 -86px"}},m=(0,o.Z)("a",{target:"e1obx3ji1"})({":nth-of-type(-n+2)":{marginBottom:"8px"}},"label:AIconContainer;"),h=(0,o.Z)("img",{target:"e1obx3ji2"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},g[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"138px",height:"40px",backgroundSize:"138px",objectFit:"cover",borderRadius:"4px"},"label:ImgIcon;"),_=(0,o.Z)("p",{target:"e1obx3ji3"})((({theme:e})=>(0,n.GI)({theme:e,typography:"P1",fontWeight:"semiBold"})),"label:PSubTitle;"),v={ast:a,de:r,en:s,fr:l,it:d,ja:c,pt:p},y=e=>v[e]},75546:(e,t,i)=>{"use strict";i.d(t,{k:()=>y});var o,n=i(64047),a=i(11040),r=i(8721),s=i(3624),l=i(32913),d=i(27918),c=i(13761);!function(e){e[e.UserFeed=0]="UserFeed",e[e.Feed=1]="Feed",e[e.Browser=2]="Browser",e[e.List=3]="List",e[e.UserPage=4]="UserPage",e[e.Search=5]="Search",e[e.RecommendList=6]="RecommendList"}(o||(o={}));const p=(0,s.F4)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),u=(0,s.F4)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),g=(0,l.Z)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),m=(0,l.Z)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${u} 1800ms ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),h=(0,l.Z)(c.q,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:i})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset"},i?{animation:`${p} 1800ms ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),_=(0,l.Z)("span",{target:"e1vl87hj3"})((({theme:e})=>(0,d.GI)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"})),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",height:"15px",lineHeight:"15px",padding:"0 4px",bottom:"-2px",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",borderRadius:"2px",zIndex:1},"label:SpanLiveBadge;"),v=function({size:e=48}){return(0,a.jsxs)(g,Object.assign({width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,a.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"},void 0),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",Object.assign({id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse"},{children:[(0,a.jsx)("stop",{stopColor:"#FF1764"},void 0),(0,a.jsx)("stop",{offset:"1",stopColor:"#ED3495"},void 0)]}),void 0)},void 0)]}),void 0)},y=function(e){var{className:t,needAnimation:i=!1,isShowLive:o=!0,size:s=32,isShowLiveTag:l=!0,e2eTag:d}=e,c=(0,n.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","e2eTag"]);const p=(0,r.Q)(),u=o&&i,g=o?s-6:s,y=u?s-4:s;return(0,a.jsxs)(m,Object.assign({isAnimating:u,className:t,"data-e2e":d,style:{width:s,height:s}},{children:[o&&(0,a.jsx)(v,{size:y},void 0),(0,a.jsx)(h,Object.assign({isAnimating:u,enable:!0,size:g},c),void 0),o&&l&&(0,a.jsx)(_,{children:p("LIVE")},void 0)]}),void 0)}},43039:(e,t,i)=>{"use strict";i.d(t,{T:()=>c});var o=i(11040),n=i(32913),a=i(80537);const r=(0,n.Z)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),s=(0,n.Z)("p",{target:"emuynwa1"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.H4,{fontFamily:i.Sofia,fontWeight:t.bold,color:o.TextPrimary,marginTop:"24px"}]),"label:PTitle;"),l=(0,n.Z)("p",{target:"emuynwa2"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.P2,{fontFamily:i.Proxima,fontWeight:t.normal,color:o.TextSecondary,marginTop:"8px"}]),"label:PDesc;"),d=(0,n.Z)(a.W,{target:"emuynwa3"})({marginTop:"62px"},"label:StyledButton;"),c=function(e){const{iconElem:t,title:i,desc:n,buttonText:a,isFullScreen:c,brightness:p=1,e2eTitle:u,e2eDesc:g}=e;return(0,o.jsxs)(r,Object.assign({isFullScreen:c},{children:[t,i&&(0,o.jsx)(s,Object.assign({"data-e2e":u,brightness:p},{children:i}),void 0),n&&(0,o.jsx)(l,Object.assign({"data-e2e":g,brightness:p},{children:n}),void 0),Boolean(a)&&(0,o.jsx)(d,Object.assign({type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large"},{children:a}),void 0)]}),void 0)}},93328:(e,t,i)=>{"use strict";i.d(t,{m:()=>a});var o=i(23028),n=i(34708);const a=()=>{var e,t;const{abTestVersion:i}=null!==(e=(0,n.L)((()=>["abTestVersion"]),[]))&&void 0!==e?e:{},a=null!==(t=(0,o.x)(i,"enhance_video_consumption_test"))&&void 0!==t?t:"v1";return{isEnhanceVideoConsumptionV1:"v1"===a,enhanceVideoConsumptionVersion:a}}},66739:(e,t,i)=>{"use strict";i.d(t,{e:()=>P});var o=i(11040),n=i(25615),a=i.n(n),r=i(91051),s=i(65949),l=i(31941),d=i(37834),c=i(25674),p=i(56277),u=i(8721),g=i(34708),m=i(50218),h=i(13033),_=i(93328),v=i(32913),y=i(27918);const b=(0,v.Z)("div",{target:"e1l04njg0"})((({isModal:e=!1,theme:t})=>[{marginBottom:e?"0":"12px",minWidth:e?"400px":"300px",minHeight:e?"280px":"258px",padding:e?"40px 32px 32px":"44px 24px 16px",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",backgroundColor:t.colors.BGSecondary,borderRadius:"8px",border:`1px solid ${t.colors.LineSecondary3}`,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.06)"}]),"label:DivKeyboardShortcutContainer;"),f=(0,v.Z)("div",{target:"e1l04njg1"})((({isModal:e=!1,theme:t})=>[(0,y.GI)({theme:t,typography:e?"P0":"P1",fontWeight:"bold",fontFamily:"Proxima"}),{width:"100%",height:"22px",lineHeight:"22px",textAlign:"center",color:t.colors.TextPrimary,whiteSpace:"nowrap"}]),"label:DivKeyboardShortcutTitle;"),x=(0,v.Z)("div",{target:"e1l04njg2"})((({theme:e})=>[{marginTop:"16px",width:"100%",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContent;"),k=(0,v.Z)("div",{target:"e1l04njg3"})((({theme:e})=>[(0,y.GI)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"Proxima"}),{width:"100%",height:"40px",textAlign:"left",color:e.colors.TextPrimary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContentItem;"),w=(0,v.Z)("div",{target:"e1l04njg4"})((({theme:{direction:e}})=>(0,y.YJ)({direction:e,end:"16px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),S=(0,v.Z)(w,{target:"e1l04njg5"})((({theme:{colors:e}})=>({width:"24px",height:"24px",borderRadius:"100px",backgroundColor:e.BGView})),"label:StyledModalXMarkWrapper;"),j=24,C=[{content:"desktop_kb_shortcuts_tooltip_previous",icon:(0,o.jsx)(s.Z,{width:j,height:j},void 0)},{content:"desktop_kb_shortcuts_tooltip_next",icon:(0,o.jsx)(l.Z,{width:j,height:j},void 0)},{content:"desktop_kb_shortcuts_tooltip_like_vid",icon:(0,o.jsx)(d.Z,{width:j,height:j},void 0)},{content:"desktop_kb_shortcuts_tooltip_mute_unmute_vid",icon:(0,o.jsx)(c.Z,{width:j,height:j},void 0)}],P=(0,r.memo)((function({isModal:e=!1,onClose:t=a()}){const i=(0,u.Q)(),n=(0,g.L)((()=>["abTestVersion","wid"]),[]),{showKeyboardShortcut:s,handleClose:l}=((e=!1,t,i)=>{const o=h.u8.getItem("webid"),[n,a]=(0,r.useState)(!0),{enhanceVideoConsumptionVersion:s}=(0,_.m)(),[l,d]=(0,r.useState)(e),c=(0,r.useCallback)((()=>{e?t():(h.u8.setItem("hasCloseKeyboardShortcut",!0),a(!1))}),[e,t]);return(0,r.useEffect)((()=>{var t;if(!e)if("v3"!==s)d(!1);else if((null==i?void 0:i.wid)!==o)d(!0),h.u8.setItem("webid",null!==(t=null==i?void 0:i.wid)&&void 0!==t?t:""),h.u8.setItem("hasCloseKeyboardShortcut",!1);else{const e=h.u8.getItem("hasCloseKeyboardShortcut");d(!e)}}),[]),(0,r.useEffect)((()=>{const{pathname:t=""}=location;e||(0,m.oC)(t)||t.startsWith("/following")||/^\/@.*\/video\/\d+/.test(t)||d(!1)}),[]),{showKeyboardShortcut:n&&l,handleClose:c}})(e,t,n),d=i(e?"desktop_kb_shortcuts_modal":"desktop_kb_shortcuts_tooltip_title");return s?(0,o.jsxs)(b,Object.assign({isModal:e},{children:[e?(0,o.jsx)(S,Object.assign({onClick:l},{children:(0,o.jsx)(p.Z,{width:20,height:20},void 0)}),void 0):(0,o.jsx)(w,Object.assign({onClick:l},{children:(0,o.jsx)(p.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(f,Object.assign({isModal:e},{children:d}),void 0),(0,o.jsx)(x,{children:C.map((({content:t,icon:n})=>(0,o.jsxs)(k,Object.assign({isModal:e},{children:[i(t),n]}),t)))},void 0)]}),void 0):null}));P.defaultProps=Object.assign(Object.assign({},P.defaultProps),{"data-e2e":"keyboard-shortcut"})},63092:(e,t,i)=>{"use strict";i.d(t,{G:()=>u});var o=i(64047),n=i(11040),a=i(16926),r=i(89974),s=i.n(r),l=i(91051),d=i(66958),c=i(23588),p=i(77107);const u=function(e){var{uniqueId:t,secUid:i,extraQuery:r={},children:u,replace:g=!1,isInBrowserMode:m=!1,teaParams:h,stopPropagation:_=!0,onClick:v,onLinkClick:y}=e,b=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","stopPropagation","onClick","onLinkClick"]);const f=(0,l.useMemo)((()=>({pathname:(0,d.P4)({uniqueId:t,secUid:i}),search:r})),[r,i,t]),x=(0,a.fz)(c.yB),k=(0,l.useCallback)((e=>{_&&e.stopPropagation(),x.handleLiveEntranceClick(s()(h,["anchor_id","follow_status","room_id","enter_from_merge","action_type","enter_method"])),null==v||v(e),null==y||y(e,f.pathname)}),[_,x,h,v,y,f.pathname]);return(0,n.jsx)(p.v,Object.assign({forceSSR:!0,to:f},b,{replace:g||m,onClick:k},{children:u}),void 0)}},11838:(e,t,i)=>{"use strict";i.d(t,{D:()=>u});var o=i(64047),n=i(11040),a=i(91051),r=i(75131),s=i(66958),l=i(77107),d=i(33104),c=i(90293),p=i(21041);const u=(0,a.memo)((function(e){var{uniqueId:t,secUid:i,extraQuery:u={},children:g,replace:m=!1,isInBrowserMode:h=!1,teaParams:_,shouldStopPropagation:v=!0,reportTea:y=!0,onClick:b,onLinkClick:f}=e,x=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","shouldStopPropagation","reportTea","onClick","onLinkClick"]);const k=function(e,t={}){var i;const{search:o}=(0,p.TH)(),n=t.disableAutoLang?"":null!==(i=(0,c.parse)(o).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:o}=(0,c.parseUrl)(e);return(0,c.stringifyUrl)({url:i,query:Object.assign({lang:n},o)},Object.assign({skipEmptyString:!0},t))}const{pathname:a="",search:r={},hash:s}=e,l=s?`#${s}`:"";return`${(0,c.stringifyUrl)({url:a,query:Object.assign({lang:n},r)},Object.assign({skipEmptyString:!0},t))}${l}`}({pathname:(0,s.yl)({uniqueId:t,secUid:i}),search:u}),w=(0,a.useCallback)((e=>{v&&e.stopPropagation(),y&&r.W.handleEnterUser(_),null==b||b(e),null==f||f(e,k)}),[v,_,b,f,k,y]),S=(0,d.p)(t),j=null==S?void 0:S.isADVirtual;return(0,n.jsx)(l.v,Object.assign({to:k,disabled:j},x,{replace:m||h,onClick:w},{children:g}),void 0)}))},47127:(e,t,i)=>{"use strict";i.d(t,{X:()=>s,Q:()=>l});var o=i(9236),n=i(91051),a=i(34708),r=i(61453);function s({action:e,modalConfig:t={}}){const i=(0,a.L)((()=>["user"]),[]),s=(0,o.qj)(r.r);return(0,n.useCallback)(((...o)=>{if(null==i?void 0:i.user)return e(...o);s.openModal(t)}),[e,null==i?void 0:i.user,s,t])}function l(e={}){const t=(0,o.qj)(r.r),i="function"==typeof e?e():e;return(0,n.useCallback)((()=>{t.openModal(i)}),[i,t])}},81773:(e,t,i)=>{"use strict";i.d(t,{u_:()=>x});var o,n=i(11040),a=i(25615),r=i.n(a),s=i(91051),l=i(32667),d=i(46009),c=i(40599),p=i(64047),u=i(32913),g=i(56277),m=i(27918);!function(e){e[e.None=0]="None",e[e.Outer=1]="Outer",e[e.Inner=2]="Inner",e[e.InnerLarge=3]="InnerLarge",e[e.Mobile=4]="Mobile"}(o||(o={}));const h=(0,u.Z)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:1001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===d.Ix?"flex":"none",opacity:Number(e!==d.Ix&&e!==d.Wj)})),"label:DivModalContainer;"),_=(0,u.Z)("div",{target:"e1gjoq3k1"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),v=(0,u.Z)("div",{target:"e1gjoq3k2"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,p.__rest)(o,["transform"]);return[{transform:t===d.Wj||t===d.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},a]}),"label:DivContentContainer;"),y=(0,u.Z)(g.Z,{target:"e1gjoq3k3"})("label:StyledIcon;");function b(e){const{closeStyle:t,theme:{colors:i,direction:o}}=e,n=[(0,m.YJ)({direction:o,end:"24px"})];switch(t){case 2:n.push({width:"24px",height:"24px",background:i.BGView,[`${y}`]:{width:"15px",height:"15px"}});break;case 3:n.push({width:"24px",height:"24px",[`${y}`]:{width:"24px",height:"24px",fill:"rgba(22, 24, 35, 0.75)"}});break;case 4:n.push({width:"19px",height:"19px",[`${y}`]:{width:"19px",height:"19px",fill:"#000000"}});break;case 1:n.push({width:"40px",height:"40px",background:i.BGPrimary,[`${y}`]:{width:"24px",height:"24px"}})}return n}const f=(0,u.Z)("div",{target:"e1gjoq3k4"})({position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},b,"label:DivCloseWrapper;"),x=function({children:e,onClose:t,visible:i,timeout:o,onWheel:a=r(),closeStyle:p=0,closeStyles:u={},maskCloseable:g=!0,keyboardCloseable:m=!0,zIndex:b=1001,mask:x=!0,fixed:k=!0,contentStyle:w={},maskStyle:S={},e2eData:j="",backgroundColor:C}){const P=(0,s.useRef)(),T=(0,s.useRef)(Boolean(i)),{showModal:O,hideModal:L}=(0,c.J)(),[I,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>{i&&x?(O(),o&&(clearTimeout(P.current),P.current=window.setTimeout((()=>{null==t||t(2)}),o))):T.current&&(L(),clearTimeout(P.current)),T.current=Boolean(i)}),[i,x]),(0,s.useEffect)((()=>(A(!0),()=>{T.current&&L()})),[]),(0,s.useEffect)((()=>{const e=e=>{i&&m&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[m,t,i]);const E=(0,s.useCallback)((()=>{g&&(null==t||t(3))}),[g,t]),M=(0,s.useCallback)((()=>{null==t||t(0)}),[t]),R=(0,s.useRef)(null),F=(0,s.useRef)(null);return I?(0,l.createPortal)((0,n.jsx)(d.ZP,Object.assign({timeout:300,in:i,nodeRef:R},{children:t=>(0,n.jsxs)(h,Object.assign({status:t,isShow:i,onWheel:a,ref:R,style:{zIndex:b,position:k?"fixed":"relative"}},{children:[x&&(0,n.jsx)(_,Object.assign({style:S,onClick:E},{children:1===p&&(0,n.jsx)(f,Object.assign({closeStyle:p,onClick:M,style:u},{children:(0,n.jsx)(y,{},void 0)}),void 0)}),void 0),(0,n.jsx)(d.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:F},{children:t=>(0,n.jsxs)(v,Object.assign({"data-e2e":j,status:t,ref:F,contentStyle:w,style:{backgroundColor:C}},{children:[e,0!==p&&1!==p&&(0,n.jsx)(f,Object.assign({closeStyle:p,onClick:M,"data-e2e":"modal-close-inner-button",style:u},{children:(0,n.jsx)(y,{},void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),document.body):null}},39973:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var o=i(91051);function n(e=0){const t=(0,o.useRef)(0),[i,n]=(0,o.useState)(!1),a=(0,o.useCallback)((()=>{n(!0),window.clearTimeout(t.current)}),[]),r=(0,o.useCallback)((()=>{window.clearTimeout(t.current),t.current=window.setTimeout((()=>{n(!1)}),e)}),[e]);return{active:i,setActive:n,handleMouseEnter:a,handleMouseLeave:r}}},84475:(e,t,i)=>{"use strict";i.d(t,{G:()=>g});var o=i(11040),n=i(91051),a=i(46009),r=i(32913),s=i(1723);function l(e,t){return e||t?t?e?{left:"50%",transform:`translate(-50%, ${t}px)`}:{transform:`translateY(${t}px)`}:{left:"50%",transform:"translateX(-50%)"}:null}const d=(0,r.Z)("div",{target:"e2ipgxl0"})((({state:e,duration:t=300,theme:i,centered:o,verticalPropKey:n,verticalOffset:a})=>[{position:"absolute",zIndex:1,background:i.colors.BGPrimary,borderRadius:"8px",[n]:"calc(100% + 12px)",boxShadow:"0 4px 16px rgba(0, 0, 0, .12)",transition:`opacity ${t}ms`,opacity:Number("entering"===e||"entered"===e)},l(o,a)]),"label:DivContainer;"),c=(0,r.Z)(s.Z,{target:"e2ipgxl1"})({display:"block",width:"24px",height:"8px",position:"absolute"},(({centered:e})=>e?{left:"50%",transform:"translateX(-50%)"}:null),(({verticalPropKey:e})=>"top"===e?{top:"-8px"}:{bottom:"-8px",transform:"rotate(180deg)"}),"label:StyledTopArrow;"),p={topRight:"right",bottomRight:"right",topLeft:"left",bottomLeft:"left",bottom:null},u={topRight:"bottom",topLeft:"bottom",bottomRight:"top",bottomLeft:"top",bottom:"top"},g=function({placement:e,margin:t="-2px",arrowMargin:i=6,duration:r=300,backgroundColor:s="#fff",active:l=!1,verticalOffset:g=0,style:m,children:h}){const _=(0,n.useRef)(null),v=p[e],y=u[e],b=Object.assign({backgroundColor:s},m),f={};return v&&(f[v]=i,b[v]=t),(0,o.jsx)(a.ZP,Object.assign({in:l,timeout:r,unmountOnExit:!0,nodeRef:_},{children:e=>(0,o.jsxs)(d,Object.assign({verticalPropKey:y,state:e,duration:r,ref:_,style:b,centered:!v,verticalOffset:g},{children:[(0,o.jsx)(c,{fill:s,style:f,centered:!v,verticalPropKey:y},void 0),h]}),void 0)}),void 0)}},22509:(e,t,i)=>{"use strict";i.d(t,{C:()=>D});var o,n=i(11040),a=i(9236),r=i(86254),s=i.n(r),l=i(91051),d=i(93797);!function(e){e.DropdownCardShow="dropdown_card_show"}(o||(o={}));var c=i(43683),p=i(13761),u=i(80537),g=i(66958),m=i(8721),h=i(90035),_=i(89436),v=i(2734),y=i(34708),b=i(70756),f=i(33104),x=i(24878),k=i(47127),w=i(32913),S=i(27918),j=i(11838);const C=(0,w.Z)("div",{target:"er095110"})((({paddingTop:e=40})=>({height:e,cursor:"pointer"})),"label:DivPaddingTop;"),P=(0,w.Z)("div",{target:"er095111"})((({paddingStart:e=0,theme:{direction:t}})=>[{zIndex:100,position:"absolute"},(0,S.YJ)({direction:t,paddingStart:e})]),"label:DivProfileOuterContainer;"),T=(0,w.Z)("div",{target:"er095112"})((({theme:{colors:e}})=>({position:"relative",width:"320px",boxSizing:"border-box",padding:"20px",background:e.BGSecondary,boxShadow:`0px 4px 16px ${e.ShadowPrimary}`,borderRadius:"8px"})),"label:DivProfileContainer;"),O=(0,w.Z)("div",{target:"er095113"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},"label:DivHeadContainer;"),L=(0,w.Z)(j.D,{target:"er095114"})((({theme:e})=>(0,S.GI)({theme:e,color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia",typography:"H5"})),S.gi,"label:StyledUserTitle;"),I=(0,w.Z)(j.D,{target:"er095115"})((({theme:e})=>(0,S.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima",typography:"P3"})),S.gi,"label:StyledUserName;"),A=(0,w.Z)(j.D,{target:"er095116"})({display:"block",width:"44px",flex:"0 0 44px"},"label:StyledAvatarLink;"),E=(0,w.Z)("p",{target:"er095117"})({marginTop:"8px"},"label:PUserStat;"),M=(0,w.Z)("span",{target:"er095118"})((({theme:e})=>[(0,S.GI)({theme:e,fontWeight:"bold",typography:"H3"}),(0,S.YJ)({direction:e.direction,marginEnd:"6px"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block"}]),"label:SpanUserStatsText;"),R=(0,w.Z)("span",{target:"er095119"})((({theme:e})=>[(0,S.GI)({theme:e,color:"TextSecondary",typography:"H3"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block",":not(:last-of-type)":(0,S.YJ)({direction:e.direction,marginEnd:"12px"})}]),"label:SpanUserStatsDesc;"),F=(0,w.Z)("p",{target:"er0951110"})((({theme:e})=>[(0,S.GI)({theme:e,typography:"P3"}),{paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${e.colors.LineSecondary2}`}]),"label:PSignature;"),D=(0,l.memo)((function(e){var t,i;const{uniqueId:o,top:r,hideSignature:w,fixedLeft:S,paddingStart:j,paddingTop:D,groupId:B,followTheme:z,onClick:N}=e,U=(0,m.Q)(),[W,q]=(0,a.b7)(x.z,{selector:e=>({user:e.users[o],stats:e.stats[o]}),dependencies:[o],equalFn:(e,t)=>s()(e,t)}),{isADVirtual:G}=null!==(t=null==W?void 0:W.user)&&void 0!==t?t:{},{language:H}=null!==(i=(0,y.L)((()=>["language"]),[]))&&void 0!==i?i:{},Z=(0,k.Q)(),$={enter_method:"click_hover"};B&&($.group_id=B);const{isFollowing:V,handleFollow:Q,text:Y}=(0,f.w)({uniqueId:o,onNeedLogin:Z,teaParams:$}),{secUid:K,id:J}=(0,v.m7)(W.user);(0,l.useEffect)((()=>{W.stats&&!W.stats.needFix||q.getUserDetail({uniqueId:o,secUid:K,language:H})}),[q,W.stats,H,K,o]),(0,l.useEffect)((()=>{d.W.event("dropdown_card_show")}),[]);const X=(0,l.useMemo)((()=>({to_user_id:J,author_id:J,enter_method:"click_dropdown_card"})),[J]),ee=(0,b.ot)({pathname:(0,g.yl)({uniqueId:o,secUid:K})}),te=(0,_.e)(),ie=(0,l.useCallback)((e=>{null==N||N(e),G||te(e,{href:ee,shouldUsePush:!0})}),[te,ee,N,G]);if(!W.user)return(0,h.G)(["item.user"]);const{avatarThumb:oe,nickname:ne,verified:ae,signature:re}=W.user,{stats:se}=W;return B&&(X.group_id=B),(0,n.jsxs)(P,Object.assign({paddingStart:j,paddingTop:D,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:{top:r,left:S}},{children:[(0,n.jsx)(C,{onClick:ie},void 0),(0,n.jsxs)(T,{children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(A,Object.assign({uniqueId:o,secUid:K,target:"_blank",rel:"noopener",teaParams:X,"data-e2e":"user-card-avatar"},{children:(0,n.jsx)(p.q,{size:44,src:oe},void 0)}),void 0),(0,n.jsx)(u.W,Object.assign({size:"small",onClick:Q,buttonTheme:V?"default":null!=z?z:"line","data-e2e":"user-card-follow"},{children:Y}),void 0)]},void 0),(0,n.jsxs)(L,Object.assign({uniqueId:o,secUid:K,target:"_blank",rel:"noopener",teaParams:X},{children:[(0,n.jsx)("span",Object.assign({"data-e2e":"user-card-username"},{children:o}),void 0),ae&&(0,n.jsx)(c.Q,{width:14,height:14,"data-e2e":"user-card-bluev"},void 0)]}),void 0),(0,n.jsx)("br",{},void 0),(0,n.jsx)(I,Object.assign({uniqueId:o,secUid:K,target:"_blank",rel:"noopener",teaParams:X,"data-e2e":"user-card-nickname"},{children:ne}),void 0),(0,n.jsxs)(E,{children:[(0,n.jsx)(M,Object.assign({"data-e2e":"user-card-follower-count"},{children:se?(0,v.BT)(se.followerCount):"--"}),void 0),(0,n.jsx)(R,Object.assign({"data-e2e":"user-card-follower"},{children:U("Followers")}),void 0),(0,n.jsx)(M,Object.assign({"data-e2e":"user-card-like-count"},{children:se?(0,v.BT)(se.heartCount):"--"}),void 0),(0,n.jsx)(R,Object.assign({"data-e2e":"user-card-like"},{children:U("Likes")}),void 0)]},void 0),re&&!w&&(0,n.jsx)(F,Object.assign({"data-e2e":"user-card-user-bio"},{children:re}),void 0)]},void 0)]}),void 0)}))},75036:(e,t,i)=>{"use strict";i.d(t,{w:()=>u});var o=i(11040),n=i(91051),a=i(88671),r=i(32913),s=i(27918);const l=(0,r.Z)("div",{target:"e1b4u1n0"})({position:"absolute",padding:"0 4px",top:"0",transformOrigin:"right top",transition:"opacity .5s",opacity:0},(({theme:{direction:e}})=>{const t=(0,s.$K)(e,"end");return[(0,s.YJ)({direction:e,end:"0"}),{transformOrigin:`${t} top`}]}),"label:DivScrollBar;"),d=(0,r.Z)("div",{target:"e1b4u1n1"})({overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",perspective:"1px",transformStyle:"preserve-3d","::-webkit-scrollbar":{width:0,height:0},[`:hover ${l}`]:{opacity:1}},(({theme:{direction:e}})=>{const t=(0,s.$K)(e,"end");return[(0,s.YJ)({direction:e,paddingEnd:"12px"}),{perspectiveOrigin:`${t} top`}]}),"label:DivScrollContainer;"),c=(0,r.Z)("div",{target:"e1b4u1n2"})("label:DivScrollWrapper;"),p=(0,r.Z)("div",{target:"e1b4u1n3"})((({theme:{colors:e}})=>({width:"6px",height:"100%",borderRadius:"3px",background:e.BGPlaceholderDefault})),"label:DivScrollBarThumb;"),u=(0,n.memo)((0,n.forwardRef)((function({children:e,Wrapper:t=c,onScroll:i,onScrollBottom:r,bottomThreshold:s=100,className:u,style:g,wrapperStyle:m},h){const _=(0,n.useRef)(null),[v,y]=(0,n.useState)(0),[b,f]=(0,n.useState)(0),x=(0,n.useMemo)((()=>{const e=v>=b?0:Math.pow(v,2)/b,t=(v-e)/(b-v);return{height:e,transform:`matrix3d(${[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,-1].join(",")}) scale(${1/t}) translateZ(${1-1/t}px) translateZ(-2px)`}}),[v,b]);(0,n.useImperativeHandle)(h,(()=>({get scrollTop(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0},get dom(){return _.current}})),[]);const k=(0,a.fB)((()=>{if(!_.current)return;const{current:e}=_,{height:t}=e.getBoundingClientRect(),{scrollHeight:i}=e;y(t),f(i)}),[],300),w=(0,n.useCallback)((()=>{if(!_.current||!r)return;const{scrollTop:e}=_.current;null==i||i({scrollTop:e}),v+e+s>=b&&r()}),[r,i,v,s,b]);return(0,n.useEffect)((()=>{const e=new window.MutationObserver((function(e){e.length&&k()}));return _.current&&e.observe(_.current,{childList:!0,subtree:!0}),window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),e.disconnect()}}),[k]),(0,o.jsxs)(d,Object.assign({ref:_,onScroll:w,className:u,style:g},{children:[(0,o.jsx)(t,Object.assign({style:m},{children:e}),void 0),(0,o.jsx)(l,Object.assign({style:x},{children:(0,o.jsx)(p,{},void 0)}),void 0)]}),void 0)})))},84834:(e,t,i)=>{"use strict";i.d(t,{U:()=>re});var o=i(11040),n=i(9236),a=i(86254),r=i.n(a),s=i(91051),l=i(76851),d=i(27319),c=i(9578),p=i(88671),u=i(8721),g=i(2734),m=i(87608),h=i(34708),_=i(59151),v=i(75131),y=i(66958),b=i(75546),f=i(63092),x=i(11838),k=i(47127),w=i(88650),S=i(33104),j=i(24878),C=i(32913),P=i(14695),T=i(27918),O=i(80537),L=i(77107);const I=(0,C.Z)(L.v,{target:"e85wp610"})({":hover":{textDecoration:"none"}},"label:StyledLink;"),A=(0,C.Z)("div",{target:"e85wp611"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"4px",transition:"background-color 300ms",":hover":{backgroundColor:e.BGView},":active":{backgroundColor:e.BGInput}})),"label:DivUserContainer;"),E=(0,C.Z)("div",{target:"e85wp612"})((({theme:{direction:e}})=>[{display:"flex",flex:"1"},(0,T.YJ)({direction:e,paddingEnd:"24px"})]),"label:DivUserInfo;"),M=(0,C.Z)("div",{target:"e85wp613"})((({theme:{direction:e}})=>[{maxWidth:"450px",padding:"1px 0"},(0,T.YJ)({direction:e,paddingStart:"12px"})]),"label:DivUserDesc;"),R=(0,C.Z)("div",{target:"e85wp614"})({display:"flex",alignItems:"center",height:"22px",lineHeight:"22px"},"label:DivTopPart;"),F=(0,C.Z)("span",{target:"e85wp615"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P2"})]),"label:SpanUniqueId;"),D=(0,C.Z)("span",{target:"e85wp616"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",lineHeight:"15px",typography:"P4"}),{color:i.TextSecondary},(0,T.YJ)({direction:t,paddingStart:"4px"})]),"label:SpanNickname;"),B=(0,C.Z)("div",{target:"e85wp617"})((({theme:e,theme:{colors:t}})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{height:"20px",marginTop:"4px",color:t.TextSecondary}]),"label:DivBottomPart;"),z=(0,C.Z)("p",{target:"e85wp618"})({maxWidth:"450px"},T.wj,"label:PSignature;"),N=(0,C.Z)("p",{target:"e85wp619"})({maxWidth:"450px"},T.wj,"label:POther;"),U=(0,C.Z)("span",{target:"e85wp6110"})((({theme:{direction:e}})=>(0,T.YJ)({direction:e,paddingStart:"8px"})),"label:SpanSecond;"),W=(0,C.Z)(O.W,{target:"e85wp6111"})((({theme:{direction:e}})=>({flexShrink:0,"& > svg":[(0,T.YJ)({direction:e,marginEnd:"6px"})]})),"label:StyledFollowButton;"),q=(0,C.Z)(P.Z,{target:"e85wp6112"})((({theme:{direction:e}})=>(0,T.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifiedBadgeColor;"),G=(0,s.memo)((function({uniqueId:e,enterMethod:t,onClose:i}){const a=(0,u.Q)(),r=(0,n.mp)(j.z,{selector:t=>{const i=t.users[e],o=t.stats[e];if(!i)return null;const{verified:n,avatarThumb:a,secUid:r,nickname:s,roomId:l,id:d,relation:c,signature:p,secret:u}=i,{followerCount:g=0,videoCount:m=0}=null!=o?o:{};return{avatarThumb:a,secUid:r,verified:n,nickname:s,roomId:l,id:d,uniqueId:e,signature:p,relation:c,secret:u,followerCount:g,videoCount:m}},dependencies:[e]}),{id:l,nickname:d,secUid:c,signature:p,verified:m,followerCount:h,videoCount:C}=(0,g.m7)(r),P=(0,y.yl)({uniqueId:e,secUid:null!=c?c:""}),T=(0,w.zW)(r),{isShowLive:O}=T,L=O?f.G:x.D,G=(0,w.CN)({user:r,enterMethod:t}),H=(0,k.Q)(),{handleFollow:Z,text:$,isFollowing:V,relation:Q}=(0,S.w)({uniqueId:e,onNeedLogin:H}),Y=V?"default":"line",K=(0,s.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),Z(e)}),[Z]),J=(0,s.useCallback)((()=>{v.W.handleEnterUser({to_user_id:l,enter_method:t}),null==i||i()}),[t,l,i]),X=(0,s.useCallback)((e=>{e.stopPropagation(),null==i||i()}),[i]);return(0,o.jsx)(I,Object.assign({to:P,onClick:J},{children:(0,o.jsxs)(A,{children:[(0,o.jsxs)(E,{children:[(0,o.jsx)(L,Object.assign({uniqueId:e,secUid:c,teaParams:G,shouldStopPropagation:!1,onClick:X},{children:(0,o.jsx)(b.k,Object.assign({},T,{liveTheme:6,size:48}),void 0)}),void 0),(0,o.jsxs)(M,{children:[(0,o.jsxs)(R,{children:[(0,o.jsx)(F,{children:e},void 0),m&&(0,o.jsx)(q,{width:14,height:14},void 0),(0,o.jsx)(D,{children:d},void 0)]},void 0),(0,o.jsx)(B,Object.assign({className:"bottom-part"},{children:p?(0,o.jsx)(z,Object.assign({className:"signature"},{children:p}),void 0):(0,o.jsxs)(N,{children:[(0,o.jsxs)("span",{children:[a("Video"),": ",C]},void 0),(0,o.jsxs)(U,{children:[a("Followers"),": ",(0,g.BT)(h)]},void 0)]},void 0)}),void 0)]},void 0)]},void 0),(0,o.jsxs)(W,Object.assign({size:"small",id:l,buttonTheme:Y,onClick:K},{children:[2===Q?(0,o.jsx)(_.Z,{},void 0):null,$]}),void 0)]},void 0)}),l)})),H=(0,C.Z)("div",{target:"exlovqy0"})({display:"flex",flexDirection:"column",position:"absolute",width:"700px",height:"500px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px"},"label:DivAccountListModal;"),Z=(0,C.Z)("div",{target:"exlovqy1"})((({theme:{colors:e}})=>({position:"relative",height:"56px","::after":{position:"absolute",left:"0",bottom:"0",content:'""',width:"100%",height:"1px",transform:"scaleY(.5)",background:e.LinePrimary}})),"label:DivHeader;"),$=(0,C.Z)("div",{target:"exlovqy2"})((({theme:{direction:e}})=>[{display:"flex"},(0,T.YJ)({direction:e,marginStart:"14px"})]),"label:DivTabsContainer;"),V=(0,C.Z)("div",{target:"exlovqy3"})((({theme:e,active:t,theme:{colors:i}})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:t?"bold":"semiBold",typography:"P2"}),{position:"relative",margin:"24px 30px 0",color:t?i.TextPrimary:i.TextTertiary,cursor:"pointer"},t?{"::after":{position:"absolute",left:"0",bottom:"-10px",content:'""',width:"100%",height:"2px",background:i.TextPrimary}}:null]),"label:DivTab;"),Q=(0,C.Z)("span",{target:"exlovqy4"})((({theme:{direction:e}})=>[(0,T.YJ)({direction:e,paddingStart:"4px"})]),"label:SpanCount;"),Y=(0,C.Z)("div",{target:"exlovqy5"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"16px",width:"32px",height:"32px",background:e.BGView,borderRadius:"16px",cursor:"pointer"},(0,T.YJ)({direction:t,end:"16px"})]),"label:DivCloseBtn;"),K=(0,C.Z)("div",{target:"exlovqy6"})((({isHidden:e})=>({flex:"1",overflowY:e?"hidden":"auto"})),"label:DivMain;"),J=(0,C.Z)("div",{target:"exlovqy7"})({boxSizing:"border-box",width:"100%",padding:"16px 0 16px 12px"},"label:DivUserList;"),X=(0,C.Z)("div",{target:"exlovqy8"})({boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",padding:"8px 12px"},"label:DivLoadingContainer;"),ee=(0,C.Z)("div",{target:"exlovqy9"})({width:"48px",height:"48px",flexShrink:0},"label:DivAvatarContainer;"),te=(0,C.Z)("div",{target:"exlovqy10"})((({theme:{direction:e}})=>[{flexGrow:1},(0,T.YJ)({direction:e,marginStart:"12px"})]),"label:DivSkeletonTitleContainer;"),ie=(0,C.Z)("div",{target:"exlovqy11"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"label:DivEmptyContainer;"),oe=(0,C.Z)("p",{target:"exlovqy12"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",lineHeight:"24px",typography:"P1"})]),"label:PTitle;"),ne=(0,C.Z)("p",{target:"exlovqy13"})((({theme:e,theme:{colors:t}})=>[(0,T.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2"}),{marginTop:"8px",color:t.TextSecondary}]),"label:PDesc;"),ae={following:{title:"following",empty:"following_my_empty_desc"},follower:{title:"Followers",empty:"followers_my_empty_desc"},suggest:{title:"common_registration_username_suggested",empty:"profile_suggested_empty_toast"}},re=(0,s.memo)((function(e){var t;const{visible:i,type:a,shouldShowSuggested:_=!0}=e,v=(0,u.Q)(),{user:y}=null!==(t=(0,h.L)((()=>["user"]),[]))&&void 0!==t?t:{},b=(0,s.useRef)(null),[f,x]=(0,n.b7)(m.G,{selector:e=>({following:Object.assign(Object.assign({},e.following),{hasMore:-1!==e.following.maxCursor}),follower:Object.assign(Object.assign({},e.follower),{hasMore:-1!==e.follower.maxCursor}),suggest:Object.assign(Object.assign({},e.suggest),{hasMore:!1})}),dependencies:[],equalFn:(e,t)=>r()(e,t)}),k={following:"pop_up_following",follower:"pop_up_follower",suggest:"pop_up_suggest"},[w,S]=(0,s.useState)(y?a:"suggest");(0,s.useEffect)((()=>{const{loading:e,list:t}=f.follower;i&&!t.length&&e&&x.getFollowerList({count:20})}),[f,x,i]),(0,s.useEffect)((()=>{i&&S(a)}),[a,i]);const j=(0,s.useCallback)((e=>()=>{S(e),b.current&&(b.current.scrollTop=0)}),[S]),{list:C,loading:P,hasMore:T}=f[w],O=0!==C.length||P,L=(0,p.fB)((()=>{var e;if("suggest"===w||P||!T)return;const{scrollTop:t=0,scrollHeight:i=0}=null!==(e=null==b?void 0:b.current)&&void 0!==e?e:{};t&&i-t<480&&("following"===w?x.getFollowingList({count:20}):x.getFollowerList({count:20}))}),[x,w,P,T],200),I=(0,s.useMemo)((()=>Array.from({length:C.length?1:7}).fill(0)),[C.length]);return(0,o.jsx)(l.AR,Object.assign({isOpen:i,compact:!0,closeOnBackdropClick:!0,onClose:e.onClose},{children:(0,o.jsxs)(H,{children:[(0,o.jsxs)(Z,{children:[(0,o.jsxs)($,{children:[y&&["following","follower"].map((e=>(0,o.jsxs)(V,Object.assign({active:w===e,onClick:j(e)},{children:[(0,o.jsx)("span",{children:v(ae[e].title)},void 0),(f[e].total||!f[e].loading)&&(0,o.jsx)(Q,{children:(0,g.BT)(f[e].total)},void 0)]}),e))),_&&(0,o.jsx)(V,Object.assign({active:"suggest"===w,onClick:j("suggest")},{children:(0,o.jsx)("span",{children:v("common_registration_username_suggested")},void 0)}),void 0)]},void 0),(0,o.jsx)(Y,Object.assign({onClick:e.onClose},{children:(0,o.jsx)(d.Z,{width:14,height:14,style:{color:"rgba(22, 24, 35, 0.75)"}},void 0)}),void 0)]},void 0),(0,o.jsx)(K,Object.assign({isHidden:P&&!C.length,ref:b,onScroll:L},{children:O?(0,o.jsxs)(J,{children:[f[w].list.map((t=>(0,o.jsx)(G,{uniqueId:t,enterMethod:k[w],onClose:e.onClose},t))),P&&I.map(((e,t)=>(0,o.jsxs)(X,{children:[(0,o.jsx)(ee,{children:(0,o.jsx)(c.Od.Avatar,{},void 0)},void 0),(0,o.jsxs)(te,{children:[(0,o.jsx)(c.Od.Title,{style:{width:"119px",height:"16px",margin:"4px 0 12px"}},void 0),(0,o.jsx)(c.Od.Title,{style:{width:"254px",height:"12px"}},void 0)]},void 0),(0,o.jsx)(c.Od.Button,{style:{width:"106px",height:"36px",flexShrink:0}},void 0)]},t)))]},void 0):(0,o.jsxs)(ie,{children:[(0,o.jsx)(oe,{children:v(ae[w].title)},void 0),(0,o.jsx)(ne,{children:v(ae[w].empty)},void 0)]},void 0)}),void 0)]},void 0)}),void 0)}))},87608:(e,t,i)=>{"use strict";i.d(t,{G:()=>S});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(49845),l=i.n(s),d=i(82346),c=i(60595),p=i(49584),u=i(53095),g=i(10026),m=i(5549),h=i(20948),_=i(56979),v=i(47165),y=i(24878),b=i(57244),f=i(50218),x=i(4206);let k=class{constructor(e){this.fetch=e}getUserDiscoverData(e,t){let i=28,o=17;return(0,f.FZ)(e)?i=50:(0,f.bf)(e)?(i=30,o=15):i=30,this.fetch.get("/node/share/discover",{query:{noUser:"0",count:i,scene:o,pageId:t,userId:t}}).pipe((0,_.U)((e=>e.body[0].exploreList)))}getFollowingUserList(e){return this.fetch.get("/api/user/list/",{query:e})}};var w;k=(0,o.__decorate)([(0,b.G)(),(0,o.__metadata)("design:paramtypes",[x.r])],k),function(e){e.Recommend="suggest",e.Following="following",e.Follower="follower"}(w||(w={}));let S=class extends n.D{constructor(e,t){super(),this.service=e,this.user=t,this.defaultState={following:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},follower:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},suggest:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0}}}setList(e,t){const{list:i,key:o,maxCursor:n,minCursor:a,total:r}=t;e[o].list=l()(e[o].list.concat(i)),e[o].maxCursor=n,e[o].minCursor=a,r&&(e[o].total=r)}resetList(e,t){const{key:i}=t;e[i].list=[],e[i].maxCursor=0,e[i].minCursor=0}setLoading(e,t){const{loading:i,key:o}=t;e[o].loading=i}getRecommendList(e){return e.pipe((0,p.z)((({pathname:e,userId:t=""})=>this.service.getUserDiscoverData(e,t).pipe((0,u.z)((e=>{const t=e.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var i,o;return(null!==(i=null==e?void 0:e.relation)&&void 0!==i?i:0)-(null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:0)})).sort(((e,t)=>{var i,o,n,a;return(null!==(o=null===(i=null==t?void 0:t.roomId)||void 0===i?void 0:i.length)&&void 0!==o?o:0)-(null!==(a=null===(n=null==e?void 0:e.roomId)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}));return(0,d.of)(this.user.getActions().multiSetUser(t),this.getActions().setList({key:"suggest",list:t.map((({uniqueId:e})=>e)),hasMore:!1}))})),(0,g.O)(this.getActions().resetList({key:"suggest"}),this.getActions().setLoading({key:"suggest",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"suggest",loading:!1}),this.terminate()),(0,v.n)({})))))}getFollowingList(e){return e.pipe((0,h.M)(this.state$),(0,_.U)((([{count:e},t])=>Object.assign(Object.assign({},t.following),{count:e}))),(0,p.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:21,maxCursor:t,minCursor:i,count:o}).pipe((0,u.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,d.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"following",list:n.sort(((e,t)=>{var i,o,n,a,r,s;return(null!==(n=null===(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.roomId)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-(null!==(s=null===(r=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.roomId)||void 0===r?void 0:r.length)&&void 0!==s?s:0)})).map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,g.O)(this.getActions().setLoading({key:"following",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"following",loading:!1})),(0,v.n)({})))))}getFollowerList(e){return e.pipe((0,h.M)(this.state$),(0,_.U)((([{count:e},t])=>Object.assign(Object.assign({},t.follower),{count:e}))),(0,p.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:67,maxCursor:t,minCursor:i,count:o}).pipe((0,u.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,d.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"follower",list:n.map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,g.O)(this.getActions().setLoading({key:"follower",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"follower",loading:!1})),(0,v.n)({})))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"resetList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setLoading",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getFollowerList",null),S=(0,o.__decorate)([(0,r.Y)("AccountList"),(0,o.__metadata)("design:paramtypes",[k,y.z])],S)},34708:(e,t,i)=>{"use strict";i.d(t,{b:()=>s,L:()=>l});var o=i(9236),n=i(89974),a=i.n(n),r=i(84785);function s(){return(0,o.mp)(r.G)}function l(e,t){return(0,o.mp)(r.G,{selector:t=>{const{appContext:i}=t;return i?a()(i,...e()):i},dependencies:t})}},84785:(e,t,i)=>{"use strict";i.d(t,{G:()=>x});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(8741),l=i(11348),d=i(58569),c=i(82346),p=i(60595),u=i(20948),g=i(56979),m=i(49584),h=i(53095),_=i(10026),v=i(5549),y=i(2734),b=i(98465),f=i(31090);let x=class extends n.D{constructor(e,t){super(),this.service=e,this.i18n=t,this.defaultState={appContext:null,initialized:!1,lang:"en",sideNavActive:!1}}setSideNavActive(e,t){e.sideNavActive=t}toggleSideNav(e){return e.pipe((0,u.M)(this.state$),(0,g.U)((([e,t])=>this.getActions().setSideNavActive(!t.sideNavActive))))}setAppContext(e,t){var{statusCode:i}=t,n=(0,o.__rest)(t,["statusCode"]);0===i&&(e.appContext=(0,s.vV)(Object.assign({isAndroid:!1,isIOS:!1},n)))}setInitialized(e,t){e.initialized=t}setLang(e,t){e.lang=t}init(e){return e.pipe((0,u.M)(this.state$),(0,m.z)((([{starlingNs:e,lang:t},{initialized:i}])=>i?l.E:this.service.getAppContext(t).pipe((0,h.z)((i=>{const{domains:o}=i,{starling:n,tea:a}=(0,y.m7)(o);return(0,d.T)((0,c.of)(this.getActions().setAppContext(i),this.getActions().setLang(t)),this.i18n.init$({lang:t,namespaces:e,domain:n,teaDomain:a}))})),(0,_.O)(this.getActions().setInitialized(!1)),(0,v.l)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setSideNavActive",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"toggleSideNav",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setAppContext",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setLang",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"init",null),x=(0,o.__decorate)([(0,r.Y)("AppContext"),(0,o.__metadata)("design:paramtypes",[f.i,b.L])],x)},31090:(e,t,i)=>{"use strict";i.d(t,{i:()=>l});var o=i(64047),n=i(57244),a=i(6718),r=i(4206),s=i(17230);let l=class{constructor(e){this.fetch=e,this.initTargetIdcRequest=()=>this.fetch.get("/passport/web/account/info/",{baseUrlType:2,query:{aid:1459}})}getAppContext(e){return this.fetch.get("/node-webapp/api/app-context",{query:{lang:e},baseUrlType:2})}checkTTwid(){return(0,o.__awaiter)(this,void 0,void 0,(function*(){const e=new a.t({aid:s.CO,service:"www.tiktok.com",union:!1,unionHost:""});try{yield e.checkWebId()}catch(e){console.error(e)}}))}};l=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[r.r])],l)},68254:(e,t,i)=>{"use strict";i.d(t,{n:()=>r});var o=i(64047),n=i(57244),a=i(4206);let r=class{constructor(e){this.fetch=e,this.postPrivateBannerAck=()=>this.fetch.post("/api/private_banner/ack/")}getVideoPrivateSetting(){return this.fetch.get("/api/compliance/settings/",{baseUrlType:2})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],r)},86319:(e,t,i)=>{"use strict";i.d(t,{e:()=>I});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(39556),l=i.n(s),d=i(50986),c=i(82346),p=i(60595),u=i(35435),g=i(10026),m=i(93859),h=i(56979),_=i(53095),v=i(68854),y=i(20948),b=i(49584),f=i(5549),x=i(54434),k=i(47165),w=i(92803),S=i(84785),j=i(57244),C=i(4206),P=i(30626),T=i(83323);const O=(0,w.LM)();let L=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get(T.NI.getNewestReply,{query:Object.assign({},O)})}getFaqList(e){const{language:t,faqType:i,entrance:o="general"}=e,n=T.NI.getListV3,a=Object.assign(Object.assign({},O),{lang:(0,w.rB)(t),entrance:o,faqType:i,faqTypes:i});return this.fetch.get(n,{query:a}).pipe((0,h.U)((e=>({statusCode:e.status_code,statusMessage:e.status_message,faqInfoMap:e.faq_info_map,entranceMap:e.entrance_map}))))}getReportRecords(e){const{language:t,minId:i,maxId:n}=e,a=(0,o.__rest)(e,["language","minId","maxId"]),r=Object.assign(Object.assign(Object.assign({},O),{lang:(0,w.rB)(t),min_id:i,max_id:n}),a);return this.fetch.get(T.NI.getReportRecords,{query:r})}uploadImage(e){const t=new FormData;for(let i=0;i<e.length;i++){const{file:o,height:n,width:a}=e[i];t.append("type",o.type),t.append("size",String(o.size)),t.append("name",o.name),t.append("height",String(n)),t.append("width",String(a)),t.append(`file${i}`,o)}return this.fetch.post(T.NI.uploadImage,{query:{tt_csrf_token:this.fetch.csrfToken},headers:{[P.eD]:this.fetch.csrfToken},omitContentType:!0,body:t}).pipe((0,h.U)((e=>{const{data:t,statusCode:i,isPrivateImage:o}=e;return{data:(t||[]).map((e=>({image_width:e.width,image_height:e.height,image_uri:e.url}))),isPrivateImage:o,statusCode:i}})),(0,v.K)((()=>(0,c.of)({data:[],statusCode:-1}))))}reportFeedback(e){return this.fetch.post(T.NI.submitFeedback,{query:Object.assign(Object.assign({},O),e),withCredentials:!0,headers:{[P.eD]:this.fetch.csrfToken}})}};L=(0,o.__decorate)([(0,j.G)(),(0,o.__metadata)("design:paramtypes",[C.r])],L);let I=class extends n.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0,faq:{},records:{list:[],map:{},loading:!1,firstLoad:!1,hasMore:!0,hasDeleteData:!1,error:!1},form:{submitting:!1,success:!1,error:!1,uploadError:!1}}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}setFaqState(e,t){var i,o,n,a,r,s,l,d,c,p;const{faqType:u,data:g,loading:m,statusCode:h}=t,{flattened:_,levels:v}=g?(0,w.X)(g):{flattened:null,levels:null};e.faq[u]={data:null!==(o=null!=g?g:null===(i=e.faq[u])||void 0===i?void 0:i.data)&&void 0!==o?o:[],flattened:null!==(a=null!=_?_:null===(n=e.faq[u])||void 0===n?void 0:n.flattened)&&void 0!==a?a:{},levels:null!==(s=null!=v?v:null===(r=e.faq[u])||void 0===r?void 0:r.levels)&&void 0!==s?s:[],loading:null!==(d=null!=m?m:null===(l=e.faq[u])||void 0===l?void 0:l.loading)&&void 0!==d&&d,statusCode:null!==(p=null!=h?h:null===(c=e.faq[u])||void 0===c?void 0:c.statusCode)&&void 0!==p?p:null}}setFormState(e,t){e.form=Object.assign(Object.assign({},e.form),t)}setRecordsState(e,t){var i;e.records=Object.assign(Object.assign({},e.records),t),t.refreshRecords&&(e.records.list=[],e.records.map={}),null===(i=t.records)||void 0===i||i.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}addRecords(e,t){t.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}getNewestReply(e){return e.pipe((0,u.w)((()=>(0,d.F)(6e5).pipe((0,g.O)(0)).pipe((0,u.w)((()=>this.service.getNewestReply().pipe((0,m.b)((e=>{e.data||console.warn("There is no data in response.")})),(0,h.U)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,k.n)({}))))))))}submitFeedback(e){return e.pipe((0,_.z)((e=>{const{files:t}=e;return(null==t?void 0:t.length)?this.service.uploadImage(t).pipe((0,_.z)((t=>{const{data:i,statusCode:o}=t;return(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:i,imageError:0!==o||!(null==i?void 0:i.length)}))})),(0,v.K)((()=>(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:[],imageError:!0}))))):(0,c.of)(Object.assign(Object.assign({},e),{imageData:[],imageError:!1}))})),(0,y.M)(this.appContext.state$),(0,_.z)((([e,{appContext:t}])=>{const{content:i,feedbackId:o,imageData:n,imageError:a,isMobile:r}=e,{language:s="",os:l="",region:d=""}=null!=t?t:{},p=r?"webapp_mobile":"webapp_pc";if(a)return(0,c.of)(this.getActions().setFormState({submitting:!1,error:!1,success:!1,uploadError:!0}));const u={};(null==n?void 0:n.length)&&(u.is_private_image=1);const g={content:i,image_list:JSON.stringify(n||[]),qr_id:o,from:p,channel:p,sys_region:d,device:l,country:d,language:(0,w.rB)(s),multi_image:1,extra_params:JSON.stringify(u)};return this.service.reportFeedback(g).pipe((0,h.U)((e=>{const{err_code:t}=e;if(0===t)return this.getActions().setFormState({submitting:!1,error:!1,success:!0,uploadError:!1});throw new Error})),(0,v.K)((()=>(0,c.of)(this.getActions().setFormState({submitting:!1,error:!0,success:!1,uploadError:!1})))))})))}getReportRecords(e){return e.pipe((0,y.M)(this.appContext.state$,this.state$),(0,b.z)((([{maxId:e,minId:t=0,count:i=15},{appContext:o},{records:n}])=>{var a;const{language:r="",user:s,region:d}=null!=o?o:{},p=s?(0,x.nY)({uniqueId:s.uniqueId,secUid:s.secUid}):"",{list:u,hasMore:m}=n,_=null!=e?e:(null===(a=u[0])||void 0===a?void 0:a.id)||0,v=0===_;return v||m?this.service.getReportRecords({language:(0,w.rB)(r),count:i,minId:t,maxId:_}).pipe((0,h.U)((e=>{const{data:t}=e,o=[];return t.forEach((e=>{const{content:t,status:i,pub_date:n,type:a}=e;if(""===t&&0===i)return this.getActions().setRecordsState({hasDeleteData:!0,loading:!1});const r=l()(1e3*n).format("YYYY-MM-DD HH:mm");e.content=(0,w.nV)(t,a,p,d),o.push({record:e,displayTime:r})})),this.getActions().setRecordsState({firstLoad:!0,hasMore:Boolean(t.length&&t.length===i),records:o,refreshRecords:v})})),(0,g.O)(this.getActions().setRecordsState({loading:!0,firstLoad:!v})),(0,f.l)(this.getActions().setRecordsState({loading:!1}))):(0,c.of)(this.noop())})),(0,v.K)((()=>(0,c.of)(this.getActions().setRecordsState({loading:!1,error:!0})))))}getFaqList(e){return e.pipe((0,y.M)(this.appContext.state$),(0,_.z)((([{entrance:e,id:t},{appContext:i}])=>{const o=(0,w.jI)(e)||(0,w.Cc)(t),{language:n=""}=null!=i?i:{};return this.service.getFaqList({language:(0,w.rB)(n),entrance:o,faqType:""}).pipe((0,h.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:n}=(0,w.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,w.mX)({faqInfoMap:i,entranceMap:n,faqType:"",entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:"",data:[],statusCode:-1,loading:!1})))),(0,h.U)((e=>this.getActions().setFaqState(Object.assign({faqType:"",loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:""})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:""}),this.terminate()))})))}getCommonFaqList(e){return e.pipe((0,y.M)(this.appContext.state$),(0,_.z)((([{entrance:e,id:t},{appContext:i}])=>{const o=(0,w.jI)(e)||(0,w.Cc)(t),{language:n=""}=null!=i?i:{},a="common";return this.service.getFaqList({language:(0,w.rB)(n),entrance:o,faqType:a}).pipe((0,h.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:n}=(0,w.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,w.mX)({faqInfoMap:i,entranceMap:n,faqType:a,entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:a,data:[],statusCode:-1,loading:!1})))),(0,h.U)((e=>this.getActions().setFaqState(Object.assign({faqType:a,loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:a})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:a}),this.terminate()))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setReply",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setFaqState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setFormState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setRecordsState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"addRecords",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getNewestReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"submitFeedback",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getReportRecords",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getFaqList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getCommonFaqList",null),I=(0,o.__decorate)([(0,r.Y)("Feedback"),(0,o.__metadata)("design:paramtypes",[L,S.G])],I)},27512:(e,t,i)=>{"use strict";i.d(t,{D:()=>_});var o,n=i(64047),a=i(73566),r=i(48185),s=i(19630),l=i(11348),d=i(14716),c=i(60595),p=i(93859),u=i(56979),g=i(73117),m=i(53095),h=i(93797);!function(e){e.ShowSnackbar="show_snackbar",e.ShowSnackbarAuto="show_snackbar_auto",e.ClickDownloadBar="click_download_bar",e.ClickGetForPC="click_get_for_pc",e.InstalWebApp="install_web_app"}(o||(o={}));let _=class extends a.D{constructor(){super(...arguments),this.defaultState={isPwaInstallable:!1,isModalShow:!1,isExpand:!1}}storeDeferredPrompt(e){return e.pipe((0,p.b)((e=>{this.deferredPrompt=e})),(0,u.U)((()=>this.noop())))}setIsPwaInstallable(e,t){e.isPwaInstallable=t}setIsModalShow(e,t){e.isModalShow=t}setIsExpand(e,t){e.isExpand=t}handleShowSnack(e){return e.pipe((0,p.b)((e=>(e=>{const t=e?"show_snackbar_auto":"show_snackbar";h.W.event(t)})(e))),(0,u.U)((()=>this.noop())))}handleClickDownload(e){return e.pipe((0,p.b)((()=>{h.W.event("click_download_bar")})),(0,u.U)((()=>this.noop())))}handleInstallationClick(e){return e.pipe((0,p.b)((()=>{h.W.event("click_get_for_pc")})),(0,g.g)(0),(0,m.z)((()=>this.deferredPrompt?(this.deferredPrompt.prompt(),(0,d.D)(this.deferredPrompt.userChoice).pipe((0,p.b)((e=>{"accepted"===e.outcome?h.W.event("install_web_app"):console.warn("choice result outcome is not accepted")})),(0,u.U)((e=>"accepted"===e.outcome?this.getActions().setIsPwaInstallable(!1):this.noop())))):l.E)))}};(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[c.y]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"storeDeferredPrompt",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"setIsPwaInstallable",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"setIsModalShow",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"setIsExpand",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[c.y]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"handleShowSnack",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[c.y]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"handleClickDownload",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[c.y]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"handleInstallationClick",null),_=(0,n.__decorate)([(0,s.Y)("AppPromotion")],_)},21025:(e,t,i)=>{"use strict";i.d(t,{X:()=>l});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(60595);let l=class extends n.D{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,t){e.isCookieBannerShowing=t}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",s.y)],l.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCookieBannerShowing",null),l=(0,o.__decorate)([(0,r.Y)("FixBottomModule"),(0,o.__metadata)("design:paramtypes",[])],l)},98465:(e,t,i)=>{"use strict";i.d(t,{L:()=>C});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(8741),l=i(15608),d=i(82346),c=i(11348),p=i(58569),u=i(60595),g=i(53095),m=i(93859),h=i(56979),_=i(68854),v=i(5549),y=i(91218),b=i(57244),f=i(14716),x=i(45966),k=i(22296),w=i(29121);let S=class{setLanguage$(e){return new u.y((t=>{var i;k.ZP.setLang(null!==(i=window._I18N_LANG_)&&void 0!==i?i:e,(e=>{e?t.error(e):(t.next(),t.complete())}))}))}loadStarling$(e){const{teaDomain:t,domain:i,lang:o,namespace:n="Webapp"}=e;return(0,f.D)(new x.Z({namespace:n,api_key:w.$h,locale:o||"en",zoneHost:i,timeout:1e4,TEAChannelDomain:t}).load())}registerTranslationData({lang:e,namespace:t="Webapp",data:i}){k.ZP.addResourceBundle(e,t,i,!0)}hasLoaded(e,t){return k.ZP.i18nInstance.instance.hasResourceBundle(e,t)}};function j(e){return!e.loaded}S=(0,o.__decorate)([(0,b.G)()],S);let C=class extends n.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={lang:"en",translations:{},partial:!1}}setLang(e,t){e.lang=t}setPartial(e,t){e.partial=t}setTranslation(e,{lang:t,namespace:i,data:o}){e.translations[t]||(e.translations[t]={}),e.translations[t][i]=(0,s.vV)(o)}loadData(e){return e.pipe((0,g.z)((e=>this.loadData$(e))))}loadData$(e){const{lang:t,namespaces:i,refresh:n}=e,a=(0,o.__rest)(e,["lang","namespaces","refresh"]);return(0,l.D)(i.map((e=>!n&&this.service.hasLoaded(t,e)?(0,d.of)({loaded:!0}):this.service.loadStarling$(Object.assign({lang:t,namespace:e},a)).pipe((0,m.b)((i=>{this.service.registerTranslationData({lang:t,namespace:e,data:i})})),(0,h.U)((t=>({loaded:!1,namespace:e,data:t}))),(0,_.K)((i=>(console.error(i),this.slardar.reportI18nLoadedFailed(e,t),c.E))))))).pipe((0,g.z)((e=>(0,d.of)(...e.filter(j).map((({namespace:e,data:i})=>this.getActions().setTranslation({lang:t,namespace:e,data:i})))))),(0,v.l)(this.getActions().setPartial(!1)))}init$(e){const{lang:t,namespaces:i,refresh:o}=e;return this.service.setLanguage$(t).pipe((0,g.z)((()=>(0,p.T)((0,d.of)(this.getActions().setLang(t)),this.loadData$(Object.assign(Object.assign({},e),{namespaces:i,refresh:o}))))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setLang",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setPartial",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setTranslation",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"loadData",null),C=(0,o.__decorate)([(0,r.Y)("I18n"),(0,o.__metadata)("design:paramtypes",[S,y.n])],C)},88650:(e,t,i)=>{"use strict";i.d(t,{zW:()=>p,TB:()=>u,CN:()=>g});var o=i(64047),n=i(9236),a=i(16926),r=i(91051),s=i(93797),l=i(66958),d=i(23588),c=i(84785);function p(e){const t=(0,n.mp)(c.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),i=Boolean(e);return{isShowLive:(0,r.useMemo)((()=>Boolean(i&&(null==e?void 0:e.roomId)&&"0"!==(null==e?void 0:e.roomId)&&(null==t?void 0:t.uid)!==e.id)),[null==t?void 0:t.uid,i,null==e?void 0:e.id,null==e?void 0:e.roomId]),src:null==e?void 0:e.avatarThumb,uniqueId:null==e?void 0:e.uniqueId,pureLivePath:e?(0,l.P4)({uniqueId:null==e?void 0:e.uniqueId,secUid:null==e?void 0:e.secUid}):""}}function u({reportTrigger:e,user:t,enterMethod:i,autoReport:o,reportValidator:n,once:l}){const c=(0,a.fz)(d.yB),[p,u]=(0,r.useState)(!1),m=(0,r.useMemo)((()=>{var e,o;return{anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:s.W.commonParams.page_name,action_type:"click",enter_method:i}}),[i,null==t?void 0:t.id,null==t?void 0:t.relation,null==t?void 0:t.roomId]),h=(0,r.useCallback)((()=>{p&&l||(c.handleLiveEntranceShow(m),u(!0))}),[p,c,l,m]);return(0,r.useEffect)((()=>{o&&e&&n()&&h()}),[e]),{handleExposure:h,teaParams:g({user:t,enterMethod:i})}}function g(e){var{user:t,enterMethod:i}=e,n=(0,o.__rest)(e,["user","enterMethod"]);return(0,r.useMemo)((()=>{var e,o,a;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:s.W.commonParams.page_name,enter_from:s.W.commonParams.page_name,action_type:"click",enter_method:i,to_user_id:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},n)}),[t,i,n])}},61453:(e,t,i)=>{"use strict";i.d(t,{r:()=>f});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(25615),l=i.n(s),d=i(90293),c=i(82346),p=i(60595),u=i(20948),g=i(53095),m=i(93859),h=i(93797),_=i(71963),v=i(42685),y=i(91218),b=i(84785);let f=class extends n.D{constructor(e,t,i){super(),this.home=e,this.report=t,this.slardar=i,this.defaultState={isOpen:!1,url:"",closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:"",btnOpenText:""},iframeStyle:{},handleDownload:l(),handleLogin:l(),closeCallback:l(),loginModalShow:!1,maskCloseable:!1}}setCloseable(e,t){e.closeable=t}setUrl(e,t){e.url=t}setLoginPath(e,t){e.loginPath=t}setCloseCallback(e,t){e.closeCallback=t}setIsOpen(e,t){e.isOpen=t}setContent(e,t){t&&(e.content=t)}setHandleDownload(e,t){t&&(e.handleDownload=t)}setHandleLogin(e,t){t&&(e.handleLogin=t)}setIframeStyle(e,t){e.iframeStyle=t}setLoginModalShow(e,t){var i,o,n;this.slardar.toggleLoginSlardar(t),e.loginModalShow=t,!t&&window.byted_acrawler&&(null===(o=(i=window.byted_acrawler).setUserMode)||void 0===o||o.call(i,(0,v.M)({isVA:Boolean(null===(n=this.home.state.appContext)||void 0===n?void 0:n.isTTP),isLogin:!1,isFTC:!1,isHighRisk:!1})))}setMaskCloseable(e,t){e.maskCloseable=t}openModal(e){return e.pipe((0,u.M)(this.home.state$,this.state$),(0,g.z)((([{url:e,loginPath:t,isSignup:i,closeable:o=!0,query:n={},iframeStyle:a={},content:r,handleDownload:s,handleLogin:l,maskCloseable:p=!1},{lang:u,appContext:g}])=>{const m=null!=t?t:"/"+(i?"signup":"login"),_=null!=e?e:(0,d.stringifyUrl)({url:m,query:Object.assign({lang:u,is_modal:1,hide_close_btn:1,event_name:i?"enter_sign_up":null,type:-1!==(window.location.pathname+window.location.search).indexOf("recharge")?"recharge":"",enter_from:h.W.commonParams.page_name},n)},{skipNull:!0});return _.match(/\/login|\/signup/)&&!(null==g?void 0:g.isMobile)?(0,c.of)(this.getActions().setLoginModalShow(!0),this.getActions().setUrl(_),this.getActions().setCloseable(o)):(0,c.of)(this.getActions().setUrl(_),this.getActions().setCloseable(o),this.getActions().setIsOpen(!0),this.getActions().setContent(r),this.getActions().setHandleDownload(s),this.getActions().setHandleLogin(l),this.getActions().setIframeStyle(a),this.getActions().setMaskCloseable(p))})))}closeModal(e){return e.pipe((0,u.M)(this.state$),(0,m.b)((([{enter_method:e,disableReport:t},i])=>{t||this.report.LoginNotifyClose({enter_method:e})})),(0,g.z)((([e,{closeCallback:t=l()}])=>{const i=[this.getActions().setIsOpen(!1)];return t(),(0,c.of)(...i)})))}setIsBannerActive(e,t){e.isBannerActive=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setCloseable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setUrl",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setLoginPath",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Function]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setCloseCallback",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setIsOpen",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setContent",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setHandleDownload",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setHandleLogin",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setIframeStyle",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setLoginModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setMaskCloseable",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"openModal",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"closeModal",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setIsBannerActive",null),f=(0,o.__decorate)([(0,r.Y)("LoginModal"),(0,o.__metadata)("design:paramtypes",[b.G,_.ZI,y.n])],f)},3263:(e,t,i)=>{"use strict";i.d(t,{m:()=>O});var o,n=i(64047),a=i(73566),r=i(48185),s=i(19630),l=i(35167),d=i(11348),c=i(82346),p=i(69349),u=i(60595),g=i(35435),m=i(20948),h=i(10026),_=i(5549),v=i(53095),y=i(49584),b=i(93859),f=i(56979),x=i(68854),k=i(35468),w=i(47165),S=i(21396),j=i(84785),C=i(74472),P=i(76967),T=i(75139);!function(e){e.Friends="friends",e.Strangers="strangers"}(o||(o={}));let O=class extends a.D{constructor(e,t,i,o,n){super(),this.service=e,this.itemList=t,this.item=i,this.appContext=o,this.t=n,this.defaultState={friends:{},strangers:{},selectedConversation:void 0,currentMessage:{list:[],hasMore:!0},isLoadingMoreMessage:!1,failedMessageMap:{},hasFeedbackMap:{},failedVideoCodeMap:{},itemListByMessageId:[]}}multiSetConversation(e,t){const{list:i,isStranger:o}=t,n={};return i.forEach((e=>{n[e.id]=e})),o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),n)}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),n)})}setUser(e,t){const{item:i,isStranger:o}=t;return o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),{[i.id]:i})}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),{[i.id]:i})})}addFailedMessage(e,t){e.failedMessageMap=Object.assign(Object.assign({},e.failedMessageMap),t)}setSelectedConversation(e,t){e.selectedConversation=t}setMessageListAction(e,t){e.currentMessage.list=(null!=t?t:[]).reverse()}setMessageHasMore(e,t){e.currentMessage.hasMore=t}setIsLoadingMoreMessage(e,t){e.isLoadingMoreMessage=t}setHasFeedbackMap(e,t){e.hasFeedbackMap=Object.assign(Object.assign({},e.hasFeedbackMap),{[t]:!0})}setFailedVideoCodeMap(e,t){e.failedVideoCodeMap=Object.assign(Object.assign({},e.failedVideoCodeMap),t)}setItemListByMessageId(e,t){e.itemListByMessageId=t}loadMoreMessage(e){return e.pipe((0,g.w)((({conversation:e})=>this.service.getMessagesByConversation({conversation:e}).pipe((0,m.M)(this.state$),(0,g.w)((([{hasMore:t},{selectedConversation:i}])=>{if((null==i?void 0:i.id)!==e.id)return d.E;const o=e.getMessageList();return(0,c.of)(this.getActions().setMessageHasMore(t),this.getActions().setMessageList({list:o}))})),(0,h.O)(this.getActions().setIsLoadingMoreMessage(!0)),(0,_.l)(this.getActions().setIsLoadingMoreMessage(!1))))))}setConversationSettingInfo(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e,mute:t,stickOnTop:i},{friends:o,strangers:n}])=>{var a,r;const s=null!==(r=null!==(a=o[e])&&void 0!==a?a:n[e])&&void 0!==r?r:{};return this.service.setConversationSettingInfo({conversation:s,mute:t,stickOnTop:i}),d.E})))}deleteConversation(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.deleteConversation({conversation:o}),(0,c.of)(this.getActions().setSelectedConversation(void 0))})))}markConversationRead(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markConversationRead({conversation:o}),d.E})))}markStrangerConversationRead(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{strangers:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markStrangerConversationRead({conversation:o}),d.E})))}handleMessageSend(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i}))})))}handleReceiveNewMessage(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i}))})))}handleMessageDelete(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i}))})))}getMessageList(e){return e.pipe((0,m.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t},{friends:i,strangers:o}])=>{var n;const a=o[e],r=i[e],s=Boolean(a);if(!a&&!r)return d.E;if(s)return(0,c.of)(this.getActions().getStrangerMessageList({id:e,shouldHandleVideoMessage:t}));const l=null!==(n=null==r?void 0:r.getMessageList())&&void 0!==n?n:[];return(0,c.of)(this.getActions().setMessageList({list:l,shouldHandleVideoMessage:t}))})),(0,w.n)({}))}getStrangerMessageList(e){return e.pipe((0,m.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t},{strangers:i}])=>{const o=i[e];return o?this.service.getStrangerConversationMessage({conversation:o}).pipe((0,g.w)((e=>(0,c.of)(this.getActions().setMessageList({list:e,shouldHandleVideoMessage:t}))))):d.E})),(0,w.n)({}))}setMessageList(e){return e.pipe((0,m.M)(this.state$,this.item.state$),(0,v.z)((([{list:e,shouldHandleVideoMessage:t=!0},{failedVideoCodeMap:i},o])=>{if(!t)return(0,c.of)(this.getActions().setMessageListAction(e));const n=[],a=[],r=[];return e.forEach((e=>{const{type:t,content:s,clientId:l}=e;if(8!==t)return;let d={};try{d=JSON.parse(s)}catch(e){return null}const c=null==d?void 0:d.itemId;i[c]||(a.push(c),r.push(l),o[c]||n.push(c))})),(0,c.of)(this.getActions().setMessageListAction(e),this.getActions().getVideoList({needRequestList:n,allList:a,allListByMessageId:r}))})))}getVideoList(e){return e.pipe((0,g.w)((({needRequestList:e,allList:t,allListByMessageId:i})=>{if(!e.length)return(0,c.of)(this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i));const o=e.map((e=>this.service.getItemInfo(e)));return(0,p.a)(o).pipe((0,g.w)((o=>{const n={},a=[];return o.forEach((({statusCode:o,itemInfo:r},s)=>{const l=e[s];if(0!==o){n[l]=o;const e=t.indexOf(l);e>-1&&(t.splice(e,1),i.splice(e,1))}else a.push(null==r?void 0:r.itemStruct)})),(0,c.of)(this.getActions().setFailedVideoCodeMap(n),...this.item.addItems(a),this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i))})),(0,w.n)({}))})))}deleteMessage(e){return e.pipe((0,y.z)((({message:e})=>(this.service.deleteMessage({message:e}),d.E))))}likeMessage(e){return e.pipe((0,y.z)((({message:e,isLiked:t})=>(this.service.modifyMessageProperty({message:e,isLiked:t}),d.E))))}handleMessagePropertyUpsert(e){return e.pipe((0,m.M)(this.appContext.state$,this.state$),(0,v.z)((([e,t,{friends:i,strangers:o,selectedConversation:n}])=>{var a,r,s,l;const p=null===(r=null===(a=t.appContext)||void 0===a?void 0:a.user)||void 0===r?void 0:r.uid,u=e.conversationId,g=null!==(l=null!==(s=i[u])&&void 0!==s?s:o[u])&&void 0!==l?l:{};if(e.property["e:love"]){const{sender:t}=e;if(t!==p)return d.E;const i=e.property["e:love"],{length:o}=i;for(let e=0;e<o;e++){const t=i[e];if(t.userId!==p){const e=n===g;return g.customLocalLike={like:!0,date:t.createTime,hasRead:e},(0,c.of)(this.getActions().multiSetConversation({list:[g],isStranger:g.isStrangerConversation}))}}}else g.customLocalLike=null;return d.E})))}feedbackMessage(e){return e.pipe((0,m.M)(this.state$),(0,y.z)((([{shortId:e,uid:t,content:i,messageId:o},{hasFeedbackMap:n}])=>{const a=this.t("direct_meaasge_sending_ban_feedback_again"),r=this.t("Sorry, something wrong with the server, please try again.");return n[o]?(k.h.open({content:a,duration:3,widthType:"half"}),d.E):this.service.feedbackMessage({shortId:e,uid:t,content:i,messageId:o}).pipe((0,b.b)((({status_code:e})=>{0===e?k.h.open({content:a,duration:3,widthType:"half"}):k.h.open({content:r,duration:3,widthType:"half"})})),(0,f.U)((({status_code:e})=>0===e?this.getActions().setHasFeedbackMap(o):this.noop())),(0,x.K)((()=>(k.h.open({content:r,duration:3,widthType:"half"}),d.E))))})))}};(0,n.__decorate)([(0,r.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"multiSetConversation",null),(0,n.__decorate)([(0,r.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setUser",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"addFailedMessage",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setSelectedConversation",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setMessageListAction",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setMessageHasMore",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setIsLoadingMoreMessage",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setHasFeedbackMap",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setFailedVideoCodeMap",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setItemListByMessageId",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"loadMoreMessage",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setConversationSettingInfo",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"deleteConversation",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"markConversationRead",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"markStrangerConversationRead",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"handleMessageSend",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"handleReceiveNewMessage",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"handleMessageDelete",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"getMessageList",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"getStrangerMessageList",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"setMessageList",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"getVideoList",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"deleteMessage",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"likeMessage",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"handleMessagePropertyUpsert",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],O.prototype,"feedbackMessage",null),O=(0,n.__decorate)([(0,s.Y)("ConversationModule"),(0,n.__param)(4,(0,l.t)(S.s)),(0,n.__metadata)("design:paramtypes",[T.e,C.h,P.A,j.G,Function])],O)},33980:(e,t,i)=>{"use strict";i.d(t,{O:()=>C});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(58569),l=i(82346),d=i(11348),c=i(60595),p=i(93859),u=i(56979),g=i(53095),m=i(20948),h=i(10026),_=i(5549),v=i(49584),y=i(68854),b=i(43094),f=i(50218),x=i(47165),k=i(24878),w=i(3263),S=i(75139),j=i(90935);let C=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.user=t,this.conversation=i,this.messageUser=o,this.defaultState={initialized:!1,messageCount:0,recentUserList:[],recentUserNameList:[],recentUidList:[],allUidList:[],followingUser:{list:[],nicknameList:[],uidList:[],hasMore:!0,maxCursor:0,minCursor:0},isFollowingLoading:!1,isSendMessageFailed:!1,isSendMessageLoading:!1,conversationMap:{},allConversationList:[],conversationList:[],strangerConversationList:[],successSentMessageCount:0,isListLoading:!0,hasMoreFriends:!0,hasMoreStranger:!0,otherUid:""},this.recentUids="",this.friendsCursor=20}initSDK(e){return e.pipe((0,p.b)((e=>{this.service.options$.next(e)})),(0,u.U)((()=>this.noop())))}startRefreshMessage(e){return(0,s.T)(this.service.refreshMessage$,e).pipe((0,u.U)((()=>this.noop())))}setMessageCount(e,t){e.messageCount=t}setConversationMap(e,t){e.conversationMap=Object.assign({},t)}setConversationList(e,t){t.sort(((e,t)=>{if(e.isStickOnTop&&t.isStickOnTop||!e.isStickOnTop&&!t.isStickOnTop){const i=Math.max(e.customLocalLike?e.customLocalLike.date.getTime():-1,e.lastVisibleMessage?e.lastVisibleMessage.createdAt.getTime():-1);return Math.max(t.customLocalLike?t.customLocalLike.date.getTime():-1,t.lastVisibleMessage?t.lastVisibleMessage.createdAt.getTime():-1)-i}return 0})),e.conversationList=[...t]}setAllConversationList(e,t){e.allConversationList=[...t]}setStrangerConversationList(e,t){e.strangerConversationList=[...t]}setHasMoreStranger(e,t){e.hasMoreStranger=t}setListLoading(e,t){e.isListLoading=t}updateRecentUserList(e,t){const{uniqueIdList:i,nicknameList:o,uidList:n}=t;e.recentUserList=[...i],e.recentUserNameList=[...o],e.recentUidList=[...n]}updateFollowingUserList(e,t){e.followingUser=t}setFollowingLoading(e,t){e.isFollowingLoading=t}setUidList(e,t){e.allUidList=t}addSentMessageSuccessCount(e){e.successSentMessageCount=e.successSentMessageCount+1}setSendMessageStatus(e,t){var i,o;e.isSendMessageFailed=null!==(i=t.isFailed)&&void 0!==i&&i,e.isSendMessageLoading=null!==(o=t.isLoading)&&void 0!==o&&o,void 0!==t.successCount&&(e.successSentMessageCount=t.successCount)}setOtherUid(e,t){e.otherUid=t}setInitialized(e,t){e.initialized=t}handleImEvent(e){return e.pipe((0,u.U)((({event:e,sdk:t,params:i})=>{switch(e){case t.IMEvent.ConversationChange:return this.getActions().startConversationChange();case t.IMEvent.MessageSend:return this.conversation.getActions().handleMessageSend(i);case t.IMEvent.ReceiveNewMessage:return this.conversation.getActions().handleReceiveNewMessage(i);case t.IMEvent.MessageDelete:return this.conversation.getActions().handleMessageDelete(i);case t.IMEvent.MessagePropertyUpsert:return this.conversation.getActions().handleMessagePropertyUpsert(i);default:return this.noop()}})))}startConversationChange(e){return e.pipe((0,g.z)((()=>this.service.getConversationListOnline())),(0,m.M)(this.state$),(0,g.z)((([e=[],{otherUid:t}])=>{const i=[],o={};t&&i.push(t);const n=e.reduce(((e,n)=>{if(0===n.mode&&!n.isStrangerConversation){const a=n.toParticipantUserId;if(a&&(a!==t&&i.push(a),o[a]=n),0!==n.unreadCount&&!n.isMuted&&!n.customIsSelected)return e+1}return e}),0),a=i.slice(0,20);return(0,l.of)(this.getActions().setMessageCount(n),this.getActions().setConversationMap(o),this.getActions().setAllConversationList(e),this.getActions().setConversationList(e.slice(0,this.friendsCursor)),this.getActions().setUidList(i),this.getActions().setInitialized(!0),this.getActions().getStrangerPreview(),this.getActions().getMultiUsersByUids({uidList:a,isGetRecentUsers:!0}),this.conversation.getActions().multiSetConversation({list:e,isStranger:!1}))})),(0,h.O)(this.getActions().setListLoading(!0)),(0,x.n)({}))}getMoreConversationList(e){return e.pipe((0,m.M)(this.state$),(0,g.z)((([e,{allUidList:t,allConversationList:i}])=>{if(this.friendsCursor>=i.length)return d.E;const o=this.friendsCursor;return this.friendsCursor+=this.friendsCursor+15,(0,l.of)(this.getActions().getMultiUsersByUids({uidList:t.slice(o,this.friendsCursor)}),this.getActions().setConversationList(i.slice(0,this.friendsCursor)),this.getActions().setListLoading(!0))})))}getStrangerPreview(e){return e.pipe((0,m.M)(this.messageUser.state$,this.state$),(0,g.z)((([e,{users:t},{allConversationList:i,conversationList:o}])=>this.service.getStrangerPreview().pipe((0,g.z)((e=>{var n,a;const r=null==e?void 0:e.conversation,s=null==r?void 0:r.toParticipantUserId;if(!s)return d.E;const c=[...i],p=[...o],u=null!==(a=null===(n=null==r?void 0:r.lastVisibleMessage)||void 0===n?void 0:n.createdAt.getTime())&&void 0!==a?a:-1;c.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<u&&!(null==e?void 0:e.isStickOnTop))return c.splice(t,0,r),!0;t===c.length-1&&c.splice(t+1,0,r)})),p.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<u&&!(null==e?void 0:e.isStickOnTop))return p.splice(t,0,r),!0;t===p.length-1&&p.splice(t+1,0,r)})),c.length||(c.splice(0,0,r),p.splice(0,0,r));const g=[this.getActions().setAllConversationList(c),this.getActions().setConversationList(p),this.conversation.getActions().multiSetConversation({list:[r],isStranger:!0})];return t[s]||g.push(this.getActions().getMultiUsersByUids({uidList:[s]})),(0,l.of)(...g)})),(0,x.n)({})))))}getStrangerConversationList(e){return e.pipe((0,m.M)(this.state$,this.conversation.state$),(0,g.z)((([{isLoadMore:e},{strangerConversationList:t},{strangers:i}])=>this.service.getStrangerConversationList({cursor:e?this.strangerCursor:0,limit:15}).pipe((0,g.z)((({conversation:e,hasMore:t,cursor:o})=>{this.strangerCursor=o;const n=e.filter((e=>!i[e.id]));if(1!==e.length&&!n.length)return d.E;const a=n.map((e=>{var t;return null!==(t=e.toParticipantUserId)&&void 0!==t?t:""}));return(0,l.of)(this.getActions().setStrangerConversationList([...e]),this.conversation.getActions().multiSetConversation({list:n,isStranger:!0}),this.getActions().setHasMoreStranger(t),this.getActions().getMultiUsersByUids({uidList:a}))})),(0,h.O)(t.length?this.noop():this.getActions().setListLoading(!0)),(0,_.l)(this.getActions().setListLoading(!1))))))}getMultiUsersByUids(e){return e.pipe((0,m.M)(this.messageUser.state$),(0,v.z)((([{uidList:e,isGetRecentUsers:t},{users:i}])=>{const{pathname:o}=location;if(!(0,f.oC)(o)&&5===(0,f.C2)(o))return d.E;const n=String(e),a=e.filter((e=>void 0===(null==i?void 0:i[e])));return e.length&&this.recentUids!==n&&a.length?(this.recentUids=n,this.service.getMultiUsersByUids(n).pipe((0,v.z)((i=>{var o;const n=null!==(o=null==i?void 0:i.userMap)&&void 0!==o?o:{},a=[],r=[],s=[],d=e.map((e=>{if(n[e])return n[e].id=e,a.push(n[e].uniqueId),r.push(n[e].nickname),s.push(e),n[e];n[e]=null})).filter((e=>e));if(!d.length)return(0,l.of)(this.noop(),this.getActions().setListLoading(!1));const c=[this.user.getActions().multiSetUser(d),this.messageUser.getActions().multiSetUsers(n)];return t&&c.push(this.getActions().updateRecentUserList({uniqueIdList:a,nicknameList:r,uidList:s})),(0,l.of)(...c)})),(0,_.l)(this.getActions().setListLoading(!1)))):(0,l.of)(this.getActions().setListLoading(!1))})),(0,x.n)({}))}getFollowingUserListWithCanShare(e){return e.pipe((0,m.M)(this.state$),(0,u.U)((([{count:e},t])=>Object.assign(Object.assign({},t.followingUser),{count:e}))),(0,g.z)((e=>{var{list:t,nicknameList:i,uidList:n}=e,a=(0,o.__rest)(e,["list","nicknameList","uidList"]);return this.service.getFollowingUserListWithCanShare(a).pipe((0,v.z)((e=>{const{statusCode:o,maxTime:a,minTime:r,followings:s=[],hasMore:d}=e,c=[],p=[],u=[];return 0===o?(s&&s.forEach((e=>{c.push(e.uniqueId),p.push(e.nickname),u.push(e.id)})),(0,l.of)(this.getActions().updateFollowingUserList({list:[...t,...c],nicknameList:[...i,...p],uidList:[...n,...u],maxCursor:a,minCursor:r,hasMore:Boolean(d)}),this.user.getActions().multiSetUser(null!=s?s:[]),this.getActions().setFollowingLoading(!1))):(0,l.of)(this.noop(),this.getActions().setFollowingLoading(!1))})),(0,h.O)(this.getActions().setFollowingLoading(!0)))})),(0,x.n)({}))}sendMessage(e){return e.pipe((0,m.M)(this.conversation.state$),(0,g.z)((([{uid:e,relation:t=0,type:i,content:o,hasConversation:n,chatType:a,messageType:r,convId:s},{friends:c,strangers:p}])=>{var m;return(n?(0,l.of)({type:i,content:o,conversation:null!==(m=c[s])&&void 0!==m?m:p[s]}):this.service.createConversation({uid:e}).pipe((0,u.U)((({payload:e})=>({type:i,content:o,conversation:null!=e?e:{}}))),(0,x.n)({}))).pipe((0,g.z)((({type:e,content:t,conversation:i})=>this.service.createMessage({conversation:i,type:e,content:JSON.stringify(t)}))),(0,g.z)((e=>49999===i?d.E:this.service.sendMessage({message:e}))),(0,g.z)((i=>{var o,n,s;const{success:d,checkMsg:c,payload:p}=i,u=[this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1}),this.getActions().addSentMessageSuccessCount()];return d?b.R.handleSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(o=null==p?void 0:p.conversationId)&&void 0!==o?o:"",message_type:null!=r?r:"share_video",relation_tag:t,to_user_id:e}):(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(n=null==p?void 0:p.conversationId)&&void 0!==n?n:"",message_type:null!=r?r:"share_video",error_code:null!==(s=JSON.parse(null!=c?c:"{}").status_code)&&void 0!==s?s:-1,relation_tag:t,to_user_id:e}),(null==p?void 0:p.clientId)&&u.push(this.conversation.getActions().addFailedMessage({[null==p?void 0:p.clientId]:null!=c?c:"null"}))),(0,l.of)(...u)})),(0,y.K)((()=>(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:"",message_type:null!=r?r:"share_video",error_code:-1,relation_tag:t,to_user_id:e}),(0,l.of)(this.getActions().setSendMessageStatus({isFailed:!0,isLoading:!1}))))))})),(0,x.n)({}),(0,h.O)(this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1})))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"initSDK",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"startRefreshMessage",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setMessageCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setConversationMap",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setAllConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setStrangerConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setHasMoreStranger",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setListLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"updateRecentUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"updateFollowingUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setFollowingLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setUidList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"addSentMessageSuccessCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setSendMessageStatus",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setOtherUid",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],C.prototype,"handleImEvent",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"startConversationChange",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"getMoreConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"getStrangerPreview",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"getStrangerConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"getMultiUsersByUids",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"getFollowingUserListWithCanShare",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"sendMessage",null),C=(0,o.__decorate)([(0,r.Y)("MessageModule"),(0,o.__metadata)("design:paramtypes",[S.e,k.z,w.m,j.l])],C)},75139:(e,t,i)=>{"use strict";i.d(t,{e:()=>y});var o,n=i(64047),a=i(57244),r=i(90293),s=i(40299),l=i(14716),d=i(82346),c=i(49847),p=i(69349),u=i(50986),g=i(49584),m=i(53095),h=i(98540),_=i(4206),v=i(30626);!function(e){e[e.NotAvailable=0]="NotAvailable",e[e.Start=1]="Start",e[e.Error=2]="Error",e[e.Succeeded=3]="Succeeded"}(o||(o={}));let y=class{constructor(e){this.fetch=e,this.retryTime=0,this.hasMore$=new s.x,this.options$=new s.x,this.init$=this.options$.pipe((0,g.z)((e=>{let t,o;return(0,l.D)(Promise.all([Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128),i.e(622)]).then(i.bind(i,64718)),Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128)]).then(i.bind(i,83047)),Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128)]).then(i.bind(i,74773))]).then((([i,n,a])=>(e.authType=i.im_proto.AuthType.SESSION_AUTH,o=i,t=new i.BytedIM(e,[n.ExtensionPlugin,a.StrangerPlugin]),this.instance=t,this.sdk=o,t.init()))).then((i=>({result:i,instance:t,sdk:o,options:e}))).catch((i=>(console.error(`[IM SDK] init failed, e=${i}`),{result:2,instance:t,sdk:o,options:e}))))})),(0,m.z)((({result:e,instance:t,sdk:i,options:o})=>{const n=[i.IMEvent.ConversationChange,i.IMEvent.MessageSend,i.IMEvent.ReceiveNewMessage,i.IMEvent.MessageDelete,i.IMEvent.MessagePropertyUpsert];return t?(n.forEach((e=>{t.event.subscribe(e,(t=>{o.eventListner({event:e,params:t,sdk:i})}))})),(0,d.of)({instance:t,sdk:i,options:o})):(0,c._)((()=>new Error(`[IM SDK] init failed with initResult=${e}`)))}))),this.refreshMessage$=(0,p.a)([this.init$,(0,u.F)(360)]).pipe((0,m.z)((([{instance:e,sdk:t,options:i}])=>(0,l.D)(e.getMessagesByUserInit({inboxType:0,cursor:this.cursor}).then((({hasMore:e,cursor:o=0})=>(this.cursor=o.toString(),0===this.refreshTime&&i.eventListner({event:t.IMEvent.ConversationChange,params:{},sdk:t}),this.refreshTime++,e))).catch((e=>(console.error(e),!(this.retryTime++>5))))))),(0,h.o)((e=>e))),this.cursor="0",this.refreshTime=0,this.instance={},this.sdk={}}getMessageToken(){return this.fetch.get("/api/im/reboot/misc/",{query:{aid:1988,im_token:1},baseUrlType:2})}getConversationListOnline(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getConversationListOnline)||void 0===t?void 0:t.call(e))}getStrangerConversationList({cursor:e,limit:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).getStrangerConversationList)||void 0===o?void 0:o.call(i,{cursor:e,limit:t}))}createConversation({uid:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).createConversation)||void 0===i?void 0:i.call(t,{participants:e}))}createMessage({type:e,content:t,conversation:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).createMessage)||void 0===n?void 0:n.call(o,{conversation:i,type:e,content:t}))}sendMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).sendMessage)||void 0===i?void 0:i.call(t,{message:e}))}setConversationSettingInfo({conversation:e,mute:t,stickOnTop:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).setConversationSettingInfo)||void 0===n?void 0:n.call(o,{conversation:e,mute:t,stickOnTop:i}))}deleteConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteStrangerConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteStrangerConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}markConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}markStrangerConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markStrangerConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerPreview(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getStrangerPreview)||void 0===t?void 0:t.call(e,{}))}getMessagesByConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getMessagesByConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerConversationMessage({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getStrangerConversationMessage)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteMessage)||void 0===i?void 0:i.call(t,{message:e}))}modifyMessageProperty({message:e,isLiked:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).modifyMessageProperty)||void 0===o?void 0:o.call(i,{message:e,modifyContent:[{operation:t?this.sdk.im_proto.OPERATION_TYPE.REMOVE_PROPERTY_ITEM:this.sdk.im_proto.OPERATION_TYPE.ADD_PROPERTY_ITEM,key:"e:love"}]}))}getMultiUsersByUids(e){return this.fetch.get("/api/im/multi_user/",{query:{aid:1988,uids:e}})}getFollowingUserListWithCanShare(e){const{minCursor:t=0,count:i=30}=e;return this.fetch.get("/api/im/spotlight/relation/",{query:{source:"web",with_fstatus:1,device_platform:"webapp_pc",count:i,max_time:t,min_time:0}})}getMultiUsersRelation({to_user_id:e,userId:t}){return this.fetch.get("/api/im/spotlight/multi_relation/",{query:{to_user_id:e,userId:t}})}feedbackMessage({shortId:e,uid:t,content:i,messageId:o}){const n=r.stringify({con_short_id:e,receiver_uid:t,content:i,msg_type:"7",scene:"sending_ban",msg_id:o});return this.fetch.post("/aweme/v1/im/msg/feedback/",{query:{report_type:"im",appId:1233},headers:{"Content-Type":v.zv.FORM_ENCODE},body:n})}getItemInfo(e){return this.fetch.get("/api/im/item_detail/",{query:{itemId:e}})}};y=(0,n.__decorate)([(0,a.G)(),(0,n.__metadata)("design:paramtypes",[_.r])],y)},90935:(e,t,i)=>{"use strict";i.d(t,{l:()=>h});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(11348),l=i(82346),d=i(60595),c=i(20948),p=i(53095),u=i(47165),g=i(24878),m=i(63308);let h=class extends n.D{constructor(e,t){super(),this.userModule=e,this.userService=t,this.defaultState={users:{}}}multiSetUsers(e,t){const{users:i}=e;return{users:Object.assign(Object.assign({},i),t)}}setUserRelation(e,{uid:t,relation:i}){const o=e.users[t];o&&(o.relation=i)}blockUser(e){return e.pipe((0,c.M)(this.state$),(0,p.z)((([{uid:e,isBlock:t},{users:i}])=>{var o;const{secUid:n="",uniqueId:a=""}=null!==(o=i[e])&&void 0!==o?o:{};return this.userService.blockUser({sec_user_id:n,block_type:t?1:0}).pipe((0,p.z)((i=>{const{status_code:o}=i,n=t?4:0;return 0!==o?s.E:(0,l.of)(this.getActions().setUserRelation({uid:e,relation:n}),this.userModule.getActions().setUserRelation({uniqueId:a,relation:n}))})),(0,u.n)({}))})))}};(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"multiSetUsers",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"setUserRelation",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"blockUser",null),h=(0,o.__decorate)([(0,r.Y)("MessageUserModule"),(0,o.__metadata)("design:paramtypes",[g.z,m.K])],h)},49167:(e,t,i)=>{"use strict";i.d(t,{R:()=>s});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={uniqueId:void 0}}setUniqueId(e,t){e.uniqueId=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setUniqueId",null),s=(0,o.__decorate)([(0,r.Y)("RecommendUserList")],s)},84047:(e,t,i)=>{"use strict";i.d(t,{B:()=>k});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(82346),l=i(60595),d=i(93859),c=i(56979),p=i(45784),u=i(6693),g=i(20948),m=i(35435),h=i(10026),_=i(5549),v=i(72852),y=i(84785),b=i(57244),f=i(4206);let x=class{constructor(e){this.fetch=e}getSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/user/preview/",{query:t,baseUrlType:2})}getGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/preview/",{query:t,baseUrlType:2})}};x=(0,o.__decorate)([(0,b.G)(),(0,o.__metadata)("design:paramtypes",[f.r])],x);let k=class extends n.D{constructor(e,t){super(),this.service=e,this.home=t,this.defaultState={sugList:[],loading:!1,activeIndex:-1,searchValue:"",inputFocus:!1}}setSearchValue(e,t){e.searchValue=t}setInputFocus(e,t){e.inputFocus=t}handleInputFocusChange(e){return e.pipe((0,d.b)((e=>{e&&v.xq.handleSearchEntry()})),(0,c.U)(this.getActions().setInputFocus))}setList(e,t){e.sugList=t}setLoading(e,t){e.loading=t}setActiveIndex(e,t){e.activeIndex=t}setActiveUp(e){e.activeIndex=Math.max(0,e.activeIndex-1)}setActiveDown(e){const{sugList:t,activeIndex:i}=e;e.activeIndex=Math.min(t.length,i+1)}getSugList(e){return e.pipe((0,p.g)("keyword"),(0,u.b)(500),(0,g.M)(this.state$,this.home.state$),(0,c.U)((([e,t,{appContext:i}])=>({payload:e,inputFocus:t.inputFocus,isLogin:Boolean(null==i?void 0:i.user),searchVideoForLoggedin:null==i?void 0:i.searchVideoForLoggedin}))),(0,m.w)((({payload:e,inputFocus:t,isLogin:i,searchVideoForLoggedin:o})=>e.keyword?(i||!o?this.service.getGeneralSugList({keyword:e.keyword,app_language:e.app_language}):this.service.getSugList(e)).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:i,words_query_record:o,log_pb:n})=>{t&&i.forEach(((t,i)=>{var a,r;v.xq.handleSugImpression({impr_id:null!==(a=null==n?void 0:n.impr_id)&&void 0!==a?a:"",words_source:"sug",words_position:i,words_content:t.content,raw_query:e.keyword,sug_type:t.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(r=null==o?void 0:o.query_id)&&void 0!==r?r:"",group_id:t.word_record.group_id})}))})),(0,c.U)((e=>this.getActions().setList(e.sug_list))),(0,h.O)(this.getActions().setLoading(!0),this.getActions().setActiveIndex(-1)),(0,_.l)(this.getActions().setLoading(!1))):(0,s.of)(this.getActions().setList([])))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setSearchValue",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setInputFocus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"handleInputFocusChange",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveUp",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveDown",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"getSugList",null),k=(0,o.__decorate)([(0,r.Y)("Sug"),(0,o.__metadata)("design:paramtypes",[x,y.G])],k)},68137:(e,t,i)=>{"use strict";i.d(t,{w:()=>u,if:()=>g,Ob:()=>m,Zx:()=>h});var o=i(9236),n=i(90293),a=i(91051),r=i(21041),s=i(29046),l=i(72852),d=i(34708),c=i(74472),p=i(42972);function u(){var e;const{search:t,state:i}=(0,r.TH)(),{enterMethod:o,searchSource:a}=null!=i?i:{},{q:s}=(0,n.parse)(t);return{enterMethod:o,searchSource:a,keyword:null!==(e=Array.isArray(s)?s.toString():s)&&void 0!==e?e:""}}function g(e){var t;const{keyword:i,enterMethod:n,searchSource:l}=u(),{user:g,searchVideoForLoggedin:m}=null!==(t=(0,d.L)((()=>["user","searchVideoForLoggedin"]),[]))&&void 0!==t?t:{},h=(0,r.TH)(),{pathname:_}=h,v=Boolean(g),[y,b]=(0,o.b7)(p.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),f=(0,o.qj)(c.h),x=_===s.Ad.searchUser;return(0,a.useCallback)(((t=!0,o=!1)=>{const a=i!==(null==y?void 0:y.keyword)||t,r=i!==(null==y?void 0:y.keyword)||o,d=!m||v,c="_solved"===n?void 0:{search_source:null!=l?l:"search_outer",search_type:e,enter_method:n};switch(e){case"general":_===s.Ad.searchHome&&a&&d&&(r&&(b.setSearchResult({key:"general",result:p._P}),f.resetItemList({key:"search_top",loading:!0})),b.getTopSearch({keyword:i,teaParams:c}));break;case"user":x&&a&&(r&&b.setSearchResult({key:"user",result:p.i8}),b.getUserSearch({keyword:i,teaParams:c}));break;case"video":_===s.Ad.searchVideo&&a&&d&&(r&&(b.setSearchResult({key:"video",result:p.i8}),f.resetItemList({key:"search_video",loading:!0})),b.getVideoSearch({keyword:i,teaParams:c}))}}),[b,n,v,x,f,e,i,_,l,null==y?void 0:y.keyword,m])}function m(e,t=!0){const{keyword:i}=u(),n=(0,r.TH)(),l=(0,r.k6)(),{state:d,pathname:c}=n,m=Boolean((0,r.LX)(c,{path:s.Ad.searchHome})),[h,_]=(0,o.b7)(p.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),v=g(e);return(0,a.useEffect)((()=>{var e,o,a,r,s;if(!m)return;const c=Boolean(h.data)?!h.error&&0===(null===(o=null===(e=h.data)||void 0===e?void 0:e.videoList)||void 0===o?void 0:o.length)&&0===(null===(r=null===(a=h.data)||void 0===a?void 0:a.otherDataList)||void 0===r?void 0:r.length):0===(null===(s=null==h?void 0:h.items)||void 0===s?void 0:s.length),p=i!==h.keyword||c;return t&&l.replace(Object.assign(Object.assign({},n),{state:Object.assign(Object.assign({},d),{enterMethod:"_solved"})})),v(p),()=>{_.dispose()}}),[i]),Object.assign(Object.assign({},h),{keyword:i,handleSearch:v})}function h(e,t){const i=(0,a.useRef)(0),o=(0,r.k6)(),n=(0,r.TH)(),{pathname:d}=n;(0,a.useEffect)((()=>{if((0,r.LX)(d,{path:s.Ad.searchHome}))return i.current||(i.current=Date.now()),o.listen((({pathname:o})=>{if(!(0,r.LX)(o,{path:s.Ad.searchHome})){const o=Date.now()-i.current;l.xq.handleSearchSessionFinish({duration:o,impr_id:e,search_id:e,search_type:t})}}))}),[e,t])}},42972:(e,t,i)=>{"use strict";i.d(t,{i8:()=>M,_P:()=>R,t8:()=>F});var o,n=i(64047),a=i(73566),r=i(48185),s=i(19630),l=i(35167),d=i(82346),c=i(58569),p=i(60595),u=i(20948),g=i(56979),m=i(35435),h=i(53095),_=i(10026),v=i(5549),y=i(12167),b=i(93859),f=i(68854),x=i(29046),k=i(93797),w=i(72852),S=i(35468),j=i(40022),C=i(21396),P=i(2734),T=i(84785),O=i(92311),L=i(24878),I=i(81578),A=i(74472),E=i(73080);!function(e){e[e.NetworkError=-1]="NetworkError",e[e.NoResultText=10]="NoResultText",e[e.SelfHarmText=11]="SelfHarmText",e[e.HateSexualizationText=12]="HateSexualizationText"}(o||(o={}));const M={keyword:"",error:null,loading:!1,hasMore:!1,cursor:0,items:[],preloadList:[]},R={keyword:"",error:null,loading:!1,hasMore:!1,totalLength:0,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[]};let F=class extends a.D{constructor(e,t,i,o,n,a,r){super(),this.service=e,this.user=t,this.seoModule=i,this.itemList=o,this.videoMask=n,this.appContext=a,this.t=r,this.defaultState={showTabs:!0,general:R,user:M,video:M}}setSearchResult(e,t){const{key:i,result:o}=null!=t?t:{};e[i]=o}addSearchResult(e,t){var i,o,n,a,r;const{key:s,result:l}=null!=t?t:{};if(!e[s])return e[s]=l,e;e[s]=Object.assign(Object.assign(Object.assign({},e[s]),l),{items:null===(o=null===(i=e[s])||void 0===i?void 0:i.items)||void 0===o?void 0:o.concat(l.items),preloadList:null===(a=null===(n=e[s])||void 0===n?void 0:n.preloadList)||void 0===a?void 0:a.concat(null!==(r=l.preloadList)&&void 0!==r?r:[])})}addTopSearchResult(e,t){var i,o;const n=e.general;null===(i=t.data)||void 0===i||i.forEach((e=>{var t,i,o,a,r,s,l,d,c,p,u;if(4===e.type){const o={},a=n.data.videoList.length;o.type=e.type,o.items=null===(t=null==e?void 0:e.user_list)||void 0===t?void 0:t.map((({user_info:e})=>{var t;return n.totalLength++,null!==(t=e.unique_id)&&void 0!==t?t:""})),o.position=a%6==0?a:6*Math.ceil(a/6),o.hasMore=null!==(i=e.view_more)&&void 0!==i&&i,n.data.otherDataList=[...n.data.otherDataList,o]}else{n.totalLength++,n.data.videoList=[...n.data.videoList,null!==(a=null===(o=e.item)||void 0===o?void 0:o.id)&&void 0!==a?a:""];const t={id:null!==(l=null===(s=null===(r=e.item)||void 0===r?void 0:r.video)||void 0===s?void 0:s.id)&&void 0!==l?l:"",url:null!==(p=null===(c=null===(d=e.item)||void 0===d?void 0:d.video)||void 0===c?void 0:c.playAddr)&&void 0!==p?p:""};n.preloadList=[...null!==(u=n.preloadList)&&void 0!==u?u:[],t]}})),e.general=Object.assign(Object.assign({},e.general),{hasMore:Boolean(t.has_more),cursor:null!==(o=t.cursor)&&void 0!==o?o:0,data:Object.assign({},n.data),rid:t.rid,preloadList:n.preloadList})}setSearchLoading(e,t){const{key:i,loading:o}=null!=t?t:{};e[i].loading=o}setShowTabs(e,t){e.showTabs=t}setKeyword(e,t){const{key:i,keyword:o}=t;e[i].keyword=o}resetSearchResult(e){e.general=R,e.user=M,e.video=M}getTopSearch(e){return e.pipe((0,u.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,g.U)((([e,t,i,o])=>({query:e,appContextState:i,state:t.general,videoMaskState:o}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o}=i,a=(0,n.__rest)(i,["teaParams"]),{appContextState:r,state:s,state:{cursor:l,data:p,rid:u},videoMaskState:g}=e;let m=(0,d.of)({});return!a.keyword||(0,j.y)()&&!(null===(t=r.appContext)||void 0===t?void 0:t.isGoogleBot)||(m=this.service.getTopSearch(Object.assign(Object.assign({},a),{offset:l,search_id:u}))),m.pipe(this.handleTopSearchReport({state:s,keyword:a.keyword,teaParams:o}),(0,h.z)((e=>{var t,i,o;const{user:n}=null!==(t=r.appContext)&&void 0!==t?t:{},l=this.seoModule.setSearchSEOProps(e,{language:r.lang},{pathname:x.Ad.searchHome,input_keyword:a.keyword}),{has_more:p,data:m=[],extra:h={},search_nil_info:_,suicide_prevent:v,search_nil_text:y,status_code:b,log_pb:f}=e,k=[0,203,403].includes(b)?0:b,{logid:w}=h,S=null!==(i=null!=u?u:w)&&void 0!==i?i:"";if(!m.length&&!p)return this.generateErrorState({search_nil_info:_,search_nil_text:y,suicide_prevent:v,state:s,key:"general",keyword:a.keyword,pathname:x.Ad.searchHome,action$s:[l]});const j=[],C=[],P={hasMore:Boolean(p),statusCode:k,itemList:[],rid:S};m.forEach((e=>{if(4===e.type){const t=Object.assign(Object.assign({},e),{items:[]}),{user_list:i=[]}=e;i.forEach((({user_info:e={}})=>{const{user:i,stats:o}=this.userConvertor(e,S,null==f?void 0:f.impr_id),{unique_id:n=""}=e;j.push(i),C.push(o),t.items.push(n)}))}else P.itemList.push(e.item)})),(1===(null==n?void 0:n.photoSensitiveVideosSetting)||!n&&1===g.photoSensitiveVideosSetting)&&(e.data=null===(o=e.data)||void 0===o?void 0:o.filter((e=>{var t;return 4===e.type||4!==(null===(t=e.item)||void 0===t?void 0:t.maskType)})));const T=(0,d.of)(this.user.getActions().multiSetUser(j),this.user.getActions().multiSetUserStats(C),this.itemList.getActions().setList({response:P,key:"search_top"}),this.getActions().addTopSearchResult(Object.assign(Object.assign({},e),{rid:S})));return(0,c.T)(T,l)})),this.catchError({isEmpty:Boolean(p.videoList.length||p.otherDataList.length),key:"general",keyword:a.keyword,state:s,teaParams:o}),(0,_.O)(this.getActions().setSearchLoading({key:"general",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"general",keyword:a.keyword})),(0,v.l)(this.getActions().setSearchLoading({key:"general",loading:!1}),this.terminate()),(0,y.R)(this.getAction$().dispose))})))}getUserSearch(e){return e.pipe((0,u.M)(this.state$,this.appContext.state$),(0,g.U)((([e,t,i])=>({query:e,appContextState:i,state:t.user}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o}=i,a=(0,n.__rest)(i,["teaParams"]),{appContextState:r,state:s,state:{cursor:l,items:p,rid:u}}=e;let g=(0,d.of)({});return!a.keyword||(0,j.y)()&&!(null===(t=r.appContext)||void 0===t?void 0:t.isGoogleBot)||(g=this.service.getUserSearch(Object.assign(Object.assign({},a),{cursor:l,search_id:u}))),g.pipe((0,b.b)((e=>{var t;const{user_list:i=[],log_pb:n,extra:r}=e,{impr_id:s}=null!=n?n:{},{logid:l}=null!=r?r:{},d=null!==(t=null!=u?u:l)&&void 0!==t?t:"";if(i.length){const e=p.length,t=(null==o?void 0:o.enter_method)?k.W.commonParams.page_name:"search_outer";i.forEach(((i,o)=>{w.xq.handleSearchImpression({search_type:"user",enter_from:t,rank:e+o,search_keyword:a.keyword,search_result_id:i.user_info.uid,impr_id:s,search_id:d})}))}else w.xq.handleSearchResultEmpty({search_keyword:a.keyword,impr_id:s,search_id:d});o&&w.xq.handleSearch(Object.assign({search_id:d,search_keyword:a.keyword},o))})),(0,h.z)((e=>{var t;const i=this.seoModule.setSearchSEOProps(e,{language:r.lang},{pathname:x.Ad.searchUser,input_keyword:a.keyword}),{has_more:o,cursor:n,user_list:l=[],extra:p,search_nil_info:g,suicide_prevent:m,search_nil_text:h,log_pb:_}=e,v=null!==(t=null!=u?u:null==p?void 0:p.logid)&&void 0!==t?t:"";if(!l.length&&!o)return this.generateErrorState({res:e,search_nil_info:g,search_nil_text:h,suicide_prevent:m,state:s,key:"user",keyword:a.keyword,pathname:x.Ad.searchUser,action$s:[i]});if(l.length){const e=[],t=[],r=l.map((({user_info:i})=>{const{user:o,stats:n}=this.userConvertor(i,v,null==_?void 0:_.impr_id);return e.push(o),t.push(n),o.uniqueId})),s=(0,d.of)(this.user.getActions().multiSetUser(e),this.user.getActions().multiSetUserStats(t),this.getActions().addSearchResult({key:"user",result:{hasMore:Boolean(o),keyword:a.keyword,cursor:n,error:null,items:r,loading:!1,rid:v,preloadList:[]}}));return(0,c.T)(s,i)}return i})),this.catchError({isEmpty:Boolean(p.length),key:"user",keyword:a.keyword,state:s,teaParams:o}),(0,_.O)(this.getActions().setSearchLoading({key:"user",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"user",keyword:a.keyword})),(0,v.l)(this.getActions().setSearchLoading({key:"user",loading:!1}),this.terminate()),(0,y.R)(this.getAction$().dispose))})))}getVideoSearch(e){return e.pipe((0,u.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,g.U)((([e,t,i,o])=>({query:e,appContextState:i,state:t.video,videoMaskState:o}))),(0,m.w)((e=>{var t,i=e.query,{teaParams:o}=i,a=(0,n.__rest)(i,["teaParams"]),{appContextState:r,state:s,state:{cursor:l,items:p,rid:u},videoMaskState:g}=e;let m=(0,d.of)({});return!a.keyword||(0,j.y)()&&!(null===(t=r.appContext)||void 0===t?void 0:t.isGoogleBot)||(m=this.service.getVideoSearch(Object.assign(Object.assign({},a),{offset:l,count:20,search_id:u}))),m.pipe((0,b.b)((e=>{var t;const{item_list:i=[],log_pb:n,extra:r}=e,s=null!==(t=null!=u?u:null==r?void 0:r.logid)&&void 0!==t?t:"";if(i.length){const e=p.length,t=(null==o?void 0:o.enter_method)?k.W.commonParams.page_name:"search_outer";i.forEach(((i,o)=>{var r;w.xq.handleSearchVideoImpression({search_type:"video",enter_from:t,group_id:null==i?void 0:i.id,author_id:null===(r=null==i?void 0:i.author)||void 0===r?void 0:r.id,rank:e+o,search_keyword:a.keyword,impr_id:null==n?void 0:n.impr_id,search_id:s})}))}else w.xq.handleSearchResultEmpty({search_keyword:a.keyword,impr_id:null==n?void 0:n.impr_id,search_id:s});o&&w.xq.handleSearch(Object.assign({search_id:s,search_keyword:a.keyword},o))})),(0,h.z)((e=>{var t,i;const o=null===(t=r.appContext)||void 0===t?void 0:t.user,n=this.seoModule.setSearchSEOProps(e,{language:r.lang},{pathname:x.Ad.searchVideo,input_keyword:a.keyword}),{has_more:l,cursor:p,item_list:m=[],extra:h,search_nil_info:_,suicide_prevent:v,search_nil_text:y,status_code:b}=e,f=[0,203,403].includes(b)?0:b;if(!m.length&&!l)return this.generateErrorState({search_nil_info:_,search_nil_text:y,suicide_prevent:v,state:s,key:"video",keyword:a.keyword,pathname:x.Ad.searchVideo,action$s:[n]});let k=[];k=1===(null==o?void 0:o.photoSensitiveVideosSetting)||!o&&1===g.photoSensitiveVideosSetting?m.filter((e=>4!==(null==e?void 0:e.maskType))).map((({id:e})=>e)):m.map((({id:e})=>e));const w=null!==(i=m.map((e=>{const{video:{id:t,playAddr:i=""}}=e;return{id:t,url:i}})))&&void 0!==i?i:[],S=(0,d.of)(this.itemList.getActions().setList({response:{itemList:m,hasMore:Boolean(l),statusCode:f},key:"search_video"}),this.getActions().addSearchResult({key:"video",result:{hasMore:Boolean(l),keyword:a.keyword,cursor:null!=p?p:0,error:null,items:k,loading:!1,rid:null!=u?u:null==h?void 0:h.logid,preloadList:w}}));return(0,c.T)(S,n)})),this.catchError({isEmpty:Boolean(p.length),state:s,keyword:a.keyword,teaParams:o,key:"video"}),(0,_.O)(this.getActions().setSearchLoading({key:"video",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"video",keyword:a.keyword})),(0,v.l)(this.getActions().setSearchLoading({key:"video",loading:!1}),this.terminate()),(0,y.R)(this.getAction$().dispose))})))}handleTopSearchReport({state:{data:e,totalLength:t,rid:i},teaParams:o,keyword:n}){return(0,b.b)((a=>{var r;const{data:s=[],log_pb:l,extra:d={}}=a,{logid:c}=d,p=null!==(r=null!=i?i:c)&&void 0!==r?r:"",{impr_id:u}=null!=l?l:{};if(s.length){const i=e.videoList.length,a=t-e.videoList.length,r=(null==o?void 0:o.enter_method)?k.W.commonParams.page_name:"search_outer";let l=0,d=0,c=0;s.forEach((e=>{var o,s,g,m;4===e.type?null===(o=e.user_list)||void 0===o||o.forEach((e=>{w.xq.handleSearchImpression({search_type:"general",enter_from:r,rank:a+d,item_rank:t+l,search_keyword:n,search_result_id:e.user_info.uid,impr_id:u,search_id:p}),l++,d++})):(w.xq.handleSearchVideoImpression({search_type:"general",enter_from:r,rank:i+c,item_rank:t+l,search_keyword:n,search_id:p,group_id:null===(s=e.item)||void 0===s?void 0:s.id,author_id:null===(m=null===(g=e.item)||void 0===g?void 0:g.author)||void 0===m?void 0:m.id,impr_id:u}),l++,c++)}))}else w.xq.handleSearchResultEmpty({search_keyword:n,impr_id:u,search_id:p});o&&w.xq.handleSearch(Object.assign({search_id:p,search_keyword:n},o))}))}catchError({isEmpty:e,teaParams:t,keyword:i,key:o,state:n}){return(0,f.K)((()=>e?(S.h.open({content:this.t("server_error_title"),duration:3,widthType:"half"}),(0,d.of)(this.noop())):(t&&w.xq.handleSearch(Object.assign({search_id:"",search_keyword:i},t)),(0,d.of)(this.getActions().setSearchResult({key:o,result:Object.assign(Object.assign({},n),{keyword:i,error:{type:-1}})})))))}generateErrorState(e){const{search_nil_info:t,search_nil_text:i,suicide_prevent:o,state:n,key:a,keyword:r,actions:s=[],action$s:l=[]}=e,{text_type:p}=null!=t?t:{text_type:10},u={type:p||10};switch(p){case 11:u.extra=o;break;case 12:u.extra=i}const g=(0,d.of)(this.getActions().setSearchResult({key:a,result:Object.assign(Object.assign({},n),{keyword:r,error:u})}),this.getActions().setShowTabs(11!==p),...s);return(0,c.T)(g,...l)}userConvertor(e,t,i){var o;return{user:(0,P.yk)(e,{search_id:t,impr_id:i}),stats:{uniqueId:null!==(o=e.unique_id)&&void 0!==o?o:"",stats:(0,P.u0)(e,!0)}}}};(0,n.__decorate)([(0,r.cQ)(),(0,n.__metadata)("design:type",p.y)],F.prototype,"dispose",void 0),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"setSearchResult",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"addSearchResult",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"addTopSearchResult",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"setSearchLoading",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"setShowTabs",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"setKeyword",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"resetSearchResult",null),(0,n.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"getTopSearch",null),(0,n.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"getUserSearch",null),(0,n.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],F.prototype,"getVideoSearch",null),F=(0,n.__decorate)([(0,s.Y)("Search"),(0,n.__param)(6,(0,l.t)(C.s)),(0,n.__metadata)("design:paramtypes",[E.o,L.z,O.q,A.h,I.P,T.G,Function])],F)},73080:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});var o=i(64047),n=i(57244),a=i(4206);let r=class{constructor(e){this.fetch=e}getTopSearch(e){return this.fetch.get("/api/search/general/full/",{query:e,baseUrlType:2})}getUserSearch(e){return this.fetch.get("/api/search/user/full/",{query:e,baseUrlType:2})}getVideoSearch(e){return this.fetch.get("/api/search/item/full/",{query:e,baseUrlType:2})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],r)},92311:(e,t,i)=>{"use strict";i.d(t,{q:()=>A});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(35167),l=(i(40096),i(82346)),d=i(58569),c=i(11348),p=i(60595),u=i(20948),g=i(49584),m=i(53095),h=i(68854),_=i(56979),v=i(35435),y=i(10026),b=i(5549),f=i(48782),x=i(21396),k=i(84785),w=i(42690),S=i(57244),j=i(54434),C=i(20738),P=i(41811),T=i(4206);const O=[...j.aF,...j.M1];let L=class{constructor(e,t){this.t=e,this.fetch=t}fetchSEOProps(e){var t,i,o,n;e.t=this.t;const a=null!==(i=null===(t=(0,j.bH)(e,O).seoProps)||void 0===t?void 0:t.metaParams)&&void 0!==i?i:{},r=null!==(n=null===(o=(0,j.Dj)(e,O).seoProps)||void 0===o?void 0:o.jsonldList)&&void 0!==n?n:[],s=Object.assign(Object.assign({},e.seoProps),{metaParams:a,jsonldList:r});return(0,l.of)(s)}getUA(){return window.navigator.userAgent}getTrafficType(){return(0,C.R)()}getLaunchMode(){return(0,P.c)()}fetchABTest(e){return this.fetch.get("/node-webapp/api/seo/ab-version",{query:{canonical:e},baseUrlType:2}).pipe((0,h.K)((()=>(0,l.of)({pageId:"-1",vidList:[],parameters:{}}))))}};L=(0,o.__decorate)([(0,S.G)(),(0,o.__param)(0,(0,s.t)(x.s)),(0,o.__metadata)("design:paramtypes",[Function,T.r])],L);const I=(e="")=>{try{return decodeURI(e)}catch(t){return e}};let A=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.appContext=t,this.sharingMeta=i,this.t=o,this.defaultState={metaParams:{},jsonldList:[],abtest:void 0,loading:!1,canonical:void 0,pageType:999,launchMode:void 0}}setSEOState(e,t){e.metaParams=t.metaParams,e.jsonldList=t.jsonldList}setAbTest(e,t){e.abtest=t}setLoading(e,t){e.loading=t}setCanonical(e,t){e.canonical=t}setLaunchMode(e,t){e.launchMode=t}setFeedSEOProps(e){return e.pipe((0,u.M)(this.appContext.state$),(0,g.z)((([e,t])=>{const{pageType:i,topic:o,topicType:n}=e,{lang:a="en"}=t,r={seoProps:{pageId:"",pageType:i},topic:o,topicType:n,language:a};return this.service.fetchSEOProps(r).pipe((0,m.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,h.K)((e=>(0,l.of)(this.noop(),this.terminate()))))})))}setGoLiveSEOProps(e){return e.pipe((0,u.M)(this.appContext.state$),(0,g.z)((([e,t])=>{var i;const{lang:o="en"}=t,n={seoProps:{pageId:"",pageType:14},user:null===(i=t.appContext)||void 0===i?void 0:i.user,language:o,t:this.t};return this.service.fetchSEOProps(n).pipe((0,m.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,h.K)((()=>(0,l.of)(this.noop()))))})))}setVideoSEOProps(e,t,i,o){var n,a,r;if(-1===e.statusCode)return(0,l.of)(this.noop());const s=null!==(r=null===(a=null===(n=null==e?void 0:e.itemInfo)||void 0===n?void 0:n.itemStruct)||void 0===a?void 0:a.id)&&void 0!==r?r:"",c=Object.assign(Object.assign(Object.assign({},e),t),{transcriptContent:o,seoProps:{pageId:s,pageType:0},t:this.t});return this.service.fetchSEOProps(c).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setVideoSharingMeta(t,e,i)))))}setSearchSharingSEOProps(e,t,i){if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:111},eventName:i,t:this.t});return this.service.fetchSEOProps(o).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setSearchSharingMeta(t,e,i)))))}setQuestionSEOProps(e,t,i,o,n){var a;if(-1===e.statusCode)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(a=e.questionInfo)||void 0===a?void 0:a.id,pageType:16},answers:i,t:this.t,items:n});return this.service.fetchSEOProps(r).pipe((0,m.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setQuestionSharingMeta(e,i[0],o)))))}setVideoPlaylistSEOProps(e,t){var i;if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(i=e.mixInfo)||void 0===i?void 0:i.id,pageType:119},t:this.t});return this.service.fetchSEOProps(o).pipe((0,m.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setVideoPlaylistSharingMeta(e)))))}setUserSEOProps(e,t,i){var o;const{userInfo:n,statusCode:a}=e,r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(o=null==n?void 0:n.user.id)&&void 0!==o?o:"",pageType:1},t:this.t,items:i});return-1===a?(0,l.of)(this.noop()):this.service.fetchSEOProps(r).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setUserSharingMeta(t,e)))))}setStickerSEOProps(e,t){var i,o,n;const{statusCode:a}=e;if(-1===a)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null!==(n=null===(o=null===(i=null==e?void 0:e.stickerInfo)||void 0===i?void 0:i.sticker)||void 0===o?void 0:o.id)&&void 0!==n?n:"",pageType:6},t:this.t});return this.service.fetchSEOProps(r).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setStickerSharingMeta(t,e)))))}setChallengeSEOProps(e,t,i){var o;const{statusCode:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:n,seoProps:{pageId:null===(o=e.challengeInfo)||void 0===o?void 0:o.challenge.id,pageType:3},t:this.t,items:i});return this.service.fetchSEOProps(a).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setChallengeSharingMeta(t,e)))))}setMusicSEOProps(e,t,i){var o;const{statusCode:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:n,seoProps:{pageId:null===(o=e.musicInfo)||void 0===o?void 0:o.music.id,pageType:4},items:i,t:this.t});return this.service.fetchSEOProps(a).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicSharingMeta(t,e)))))}setMusicPlaylistSEOProps(e,t){var i;const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{status_code:o,seoProps:{pageId:null===(i=e.mc_info)||void 0===i?void 0:i.id_str,pageType:17},t:this.t});return this.service.fetchSEOProps(n).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicPlaylistSharingMeta(t,e)))))}setKeywordExpansionSEOProps(e,t){const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:104},t:this.t});return this.service.fetchSEOProps(i).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setKeywordsExpansionSharingMeta(t,e,this.service.getUA())))))}setSearchSEOProps(e,t,i){const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{seoProps:{pageId:"",pageType:105},t:this.t});return this.service.fetchSEOProps(n).pipe((0,_.U)((e=>this.getActions().setSEOState(e))))}setLiveRoomSEOProps(e,t){var i;const{userInfo:o,statusCode:n}=e,a=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(i=null==o?void 0:o.user.id)&&void 0!==i?i:"",pageType:12},t:this.t});return-1===n?(0,l.of)(this.noop()):this.service.fetchSEOProps(a).pipe((0,m.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setLiveRoomSharingMeta(t,e)))))}setFollowingSEOProps(e,t){if(-1===e.statusCode)return(0,l.of)(this.noop());const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:11},t:this.t});return this.service.fetchSEOProps(i).pipe((0,m.z)((e=>(0,d.T)((0,l.of)(this.getActions().setSEOState(e)),this.sharingMeta.setFollowingSharingMeta(e)))))}setEventDetailSEOProps(e){return e.pipe((0,u.M)(this.appContext.state$),(0,g.z)((([e,t])=>{const{lang:i="en"}=t,{eventTitle:o,eventId:n,subscriberCount:a}=e,r={seoProps:{pageId:"",pageType:114},t:this.t,eventTitle:o,language:i,eventId:n,subscriberCount:a};return this.service.fetchSEOProps(r).pipe((0,m.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,h.K)((()=>(0,l.of)(this.noop()))))})))}fetchAbTest(e){return e.pipe((0,v.w)((e=>I(e)===I(this.state.canonical)?c.E:this.service.fetchABTest(e).pipe((0,v.w)((t=>(0,l.of)(this.getActions().setAbTest(t),this.getActions().setCanonical(e),this.terminate()))),(0,y.O)(this.getActions().setLoading(!0)),(0,b.l)(this.getActions().setLoading(!1))))))}getLaunchMode(e){return e.pipe((0,m.z)((()=>(0,l.of)(this.getActions().setLaunchMode(this.service.getLaunchMode()),this.terminate()))))}get stableState$(){return this.state$.pipe((0,f.h)((e=>!e.loading)))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setSEOState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setAbTest",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setCanonical",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setLaunchMode",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setFeedSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"setGoLiveSEOProps",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"setEventDetailSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"fetchAbTest",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"getLaunchMode",null),A=(0,o.__decorate)([(0,r.Y)("SEO"),(0,o.__param)(3,(0,s.t)(x.s)),(0,o.__metadata)("design:paramtypes",[L,k.G,w.I,Function])],A)},42690:(e,t,i)=>{"use strict";i.d(t,{I:()=>_});var o,n=i(64047),a=i(73566),r=i(48185),s=i(19630),l=i(35167),d=i(54268),c=i.n(d),p=i(82346);!function(e){e.APP_INFO={M_PACKAGE:"com.zhiliaoapp.musically",T_PACKAGE:"com.ss.android.ugc.trill",M_STORE:"835599320",T_STORE:"1235601864",M_NAME:"musical.ly",T_NAME:"TIKTOK",M_FACEBOOK_ID:"597615686992125",T_FACEBOOK_ID:"1862952583919182"},e.TTNOW_INFO={NAME:"TIKTOK.NOW",STORE_ID:"1641062073",PACKAGE:"com.ss.android.ugc.now",FACEBOOK_ID:"1243781563051427"}}(o||(o={}));var u=i(21396),g=i(2734),m=i(84785);const h="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png";let _=class extends a.D{constructor(e,t){super(),this.appContext=e,this.t=t,this.defaultState={value:{}}}setSharingMetaState(e,t){var i;e.value=c()(t,{"og:image":h,"twitter:image":null!==(i=t["og:image"])&&void 0!==i?i:h})}getBaseConfig(){var e;const t="m"===(null===(e=this.appContext.state.appContext)||void 0===e?void 0:e.appType);return{isM:t,protocal:t?"snssdk1233://":"snssdk1180://"}}getBaseMetaParams(e){var t,i,n,a;const{schema:r="",pageType:s,shareMeta:l,metaParams:d}=e,c=this.getBaseConfig(),{isM:p}=c,{APP_INFO:u}=o,g=p?u.M_NAME:u.T_NAME,m=p?u.M_STORE:u.T_STORE,h=p?u.M_PACKAGE:u.T_PACKAGE,_=0===s?null!==(t=null==l?void 0:l.title)&&void 0!==t?t:"":null!==(i=null==d?void 0:d.title)&&void 0!==i?i:"",v=0===s?null!==(n=null==l?void 0:l.desc)&&void 0!==n?n:"":null!==(a=null==d?void 0:d.description)&&void 0!==a?a:"",y={"al:ios:url":r,"al:android:url":r,"al:ios:app_store_id":m,"al:ios:app_name":g,"al:android:app_name":g,"al:android:package":h},b={"og:site_name":"TikTok","og:type":"website","og:title":_,"og:description":v,"fb:app_id":p?u.M_FACEBOOK_ID:u.T_FACEBOOK_ID},f={"twitter:app:id:iphone":m,"twitter:app:id:googleplay":h,"twitter:card":"summary","twitter:site":"TikTok","twitter:title":_,"twitter:description":v};return Object.assign(Object.assign(Object.assign({},y),b),f)}setVideoSharingMeta(e,t,i){var o,n,a,r,s,l,d,c,u,g,m,h,_,v;const{protocal:y}=this.getBaseConfig(),b=this.getBaseMetaParams({schema:`${y}aweme/detail/${null===(o=t.itemInfo)||void 0===o?void 0:o.itemStruct.id}?${i}`,metaParams:e.metaParams,pageType:0,shareMeta:null==t?void 0:t.shareMeta,response:t}),f=null===(n=t.itemInfo)||void 0===n?void 0:n.itemStruct.video,x=null===(a=t.itemInfo)||void 0===a?void 0:a.itemStruct.imagePost,k=null!==(c=x?null===(l=null===(s=null===(r=x.shareCover)||void 0===r?void 0:r.imageURL)||void 0===s?void 0:s.urlList)||void 0===l?void 0:l[1]:null===(d=null==f?void 0:f.shareCover)||void 0===d?void 0:d[1])&&void 0!==c?c:"",w=null!==(m=null!==(g=String(null===(u=null==x?void 0:x.shareCover)||void 0===u?void 0:u.imageWidth))&&void 0!==g?g:null==f?void 0:f.width)&&void 0!==m?m:"",S=null!==(v=null!==(_=String(null===(h=null==x?void 0:x.shareCover)||void 0===h?void 0:h.imageHeight))&&void 0!==_?_:null==f?void 0:f.height)&&void 0!==v?v:"",j=Object.assign(Object.assign({},b),{"og:image":k,"twitter:image":k,"og:image:width":w,"og:image:height":S});return(0,p.of)(this.getActions().setSharingMetaState(j))}setUserSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=this.getBaseMetaParams({response:t,pageType:1,schema:`${r}user/profile/`,metaParams:e.metaParams}),l=null===(i=t.userInfo)||void 0===i?void 0:i.user,d=null!==(n=null!==(o=null==l?void 0:l.avatarMedium)&&void 0!==o?o:null==l?void 0:l.avatarThumb)&&void 0!==n?n:h,c=Object.assign(Object.assign({},s),{"og:image":d,"twitter:image":d,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.getActions().setSharingMetaState(c))}setMusicSharingMeta(e,t){var i,o,n,a,r,s;const l=null===(i=t.musicInfo)||void 0===i?void 0:i.music,{protocal:d}=this.getBaseConfig(),c=this.getBaseMetaParams({response:t,pageType:4,schema:`${d}user/profile/${null==l?void 0:l.id}`,metaParams:e.metaParams}),u=null!==(n=null!==(o=null==l?void 0:l.coverMedium)&&void 0!==o?o:null==l?void 0:l.coverThumb)&&void 0!==n?n:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/music-default.png",g=null!==(a=null==l?void 0:l.title)&&void 0!==a?a:"",m=null!==(r=null==l?void 0:l.authorName)&&void 0!==r?r:"",h=Object.assign(Object.assign({},c),{"og:image":u,"twitter:image":u,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title,"music:duration":"0","music:album:track":g,"music:musician":m});return(0,p.of)(this.getActions().setSharingMetaState(h))}setMusicPlaylistSharingMeta(e,t){var i,o,n,a;const r=t.mc_info,{protocal:s}=this.getBaseConfig(),l=this.getBaseMetaParams({schema:`${s}assmusic/category/${null==r?void 0:r.id_str}?name=${encodeURIComponent(null!==(i=null==r?void 0:r.name)&&void 0!==i?i:"")}&previous_page=reflow_playlist&enter_method=reflow_return`,metaParams:Object.assign(Object.assign({},e.metaParams),{title:null===(o=null==r?void 0:r.share_info)||void 0===o?void 0:o.share_title,description:null===(n=null==r?void 0:r.share_info)||void 0===n?void 0:n.share_desc})}),d=(null==r?void 0:r.share_cover)?(0,g.ZT)(null==r?void 0:r.share_cover):"http://p19-aop-sg.ibyteimg.com/tos-alisg-i-yzb763657w-sg/d2f2b037e19646ad5f2bbd779a550302.png~tplv-yzb763657w-resize:800:800.jpeg",c=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.getActions().setSharingMetaState(c))}setStickerSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=null===(i=t.stickerInfo)||void 0===i?void 0:i.sticker,l=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}sticker/detail/${null==s?void 0:s.id}`,metaParams:e.metaParams}),d=null===(n=null===(o=null==s?void 0:s.coverUrls)||void 0===o?void 0:o.urlList)||void 0===n?void 0:n[0],c=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.getActions().setSharingMetaState(c))}setChallengeSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=null===(i=t.challengeInfo)||void 0===i?void 0:i.challenge,l=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}challenge/detail/${null==s?void 0:s.id}`,metaParams:e.metaParams}),d=null!==(n=null!==(o=null==s?void 0:s.profileMedium)&&void 0!==o?o:null==s?void 0:s.profileThumb)&&void 0!==n?n:"https://lf16-tiktok-web.ttwstatic.com/obj/ttfe-malisg/tiktok_web/amp/m-hashtag-default.png",c=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,p.of)(this.getActions().setSharingMetaState(c))}setMessageSharingMeta(e){var t,i;const{protocal:o}=this.getBaseConfig(),n=e.shareMeta,a=this.getBaseMetaParams({pageType:13,response:e,schema:`${o}messages/group/`,metaParams:{title:null==n?void 0:n.title,description:null==n?void 0:n.desc}}),r=null!==(t=null==e?void 0:e.cover)&&void 0!==t?t:"",s=Object.assign(Object.assign({},a),{"og:image":r,"twitter:image":r,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(i=e.shareMeta)||void 0===i?void 0:i.title});return(0,p.of)(this.getActions().setSharingMetaState(s))}setKeywordsExpansionSharingMeta(e,t,i){var o,n,a,r,s;const{protocal:l}=this.getBaseConfig(),d=this.getBaseMetaParams({schema:`${l}user/profile/`,metaParams:e.metaParams,pageType:104,response:{keywordInfo:t}}),[c="",u="",g=""]=null!==(r=null===(a=null===(n=null===(o=t.itemResponse)||void 0===o?void 0:o.itemList)||void 0===n?void 0:n[0])||void 0===a?void 0:a.video.shareCover)&&void 0!==r?r:[],m=i.includes("WhatsApp")||i.includes("line-poker")?u:g,h=Object.assign(Object.assign({},d),{"og:image":m,"twitter:image":m,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,p.of)(this.getActions().setSharingMetaState(h))}setSearchSharingMeta(e,t,i){var o,n,a,r;const{protocal:s}=this.getBaseConfig(),l=this.getBaseMetaParams({schema:`${s}search?keyword=${null!==(n=null===(o=null==t?void 0:t.contentInfo)||void 0===o?void 0:o.query)&&void 0!==n?n:i}`,metaParams:e.metaParams}),d=null!==(r=null===(a=null==t?void 0:t.contentInfo)||void 0===a?void 0:a.thirdPartyPreviewImg)&&void 0!==r?r:"https://sf16-muse-va.ibytedtos.com/obj/search-static-maliva/maliva/ugvonpsj1631257573250",c=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"1200","og:image:height":"678"});return(0,p.of)(this.getActions().setSharingMetaState(c))}setLiveRoomSharingMeta(e,t){var i,o,n,a,r,s,l;const{protocal:d}=this.getBaseConfig(),c=this.getBaseMetaParams({schema:`${d}live?room_id=${null===(o=null===(i=t.userInfo)||void 0===i?void 0:i.user)||void 0===o?void 0:o.roomId}`,metaParams:e.metaParams,pageType:12}),u=null===(n=t.userInfo)||void 0===n?void 0:n.user,g=null!==(r=null!==(a=null==u?void 0:u.avatarMedium)&&void 0!==a?a:null==u?void 0:u.avatarThumb)&&void 0!==r?r:h,m=null!==(s=null==u?void 0:u.nickname)&&void 0!==s?s:null==u?void 0:u.uniqueId,_=null==u?void 0:u.uniqueId,v=Object.assign(Object.assign({},c),{"og:image":g,"og:image:secure_url":g,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(l=e.metaParams)||void 0===l?void 0:l.title,"twitter:creator":m,"twitter:creator:id":_});return(0,p.of)(this.getActions().setSharingMetaState(v))}setQuestionSharingMeta(e,t,i){var o,n,a,r,s,l,d,c;const{protocal:p}=this.getBaseConfig(),u=this.getBaseMetaParams({schema:`${p}qna/detail/${null===(o=e.questionInfo)||void 0===o?void 0:o.id}`,metaParams:{title:null===(n=e.shareMeta)||void 0===n?void 0:n.title,description:null===(a=e.shareMeta)||void 0===a?void 0:a.desc},pageType:16,response:e}),g="qna"===(null===(r=i)||void 0===r?void 0:r.scene)?{"og:title":this.t("qaoop_title",{},"Hi friends, Im inviting you to answer a question on #TikTok!"),"og:description":this.t("qaoop_desc",{},"Share your wisdom!")}:void 0,m=null!==(l=null===(s=null==t?void 0:t.video.shareCover)||void 0===s?void 0:s[1])&&void 0!==l?l:h,_=Object.assign(Object.assign(Object.assign({},u),{"og:image":m,"twitter:image":m,"og:image:alt":null!==(c=null===(d=e.shareMeta)||void 0===d?void 0:d.title)&&void 0!==c?c:"the cover of first video"}),g);return this.getActions().setSharingMetaState(_)}setVideoPlaylistSharingMeta(e){var t,i,o,n,a,r,s,l;const{protocal:d}=this.getBaseConfig(),c=`@${null===(i=null===(t=e.mixInfo)||void 0===t?void 0:t.creator)||void 0===i?void 0:i.nickname}`,p=null!==(n=null===(o=e.mixInfo)||void 0===o?void 0:o.name)&&void 0!==n?n:"Untitled playlist",u=this.getBaseMetaParams({schema:`${d}mix/detail?id=${null!==(r=null===(a=e.mixInfo)||void 0===a?void 0:a.id)&&void 0!==r?r:"nan"}`,metaParams:{title:this.t("playlist_share_title",{Playlist_name:p,username:c},`Playlist ${p} created by ${c}`),description:this.t("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!")},pageType:119,response:e}),{videoList:g=[]}=e,[m]=g,h=Object.assign(Object.assign({},u),{"og:image":null===(s=null==m?void 0:m.video.shareCover)||void 0===s?void 0:s[1],"twitter:image":null===(l=null==m?void 0:m.video.shareCover)||void 0===l?void 0:l[1],"og:image:alt":`first video of ${p}`});return this.getActions().setSharingMetaState(h)}setFollowingSharingMeta(e){const t=this.getBaseMetaParams({metaParams:e.metaParams}),i=Object.assign(Object.assign({},t),{"og:title":this.t("serp_following_title"),"og:description":this.t("serp_following_desc"),"og:image":h,"twitter:image":h,"twitter:title":this.t("SEO_following_title"),"twitter:description":this.t("SEO_following_desc")});return(0,p.of)(this.getActions().setSharingMetaState(i))}};(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"setSharingMetaState",null),_=(0,n.__decorate)([(0,s.Y)("SharingMeta"),(0,n.__param)(1,(0,l.t)(u.s)),(0,n.__metadata)("design:paramtypes",[m.G,Function])],_)},70756:(e,t,i)=>{"use strict";i.d(t,{ot:()=>a});var o=i(90293),n=i(21041);function a(e,t={}){var i;const{search:a}=(0,n.TH)(),r=t.disableAutoLang?"":null!==(i=(0,o.parse)(a).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:i,query:Object.assign({lang:r},n)},Object.assign({skipEmptyString:!0},t))}const{pathname:s="",search:l={},hash:d}=e,c=d?`#${d}`:"";return`${(0,o.stringifyUrl)({url:s,query:Object.assign({lang:r},l)},Object.assign({skipEmptyString:!0},t))}${c}`}},77107:(e,t,i)=>{"use strict";i.d(t,{v:()=>l});var o=i(64047),n=i(11040),a=i(91051),r=i(73487),s=i(70756);const l=(0,a.memo)((0,a.forwardRef)((function(e,t){var{forceSSR:i=!1,to:l,replace:d,onClick:c,children:p,disableAutoLang:u,disabled:g}=e,m=(0,o.__rest)(e,["forceSSR","to","replace","onClick","children","disableAutoLang","disabled"]);const h=i,_=(0,s.ot)(l,{disableAutoLang:u}),v=(0,a.useCallback)((e=>{if(g)return e.preventDefault(),void e.stopPropagation();null==c||c(e),h&&d&&(e.preventDefault(),e.stopPropagation(),location.replace(_))}),[_,c,d,h,g]);return h?(0,n.jsx)("a",Object.assign({ref:t,href:_},m,{onClick:v},{children:p}),void 0):(0,n.jsx)(r.rU,Object.assign({ref:t,to:_},m,{onClick:v},{children:p}),void 0)})))},97103:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});var o=i(90293);function n({to:e,location:{search:t}={search:""}},i={}){var n;const a=null!==(n=(0,o.parse)(t).lang)&&void 0!==n?n:"";if("string"==typeof e){const{url:t,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:t,query:Object.assign({lang:a},n)},Object.assign({skipEmptyString:!0},i))}const{pathname:r="",search:s={},hash:l}=e,d=l?`#${l}`:"";return`${(0,o.stringifyUrl)({url:r,query:Object.assign({lang:a},s)},Object.assign({skipEmptyString:!0},i))}${d}`}},33104:(e,t,i)=>{"use strict";i.d(t,{p:()=>l,w:()=>c});var o=i(9236),n=i(91051),a=i(8721),r=i(34708),s=i(24878);function l(e=""){return(0,o.mp)(s.z,{selector:t=>t.users[e],dependencies:[e]})}const d={[-1]:"Follow",0:"Follow",1:"Following",3:"requested",2:"friends",4:"webapp_unblocked_button1",5:"Follow",6:"Follow"};function c({uniqueId:e,followerStatus:t,prevent:i,onNeedLogin:l,teaParams:c={}}){const p=(0,r.L)((()=>["user"]),[]),u=Boolean(null==p?void 0:p.user),[{relation:g,secUid:m},h]=(0,o.b7)(s.z,{selector:t=>{var i,o,n,a;return{relation:null!==(o=null===(i=t.users[e])||void 0===i?void 0:i.relation)&&void 0!==o?o:-1,secUid:null!==(a=null===(n=t.users[e])||void 0===n?void 0:n.secUid)&&void 0!==a?a:""}},dependencies:[e]}),_=(0,n.useCallback)((t=>{if(i&&(t.preventDefault(),t.stopPropagation()),!u)return null==l?void 0:l();4!==g?h.postCommitFollowUser(Object.assign({uniqueId:e},c)):h.blockOrUnblockUser({uniqueId:e,secUid:m,isBlock:!0})}),[h,u,l,i,c,e,m,g]),v=(0,a.Q)()(((e,t)=>{if(1===t){if(e<1)return"Inbox_Follow_back";if(1===e)return d[2]}return d[e]})(g,t));return{isFollowing:1===g||2===g,text:v,handleFollow:_,relation:g}}},24878:(e,t,i)=>{"use strict";i.d(t,{z:()=>N});var o,n,a=i(64047),r=i(73566),s=i(48185),l=i(19630),d=i(35167),c=i(19818),p=i.n(c),u=i(64145),g=i.n(u),m=i(82346),h=i(11348),_=i(50986),v=i(60595),y=i(35435),b=i(93859),f=i(53095),x=i(96033),k=i(20948),w=i(56979),S=i(45784),j=i(10026),C=i(49584),P=i(93797);!function(e){e.Follow="follow",e.Unfollow="unfollow"}(o||(o={})),function(e){e.FollowButton="follow_button",e.Card="card",e.DirectButton="direct_btn",e.SuggestedAccountButton="suggested_account_btn",e.ToolBarButton="toolbar_btn",e.Notice="notice",e.UserProfile="user_profile",e.Follower="follower",e.Following="following",e.SuggestedCard="suggested_card",e.SuggestedList="suggested_list"}(n||(n={}));var T,O=i(35468),L=i(47165),I=i(90035),A=i(21396),E=i(2734),M=i(63308);function R({relation:e,handleIsUnfollow:t,handleIsFollow:i}){switch(e){case 0:case-1:case 4:case 5:case 6:return t();default:return i()}}function F({current:e,targetUser:t}){const i=function(e){var t;return R({relation:null!==(t=e.relation)&&void 0!==t?t:-1,handleIsUnfollow:()=>{var t;return e.privateAccount?1:(null===(t=e.extraInfo)||void 0===t?void 0:t.followed)||6===e.relation?2:0},handleIsFollow:()=>3})}(t);switch(i){case 3:return 0;case 0:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>1});case 1:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>3});case 2:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>2})}}function D(e,t){return 2===e||6===e||5!==e&&t}!function(e){e[e.FollowNormal=0]="FollowNormal",e[e.FollowPrivate=1]="FollowPrivate",e[e.FollowFollower=2]="FollowFollower",e[e.Unfollow=3]="Unfollow"}(T||(T={}));const B=["roomId"],z=["uniqueId","avatarThumb","nickname","signature"];let N=class extends r.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={users:{},stats:{}}}multiSetUser(e,t){const i={};return t.forEach((t=>{i[t.uniqueId]=this.getUpdatedUser(e.users[t.uniqueId],t)})),Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),i)})}setUser(e,t){return Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),{[t.uniqueId]:this.getUpdatedUser(e.users[t.uniqueId],t,!0)})})}setUserRelation(e,{uniqueId:t,relation:i,shouldUpdateFollowed:o}){var n;const a=e.users[t];a&&(a.relation=i,o&&(a.extraInfo=Object.assign(Object.assign({},a.extraInfo),{followed:D(i,null===(n=a.extraInfo)||void 0===n?void 0:n.followed)})))}setUserStats(e,t){const{uniqueId:i,stats:o}=t;e.stats[i]=this.getUpdatedUserStats(e.stats[i],o)}multiSetUserStats(e,t){t.forEach((({uniqueId:t,stats:i})=>{e.stats[t]=i}))}getUserDetail(e){return e.pipe((0,y.w)((e=>this.service.getUserDetail(e).pipe((0,b.b)((e=>{(0!==e.statusCode&&10222!==e.statusCode||!e.userInfo)&&console.warn("Get user detail failed for getting wrong response")})),(0,f.z)((e=>0!==e.statusCode&&10222!==e.statusCode||!e.userInfo?h.E:(0,m.of)(this.getActions().setUser(Object.assign(Object.assign({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),this.getActions().setUserStats({stats:Object.assign(Object.assign({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})))),(0,L.n)({})))))}postCommitFollowUser(e){return e.pipe((0,x.v)((({uniqueId:e})=>e)),(0,f.z)((e=>e.pipe((0,k.M)(this.state$),(0,w.U)((([e,t])=>{const i=t.users[e.uniqueId],{id:o,secUid:n="",relation:r=-1}=i,s=function(e){return R({relation:e,handleIsUnfollow:()=>1,handleIsFollow:()=>0})}(r),l={type:s,user_id:o,sec_user_id:n,from:18,channel_id:0,from_pre:0},{uniqueId:d,group_id:c,enter_method:p="click_direct_btn",action_position:u}=e;return{query:l,type:s,group_id:c,enter_method:p,action_position:u,restReportParams:(0,a.__rest)(e,["uniqueId","group_id","enter_method","action_position"]),id:o,uniqueId:d,relation:r,targetUser:i}})),(0,S.g)("type"),(0,y.w)((({query:e,group_id:t,enter_method:i,action_position:o,restReportParams:n,id:a,uniqueId:r,relation:s,targetUser:l})=>this.service.postCommitFollowUser(e).pipe((0,b.b)((({status_code:r,follow_status:s})=>{24===r?O.h.open({content:this.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):-1===r?O.h.open({content:this.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):0!==r?O.h.open({content:this.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,I.k)(r,[24,-1,0]),((e,t)=>{const i=0===t?"unfollow":"follow";P.W.event(i,e)})(Object.assign(Object.assign({},n),{status_code:r,follow_status:s,group_id:t,enter_method:i,action_position:o,to_user_id:a,author_id:a,follow_type:2===s?"mutual":"single",tab_name:null,is_private:4===s?1:0}),e.type)})),(0,w.U)((({follow_status:e,status_code:t})=>0===t?this.getActions().setUserRelation({uniqueId:r,relation:E.Bm[e],shouldUpdateFollowed:!0}):this.getActions().setUserRelation({uniqueId:r,relation:s}))),(0,j.O)(this.getActions().setUserRelation({uniqueId:r,relation:F({current:s,targetUser:l})})),(0,L.n)({}))))))))}blockOrUnblockUser(e){return e.pipe((0,C.z)((({secUid:e,isBlock:t,uniqueId:i})=>this.service.blockUser({sec_user_id:null!=e?e:"",block_type:t?0:1}).pipe((0,b.b)((({status_code:e})=>{0===e&&O.h.open({content:this.t(t?"webapp_mig_unblocked":"webapp_mig_blocked"),duration:3,e2eTag:"block-toast"})})),(0,w.U)((({status_code:e})=>0===e?this.getActions().setUserRelation({uniqueId:i,relation:t?0:4}):this.noop())),(0,L.n)({})))))}getLiveStatus(e){return e.pipe((0,y.w)((()=>(0,_.F)(6e5).pipe((0,k.M)(this.state$),(0,w.U)((([e,{users:t}])=>Object.values(t).filter((e=>Boolean(null==e?void 0:e.roomId))))),(0,f.z)((e=>(0,m.of)(...e.map((e=>this.getActions().getUserDetail({secUid:null==e?void 0:e.secUid}))))))))))}getUpdatedUser(e,t,i){var o,n;if(!e)return t;const a=null!==(o=t.relation)&&void 0!==o?o:e.relation;return g()({},e,t,{extraInfo:{followed:D(a,null===(n=e.extraInfo)||void 0===n?void 0:n.followed)}},((e,t,o)=>!B.includes(o)&&p()(t)||!i&&z.includes(o)?e:"uniqueIdModifyTime"!==o&&"ttSeller"!==o&&"nickNameModifyTime"!==o||t?void 0:e))}getUpdatedUserStats(e,t){return t}};(0,a.__decorate)([(0,s.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUser",null),(0,a.__decorate)([(0,s.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUser",null),(0,a.__decorate)([(0,s.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserRelation",null),(0,a.__decorate)([(0,s.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserStats",null),(0,a.__decorate)([(0,s.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUserStats",null),(0,a.__decorate)([(0,s.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getUserDetail",null),(0,a.__decorate)([(0,s.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"postCommitFollowUser",null),(0,a.__decorate)([(0,s.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"blockOrUnblockUser",null),(0,a.__decorate)([(0,s.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getLiveStatus",null),N=(0,a.__decorate)([(0,l.Y)("UserModule"),(0,a.__param)(1,(0,d.t)(A.s)),(0,a.__metadata)("design:paramtypes",[M.K,Function])],N)},63308:(e,t,i)=>{"use strict";i.d(t,{K:()=>s});var o=i(64047),n=i(57244),a=i(30626),r=i(4206);let s=class{constructor(e){this.fetch=e}getUserDetail(e){return this.fetch.get("/api/user/detail/",{query:e})}postCommitFollowUser(e){return this.fetch.post("/api/commit/follow/user/",{query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}blockUser(e){return this.fetch.post("/api/user/block/",{query:Object.assign(Object.assign({},e),{source:3}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[r.r])],s)},21137:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={enterForyou:!1}}setEnterForyou(e,t){e.enterForyou=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setEnterForyou",null),s=(0,o.__decorate)([(0,r.Y)("VideoAsForyou")],s)},81578:(e,t,i)=>{"use strict";i.d(t,{P:()=>y});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(20948),l=i(49584),d=i(82346),c=i(56979),p=i(60595),u=i(13033),g=i(84785),m=i(57244),h=i(30626),_=i(4206);let v=class{constructor(e){this.fetch=e}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[h.eD]:this.fetch.csrfToken},baseUrlType:2})}};v=(0,o.__decorate)([(0,m.G)(),(0,o.__metadata)("design:paramtypes",[_.r])],v);let y=class extends n.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={photoSensitiveVideosSetting:u.F3.getItem("photo_sensitive_video_setting"),hideMaskTempVideoId:"",loginStatePhotoSensitiveVideosSetting:void 0,hasClosedVideoMask:!1}}setSkipPhotoSensitiveAction(e,t){const{skipPhotoSensitiveVideo:i,login:o=!1}=t,n=i?1:2;e.photoSensitiveVideosSetting=n,o&&(e.loginStatePhotoSensitiveVideosSetting=n)}setHideMaskTempVideoId(e,t){e.hideMaskTempVideoId=t}setHasClosedMask(e,t){e.hasClosedVideoMask=t}setPhotoSensitiveVideosSetting(e,t){e.photoSensitiveVideosSetting=t}setLoginStatePhotoSensitiveVideosSetting(e,t){e.loginStatePhotoSensitiveVideosSetting=t}setSkipPhotoSensitive(e){return e.pipe((0,s.M)(this.appContext.state$),(0,l.z)((([e,{appContext:t}])=>{const i=e?1:2;return u.F3.setItem("photo_sensitive_video_setting",i),(null==t?void 0:t.user)?this.service.postUserSetting({field:"photosensitive_videos_setting",value:i}).pipe((0,c.U)((({status_code:t})=>0===t?this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e,login:!0}):this.noop()))):(0,d.of)(this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setSkipPhotoSensitiveAction",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setHideMaskTempVideoId",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setHasClosedMask",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setPhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setLoginStatePhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setSkipPhotoSensitive",null),y=(0,o.__decorate)([(0,r.Y)("VideoMaskModule"),(0,o.__metadata)("design:paramtypes",[v,g.G])],y)},56785:(e,t,i)=>{"use strict";i.d(t,{x:()=>s});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={mute:!0,loop:!0,muteSetting:!0,playing:!0,volume:0}}setMute(e,t){e.mute=t}setVolume(e,t){e.volume=Math.min(Math.max(0,t),1)}setMuteSetting(e,t){e.muteSetting=t}setPlaying(e,t){e.playing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setMute",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setVolume",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setMuteSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setPlaying",null),s=(0,o.__decorate)([(0,r.Y)("BasicPlayer")],s)},83421:(e,t,i)=>{"use strict";i.d(t,{f:()=>g});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(60595),l=i(93859),d=i(56979),c=i(66688),p=i(37326),u=i(97913);let g=class extends n.D{constructor(e,t,i){super(),this.reporter=e,this.qualityReporter=t,this.preloadUtil=i,this.defaultState={prevVideo:null,currentVideo:null,playProgress:null,vv_time:0}}setCurrentVideo(e,t){var i;e.prevVideo=e.currentVideo,e.currentVideo=t.currentVideo,e.playProgress=t.playProgress,e.current_mode=null===(i=t.currentVideo)||void 0===i?void 0:i.mode}updateVVTime(e){const t=e.vv_time+1;t<=20&&(e.vv_time=t)}updateVideo(e){return e.pipe((0,l.b)((e=>{const{currentVideo:{id:t,index:i},teaParams:{isThreeColumnAuto:o=!1,isVideoDetail:n=!1,enterMethod:a=""}={}}=e;this.reporter.setIsThreeColumnAuto(o),this.reporter.setEnterMethod(a),this.reporter.setIsVideoDetail(n),this.qualityReporter.setCurrentVideoId(null!=t?t:""),this.preloadUtil.setPreloadIndex(i),this.reporter.reset()})),(0,d.U)((e=>this.getActions().setCurrentVideo(e))))}updateVideoFocusTime(e){return e.pipe((0,l.b)((({blurTime:e})=>{this.reporter.updateVideoFocusTime(e)})),(0,d.U)((()=>this.noop())))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setCurrentVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVVTime",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideoFocusTime",null),g=(0,o.__decorate)([(0,r.Y)("VideoPlayer"),(0,o.__metadata)("design:paramtypes",[c.e,p.k,u.Re])],g)},59501:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});var o=i(12579),n=i(25615),a=i.n(n);const r={provide:new o.O("FirstVideoCover"),useValue:a()}},74472:(e,t,i)=>{"use strict";i.d(t,{n:()=>F,h:()=>B});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(35167),l=(i(19805),i(63811)),d=i.n(l),c=i(80390),p=i.n(c),u=i(82346),g=i(60595),m=i(68854),h=i(53095),_=i(5549),v=i(49584),y=i(93859),b=i(58755),f=i(56979),x=i(35435),k=i(20948),w=i(10026),S=i(12167),j=i(12285),C=i(37326),P=i(35468),T=i(21396),O=i(91506),L=i(17230),I=i(84785),A=i(81578),E=i(76967),M=i(59501),R=i(89797);const F=Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0",preloadList:[]});let D=-1,B=class extends n.D{constructor(e,t,i,o,n,a,r){super(),this.service=e,this.item=t,this.videoQualityReporter=i,this.appContext=o,this.videoMask=n,this.t=a,this.getFirstVideoCover=r,this.defaultState={},this.createItemListErrorCatcher=e=>t=>t.pipe((0,m.K)((t=>(P.h.destroy(),P.h.open({content:this.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,u.of)({statusCode:-1}))))),this.getBrowserList=({list:e})=>e.reduce(((e,{id:t,showNotPass:i,takeDown:o})=>(i||6===o||e.push(t),e)),[])}resetItemList(e,t){const{key:i,hasMore:o=!0,loading:n=!0,cursor:a="0"}=t;e[i]={list:[],browserList:[],loading:n,statusCode:0,hasMore:o,cursor:a,preloadList:[]}}addItemList(e,t){var i;const{key:o,list:n,statusCode:a=0,hasMore:r,cursor:s,level:l,preloadList:c}=t,u="topic"===o||"messages"===o;e[o]||(e[o]={list:[],browserList:[],loading:!1,statusCode:a,hasMore:Boolean(r),cursor:s,preloadList:[]});const g=e[o].list,m=p()(n,"id").filter((e=>!g.includes(e.id))),h=d()(e[o].list,m.map((({id:e})=>e)));e[o].list=u?g.concat(n.map((({id:e})=>e))):h,e[o].browserList=u?e[o].browserList.concat(this.getBrowserList({list:n})):d()(e[o].browserList,this.getBrowserList({list:m})),e[o].statusCode=a,e[o].hasMore=r,e[o].cursor=s,e[o].level=l,e[o].preloadList=(null!==(i=e[o].preloadList)&&void 0!==i?i:[]).concat(null!=c?c:[])}setItemListById(e,t){const{key:i,list:o,statusCode:n=0,hasMore:a=!0,cursor:r,level:s}=t;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:n,hasMore:Boolean(a),cursor:r,preloadList:[]}),e[i].list=o,e[i].browserList=o,e[i].statusCode=n,e[i].hasMore=a,e[i].cursor=r,e[i].level=s}setLoading(e,t){const{loading:i,key:o}=t;e[o]||(e[o]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[o].loading=i}setListKeyword(e,t){const{keyword:i,key:o}=t;e[o]||(e[o]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[o].keyword=i}getRecommendList(e){return e.pipe((0,h.z)((e=>this.getRecommendList$(e).pipe((0,_.l)(this.terminate())))))}getRecommendList$(e){return(0,u.of)(e).pipe((0,v.z)((({itemId:e,key:t,disableReport:i})=>(0,u.of)(null).pipe((0,y.b)((()=>{i||(D=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,h.z)((()=>this.service.getRecommendList({aid:L.CO,count:L.lK,insertedItemID:e}))),(0,b.V)(L.ES),(0,y.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-D,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData(t)))))}getRelatedList(e){return e.pipe((0,h.z)((e=>this.getRelatedList$(e).pipe((0,_.l)(this.terminate())))))}getRelatedList$(e){return(0,u.of)(e).pipe((0,v.z)((({itemId:e="",key:t,disableReport:i})=>(0,u.of)(null).pipe((0,y.b)((()=>{i||(D=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,h.z)((()=>this.service.getRelatedList({aid:L.CO,count:16,itemID:e}))),(0,b.V)(L.ES),(0,f.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),(0,y.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-D,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData(t)))))}getTopicList(e){return e.pipe((0,x.w)((({topic:e,language:t})=>this.service.getTopicList({topic:e,language:t,count:L._T,aid:L.CO}).pipe((0,f.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),this.createItemListErrorCatcher(),this.handleListData("topic"),(0,_.l)(this.terminate())))))}getFollowingList(e){return e.pipe((0,k.M)(this.state$),(0,v.z)((([{language:e,pullType:t=1},i])=>{var o;const{cursor:n="",level:a=1}=null!==(o=i.following)&&void 0!==o?o:{};return this.service.getFollowingList({aid:L.CO,count:L.kg,language:e,cursor:n,pullType:t,level:a}).pipe(this.createItemListErrorCatcher(),this.handleListData("following"))})))}getMusicList(e){return e.pipe((0,h.z)((e=>this.getMusicList$(e))))}getMusicList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{musicID:e,language:t},i])=>{var o,n;return this.service.getMusicList({musicID:e,language:t,cursor:null!==(n=null===(o=i.music)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:L.CO,count:L.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("music"))})))}getQuestionList(e){return e.pipe((0,h.z)((e=>this.getQuestionList$(e))))}getQuestionList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{questionID:e,language:t},i])=>{var o,n;return this.service.getQuestionList({questionID:e,language:t,cursor:null!==(n=null===(o=i.question)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:L.CO,count:L.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("question"))})))}getChallengeList(e){return e.pipe((0,h.z)((e=>this.getChallengeList$(e))))}getChallengeList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{challengeID:e,language:t="en"},i])=>{var o,n;return this.service.getChallengeList({challengeID:e,language:t,cursor:null!==(n=null===(o=i.challenge)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:L.CO,count:L.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("challenge"))})))}getUserVideoList(e){return e.pipe((0,h.z)((e=>this.getUserVideoList$(e))))}getUserVideoList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,x.w)((([{secUid:e,language:t,key:i,userId:o},n])=>{var a,r;const s={secUid:e,aid:L.CO,count:L.jd,cursor:null!==(r=null===(a=n[i])||void 0===a?void 0:a.cursor)&&void 0!==r?r:"0",language:t,userId:o};return("user-post"===i?this.service.getUserPostList(s):this.service.getUserLikedList(s)).pipe(this.createItemListErrorCatcher(),this.handleListData(i,{secUid:e}))})))}setDeleteVideo(e,t){for(const i of Object.keys(e)){const o=e[i];if(o){const n=o.list.filter((e=>e!==t));e[i].list=n,e[i].browserList=o.browserList.filter((e=>e!==t))}}}setList(e){return e.pipe((0,k.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,y.b)((([{key:e,response:t,disableReportMore:i=!1},o])=>{var n,a,r;(null!==(a=null===(n=o[e])||void 0===n?void 0:n.list)&&void 0!==a?a:[]).length&&!i&&j.r.handleListMore({is_success:(null===(r=t.itemList)||void 0===r?void 0:r.length)?1:0,error_code:t.statusCode})})),(0,f.U)((([{key:e,response:t,otherInfo:i},o,n,a])=>{var r,s;const{itemList:l=[]}=t,{sgOpen:d,user:c}=null!==(r=n.appContext)&&void 0!==r?r:{};return 1!==(null==c?void 0:c.photoSensitiveVideosSetting)&&(c||1!==a.photoSensitiveVideosSetting)||"user-post"===e&&(null==c?void 0:c.secUid)===(null==i?void 0:i.secUid)||!("video"!==e||l.length>1)||(t.itemList=l.filter((e=>4!==(null==e?void 0:e.maskType)))),null===(s=t.itemList)||void 0===s||s.forEach((e=>{((e,t)=>{if((0,E.e)(e)&&!e.forFriend||e.scheduleTime){const i=e.takeDown?"":e.video.cover;if(!/\/node-a\/video\/playsv/.test(i)){const o=(0,O.X)({src:i,sgOpen:t});e.video.cover=o}e.video.zoomCover=void 0}})(e,d)})),{key:e,response:t}})),(0,y.b)((({key:e,response:t})=>{})),(0,h.z)((({key:e,response:t})=>{const{itemList:i=[],statusCode:o=0,hasMore:n=!1,cursor:a="0",level:r}=t,s=i.map((e=>{var t,i,o,n;return{url:null!==(i=null===(t=e.video)||void 0===t?void 0:t.playAddr)&&void 0!==i?i:"",id:null!==(n=null===(o=e.video)||void 0===o?void 0:o.id)&&void 0!==n?n:""}}));return 0===o||10404===o?(0,u.of)(...this.item.addItems(i),this.getActions().addItemList({key:e,list:i,statusCode:o,hasMore:n,cursor:a,level:r,preloadList:s})):(0,u.of)(this.getActions().addItemList({key:e,list:[],statusCode:o,hasMore:!0,preloadList:s}))})))}handleListData(e,t){return i=>i.pipe((0,b.V)(L.ES),(0,f.U)((i=>this.getActions().setList({key:e,response:i,otherInfo:t}))),(0,w.O)(this.getActions().setLoading({key:e,loading:!0})),(0,_.l)(this.getActions().setLoading({key:e,loading:!1})),(0,S.R)(this.dispose$))}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",g.y)],B.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"resetItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"addItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setItemListById",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setListKeyword",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getRelatedList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getTopicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getMusicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getQuestionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getChallengeList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getUserVideoList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setDeleteVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setList",null),B=(0,o.__decorate)([(0,r.Y)("ItemList"),(0,o.__param)(5,(0,s.t)(T.s)),(0,o.__param)(6,(0,s.t)(M.W.provide)),(0,o.__metadata)("design:paramtypes",[R.N,E.A,C.k,I.G,A.P,Function,Function])],B)},89797:(e,t,i)=>{"use strict";i.d(t,{N:()=>s});var o=i(64047),n=i(57244),a=i(4206),r=i(59501);let s=class{constructor(e){this.fetch=e}getRecommendList(e){return this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})}getRelatedList(e){return this.fetch.get("/api/related/item_list/",{query:e,baseUrlType:2})}getTopicList(e){return this.fetch.get("/api/topic/item_list/",{query:e,baseUrlType:2})}getFollowingList(e){return this.fetch.get("/api/following/item_list/",{query:e,baseUrlType:2})}getMusicList(e){return this.fetch.get("/api/music/item_list/",{query:e,baseUrlType:2})}getQuestionList(e){return this.fetch.get("/api/question/item_list/",{query:e,baseUrlType:2})}getChallengeList(e){return this.fetch.get("/api/challenge/item_list/",{query:e,baseUrlType:2})}getUserPostList(e){return this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:2})}getUserLikedList(e){return this.fetch.get("/api/favorite/item_list/",{query:e,baseUrlType:2})}};s=(0,o.__decorate)([(0,n.G)({providers:[r.W]}),(0,o.__metadata)("design:paramtypes",[a.r])],s)},76967:(e,t,i)=>{"use strict";i.d(t,{A:()=>D,e:()=>F});var o,n=i(64047),a=i(73566),r=i(48185),s=i(19630),l=i(35167),d=i(57001),c=i.n(d),p=i(5238),u=i(11348),g=i(82346),m=i(94328),h=i(60595),_=i(96033),v=i(53095),y=i(20948),b=i(45784),f=i(35435),x=i(68854),k=i(93859),w=i(57709),S=i(56979),j=i(10026),C=i(93797);!function(e){e.Like="like",e.LikeCancel="like_cancel"}(o||(o={}));const P=(e,t)=>{const i=1===t?"like":"like_cancel";C.W.event(i,e)};var T=i(35468),O=i(47165),L=i(21396),I=i(24878),A=i(57244),E=i(30626),M=i(4206);let R=class{constructor(e){this.fetch=e}postLikeVideo(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:7,headers:{[E.eD]:this.fetch.csrfToken}})}};R=(0,n.__decorate)([(0,A.G)(),(0,n.__metadata)("design:paramtypes",[M.r])],R);const F=e=>{const{vl1:t,showNotPass:i}=null!=e?e:{};return Boolean(t&&!i)};let D=class extends a.D{constructor(e,t,i){super(),this.service=e,this.userModule=t,this.t=i,this.defaultState={}}setItem(e,t){var i,o,n,a,r,s,l;e[t.id]=Object.assign(Object.assign({},t),{nickname:null===(i=t.author)||void 0===i?void 0:i.nickname,author:null===(o=t.author)||void 0===o?void 0:o.uniqueId,authorId:null===(n=t.author)||void 0===n?void 0:n.id,authorSecId:null===(a=t.author)||void 0===a?void 0:a.secUid,avatarThumb:null===(r=t.author)||void 0===r?void 0:r.avatarThumb,downloadSetting:null===(s=t.author)||void 0===s?void 0:s.downloadSetting,authorPrivate:null===(l=t.author)||void 0===l?void 0:l.privateAccount})}updateItem(e,t){e[t.id]&&(e[t.id]=c()(e[t.id],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}setLike(e,t){const{id:i,liked:o,count:n}=t,a=e[i];a&&(a.digged=o,a.stats&&(a.stats.diggCount=n))}setCommentCount(e,t){const{id:i,commentCount:o}=t,n=e[i];(null==n?void 0:n.stats)&&(n.stats.commentCount=o)}reduceOrIncreaseCommentCount(e,t){const{id:i,isReduce:o,min:n=0}=t,a=e[i];if(null==a?void 0:a.stats){const e=o?Math.max(n,a.stats.commentCount-1):a.stats.commentCount+1;a.stats.commentCount=e}}addItems(e){const t=e.filter((e=>Boolean(e.author))).map((({author:e})=>e));return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]}postLikeVideo(e){return e.pipe((0,_.v)((({id:e})=>e)),(0,v.z)((e=>{const t=new p.X(0);return e.pipe((0,y.M)(this.state$,this.userModule.state$,t),(0,v.z)((([e,t,i,o])=>{var a,r,s;const l=t[e.id],d=i.users[null!==(a=null==l?void 0:l.author)&&void 0!==a?a:""],{digged:c,stats:p}=l,{id:m,forceLike:h,enter_method:_="click",channel_id:v}=e,y=(0,n.__rest)(e,["id","forceLike","enter_method","channel_id"]),b=null!==(r=null==p?void 0:p.diggCount)&&void 0!==r?r:0,f={aweme_id:m,channel_id:v,type:h?1:c?0:1};return h&&c?u.E:(0,g.of)({query:f,enter_method:_,diggCount:b,digged:c,author_id:null!==(s=null==d?void 0:d.id)&&void 0!==s?s:"",group_id:l.id,restReportParams:y,changeKey:`${f.type}_${o}`})})),(0,b.g)("changeKey"),(0,f.w)((({query:e,enter_method:i,diggCount:o,author_id:n,group_id:a,digged:r,restReportParams:s})=>{let l=!1;return this.service.postLikeVideo(e).pipe((0,x.K)((()=>(0,g.of)({status_code:-1}))),(0,k.b)((({status_code:t,status_msg:o,log_pb:r={}})=>{2150!==t&&2210!==t||o&&T.h.open({content:this.t(o),duration:3,widthType:"half"}),l=!0,P(Object.assign({group_id:a,author_id:n,log_pb:r,enter_method:i},s),e.type)})),(0,w.x)((()=>{l||P(Object.assign({group_id:a,author_id:n,log_pb:{},enter_method:i},s),e.type)})),(0,v.z)((i=>{const{status_code:n,is_digg:s}=i;return 0!==n||s===e.type?(0,m.H)(3e3).pipe((0,S.U)((()=>this.getActions().setLike({id:a,liked:r,count:o}))),(0,w.x)((()=>{const e=t.getValue();t.next(e+1)}))):(0,g.of)(this.noop())})),(0,j.O)(this.getActions().setLike({id:a,liked:!r,count:r?Math.max(0,o-1):o+1})),(0,O.n)({}))})))})))}setItemPrivateState(e,t){const{id:i,visibility:o}=t,n=e[i];if(!n)return e;n.forFriend="3"===o,n.secret="2"===o}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"setItem",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"updateItem",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"multiSetItem",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"setLike",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"setCommentCount",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"reduceOrIncreaseCommentCount",null),(0,n.__decorate)([(0,r.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[h.y]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"postLikeVideo",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"setItemPrivateState",null),(0,n.__decorate)([(0,r.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],D.prototype,"setDeleteVideo",null),D=(0,n.__decorate)([(0,s.Y)("ItemModule"),(0,n.__param)(2,(0,l.t)(L.s)),(0,n.__metadata)("design:paramtypes",[R,I.z,Function])],D)},29121:(e,t,i)=>{"use strict";i.d(t,{$h:()=>o,tF:()=>a,ci:()=>r});const o="5dc26cf008d511e9b571e1bc0c9e23b5",n={ar:{displayName:"",alias:["ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"]},"bn-IN":{displayName:" ()",alias:["bn","bn-in"]},"ceb-PH":{displayName:"Cebuano (Pilipinas)",alias:["ceb","ceb-ph"]},"cs-CZ":{displayName:"etina (esk republika)",alias:["cs","cs-cz"]},"de-DE":{displayName:"Deutsch",alias:["de","de-at","de-ch","de-de","de-li","de-lu"]},"el-GR":{displayName:" ()",alias:["el","el-gr"]},en:{displayName:"English",alias:[]},es:{displayName:"Espaol",alias:["es-es","es-xl","es-ES"]},"fi-FI":{displayName:"Suomi (Suomi)",alias:["fi","fi-fi"]},"fil-PH":{displayName:"Filipino (Pilipinas)",alias:["fil","tl-ph","tl","fil-ph"]},fr:{displayName:"Franais",alias:["fr-be","fr-ca","fr-ch","fr-fr","fr-lu","fr-mc"]},"he-IL":{displayName:" ()",alias:["he","he-il"]},"hi-IN":{displayName:"",alias:["hi","hi-in"]},"hu-HU":{displayName:"Magyar (Magyarorszg)",alias:["hu","hu-hu"]},"id-ID":{displayName:"Bahasa Indonesia (Indonesia)",alias:["id","id-id","in-id","in"]},"it-IT":{displayName:"Italiano (Italia)",alias:["it","it-ch","it-it"]},"ja-JP":{displayName:"",alias:["ja","ja-jpan","ja-jp"]},"jv-ID":{displayName:"Basa Jawa (Indonesia)",alias:["jv","jv-jv"]},"km-KH":{displayName:" ()",alias:["km","km-kh"]},"ko-KR":{displayName:" ()",alias:["ko","ko-kr","ko-kore"]},"ms-MY":{displayName:"Bahasa Melayu (Malaysia)",alias:["ms","ms-bn","ms-my"]},"my-MM":{displayName:" ()",alias:["my","my","my-mm"]},"nl-NL":{displayName:"Nederlands (Nederland)",alias:["nl","nl-be","nl-nl"]},"pl-PL":{displayName:"Polski (Polska)",alias:["pl","pl-pl"]},"pt-BR":{displayName:"Portugus (Brasil)",alias:["pt_BR","pt-br","pu","pt","pt-pt"]},"ro-RO":{displayName:"Romn (Romania)",alias:["ro","ro-ro"]},"ru-RU":{displayName:" ()",alias:["ru","ru-ru"]},"sv-SE":{displayName:"Svenska (Sverige)",alias:["sv","sv-se"]},"th-TH":{displayName:" ()",alias:["th","th-th"]},"tr-TR":{displayName:"Trke (Trkiye)",alias:["tr","tr-tr"]},"uk-UA":{displayName:" ()",alias:["uk","uk-ua"]},ur:{displayName:"",alias:[]},"vi-VN":{displayName:"Ting Vit (Vit Nam)",alias:["vi","vi-vn"]},"zh-Hans":{displayName:"",alias:["zh-hans","zh_hans","zh_Hans"]},"zh-Hant-TW":{displayName:"",alias:["zh","zh_Hant","zh_TW","zh-tw","zh-hk","zh-Hant","zh-hant-tw","zh-cn"]}},a=(Object.entries(n).map((([e,{alias:t}])=>[e,...t])),Object.entries(n).map((([e,{displayName:t}])=>({label:t,value:e})))),r="tiktok_webapp_lang"},56417:(e,t,i)=>{"use strict";i.d(t,{o6:()=>o});const o="https://www.tiktok.com"},67974:(e,t,i)=>{"use strict";i.d(t,{s:()=>r,e4:()=>s});var o,n=i(90293);!function(e){e.WebApp="Webapp",e.Analytics="MT_Analytics",e.Reflow="MT_Reflow",e.Login="WebApp_Login"}(o||(o={}));const a=["^/@.*/now","^/@.*/playlist/.*","^/sticker/","^/@.*/post/.*","^/@.*/invite"],r=(e="")=>e.split("-")[0].replace("zh","zh-Hant")||e||"en";function s({isMobile:e,pathname:t,search:i,isSearchbot:o,isNow:r}){const s=(0,n.parse)(i);return e&&/^\/@.*\/video\/.+/.test(t)?["MT_Reflow","Webapp"]:a.some((e=>new RegExp(e).test(t)))||r?["MT_Reflow"]:e&&"1"===s._r?["MT_Reflow","Webapp"]:t.startsWith("/login")||t.startsWith("/signup")||t.startsWith("/logout")?["WebApp_Login"]:t.startsWith("/search/campaign/")||t.startsWith("/question/")||t.startsWith("/messages/group")||e&&o?["MT_Reflow","Webapp"]:["Webapp"]}},38645:(e,t,i)=>{"use strict";var o,n;i.d(t,{Sx:()=>a,z:()=>r,zH:()=>s,o9:()=>d,Oy:()=>c,lF:()=>p}),function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(o||(o={})),function(e){e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(n||(n={}));const a="4954e33ea2a4395e59ecbc20761bd889",r="1569196861",s="6961453";var l;!function(e){e.POPUP="popup",e.PAGE="page",e.NONE="none"}(l||(l={}));const d={1233:692,1180:747},c={google:395,twitter:396,facebook:397,instagram:398,line:529,vk:528,kakaotalk:99},p="socialOauth";var u;!function(e){e[e.Login=0]="Login",e[e.Signup=1]="Signup",e[e.Verify=2]="Verify"}(u||(u={}))},51882:(e,t,i)=>{"use strict";i.d(t,{Q:()=>w});var o=i(64047),n=i(57244),a=i(37729),r=i(53095),s=i(82346),l=i(14716),d=i(11348),c=i(87837),p=i(96980),u=i(56979),g=i(93859),m=i(68854),h=i(35435),_=i(39341);const v={ar:"ar","bn-IN":"bn","ceb-PH":"ceb","cs-CZ":"cs-CZ","de-DE":"de","el-GR":"el-GR",en:"en",es:"es","fil-PH":"fil",fr:"fr","gu-IN":"gu-IN","hi-IN":"hi","hu-HU":"hu-HU","id-ID":"id","it-IT":"it","ja-JP":"ja","jv-ID":"jv","kn-IN":"kn","ko-KR":"ko","ml-IN":"ml-IN","mr-IN":"mr","ms-MY":"ms","my-MM":"my","nl-NL":"nl-NL","or-IN":"or","pa-IN":"pa-IN","pl-PL":"pl","pt-BR":"pt-BR","ro-RO":"ro-RO","ru-RU":"ru","sv-SE":"sv-SE","ta-IN":"ta","te-IN":"te","th-TH":"th","tr-TR":"tr","uk-UA":"uk","vi-VN":"vi","zh-Hans":"zh-Hant","zh-Hant-TW":"zh-Hant"},y={ar:{label:"",passportLang:"ar"},"bn-IN":{label:" ()",passportLang:"bn"},"ceb-PH":{label:"Cebuano (Pilipinas)",passportLang:"ceb"},"cs-CZ":{label:"etina (esk republika)",passportLang:"cs"},"de-DE":{label:"Deutsch (Deutschland)",passportLang:"de"},"el-GR":{label:" ()",passportLang:"el"},en:{label:"English",passportLang:"en"},es:{label:"Espaol",passportLang:"es"},"fi-FI":{label:"Suomi (Suomi)",passportLang:"fi"},"fil-PH":{label:"Filipino (Pilipinas)",passportLang:"fil"},fr:{label:"Franais",passportLang:"fr"},"he-IL":{label:" ()",passportLang:"he"},"hi-IN":{label:"",passportLang:"hi"},"hu-HU":{label:"Magyar (Magyarorszg)",passportLang:"hu"},"id-ID":{label:"Bahasa Indonesia (Indonesia)",passportLang:"id"},"it-IT":{label:"Italiano (Italia)",passportLang:"it"},"ja-JP":{label:"",passportLang:"ja"},"jv-ID":{label:"Basa Jawa (Indonesia)",passportLang:"jv"},"km-KH":{label:" ()",passportLang:"km"},"ko-KR":{label:" ()",passportLang:"ko"},"ms-MY":{label:"Bahasa Melayu (Malaysia)",passportLang:"ms"},"my-MM":{label:" ()",passportLang:"my"},"nl-NL":{label:"Nederlands (Nederland)",passportLang:"nl"},"pl-PL":{label:"Polski (Polska)",passportLang:"pl"},"pt-BR":{label:"Portugus (Brasil)",passportLang:"pt"},"ro-RO":{label:"Romn (Romania)",passportLang:"ro"},"ru-RU":{label:"",passportLang:"ru"},"sv-SE":{label:"Svenska (Sverige)",passportLang:"sv"},"th-TH":{label:" ()",passportLang:"th"},"tr-TR":{label:"Trke (Trkiye)",passportLang:"tr"},"uk-UA":{label:" ()",passportLang:"uk"},ur:{label:"",passportLang:"ur"},"vi-VN":{label:"Ting Vit (Vit Nam)",passportLang:"vi"},"zh-Hans":{label:"",passportLang:"zh-Hant"},"zh-Hant-TW":{label:"",passportLang:"zh-Hant"}};var b=i(38645),f=i(81775),x=i(17021),k=i(7282);let w=class{constructor(e,t){this.userRegion=e,this.slardar=t,this.appContext$=new a.t(1),this.level=null,this.requestInfo={},this.extraParams={aid:1459,is_sso:!1,account_sdk_source:"web",region:"",language:"en"}}setAppContext(e){var t,i;this.appContext$.next(e),this.appContext=e,this.extraParams.region=e.region,this.extraParams.language=(null===(t=y[e.language])||void 0===t?void 0:t.passportLang)||"en",b.Oy.apple=b.o9[null!==(i=e.appId)&&void 0!==i?i:1180]}initAccountSdkInstance(){return this.appContext$.pipe((0,r.z)((e=>{if(this.sdkInstance)return(0,s.of)(this.sdkInstance);const{language:t,appId:o,phoenix:n,isTTP:a}=e,r=n?"https://www.tiktok.in":"https://www.tiktok.com";return(0,l.D)(Promise.all([i.e(3975),i.e(9207),i.e(3065),i.e(5538),i.e(5019)]).then(i.bind(i,27e3)).then((({WebInterfaceSdk:e})=>e))).pipe((0,u.U)((e=>new e({aid:1459,host:r,isOversea:!0,region:1180===o?"sg":"va",printLog:!1,language:v[t],mode:(0,f.i)(a),captchaHost:r,captchaOptions:{fpCookieOption:{domain:n?"www.tiktok.in":".tiktok.com",sameSite:"None",secure:!0}},xhrConfig:{getDynamicConfig:e=>{var t;const i=this.userRegion.getRegionDomain(),o=this.userRegion.getTtWid();this.requestInfo=Object.assign(Object.assign({},e),{baseURL:i});const n={baseURL:i,params:{shark_extra:JSON.stringify(Object.assign(Object.assign({},(0,_.Kj)(null!==(t=this.appContext)&&void 0!==t?t:{},!0,!0,this.level)),{app_name:"Tik_Tok_Login",aid:1459}))},headers:{}};return o&&(n.headers={"x-tt-passport-ttwid-ticket":o}),n},cacheRedirectDomain:e=>{this.userRegion.currentRegion={domain:`https://${e}`}}},getDynamicCaptchaConfig:e=>"https://m.tiktok.com"===(e=e.replace("com/","com"))||"https://web-va.tiktok.com"===e?"https://web-va.tiktok.com":"https://t.tiktok.com"===e?"https://web-sg.tiktok.com":e,acrawler:"true",acrawlerUrl:"acrawler",sdi:!0}))),(0,g.b)((e=>this.sdkInstance=e)),(0,m.K)((e=>(console.error(e),(0,d.c)()))),(0,c.X)(1))})))}getAccountSdk$(e){var t,i,o;const{platform_app_id:n,email:a,mobile:r,account:s,username:l}=null!=e?e:{};return e&&(null!==(o=null!==(i=null!==(t=null!=n?n:a)&&void 0!==t?t:r)&&void 0!==i?i:s)&&void 0!==o?o:l)?this.userRegion.getUserRegions(e).pipe((0,h.w)((e=>{if(-1===e.error_code)throw new Error(`get user region error, error_code ${e.error_code}`);return this.initAccountSdkInstance().pipe((0,p.q)(1))}))):(e&&this.slardar.handleUserRegionEscape(e),this.initAccountSdkInstance().pipe((0,p.q)(1)))}sendPhoneCode(e){const{mobile:t}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCode"))),(0,r.z)((i=>(0,l.D)(i.login.sendCode({mobile:t,extra_params:Object.assign(Object.assign(Object.assign({},this.extraParams),e),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}notLoginSendCode(e){return this.getAccountSdk$({mobile:e.mobile,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("notLoginSendCode"))),(0,r.z)((t=>(0,l.D)(t.verify.notLoginSendCode({mobile:e.mobile,extra_params:Object.assign(Object.assign({},this.extraParams),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeWithType(e){const{type:t,not_login_ticket:i,verify_ticket:o,method:n,mobile:a}=e;return this.getAccountSdk$({mobile:a,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeWithType"))),(0,r.z)((e=>e.extra.sendCode({type:t,method:n,mobile:a,extra_params:Object.assign(Object.assign({not_login_ticket:i,verify_ticket:o},this.extraParams),{is6Digits:1})})))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForResetPwd(e){const{mobile:t,verify_ticket:i,not_login_ticket:o,type:n}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForResetPwd"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.sendCode({mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:n,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForForceResetPwd"))),(0,r.z)((t=>(0,l.D)(t.extra.sendCode({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForReset"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.validateCode(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForForceReset"))),(0,r.z)((t=>(0,l.D)(t.extra.validateMobile({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForSignup(e){const{email:t="",password:i=""}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForSignup"))),(0,r.z)((e=>(0,l.D)(e.login.sendEmailCode({email:t,password:i,extra_params:Object.assign(Object.assign({},this.extraParams),{email_logic_type:2})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForLogin(e){const{email:t="",extra_params:i={}}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.login.sendEmailLoginCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),i)}))))).pipe(this.errorHandler.bind(this))}verifySendEmailCode(e){const{verify_ticket:t}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifySendEmailCode"))),(0,r.z)((e=>(0,l.D)(e.verify.sendEmailCode({extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:t})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForResetPwd(e){const{email:t="",not_login_ticket:i,email_logic_type:o}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForResetPwd"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.sendEmailCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:i,email_logic_type:o})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForForceResetPwd"))),(0,r.z)((t=>(0,l.D)(t.extra.sendEmailCode({type:11,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForReset"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.validateEmail(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForForceReset"))),(0,r.z)((t=>(0,l.D)(t.verify.validateEmail({code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{type:11,conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}emailCodeLogin(e){const{not_login_ticket:t,verify_ticket:i,code:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailCodeLogin"))),(0,r.z)((e=>(0,l.D)(e.login.emailCodeLogin({code:o,email:"",extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:t,verify_ticket:i,password:n,type:13})}))))).pipe(this.errorHandler.bind(this))}smsLogin(e){const{mobile:t="",code:i,login_only:o,birthday:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLogin"))),(0,r.z)((e=>(0,l.D)(e.login.smsLogin({mobile:t,code:i,login_only:o,extra_params:Object.assign({birthday:n},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}smsVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.notLoginValidateMobile(e))))).pipe(this.errorHandler.bind(this))}smsLoginContinue(e){const{extra_params:t}=e,i=(0,o.__rest)(e,["extra_params"]);return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLoginContinue"))),(0,r.z)((e=>(0,l.D)(e.login.smsLoginContinue(Object.assign(Object.assign({},i),{extra_params:Object.assign(Object.assign({},this.extraParams),t)})))))).pipe(this.errorHandler.bind(this))}passwordLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:s}=e;return this.getAccountSdk$({username:i,mobile:n,email:a,account:s,triggerPath:"/passport/web/user/login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("passwordLogin"))),(0,r.z)((e=>(0,l.D)(e.login.pwdLogin({username:i,password:t,mobile:n,email:a,account:s,extra_params:Object.assign(Object.assign({},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}verifyPwdWithoutLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:s}=e;return this.getAccountSdk$({mobile:n,email:a,account:s,triggerPath:"/passport/web/account/verify_pwd_without_login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyPwdWithoutLogin"))),(0,r.z)((e=>(0,l.D)(e.verify.verifyPwdWithoutLogin({username:i,password:t,mobile:n,email:a,extra_params:Object.assign(Object.assign({account:s},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}resetPwdLoginByEmail(e){const{email:t,password:i,code:o="",extra_params:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdLoginByEmail"))),(0,r.z)((e=>(0,l.D)(e.password.resetPwdLoginByEmail({password:i,code:o,email:t,extra_params:Object.assign(Object.assign(Object.assign({},n),this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}changePwdByMobile(e){const{mobile:t,password:i,code:o}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("changePwdByMobile"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({password:i,code:o,mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.password.validateMobile({code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:22})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.verify.notLoginValidateEmail({email:"",code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:6})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForReset(e){const{code:t,verify_ticket:i,not_login_ticket:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForReset"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({code:t,mobile:"",password:n,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o})}))))).pipe(this.errorHandler.bind(this))}getOauthConfig(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getOauthConfig"))),(0,r.z)((t=>(0,l.D)(t.account.authConfig(e))))).pipe(this.errorHandler.bind(this))}thirdLogin(e){return this.getAccountSdk$(e.login_only&&!e.profile_key?{openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/login_only/"}:void 0).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdLogin"))),(0,r.z)((t=>(0,l.D)(t.login.authLogin(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{birthday:e.birthday,platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}thirdVerify(e){return this.getAccountSdk$({openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/verify/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.authVerify(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}resetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByEmailTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.resetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}resetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByMobileTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.resetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByMobileTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByEmailTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}cancelDeleteAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("cancelDeleteAccount"))),(0,r.z)((t=>(0,l.D)(t.cancel.cancelLogin(e))))).pipe(this.errorHandler.bind(this))}cancelDeactiveAccount(e){return this.getAccountSdk$().pipe((0,r.z)((t=>(0,l.D)(t.request({url:"/passport/web/deactivation/login/",method:"POST",data:Object.assign(Object.assign({},e),this.extraParams)}))))).pipe(this.errorHandler.bind(this))}setAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("setAccount"))),(0,r.z)((t=>(0,l.D)(t.account.setAccount(e))))).pipe(this.errorHandler.bind(this))}getQrCodeUrl(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getQrCodeUrl"))),(0,r.z)((t=>(0,l.D)(t.qrcodeLogin.getQrcode(e))))).pipe(this.errorHandler.bind(this))}checkQrconnect(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkQrconnect"))),(0,r.z)((t=>(0,l.D)(t.qrcodeLogin.checkQrconnect(e))))).pipe(this.errorHandler.bind(this))}usernameRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({username:e.username,triggerPath:"/passport/web/username/register"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("usernameRegister"))),(0,r.z)((t=>(0,l.D)(t.login.usernameRegister(e))))).pipe(this.errorHandler.bind(this))}emailRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({email:e.email,triggerPath:"/passport/web/email/register_verify_login"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailRegister"))),(0,r.z)((t=>(0,l.D)(t.login.emailRegister(e))))).pipe(this.errorHandler.bind(this))}checkLogin(){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkLogin"))),(0,r.z)((e=>(0,l.D)(e.login.checkLogin({}))))).pipe(this.errorHandler.bind(this))}accountVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("accountVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.accountVerify({account:"",password:e.password,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:e.verify_ticket})}))))).pipe(this.errorHandler.bind(this))}checkEmailRegistered(e){return this.getAccountSdk$({email:e.email}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkEmailRegistered"))),(0,r.z)((t=>(0,l.D)(t.extra.checkEmailRegistered({email:e.email,extra_params:Object.assign({},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}updateUniqueId(e){return this.getAccountSdk$().pipe((0,r.z)((t=>(0,l.D)(t.account.updateLoginName({login_name:e}))))).pipe(this.errorHandler.bind(this))}errorHandler(e){return e.pipe((0,g.b)((()=>{var e,t,i,o,n;this.slardar.handleRequestResultReport({url:this.requestInfo.url,type:null!==(i=null===(t=null===(e=this.requestInfo)||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&void 0!==i?i:null===(n=null===(o=this.requestInfo)||void 0===o?void 0:o.params)||void 0===n?void 0:n.type,domain:this.requestInfo.baseURL})})),(0,m.K)((e=>{var t,i,o,n,a;return this.slardar.handleRequestResultReport({error_code:e.error_code||-1,url:this.requestInfo.url,type:null!==(o=null===(i=null===(t=this.requestInfo)||void 0===t?void 0:t.data)||void 0===i?void 0:i.type)&&void 0!==o?o:null===(a=null===(n=this.requestInfo)||void 0===n?void 0:n.params)||void 0===a?void 0:a.type,domain:this.requestInfo.baseURL}),(0,s.of)(Object.assign({error_code:e.error_code||-1,default_error_msg:"CLOSE_CAPTCHA"===e?"":"Sorry, something went wrong, please try again later"},e))})))}};w=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[k.D,x.M])],w)},7282:(e,t,i)=>{"use strict";i.d(t,{D:()=>x});var o=i(64047),n=i(57244),a=i(89464),r=i(745),s=i.n(r),l=i(82346),d=i(53095),c=i(15608),p=i(56979),u=i(68854),g=i(35435),m=i(87837),h=i(4206),_=i(93797),v=i(38645),y=i(23427),b=i(17021);const f="https://us.tiktok.com";let x=class{constructor(e,t){this.fetch=e,this.slardar=t,this.regionCache=new Map,this.userSeverRegion={},this.ttpConfig={},this.isSG=!0,this.phoenix=!1,this.alterRegionParams={},this.authBroadcastParams={},this.requestTime=1}setInitConfig(e){this.ttpConfig=e.ttpConfig,this.isSG=e.isSG,this.phoenix=e.phoenix}getRegionDomain(){return this.currentRegion.domain}getTtWid(){return this.currentRegion.ttWid}get isRetry(){return this.requestTime<=2?{is_retry:0}:{is_retry:1}}set currentRegion(e){this.userSeverRegion=e;const{domain:t}=e,i=t===f?"https://mcs.us.tiktok.com":this.isSG?"https://mcs-sg.tiktok.com":"https://mcs-va.tiktok.com";_.W.setDomain(i)}get currentRegion(){return this.userSeverRegion}getUserRegions(e){const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;if(!t||this.phoenix)return(0,l.of)({error_code:0});const{platform_app_id:o,email:n,mobile:r,openId:g,account:m,triggerPath:h}=e,_=g||n||this.formatMobile(r)||m||"";if(this.twitterRegion(o)||this.LineRegion(o)||this.getCacheRegion(_))return(0,l.of)({error_code:0});const v=(0,a.sha256)(`${_}aDy0TUhtql92P7hScCs97YWMT-jub2q9`),y=n?2:g?4:r?1:3;return(0,l.of)(i).pipe((0,d.z)((e=>(0,c.D)(e.map((({domain:e})=>this.fetch.post(`${e}/passport/web/region/`,{body:s().stringify({hashed_id:v,type:y,platform_app_id:o,aid:1459})})))).pipe((0,p.U)((e=>{const{maxSameRegion:t,regionResult:i,domains:n}=this.getMaxNumberDomain(e);return 1===t.count&&(this.alterRegionParams={hashed_id:v,type:y,platform_app_id:o,result:JSON.stringify(i)},this.alterUserRegions(),2===Object.keys(n).length)?{error_code:-1}:(this.currentRegion={ttWid:t.ttWid,domain:`https://${t.domain}`},this.authBroadcastParams={hashed_id:v,type:y,platform_app_id:o,pre_path:null!=h?h:"",final_domain:t.domain},this.regionCache.set(_,this.currentRegion),{error_code:0})}))))),(0,u.K)((e=>(console.error(e,"get region err"),(0,l.of)({error_code:-1})))))}alterUserRegions(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("alterUserRegions"),(0,l.of)(t).pipe((0,d.z)((e=>e.map((({domain:e})=>this.singleRequestHandler({url:`${e}/passport/web/region_alert/`}))))))):(0,l.of)(null)}authBroadcast(e){this.requestTime=1;const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;return!t||this.phoenix?(0,l.of)(null):(this.slardar.setCurrentRequestMethod("authBroadcast"),y.g.show(),(0,l.of)(i).pipe((0,d.z)((t=>(0,c.D)(t.map((({domain:t})=>this.singleRequestHandler({url:`${t}/passport/web/auth_broadcast/`,userInfo:e,isAuth:!0})))).pipe((0,p.U)((()=>(y.g.hide(),null))))))))}twitterRegion(e){if(e===v.Oy.twitter)return this.currentRegion={domain:f},!0}LineRegion(e){if(e===v.Oy.line)return this.currentRegion={domain:"https://t.tiktok.com"},!0}getCacheRegion(e){if(this.regionCache.get(e))return this.currentRegion=this.regionCache.get(e),!0}getMaxNumberDomain(e){this.slardar.setCurrentRequestMethod("getUserRegion");const t={},i={},{syncSeverList:o=[]}=this.ttpConfig,n={count:0,domain:"",ttWid:""};return e.forEach((({data:e},a)=>{const{domain:r,ttwid_migration_ticket:s,error_code:l}=e;this.slardar.handleRequestResultReport({error_code:l}),i[o[a].domain]=r,t[r]?t[r]=t[r]+1:t[r]=1,n.count<t[r]&&(n.count=t[r],n.domain=r),s&&(n.ttWid=s)})),{regionResult:i,maxSameRegion:n,domains:t}}singleRequestHandler(e){const{url:t,isAuth:i=!0,userInfo:o}=e,n=i?Object.assign(Object.assign({},this.authBroadcastParams),o):this.alterRegionParams;return(0,l.of)(this.isRetry).pipe((0,g.w)((({is_retry:e})=>this.fetch.post(t,{body:s().stringify(Object.assign(Object.assign({},n),{is_retry:e,aid:1459}))}).pipe((0,p.U)((({error_code:e})=>{if(this.slardar.handleRequestResultReport({error_code:e}),-1===e)throw new Error(`${e}`);return{error_code:0}}))))),(0,m.X)(2))}formatMobile(e){var t;if(!e)return"";const[i,o]=null!==(t=e.replace("+","").split(" "))&&void 0!==t?t:[];return"86"===i?o:`+${i}${o}`}};x=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[h.r,b.M])],x)},23427:(e,t,i)=>{"use strict";i.d(t,{g:()=>n});var o=i(30074);const n={show:()=>o.B.show("#loginContainer"),hide:()=>o.B.hide()}},81775:(e,t,i)=>{"use strict";i.d(t,{i:()=>o});const o=e=>e?"0x203":"0x204"},17021:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});var o=i(64047),n=i(57244),a=i(91218);let r=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.currentMethod=null,this.setCurrentRequestMethod=e=>{this.currentMethod=e},this.handleRequestResultReport=e=>{if(!this.currentMethod)return;const{error_code:t=0}=e,i=(0,o.__rest)(e,["error_code"]);this.service.emitEvent(this.currentMethod,this.defaultMetrics,Object.assign(Object.assign({error_code:String(t)},i),{function_type:this.getFunctionType(this.currentMethod,e)}))},this.handleThirdGetToken=e=>{this.currentMethod="thirdGetToken",this.handleRequestResultReport(e)},this.QRCodeShortenFail=e=>{this.service.emitEvent("qrcode_shorten_fail",this.defaultMetrics,e)},this.handleUserRegionEscape=e=>{this.service.emitEvent("userRegionEscape",this.defaultMetrics,e)}}getFunctionType(e,t){switch(e){case"sendPhoneCode":case"smsLogin":case"passwordLogin":case"thirdLogin":case"getQrCodeUrl":case"checkQrconnect":case"getOauthConfig":case"cancelDeleteAccount":case"thirdGetToken":return"login";case"notLoginSendCode":case"smsVerify":case"verifyPwdWithoutLogin":case"thirdVerify":return"verify";case"validateMobileCodeForLogin":case"validateEmailCodeForLogin":case"validateMobileCodeForReset":case"verifySendEmailCode":case"sendEmailCodeForLogin":case"emailCodeLogin":return"twostep";case"sendPhoneCodeWithType":return String(t.type).match(/13|12/)?"twostep":"reset";case"sendPhoneCodeForResetPwd":case"sendEmailCodeForResetPwd":case"resetPwdLoginByEmail":case"changePwdByMobile":return"reset";case"sendEmailCodeForForceResetPwd":case"sendPhoneCodeForForceResetPwd":case"validatePhoneCodeForForceReset":case"validateEmailCodeForForceReset":case"forceResetPwdByMobileTicket":case"forceResetPwdByEmailTicket":return"forcereset";case"sendEmailCodeForSignup":case"smsLoginContinue":case"usernameRegister":case"setAccount":case"emailRegister":return"signup";default:return"ttp"}}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.n])],r)},1e3:(e,t,i)=>{"use strict";i.d(t,{w_:()=>a,$J:()=>r,jT:()=>s});var o=i(3333),n=i(87195);const a={euTaxForm:"/tax/eu-tax",kyc:"/kyc",rewardOnboarding:"/reward-onboarding",recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"},r=((0,n.o)(a),{euTaxForm:"/tax/eu-tax",kyc:"/kyc",rewardOnboarding:"/reward-onboarding",recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"}),s=(0,o.t)(r),l=((0,n.o)(r),{euTaxForm:"/tax/eu-tax",kyc:"/kyc",rewardOnboarding:"/reward-onboarding",recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"});(0,o.t)(l),(0,n.o)(l)},29046:(e,t,i)=>{"use strict";i.d(t,{Ad:()=>a,zp:()=>r,gs:()=>s,T2:()=>l,gY:()=>p});var o=i(3333),n=i(87195);(0,n.o)({video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",searchReflow:"/search/campaign/:eventName",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",sticker:"/sticker/:title(.*)-:id",group:"/messages/group",invitePost:"/@:uniqueId/now/invite",post:"/@:uniqueId/now/:id",inviteNow:"/@:uniqueId/invite",postNow:"/@:uniqueId/post/:id",searchHome:"/search",searchVideo:"/search/video",messages:"/messages",settingBlockList:"/setting/block-list",settingDownLoadYourData:"/setting/download-your-data",profile:"/profile",inbox:"/inbox",reportinbox:"/report/inbox",report:"/report/:type",amp:"/amp/tag/:name",userVideoDirectory:"/directory/user-video/:uniqueId",usersRootDirectory:"/directory/users",usersFirstRangeDirectory:"/directory/users/:hash1",usersSecondRangeDirectory:"/directory/users/:hash1/:hash2",recommendVideosRootDirectory:"/directory/recommend-videos",recommendVideosFirstRangeDirectory:"/directory/recommend-videos/:hash1",recommendVideosSecondRangeDirectory:"/directory/recommend-videos/:hash1/:hash2",loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"});const a={video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",searchHome:"/search",searchVideo:"/search/video",messages:"/messages",settingBlockList:"/setting/block-list",settingDownLoadYourData:"/setting/download-your-data"},r=(0,o.t)(a),s=((0,n.o)(a),{video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",profile:"/profile",inbox:"/inbox",reportinbox:"/report/inbox",report:"/report/:type",amp:"/amp/tag/:name"}),l=(0,o.t)(s),d=((0,n.o)(s),{video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",searchReflow:"/search/campaign/:eventName",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",sticker:"/sticker/:title(.*)-:id",group:"/messages/group",invitePost:"/@:uniqueId/now/invite",post:"/@:uniqueId/now/:id",inviteNow:"/@:uniqueId/invite",postNow:"/@:uniqueId/post/:id"}),c=((0,o.t)(d),(0,n.o)(d),{foryou:"/foryou",user:"/@:uniqueId",setting:"/setting",report:"/report/:type",ftcFallback:"*"}),p=((0,o.t)(c),(0,n.o)(c),{loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"}),u=((0,o.t)(p),(0,n.o)(p),{userVideoDirectory:"/directory/user-video/:uniqueId",usersRootDirectory:"/directory/users",usersFirstRangeDirectory:"/directory/users/:hash1",usersSecondRangeDirectory:"/directory/users/:hash1/:hash2",recommendVideosRootDirectory:"/directory/recommend-videos",recommendVideosFirstRangeDirectory:"/directory/recommend-videos/:hash1",recommendVideosSecondRangeDirectory:"/directory/recommend-videos/:hash1/:hash2"});(0,o.t)(u),(0,n.o)(u)},87195:(e,t,i)=>{"use strict";i.d(t,{o:()=>a});var o=i(34013),n=i.n(o);function a(e){const t=[],i=Object.keys(e);for(const o of i){const i=e[o],a=Array.isArray(i)?i:[i];for(const e of a)t.push({re:n()(e),route:{name:o,path:e}})}return e=>{for(const i of t)if(i.re.test(e))return i.route;return null}}},3333:(e,t,i)=>{"use strict";i.d(t,{t:()=>l});var o=i(20939),n=i.n(o),a=i(60140),r=i.n(a),s=i(34013);function l(e){return n()(e,(e=>function(e){return r()(e)?(0,s.compile)(e):()=>e[0]}(e)))}},84584:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>d,yy:()=>l});var o,n,a=i(64047);i(86185),function(e){e.Sg="https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/secsdk/secsdk-lastest.umd.js",e.Va="https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/secsdk/secsdk-lastest.umd.js"}(o||(o={})),function(e){e.Acrawler="acrawler",e.SecSdkSG="secsdk_sg",e.SecSdkVA="secsdk_va"}(n||(n={}));const r={acrawler:"https://sf16-secsdk.ttwstatic.com/obj/rc-web-sdk-gcs/webmssdk/1.0.0.200/webmssdk.js",secsdk_sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/secsdk/secsdk-lastest.umd.js",secsdk_va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/secsdk/secsdk-lastest.umd.js"};i(11040);const s="script-manager";function l(e){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const{retry:t=0,moduleId:i}=e;try{return yield System.import(i)}catch(i){if(t)return yield l(Object.assign(Object.assign({},e),{retry:t-1}));throw i}}))}function d(e={importmap:"/node-webapp/api/importmap"}){return(0,a.__awaiter)(this,void 0,void 0,(function*(){if(document.querySelector(`#${s}`))return;let{importmap:t}=e;const i=document.createElement("script");if(i.type="systemjs-importmap",i.id=s,"string"==typeof t)try{const e=yield window.fetch.call(null,t,{method:"Get",redirect:"error"}),{imports:i}=yield e.json();t={imports:i}}catch(e){t={imports:r}}i.innerText=JSON.stringify(t),document.head.appendChild(i)}))}},54434:(e,t,i)=>{"use strict";var o,n;i.d(t,{M1:()=>Pe,aF:()=>Ce,Dj:()=>F,bH:()=>R,BD:()=>w,D2:()=>ae,Yp:()=>ge,Y0:()=>de,TR:()=>D,MB:()=>V,nY:()=>W,sF:()=>ie,C7:()=>B}),function(e){e.DefaultBotType="others",e.ValidGoogleBot="Googlebot",e.ValidBingBot="Bingbot",e.FakeGoogleBot="FakeGooglebot",e.FakeBingBot="FakeBingbot"}(o||(o={})),function(e){e[e.Aborted=1]="Aborted",e[e.Network=2]="Network",e[e.Decode=3]="Decode",e[e.SrcNotSupported=4]="SrcNotSupported"}(n||(n={}));const a="TikTok",r="https://www.tiktok.com",s="required name=search_term_string",l="Watch trending videos for you",d="https://www.tiktok.com/foryou",c="Discover popular videos",p="https://www.tiktok.com/discover",u=["https://www.instagram.com/tiktok/","https://www.facebook.com/tiktok","https://www.twitter.com/tiktok_us","https://www.youtube.com/channel/UChPd_WHrv3O-XAXXHLixs7g"],g=["https://www.instagram.com/tiktok_kr/","https://www.facebook.com/tiktok","https://twitter.com/TiktokKR","https://www.youtube.com/c/tiktokkr","https://post.naver.com/my.naver?memberNo=52184197"],m={INDEX:"index, follow",NO_INDEX:"noindex, follow",IMAGE_PREVIEW_LARGE:"max-image-preview:large"};var h,_;!function(e){let t;!function(e){e.WebSite="WebSite",e.ItemList="ItemList",e.VideoObject="VideoObject",e.Page="Page",e.BreadcrumbList="BreadcrumbList",e.Person="Person",e.MusicRecording="MusicRecording",e.QAPage="QAPage",e.Event="Event"}(t=e.JsonldType||(e.JsonldType={}))}(h||(h={})),function(e){let t;!function(e){e[e.META_PATH=1]="META_PATH",e[e.META_EXP=2]="META_EXP",e[e.META_PAGE=3]="META_PAGE",e[e.JSONLD_PATH=4]="JSONLD_PATH",e[e.JSONLD_EXP=5]="JSONLD_EXP",e[e.JSONLD_PAGE=6]="JSONLD_PAGE"}(t=e.SERPProcessType||(e.SERPProcessType={}))}(_||(_={}));var v=i(56417),y=i(84037);const{isRealUniqueId:b}=y.c;function f(e,t=1){return Math.round(Number(`${Number(e)}e${t}`))/Math.pow(10,t)}function x(e=0){let t;return t=e<1e3?e.toString():e<999999?`${f(e/1e3)}K`:e<999999999?`${f(e/1e6)}M`:`${f(e/1e9)}B`,t}function k(e=""){return e.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}const w=(e="",t="")=>b(t)?`${e} (@${t})`:`${e}`;function S(e){if(0===e)return"";const t=e%60,i=Math.floor(e/60),o=i%60,n=Math.floor(i/60),a=n%24,r=Math.floor(n/24);let s="P";return r>0&&(s+=`${r}D`),s+="T",a>0&&(s+=`${a}H`),o>0&&(s+=`${o}M`),s+=`${t}S`,s}function j({statusCode:e=0}={}){return 0===e||function(e){return 10229===e||10230===e}(e)}function C(e){const t=e?{lng:e}:{};return(e={})=>Object.assign(Object.assign({},e),t)}function P(e=[]){return{itemListElement:e.reduce(((e,t,i)=>{const{url:o,name:n}=t;return e.push({"@type":"ListItem",position:i+1,item:{"@type":"Thing","@id":o,name:n}}),e}),[])}}function T(e,t){const i=/ko/.test(t)?g:u;return{"@type":"Organization","@id":"https://www.tiktok.com/#organization",name:a,url:e,sameAs:i,logo:{"@type":"ImageObject",url:"https://sf-tb-sg.ibytedtos.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png"}}}const O=new Set([_.SERPProcessType.JSONLD_PATH,_.SERPProcessType.META_PATH]),L=new Set([_.SERPProcessType.JSONLD_EXP,_.SERPProcessType.META_EXP]),I=new Set([_.SERPProcessType.JSONLD_PAGE,_.SERPProcessType.META_PAGE]),A=new Set([_.SERPProcessType.META_EXP,_.SERPProcessType.META_PAGE,_.SERPProcessType.META_PATH]),E=new Set([_.SERPProcessType.JSONLD_EXP,_.SERPProcessType.JSONLD_PAGE,_.SERPProcessType.JSONLD_PATH]),M=(e,t)=>{var i;const{seoProps:{pageId:o,pageType:n,abtest:a}={}}=t,r=null!==(i=null==a?void 0:a.vidList)&&void 0!==i?i:[];return[...e.filter((e=>O.has(e.processType)&&e.targetId===n)),...e.filter((e=>L.has(e.processType)&&r.includes(e.targetId.toString()))),...e.filter((e=>I.has(e.processType)&&e.targetId===o))]};function R(e,t){return M(t,e).filter((e=>A.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==o?o:{};return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{metaParams:Object.assign(Object.assign({},a),n)})})}),e)}function F(e,t){return M(t,e).filter((e=>E.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.jsonldList)&&void 0!==o?o:[];return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{jsonldList:[...a,...n]})})}),e)}function D(e,t=!1){if(!e.length)return{instruction:"redirect",code:302};if(10003===e[0].statusCode)return{instruction:"redirect",code:t?404:301};const i=e[1],{statusCode:o,itemList:n=[]}=i;return 0!==o||0===n.length?{instruction:"redirect",code:302}:{instruction:"moveOn"}}function B(e,t){var i;return"related_search"===e&&"v2"===(null===(i=null==t?void 0:t.remove_related)||void 0===i?void 0:i.vid)}const{isPureNumber:z,hasIllegalText:N,isRealUniqueId:U,getPureUniqueId:W,purifyMusicName:q}=y.c,{getPureUserPath:G,getPureLivePath:H,getPureVideoPath:Z,getPureTagPath:$,getPureMusicPath:V,getPureStickerPath:Q,getPureQuestionPath:Y}=y.Z,K=[{processType:_.SERPProcessType.META_PATH,targetId:103,content:function(e){const{t}=e,i=[t("SERP discover title"),t("TikTok i18n keywords")].join(",");return{title:t("SEO_discover_title"),keywords:i,description:t("SEO_discover_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/discover`,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:103,content:function(e){const{language:t="en"}=e,i={"@id":"https://www.tiktok.com/#discover",url:p,name:c,description:"On your device or on the web, join millions of viewers on the fastest growing video app. Download TikTok to discover new creators, search popular hashtags, and watch trending videos.",publisher:T(v.o6,t)},o=P([{url:v.o6,name:a},{url:p,name:c}]);return[[h.JsonldType.WebSite,i],[h.JsonldType.BreadcrumbList,o]]}}],J=[{processType:_.SERPProcessType.META_PATH,targetId:101,content:function(e){const{language:t="en",t:i}=e,o=[i("SEO TikTok Keyword"),i("TikTok i18n keywords for home")].join(",");return{title:i("SEO_homepage_title"),keywords:o,description:i("SEO_homepage_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/${t}/`,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:101,content:function(e){const{language:t="en"}=e,i=`${v.o6}/${t}/`,o={"@id":"https://www.tiktok.com/#website",url:i,name:"TikTok - Make Your Day",description:"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.",publisher:T(i,t),potentialAction:[{"@type":"SearchAction",target:"https://www.tiktok.com/search?q={search_term_string}","query-input":s},{"@type":"SearchAction",target:"tiktok://search?keyword={search_term_string}","query-input":s}]};return[[h.JsonldType.WebSite,o]]}}],X=[{processType:_.SERPProcessType.META_PATH,targetId:5,content:function(e){const{language:t="en",t:i}=e,o=["TikTok Trends","TikTok Trending","Trending Videos","Trending Hashtags","TikTok i18n keywords"].map((e=>i(e))).join(",");return{title:i("SEO_trending_title"),keywords:o,description:i("SEO_trending_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/foryou?lang=${t}`,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:5,content:function(e){const{seoProps:{itemList:t}={},language:i="en"}=e,o={"@id":"https://www.tiktok.com/#foryou",url:d,name:l,description:"It starts on TikTok. Join the millions of viewers discovering content and creators on TikTok  available on the web or on your mobile device.",publisher:T(v.o6,i)},n=P([{url:v.o6,name:a},{url:d,name:l}]);return[[h.JsonldType.WebSite,o],[h.JsonldType.BreadcrumbList,n],[h.JsonldType.ItemList,null!=t?t:{}]]}}],ee=[{processType:_.SERPProcessType.META_PATH,targetId:11,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_following_title"),keywords:i("TikTok i18n keywords"),description:i("SEO_following_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/following?lang=${t}`,applicableDevice:"pc, mobile"}}}],te=[{processType:_.SERPProcessType.META_PATH,targetId:105,content:function(e){var t,i,o,n,a,s;const{pathname:l="/search",input_keyword:d,t:c}=e,p=null!==(i=null===(t=e)||void 0===t?void 0:t.user_list)&&void 0!==i?i:[],u=null!==(n=null===(o=e)||void 0===o?void 0:o.item_list)&&void 0!==n?n:[],g=null!==(s=null===(a=e)||void 0===a?void 0:a.data)&&void 0!==s?s:[],h=0===e.status_code&&(p.length>0||(null==u?void 0:u.length)>0||(null==g?void 0:g.length)>0),_=c("SEO_search_title",{searchkeywords:`'${d}'`}),v=c("SEO_search_desc",{searchkeywords:`'${d}'`});return{title:_,keywords:[d,"tiktok search",c("TikTok i18n keywords")].join(","),description:v,robotsContent:h?m.INDEX:m.NO_INDEX,canonicalHref:`${r}${l}?q=${d}`,applicableDevice:"pc, mobile"}}}];function ie(e){var t,i,o,n,a,s,l;const{itemInfo:d,statusCode:c,seoProps:p,t:u}=e,{preferredLanguage:g}=null!=p?p:{},h=j(e),_=function({statusCode:e=0}={}){return 10216===e}(e);if(_)return{};const{id:v,desc:y,stickersOnItem:b=[],challenges:f,stats:S}=null!==(t=null==d?void 0:d.itemStruct)&&void 0!==t?t:{},{diggCount:P=0,commentCount:T=0}=null!=S?S:{},{nickname:O,uniqueId:L}=null!==(o=null===(i=null==d?void 0:d.itemStruct)||void 0===i?void 0:i.author)&&void 0!==o?o:{},{title:I,authorName:A}=null!==(a=null===(n=null==d?void 0:d.itemStruct)||void 0===n?void 0:n.music)&&void 0!==a?a:{},E=null!==(l=null===(s=null==d?void 0:d.itemStruct)||void 0===s?void 0:s.indexEnabled)&&void 0!==l&&l,M=U(L),R=(null!=f?f:[]).reduce(((e,t)=>(e.push(t.title||""),e)),[]).join(","),F=w(O,L),D=y?k(y):"",B=function(e="",t=""){return e.replace(` - ${t}`,"")+(t?` - ${t}`:"")}(I,null!=A?A:""),z=C(g);let N=`${u("video_SEO_title1",z({userText:F}))} ${D}`;const W=D.length;W>0&&W<=20?N=u("video_SEO_title2",z({videoText:D,musicName:B})):W>20&&(N=D);const q=[];O&&q.push(O),M&&L&&q.push(L),(null==R?void 0:R.length)&&q.push(R),q.push(u("TikTok i18n keywords",z()));const G=q.join(","),H=function(e=[],t=[4]){const i=[];e.forEach((({stickerType:e,stickerText:o=[]})=>{-1!==t.indexOf(null!=e?e:0)&&(null==o?void 0:o.length)&&i.push(...o)}));const o=i.length;return o>3&&(i.splice(3,o-3),i.push("...")),i}(b).join(" | "),Z=z({username:F,likes:x(P),comments:x(T),videoText:D}),$=[u(D?"video_SEO_desc3_2":"video_SEO_desc3_3",Z)];P>=50&&T>=5&&$.unshift(u("video_SEO_desc3_1",Z));let V=`${$.join(" ")} ${[H,I].filter((e=>Boolean(e))).join(". ")}.`;const Q=`${r}/@${L}/video/${v}`;let Y=h&&O&&M&&v&&E?m.INDEX:m.NO_INDEX;switch(Y=[Y,m.IMAGE_PREVIEW_LARGE].join(", "),c){case 10231:N=u("err_vid_geo"),V="";break;case 10216:case 10204:case 10215:case 10217:case 10240:case 10241:case 10242:N=u("err_vid"),V=""}return{title:N,keywords:G,description:V,canonicalHref:Q,robotsContent:Y,applicableDevice:"pc, mobile"}}const oe=[{processType:_.SERPProcessType.META_PATH,targetId:0,content:ie},{processType:_.SERPProcessType.JSONLD_PATH,targetId:0,content:function(e){var t,i,o,n;if(!j(e))return[];const{itemInfo:r,seoProps:s,t:l}=e,{metaParams:d,videoObject:c}=null!=s?s:{},{id:p,desc:u}=null!==(t=null==r?void 0:r.itemStruct)&&void 0!==t?t:{},{nickname:g,uniqueId:m,secUid:_,verified:y}=null!==(o=null===(i=null==r?void 0:r.itemStruct)||void 0===i?void 0:i.author)&&void 0!==o?o:{},b=G({secUid:_,uniqueId:m}),f=`${v.o6}${b}`,x=l(y?"user_SEO_official_title1":"user_SEO_title1",{username:U(m)?`${g} (@${m})`:`${g}`}),k=Z({secUid:_,uniqueId:m,videoId:p}),w=`${v.o6}${k}`,S=null!==(n=null==d?void 0:d.title)&&void 0!==n?n:u,C=P([{url:v.o6,name:a},{url:f,name:x},{url:w,name:null!=S?S:""}]);return[[h.JsonldType.BreadcrumbList,C],[h.JsonldType.VideoObject,null!=c?c:{}]]}}],ne=[{processType:_.SERPProcessType.META_PATH,targetId:1,content:function(e){const{userInfo:t={},statusCode:i,t:o}=e,n=j(e),{user:{verified:a=!1,nickname:s="",uniqueId:l="",signature:d=""}={},stats:{heart:c=0,followerCount:p=0}={}}=t,u=U(l),g=w(s,l),h=[];s&&h.push(s),u&&h.push(l),h.push(o("TikTok i18n keywords"));let _=o(a?"user_SEO_official_title2":"user_SEO_title2",{username:g,nickName:s});const v=h.join(","),y=o("user_SEO_desc3",{username:g}),b=d.length<30?`${d} ${y}`:d;let f=`${o("user_SEO_desc2",{username:g,heart:x(Number(c)),follower:x(p)})} ${k(b)}`;const S=G({secUid:"",uniqueId:l}),C=`${r}${S}`;let P=n&&s&&u?m.INDEX:m.NO_INDEX;switch(P=[P,m.IMAGE_PREVIEW_LARGE].join(", "),i){case 10202:case 10221:case 10102:case 10223:_=o("err_user"),f="";break;case 10222:_=o("err_user_private"),f=""}return{title:_,keywords:v,description:f,canonicalHref:C,robotsContent:P,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:1,content:function(e){var t;const{userInfo:i,seoProps:{itemList:o}={}}=e,{nickname:n,uniqueId:r="",secUid:s,signature:l}=null!==(t=null==i?void 0:i.user)&&void 0!==t?t:{},d=G({secUid:null!=s?s:"",uniqueId:r}),c=`${v.o6}${d}`,p=(U(r)?`${n} (@${r})`:`${n}`)+" | TikTok",u=P([{url:v.o6,name:a},{url:c,name:p}]),g={name:null!=n?n:"",description:null!=l?l:"",alternateName:r,mainEntityOfPage:{"@type":"ProfilePage","@id":c}};return[[h.JsonldType.ItemList,null!=o?o:{}],[h.JsonldType.BreadcrumbList,u],[h.JsonldType.Person,g]]}}];function ae(e){var t,i;const{challengeInfo:o,statusCode:n,seoProps:a,t:s}=e,l=j(e),{challenge:{title:d="",desc:c=""}={},stats:{viewCount:p=0}={}}=null!=o?o:{},{title:u,body:g}=null!==(t=null==o?void 0:o.challengeAnnouncement)&&void 0!==t?t:{},h=null!==(i=null==o?void 0:o.challenge.splitTitle)&&void 0!==i?i:null==a?void 0:a.splitTitle,_=`${k(null!=u?u:"")} ${k(null!=g?g:"")}`.trim(),v=`#${d}`,y=null!=h?h:v;let b=s("hashtag_SEO_title2",{hashtag:v});const f=[h,d,s("TikTok i18n keywords")].filter((e=>Boolean(e))).join(",");let w=`${s("hashtag_SEO_desc1",{tagText:y,views:x(Number(p)),hashtag:v})} ${_?`${_} `:""}${k(c)}`;const S=l&&d,C=`${r}${$({tagName:d})}`,P=S?m.INDEX:m.NO_INDEX;switch(n){case 10205:case 10209:case 10211:case 10212:b=s("err_tag"),w=""}return{title:b,keywords:f,description:w,canonicalHref:C,robotsContent:P,applicableDevice:"pc, mobile"}}const re=[{processType:_.SERPProcessType.META_PATH,targetId:3,content:ae},{processType:_.SERPProcessType.JSONLD_PATH,targetId:3,content:function(e){var t,i;const{challengeInfo:o,seoProps:{itemList:n,metaParams:r}={}}=e,{title:s=""}=null!==(t=null==o?void 0:o.challenge)&&void 0!==t?t:{},l=`${v.o6}${$({tagName:s})}`,d=null!==(i=null==r?void 0:r.title)&&void 0!==i?i:`#${s} | TikTok`,c={"@type":"ItemPage","@id":l},p=P([{url:v.o6,name:a},{url:l,name:d}]);return[[h.JsonldType.Page,c],[h.JsonldType.ItemList,null!=n?n:{}],[h.JsonldType.BreadcrumbList,p]]}}];var se=i(29046);const le=[{processType:_.SERPProcessType.META_PATH,targetId:117,content:function(e){var t,i;const{challengeInfo:o,statusCode:n,seoProps:a,t:s}=e,{preferredLanguage:l}=null!=a?a:{},d=j(e),{challenge:{title:c="",desc:p=""}={},stats:{viewCount:u=0}={}}=null!=o?o:{},{title:g,body:h}=null!==(t=null==o?void 0:o.challengeAnnouncement)&&void 0!==t?t:{},_=null!==(i=null==o?void 0:o.challenge.splitTitle)&&void 0!==i?i:null==a?void 0:a.splitTitle,v=`${k(null!=g?g:"")} ${k(null!=h?h:"")}`.trim(),y=`#${c}`,b=null!=_?_:y,f=C(l);let w=s("hashtag_SEO_title2",f({hashtag:y}));const S=[_,c,s("TikTok i18n keywords",f())].filter((e=>Boolean(e))).join(",");let P=`${s("hashtag_SEO_desc1",f({tagText:b,views:x(Number(u)),hashtag:y}))} ${v?`${v} `:""}${k(p)}`;const T=d&&c,O=`${r}${se.T2.amp({name:c})}`,L=T?m.INDEX:m.NO_INDEX;switch(n){case 10205:case 10209:case 10211:case 10212:w=s("err_tag"),P=""}return{title:w,keywords:S,description:P,canonicalHref:O,robotsContent:L,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:117,content:function(e){var t;const{challengeInfo:i,seoProps:{itemList:o}={}}=e,{title:n=""}=null!==(t=null==i?void 0:i.challenge)&&void 0!==t?t:{},r=`${v.o6}${se.T2.amp({name:n})}`,s=`TikTok - #${n} | AMP`,l={"@type":"ItemPage","@id":r},d=P([{url:v.o6,name:a},{url:r,name:s}]);return[[h.JsonldType.Page,l],[h.JsonldType.ItemList,null!=o?o:{}],[h.JsonldType.BreadcrumbList,d]]}}];function de(e){var t;const{musicInfo:i,statusCode:o,t:n}=e,a=j(e),{music:{id:s="",title:l="",authorName:d="",scheduleSearchTime:c=0}={}}=null!=i?i:{},{videoCount:p}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{};let u=n("music_SEO_title1",{musicName:l,authorName:d});const g=[l,d,n("TikTok i18n keywords")].join(",");let h=n("music_SEO_desc3",{musicName:l,authorName:d,posts:x(p)}),_=!0;if(0!==c){const e=Number(new Date);_=1e3*Number(c)<=e}const v=a&&l&&s,y=V({musicName:l,musicId:s}),b=`${r}${y}`,f=v&&_?m.INDEX:m.NO_INDEX;switch(o){case 10203:case 10218:u=n("err_sound"),h="";break;case 10219:u=n("err_sound_copy"),h=""}return{title:u,keywords:g,description:h,canonicalHref:b,robotsContent:f,applicableDevice:"pc, mobile"}}const ce=[{processType:_.SERPProcessType.META_PATH,targetId:4,content:de},{processType:_.SERPProcessType.JSONLD_PATH,targetId:4,content:function(e){var t;const{musicInfo:i,seoProps:o,t:n}=e,{itemList:r,metaParams:s}=null!=o?o:{},{title:l="",id:d="",authorName:c="",coverMedium:p="",duration:u=0,album:g=""}=null!==(t=null==i?void 0:i.music)&&void 0!==t?t:{},{title:m,description:_}=null!=s?s:{},y=V({musicName:l,musicId:d}),b=`${v.o6}${y}`,f=null!=m?m:`${l}(${c}) | TikTok`,x={"@type":"ItemPage","@id":b},k=P([{url:v.o6,name:a},{url:b,name:f}]),w={url:b,name:l,description:null!=_?_:"",image:p,duration:S(null!=u?u:0),byArtist:{"@type":"Person",name:[null!=c?c:""]},inAlbum:{"@type":"MusicAlbum",name:null!=g?g:""}};return[[h.JsonldType.Page,x],[h.JsonldType.ItemList,null!=r?r:{}],[h.JsonldType.BreadcrumbList,k],[h.JsonldType.MusicRecording,w]]}}],pe=[{processType:_.SERPProcessType.META_PATH,targetId:116,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_Recharge_title"),keywords:"recharge, coins recharge, get coins, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:i("SEO_Recharge_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/coin?lang=${t}`,applicableDevice:"pc, mobile"}}}],ue=[{processType:_.SERPProcessType.META_PATH,targetId:111,content:function(e){const{language:t="en",t:i,contentInfo:o,eventName:n}=e;return{title:o?i("search_on_tiktok",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("offline_title",{ns:"MT_Reflow"}),keywords:`${i("landing_page_key_word_1",{ns:"MT_Reflow"})},${null==o?void 0:o.query}`,description:o?i("outapp_copywriter",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("expiration_reminder",{ns:"MT_Reflow"}),robotsContent:m.INDEX,canonicalHref:`https://www.tiktok.com/search/campaign/${n}?lang=${t}`,applicableDevice:"pc, mobile"}}}];function ge(e){if(!e)return{};const{keyword:t,challengeResponse:i,t:o,detailResponse:n}=e,{challengeInfoList:a=[]}=null!=i?i:{},{word:{content:r=""}={language:void 0}}=null!=n?n:{},s=r.replace(/-/g," "),l=o("expansion_SEO_title",{expansion_keywords:s}),d=[o(s),o("TikTok i18n keywords")].join(","),c=`${p}/${t}`,u=a.map((e=>{var t,i;return`#${null!==(i=null===(t=null==e?void 0:e.challenge)||void 0===t?void 0:t.title)&&void 0!==i?i:""}`})).join(", "),g=u&&u.length>0?o("expansion_SEO_desc_num3",{hashtagText:u}):"";return{title:l,keywords:d,description:`${o("expansion_SEO_desc_num1",{expansion_keywords:s})} ${g}`,robotsContent:"index, follow",canonicalHref:c,applicableDevice:"pc, mobile"}}const me=[{processType:_.SERPProcessType.META_PATH,targetId:104,content:ge},{processType:_.SERPProcessType.JSONLD_PATH,targetId:104,content:function(e){const{keyword:t="",seoProps:{itemList:i}={}}=e,o=`${p}/${t}`,n={"@type":"ItemPage","@id":o},r=P([{url:v.o6,name:a},{url:p,name:"Discover"},{url:o,name:t}]);return[[h.JsonldType.Page,n],[h.JsonldType.BreadcrumbList,r],[h.JsonldType.ItemList,null!=i?i:{}]]}}];function he(e){return!!e&&e.originalItem}function _e(e){return Boolean(e)&&!(null==e?void 0:e.originalItem)}const ve=(e,t)=>{var i,o,n;return{t,itemInfo:{itemStruct:Object.assign(Object.assign({},e),{author:{id:null!==(i=e.authorId)&&void 0!==i?i:"",uniqueId:null!==(o=e.author)&&void 0!==o?o:"",nickname:null!==(n=e.nickname)&&void 0!==n?n:"",secUid:e.authorSecId}})}}};function ye(e,t){var i,o,n,a,r,s,l,d;return{"@type":"Answer",text:(null!==(o=null===(i=e.stickersOnItem)||void 0===i?void 0:i.map((e=>{var t;return null===(t=e.stickerText)||void 0===t?void 0:t.join(".")})))&&void 0!==o?o:[]).concat(null==e?void 0:e.desc).filter(Boolean).join(".")||(null!==(n=ie(ve(e,t)).title)&&void 0!==n?n:""),dateCreated:new Date(1e3*Number(e.createTime)).toISOString(),upvoteCount:null!==(r=null===(a=e.stats)||void 0===a?void 0:a.diggCount)&&void 0!==r?r:0,url:`${v.o6}${Z({secUid:e.authorSecId,uniqueId:null!==(s=e.author)&&void 0!==s?s:"",videoId:e.id})}`,author:{"@type":"Person",alternateName:null!==(l=e.author)&&void 0!==l?l:"",name:null!==(d=e.nickname)&&void 0!==d?d:""}}}const be=[{processType:_.SERPProcessType.META_PATH,targetId:16,content:function(e){const{questionInfo:t,t:i}=e,o=j(e),{id:n="",content:a="",videoCount:r}=null!=t?t:{},s=o&&a&&n,l=s?i("SEO_qa_title_1",{question:a}):"",d=[i("TikTok i18n keywords")].join(","),c=s?i("SEO_qa_desc_1",{question:a,number:x(r)}):"",p=Y({questionContent:a,questionId:n});return{title:l,keywords:d,description:c,canonicalHref:`${v.o6}${p}`,robotsContent:s?m.INDEX:m.NO_INDEX,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:16,content:function(e){var t,i,o,n,r;const{questionInfo:s,seoProps:l,t:d,answers:c}=e,{itemList:p,metaParams:u}=null!=l?l:{},{id:g="",content:m="",videoCount:_,creator:y,createTime:b}=null!=s?s:{},f=j(e)&&m&&g,{title:x}=null!=u?u:{},k=Y({questionContent:m,questionId:g}),w=`${v.o6}${k}`,S=null!=x?x:`${m} | TikTok Q&A`,C={"@type":"ItemPage","@id":w},T=P(f?[{url:v.o6,name:a},{url:w,name:S}]:[{url:v.o6,name:a}]);let O={};if(f){const e=null===(t=c.filter(he))||void 0===t?void 0:t[0],a=[m,null!==(i=null==e?void 0:e.desc)&&void 0!==i?i:""].join("."),s={"@type":"Question",name:m,text:a,answerCount:_,dateCreated:void 0===b?b:new Date(1e3*Number(b)).toISOString(),author:{"@type":"Person",name:null!==(o=null==y?void 0:y.nickname)&&void 0!==o?o:"",alternateName:null!==(n=null==y?void 0:y.uniqueId)&&void 0!==n?n:""}};if(0===c.length)O={mainEntity:Object.assign(Object.assign({},s),{suggestedAnswer:[]})};else{const t=null===(r=c.filter(_e))||void 0===r?void 0:r[0],i=null!=t?t:e,o=ye(i,d),n=c.filter((e=>_e(e)&&e.id!==(null==t?void 0:t.id))).slice(0,10),a=n.length>0?n:[i];O={mainEntity:Object.assign(Object.assign({},s),{acceptedAnswer:o,suggestedAnswer:a.map((e=>ye(e,d)))})}}}const L=[[h.JsonldType.Page,C],[h.JsonldType.ItemList,null!=p?p:{}],[h.JsonldType.BreadcrumbList,T]];return f&&L.push([h.JsonldType.QAPage,O]),L}}],fe=[{processType:_.SERPProcessType.META_PATH,targetId:14,content:function(e){var t;const{language:i="en",t:o,user:n}=e,a=null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",s=[null==n?void 0:n.nickName,`@${a}`,"live","live room","tiktok search",o("TikTok i18n keywords")].join(", ");return{title:o("SEO_live_title",{username:a}),keywords:s,description:o("SEO_live_title",{username:a}),robotsContent:m.INDEX,canonicalHref:`${r}/live/producer?lang=${i}`,applicableDevice:"pc, mobile"}}}],xe=[{processType:_.SERPProcessType.META_PATH,targetId:15,content:function(e){const{t}=e;return{title:t("SEO_live_discover_title"),keywords:"live, live stream, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:t("SEO_live_discover_desc"),robotsContent:m.INDEX,canonicalHref:`${r}/live`,applicableDevice:"pc, mobile"}}}],ke=[{processType:_.SERPProcessType.META_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:a,userInfo:r,LiveRoomInfo:s,event:l}=e,d=null!==(t=null==s?void 0:s.title)&&void 0!==t?t:"",c=null==s?void 0:s.status,p=null!==(o=null===(i=null==r?void 0:r.user)||void 0===i?void 0:i.uniqueId)&&void 0!==o?o:"",u=null===(n=null==r?void 0:r.user)||void 0===n?void 0:n.nickname,g=`${u} (@${p})`,h=[u,`@${p}`,"live","live room","tiktok search",a("TikTok i18n keywords")].join(", "),_=H({uniqueId:p}),y=`${v.o6}${_}`,b=a("SEO_live_title",{username:g});let f=`${d?`${d}. `:""}${a("SEO_live_desc",{username:g})}`;return!(2===c)&&l&&(f=`${a("SEO_live_desc2",{event_name:null==l?void 0:l.title,username:g})}`),{title:b,keywords:h,description:f,robotsContent:m.INDEX,canonicalHref:y,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:r,userInfo:s,seoProps:l,event:d}=e,{videoObject:c}=null!=l?l:{},p=null!==(i=null===(t=null==s?void 0:s.user)||void 0===t?void 0:t.uniqueId)&&void 0!==i?i:"",u=null!==(n=null===(o=null==s?void 0:s.user)||void 0===o?void 0:o.nickname)&&void 0!==n?n:"",g=H({uniqueId:p}),m=`${v.o6}${g}`,h=G({uniqueId:p}),_=`${v.o6}${h}`,y=U(p)?`${u} (@${p})`:`${u}`;return[["Event",d?{"@type":"Event",name:d.title,url:m,description:d.description,startDate:new Date(1e3*Number(d.startTime)).toISOString(),endDate:new Date(1e3*(Number(d.startTime)+Number(d.duration))).toISOString(),eventStatus:"http://schema.org/EventScheduled",eventAttendanceMode:"http://schema.org/OnlineEventAttendanceMode",location:{"@type":"VirtualLocation",url:m},Organizer:{"@type":"Organization",name:u,alternateName:p,url:_}}:{}],["BreadcrumbList",P([{url:v.o6,name:a},{url:_,name:y},{url:m,name:"LIVE"}])],["VideoObject",null!=c?c:{}]]}}],we=[{processType:_.SERPProcessType.META_PATH,targetId:17,content:function(e){const{mc_info:t,status_code:i,t:o}=e,{id_str:n="",name:a=""}=null!=t?t:{},s=0===i&&""!==a;let l=o("playlist_sharing_metatitle",{playlist_name:a});const d=[a,o("TikTok i18n keywords")].join(",");let c=o("playlist_sharing_metadescription",{playlist_name:a});return s||(l="",c=""),{title:l,keywords:d,description:c,canonicalHref:`${r}/playlist-music/${a}-${n}`,robotsContent:s?m.INDEX:m.NO_INDEX,applicableDevice:"pc, mobile"}}}],{JsonldType:Se}=h,je=new Map([["animals",{titleI18NKey:"SEO_foryou_animals_title",descriptionI18NKey:"SEO_foryou_animals_desc"}],["beauty",{titleI18NKey:"SEO_foryou_beauty_title",descriptionI18NKey:"SEO_foryou_beauty_desc"}],["comedy",{titleI18NKey:"SEO_foryou_comedy_title",descriptionI18NKey:"SEO_foryou_comedy_desc"}],["dance",{titleI18NKey:"SEO_foryou_dance_title",descriptionI18NKey:"SEO_foryou_dance_desc"}],["food",{titleI18NKey:"SEO_foryou_food_title",descriptionI18NKey:"SEO_foryou_food_desc"}],["gaming",{titleI18NKey:"SEO_foryou_gaming_title",descriptionI18NKey:"SEO_foryou_gaming_desc"}],["sports",{titleI18NKey:"SEO_foryou_sports_title",descriptionI18NKey:"SEO_foryou_sports_desc"}]]),Ce=[...K,...ee,...X,...re,...le,...J,...ce,...be,...te,...ne,...oe,...pe,...ue,...me,...fe,...xe,...ke,...we,{processType:_.SERPProcessType.META_PATH,targetId:113,content:function(e){var t;const{language:i="en",t:o,topic:n}=e,{titleI18NKey:a="",descriptionI18NKey:s=""}=null!==(t=je.get(n))&&void 0!==t?t:{};return a&&s?{title:o(a),keywords:o("TikTok i18n keywords"),description:o(s),robotsContent:m.INDEX,canonicalHref:`${r}/topics/${n}?lang=${i}`,applicableDevice:"pc, mobile"}:{}}},{processType:_.SERPProcessType.JSONLD_PATH,targetId:113,content:function(e){const{seoProps:{itemList:t}={}}=e;return[[Se.ItemList,null!=t?t:{}]]}},{processType:_.SERPProcessType.META_PATH,targetId:114,content:function(e){const{t,eventTitle:i="",eventId:o="",subscriberCount:n=""}=e;return{title:t("share_live_event_title",{"Event Topic":i}).replace("{Event Topic}",i),keywords:"live, live event, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:t("share_live_event_desc",{number:n}),robotsContent:m.INDEX,canonicalHref:`${r}/live/event/${o}`,applicableDevice:"pc, mobile"}}},{processType:_.SERPProcessType.META_PATH,targetId:119,content:function(e){var t,i;const{t:o,mixInfo:n,statusCode:a}=e,r=0===a,s=`@${null===(t=null==n?void 0:n.creator)||void 0===t?void 0:t.uniqueId}`,l=null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"Untitled playlist";return{title:o("playlist_share_title",{Playlist_name:l,username:s},`Playlist ${l} created by ${s}`),description:o("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!"),canonicalHref:r?`${v.o6}/${s}/playlist/${null==n?void 0:n.name}-${null==n?void 0:n.id}`:v.o6,robotsContent:r?m.INDEX:m.NO_INDEX,applicableDevice:"mobile"}}},{processType:_.SERPProcessType.META_PATH,targetId:6,content:function(e){var t,i,o,n;const{stickerInfo:{sticker:a}={},t:r}=e;return a?{title:r("share_effect_title",{sticker_name:a.name}),description:r("share_sticker_desc",{sticker_desc:a.desc,number:x(null!==(i=null===(t=a.stickerStats)||void 0===t?void 0:t.useCount)&&void 0!==i?i:0),num:null!==(n=null===(o=a.stickerStats)||void 0===o?void 0:o.useCount)&&void 0!==n?n:0}),robotsContent:m.INDEX,canonicalHref:`${v.o6}/sticker/${a.name}-${a.id}`,applicableDevice:"mobile"}:{title:r("share_sticker_preset"),description:"",robotsContent:m.NO_INDEX,applicableDevice:"mobile"}}}],Pe=[]},26802:(e,t,i)=>{"use strict";i.d(t,{F:()=>a});var o,n=i(93797);!function(e){e.ClickInsight="click_insight",e.EnterInsightDetail="enter_insight_detail",e.VideoPlay="video_play",e.ProfileHoveShow="livesdk_web_profile_hover_show"}(o||(o={}));const a={handleClickAnalyticsButton:()=>{n.W.event("click_insight"),n.W.event("enter_insight_detail",{widget_name:null,sub_widget:null})},handleClickAnalyticsVideoCover:()=>{n.W.event("video_play",{enter_from:"insight_page",widget_name:"null",sub_widget:"null",enter_method:"video_card"})},handleProfileHoveShow:()=>{n.W.event("livesdk_web_profile_hover_show")}}},48655:(e,t,i)=>{"use strict";i.d(t,{_:()=>a});var o,n=i(93797);!function(e){e.PageView="page_view",e.ClickToTop="click_to_top",e.Tap="tap",e.PageSlide="page_slide",e.GeneralClick="general_click"}(o||(o={}));const a={handlePageView:e=>{n.W.event("page_view",e)},handleToTop:()=>{n.W.event("click_to_top")},handleTap:e=>{n.W.event("tap",e)},handlePageSlide:()=>{n.W.event("page_slide")},handleGeneralClick:(e,t={})=>{n.W.event("general_click",Object.assign({section:e},t))}}},94806:(e,t,i)=>{"use strict";i.d(t,{Fx:()=>s});var o,n,a,r=i(93797);!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={})),function(e){e.Notify="download_app_notify",e.Confirm="download_app_confirm",e.Dismiss="download_app_dismiss",e.ClickAppStore="click_app_store",e.SwipeUpGuideShow="swipe_up_guide_show",e.SwipeUpGuideClose="swipe_up_guide_close"}(n||(n={})),function(e){e.XClose="x_close",e.ClickMask="click_mask",e.NotNow="not_now"}(a||(a={}));const s={handleClickAppStore:e=>{r.W.event("click_app_store",{channel:e,enter_from:"webapp_download_modal"})},handleDownloadShow:e=>{r.W.event("download_app_notify",e)},handleDownloadConfirm:e=>{r.W.event("download_app_confirm",e)},handleDownloadDismiss:e=>{r.W.event("download_app_dismiss",e)},handleNewUserGuideShow:e=>{r.W.event("swipe_up_guide_show",e)},handleNewUserGuideClose:e=>{r.W.event("swipe_up_guide_close",e)}}},75131:(e,t,i)=>{"use strict";i.d(t,{W:()=>a});var o,n=i(93797);!function(e){e.EnterTopicsPage="enter_topics_page",e.EnterTagDetail="enter_tag_detail",e.EnterMusicDetail="enter_music_detail",e.EnterDiscoveryPage="enter_discovery_page",e.EnterTrending="enter_homepage_hot",e.EnterUser="enter_personal_detail",e.EnterProfile="enter_personal_homepage",e.EnterVideo="enter_video_detail",e.EnterQuestion="enter_qa_detail_page",e.EnterSet="enter_setting_page",e.EnterFollowing="enter_homepage_follow",e.EnterSuicidePrevention="tns_show_ssh_tips_support_page",e.EnterLive="enter_live_detail",e.EnterBusiness="enter_business_suite",e.EnterAnalytics="click_insight",e.EnterLiveDiscover="enter_live_discover",e.EnterKeyboardShortcut="enter_keyboard_setting",e.EnterMessage="enter_homepage_message",e.EnterMusicPlaylist="enter_playlist_page",e.EnterQADetailPage="enter_qa_detail_page"}(o||(o={}));const a={handleEnterTagDetail:e=>{n.W.event("enter_tag_detail",e)},handleEnterMusicDetail:e=>{n.W.event("enter_music_detail",e)},handleDiscoveryPage:e=>{n.W.event("enter_discovery_page",e)},handleEnterTopic:e=>{n.W.event("enter_topics_page",e)},handleEnterTrending:e=>{n.W.event("enter_homepage_hot",e)},handleEnterUser:e=>{n.W.event("enter_personal_detail",e)},handleEnterProfile:e=>{n.W.event("enter_personal_homepage",e)},handleEnterVideo:e=>{n.W.event("enter_video_detail",e)},handleEnterQuestion:e=>{n.W.event("enter_qa_detail_page",e)},handleEnterSet:e=>{n.W.event("enter_setting_page",e)},handleEnterFollowing:e=>{n.W.event("enter_homepage_follow",e)},handleEnterSuicidePrevention:e=>{n.W.event("tns_show_ssh_tips_support_page",e)},handleEnterLive:e=>{n.W.event("enter_live_detail",e)},handleEnterBusiness:()=>{n.W.event("enter_business_suite")},handleEnterLiveDiscover:e=>{n.W.event("enter_live_discover",e)},handleEnterKeyboardShortcut:()=>{n.W.event("enter_keyboard_setting")},handleEnterMessage:e=>{n.W.event("enter_homepage_message",Object.assign({enter_method:"click_button"},e))},handleEnterMusicPlaylist:e=>{n.W.event("enter_live_discover",e)},handleEnterQADetailPage:e=>{n.W.event("enter_qa_detail_page",e)}}},70754:(e,t,i)=>{"use strict";i.d(t,{e:()=>r});var o,n,a=i(93797);!function(e){e.ClickEntry="feedback",e.Confirm="feedback_confirm",e.Continue="feedback_continue",e.Submit="feedback_submit"}(o||(o={})),function(e){e.Yes="yes",e.No="no"}(n||(n={}));const r={handleEnterFeedback:e=>{a.W.event("feedback",{feedback_type:e})},handleSubmitFeedback:()=>{a.W.event("feedback_submit")},handleFeedbackResponseClick:e=>{a.W.event("feedback_confirm",{enter_method:"click_"+(e?"yes":"no")})},handleNeedMoreHelpClick:()=>{a.W.event("feedback_continue")}}},71963:(e,t,i)=>{"use strict";i.d(t,{ZI:()=>d});var o=i(64047),n=i(57244),a=i(93797);var r,s,l;!function(e){e.ClickSignUp="click_sign_up",e.ClickLogin="click_login"}(r||(r={})),function(e){e.Qrcode="QRcode",e.Email="email",e.Username="handle",e.PhonePassword="phone",e.Sms="sms_verification",e.Repeat="repeatLogin",e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(s||(s={})),function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.Cancelled=2]="Cancelled"}(l||(l={}));let d=class{constructor(){this.setPlatform=e=>{this.platform=e},this.event=(e,t)=>{a.W.event(e,Object.assign({platform:this.platform},t))},this.loginNotify=()=>{a.W.event("login_notify")},this.LoginNotifyClose=e=>{a.W.commonParams.enter_from&&"unknown"!==a.W.commonParams.enter_from&&a.W.config({commonEventParams:{page_name:a.W.commonParams.enter_from}}),this.event("login_notify_close",e)},this.loginSubmit=e=>{this.event("login_submit",{enter_type:(null==e?void 0:e.signUp)?"click_sign_up":"click_login"})},this.loginSuccess=e=>{this.event("login_success",{enter_type:e.signUp?"click_sign_up":"click_login",is_register:e.is_register})},this.loginFailure=e=>{this.event("login_failure",{enter_type:e.signUp?"click_sign_up":"click_login",error_code:e.error_code})},this.thirdPartyLoginResult=e=>{this.event("monitor_login_thirdparty",e)},this.ageGateShow=()=>{this.event("age_gate_show",{enter_type:"click_sign_up"})},this.twoStepNotify=e=>{this.event("login_two_step_verification_notify",e)},this.twoStepSubmit=e=>{this.event("login_two_step_verification_submit",e)},this.twoStepResult=e=>{this.event("login_two_step_verification_result",e)},this.forceResetSubmit=()=>{this.event("forced_pwchange_submit")},this.forceResetSuccess=()=>{this.event("forced_pwchange_success")}}};d=(0,o.__decorate)([(0,n.G)()],d)},43094:(e,t,i)=>{"use strict";i.d(t,{R:()=>a});var o,n=i(93797);!function(e){e.EnterChatList="enter_chat_list",e.LeaveChatList="leave_chat_list",e.LeaveChat="leave_chat",e.DeleteChat="delete_chat",e.AcceptStrangerChat="accept_stranger_chat",e.ReportStrangerChat="report_stranger_chat",e.DeleteStrangerChat="delete_stranger_chat",e.SendMessage="send_message",e.FailSendMessage="fail_send_message",e.LikeMessage="like_message",e.DeleteMessage="delete_message",e.ReportMessage="report_message",e.ChatSettingClick="chat_setting_click",e.ChatMuteClick="chat_mute_click",e.ChatTopClick="chat_top_click",e.EnterStrangerChatList="enter_stranger_chat_list",e.ChangeMessagePermission="change_message_permission",e.ChangeBrandMessageStatus="change_brand_message_status",e.EnterChat="enter_chat",e.ShareHeadShow="share_head_show",e.ShareVideoToChat="share_video_to_chat",e.SearchContact="search_contact",e.ShareVideo="share_video"}(o||(o={}));const a={handleEnterChatList:e=>{n.W.event("enter_chat_list",{num:e})},handleSendMessage:e=>{n.W.event("send_message",e)},handleFailSendMessage:e=>{n.W.event("fail_send_message",e)},handleShareHeadShow:e=>{n.W.event("share_head_show",e)},handleShareVideoToChat:e=>{n.W.event("share_video_to_chat",e)},handleSearchContact:()=>{n.W.event("search_contact",{action_type:"share"})},handleLeaveChatList:()=>{n.W.event("leave_chat_list")},handleEnterStrangerChatList:()=>{n.W.event("enter_stranger_chat_list")},handleChatSettingClick:e=>{n.W.event("chat_setting_click",{conversation_id:e,chat_type:"private"})},handleChatMuteClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_mute_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleChatTopClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_top_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleDeleteChat:({is_stranger:e,conversation_id:t})=>{n.W.event("delete_chat",{is_stranger:e?1:0,conversation_id:t,chat_type:"private"})},handleEnterChat:({relation_tag:e,is_stranger:t,conversation_id:i,chat_type:o})=>{n.W.event("enter_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i,chat_type:o})},handleAcceptStrangerChat:()=>{n.W.event("accept_stranger_chat")},handleDeleteMessage:e=>{n.W.event("delete_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleReportMessage:e=>{n.W.event("report_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleLikeMessage:({conversation_id:e,to_user_id:t})=>{n.W.event("like_message",{conversation_id:e,to_user_id:t,chat_type:"private"})},handleChangeMessagePermission:e=>{n.W.event("change_message_permission",{to_status:e})},handleChangeBrandMessageStatus:e=>{n.W.event("change_brand_message_status",{to_status:e})},handleLeaveChat:({relation_tag:e,is_stranger:t,conversation_id:i})=>{n.W.event("leave_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i})}}},72852:(e,t,i)=>{"use strict";i.d(t,{xq:()=>d});var o,n,a,r,s,l=i(93797);!function(e){e.TrendingWordsShow="trending_words_show",e.TrendingWordsClick="trending_words_click",e.Search="search",e.SearchResultShow="search_result_show",e.SearchResultShowVideo="search_result_show_video",e.SearchResultClick="search_result_click",e.SearchSessionFinish="search_session_finish",e.EnterSearch="enter_search",e.EmptySearch="empty_search"}(o||(o={})),function(e){e.ClickEnter="click_enter",e.ClickIcon="click_icon",e.ClickViewAll="click_view_all",e.Solved="_solved"}(n||(n={})),function(e){e.EnrichSug="enrich_sug",e.NormalSug="normal_sug"}(a||(a={})),function(e){e.User="user",e.Video="video",e.General="general"}(r||(r={})),function(e){e.NormalSearch="normal_search",e.SearchOuter="search_outer",e.SwitchTab="switch_tab",e.ClickMoreGeneralList="click_more_general_list"}(s||(s={}));const d={handleSugClick:e=>{l.W.event("trending_words_click",e)},handleSugImpression:e=>{l.W.event("trending_words_show",e)},handleSearchEntry:()=>{l.W.event("enter_search")},handleSearchImpression:e=>{l.W.event("search_result_show",Object.assign(Object.assign({},e),{token_type:"person"}))},handleSearchVideoImpression:e=>{l.W.event("search_result_show_video",Object.assign({},e))},handleSearch:e=>{l.W.event("search",Object.assign(Object.assign({},e),{is_success:1}))},handleSearchResultClick:e=>{l.W.event("search_result_click",Object.assign({},e))},handleSearchSessionFinish:e=>{l.W.event("search_session_finish",e)},handleSearchResultEmpty:e=>{l.W.event("empty_search",Object.assign({},e))}}},92396:(e,t,i)=>{"use strict";i.d(t,{p:()=>a});var o,n=i(93797);!function(e){e.SaveProfile="save_profile",e.ClickEditProfile="click_edit_profile",e.EditProfileNotifyShow="edit_profile_notify_show",e.CancelEditProfile="cancel_edit_profile",e.CancelEditProfileShow="cancel_edit_profile_show"}(o||(o={}));const a={handleSaveReport:e=>{n.W.event("save_profile",e)},handleClickEditProfile:e=>{n.W.event("click_edit_profile",e)},handleShowProfileTooltip:e=>{n.W.event("edit_profile_notify_show",e)},handleCancelEditProfile:e=>{n.W.event("cancel_edit_profile",e)},handleCloseProfileTooltip:e=>{n.W.event("cancel_edit_profile_show",e)}}},5100:(e,t,i)=>{"use strict";i.d(t,{KF:()=>s});var o,n=i(64047),a=i(57244),r=i(93797);!function(e){e.PageFCP="page_content_paint",e.FirstScreen="first_screen_video",e.FirstFrame="first_frame_video",e.InteractAddition="interact_additional_video_end",e.InteractExisted="interact_existed_video_end",e.RouteChange="video_route_change",e.InteractAdditionStart="interact_additional_video_start",e.InteractExistedStart="interact_existed_video_start",e.SwiperSlideTransitionEnd="swiper_slide_transition_end"}(o||(o={}));let s=class{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.shouldFirstLoadReportSkip=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{r.W.event(e,t)}catch(e){console.error(`Video Scene Evnet Tea Report Error: ${e}`)}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{const{endTime:t,videoSource:i}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay()||this.shouldFirstLoadReportSkip)return;const e=performance.timeOrigin||performance.timing.navigationStart,o={duration:Math.round(t-e),to_page:this.currentPage};this.emit("first_screen_video",o),this.resetAddition(),this.setReportVideoSource(i,0)}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport){if(this.firstFrameReport=!0,!this.checkIfCanReportFirstFrame())return;const e=performance.timeOrigin||performance.timing.navigationStart,t={duration:Math.round(Date.now()-e),to_page:this.currentPage};this.emit("first_frame_video",t)}},this.reportVideoAddition=e=>{const t=this.additionQueue[0],{endTime:i,videoSource:o}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(o,0))return;const{startTime:n=0,situation:a="",from_page:r=""}=t,s=this.currentPage;if(!this.currentPageReport&&r!==s){this.currentPageReport=!0;const e={situation:a,from_page:r,to_page:s,duration:i-n};this.emit("interact_additional_video_end",e),this.resetAddition(),this.setReportVideoSource(o,0)}},this.reportVideoInteract=e=>{const t=this.existedQueue[0]||{},{startTime:i=0,situation:o="",from_page:n=""}=t,{endTime:a,videoSource:r}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(r,1)&&"open_browser_mode"!==o)return;const s={situation:o,from_page:n,to_page:this.currentPage,duration:a-i};this.emit("interact_existed_video_end",s),this.resetExist(),this.setReportVideoSource(r,1)},this.reportVideoAdditionStart=e=>{const{situation:t,startTime:i}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:i,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t;const i=this.existedQueue[0];if(!this.isEmptyEvent(i)){const{situation:o=""}=i;if((null!==(t=e.situation)&&void 0!==t?t:"").indexOf("one_column_scroll")>-1&&o.indexOf("browser_mode")>-1)return}const{startTime:o,situation:n,currVideoIndex:a,prevVideoIndex:r,enterMethod:s}=e;if(a&&a>0&&a===this.reportedScrollCurrIndex&&r===this.reportedScrollPrevIndex)return;const l=this.currentPage;this.existedQueue=[{startTime:o,situation:n,from_page:l}];const d={situation:n,from_page:this.currentPage,enter_method:s};this.emit("interact_existed_video_start",d),this.reportedScrollCurrIndex=null!=a?a:-1,this.reportedScrollPrevIndex=null!=r?r:-1},this.reportSlideTransitionStart=e=>{const{from_page:t,start_time:i,current_index:o}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:i,current_index:o}]},this.reportSlideTransitionEnd=e=>{const t=this.slideTransitionExsitedQueue[0]||{},{from_page:i,start_time:o,current_index:n}=t,{from_page:a,end_time:r,current_index:s}=e;if(this.isEmptyEvent(t)||a!==i||s===n)return;const l={from_page:a,situation:s-n>0?"swiper_slide_next":"swiper_slide_prev",duration:r-o};this.emit("swiper_slide_transition_end",l),this.slideTransitionExsitedQueue=[]},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>d.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[],this.handleUserChangeVideoOrPlayMode=()=>{this.shouldFirstLoadReportSkip=!0},this.handleRouteChange=e=>{this.currentPage&&e&&(this.shouldFirstLoadReportSkip=!0)}}};s=(0,n.__decorate)([(0,a.G)()],s);const l=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],d=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song"];var c;!function(e){e.BrowserModeNext="browser_mode_next",e.BrowserModePrev="browser_mode_prev",e.OneColumnScrollNext="one_column_scroll_next",e.OneColumnScrollPrev="one_column_scroll_prev",e.OpenBrowserMode="open_browser_mode",e.AdditionFirstLoad="addition_first_load",e.SwiperSlideNext="swiper_slide_next",e.SwiperSlidePrev="swiper_slide_prev",e.ThreeColumnUserHover="three_column_user_hover",e.ThreeColumnUserTouch="three_column_user_touch",e.VideoDatailSelect="video_detail_select"}(c||(c={}))},37326:(e,t,i)=>{"use strict";i.d(t,{k:()=>T});var o,n,a,r,s,l,d=i(64047),c=i(57244),p=i(93797),u=i(90293);!function(e){e[e.HaveNothing=0]="HaveNothing",e[e.HaveMetaData=1]="HaveMetaData",e[e.HaveCurrentData=2]="HaveCurrentData",e[e.HaveFutureData=3]="HaveFutureData",e[e.HaveEnoughData=4]="HaveEnoughData"}(o||(o={})),function(e){e[e.Public=0]="Public",e[e.Self=1]="Self",e[e.Friend=2]="Friend"}(n||(n={})),function(e){e[e.PlayStop=0]="PlayStop",e[e.ResumePlaying=1]="ResumePlaying"}(a||(a={})),function(e){e.FeedRequest="feed_request",e.FeedRequestResponse="feed_request_response"}(r||(r={})),function(e){e.LoadMore="load_more"}(s||(s={})),function(e){e.PlayQuality="video_play_quality",e.PlayEnded="video_play_end",e.PlayFailed="video_play_failed",e.BlockStart="video_block_start",e.Block="video_block",e.Request="video_request",e.RequestResponse="video_request_response",e.FirstFrame="first_feed_show_time"}(l||(l={}));const g={0:"one_column",1:"three_column",2:"browser_mode",3:"large_video_mode",4:"video_detail"},m=e=>e&&Array.isArray(e)?e.map((e=>{var t;return null!==(t=e.GearName)&&void 0!==t?t:"unknown"})):null,h=e=>e&&Array.isArray(e)?e.map((e=>`${e.QualityType}:${e.Bitrate}`)):null,_=()=>{var e,t;return{cpu_core:null!==(e=null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)&&void 0!==e?e:0,memory_size:null!==(t=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==t?t:0}},v=e=>void 0!==e&&e.length>0?1e3*Math.round(e.end(0)-e.start(0)):0,y=(e,t)=>e?2:t?1:0,b=e=>{var t,i;return e?null!==(i=null===(t=(0,u.parse)(e).lr)||void 0===t?void 0:t.toString())&&void 0!==i?i:"none":"unknown"},f=e=>{var t;const{id:i,authorId:o,playMode:n,currentSrc:a="",forFriend:r=!1,secret:s=!1}=e;return{group_id:i,author_id:o,play_mode:null!==(t=g[n])&&void 0!==t?t:"others",logo_type:b(a),item_status:y(r,s)}},x=(e,t)=>{const i=(e=>!e||/^(\d)*p$/i.test(`${e}`))(t);return i?e&&t?`${e}_${t}`:`unknownQuality_${e}_${t}`:t},k=e=>{const{bitrate:t=-1,format:i="",codecType:o="",encodedType:n="",videoQuality:a="",definition:r="",encodeUserTag:s=""}=e;return{video_bitrate:t,video_format:i,codec_format:o,encoded_type:n,bitrate_quality:a,video_quality:String(x(a,r)),video_encodeUserTag:s}},w=e=>{const{preload_size:t=-1,preload_time:i=-1,video_type:o="mp4",player_type:n="defaultPlayer"}=e;return{preload_size:t,preload_time:i,player_type:n,video_type:o}},S=e=>{const{totalWatchCount:t,foruWatchCount:i}=e;return{watch_count_total:t,watch_count_foru:i}},j={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0,volume:0,muted:!0,mutedStateChange:!1},C={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:()=>0,end:()=>0,length:0},volume:0,muted:!0,mutedStateChange:!1};let P=1,T=class{constructor(){this.innerStates=Object.assign({},j),this.innerVideoAttributeStates=Object.assign({},C),this.isFirstFrameReported=!1,this.currentVideoId="",this.setCurrentVideoId=e=>{this.currentVideoId=e},this.resetState=()=>{this.innerStates=Object.assign({},j),this.currentVideoId="",this.isFirstFrameReported=!1,this.innerVideoAttributeStates=Object.assign({},C)},this.resetStateWhenSlideChange=()=>{this.innerStates=Object.assign({},j),this.innerVideoAttributeStates=Object.assign({},C)},this.reset=(e,t)=>{this.currentVideoId!==e&&(this.playEndEvent(t),this.blockEndEvent(Object.assign(Object.assign({},t),{endType:0})),this.innerStates=Object.assign({},j))},this.resetWhenSlideChange=e=>{this.playEndEvent(Object.assign(Object.assign({},e),this.innerVideoAttributeStates)),this.blockEndEvent(Object.assign(Object.assign(Object.assign({},e),{endType:0}),this.innerVideoAttributeStates)),this.innerVideoAttributeStates=Object.assign({},C)},this.handlePlay=()=>{this.innerStates.triggerPlayTimestamp=Date.now();const{firstTriggerPlayTimestamp:e}=this.innerStates;e||(this.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=e=>{const{id:t}=e,{playingStartTimestamp:i,isPause:o}=this.innerStates;t&&i&&!o&&(this.innerStates.pauseStartTimestamp=Date.now()),this.innerStates.isPause=!0},this.handleTimeUpdate=e=>{const{triggerPlayTimestamp:t,isFirstPlayReported:i,pauseStartTimestamp:o}=this.innerStates,{currentTime:n=0,duration:a=0,codecType:r,volume:s=0,muted:l=!0,bitrateInfo:d,buffered:c,currentSrc:u,error:g,readyState:v}=e;if(this.innerVideoAttributeStates.duration=a,this.innerVideoAttributeStates.currentTime=n,this.innerVideoAttributeStates.buffered=c,this.innerVideoAttributeStates.currentSrc=u,this.innerVideoAttributeStates.error=g,this.innerVideoAttributeStates.readyState=v,!(n<=0)){if(!i&&0!==t){const i=Date.now()-t-1e3*n,o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f(e)),k(e)),w(e)),S(e)),_()),{duration:Math.round(i),video_duration:Math.round(1e3*a),is_bytevc1:(null!=r?r:"").indexOf("h265")>-1?1:0,muted:l?1:0,bitrate_set:m(d),quality_bitrate:h(d)});p.W.event("video_play_quality",o),this.innerStates.isFirstPlayReported=!0,this.innerStates.playingStartTimestamp=Date.now(),this.innerStates.volume=s,this.innerStates.muted=l}if(this.innerStates.mutedStateChange=this.innerStates.mutedStateChange||this.innerStates.muted!==l,this.innerStates.muted=l,!this.isFirstFrameReported&&performance&&this.firstFrameEvent(),this.innerStates.isPause){const e=o?Date.now()-o:0;this.innerStates.totalPauseDuration+=e}this.blockEndEvent(Object.assign(Object.assign({},e),{endType:1})),this.innerStates.isInPlaybackStage=!0,this.innerStates.isPause=!1}},this.handleEnded=()=>{this.innerStates.isInPlaybackStage=!1},this.handleError=e=>{const{isVideoLoaded:t,isInPlaybackStage:i}=this.innerStates,{error:o,currentSrc:n="",codecType:a=""}=e,{code:r=0,message:s=""}=null!=o?o:{};if(t&&i){const t=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f(e)),k(e)),S(e)),_()),{error_code:String(r),error_info:s,play_url:n,is_bytevc1:a.indexOf("h265")>-1?1:0});p.W.event("video_play_failed",t)}else this.responseEvent(e)},this.handleWaiting=e=>{const{currentTime:t=0,duration:i=0}=e,{isInPlaybackStage:o,blockStartTimestamp:n,isPause:a}=this.innerStates;if(0!==t&&t!==i&&o&&!1===a&&0===n){const i=Object.assign(Object.assign(Object.assign({},f(e)),S(e)),_());p.W.event("video_block_start",i),this.innerStates.blockStartTimestamp=Date.now(),this.innerStates.blockStartProgress=1e3*t}},this.handleLoadStart=e=>{const t=Object.assign(Object.assign(Object.assign({},f(e)),S(e)),_());p.W.event("video_request",t),this.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=e=>{this.responseEvent(e),this.innerStates.isVideoLoaded=!0},this.videoFeedRequestEvent=()=>{p.W.event("feed_request",{request_method:"load_more"})},this.videoFeedResponseEvent=e=>{const{duration:t,list_length:i}=e,o={duration:t,is_success:i?"1":"0",request_method:"load_more",video_num:i};p.W.event("feed_request_response",o)},this.firstFrameEvent=()=>{const e=performance.timeOrigin,t={feed_total:e?Math.round(Date.now()-e):-1};p.W.event("first_feed_show_time",t),this.isFirstFrameReported=!0}}blockEndEvent(e){const{currentTime:t=0,codecType:i,endType:o,should_filter:n=!1}=e,{blockStartTimestamp:a,blockStartProgress:r,isInPlaybackStage:s,isVideoLoaded:l}=this.innerStates;if(l&&s&&0!==a&&(1e3*t!==r||0===o)){const s=Date.now()-a-(1e3*t-r),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f(e)),k(e)),w(e)),_()),{duration:Math.round(s),is_bytevc1:(null!=i?i:"").indexOf("h265")>-1?1:0,end_type:o,position:Math.round(1e3*t),should_filter:n?"1":"0"});p.W.event("video_block",l),this.innerStates.blockStartTimestamp=0}}responseEvent(e){const{loadStartTimestamp:t}=this.innerStates,{error:i,videoQuality:o,definition:n}=e,a=Date.now()-t,r=Object.assign(Object.assign(Object.assign(Object.assign({},f(e)),_()),S(e)),{error_code:String(null==i?void 0:i.code),duration:a,is_success:i?"0":"1",video_quality:o&&n?`${o}_${n}`:""});p.W.event("video_request_response",r)}playEndEvent(e){const{isFirstPlayReported:t,isFirstPlayEndReported:i,playingStartTimestamp:o,totalPauseDuration:n,firstTriggerPlayTimestamp:a,volume:r}=this.innerStates;if(!i){const{buffered:i,duration:s=0,currentTime:l=0,readyState:d,volume:c=0,muted:u}=e,g=o?Date.now()-o-n:0,m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f(e)),k(e)),w(e)),_()),{is_success:t?"1":"0",video_duration:isNaN(s)?0:Math.round(1e3*s),play_duration:Math.round(1e3*l),buffering:(null!=d?d:0)<=2?1:0,duration:g>=0?Math.round(g):0,wait_duration:o>0?null:Date.now()-a,cur_cache_duration:v(i),local_time_ms:Date.now(),volume_level:Number(c.toFixed(4)),volume_change:t?Number((c-r).toFixed(4)):0,muted:u?1:0,click_mute:this.innerStates.mutedStateChange?u?2:1:0,session_order:P++});p.W.event("video_play_end",m),this.innerStates.isFirstPlayEndReported=!0}}};T=(0,d.__decorate)([(0,c.G)()],T)},89811:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});var o,n,a=i(93797);!function(e){e.RemovePhotosensitiveStatus="tns_remove_photosensitive_status",e.ShowMaskLayer="tns_show_mask_layer",e.ShowPhotosensitiveRemoved="tns_show_photosensitive_removed",e.MaskLayerClickSkip="tns_mask_layer_click_skip",e.MaskLayerClickWatch="tns_mask_layer_click_watch"}(o||(o={})),function(e){e.General="general",e.Photosensitive="photosensitive"}(n||(n={}));const r={handleRemovePhotosensitiveStatus:e=>{a.W.event("tns_remove_photosensitive_status",{status:e})},handleShowMaskLayer:e=>{a.W.event("tns_show_mask_layer",e)},handleShowPhotosensitiveRemoved:e=>{a.W.event("tns_show_photosensitive_removed",e)},handleMaskLayerClickSkip:e=>{a.W.event("tns_mask_layer_click_skip",e)},handleMaskLayerClickWatch:e=>{a.W.event("tns_mask_layer_click_watch",e)}}},66688:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});var o,n=i(64047),a=i(57244),r=i(90293),s=i(93797);!function(e){e.Play="video_play",e.Finish="video_play_finish",e.Stop="play_time",e.SchedulePlay="schedule_video_play",e.ScheduleFinish="schedule_video_play_finish",e.ScheduleStop="schedule_video_play_time",e.PreviewVideoPlay="preview_video_play",e.PreviewVideoFinish="preview_video_play_finish",e.PreviewVideoStop="preview_play_time",e.Pause="video_pause"}(o||(o={}));let l=class{constructor(){this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.enterMethod="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.isDarkMode=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setIsDarkMode=e=>{this.isDarkMode=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1},this.updateVideoFocusTime=e=>{const{isPause:t,startPlayTimestamp:i}=this,{ttWebappFocusTime:o}=window;!t&&o&&(this.videoFocusTime+=o>i?e-o:e-i)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=(e,t=!1)=>{const{isFirstPlayReported:i,startPlayTimestamp:o,enterMethod:n}=this,{itemId:a,authorId:r,isScheduled:l,autoplayStatus:d=0,currentTime:c,searchId:p="",searchKeyword:u,searchResultId:g,questionId:m,playMode:h,isMute:_=!1,fromTab:v}=e;if(!c)return;let y=null;if(!i){const e=Object.assign({group_id:a,author_id:r,play_mode:this.getPlayModeForTea(h),autoplay_status:d,enter_method:n,search_id:p,search_keyword:u,search_result_id:g,question_id:m,from_tab:v,is_dark:this.isDarkMode?"1":"0"},this.getExtraParams()),i=l?"schedule_video_play":1===h?"preview_video_play":"video_play",o=t&&this.prevReportId===a;"video_play"===i&&(e.is_mute=_?"1":"0"),o||(y=i,s.W.event(i,e),this.isFirstPlayReported=!0,this.prevReportId=a)}return 0===o&&this.setStartPlay(),this.isPause=!1,y},this.handleEnded=e=>{this.playFinishEvent(e)},this.handlePause=e=>{const{currentTime:t,duration:i}=e;i!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{const{currentTime:t,duration:i}=e;0!==t&&t!==i&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){const{enter_method:t,playMode:i}=e,o={enter_method:t,play_mode:this.getPlayModeForTea(i)};s.W.event("video_pause",o)}this.isPause=!0}}getPlayModeForTea(e){let t="others";switch(e){case 2:t="browser_mode";break;case 0:t=this.isVideoDetail?"others":"one_column";break;case 1:t=this.isThreeColumnAuto?"list_auto":"list_mouse_trigger";break;case 3:t="large_video_mode";break;case 4:t="video_detail"}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.videoFocusTime=0}playFinishEvent(e){const{isFirstPlayEndReported:t,enterMethod:i}=this,{itemId:o,authorId:n,isScheduled:a,autoplayStatus:r=0,searchId:l="",searchKeyword:d,searchResultId:c,playMode:p,isMute:u}=e;if(!t){const e=Object.assign({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(p),autoplay_status:r,enter_method:i,search_id:l,search_keyword:d,search_result_id:c,is_dark:this.isDarkMode?"1":"0"},this.getExtraParams());void 0!==u&&(e.is_mute=u?"1":"0");const t=a?"schedule_video_play_finish":1===p?"preview_video_play_finish":"video_play_finish";s.W.event(t,e),this.isFirstPlayEndReported=!0}}playTimeEvent(e){const{startPlayTimestamp:t,enterMethod:i,videoFocusTime:o}=this,{itemId:n,authorId:a,isScheduled:r,autoplayStatus:l=0,searchId:d="",searchKeyword:c,searchResultId:p,questionId:u,playMode:g,isMute:m,fromTab:h}=e,{ttWebappFocusTime:_,ttWebappBlurTime:v}=window;let y=0;const b=Date.now();if(_?y=_<t?b-t:o+b-_:v&&(y=v>t?o:0),0!==t){const e=Object.assign({group_id:n,author_id:a,play_mode:this.getPlayModeForTea(g),autoplay_status:l,duration:Math.max(b-t,0),enter_method:i,search_id:d,search_keyword:c,search_result_id:p,question_id:u,focus_time:y,from_tab:h,is_dark:this.isDarkMode?"1":"0"},this.getExtraParams());void 0!==m&&(e.is_mute=m?"1":"0");const o=r?"schedule_video_play_time":1===g?"preview_play_time":"play_time";s.W.event(o,e),this.startPlayTimestamp=0}}getExtraParams(){var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,r.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}}};l=(0,n.__decorate)([(0,a.G)()],l)},12285:(e,t,i)=>{"use strict";i.d(t,{r:()=>a});var o,n=i(93797);!function(e){e.LoadMore="load_more",e.SlideUp="video_slide_up",e.SlideDown="video_slide_down",e.EnterBrowserMode="feed_enter",e.HotSlideUp="homepage_hot_slide_up",e.HotSlideDown="homepage_hot_slide_down"}(o||(o={}));const a={handleListMore:e=>{n.W.event("load_more",e)},handleVideoChange:(e,t)=>{const i="next"===t?"video_slide_up":"video_slide_down";n.W.event(i,e)},handleHotVideoChange:(e,t)=>{const i="next"===t?"homepage_hot_slide_up":"homepage_hot_slide_down";n.W.event(i,e)},handleEnterBrowser:e=>{n.W.event("feed_enter",e)}}},90010:(e,t,i)=>{"use strict";i.d(t,{hw:()=>o,Gb:()=>n,lF:()=>a,HW:()=>r,vN:()=>s,m8:()=>l,eL:()=>d,WD:()=>c,a9:()=>p,Ji:()=>u});const o="webapp_launch_mode",n="webapp_original_traffic_type",a="webapp_extra_data",r="webapp_session_id",s="webapp_tiktok_open",l="webapp_tiktok_privious",d="others",c="direct",p=/h5_t|h5_m|landing_page|webapp/,u=/embed/},93797:(e,t,i)=>{"use strict";i.d(t,{W:()=>c});var o=i(63747),n=i.n(o),a=i(90010),r=i(7306),s=i(68720),l=i(20738),d=i(41811);const c=new class{constructor(e=i(42753).Z,t=[],o=!1,n={}){this.instance=e,this.missEventsCaches=t,this.initialized=o,this.baseConfig=n,this.commonEventParams={},this.exposedExperiments=new Set,this.webExperimentExposeCallback=(e,t)=>{t&&this.exposedExperiments.add(e)}}get commonParams(){return this.commonEventParams}get isOff(){return!1}get initDimensionalData(){return this.dimensionalData||(this.dimensionalData=this.getDimensionalData()),this.dimensionalData}config(e){const{initConfig:t,commonHeaderConfig:i,commonEventParams:o}=e;if(this.initialized||this.init(t),i){const e=(0,r.pm)();this.baseConfig=n()(this.baseConfig,i,{evtParams:{page_name:o.page_name,enter_from:o.enter_from,object_id:e.object_id}}),this.instance.config(this.baseConfig)}o&&(this.commonEventParams=Object.assign(Object.assign({},this.commonEventParams),o))}beconEvent(e,t={}){if(this.initialized&&!this.isOff)try{this.instance.beconEvent(e,Object.assign(Object.assign({},this.commonEventParams),t))}catch(e){}}event(e,t={}){if(!this.isOff)if(this.initialized)try{this.instance.event(e,Object.assign(Object.assign({},this.commonEventParams),t)),this.missEventsCaches.length&&(this.missEventsCaches.forEach((e=>{this.instance.event(e[0],Object.assign(Object.assign({},this.commonEventParams),e[1]))})),this.missEventsCaches.length=0)}catch(e){}else this.missEventsCaches.push([e,t])}setDomain(e){this.instance.setDomain(e),this.instance.event("reactive_domain")}resetStayDuration(e,t,i){this.instance.resetStayDuration(e,t,i)}getDimensionalData(){var e;const t=(0,r.pm)();"microsoft-store"!==t["app-install-source"]&&"app-info://platform/microsoft-store"!==document.referrer||(t.source="msft");const{traffic_type:i,referer_video_id:o,refer:n,source:c="",referer_url:p}=t,u=(null!==(e=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==e?e:[])[1],g=(0,s.W)()?"mobile":"pc",m=(0,l.R)(),h=(0,d.c)();return(0,r.Gl)(t),this.dimensionalData={device:g,launch_mode:h,traffic_type:null!=i?i:m,source:a.a9.test(c)?"":c,referer_video_id:o,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,referer_url:p?decodeURIComponent(p):(null==n?void 0:n.replace(a.Ji,""))||u||document.referrer||a.WD},this.dimensionalData}getSessionId(e){let t=(0,r.St)(a.HW);return t||(t=e+Date.now().toString(),(0,r.D9)("webapp_session_id",t)),t}getLandingPage(e){const t=(0,r.St)(a.vN);return t?(this.commonEventParams.is_landing_page=0,t):(this.commonEventParams.is_landing_page=1,(0,r.D9)(a.vN,e),e)}getPreviousInfo(e){var t;let i={};try{i=JSON.parse(null!==(t=(0,r.St)(a.m8))&&void 0!==t?t:"null")||{}}catch(e){i={}}return location.href!==i.href||e!==i.pageName?((0,r.D9)(a.m8,JSON.stringify({href:location.href,pageName:e,twoPrev:i.pageName,twoPrevHref:i.href})),i.pageName):i.twoPrev}getVar(e,t){var i;const o=this.webExperimentExposeCallback.bind(null,e);return this.exposedExperiments.has(e)||this.instance.getVar(e,t,o),(null===(i=this.webExperiments)||void 0===i?void 0:i.values)&&this.webExperiments.values[e]||{}}initWebExperiments(){this.instance.getAllVars((e=>{this.webExperiments={values:e,isReady:!0}}))}init(e){var t;this.instance.init({site_name:"",enable_ttwebid:!0,channel_domain:e.channel_domain,app_id:e.id,enable_stay_duration:null===(t=e.enable_stay_duration)||void 0===t||t,channel_type:"tcpy",enable_ab_test:!0,ab_channel_domain:e.ab_channel_domain||e.channel_domain,commonParams:{page_type:!0}}),this.initialized=!0,this.instance.start(),this.initWebExperiments()}}},68720:(e,t,i)=>{"use strict";function o(){return Boolean(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))||navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1}i.d(t,{W:()=>o})},7306:(e,t,i)=>{"use strict";i.d(t,{pm:()=>n,Gl:()=>a,St:()=>r,D9:()=>s});var o=i(90293);function n(){if("undefined"==typeof document)return{};const e=(0,o.parse)(location.search,{arrayFormat:"bracket"});return Object.keys(e).forEach((t=>{var i,o;"string"!=typeof e[t]&&(e[t]=null!==(o=null===(i=e[t])||void 0===i?void 0:i[0])&&void 0!==o?o:"")})),e}function a(e){["utm_source","utm_medium","utm_campaign","utm_term","utm_content","referer_url","referer_video_id"].forEach((t=>{var i;e[t]&&s(t,null!==(i=e[t])&&void 0!==i?i:"")}))}function r(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function s(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}},41811:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});var o=i(90010),n=i(68720),a=i(7306),r=i(20738);function s(e){var t;const i=null!=e?e:(0,a.pm)();"microsoft-store"!==i["app-install-source"]&&"app-info://platform/microsoft-store"!==(null===document||void 0===document?void 0:document.referrer)||(i.source="msft");const{lm:s,refer:l,source:d="",is_from_webapp:c,referer_url:p="",_r:u}=i,g=(null!==(t=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==t?t:[])[1],m=(0,a.St)(o.hw,void 0),h="embed"===g||"embed"===l,_="creator_embed"===l,v="amp"===g||/^amp_\w+/.test(p);if(m&&!h&&!v&&!_)return m;const y=function({device:e,source:t,lm:i,siteOnePath:o,refer:n,refererUrl:a="",fromWebapp:r,queryR:s,trafficType:l}){const d="embed"===o||"embed"===n,c="creator_embed"===n,p="music_embed"===n,u="hashtag_embed"===n,g="curated_embed"===n,m="trending_embed"===n,h="amp"===o||/^amp_\w+/.test(a);return"msft"===t?"msft":"twa"===t?"twa":"push"===t?"push":"undefined"!=typeof window&&(navigator.standalone||"pc"===e&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches||"mobile"===e&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: fullscreen)").matches)?"pwa":"11"===i?"paid":d?"referral_embed":c?"referral_creator_embed":p?"referral_music_embed":u?"referral_hashtag_embed":m?"referral_trending_embed":g?"referral_curated_embed":h?"referral_amp":"tiktok_browse"===n?"referral_tiktok_browse":/google|yahoo|yandex|bing|naver|duckduckgo/gi.test(l)?"organic":"1"===s?"reflow":"webapp"===t||r?"webapp_reflow":n||a||"undefined"!=typeof document&&document.referrer?"referral":"direct"}({refer:l,device:(0,n.W)()?"mobile":"pc",refererUrl:p,lm:s,trafficType:(0,r.R)(),source:d,fromWebapp:c,siteOnePath:g,queryR:u});return(0,a.D9)(o.hw,y),y}},20738:(e,t,i)=>{"use strict";i.d(t,{R:()=>a});var o=i(90010),n=i(7306);function a(e){var t;let i;const a="undefined"!=typeof window;if(a&&(e=null!=e?e:document.referrer,i=(0,n.St)(o.Gb)),!i){if(e){const n=/https?:\/\/.*(google|yahoo|yandex|bing|naver|wikipedia|facebook|instagram|youtube|twitter|tiktok|buzzfeed|debate|greenlemon|cloudfront|multimedios|huffpost|sdpnoticias|pinterest|bluradio|eluniversal|elcomercio|insider|medialeaks|intheknow|distractify|telediario|msn|duckduckgo|linkedin|discord|whatsapp|telegram|viber|reddit|twitch|snapchat|messenger).*\/?/;i=(null!==(t=e.match(n))&&void 0!==t?t:[])[1]||o.eL}else i="no_referrer";a&&(0,n.D9)(o.Gb,i)}return i}},43683:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r});var o=i(93801),n=i(10533),a=i(27918);const r=(0,o.Z)(n.Z,{target:"e1aglo370"})((({theme:{direction:e}})=>(0,a.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifyBadge;")},27918:(e,t,i)=>{"use strict";i.d(t,{Mz:()=>o,XP:()=>n,gi:()=>a,GI:()=>r,wj:()=>s,FC:()=>l,Ph:()=>d,Cx:()=>c,f1:()=>u,YJ:()=>m,$K:()=>h,VZ:()=>_});const o=60,n=1150,a={":hover, :active, :link":{textDecoration:"none"}};function r({theme:e,typography:t,color:i,fontFamily:o,fontWeight:n,isLink:a=!1}){const r=a&&i?{":hover, :active, :link":{color:e.colors[i]}}:null;return[{color:i&&e.colors[i],fontFamily:o&&e.fontFamilies[o],fontWeight:n&&e.fontWeights[n]},t?e.typography[t]:void 0,r]}const s={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},l=e=>({display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",lineClamp:e,boxOrient:"vertical",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}),d={border:"none",background:"none",outline:"none",padding:0},c=e=>({position:"absolute",left:"0",[e]:"0",width:"100%",height:"1px",transform:"scaleY(0.5)"});var p;function u(...e){return e.map((({max:e,min:t,orientation:i,minAspectRatio:o,aspectRatio:n,maxAspectRatio:a,style:r={}})=>{if(!e&&!t&&!n)return{};let s="@media screen";return"number"==typeof t&&(s+=` and (min-width: ${t}px)`),"number"==typeof e&&(s+=` and (max-width: ${e}px)`),"string"==typeof i&&(s+=` and (orientation: ${i})`),"string"==typeof o&&(s+=` and (min-aspect-ratio: ${o})`),"string"==typeof n&&(s+=` and (aspect-ratio: ${n})`),"string"==typeof a&&(s+=` and (max-aspect-ratio: ${a})`),{[s]:r}}))}!function(e){e[e.Laptop=1920]="Laptop",e[e.HeaderWidth=1080]="HeaderWidth",e[e.NarrowLaptop=1072]="NarrowLaptop",e[e.Pad=768]="Pad",e[e.Phone=480]="Phone"}(p||(p={}));const g={ltr:{end:"right",start:"left",marginEnd:"marginRight",marginStart:"marginLeft",paddingEnd:"paddingRight",paddingStart:"paddingLeft"},rtl:{end:"left",start:"right",marginEnd:"marginLeft",marginStart:"marginRight",paddingEnd:"paddingLeft",paddingStart:"paddingRight"}};function m({direction:e,marginEnd:t,marginStart:i,end:o,start:n,textAlign:a,paddingEnd:r,paddingStart:s}){const l=g[e],d={};return a&&(d.textAlign=h(e,a)),t&&(d[l.marginEnd]=t),i&&(d[l.marginStart]=i),n&&(d[l.start]=n),o&&(d[l.end]=o),r&&(d[l.paddingEnd]=r),s&&(d[l.paddingStart]=s),d}function h(e,t){return g[e][t]}function _({theme:e,hover:t=e.colors.BGView,active:i=e.colors.BGInput}){return{transition:"background ease-in-out 200ms",":hover":{background:t},":active":{background:i}}}},13761:(e,t,i)=>{"use strict";i.d(t,{q:()=>g});var o,n=i(64047),a=i(11040),r=i(91051),s=i(7998);!function(e){e.Empty="rgba(18, 18, 18, 0.03)",e.Default="rgba(136, 136, 136, 0.5)"}(o||(o={}));const l=(0,s.Z)("span",{target:"e1e9er4e0"})((({shape:e,empty:t,isShowBackground:i})=>[{display:"inline-block",boxSizing:"border-box",margin:"0",padding:"0",fontFeatureSettings:'"tnum"',position:"relative",overflow:"hidden",color:"#fff",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",lineHeight:"32px",borderRadius:"square"===e?"0":"50%"},i?{backgroundColor:t?"rgba(18, 18, 18, 0.03)":"rgba(136, 136, 136, 0.5)"}:null]),"label:SpanAvatarContainer;"),d=(0,s.Z)("img",{target:"e1e9er4e1"})({width:"100%",height:"100%",objectFit:"cover"},"label:ImgAvatar;"),c=(0,s.Z)("svg",{target:"e1e9er4e2"})({width:"100%",height:"100%"},"label:SvgContainer;"),p={EMPTY:(0,a.jsx)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0)}),void 0),NON_EMPTY:(0,a.jsxs)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.74 269.054C74.383 234.242 109.361 210 150 210s75.617 24.242 91.26 59.054C215.978 288.463 184.336 300 150 300c-34.336 0-65.978-11.537-91.26-30.946z",fill:"#fff",fillOpacity:".75"},void 0),(0,a.jsx)("circle",{cx:"150",cy:"138",r:"55",fill:"#fff",fillOpacity:".75"},void 0)]}),void 0)},u=()=>!0,g=(0,r.memo)((function(e){const{src:t,empty:i=!1,backgroundImage:o,size:s=32,shape:c="circle",style:g={},onError:m=u,alt:h,imageLoading:_="lazy",e2eTag:v=""}=e,y=(0,n.__rest)(e,["src","empty","backgroundImage","size","shape","style","onError","alt","imageLoading","e2eTag"]),[b,f]=(0,r.useState)(!1),x=(0,r.useCallback)((e=>{var t;m&&f(null===(t=m(e))||void 0===t||t)}),[m]),k=t&&!b,w=i?"EMPTY":"NON_EMPTY";return(0,a.jsx)(l,Object.assign({shape:c,isShowBackground:Boolean(k),empty:i,style:Object.assign(Object.assign({},g),{width:s,height:s}),"data-e2e":v},y,{children:k?(0,a.jsx)(d,{loading:_,onError:x,onLoad:e.onLoad,alt:h,src:t},void 0):p[w]}),void 0)}))},80537:(e,t,i)=>{"use strict";i.d(t,{W:()=>h});var o=i(64047),n=i(11040),a=i(91051),r=i(12820),s=i(34103),l=i(7998);const d="rgb(208, 209, 211)",c=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,":hover":{borderColor:d,backgroundColor:e.colors.BGCreation3},":active":{borderColor:d,backgroundColor:e.colors.BGMessageIcon},":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary}};case"line":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.Primary,borderColor:e.colors.Primary,backgroundColor:e.colors.BGSecondary2,":hover":{backgroundColor:"rgba(254, 44, 85, 0.06)"},":active":{backgroundColor:"rgba(254, 44, 85, 0.16)"},":disabled":{borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary,pointerEvents:"none"}};case"primary":return{borderRadius:"4px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"},":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2,pointerEvents:"none"}};case"round":return{borderRadius:"52px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.ToastDefault,":hover":{},":active":{},":disabled":{}};default:return{":hover":{},":active":{},":disabled":{}}}},p="ProximaNova, PingFangSC, sans-serif",u="SofiaPro, PingFangSC, sans-serif",g={largeNew:{minWidth:"120px",minHeight:"46px",fontSize:"16px",lineHeight:"22px",fontWeight:700,fontFamily:p},large:{minWidth:"168px",minHeight:"48px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},medium:{minWidth:"164px",minHeight:"36px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},small:{minWidth:"106px",minHeight:"28px",fontSize:"16px",lineHeight:"22px",fontWeight:600,fontFamily:p},tiny:{minWidth:"96px",minHeight:"28px",fontFamily:p,fontSize:"14px",lineHeight:"17px",fontWeight:600}},m=(0,l.Z)("button",{shouldForwardProp:e=>(0,s.Z)(e)&&"loading"!==e,target:"ehk74z00"})((({buttonTheme:e="default",size:t="large",theme:i,loading:o=!1})=>[c({theme:i,buttonTheme:e}),g[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),h=(0,a.memo)((function(e){var{buttonTheme:t,size:i,type:a="button",loading:s=!1,loadingTheme:l="primary",loadingSize:d="medium",children:c}=e,p=(0,o.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,n.jsxs)(m,Object.assign({type:a,buttonTheme:t,loading:s,size:i},p,{children:[c,s&&(0,n.jsx)(r.$,{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},theme:l,size:d},void 0)]}),void 0)}))},12820:(e,t,i)=>{"use strict";i.d(t,{$:()=>u});var o=i(11040),n=i(74820),a=i(91051),r=i(3624),s=i(7998);const l=(0,s.Z)("div",{target:"ef2t4c20"})((({center:e})=>({display:"flex",flexDirection:"column",alignItems:e?"center":"flex-start"})),"label:DivContainer;"),d=(0,r.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),c=(0,s.Z)("svg",{target:"ef2t4c21"})({margin:"0 !important",fill:"none",animation:`${d} 1s linear infinite`},"label:SvgBox;"),p={small:16,medium:18,large:20},u=(0,a.memo)((function({theme:e="primary",size:t="medium",center:i=!1,style:r={},fill:s=""}){const{colors:d}=(0,n.u)(),u=(0,a.useMemo)((()=>{const{BGCreation:t,BGPrimary:i,Primary:o}=d;return s||{white:t,primary:i,transparent:o}[e]}),[d,s,e]),g="string"==typeof t?p[t]:t,m=Object.assign(Object.assign({},r),{width:g,height:g});return(0,o.jsx)(l,Object.assign({center:i,style:m},{children:(0,o.jsx)(c,Object.assign({width:g,height:g,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:u,d:"M0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 9.82843 17.3284 10.5 16.5 10.5C15.6716 10.5 15 9.82843 15 9C15 5.68629 12.3137 3 9 3C5.68629 3 3 5.68629 3 9C3 12.3137 5.68629 15 9 15C10.415 15 11.7119 14.512 12.7375 13.6941C13.3852 13.1775 14.329 13.2838 14.8455 13.9315C15.3621 14.5792 15.2558 15.5229 14.6081 16.0395C13.0703 17.266 11.1188 18 9 18C4.02944 18 0 13.9706 0 9Z"},void 0)}),void 0)}),void 0)}))},30074:(e,t,i)=>{"use strict";i.d(t,{g:()=>y,B:()=>x});var o=i(64047),n=i(11040),a=i(91051),r=i(32667),s=i(3624),l=i(7998);const d=36,c=(0,s.F4)({"25%":{cx:100,r:1.2*d},"50%":{cx:140,r:d},"75%":{cx:100,r:.6*d},"100%":{cx:60,r:d}}),p=(0,s.F4)({"25%":{cx:100,r:24},"50%":{cx:60,r:d},"75%":{cx:100,r:1.2*d},"100%":{cx:140,r:d}});var u;!function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Black=2]="Black"}(u||(u={}));const g={strokeWidth:0,r:d,cy:99},m={0:{fill:"#fe2c55",cx:128,animation:`${p} 1s cubic-bezier(.05, 0, 1, 1) infinite`},1:{fill:"#3af2ff",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`},2:{fill:"#0f0f0f",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`}},h=(0,l.Z)("circle",{target:"e1ugmybf0"})((({circleType:e,isBlack:t})=>[g,m[e],t?{fill:"#000"}:null]),"label:Circle;"),_=(0,l.Z)("svg",{target:"e1ugmybf1"})({display:"block"},(({center:e})=>e?{margin:"6px auto"}:null),"label:SvgContainer;"),v={default:48,small:32},y=(0,a.memo)((0,a.forwardRef)((function(e,t){var{size:i=48,center:a=!1,maskKey:r=Date.now()}=e,s=(0,o.__rest)(e,["size","center","maskKey"]);const l="string"==typeof i?v[i]:i;return(0,n.jsxs)(_,Object.assign({center:a,preserveAspectRatio:"none",viewBox:"0 0 200 200",width:l,height:l},s,{ref:t},{children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("mask",Object.assign({id:`redhole-${r}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(h,{circleType:0,isBlack:!0},void 0)]}),void 0),(0,n.jsxs)("mask",Object.assign({id:`greenhole-${r}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(h,{circleType:1,isBlack:!0},void 0)]}),void 0)]},void 0),(0,n.jsx)(h,{strokeWidth:2,stroke:"#3AF2FF",circleType:2},void 0),(0,n.jsx)(h,{circleType:1,mask:`url(#redhole-${r})`},void 0),(0,n.jsx)(h,{circleType:0,mask:`url(#greenhole-${r})`},void 0)]}),void 0)})));let b=null;function f(e){var t;return b||(b=document.createElement("div"),b.style.cssText="display: inline-block; position: fixed; left: calc(50% - 15px); top: 38%;",(e&&null!==(t=document.querySelector(e))&&void 0!==t?t:document.body).appendChild(b)),b}const x={show:e=>r.render((0,n.jsx)(y,{size:30},void 0),f(e)),hide:()=>b?r.unmountComponentAtNode(f()):void 0}},9578:(e,t,i)=>{"use strict";i.d(t,{Od:()=>y,N0:()=>f,kQ:()=>b,Xu:()=>x});var o=i(64047),n=i(11040),a=i(3624),r=i(7998),s=i(27918);const l=(0,a.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),d=(0,r.Z)("div",{target:"e12rwi320"})((({theme:{colors:e}})=>({backgroundColor:e.BGPlaceholderDefault,borderRadius:"4px",backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",width:"100%",height:"100%"})),"label:DivBaseComponent;"),c=(0,r.Z)("div",{target:"e12rwi321"})({width:"100%"},"label:DivComponent;"),p=(0,r.Z)(d,{target:"e12rwi322"})({borderRadius:"100%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledAvatar;"),u=(0,r.Z)(d,{target:"e12rwi323"})({height:"16px",width:"40%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTitle;"),g=(0,r.Z)(d,{target:"e12rwi324"})((({theme:e})=>[{backgroundColor:"transparent",backgroundImage:"unset"},(0,s.YJ)({direction:e.direction})]),"label:StyledParagraph;"),m=(0,r.Z)(d,{target:"e12rwi325"})((({shrinkLastLine:e=!0})=>({height:"12px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`,":last-child":{width:e?"60%":"100%",marginTop:"12px"},":not(:last-child)":{marginBottom:"8px"}})),"label:StyledParagraphLine;"),h=(0,r.Z)(d,{target:"e12rwi326"})({minHeight:"100px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledVideoCover;"),_=(0,r.Z)(d,{target:"e12rwi327"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledButton;"),v=(0,r.Z)(d,{target:"e12rwi328"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTextBox;");function y(e){const{children:t,style:i,className:a}=e,r=(0,o.__rest)(e,["children","style","className"]);return(0,n.jsx)(c,Object.assign({style:i,className:a},r,{children:t}),void 0)}function b(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(u,Object.assign({style:t,className:i},a),void 0)}function f(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(p,Object.assign({style:t,className:i},a),void 0)}function x(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(h,Object.assign({style:t,className:i},a),void 0)}y.Paragraph=function(e){const{lines:t=2,shrinkLastLine:i=!0,style:a,className:r}=e,s=(0,o.__rest)(e,["lines","shrinkLastLine","style","className"]),l=[];for(let e=0;e<t;++e)l.push((0,n.jsx)(m,{shrinkLastLine:i},e));return(0,n.jsx)(g,Object.assign({style:a,className:r},s,{children:l}),void 0)},y.Title=b,y.Avatar=f,y.VideoCover=x,y.Button=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(_,Object.assign({style:t,className:i},a),void 0)},y.TextBox=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(v,Object.assign({style:t,className:i},a),void 0)}},25818:(e,t,i)=>{"use strict";i.d(t,{r:()=>c});var o=i(64047),n=i(11040),a=i(91051),r=i(7998);const s=(0,r.Z)("div",{target:"eoeunh00"})((({checked:e,backgroundColor:t,width:i,height:o})=>({position:"relative",width:null!=i?i:"44px",height:null!=o?o:"24px",left:"0",top:"0",background:null!=t?t:e?"#0be09b":"rgba(22, 24, 35, 0.12)",borderRadius:"100px",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)",":hover":{background:null!=t?t:e?"linear-gradient(0deg, rgba(0, 0, 0, .08), rgba(0, 0, 0, .08)), #0be09b":"rgba(22, 24, 35, 0.16)"}})),"label:DivSwitchWrapper;"),l=(0,r.Z)("span",{target:"eoeunh01"})((({checked:e,height:t,width:i,backgroundColor:o,left:n})=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:null!=i?i:"20px",height:null!=t?t:"20px",left:n,top:"50%",transform:e?"translate(-100%, -50%);":"translateY(-50%)",borderRadius:"100px",background:null!=o?o:"#fff",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.15)",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)"})),"label:SpanSwitchIcon;"),d=(0,r.Z)("button",{target:"eoeunh02"})((({theme:{colors:e,typography:t,fontFamilies:i}})=>[t.P2,{border:"none",background:"none",outline:"none",padding:0,position:"relative",overflow:"visible",display:"inline-flex",alignItems:"center",color:e.TextPrimary,fontFamily:i.Proxima,cursor:"pointer",":disabled":{cursor:"not-allowed",opacity:.34}}]),"label:ButtonSwitchContainer;"),c=function(e){var{className:t,style:i={},size:r="medium",width:c=44,height:p=24,padding:u=2,indicatorSize:g=20,indicatorColor:m,indicatorCheckedColor:h,indicatorUnCheckedColor:_,indicatorIcon:v,indicatorCheckedIcon:y,indicatorUnCheckedIcon:b,backgroundColor:f,backgroundCheckedColor:x,backgroundUnCheckedColor:k,content:w="",disabled:S=!1,checked:j,defaultChecked:C=!1,e2eData:P,onChange:T}=e,O=(0,o.__rest)(e,["className","style","size","width","height","padding","indicatorSize","indicatorColor","indicatorCheckedColor","indicatorUnCheckedColor","indicatorIcon","indicatorCheckedIcon","indicatorUnCheckedIcon","backgroundColor","backgroundCheckedColor","backgroundUnCheckedColor","content","disabled","checked","defaultChecked","e2eData","onChange"]);const[L,I]=(0,a.useState)(null!=j?j:C),A=null!=j?j:L,E=(0,a.useCallback)((e=>{null==e||e.stopPropagation(),null==T||T(!A,e),I(!A)}),[T,A]);return(0,a.useEffect)((()=>{I(null!=j?j:C)}),[C,j]),(0,n.jsx)(d,Object.assign({"data-e2e":P,type:"button",role:"switch",disabled:S,onClick:E},O,{children:(0,n.jsx)(s,Object.assign({checked:A,backgroundColor:A?null!=x?x:f:null!=k?k:f,width:`${c}px`,height:`${p}px`},{children:(0,n.jsx)(l,Object.assign({checked:A,backgroundColor:A?null!=h?h:m:null!=_?_:m,width:`${g}px`,height:`${g}px`,left:A?`calc(100% - ${u}px)`:`${u}px`},{children:A?null!=y?y:v:null!=b?b:v}),void 0)}),void 0)}),void 0)}},35468:(e,t,i)=>{"use strict";i.d(t,{h:()=>b});var o=i(11040),n=(i(29985),i(47883)),a=i(58126),r=i(3624),s=i(7998);const l=(0,r.F4)({"0%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"},"100%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"}}),d=(0,r.F4)({"0%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"},"100%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"}}),c=(0,a.iv)({"&-enter":{opacity:"0"},"&-enter-active":{animationName:d,animationDuration:"0.3s"},"&-leave-active":{animationName:l,animationDuration:"0.3s"}}),p=(0,a.iv)({fontFamily:"ProximaNova, PingFangSC, sans-serif",fontWeight:600,position:"fixed",top:"16px",left:"0px",color:"#fff",zIndex:1002,width:"100%",pointerEvents:"none",userSelect:"none","&-notice":{padding:"8px 0",textAlign:"center",":first-of-type":{marginTop:"-8px"}},"&-notice-content":{backgroundColor:"rgba(84, 84, 84, 0.92)",display:"inline-block",padding:"10px 8px",pointerEvents:"all",maxWidth:"100%",borderRadius:"2px"}}),u={auto:{},full:{width:"100vw",borderRadius:"0"},padding:{width:"calc(100vw - 40px)",margin:"0 auto"},half:{width:"50vw"}},g=(0,s.Z)("div",{target:"e1wz89c90"})((({widthType:e="auto",isRTL:t})=>[u[e],{direction:t?"rtl":"ltr"}]),"label:DivMessageContainer;");let m,h=[],_=1;const v={prefixCls:p,transitionName:c,style:{top:void 0},getContainer:void 0,maxCount:void 0,type:"default"},y={success:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3Ljg0MDQgNi44NTk4NkMxOC4wMzc3IDYuNjYyMDcgMTguMzU4NyA2LjY2NDI1IDE4LjU1MzMgNi44NjQ3MUwxOS40NTc0IDcuNzk2MjlDMTkuNjQ3NSA3Ljk5MjE3IDE5LjY0NTQgOC4zMDQzMiAxOS40NTI2IDguNDk3NTlMMTAuNTU4MiAxNy40MTYzQzEwLjEwNSAxNy44NzA3IDkuMzczMzMgMTcuODU5NiA4LjkzMzY2IDE3LjM5MTZMNC44MzY4MSAxMy4wMzA2QzQuNjQ5OTEgMTIuODMxNyA0LjY1NzExIDEyLjUxOTYgNC44NTI5OSAxMi4zMjk1TDUuNzgzNzQgMTEuNDI2MUM1Ljk4NDE4IDExLjIzMTUgNi4zMDUxNCAxMS4yMzg5IDYuNDk2MzkgMTEuNDQyNUw5Ljc4MjE0IDE0Ljk0MDFMMTcuODQwNCA2Ljg1OTg2WiIgZmlsbD0iIzBCRTA5QiIvPgo8L3N2Zz4K",fail:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuNDY4IDEzTDcuMjAwNCA4LjczMjM4QzYuOTg4ODYgOC41MjA4NSA2Ljk4ODg2IDguMTc3ODggNy4yMDA0IDcuOTY2MzVMNy45NjY0MyA3LjIwMDMyQzguMTc3OTcgNi45ODg3OCA4LjUyMDkzIDYuOTg4NzggOC43MzI0NiA3LjIwMDMyTDEzLjAwMDEgMTEuNDY3OUwxNy4yNjc3IDcuMjAwMzJDMTcuNDc5MiA2Ljk4ODc4IDE3LjgyMjIgNi45ODg3OCAxOC4wMzM3IDcuMjAwMzJMMTguNzk5OCA3Ljk2NjM1QzE5LjAxMTMgOC4xNzc4OCAxOS4wMTEzIDguNTIwODUgMTguNzk5OCA4LjczMjM4TDE0LjUzMjEgMTNMMTguNzk5OCAxNy4yNjc2QzE5LjAxMTMgMTcuNDc5MiAxOS4wMTEzIDE3LjgyMjEgMTguNzk5OCAxOC4wMzM3TDE4LjAzMzcgMTguNzk5N0MxNy44MjIyIDE5LjAxMTIgMTcuNDc5MiAxOS4wMTEyIDE3LjI2NzcgMTguNzk5N0wxMy4wMDAxIDE0LjUzMjFMOC43MzI0NiAxOC43OTk3QzguNTIwOTMgMTkuMDExMiA4LjE3Nzk3IDE5LjAxMTIgNy45NjY0MyAxOC43OTk3TDcuMjAwNCAxOC4wMzM3QzYuOTg4ODYgMTcuODIyMSA2Ljk4ODg2IDE3LjQ3OTIgNy4yMDA0IDE3LjI2NzZMMTEuNDY4IDEzWiIgZmlsbD0iI0ZGNEMzQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},b={open:function(e){const t=void 0!==e.duration?e.duration:3,i=e.key||_++,a=new Promise((a=>{var r;const s={key:i,duration:t,className:e.className,content:(0,o.jsxs)(g,Object.assign({isRTL:e.isRTL,widthType:e.widthType,"data-e2e":e.e2eTag,style:Object.assign({display:"flex",justifyContent:"center",alignItems:"center"},null!==(r=e.style)&&void 0!==r?r:{})},{children:[e.type&&"default"!==e.type&&(0,o.jsx)("img",{src:y[e.type],style:Object.assign({width:"24px",height:"24px"},e.isRTL?{marginLeft:"8px"}:{marginRight:"8px"})},void 0),(0,o.jsx)("span",{children:e.content},void 0)]}),void 0),onClose:()=>("function"==typeof e.onClose&&e.onClose(),a(!0))};var l;e.getContainer?n.Z.newInstance(Object.assign(Object.assign({},v),{style:{position:"absolute",top:void 0},getContainer:e.getContainer}),(e=>{e.notice(s),h.push(e)})):(l=e=>{e.notice(s)},m?l(m):n.Z.newInstance(Object.assign({},v),(e=>{m?l(m):(m=e,l(e),h.push(e))})))})),r=()=>{m&&m.removeNotice(i)};return r.then=(e,t)=>a.then(e,t),r.promise=a,r},destroy(){m&&(m.destroy(),m=null),h.length>0&&(h.forEach((e=>e.destroy())),h=[])}}},17936:(e,t,i)=>{"use strict";i.d(t,{u:()=>y});var o=i(64047),n=i(11040),a=i(74820),r=i(91051),s=i(58126),l=i(69062);const d={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjNTQ1NDU0IiBmaWxsLW9wYWNpdHk9Ii45MiIvPjwvc3ZnPg==",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},c={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0iIzI1MjUyNSIvPgo8L3N2Zz4K",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},p="rotate(180deg)",u="rotate(90deg)",g="rotate(-90deg)",m={bottom:{top:"-8px",left:"50%",marginLeft:"-18px"},bottomLeft:{top:"-8px",left:"25%",marginLeft:"-18px"},bottomRight:{top:"-8px",right:"25%",marginRight:"-18px"},left:{transform:u,right:"-22px",top:"50%",marginTop:"-5px"},leftBottom:{transform:u,right:"-22px",bottom:"25%",marginTop:"5px"},leftTop:{transform:u,right:"-22px",top:"25%"},right:{transform:g,left:"-22px",top:"50%",marginTop:"-5px"},rightBottom:{transform:g,left:"-22px",bottom:"25%",marginTop:"5px"},rightTop:{transform:g,left:"-22px",top:"25%"},top:{transform:p,bottom:"-8px",left:"50%",marginLeft:"-18px"},topLeft:{transform:p,bottom:"-8px",left:"25%",marginLeft:"-18px"},topRight:{transform:p,bottom:"-8px",right:"25%",marginRight:"-18px"}};function h({tooltipTheme:e,themeCtx:{colors:t,isDark:i}}){return"black"===e?{padding:"7.5px 12px",backgroundColor:t.ToastDefault,color:t.ConstTextInverse}:"white"===e?{backgroundColor:i?t.ToastDefault:t.BGPrimary,color:t.TextPrimary,padding:0}:"blue"===e?{backgroundColor:t.ConstSecondary2,color:t.ConstTextInverse,padding:0}:null}const _=({themeCtx:e,themeCtx:{fontFamilies:t},tooltipTheme:i="black",withPadding:o=!0,arrow:n=!0,rtl:a=!1,placement:r="top",arrowStyle:l={}})=>(0,s.iv)({fontFamily:t.Proxima,boxSizing:"border-box",margin:"0",padding:"0",color:"rgba(0, 0, 0, 0.65)",fontSize:"14px",listStyle:"none",fontFeatureSettings:'"tnum"',position:"absolute",zIndex:1060,display:"block",maxWidth:"250px",visibility:"visible","&-hidden":{display:"none"}},function({themeCtx:e,tooltipTheme:t,withPadding:i}){const{fontWeights:o,typography:n}=e;return{"&-inner":(0,s.iv)({textAlign:"left",textDecoration:"none",borderRadius:"8px",fontWeight:o.semiBold},n.P2,h({themeCtx:e,tooltipTheme:t}),i&&{padding:"8px"})}}({themeCtx:e,tooltipTheme:i,withPadding:o}),function({arrow:e,tooltipTheme:t,placement:i,themeCtx:o,arrowStyle:n}){return{"&-arrow":(0,s.iv)({display:e?"block":"none",position:"absolute",width:"36px",height:"8px",backgroundImage:o.isDark?`url(${c[t]})`:`url(${d[t]})`},m[i],n)}}({themeCtx:e,tooltipTheme:i,placement:r,arrow:n,arrowStyle:l}),a&&{direction:"rtl","& *":{direction:"rtl"}}),v=e=>{var{className:t,themeCtx:i,tooltipTheme:a,withPadding:r,rtl:d,arrow:c,prefixCls:p,placement:u,arrowStyle:g}=e,m=(0,o.__rest)(e,["className","themeCtx","tooltipTheme","withPadding","rtl","arrow","prefixCls","placement","arrowStyle"]);return(0,n.jsx)(l.Z,Object.assign({prefixCls:(0,s.cx)(t,_({themeCtx:i,tooltipTheme:a,withPadding:r,rtl:d,arrow:c,placement:u,arrowStyle:g})),placement:u},m),void 0)},y=(0,r.memo)((function(e){var{children:t,placement:i="top",align:s={}}=e,l=(0,o.__rest)(e,["children","placement","align"]);const d=(0,a.u)(),c=((e,t={})=>(0,r.useMemo)((()=>{let i;switch(e){case"top":case"topLeft":case"topRight":i=[0,-10];break;case"bottom":case"bottomLeft":case"bottomRight":i=[0,10];break;case"leftTop":case"left":case"leftBottom":i=[-10,0];break;default:i=[10,0]}return Object.assign({offset:i},t)}),[t,e]))(i,s);return(0,n.jsx)(v,Object.assign({},l,{themeCtx:d,placement:i,align:c},{children:t}),void 0)}))},93943:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var o,n,a,r,s,l,d=i(91051);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},c.apply(this,arguments)}const p=function(e){return d.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 200 200",width:"1em",height:"1em"},e),o||(o=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M189.562 1.164a9.278 9.278 0 019.279 9.279v11.546a1.031 1.031 0 01-2.062 0V10.443a7.217 7.217 0 00-7.217-7.217h-11.546a1.031 1.031 0 010-2.062h11.546z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M188.394 0a9.278 9.278 0 019.279 9.278v11.547a1.031 1.031 0 01-2.062 0V9.278a7.217 7.217 0 00-7.217-7.216h-11.546a1.031 1.031 0 010-2.062h11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M190.722 2.328A9.278 9.278 0 01200 11.606v11.547a1.03 1.03 0 11-2.061 0V11.606a7.217 7.217 0 00-7.217-7.216h-11.546a1.03 1.03 0 110-2.062h11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),n||(n=d.createElement("path",{fill:"url(#qr-code-wrapper_svg__pattern0)",d:"M12.675 12.674h174.656v174.651H12.675V12.674z"})),a||(a=d.createElement("path",{fill:"white",d:"M80.931 81.443h38.146v38.144H80.931V81.443z"})),r||(r=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M1.163 10.443a9.278 9.278 0 019.279-9.279h11.546a1.03 1.03 0 110 2.062H10.442a7.216 7.216 0 00-7.217 7.217v11.546a1.031 1.031 0 11-2.062 0V10.443z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M0 9.278A9.278 9.278 0 019.277 0h11.546a1.031 1.031 0 110 2.062H9.278A7.216 7.216 0 002.06 9.278v11.547a1.03 1.03 0 01-2.062 0V9.278z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M2.327 11.606a9.278 9.278 0 019.279-9.278h11.546a1.031 1.031 0 110 2.062H11.606a7.216 7.216 0 00-7.217 7.216v11.547a1.03 1.03 0 01-2.062 0V11.606z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),s||(s=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M198.841 189.558a9.278 9.278 0 01-9.279 9.278h-11.546a1.03 1.03 0 110-2.062h11.546a7.217 7.217 0 007.217-7.216v-11.547a1.03 1.03 0 012.062 0v11.547z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M197.673 188.393a9.278 9.278 0 01-9.278 9.278h-11.547a1.03 1.03 0 110-2.061h11.547a7.217 7.217 0 007.216-7.217v-11.546a1.03 1.03 0 112.062 0v11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M200.001 190.722a9.278 9.278 0 01-9.279 9.278h-11.546a1.032 1.032 0 010-2.062h11.546a7.217 7.217 0 007.217-7.216v-11.547a1.03 1.03 0 112.062 0v11.547z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),l||(l=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M10.442 198.836a9.278 9.278 0 01-9.279-9.278v-11.546a1.03 1.03 0 112.062 0v11.546a7.216 7.216 0 007.217 7.216h11.546a1.031 1.031 0 010 2.062H10.442z",clipRule:"evenodd"})))}},1723:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var o,n=i(91051);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a.apply(this,arguments)}const r=function(e){return n.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 8",width:"1em",height:"1em"},e),o||(o=n.createElement("path",{d:"M0 8c7 0 10-8 12-8s5 8 12 8z"})))}},32863:(e,t,i)=>{"use strict";e.exports=i.p+"b3dd0b7f20ed0c4384f1.png"},59126:(e,t,i)=>{"use strict";e.exports=i.p+"25b0d4f3e6779acb114f.png"},6998:(e,t,i)=>{"use strict";e.exports=i.p+"1db62e2b736e1cc835a3.png"},25555:(e,t,i)=>{"use strict";e.exports=i.p+"f1596f39e85631c052c4.png"},22745:(e,t,i)=>{"use strict";e.exports=i.p+"b5b0c8fab7d18dff2e2a.png"},24400:(e,t,i)=>{"use strict";e.exports=i.p+"2097820e1be2c7a06bf8.png"},11723:(e,t,i)=>{"use strict";e.exports=i.p+"a028a67e740da091b89b.png"},40567:(e,t,i)=>{"use strict";e.exports=i.p+"0433f99adc0a040142f6.png"},60871:(e,t,i)=>{"use strict";e.exports=i.p+"d60c66b9f5dc9647f3a3.png"},4825:(e,t,i)=>{"use strict";e.exports=i.p+"c287bca871661e22ee8a.png"},50121:(e,t,i)=>{"use strict";e.exports=i.p+"47624c235266dedd8e4d.png"},21145:(e,t,i)=>{"use strict";e.exports=i.p+"863338800afbd636244a.png"},30008:(e,t,i)=>{"use strict";e.exports=i.p+"c287bca871661e22ee8a.png"},19891:(e,t,i)=>{"use strict";e.exports=i.p+"c65e7ef361482406e0ea.gif"},34994:(e,t,i)=>{"use strict";e.exports=i.p+"b6d3cc69d3525571aef0.gif"},24112:(e,t,i)=>{"use strict";e.exports=i.p+"c4c40812758dc8175106.png"},11580:(e,t,i)=>{"use strict";e.exports=i.p+"0dbff97a224480a207b4.png"},36011:()=>{},97936:()=>{}},e=>{e.O(0,[800,1815,8040,8136,1192,5294,118,4736],(()=>(58637,e(e.s=58637)))),e.O()}]);